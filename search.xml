<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>2021年秋季运动会</title>
    <url>/archives/6e6bd6f1/</url>
    <content><![CDATA[<p>用pr做了一个电子相册，参考： <a href="https://www.bilibili.com/video/BV1Wx41177ps">使用 Premiere 把照片变成唯美动画效果。</a>  </p>
<div align=center class="aspect-ratio">
    <iframe src="https://player.bilibili.com/player.html?aid=891682348&&page=1&as_wide=1&high_quality=1&danmaku=0" 
    scrolling="no" 
    border="0" 
    frameborder="no" 
    framespacing="0" 
    high_quality=1
    danmaku=1 
    allowfullscreen="true"> 
    </iframe>
</div>


]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>pr</tag>
        <tag>电子相册</tag>
        <tag>视频</tag>
      </tags>
  </entry>
  <entry>
    <title>2022年春季运动会</title>
    <url>/archives/c01c3cb7/</url>
    <content><![CDATA[<p>用AE做了一个电子相册。</p>
<div align=center class="aspect-ratio">
    <iframe src="https://player.bilibili.com/player.html?aid=896125456&&page=1&as_wide=1&high_quality=1&danmaku=0" 
    scrolling="no" 
    border="0" 
    frameborder="no" 
    framespacing="0" 
    high_quality=1
    danmaku=1 
    allowfullscreen="true"> 
    </iframe>
</div>


]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>pr</tag>
        <tag>电子相册</tag>
        <tag>视频</tag>
      </tags>
  </entry>
  <entry>
    <title>Alist挂载网盘</title>
    <url>/archives/c6592a10/</url>
    <content><![CDATA[<p><strong>AList 开源项目地址：<a href="https://github.com/alist-org/alist">https://github.com/alist-org/alist</a></strong></p>
<p><strong>AList 文档：<a href="https://alist.nn.ci/zh/guide/">https://alist.nn.ci/zh/guide/</a></strong></p>
<p>本地启动（在alist所在目录打开cmd）：<code>alist server</code></p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>默认安装在 <code>/opt/alist</code> 中。 自定义安装路径，将安装路径作为第二个参数添加，必须是绝对路径（如果路径以 alist 结尾，则直接安装到给定路径，否则会安装在给定路径 alist 目录下），如 安装到 <code>/root</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># Install</span><br><span class="line">curl -fsSL &quot;https://alist.nn.ci/v3.sh&quot; | bash -s install /root</span><br><span class="line"># update</span><br><span class="line">curl -fsSL &quot;https://alist.nn.ci/v3.sh&quot; | bash -s update </span><br><span class="line"># Uninstall</span><br><span class="line">curl -fsSL &quot;https://alist.nn.ci/v3.sh&quot; | bash -s uninstall /root</span><br></pre></td></tr></table></figure>

<ul>
<li>启动: <code>systemctl start alist</code></li>
<li>关闭: <code>systemctl stop alist</code></li>
<li>状态: <code>systemctl status alist</code></li>
<li>重启: <code>systemctl restart alist</code></li>
</ul>
<p>安装完成后：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">访问地址：http://YOUR_IP:5244/</span><br><span class="line"></span><br><span class="line">配置文件路径：/root/alist/data/config.json</span><br><span class="line">---------如何获取密码？--------</span><br><span class="line">先cd到alist所在目录:</span><br><span class="line">cd /root/alist</span><br><span class="line">随机设置新密码:</span><br><span class="line">./alist admin random</span><br><span class="line">或者手动设置新密码:</span><br><span class="line">./alist admin set NEW_PASSWORD</span><br><span class="line">----------------------------</span><br><span class="line">启动服务中</span><br><span class="line"></span><br><span class="line">查看状态：systemctl status alist</span><br><span class="line">启动服务：systemctl start alist</span><br><span class="line">重启服务：systemctl restart alist</span><br><span class="line">停止服务：systemctl stop alist</span><br><span class="line"></span><br><span class="line">温馨提示：如果端口无法正常访问，请检查 服务器安全组、本机防火墙、Alist状态</span><br></pre></td></tr></table></figure>

<p>常用网盘见官方文档</p>
<h2 id="挂载本机磁盘"><a href="#挂载本机磁盘" class="headerlink" title="挂载本机磁盘"></a>挂载本机磁盘</h2><p>挂载路径：&#x2F;本地</p>
<p>根文件路径：&#x2F;root</p>
<p>关闭显示隐藏</p>
<h2 id="设置访客用户"><a href="#设置访客用户" class="headerlink" title="设置访客用户"></a>设置访客用户</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mkdir -p /root/共享</span><br></pre></td></tr></table></figure>

<p>访客基本路径设置为：&#x2F;本地&#x2F;共享</p>
<h2 id="通过RaiDrive挂载网盘到本地电脑"><a href="#通过RaiDrive挂载网盘到本地电脑" class="headerlink" title="通过RaiDrive挂载网盘到本地电脑"></a>通过RaiDrive挂载网盘到本地电脑</h2><p>RaiDrive官网：<a href="http://www.raidrive.com/">http://www.raidrive.com</a></p>
<p>挂载成功后，通过RaiDrive挂载各大网盘到本地电脑上</p>
<p><img src="/img/Alist%E6%8C%82%E8%BD%BD%E7%BD%91%E7%9B%98/raidrive.jpg"></p>
<h2 id="挂载到potplay"><a href="#挂载到potplay" class="headerlink" title="挂载到potplay"></a>挂载到potplay</h2><p>Potplayer播放器挂载alist网盘里的视频</p>
<p><img src="/img/Alist%E6%8C%82%E8%BD%BD%E7%BD%91%E7%9B%98/potplayer.jpg"></p>
<h2 id="挂载到安卓"><a href="#挂载到安卓" class="headerlink" title="挂载到安卓"></a>挂载到安卓</h2><p>安卓可以挂载到 es文件浏览器</p>
<p>我的网络—右上角三点—新建webdav</p>
<p>服务器：IP&#x2F;dav&#x2F;</p>
<p>端口：5244</p>
<p>用户名：admin</p>
<p>密码：</p>
<h2 id="本地开机启动alist"><a href="#本地开机启动alist" class="headerlink" title="本地开机启动alist"></a>本地开机启动alist</h2><p>1.在<code>D:\alist-windows-amd64</code>目录下新建<code>aliststar.vbs</code>：</p>
<figure class="highlight vb"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Set</span> ws = CreateObject(<span class="string">&quot;Wscript.Shell&quot;</span>)</span><br><span class="line">ws.run <span class="string">&quot;D:\alist-windows-amd64\alist.exe server&quot;</span>,vbhide</span><br></pre></td></tr></table></figure>

<p>2.新建aliststar.vbs快捷方式放到桌面。</p>
<p>3.win+R打开运行窗口，输入<code>shell:startup</code></p>
<p>4.上面的快捷方式拖到打开的窗口</p>
<h2 id="配置反代域名"><a href="#配置反代域名" class="headerlink" title="配置反代域名"></a>配置反代域名</h2><p>1.安装nginx</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt install nginx -y</span><br><span class="line">sudo systemctl start nginx</span><br><span class="line">sudo systemctl enable nginx</span><br></pre></td></tr></table></figure>

<p>2.为了便于申请证书，需要新建反代网站目录，<strong>一定不要在<code>/root</code>目录上新建</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mkdir -p /var/www/alist</span><br><span class="line">cp /usr/share/nginx/html/* /var/www/alist</span><br></pre></td></tr></table></figure>

<p>3.为了使下面申请证书时能访问 <a href="http://bore.vip/.well-known/acme-challenge/%E2%80%A6">http://bore.vip/.well-known/acme-challenge/…</a> 这个链接，首先配置好<a href="http://bore.vip/.well-known/acme-challenge/%E2%80%A6%E8%BF%99%E4%B8%AA%E9%93%BE%E6%8E%A5%EF%BC%8C%E9%A6%96%E5%85%88%E9%85%8D%E7%BD%AE%E5%A5%BDNginx">http://bore.vip/.well-known/acme-challenge/…这个链接，首先配置好Nginx</a> 80 端口，保证上述网址能顺利访问，从而顺利申请证书。所以在 nginx 配置的 server 节点下添加：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">location ~ /.well-known &#123;</span><br><span class="line">    allow all;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.在网站配置文件的 server 字段中添加</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">  proxy_set_header X-Forwarded-Proto $scheme;</span><br><span class="line">  proxy_set_header Host $http_host;</span><br><span class="line">  proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">  proxy_set_header Range $http_range;</span><br><span class="line">	proxy_set_header If-Range $http_if_range;</span><br><span class="line">  proxy_redirect off;</span><br><span class="line">  proxy_pass http://127.0.0.1:5244;</span><br><span class="line">  # the max size of file to upload</span><br><span class="line">  client_max_body_size 20000m;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最终修改为：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vi /etc/nginx/conf.d/alist.conf</span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">server</span> &#123;</span><br><span class="line">    <span class="string">listen</span>       <span class="number">80</span><span class="string">;</span></span><br><span class="line">    <span class="string">root</span> <span class="string">/var/www/alist;</span></span><br><span class="line">    <span class="string">index</span> <span class="string">index.html</span> <span class="string">index.htm</span> <span class="string">index.nginx-debian.html;</span></span><br><span class="line">    <span class="string">server_name</span>  <span class="string">alist.bore.vip;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#access_log  /var/log/nginx/host.access.log  main;</span></span><br><span class="line"></span><br><span class="line">        <span class="string">location</span> <span class="string">/</span> &#123;</span><br><span class="line">                <span class="comment">#try_files $uri $uri/ =404;</span></span><br><span class="line"> </span><br><span class="line">                  <span class="string">proxy_set_header</span> <span class="string">X-Forwarded-For</span> <span class="string">$proxy_add_x_forwarded_for;</span></span><br><span class="line">                  <span class="string">proxy_set_header</span> <span class="string">X-Forwarded-Proto</span> <span class="string">$scheme;</span></span><br><span class="line">                  <span class="string">proxy_set_header</span> <span class="string">Host</span> <span class="string">$http_host;</span></span><br><span class="line">                  <span class="string">proxy_set_header</span> <span class="string">X-Real-IP</span> <span class="string">$remote_addr;</span></span><br><span class="line">                  <span class="string">proxy_set_header</span> <span class="string">Range</span> <span class="string">$http_range;</span></span><br><span class="line">	              <span class="string">proxy_set_header</span> <span class="string">If-Range</span> <span class="string">$http_if_range;</span></span><br><span class="line">                  <span class="string">proxy_redirect</span> <span class="string">off;</span></span><br><span class="line">                  <span class="string">proxy_pass</span> <span class="string">http://127.0.0.1:5244;</span></span><br><span class="line">                 <span class="comment"># the max size of file to upload</span></span><br><span class="line">                  <span class="string">client_max_body_size</span> <span class="string">20000m;</span></span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="string">location</span> <span class="string">~</span> <span class="string">/.well-known</span> &#123;</span><br><span class="line">    <span class="string">allow</span> <span class="string">all;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试配置是否有问题：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nginx -t</span><br></pre></td></tr></table></figure>

<p>重启 Nginx 生效：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl restart nginx</span><br></pre></td></tr></table></figure>

<h2 id="配置-SSL-证书"><a href="#配置-SSL-证书" class="headerlink" title="配置 SSL 证书"></a>配置 SSL 证书</h2><h4 id="安装-Certbot"><a href="#安装-Certbot" class="headerlink" title="安装 Certbot"></a>安装 Certbot</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt-get install letsencrypt -y</span><br></pre></td></tr></table></figure>

<h4 id="使用-webroot-自动生成证书"><a href="#使用-webroot-自动生成证书" class="headerlink" title="使用 webroot 自动生成证书"></a>使用 webroot 自动生成证书</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">certbot certonly --webroot -w /var/www/alist -d alist.bore.vip -m 455343442@qq.com --agree-tos</span><br></pre></td></tr></table></figure>

<h4 id="编辑-Nginx"><a href="#编辑-Nginx" class="headerlink" title="编辑 Nginx"></a>编辑 <code>Nginx</code></h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vi /etc/nginx/conf.d/alist.conf</span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">server</span> &#123;</span><br><span class="line">        <span class="string">listen</span> <span class="number">80</span><span class="string">;</span></span><br><span class="line">        <span class="comment">#listen [::]:80;</span></span><br><span class="line"> </span><br><span class="line">        <span class="string">root</span> <span class="string">/var/www/alist;</span></span><br><span class="line"> </span><br><span class="line">        <span class="comment"># Add index.php to the list if you are using PHP</span></span><br><span class="line">        <span class="string">index</span> <span class="string">index.html</span> <span class="string">index.htm</span> <span class="string">index.nginx-debian.html;</span></span><br><span class="line"> </span><br><span class="line">        <span class="string">server_name</span> <span class="string">alist.bore.vip;</span> <span class="comment"># 此处的示例域名为qbt.example.com</span></span><br><span class="line"> </span><br><span class="line">        <span class="string">location</span> <span class="string">/</span> &#123;</span><br><span class="line">                <span class="comment">#try_files $uri $uri/ =404;</span></span><br><span class="line"> </span><br><span class="line">                  <span class="string">proxy_set_header</span> <span class="string">X-Forwarded-For</span> <span class="string">$proxy_add_x_forwarded_for;</span></span><br><span class="line">                  <span class="string">proxy_set_header</span> <span class="string">X-Forwarded-Proto</span> <span class="string">$scheme;</span></span><br><span class="line">                  <span class="string">proxy_set_header</span> <span class="string">Host</span> <span class="string">$http_host;</span></span><br><span class="line">                  <span class="string">proxy_set_header</span> <span class="string">X-Real-IP</span> <span class="string">$remote_addr;</span></span><br><span class="line">                  <span class="string">proxy_set_header</span> <span class="string">Range</span> <span class="string">$http_range;</span></span><br><span class="line">	              <span class="string">proxy_set_header</span> <span class="string">If-Range</span> <span class="string">$http_if_range;</span></span><br><span class="line">                  <span class="string">proxy_redirect</span> <span class="string">off;</span></span><br><span class="line">                  <span class="string">proxy_pass</span> <span class="string">http://127.0.0.1:5244;</span></span><br><span class="line">                 <span class="comment"># the max size of file to upload</span></span><br><span class="line">                  <span class="string">client_max_body_size</span> <span class="string">20000m;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="string">location</span> <span class="string">~</span> <span class="string">/.well-known</span> &#123;</span><br><span class="line">    <span class="string">allow</span> <span class="string">all;</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">        <span class="string">listen</span> <span class="number">443</span> <span class="string">ssl;</span> <span class="comment"># managed by Certbot</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># RSA certificate</span></span><br><span class="line">        <span class="string">ssl_certificate</span> <span class="string">/etc/letsencrypt/live/alist.bore.vip/fullchain.pem;</span> <span class="comment"># managed by Certbot</span></span><br><span class="line">        <span class="string">ssl_certificate_key</span> <span class="string">/etc/letsencrypt/live/alist.bore.vip/privkey.pem;</span> <span class="comment"># managed by Certbot</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Redirect non-https traffic to https</span></span><br><span class="line">    <span class="string">if</span> <span class="string">($scheme</span> <span class="type">!=</span> <span class="string">&quot;https&quot;</span><span class="string">)</span> &#123;</span><br><span class="line">        <span class="string">return</span> <span class="number">301</span> <span class="string">https://$host$request_uri;</span></span><br><span class="line">    &#125; <span class="comment"># managed by Certbot</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>测试配置是否有问题：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nginx -t</span><br></pre></td></tr></table></figure>

<p>重启 Nginx 生效：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl restart nginx</span><br></pre></td></tr></table></figure>

<h4 id="自动续期"><a href="#自动续期" class="headerlink" title="自动续期"></a>自动续期</h4><p>Let’s Encrypt 的证书有效期为 90 天，不过我们可以通过 crontab 定时运行命令更新证书。</p>
<p>先运行以下命令来测试证书的自动更新：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">certbot renew --dry-run</span><br></pre></td></tr></table></figure>

<p>如果一切正常，就可以编辑 crontab 定期运行以下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">30 2 * */2 * /usr/bin/certbot renew --quiet &amp;&amp; /bin/systemctl restart nginx</span><br></pre></td></tr></table></figure>

<p>查看证书有效期的命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">openssl x509 -noout -dates -in /etc/letsencrypt/live/alist.bore.vip/cert.pem</span><br></pre></td></tr></table></figure>

<h2 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vi /root/alist/data/config.json</span><br></pre></td></tr></table></figure>

<p>你可能注意到了，其中有 cert_file和key_file两条配置，正对应着上次申请证书最后输出的<code>Certificate is saved at:</code>和<code>Key is saved at:</code>，把后面的文件路径填进去，就配置好证书文件了</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl restart alist</span><br></pre></td></tr></table></figure>

<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://www.freedidi.com/7539.html">1.Alist 挂载阿里云盘、百度网盘、迅雷云盘、123网盘等</a></p>
<p><a href="https://dewx.top/2024/03/08/alist/#toc-head-10">2.部署AList私有云盘</a></p>
<p><a href="https://www.mailset.top/2024/02/05/letsencrypt%E5%85%8D%E8%B4%B9%E8%AF%81%E4%B9%A6%E7%94%B3%E8%AF%B7-Certbot/">3.letsencrypt免费证书申请–Certbot</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>AE学习笔记</title>
    <url>/archives/da5ef671/</url>
    <content><![CDATA[<p>1.按住<code>Alt</code>键不放， 单击快捷工具栏里的工具， 可快速切换同一个菜单栏上的子工具。（如把横排文字切换成竖排）</p>
<p>2.图层属性快捷键：中心点（A）、位移（P）、缩放（S）、旋转（R）、不透明度（T）、查看所有关键帧（U）、查看上一关键帧、下一关键帧（J&#x2F;K）、</p>
<p>3.快捷键（B、N）控制预览长度（控制出点入点）</p>
<p>4.切割素材：<code>Ctrl+Shift+D</code>，裁剪素材：<code>Alt+[/]</code>，逐帧调节时间线：<code>PgUp/PgDn</code></p>
<p>5.按住<code>Shift</code>+大键盘数字键，标记帧。此后可以按数字键来切换帧。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>AE</tag>
      </tags>
  </entry>
  <entry>
    <title>Debian 10 安装 Docker &amp; Docker Compose</title>
    <url>/archives/9755dbc8/</url>
    <content><![CDATA[<div class="note warning flat"><p>Debian10 上安装部分应用，速度几乎为0，至少需要Debian11以上，512M内存足够。</p>
</div>

<h2 id="安装-Docker"><a href="#安装-Docker" class="headerlink" title="安装 Docker"></a>安装 Docker</h2><p>1.首先，更新现有的软件包列表：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt update -y</span><br></pre></td></tr></table></figure>

<p>2.接下来，安装一些必备软件包，让 apt 通过 HTTPS 使用软件包。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt install apt-transport-https ca-certificates curl gnupg2 software-properties-common -y</span><br></pre></td></tr></table></figure>

<p>3.然后将官方 Docker hub 的 GPG key 添加到系统中。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-key add -</span><br></pre></td></tr></table></figure>

<p>4.将 Docker 版本库添加到APT源：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo add-apt-repository <span class="string">&quot;deb [arch=amd64] https://download.docker.com/linux/debian <span class="subst">$(lsb_release -cs)</span> stable&quot;</span></span><br></pre></td></tr></table></figure>

<p>5.接下来，我们用新添加的 Docker 软件包来进行升级更新。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">sudo</span> <span class="string">apt</span> <span class="string">update</span> <span class="string">-y</span></span><br></pre></td></tr></table></figure>

<p>6.安装 Docker </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt install docker-ce -y</span><br></pre></td></tr></table></figure>

<p>7.检查 Docker 是否正在运行</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker --version</span><br><span class="line">sudo systemctl status docker</span><br></pre></td></tr></table></figure>



<p>8.重启 docker 并设置开机自启</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo systemctl enable docker</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>

<p>9.修改Docker配置（来自<a href="https://u.sb/debian-install-docker/">烧饼博客</a>）</p>
<p>以下配置会增加一段自定义内网 IPv6 地址，开启容器的 IPv6 功能，以及限制日志文件大小，防止 Docker 日志塞满硬盘（泪的教训）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> &gt; /etc/docker/daemon.json &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">    &quot;log-driver&quot;: &quot;json-file&quot;,</span></span><br><span class="line"><span class="string">    &quot;log-opts&quot;: &#123;</span></span><br><span class="line"><span class="string">        &quot;max-size&quot;: &quot;20m&quot;,</span></span><br><span class="line"><span class="string">        &quot;max-file&quot;: &quot;3&quot;</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    &quot;ipv6&quot;: true,</span></span><br><span class="line"><span class="string">    &quot;fixed-cidr-v6&quot;: &quot;fd00:dead:beef:c0::/80&quot;,</span></span><br><span class="line"><span class="string">    &quot;experimental&quot;:true,</span></span><br><span class="line"><span class="string">    &quot;ip6tables&quot;:true</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure>

<p>然后重启 Docker 服务：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure>

<h2 id="在-Docker-中使用镜像"><a href="#在-Docker-中使用镜像" class="headerlink" title="在 Docker 中使用镜像"></a>在 Docker 中使用镜像</h2><p>1.要查看已下载到计算机的镜像：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure>

<p>2.删除某个docker镜像</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker rmi &lt;your-image-id&gt;</span><br></pre></td></tr></table></figure>

<p>3.一次删除多张镜像</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker rmi &lt;your-image-id&gt; &lt;your-image-id&gt; ...</span><br></pre></td></tr></table></figure>

<p>4.一次删除所有镜像</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker rmi $(docker images -q)</span><br></pre></td></tr></table></figure>

<h2 id="在-Docker-中使用容器"><a href="#在-Docker-中使用容器" class="headerlink" title="在 Docker 中使用容器"></a>在 Docker 中使用容器</h2><p>1.要查看<strong>所有</strong>的容器对象，请使用：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker ps -a</span><br></pre></td></tr></table></figure>

<blockquote>
<p>docker ps -a -q 分解</p>
<ul>
<li><code>docker ps</code> 列出<strong>活动</strong>中容器。</li>
<li><code>-a</code> 这个选项用于列出<strong>所有</strong>容器，包括停止运行的。如果没有这个选项，则默认只列出在运行的容器。</li>
<li><code>-q</code> 这个选项列出容器的数字 ID，而不是容器的所有信息。</li>
</ul>
</blockquote>
<p>2.要启动已停止的容器，请使用<code>docker start命令+容器ID或容器名</code></p>
<blockquote>
<ul>
<li>停止所有容器运行：<code>docker stop $(docker ps -a -q)</code></li>
</ul>
</blockquote>
<p>3.通过<code>docker rm</code>命令来删除不用的容器。</p>
<blockquote>
<ul>
<li>先使用<code>docker ps -a</code>命令查找相关镜像关联的容器的<strong>容器ID或名称</strong>，然后通过<code>docker rm</code>命令来删除其删除。</li>
<li>删除所有停止运行的容器：<code>docker rm $(docker ps -a -q)</code></li>
</ul>
</blockquote>
<h3 id="Docker-容器开机自启"><a href="#Docker-容器开机自启" class="headerlink" title="Docker 容器开机自启"></a><strong>Docker 容器开机自启</strong></h3><p>1.在使用docker run启动容器时，使用–restart参数来设置：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -m 512m --memory-swap 1G -it -p 58080:8080 --restart=always  </span><br></pre></td></tr></table></figure>

<p>2.如果创建时未指定 –restart&#x3D;always ,可通过update 命令设置</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker update --restart=always 容器ID或名称</span><br></pre></td></tr></table></figure>

<h2 id="安装-Docker-Compose"><a href="#安装-Docker-Compose" class="headerlink" title="安装 Docker Compose"></a>安装 Docker Compose</h2><p>1.安装</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> LATEST_VERSION=$(wget -qO- -t1 -T2 <span class="string">&quot;https://api.github.com/repos/docker/compose/releases/latest&quot;</span> | grep <span class="string">&quot;tag_name&quot;</span> | <span class="built_in">head</span> -n 1 | awk -F <span class="string">&quot;:&quot;</span> <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | sed <span class="string">&#x27;s/\&quot;//g;s/,//g;s/ //g&#x27;</span>)</span><br><span class="line">sudo curl -L https://github.com/docker/compose/releases/download/<span class="variable">$LATEST_VERSION</span>/docker-compose-linux-`<span class="built_in">uname</span> -m` &gt; ./docker-compose</span><br><span class="line">sudo <span class="built_in">chmod</span> +x ./docker-compose</span><br><span class="line">sudo <span class="built_in">mv</span> ./docker-compose /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure>

<p>2.查看版本</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker-compose --version</span><br></pre></td></tr></table></figure>

<p>3.使用 -d 选项以分离模式启动 Compose(后台)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure>

<p>4.要查看正在运行的 docker 容器，请使用以下命令</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker-compose ps</span><br></pre></td></tr></table></figure>

<p>5.删除容器</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd /root/data/docker_data/joplin  # 进入docker-compose所在的文件夹</span><br><span class="line"></span><br><span class="line">docker-compose down    # 停止容器，此时不会删除映射到本地的数据</span><br><span class="line"></span><br><span class="line">rm -rf /root/data/docker_data/joplin  # 完全删除映射到本地的数据</span><br></pre></td></tr></table></figure>

<p>6.一些 Docker Compose 常用命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker-compose restart  # 重启容器</span><br><span class="line">docker-compose stop     # 暂停容器</span><br><span class="line">docker-compose down     # 删除容器</span><br><span class="line">docker-compose pull     # 更新镜像</span><br><span class="line">docker-compose exec artalk bash # 进入容器</span><br></pre></td></tr></table></figure>

<p>7.Docker Compose升级</p>
<p>删除现有容器，拉取最新镜像，然后重新创建容器即可。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker-compose down</span><br><span class="line">docker-compose pull</span><br><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure>

<h3 id="开机自动启动应用容器"><a href="#开机自动启动应用容器" class="headerlink" title="开机自动启动应用容器"></a><strong>开机自动启动应用容器</strong></h3><p>1.方法一、通过 Docker Restart Policy 方法</p>
<p>在 Docker 中，支持 –restart 选项，来控制容器自动启动。在 Docker Compose 中，应该使用 restart 属性</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">version: &#x27;2&#x27;</span><br><span class="line">services:</span><br><span class="line">  database:</span><br><span class="line">    build: ./mysql/</span><br><span class="line">    command: mysqld --user=root --verbose</span><br><span class="line"><span class="addition">+   restart: always </span></span><br><span class="line">    environment:</span><br><span class="line">      MYSQL_DATABASE: &quot;web_level3_sqli&quot;</span><br><span class="line">      MYSQL_USER: &quot;web_level3_sqli&quot;</span><br><span class="line">      MYSQL_PASSWORD: &quot;thisisasecurepassword123&quot;</span><br><span class="line">      MYSQL_ROOT_PASSWORD: &quot;root&quot;</span><br><span class="line">      MYSQL_ALLOW_EMPTY_PASSWORD: &quot;yes&quot;</span><br><span class="line">  web:</span><br><span class="line">    build: ./www/</span><br><span class="line"><span class="addition">+    restart: always</span></span><br><span class="line">    ports:</span><br><span class="line">     - &quot;12000:80&quot;</span><br><span class="line">    volumes:</span><br><span class="line">      - ./www/src:/var/www/html</span><br><span class="line">    links:</span><br><span class="line">      - database</span><br></pre></td></tr></table></figure>

<p>注意事项：<br>1）Docker 并不知道这些服务的依赖关系及启动顺序，需要我们精心编排 docker-compose.yaml 文件；<br>2）Docker Compose 不支持 deploy:restart_policy 属性，该属性只能用于 a swarm with docker stack deploy 环境；</p>
<p>2.方法二、通过进程管理服务（推荐）</p>
<p>该方法本质上还是在执行 docker-compose 命令。</p>
<p>使用 systemd 管理<br>如下示例，可以根据需要进行设置：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># cat /etc/systemd/system/docker-compose-app.service</span></span><br><span class="line"></span><br><span class="line">[Unit]</span><br><span class="line">Description=Docker Compose Application Service</span><br><span class="line">Requires=docker.service</span><br><span class="line">After=docker.service</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=oneshot</span><br><span class="line">RemainAfterExit=<span class="built_in">yes</span></span><br><span class="line">WorkingDirectory=/srv/docker/app/</span><br><span class="line">ExecStart=/usr/local/bin/docker-compose up -d</span><br><span class="line">ExecStop=/usr/local/bin/docker-compose down</span><br><span class="line">TimeoutStartSec=0</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<p>7.卸载 Docker Compose</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo rm /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure>

<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><p>1.出错提示：error storing credentials - err: exit status 1, out: <code>Cannot autolaunch D-Bus without X11 $DISPLAY</code></p>
<p>解决方法：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt install gnupg2 pass -y</span><br></pre></td></tr></table></figure>

<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://www.sunqi.org/debian-10-install-docker.html">如何在 debian 10 中安装和使用 Docker</a></li>
<li><a href="https://6xyun.cn/article/137">Debian 11 安装 Docker &amp; Docker Compose</a></li>
<li><a href="https://www.itbulu.com/docker-compose.html">实用教程Debian 10系统中安装Docker Compose过程</a></li>
<li><a href="https://www.jianshu.com/p/36f63f57b05d">Docker 容器开机自启</a></li>
<li><a href="https://blog.csdn.net/fjh1997/article/details/98880638">docker-compose 关机或者重启docker同时重启容器restart always的配置</a></li>
<li><a href="https://chinese.freecodecamp.org/news/how-to-remove-images-in-docker/">如何删除 Docker 镜像和容器</a></li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Debian使用备忘</title>
    <url>/archives/9eb70758/</url>
    <content><![CDATA[<p>由于一些原因，之前服务器上用的Centos换成了Debian。Debian虽然和Centos大同小异，但是还是有些东西要记一下。  </p>
<div class="note warning flat"><p>Debian10 上安装部分应用，速度几乎为0，至少需要Debian11以上，512M内存足够。</p>
</div>  

<div class="note primary no-icon flat"><p>推荐使用terminal(ssh 工具) ，<a href="https://www.hostbuf.com/">finashell</a> 也行。</p>
</div>

<h2 id="Debian-更新报错的解决方法"><a href="#Debian-更新报错的解决方法" class="headerlink" title="Debian 更新报错的解决方法"></a><strong>Debian 更新报错的解决方法</strong></h2><p><del>一台很老的Debian使用apt-get update的时候，出现一下报错。</del>（非必要，不要更新）</p>
<p><strong>解决方法</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt-get update --allow-releaseinfo-change</span><br><span class="line">apt-get upgrade</span><br></pre></td></tr></table></figure>

<p><strong>提示</strong>：Unable to fetch some archives, maybe run apt-get update or try with –fix-missing?</p>
<p><strong>解决方法</strong>（问chatgpt）：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt-get update --fix-missing</span><br></pre></td></tr></table></figure>

<h2 id="调整时区"><a href="#调整时区" class="headerlink" title="调整时区"></a>调整时区</h2><p>如果你不知道服务器当前时间，可以使用下面的命令，查看当前时间：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">date -R</span><br></pre></td></tr></table></figure>

<p>修改当前时区为上海：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo timedatectl set-timezone Asia/Shanghai</span><br></pre></td></tr></table></figure>

<p>再次不带任何选项参数调用 timedatectl 命令，打印系统当前设置的时区即可：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">timedatectl</span><br></pre></td></tr></table></figure>

<h2 id="putty保存登录账号和密码"><a href="#putty保存登录账号和密码" class="headerlink" title="putty保存登录账号和密码"></a>putty保存登录账号和密码</h2><p>1.创建一个桌面快捷方式。</p>
<p>2.进入快捷方式属性，修改目标，在后面加上 -ssh -l 用户名 -pw 密码 -i session标识 -P 端口号 IP地址。例如 “C:\Program Files\PuTTY\putty.exe” -ssh -l root -pw 123456 -i “yuanchengserver1” -P 22 142.16.187.129</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">E:\软件\putty.exe -ssh -l root -pw password -i &quot;yansvps&quot; -P 22 ip</span><br></pre></td></tr></table></figure>
<p>3.然后，通过快捷方式就可以直接登录了~</p>
<p>PS：<code>putty</code>没有<a href="https://www.hostbuf.com/">FinalShell</a>好用。</p>
<h2 id="vi无法正常使用"><a href="#vi无法正常使用" class="headerlink" title="vi无法正常使用"></a><code>vi</code>无法正常使用</h2><p>1.先安装<code>vim</code>：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt install vim -y</span><br></pre></td></tr></table></figure>
<p>2.修改<code>vimrc.tiny</code><br><code>vi /etc/vim/vimrc.tiny</code> 将其中的语句 <code>set compatible</code> 修改为 <code>set nocompatible</code> ，非兼容模式下可以解决方向键变ABCD的问题。</p>
<p>在刚才那句话后面再加一句 <code>set backspace=2</code> 来解决退格键无法使用的问题。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/vim/vimrc.tiny</span><br><span class="line"><span class="built_in">set</span> nocompatible</span><br><span class="line"><span class="built_in">set</span> backspace=2</span><br></pre></td></tr></table></figure>
<p>3.卸载<code>vim</code><br>vim颜色太花眼了，所以最后把它卸载：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt remove vim -y</span><br></pre></td></tr></table></figure>


<h2 id="Debian安装vsftpd"><a href="#Debian安装vsftpd" class="headerlink" title="Debian安装vsftpd"></a>Debian安装vsftpd</h2><div class="note warning no-icon flat"><p>传输大文件慢，可以用transmission下载完后，配合nginx开启目录浏览，配置好SSL使用；也可以用<a href="https://www.terminal.icu/">terminal</a>(ssh工具)上传<del>下载</del>文件，finashell也行。</p>
</div>

<p>0.开启21端口：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">iptables -I INPUT 5 -p tcp --dport 21 -j ACCEPT</span><br></pre></td></tr></table></figure>

<p>1.安装命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt install vsftpd -y</span><br></pre></td></tr></table></figure>
<p>2.安装软件包后，启动vsftpd，并使其能够在引导时自动启动：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo systemctl start vsftpd</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> vsftpd</span><br></pre></td></tr></table></figure>
<p>3.编辑<code>vsftpd.conf</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/vsftpd.conf</span><br></pre></td></tr></table></figure>
<hr>
<p>（1）去掉<code>write_enable=YES</code>前面的注释，使用户可以上传文件。</p>
<p>（2）要仅允许某些用户登录FTP服务器，请在文件末尾添加以下行：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">userlist_enable=YES</span><br><span class="line">userlist_file=/etc/vsftpd.user_list</span><br><span class="line">userlist_deny=NO</span><br></pre></td></tr></table></figure>

<p>启用此选项后，您需要通过向<code>/etc/vsftpd.user_list</code>文件添加用户名（每行一个用户）明确指定哪些用户能够登录。</p>
<p>（3）添加FTP用户。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo adduser admin</span><br><span class="line">sudo passwd admin</span><br></pre></td></tr></table></figure>

<p>（4）将用户添加到允许的 FTP 用户列表中：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;admin&quot;</span> | sudo <span class="built_in">tee</span> -a /etc/vsftpd.user_list</span><br></pre></td></tr></table></figure>

<p>（5）关闭防火墙</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl stop firewalld.service</span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld.service </span><br></pre></td></tr></table></figure>

<p>（6）<strong>使 ftp 用户<code>admin</code>可以上传文件到指定目录</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo <span class="built_in">chmod</span> 755 /var/www/speak</span><br><span class="line">sudo <span class="built_in">chown</span> -R admin: /var/www/speak</span><br></pre></td></tr></table></figure>

<p>（7）重启 vsftpd 服务</p>
<p>保存文件并重新启动 vsftpd 服务，以使更改生效：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo systemctl restart vsftpd</span><br></pre></td></tr></table></figure>

<hr>
<p>4.设置允许root登录</p>
<ul>
<li>将<code>root</code>添加到允许的FTP用户列表中：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;root&quot;</span> | sudo <span class="built_in">tee</span> -a /etc/vsftpd/user_list</span><br></pre></td></tr></table></figure>

<ul>
<li>修改<code>/etc/vsftpd/user_list</code>和<code>/etc/ftpusers</code>两个设置文件脚本，将root账户前加上<code>#</code>号变为注释</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/vsftpd/user_list</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/ftpusers</span><br></pre></td></tr></table></figure>

<p>5.重启vsftpd服务</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo systemctl restart vsftpd</span><br></pre></td></tr></table></figure>
<p>6.解决Nginx出现403 forbidden</p>
<p>j假设网站根目录在<code>/var/www/blog/</code>，则执行：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> -R 777 /var/www</span><br></pre></td></tr></table></figure>
<p>7.限制用户登录（未启用）</p>
<p>要仅允许某些用户登录FTP服务器，请在文件末尾添加以下几行：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/vsftpd.conf</span><br></pre></td></tr></table></figure>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">userlist_enable=YES</span><br><span class="line">userlist_file=/etc/vsftpd/user_list</span><br><span class="line">userlist_deny=NO</span><br></pre></td></tr></table></figure>
<p>启用此选项后，您需要通过将用户名添加到&#x2F;etc&#x2F;vsftpd.user_list文件（每行一个用户）来明确指定哪些用户可以登录。使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;admin&quot;</span> | sudo <span class="built_in">tee</span> -a /etc/vsftpd/user_list</span><br></pre></td></tr></table></figure>

<h2 id="开启80、443端口"><a href="#开启80、443端口" class="headerlink" title="开启80、443端口"></a>开启80、443端口</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">iptables -I INPUT -p tcp --dport 443 -j ACCEPT</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">service iptables save</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">service iptables restart</span><br></pre></td></tr></table></figure>

<h2 id="Debian-9上安装和配置Postfix邮件"><a href="#Debian-9上安装和配置Postfix邮件" class="headerlink" title="Debian 9上安装和配置Postfix邮件"></a>Debian 9上安装和配置Postfix邮件</h2><p>1.安装 mailtuils:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt install mailutils -y</span><br></pre></td></tr></table></figure>
<p>2.安装postfix后缀:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt install postfix</span><br></pre></td></tr></table></figure>
<p>在安装过程即将结束时，您将看到一个类似于下图中的窗口的窗口。默认选项是<code>Internet Site</code>。这是本教程的推荐选项，请按<code>TAB</code>，然后按<code>ENTER</code>。<br>之后，您将获得另一个窗口，就像下一个图像中的窗口一样。该系统邮件名称应该是一样的，你分配给服务器，当你在创造它的名字。如果它显示子域<code>subdomain.example.com</code>，请将其更改为<code>ust example.com</code>。完成后，按<code>TAB</code>，然后<code>ENTER</code>。</p>
<p>3.配置Postfix</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/postfix/main.cf</span><br></pre></td></tr></table></figure>
<p>打开文件后，向下滚动，直到看到以下部分：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">. . .</span><br><span class="line">mailbox_size_limit = 0</span><br><span class="line">recipient_delimiter = +</span><br><span class="line">inet_interfaces = all</span><br><span class="line">. . .</span><br></pre></td></tr></table></figure>
<p>将读取的inet_interfaces &#x3D; all行更改为inet_interfaces &#x3D; loopback-only：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">. . .</span><br><span class="line">mailbox_size_limit = 0</span><br><span class="line">recipient_delimiter = +</span><br><span class="line">inet_interfaces = loopback-only</span><br><span class="line">. . .</span><br></pre></td></tr></table></figure>
<p>您需要修改的另一个指令是mydestination，用于指定通过local_transport邮件传递传输传递的域列表。默认情况下，值类似于：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">. . .</span><br><span class="line">mydestination = <span class="variable">$myhostname</span>, example.com, localhost.com, , localhost</span><br><span class="line">. . .</span><br></pre></td></tr></table></figure>
<p>此指令的建议默认值在下面的代码块中给出，因此请修改以匹配：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">. . .</span><br><span class="line">mydestination = <span class="variable">$myhostname</span>, localhost.<span class="variable">$your_domain</span>, <span class="variable">$your_domain</span></span><br><span class="line">. . .</span><br></pre></td></tr></table></figure>
<p>4.重启Postfix。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo systemctl restart postfix</span><br></pre></td></tr></table></figure>
<p>5.测试SMTP服务器</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;This is the body of the email&quot;</span> | mail -s <span class="string">&quot;This is the subject line&quot;</span> your_email_address</span><br></pre></td></tr></table></figure>
<p>6.debian 彻底删除posfix 然后重新安装</p>
<p>如果安装出错，先彻底删除posfix 然后重新安装</p>
<ul>
<li>关闭 service postfix start<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">service postfix  stop</span><br></pre></td></tr></table></figure></li>
<li>卸载postfix<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt-get remove  postfix -y</span><br><span class="line">dpkg --purge postfix</span><br><span class="line">apt autoremove</span><br></pre></td></tr></table></figure></li>
<li>查看配置文件是否已经删除</li>
</ul>
<p>查看 &#x2F;etc&#x2F;postfix是否已经删除掉</p>
<h2 id="安装Transmission"><a href="#安装Transmission" class="headerlink" title="安装Transmission"></a><del>安装Transmission</del></h2><div class="note primary no-icon flat"><p>速度不及下面的qbittorrent</p>
</div>

<p>1.安装</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get update -y</span><br><span class="line">sudo apt-get install transmission transmission-daemon -y</span><br></pre></td></tr></table></figure>

<p>2.启动&amp;关闭</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl start transmission-daemon</span><br><span class="line">systemctl enable transmission-daemon</span><br><span class="line">systemctl stop transmission-daemon</span><br></pre></td></tr></table></figure>

<p>3.修改配置（关闭后再修改配置）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo vi /var/lib/transmission-daemon/info/settings.json</span><br></pre></td></tr></table></figure>

<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;download-dir&quot;: &quot;/home/admin&quot;,</span><br><span class="line">    ......</span><br><span class="line">    &quot;rpc-authentication-required&quot;: true</span><br><span class="line">    &quot;rpc-bind-address&quot;: &quot;0.0.0.0&quot;, </span><br><span class="line">    &quot;rpc-enabled&quot;: true, </span><br><span class="line">    &quot;rpc-password&quot;: &quot;123456&quot;, </span><br><span class="line">    &quot;rpc-port&quot;: 9091, </span><br><span class="line">    &quot;rpc-url&quot;: &quot;/transmission/&quot;, </span><br><span class="line">    &quot;rpc-username&quot;: &quot;transmission&quot;, </span><br><span class="line">    &quot;rpc-whitelist&quot;: &quot;*&quot;, </span><br><span class="line">    &quot;rpc-whitelist-enabled&quot;: true, </span><br><span class="line">    ......</span><br></pre></td></tr></table></figure>

<p><strong>主要是<code>rpc-whitelist</code>、<code>用户名</code>、<code>密码</code>和<code> download-dir（可选）</code></strong></p>
<p>如果修改下载目录，将下载目录改成： “download-dir”: “&#x2F;home&#x2F;admin”，那么还要赋予<code>debian-transmission</code>读写<code>/home/admin</code>的权限：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo chmod 755 /home/admin</span><br><span class="line">sudo chown -R debian-transmission: /home/admin</span><br></pre></td></tr></table></figure>

<p>执行<code>sudo vi /etc/init.d/transmission-daemon</code>可以看到运行用户。</p>
<p>4.美化WEB UI：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wget https://github.com/ronggang/transmission-web-control/raw/master/release/install-tr-control-cn.sh</span><br><span class="line">bash install-tr-control-cn.sh</span><br></pre></td></tr></table></figure>

<h3 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装nginx</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt install nginx -y</span><br><span class="line">sudo systemctl start nginx</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> nginx</span><br></pre></td></tr></table></figure>

<h3 id="配置nginx"><a href="#配置nginx" class="headerlink" title="配置nginx"></a>配置nginx</h3><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">server</span> &#123;</span><br><span class="line">  <span class="string">listen</span>  <span class="number">80</span> <span class="string">;</span></span><br><span class="line">  <span class="string">listen</span> [<span class="string">::</span>]<span class="string">:80;</span></span><br><span class="line">  <span class="string">root</span> <span class="string">/home/admin;</span></span><br><span class="line">  <span class="string">server_name</span> <span class="string">example.com;</span></span><br><span class="line">  <span class="string">access_log</span>  <span class="string">/var/log/nginx/hexo_access.log;</span></span><br><span class="line">  <span class="string">error_log</span>   <span class="string">/var/log/nginx/hexo_error.log;</span></span><br><span class="line">  <span class="string">error_page</span> <span class="number">404</span> <span class="string">=</span>  <span class="string">/404.html;</span></span><br><span class="line">  <span class="string">location</span> <span class="string">~*</span> <span class="string">^.+\.(ico|gif|jpg|jpeg|png)$</span> &#123;</span><br><span class="line">    <span class="string">root</span> <span class="string">/home/admin;</span></span><br><span class="line">    <span class="string">access_log</span>   <span class="string">off;</span></span><br><span class="line">    <span class="string">expires</span>      <span class="string">1d;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="string">location</span> <span class="string">~*</span> <span class="string">^.+\.(css|js|txt|xml|swf|wav)$</span> &#123;</span><br><span class="line">    <span class="string">root</span> <span class="string">/home/admin;</span></span><br><span class="line">    <span class="string">access_log</span>   <span class="string">off;</span></span><br><span class="line">    <span class="string">expires</span>      <span class="string">10m;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="string">location</span> <span class="string">/</span> &#123;</span><br><span class="line">    <span class="string">root</span> <span class="string">/home/admin;</span></span><br><span class="line">    <span class="string">if</span> <span class="string">(-f</span> <span class="string">$request_filename)</span> &#123;</span><br><span class="line">    <span class="string">rewrite</span> <span class="string">^/(.*)$</span>  <span class="string">/$1</span> <span class="string">break;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="string">location</span> <span class="string">/nginx_status</span> &#123;</span><br><span class="line">    <span class="string">stub_status</span> <span class="string">on;</span></span><br><span class="line">    <span class="string">access_log</span> <span class="string">off;</span></span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="string">autoindex</span> <span class="string">on;</span>                        </span><br><span class="line">  <span class="string">autoindex_exact_size</span> <span class="string">off;</span>            </span><br><span class="line">  <span class="string">autoindex_localtime</span> <span class="string">on;</span>              </span><br><span class="line">  <span class="string">charset</span> <span class="string">utf-8</span>,<span class="string">gbk;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="debian11配置SSL证书"><a href="#debian11配置SSL证书" class="headerlink" title="debian11配置SSL证书"></a>debian11配置SSL证书</h3><h4 id="安装-Certbot"><a href="#安装-Certbot" class="headerlink" title="安装 Certbot"></a>安装 Certbot</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install letsencrypt -y</span><br></pre></td></tr></table></figure>

<h4 id="使用-webroot-自动生成证书"><a href="#使用-webroot-自动生成证书" class="headerlink" title="使用 webroot 自动生成证书"></a>使用 webroot 自动生成证书</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">certbot certonly --webroot -w /home/admin -d example.com -m 455343442@qq.com --agree-tos</span><br></pre></td></tr></table></figure>

<h4 id="编辑Nginx"><a href="#编辑Nginx" class="headerlink" title="编辑Nginx"></a>编辑<code>Nginx</code></h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vi /etc/nginx/conf.d/ftp.conf</span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">server</span> &#123;</span><br><span class="line">    <span class="string">listen</span> <span class="number">80</span><span class="string">;</span></span><br><span class="line">    <span class="string">listen</span> [<span class="string">::</span>]<span class="string">:80;</span></span><br><span class="line">    <span class="string">root</span> <span class="string">/home/admin;</span></span><br><span class="line">    <span class="string">server_name</span>  <span class="string">example.com;</span></span><br><span class="line"></span><br><span class="line">    <span class="string">listen</span> <span class="number">443</span> <span class="string">ssl;</span> <span class="comment"># managed by Certbot</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># RSA certificate</span></span><br><span class="line">    <span class="string">ssl_certificate</span> <span class="string">/etc/letsencrypt/live/example.com/fullchain.pem;</span> <span class="comment"># managed by Certbot</span></span><br><span class="line">    <span class="string">ssl_certificate_key</span> <span class="string">/etc/letsencrypt/live/example.com/privkey.pem;</span> <span class="comment"># managed by Certbot</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Redirect non-https traffic to https</span></span><br><span class="line">    <span class="string">if</span> <span class="string">($scheme</span> <span class="type">!=</span> <span class="string">&quot;https&quot;</span><span class="string">)</span> &#123;</span><br><span class="line">        <span class="string">return</span> <span class="number">301</span> <span class="string">https://$host$request_uri;</span></span><br><span class="line">    &#125; <span class="comment"># managed by Certbot</span></span><br><span class="line">	</span><br><span class="line">	  <span class="string">autoindex</span> <span class="string">on;</span>                        </span><br><span class="line">      <span class="string">autoindex_exact_size</span> <span class="string">off;</span>            </span><br><span class="line">      <span class="string">autoindex_localtime</span> <span class="string">on;</span>              </span><br><span class="line">      <span class="string">charset</span> <span class="string">utf-8</span>,<span class="string">gbk;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试配置是否有问题：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nginx -t</span><br></pre></td></tr></table></figure>

<p>重启 Nginx 生效：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl restart nginx</span><br></pre></td></tr></table></figure>

<h4 id="自动续期"><a href="#自动续期" class="headerlink" title="自动续期"></a>自动续期</h4><p>Let’s Encrypt 的证书有效期为 90 天，不过我们可以通过 crontab 定时运行命令更新证书。</p>
<p>先运行以下命令来测试证书的自动更新：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">certbot renew --dry-run</span><br></pre></td></tr></table></figure>

<p>如果一切正常，就可以编辑 crontab 定期运行以下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">30 2 * */2 * /usr/bin/certbot renew --quiet &amp;&amp; /bin/systemctl restart nginx</span><br></pre></td></tr></table></figure>

<p>查看证书有效期的命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">openssl x509 -noout -dates -in /etc/letsencrypt/live/example.com/cert.pem</span><br></pre></td></tr></table></figure>

<h2 id="安装qbittorrent-nox"><a href="#安装qbittorrent-nox" class="headerlink" title="安装qbittorrent-nox"></a>安装<code>qbittorrent-nox</code></h2><p>**1.**安装qbittorrent-nox</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">apt</span> <span class="string">update</span> </span><br><span class="line"><span class="string">apt</span> <span class="string">install</span> <span class="string">qbittorrent-nox</span> <span class="string">-y</span></span><br></pre></td></tr></table></figure>

<p><strong>2.</strong> 新建systemd文件，如下所示：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/systemd/system/qbittorrent-nox.service</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=qBittorrent Command Line Client</span><br><span class="line">After=network.target</span><br><span class="line">[Service]</span><br><span class="line">User=root</span><br><span class="line">ExecStart=/usr/bin/qbittorrent-nox</span><br><span class="line">Restart=on-failure</span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<p><strong>3.</strong> 启用进程守护，直接执行以下命令就行了，最后一条命令执行完，出现<code>active</code>关键字就说明一切都如预期的那样跑起来了。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl start qbittorrent-nox</span><br><span class="line">systemctl enable qbittorrent-nox</span><br><span class="line">systemctl status qbittorrent-nox</span><br></pre></td></tr></table></figure>

<p>至此，在浏览器中输入服务器的IP和qbittorrent-nox的端口就可以进入了，例如<a href="http://1.1.1.1:8080/">http://1.1.1.1:8080</a>，这里的1.1.1.1是服务器的IP，8080是刚才进程守护文件中写入的端口。用户名是admin，用户密码：adminadmin。<br>强烈建议进去之后，立马修改用户名和用户密码！！！具体位置在<code>tool&gt;options&gt;webui</code>这里，还可以修改成中文。</p>
<p><strong>4.</strong> 修改下载目录和设置权限</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mkdir /home/admin</span><br><span class="line">chmod 777 /home/admin</span><br></pre></td></tr></table></figure>

<p>重启qbittorrent-nox：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl daemon-reload</span><br></pre></td></tr></table></figure>

<p>5.最后把下载路径设置到<code>/home/admin</code>就OK了！</p>
<h2 id="qbittorrent-nox忘记密码"><a href="#qbittorrent-nox忘记密码" class="headerlink" title="qbittorrent-nox忘记密码"></a><code>qbittorrent-nox</code>忘记密码</h2><p><code>cd / </code></p>
<p><code>find -name qBittorrent.conf</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl stop qbittorrent-nox</span><br><span class="line">vi ./.config/qBittorrent/qBittorrent.conf</span><br></pre></td></tr></table></figure>

<p>把配置中的<code>Password_PBKDF2</code>删除这一行(vi按<code>dd</code>)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl start qbittorrent-nox</span><br></pre></td></tr></table></figure>

<h2 id="Nginx反代qbittorrent-nox的Web-GUI"><a href="#Nginx反代qbittorrent-nox的Web-GUI" class="headerlink" title="Nginx反代qbittorrent-nox的Web-GUI"></a>Nginx反代qbittorrent-nox的Web-GUI</h2><h3 id="修改监听地址"><a href="#修改监听地址" class="headerlink" title="修改监听地址"></a>修改监听地址</h3><p>http+非标端口，总让人强迫症犯了，所以搞了个SSL和Nginx反代，让qbittorrent-nox的Web-GUI看起来舒服一些。<br>首先，在<code>tool&gt;options&gt;webui</code>中，将监听的IP地址从<code>*</code>改成<code>127.0.0.1</code>，然后执行重启命令<code>systemctl restart qbittorrent-nox</code>以生效。这样只有服务器本地才能访问，其他都不行(网页打不开，待后面配置好域名才能访问)</p>
<h3 id="安装-nginx"><a href="#安装-nginx" class="headerlink" title="安装 nginx"></a>安装 nginx</h3><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">sudo</span> <span class="string">apt</span> <span class="string">install</span> <span class="string">nginx</span> <span class="string">-y</span></span><br><span class="line"><span class="string">sudo</span> <span class="string">systemctl</span> <span class="string">start</span> <span class="string">nginx</span></span><br><span class="line"><span class="string">sudo</span> <span class="string">systemctl</span> <span class="string">enable</span> <span class="string">nginx</span></span><br></pre></td></tr></table></figure>

<h3 id="新建网站目录"><a href="#新建网站目录" class="headerlink" title="新建网站目录"></a>新建网站目录</h3><p>为了便于申请证书，需要新建反代网站目录，<strong>一定不要在<code>/root</code>目录上新建</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mkdir -p /var/www/qt</span><br><span class="line">cp /usr/share/nginx/html/* /var/www/qt</span><br></pre></td></tr></table></figure>

<h3 id="配置-nginx"><a href="#配置-nginx" class="headerlink" title="配置 nginx"></a>配置 nginx</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vi /etc/nginx/conf.d/qt.conf</span><br></pre></td></tr></table></figure>

<p>修改配置文件，将<code>server_name _;</code>中的<code>_</code>改成域名，在<code>location /</code>中注释掉<code>try_files $uri $uri/ =404;</code>（debian11上没有这一行，不用注释），并将以下内容写入<code>location /字段</code>：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">proxy_pass</span> <span class="string">http://127.0.0.1:8080/;</span></span><br><span class="line"><span class="string">proxy_http_version</span> <span class="number">1.1</span><span class="string">;</span></span><br><span class="line"><span class="string">proxy_set_header</span> <span class="string">X-Forwarded-Host</span> <span class="string">$http_host;</span></span><br><span class="line"><span class="string">proxy_set_header</span> <span class="string">X-Real-IP</span> <span class="string">$remote_addr;</span></span><br><span class="line"><span class="string">proxy_set_header</span> <span class="string">X-Forwarded-For</span> <span class="string">$proxy_add_x_forwarded_for;</span></span><br><span class="line"><span class="string">proxy_set_header</span> <span class="string">X-Forwarded-Proto</span> <span class="string">$scheme;</span></span><br><span class="line"><span class="string">http2_push_preload</span> <span class="string">on;</span></span><br></pre></td></tr></table></figure>

<h3 id="配置-Nginx-http-80-端口"><a href="#配置-Nginx-http-80-端口" class="headerlink" title="配置 Nginx http 80 端口"></a>配置 Nginx http 80 端口</h3><p>为了使下面申请证书时能访问 <a href="http://bore.vip/.well-known/acme-challenge/%E2%80%A6">http://bore.vip/.well-known/acme-challenge/…</a> 这个链接，首先配置好<a href="http://bore.vip/.well-known/acme-challenge/%E2%80%A6%E8%BF%99%E4%B8%AA%E9%93%BE%E6%8E%A5%EF%BC%8C%E9%A6%96%E5%85%88%E9%85%8D%E7%BD%AE%E5%A5%BDNginx">http://bore.vip/.well-known/acme-challenge/…这个链接，首先配置好Nginx</a> 80 端口，保证上述网址能顺利访问，从而顺利申请证书。所以在 nginx 配置的 server 节点下添加：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">location ~ /.well-known &#123;</span><br><span class="line">    allow all;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最终修改为：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">server</span> &#123;</span><br><span class="line">    <span class="string">listen</span>       <span class="number">80</span><span class="string">;</span></span><br><span class="line">	<span class="string">root</span>   <span class="string">/var/www/qt;</span></span><br><span class="line">    <span class="string">index</span> <span class="string">index.html</span> <span class="string">index.htm</span> <span class="string">index.nginx-debian.html;</span></span><br><span class="line">    <span class="string">server_name</span>  <span class="string">qt.bore.vip;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#access_log  /var/log/nginx/host.access.log  main;</span></span><br><span class="line"></span><br><span class="line">    <span class="string">location</span> <span class="string">/</span> &#123;</span><br><span class="line">		</span><br><span class="line">		<span class="string">proxy_pass</span> <span class="string">http://127.0.0.1:8080/;</span></span><br><span class="line">        <span class="string">proxy_http_version</span> <span class="number">1.1</span><span class="string">;</span></span><br><span class="line">        <span class="string">proxy_set_header</span> <span class="string">X-Forwarded-Host</span> <span class="string">$http_host;</span></span><br><span class="line">        <span class="string">proxy_set_header</span> <span class="string">X-Real-IP</span> <span class="string">$remote_addr;</span></span><br><span class="line">        <span class="string">proxy_set_header</span> <span class="string">X-Forwarded-For</span> <span class="string">$proxy_add_x_forwarded_for;</span></span><br><span class="line">        <span class="string">proxy_set_header</span> <span class="string">X-Forwarded-Proto</span> <span class="string">$scheme;</span></span><br><span class="line">        <span class="string">http2_push_preload</span> <span class="string">on;</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="string">location</span> <span class="string">~</span> <span class="string">/.well-known</span> &#123;</span><br><span class="line">    <span class="string">allow</span> <span class="string">all;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试配置是否有问题：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nginx -t</span><br></pre></td></tr></table></figure>

<p>重启 Nginx 生效：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl restart nginx</span><br></pre></td></tr></table></figure>

<h3 id="配置SSL证书"><a href="#配置SSL证书" class="headerlink" title="配置SSL证书"></a>配置SSL证书</h3><p>实际上，我还添加了SSL（需要先注释掉server中的<code>listen 80 default_server;</code>和<code>listen [::]:80 default_server;</code>两行<br>）。整体示例如下，就不细说了，可以对照着自己配置文件修改。如果不熟悉的，强烈建议使用<code>Let&#39;s Encrypt</code>等一键SSL&#x2F;TLS程序添加SSL功能。</p>
<h4 id="安装-Certbot-1"><a href="#安装-Certbot-1" class="headerlink" title="安装 Certbot"></a>安装 Certbot</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt-get install letsencrypt -y</span><br></pre></td></tr></table></figure>

<h4 id="使用-webroot-自动生成证书-1"><a href="#使用-webroot-自动生成证书-1" class="headerlink" title="使用 webroot 自动生成证书"></a>使用 webroot 自动生成证书</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">certbot certonly --webroot -w /var/www/qt -d qt.bore.vip -m 455343442@qq.com --agree-tos</span><br></pre></td></tr></table></figure>

<hr>
<p>如果提示404错误：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo chmod 755 /var/www/qt</span><br><span class="line">systemctl restart nginx</span><br><span class="line">systemctl restart qbittorrent-nox</span><br></pre></td></tr></table></figure>

<p>RN可能要多申请几遍证书，bwg一次就成功了。</p>
<hr>
<h4 id="编辑-Nginx"><a href="#编辑-Nginx" class="headerlink" title="编辑 Nginx"></a>编辑 <code>Nginx</code></h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vi /etc/nginx/conf.d/qt.conf</span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">server</span> &#123;</span><br><span class="line">    <span class="string">listen</span>       <span class="number">80</span><span class="string">;</span></span><br><span class="line">    <span class="string">server_name</span>  <span class="string">qt.bore.vip;</span></span><br><span class="line">	<span class="string">root</span> <span class="string">/var/www/qt;</span></span><br><span class="line">        </span><br><span class="line">	<span class="comment"># Add index.php to the list if you are using PHP</span></span><br><span class="line">     <span class="string">index</span> <span class="string">index.html</span> <span class="string">index.htm</span> <span class="string">index.nginx-debian.html;</span></span><br><span class="line">    <span class="comment">#access_log  /var/log/nginx/host.access.log  main;</span></span><br><span class="line"></span><br><span class="line">    <span class="string">location</span> <span class="string">/</span> &#123;</span><br><span class="line">		<span class="string">proxy_pass</span> <span class="string">http://127.0.0.1:8080/;</span></span><br><span class="line">        <span class="string">proxy_http_version</span> <span class="number">1.1</span><span class="string">;</span></span><br><span class="line">        <span class="string">proxy_set_header</span> <span class="string">X-Forwarded-Host</span> <span class="string">$http_host;</span></span><br><span class="line">        <span class="string">proxy_set_header</span> <span class="string">X-Real-IP</span> <span class="string">$remote_addr;</span></span><br><span class="line">        <span class="string">proxy_set_header</span> <span class="string">X-Forwarded-For</span> <span class="string">$proxy_add_x_forwarded_for;</span></span><br><span class="line">        <span class="string">proxy_set_header</span> <span class="string">X-Forwarded-Proto</span> <span class="string">$scheme;</span></span><br><span class="line">        <span class="string">http2_push_preload</span> <span class="string">on;</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="string">location</span> <span class="string">~</span> <span class="string">/.well-known</span> &#123;</span><br><span class="line">    <span class="string">allow</span> <span class="string">all;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">        <span class="string">listen</span> <span class="number">443</span> <span class="string">ssl;</span> <span class="comment"># managed by Certbot</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># RSA certificate</span></span><br><span class="line">        <span class="string">ssl_certificate</span> <span class="string">/etc/letsencrypt/live/qt.bore.vip/fullchain.pem;</span> <span class="comment"># managed by Certbot</span></span><br><span class="line">        <span class="string">ssl_certificate_key</span> <span class="string">/etc/letsencrypt/live/qt.bore.vip/privkey.pem;</span> <span class="comment"># managed by Certbot</span></span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">	    <span class="comment"># Redirect non-https traffic to https</span></span><br><span class="line">    <span class="string">if</span> <span class="string">($scheme</span> <span class="type">!=</span> <span class="string">&quot;https&quot;</span><span class="string">)</span> &#123;</span><br><span class="line">        <span class="string">return</span> <span class="number">301</span> <span class="string">https://$host$request_uri;</span></span><br><span class="line">    &#125; <span class="comment"># managed by Certbot</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>测试配置是否有问题：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nginx -t</span><br></pre></td></tr></table></figure>

<p>重启 Nginx 生效：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl restart nginx</span><br></pre></td></tr></table></figure>

<h4 id="自动续期-1"><a href="#自动续期-1" class="headerlink" title="自动续期"></a>自动续期</h4><p>Let’s Encrypt 的证书有效期为 90 天，不过我们可以通过 crontab 定时运行命令更新证书。</p>
<p>先运行以下命令来测试证书的自动更新：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">certbot renew --dry-run</span><br></pre></td></tr></table></figure>

<p>如果一切正常，就可以编辑 crontab 定期运行以下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">30 2 * */2 * /usr/bin/certbot renew --quiet &amp;&amp; /bin/systemctl restart nginx</span><br></pre></td></tr></table></figure>

<p>查看证书有效期的命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">openssl x509 -noout -dates -in /etc/letsencrypt/live/qt.bore.vip/cert.pem</span><br></pre></td></tr></table></figure>
<h2 id="配置nginx开启目录浏览"><a href="#配置nginx开启目录浏览" class="headerlink" title="配置nginx开启目录浏览"></a>配置nginx开启目录浏览</h2><p>将qt下载目录结合nginx开启目录浏览，便于下载。</p>
<h3 id="安装-nginx-1"><a href="#安装-nginx-1" class="headerlink" title="安装 nginx"></a>安装 nginx</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt install nginx -y</span><br><span class="line">sudo systemctl start nginx</span><br><span class="line">sudo systemctl enable nginx</span><br></pre></td></tr></table></figure>

<h3 id="配置-nginx-1"><a href="#配置-nginx-1" class="headerlink" title="配置 nginx"></a>配置 nginx</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vi /etc/nginx/conf.d/ftp.conf</span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">server</span> &#123;</span><br><span class="line">  <span class="string">listen</span>  <span class="number">80</span> <span class="string">;</span></span><br><span class="line">  <span class="string">listen</span> [<span class="string">::</span>]<span class="string">:80;</span></span><br><span class="line">  <span class="string">root</span> <span class="string">/home/admin;</span></span><br><span class="line">  <span class="string">server_name</span> <span class="string">ftp.bore.vip;</span></span><br><span class="line">  <span class="string">access_log</span>  <span class="string">/var/log/nginx/hexo_access.log;</span></span><br><span class="line">  <span class="string">error_log</span>   <span class="string">/var/log/nginx/hexo_error.log;</span></span><br><span class="line">  <span class="string">error_page</span> <span class="number">404</span> <span class="string">=</span>  <span class="string">/404.html;</span></span><br><span class="line">  <span class="string">location</span> <span class="string">~*</span> <span class="string">^.+\.(ico|gif|jpg|jpeg|png)$</span> &#123;</span><br><span class="line">    <span class="string">root</span> <span class="string">/home/admin;</span></span><br><span class="line">    <span class="string">access_log</span>   <span class="string">off;</span></span><br><span class="line">    <span class="string">expires</span>      <span class="string">1d;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="string">location</span> <span class="string">~*</span> <span class="string">^.+\.(css|js|txt|xml|swf|wav)$</span> &#123;</span><br><span class="line">    <span class="string">root</span> <span class="string">/home/admin;</span></span><br><span class="line">    <span class="string">access_log</span>   <span class="string">off;</span></span><br><span class="line">    <span class="string">expires</span>      <span class="string">10m;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="string">location</span> <span class="string">/</span> &#123;</span><br><span class="line">    <span class="string">root</span> <span class="string">/home/admin;</span></span><br><span class="line">    <span class="string">if</span> <span class="string">(-f</span> <span class="string">$request_filename)</span> &#123;</span><br><span class="line">    <span class="string">rewrite</span> <span class="string">^/(.*)$</span>  <span class="string">/$1</span> <span class="string">break;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="string">location</span> <span class="string">/nginx_status</span> &#123;</span><br><span class="line">    <span class="string">stub_status</span> <span class="string">on;</span></span><br><span class="line">    <span class="string">access_log</span> <span class="string">off;</span></span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="string">autoindex</span> <span class="string">on;</span>                        </span><br><span class="line">  <span class="string">autoindex_exact_size</span> <span class="string">off;</span>            </span><br><span class="line">  <span class="string">autoindex_localtime</span> <span class="string">on;</span>              </span><br><span class="line">  <span class="string">charset</span> <span class="string">utf-8</span>,<span class="string">gbk;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="配置-SSL-证书"><a href="#配置-SSL-证书" class="headerlink" title="配置 SSL 证书"></a>配置 SSL 证书</h3><h4 id="安装-Certbot-2"><a href="#安装-Certbot-2" class="headerlink" title="安装 Certbot"></a>安装 Certbot</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt-get install letsencrypt -y</span><br></pre></td></tr></table></figure>

<h4 id="使用-webroot-自动生成证书-2"><a href="#使用-webroot-自动生成证书-2" class="headerlink" title="使用 webroot 自动生成证书"></a>使用 webroot 自动生成证书</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">certbot certonly --webroot -w /home/admin -d example.com -m 455343442@qq.com --agree-tos</span><br></pre></td></tr></table></figure>

<h4 id="编辑-Nginx-1"><a href="#编辑-Nginx-1" class="headerlink" title="编辑 Nginx"></a>编辑 <code>Nginx</code></h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vi /etc/nginx/conf.d/ftp.conf</span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">server</span> &#123;</span><br><span class="line">    <span class="string">listen</span> <span class="number">80</span><span class="string">;</span></span><br><span class="line">    <span class="string">listen</span> [<span class="string">::</span>]<span class="string">:80;</span></span><br><span class="line">    <span class="string">root</span> <span class="string">/home/admin;</span></span><br><span class="line">    <span class="string">server_name</span>  <span class="string">ftp.bore.vip;</span></span><br><span class="line"></span><br><span class="line">    <span class="string">listen</span> <span class="number">443</span> <span class="string">ssl;</span> <span class="comment"># managed by Certbot</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># RSA certificate</span></span><br><span class="line">    <span class="string">ssl_certificate</span> <span class="string">/etc/letsencrypt/live/ftp.bore.vip/fullchain.pem;</span> <span class="comment"># managed by Certbot</span></span><br><span class="line">    <span class="string">ssl_certificate_key</span> <span class="string">/etc/letsencrypt/live/ftp.bore.vip/privkey.pem;</span> <span class="comment"># managed by Certbot</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Redirect non-https traffic to https</span></span><br><span class="line">    <span class="string">if</span> <span class="string">($scheme</span> <span class="type">!=</span> <span class="string">&quot;https&quot;</span><span class="string">)</span> &#123;</span><br><span class="line">        <span class="string">return</span> <span class="number">301</span> <span class="string">https://$host$request_uri;</span></span><br><span class="line">    &#125; <span class="comment"># managed by Certbot</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="string">location</span> <span class="string">/</span> &#123;</span><br><span class="line">        <span class="string">root</span> <span class="string">/home/admin;</span></span><br><span class="line">        <span class="string">autoindex</span> <span class="string">on;</span>                        </span><br><span class="line">        <span class="string">autoindex_exact_size</span> <span class="string">off;</span>            </span><br><span class="line">        <span class="string">autoindex_localtime</span> <span class="string">on;</span>              </span><br><span class="line">        <span class="string">charset</span> <span class="string">utf-8</span>,<span class="string">gbk;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl restart nginx</span><br></pre></td></tr></table></figure>

<h4 id="自动续期-2"><a href="#自动续期-2" class="headerlink" title="自动续期"></a>自动续期</h4><p>Let’s Encrypt 的证书有效期为 90 天，不过我们可以通过 crontab 定时运行命令更新证书。</p>
<p>先运行以下命令来测试证书的自动更新：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">certbot renew --dry-run</span><br></pre></td></tr></table></figure>

<p>如果一切正常，就可以编辑 crontab 定期运行以下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">30 2 * */2 * /usr/bin/certbot renew --quiet &amp;&amp; /bin/systemctl restart nginx</span><br></pre></td></tr></table></figure>

<p>查看证书有效期的命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">openssl x509 -noout -dates -in /etc/letsencrypt/live/ftp.bore.vip/cert.pem</span><br></pre></td></tr></table></figure>

<h2 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h2><h3 id="vsftpd-conf注释"><a href="#vsftpd-conf注释" class="headerlink" title="vsftpd.conf注释"></a><code>vsftpd.conf</code>注释</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">全域性配置</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">本地系統使用者寫入許可權；</span></span><br><span class="line">write_enable=YES</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">本地使用者建立檔案及目錄預設許可權掩碼；</span></span><br><span class="line">local_umask=022</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">列印目錄顯示資訊，通常用於使用者第一次訪問目錄時，資訊提示；</span></span><br><span class="line">dirmessage_enable=YES</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">啟用上傳/下載日誌記錄；</span> </span><br><span class="line">xferlog_enable=YES</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">日誌檔案將根據xferlog的標準格式寫入；</span></span><br><span class="line">xferlog_std_format=YES</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">指定 <span class="built_in">log</span> 路徑</span></span><br><span class="line">xferlog_file=/var/log/vsftpd.log</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">FTP使用20埠進行資料傳輸；</span></span><br><span class="line">connect_from_port_20=YES</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Vsftpd不以獨立的服務啟動，通過Xinetd服務管理，建議改成YES；</span></span><br><span class="line">listen=NO</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">啟用IPV6監聽；</span></span><br><span class="line">listen_ipv6=YES</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">登入FTP伺服器，依據/etc/pam.d/vsftpd中內容進行認證；</span></span><br><span class="line">pam_service_name=vsftpd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Vsftpd.user_list和ftpusers配置檔案裡使用者禁止訪問FTP；</span></span><br><span class="line">userlist_enable=YES</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">設定vsftpd與tcp wrapper結合進行主機的訪問控制，Vsftpd伺服器檢查/etc/hosts.allow 和/etc/hosts.deny中的設定，來決定請求連線的主機，是否允許訪問該FTP伺服器。</span></span><br><span class="line">tcp_wrappers=YES</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">限制使用者都只能讀取家目錄</span></span><br><span class="line">chroot_local_user=YES</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">這樣子才可以正常讀取家目錄</span></span><br><span class="line">allow_writeable_chroot=YES</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">帳號清單路徑</span></span><br><span class="line">userlist_file=/etc/vsftpd.userlist</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">白名單，拒絕除檔案中的使用者外的使用者FTP訪問</span></span><br><span class="line">userlist_deny=NO</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">是否使用本地時間？vsftpd 預設使用 GMT 時間(格林威治)，所以會比台灣晚 8 小時，建議設定為 YES 吧</span></span><br><span class="line">use_localtime=YES</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">這個選項必須指定一個空的資料夾且任何登入者都不能有寫入的權限，當vsftpd 不需要file system 的權限時，就會將使用者限制在此資料夾中。預設值為/usr/share/empty</span></span><br><span class="line">secure_chroot_dir=/var/run/vsftpd/empty</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">這樣子有可能在傳中文不會有亂碼</span></span><br><span class="line">syslog_enable=YES</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">同一個IP最大同時下載人數，預設沒有限制</span></span><br><span class="line">max_per_ip=1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">連線閒置時間超180秒就中斷，單位以second</span></span><br><span class="line">accept_timeout=180(DEFAULT:60)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">資料傳送閒置時間超180秒就中斷，單位以second</span></span><br><span class="line">data_connection_timeout=180(DEFAULT:YES)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">本地使用者配置</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">啟用本地系統使用者訪問；</span></span><br><span class="line">local_enable=YES</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">本地使用者建立檔案及目錄預設許可權掩碼；</span></span><br><span class="line">local_umask=022</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改本地使用者登入時訪問的目錄路徑</span></span><br><span class="line">local_root=/home/ftp</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">匿名使用者訪問配置（最大許可權）</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">開啟匿名使用者訪問；</span></span><br><span class="line">anonymous_enable=NO</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">匿名使用者上傳檔案的<span class="built_in">umask</span>值</span></span><br><span class="line">anon_umask=022</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">允許匿名使用者上傳檔案</span></span><br><span class="line">anon_upload_enable=YES</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">允許匿名使用者建立目錄</span></span><br><span class="line">anon_mkdir_write_enable=YES</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">允許匿名使用者修改目錄名稱或刪除目錄</span></span><br><span class="line">anon_other_write_enable=YES</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改匿名使用者登入時訪問的目錄路徑</span></span><br><span class="line">anon_root=/data/ftpdata</span><br></pre></td></tr></table></figure>

<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://www.uskvm.com/p/32.html">1.解决 Debian 下使用 vi 时方向键乱码，退格键不能使用的问题</a></li>
<li><a href="https://shixiongfei.com/debian-vsftpd.html">2.Debian安装vsftpd</a></li>
<li><a href="https://blog.fish2bird.com/?p=706">3.Debian下vsftpd设置允许root登录分析</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/83730878">4.putty保存登录账号和密码</a></li>
<li><a href="https://www.myfreax.com/how-to-setup-ftp-server-with-vsftpd-on-debian-9/">5.如何在Debian 9上使用VSFTPD设置FTP服务器</a></li>
<li><a href="https://cloud.tencent.com/developer/article/1946063">6.Ubuntu安装Transmission并美化WEB UI实操教程</a></li>
<li><a href="https://www.nginx.com/blog/using-free-ssltls-certificates-from-lets-encrypt-with-nginx/">7.Update: Using Free Let’s Encrypt SSL&#x2F;TLS Certificates with NGINX</a></li>
<li>8.<a href="https://pa.ci/210.html">Debian 11安装qbittorrent-nox并设置Nginx反代</a></li>
<li><a href="https://zxqme.com/archives/143/">9.Debian安装qbittorrent-nox</a></li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Excel如何随机排序&amp;&amp;换行</title>
    <url>/archives/23bfda28/</url>
    <content><![CDATA[<h2 id="随机排序"><a href="#随机排序" class="headerlink" title="随机排序"></a>随机排序</h2><ol>
<li>首先打开需要操作的知excel表格。</li>
<li>然后在E2单元个中输入“&#x3D;”号，添加辅助函数rand。</li>
<li>在E2单元格回车，专在E2单元格右下角下拉复制函数。</li>
<li>选择属排序和筛选升序、降序都可以。</li>
<li>最后可看到随机排序完成。</li>
</ol>
<p>参考：<a href="https://zhidao.baidu.com/question/814731344583893012.html">excel如何随机排序</a></p>
<h2 id="换行"><a href="#换行" class="headerlink" title="换行"></a>换行</h2><p>Excel单元格的内容想要换行有三种方法。</p>
<p><strong>1、自动换行</strong></p>
<p>选择需要换行的区域，点击开始选项卡下的自动换行即可。优点是方便快捷，缺点是自动换行是在列宽不足的条件下才有效，且有时候换行效果不美观。</p>
<p><strong>2、强制换行</strong></p>
<p>单元格编辑模式中，在需要换行的位置按<code>Alt+enter</code>可以强制换行。</p>
<p>强制换行的优点是不受列宽的限制，想换行就换行，缺点是不好批量换行。但是强制换行批量取消还是很方便的：</p>
<p>用查找和替换功能，在查找内容按Ctrl+J可以输入换行符，会有一个闪烁的小黑点。然后替换就可以了。(批量删除换行)</p>
<p><strong>3、公式换行</strong></p>
<p>函数CHAR（10）可以返回换行符，不过要展示换行效果，还需要将单元格格式设置为自动换行。举例说明：</p>
<p>参考：<a href="https://zhuanlan.zhihu.com/p/32841464">Excel单元格内容“换行”你会几种方法？</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>excel</tag>
      </tags>
  </entry>
  <entry>
    <title>Excel查找重复项</title>
    <url>/archives/859eea1c/</url>
    <content><![CDATA[<p> 这里以Excel 2019为例。</p>
<ol>
<li>首先选中表格相应区域。</li>
<li>依次选择<code>开始—条件格式—突出显示单元格规则—重复值</code>。</li>
</ol>
<p>重复的单元格会突出显示，修改重复项后，突出显示自动消失。</p>
<p>参考链接：<a href="https://www.zhihu.com/question/20085802">excel一列中如何找出重复的数据？</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>excel</tag>
      </tags>
  </entry>
  <entry>
    <title>Excel表格调整分页打印内容</title>
    <url>/archives/fd9d6b5b/</url>
    <content><![CDATA[<p>依次选择<code>视图—分页预览</code>，单击选中后，我们看到文档多出了几条蓝色的实线，分出了第1页、第2页。如果我们想要调整打印的内容，只需要按住鼠标左键，拖动蓝色实线，上下左右移动到合适位置即可，最后查看打印预览，作最后的调整。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>excel</tag>
      </tags>
  </entry>
  <entry>
    <title>Flash小技巧</title>
    <url>/archives/a88a84c4/</url>
    <content><![CDATA[<p>1.按住alt键，拖动直线，会拉出一个尖点。</p>
<p>2.<code>Ctrl+g</code> 将绘图对象变成组，就不会覆盖；<code>Ctrl+b</code>将组打散。</p>
<p>3.flash中只有两种绘画对象：线条、填充。所有绘画对象都是由线条和填充组成的。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>flash</tag>
        <tag>tips</tag>
      </tags>
  </entry>
  <entry>
    <title>GitHub Actions利用FTP自动部署hugo-hexo到Centos 8</title>
    <url>/archives/c7ccd27d/</url>
    <content><![CDATA[<p>部署hugo到服务器，网上一般方法是利用<code>git hook</code>。这里记录一种新的方法：利用FTP Deploy GitHub Actions自动部署hugo到Centos8服务器。今后只要提交源码到<code>github</code>仓库，剩下的事就交给<code>GitHub Actions</code>了。</p>
<h2 id="本地操作"><a href="#本地操作" class="headerlink" title="本地操作"></a>本地操作</h2><p>参考：<a href="/archives/hugo-install-on-coding-and-gitee/#%E6%9C%AC%E5%9C%B0%E6%93%8D%E4%BD%9C">hugo部署到coding&amp;gitee&amp;备份源码-本地操作</a></p>
<h2 id="服务器操作"><a href="#服务器操作" class="headerlink" title="服务器操作"></a>服务器操作</h2><h3 id="安装-Nginx"><a href="#安装-Nginx" class="headerlink" title="安装 Nginx"></a>安装 Nginx</h3><p>准备工作：如果服务器端口不是22，先要更改SSH端口：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/ssh/sshd_config</span><br><span class="line">port 22</span><br></pre></td></tr></table></figure>

<p>然后重启生效。</p>
<p>首先，在服务器上安装<code>nginx</code>。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum update -y</span><br><span class="line">yum install nginx -y</span><br></pre></td></tr></table></figure>

<p>如果是centos 7，先要安装安装epel：<code>yum install epel-release</code>，才能安装nginx。</p>
<h3 id="启动-Nginx"><a href="#启动-Nginx" class="headerlink" title="启动 Nginx"></a>启动 Nginx</h3><p>Nginx 安装完成后需要手动启动，启动Nginx并设置开机自启：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl start nginx</span><br><span class="line">systemctl <span class="built_in">enable</span> nginx</span><br></pre></td></tr></table></figure>

<p>关闭防火墙：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl stop firewalld.service</span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld.service </span><br></pre></td></tr></table></figure>

<p>配置完成后，访问使用浏览器服务器 ip ，如果能看到以下界面，表示运行成功。</p>
<h3 id="创建新的网站目录"><a href="#创建新的网站目录" class="headerlink" title="创建新的网站目录"></a>创建新的网站目录</h3><p><strong>为了图方便，可以直接将网站目录改为FTP家目录。</strong></p>
<p>为了方便期间，我们在 <code>/var/www/</code> 目录下为每个站点创建一个文件夹。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo <span class="built_in">mkdir</span> -p /var/www/blog</span><br><span class="line">sudo <span class="built_in">chown</span> -R <span class="variable">$USER</span>:<span class="variable">$USER</span> /var/www/blog</span><br><span class="line">sudo <span class="built_in">chmod</span> -R 755 /var/www</span><br></pre></td></tr></table></figure>

<ul>
<li>解决Nginx出现403 forbidden</li>
</ul>
<p>如果后面利用FTP上传网页后，出现<code>403 Forbidden</code>，解决方法：</p>
<p>假设网站根目录在<code>/var/www/blog/</code>，则执行：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chmod -R 777 /var/www</span><br></pre></td></tr></table></figure>

<h3 id="配置-nginx"><a href="#配置-nginx" class="headerlink" title="配置 nginx"></a>配置 nginx</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/nginx/conf.d/blog.conf</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">  listen  80 ;</span><br><span class="line">  listen [::]:80;</span><br><span class="line">  root /var/www/blog;</span><br><span class="line">  server_name bore.vip www.bore.vip;</span><br><span class="line">  access_log  /var/log/nginx/hexo_access.log;</span><br><span class="line">  error_log   /var/log/nginx/hexo_error.log;</span><br><span class="line">  error_page 404 =  /404.html;</span><br><span class="line">  location ~* ^.+\.(ico|gif|jpg|jpeg|png)$ &#123;</span><br><span class="line">    root /var/www/blog;</span><br><span class="line">    access_log   off;</span><br><span class="line">    expires      1d;</span><br><span class="line">  &#125;</span><br><span class="line">  location ~* ^.+\.(css|js|txt|xml|swf|wav)$ &#123;</span><br><span class="line">    root /var/www/blog;</span><br><span class="line">    access_log   off;</span><br><span class="line">    expires      10m;</span><br><span class="line">  &#125;</span><br><span class="line">  location / &#123;</span><br><span class="line">    root /var/www/blog;</span><br><span class="line">    <span class="keyword">if</span> (-f <span class="variable">$request_filename</span>) &#123;</span><br><span class="line">    rewrite ^/(.*)$  /<span class="variable">$1</span> <span class="built_in">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  location /nginx_status &#123;</span><br><span class="line">    stub_status on;</span><br><span class="line">    access_log off;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>重启 Nginx 服务器，使服务器设定生效：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo systemctl restart nginx</span><br></pre></td></tr></table></figure>

<h3 id="配置ssl证书"><a href="#配置ssl证书" class="headerlink" title="配置ssl证书"></a>配置ssl证书</h3><blockquote>
<p>更多查看：<a href="/archives/58fed3fc/">Nginx 配置 ssl 证书</a></p>
</blockquote>
<p>这里记下怎样添加 Let’s Encrypt 免费证书。（貌似只有上传了文件到网站目录，才能申请证书成功。）如果想启用阿里证书，可查看：<a href="/archives/enable-ssl-on-nginx/#%E5%90%AF%E7%94%A8%E9%98%BF%E9%87%8C%E5%85%8D%E8%B4%B9%E8%AF%81%E4%B9%A6">启用阿里免费证书</a></p>
<h4 id="安装Certbot"><a href="#安装Certbot" class="headerlink" title="安装Certbot"></a>安装Certbot</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum install epel-release -y</span><br><span class="line">yum install certbot -y</span><br></pre></td></tr></table></figure>

<p>然后执行：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">certbot certonly --webroot -w /var/www/blog -d bore.vip -m 455343442@qq.com --agree-tos</span><br></pre></td></tr></table></figure>

<h4 id="配置Nginx"><a href="#配置Nginx" class="headerlink" title="配置Nginx"></a>配置Nginx</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/nginx/conf.d/blog.conf</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name bore.vip www.bore.vip;</span><br><span class="line">    rewrite ^(.*)$ https://$server_name<span class="variable">$1</span> permanent;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">  listen 443;</span><br><span class="line">  root /var/www/blog;</span><br><span class="line">  server_name bore.vip www.bore.vip;</span><br><span class="line">  ssl on;</span><br><span class="line">  ssl_certificate /etc/letsencrypt/live/bore.vip/fullchain.pem;</span><br><span class="line">  ssl_certificate_key /etc/letsencrypt/live/bore.vip/privkey.pem;</span><br><span class="line">  ssl_session_timeout 5m;</span><br><span class="line">  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">  ssl_ciphers ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP;</span><br><span class="line">  ssl_prefer_server_ciphers on;</span><br><span class="line">  access_log  /var/log/nginx/hexo_access.log;</span><br><span class="line">  error_log   /var/log/nginx/hexo_error.log;</span><br><span class="line">  error_page 404 =  /404.html;</span><br><span class="line">  location ~* ^.+\.(ico|gif|jpg|jpeg|png)$ &#123;</span><br><span class="line">    root /var/www/blog;</span><br><span class="line">    access_log   off;</span><br><span class="line">    expires      1d;</span><br><span class="line">  &#125;</span><br><span class="line">  location ~* ^.+\.(css|js|txt|xml|swf|wav)$ &#123;</span><br><span class="line">    root /var/www/blog;</span><br><span class="line">    access_log   off;</span><br><span class="line">    expires      10m;</span><br><span class="line">  &#125;</span><br><span class="line">  location / &#123;</span><br><span class="line">    root /var/www/blog;</span><br><span class="line">    <span class="keyword">if</span> (-f <span class="variable">$request_filename</span>) &#123;</span><br><span class="line">    rewrite ^/(.*)$  /<span class="variable">$1</span> <span class="built_in">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  location /nginx_status &#123;</span><br><span class="line">    stub_status on;</span><br><span class="line">    access_log off;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>重启Nginx生效：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl restart nginx</span><br></pre></td></tr></table></figure>

<h4 id="证书自动更新"><a href="#证书自动更新" class="headerlink" title="证书自动更新"></a>证书自动更新</h4><p>由于这个证书的时效只有 90 天，我们需要设置自动更新的功能，帮我们自动更新证书的时效。首先先在命令行模拟证书更新：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">certbot renew --dry-run</span><br></pre></td></tr></table></figure>

<p>模拟更新成功的效果如下(略)</p>
<p>在无法确认你的 nginx 配置是否正确时，一定要运行模拟更新命令，确保certbot和服务器通讯正常。使用 crontab -e 的命令来启用自动任务，命令行：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure>

<p>添加配置：（每隔两个月凌晨2:30自动执行证书更新操作）后保存退出。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">30 2 * */2 * /usr/bin/certbot renew --quiet &amp;&amp; /bin/systemctl restart nginx</span><br></pre></td></tr></table></figure>

<p>查看证书有效期的命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">openssl x509 -noout -dates -<span class="keyword">in</span> /etc/letsencrypt/live/bore.vip/cert.pem</span><br></pre></td></tr></table></figure>

<h3 id="安装vsftpd"><a href="#安装vsftpd" class="headerlink" title="安装vsftpd"></a>安装vsftpd</h3><p>Debian查看：<a href="/archives/9eb70758/#Debian%E5%AE%89%E8%A3%85vsftpd">Debian安装vsftpd</a>，Centos参考下面的。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo yum install vsftpd -y</span><br></pre></td></tr></table></figure>

<p>安装软件包后，启动vsftpd，并使其能够在引导时自动启动：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo systemctl start vsftpd</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> vsftpd</span><br></pre></td></tr></table></figure>

<h3 id="配置vsftpd"><a href="#配置vsftpd" class="headerlink" title="配置vsftpd"></a>配置vsftpd</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/vsftpd/vsftpd.conf</span><br></pre></td></tr></table></figure>

<p>在<code>userlist_enable=YES</code>下面，加上：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">userlist_file=/etc/vsftpd/user_list</span><br><span class="line">userlist_deny=NO</span><br></pre></td></tr></table></figure>

<h3 id="创建FTP用户"><a href="#创建FTP用户" class="headerlink" title="创建FTP用户"></a>创建FTP用户</h3><p>创建一个新用户，名为admin:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo adduser admin</span><br><span class="line">sudo passwd admin</span><br></pre></td></tr></table></figure>

<p>将用户添加到允许的FTP用户列表中：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;admin&quot;</span> | sudo <span class="built_in">tee</span> -a /etc/vsftpd/user_list</span><br></pre></td></tr></table></figure>

<p>设置正确的权限（使ftp用户可以上传网站文件到相应目录）：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo <span class="built_in">chmod</span> 755 /var/www/blog</span><br><span class="line">sudo <span class="built_in">chown</span> -R admin: /var/www/blog</span><br></pre></td></tr></table></figure>

<h3 id="关闭防火墙"><a href="#关闭防火墙" class="headerlink" title="关闭防火墙"></a>关闭防火墙</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl stop firewalld.service</span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld.service </span><br></pre></td></tr></table></figure>

<h3 id="重启vsftpd服务"><a href="#重启vsftpd服务" class="headerlink" title="重启vsftpd服务"></a>重启vsftpd服务</h3><p>保存文件并重新启动vsftpd服务，以使更改生效：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo systemctl restart vsftpd</span><br></pre></td></tr></table></figure>

<p>更多有关ftp部分可查看：<a href="/archives/centos8-enable-ftp/">centos8搭建ftp服务器</a></p>
<h2 id="允许root登录FTP"><a href="#允许root登录FTP" class="headerlink" title="允许root登录FTP"></a>允许root登录FTP</h2><ol>
<li>将<code>root</code>添加到允许的FTP用户列表中：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;root&quot;</span> | sudo <span class="built_in">tee</span> -a /etc/vsftpd/user_list</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>修改&#x2F;etc&#x2F;vsftpd&#x2F;user_list和&#x2F;etc&#x2F;vsftpd&#x2F;ftpusers两个设置文件脚本，将root账户前加上#号变为注释（使</li>
</ol>
<p>root账户从禁止登录的用户列表中排除）。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/vsftpd/user_list</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/vsftpd/ftpusers</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>重启vsftpd服务<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo systemctl restart vsftpd</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="Github操作"><a href="#Github操作" class="headerlink" title="Github操作"></a>Github操作</h2><h3 id="配置FTP-MIRROR-PASSWORD"><a href="#配置FTP-MIRROR-PASSWORD" class="headerlink" title="配置FTP_MIRROR_PASSWORD"></a>配置<code>FTP_MIRROR_PASSWORD</code></h3><p>点击博客仓库的Settings-&gt;Secrets-&gt;Add a new secret，Name填写<code>FTP_MIRROR_PASSWORD</code>，Value填写用户密码。</p>
<h3 id="配置-Github-actions"><a href="#配置-Github-actions" class="headerlink" title="配置 Github actions"></a>配置 Github actions</h3><p>在博客根目录新建<code>.github/workflows/gh_pages.yml</code>文件。代码（<strong>不添加缓存</strong>）如下：最好使用下面添加了缓存的。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">name: GitHub Page Deploy</span><br><span class="line"></span><br><span class="line">on:</span><br><span class="line">  push:</span><br><span class="line">    branches:</span><br><span class="line">      - develop</span><br><span class="line"><span class="built_in">jobs</span>:</span><br><span class="line">  build-deploy:</span><br><span class="line">    runs-on: ubuntu-latest</span><br><span class="line">    steps:</span><br><span class="line">      - name: Checkout master</span><br><span class="line">        uses: actions/checkout@v2.3.4</span><br><span class="line">        with:</span><br><span class="line">          submodules: <span class="literal">true</span>  <span class="comment"># Fetch Hugo themes (true OR recursive)</span></span><br><span class="line">          fetch-depth: 0    <span class="comment"># Fetch all history for .GitInfo and .Lastmod</span></span><br><span class="line">      - name: Setup Hugo</span><br><span class="line">        uses: peaceiris/actions-hugo@v2.5.0</span><br><span class="line">        with:</span><br><span class="line">          hugo-version: <span class="string">&#x27;latest&#x27;</span></span><br><span class="line">          extended: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">      - name: Build Hugo</span><br><span class="line">        run: hugo --minify</span><br><span class="line"></span><br><span class="line">      - name: Deploy Hugo to gh-pages</span><br><span class="line">        uses: peaceiris/actions-gh-pages@v3.8.0</span><br><span class="line">        with:</span><br><span class="line">          github_token: <span class="variable">$&#123;&#123; secrets.GITHUB_TOKEN &#125;</span>&#125;</span><br><span class="line">          PUBLISH_BRANCH: master</span><br><span class="line">          PUBLISH_DIR: ./public</span><br><span class="line">        <span class="comment"># cname:</span></span><br><span class="line">        </span><br><span class="line">      - name: Deploy Hugo to Server</span><br><span class="line">        uses: SamKirkland/FTP-Deploy-Action@4.2.0</span><br><span class="line">        with:</span><br><span class="line">          server: 104.224.191.88</span><br><span class="line">          username: admin</span><br><span class="line">          password: <span class="variable">$&#123;&#123; secrets.FTP_MIRROR_PASSWORD &#125;</span>&#125;</span><br><span class="line">          local-dir: ./public/</span><br><span class="line">          server-dir: /var/www/blog/</span><br></pre></td></tr></table></figure>

<p><strong>添加缓存：</strong></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">GitHub</span> <span class="string">Page</span> <span class="string">Deploy</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">develop</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build-deploy:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">master</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v2.3.4</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">submodules:</span> <span class="literal">true</span>  <span class="comment"># Fetch Hugo themes (true OR recursive)</span></span><br><span class="line">          <span class="attr">fetch-depth:</span> <span class="number">0</span>    <span class="comment"># Fetch all history for .GitInfo and .Lastmod</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Hugo</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">peaceiris/actions-hugo@v2.5.0</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">hugo-version:</span> <span class="string">&#x27;latest&#x27;</span></span><br><span class="line">          <span class="attr">extended:</span> <span class="literal">true</span></span><br><span class="line">          </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Cache</span> <span class="string">resources</span> <span class="comment"># 缓存 resource 文件加快生成速度</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/cache@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">resources</span></span><br><span class="line">         <span class="comment"># 检查照片文件变化</span></span><br><span class="line">          <span class="attr">key:</span> <span class="string">$&#123;&#123;</span> <span class="string">runner.os</span> <span class="string">&#125;&#125;-hugocache-$&#123;&#123;</span> <span class="string">hashFiles(&#x27;content/**/*&#x27;)</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">restore-keys:</span> <span class="string">$&#123;&#123;</span> <span class="string">runner.os</span> <span class="string">&#125;&#125;-hugocache-</span>          </span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">Hugo</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">hugo</span> <span class="string">--minify</span> <span class="string">--gc</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">Hugo</span> <span class="string">to</span> <span class="string">gh-pages</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">peaceiris/actions-gh-pages@v3.8.0</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">github_token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">PUBLISH_BRANCH:</span> <span class="string">master</span></span><br><span class="line">          <span class="attr">PUBLISH_DIR:</span> <span class="string">./public</span></span><br><span class="line">        <span class="comment"># cname:</span></span><br><span class="line">        </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">Hugo</span> <span class="string">to</span> <span class="string">Server</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">SamKirkland/FTP-Deploy-Action@4.3.0</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">server:</span> <span class="number">104.224</span><span class="number">.191</span><span class="number">.88</span></span><br><span class="line">          <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">          <span class="attr">password:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.FTP_MIRROR_PASSWORD</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">local-dir:</span> <span class="string">./public/</span></span><br><span class="line">          <span class="attr">server-dir:</span> <span class="string">/usr/share/nginx/html/</span></span><br></pre></td></tr></table></figure>

<p><strong>第三方：</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">name: GitHub Page</span><br><span class="line"></span><br><span class="line">on:</span><br><span class="line">    push:</span><br><span class="line">        branches:</span><br><span class="line">            - master <span class="comment"># master 更新触发</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">jobs</span>:</span><br><span class="line">    deploy:</span><br><span class="line">        runs-on: ubuntu-18.04</span><br><span class="line">        steps:</span><br><span class="line">            - uses: actions/checkout@v2</span><br><span class="line">              with:</span><br><span class="line">                  submodules: <span class="literal">true</span> <span class="comment"># clone submodules</span></span><br><span class="line">                  fetch-depth: 0 <span class="comment"># 克隆所有历史信息</span></span><br><span class="line"></span><br><span class="line">            - name: Setup Hugo</span><br><span class="line">              uses: peaceiris/actions-hugo@v2</span><br><span class="line">              with:</span><br><span class="line">                  hugo-version: <span class="string">&quot;0.87.0&quot;</span> <span class="comment"># Hugo 版本</span></span><br><span class="line">                  extended: <span class="literal">true</span> <span class="comment"># hugo插件版 Stack主题 必须启用</span></span><br><span class="line"></span><br><span class="line">            - name: Cache resources <span class="comment"># 缓存 resource 文件加快生成速度</span></span><br><span class="line">              uses: actions/cache@v2</span><br><span class="line">              with:</span><br><span class="line">                  path: resources</span><br><span class="line">                  <span class="comment"># 检查照片文件变化</span></span><br><span class="line">                  key: <span class="variable">$&#123;&#123; runner.os &#125;</span>&#125;-hugocache-<span class="variable">$&#123;&#123; hashFiles(&#x27;content/**/*&#x27;) &#125;</span>&#125;</span><br><span class="line">                  restore-keys: <span class="variable">$&#123;&#123; runner.os &#125;</span>&#125;-hugocache-</span><br><span class="line"></span><br><span class="line">            - name: Build <span class="comment"># 生成网页 删除无用 resource 文件 削减空行</span></span><br><span class="line">              run: hugo --minify --gc</span><br><span class="line"></span><br><span class="line">            - name: Deploy <span class="comment"># 部署到 GitHub Page</span></span><br><span class="line">              uses: peaceiris/actions-gh-pages@v3</span><br><span class="line">              with:</span><br><span class="line">                  <span class="comment"># 如果在同一个仓库下使用请使用 github_token 并注释 deploy_key</span></span><br><span class="line">                  <span class="comment"># github_token: $&#123;&#123; secrets.GITHUB_TOKEN &#125;&#125;</span></span><br><span class="line">                  deploy_key: <span class="variable">$&#123;&#123; secrets.ACTIONS_DEPLOY_KEY &#125;</span>&#125;</span><br><span class="line"></span><br><span class="line">                  <span class="comment"># 如果在同一个仓库请注释</span></span><br><span class="line">                  external_repository: <span class="comment"># 你的 GitHub page 仓库 example/example.github.io</span></span><br><span class="line"></span><br><span class="line">                  publish_dir: ./public</span><br><span class="line">                  user_name: <span class="string">&quot;github-actions[bot]&quot;</span></span><br><span class="line">                  user_email: <span class="string">&quot;github-actions[bot]@users.noreply.github.com&quot;</span></span><br><span class="line">                  full_commit_message: Deploy from <span class="variable">$&#123;&#123; github.repository &#125;</span>&#125;@<span class="variable">$&#123;&#123; github.sha &#125;</span>&#125; 🚀</span><br></pre></td></tr></table></figure>



<h2 id="提交源码"><a href="#提交源码" class="headerlink" title="提交源码"></a>提交源码</h2><p>初始化git，新建并切换到<code>develop</code>分支，将源码提交到<code>develop</code>分支。稍等片刻，github action会自动部署blog到<code>master</code>分支和服务器。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git init</span><br><span class="line">git checkout -b develop</span><br><span class="line">git remote add origin git@github.com:iwyang/iwyang.github.io.git</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;备份源码&quot;</span></span><br><span class="line">git push --force origin develop</span><br></pre></td></tr></table></figure>

<p>最终部署脚本：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[0;32mDeploying updates to gitee...\033[0m&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># backup</span></span><br><span class="line">git config --global core.autocrlf <span class="literal">false</span></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;site backup&quot;</span></span><br><span class="line">git push origin develop --force</span><br></pre></td></tr></table></figure>

<h2 id="克隆源码到本地"><a href="#克隆源码到本地" class="headerlink" title="克隆源码到本地"></a>克隆源码到本地</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b develop git@github.com:iwyang/iwyang.github.io.git blog --recursive</span><br></pre></td></tr></table></figure>

<p>因为使用<code>Submodule</code>管理主题，所以最后要加上 <code>--recursive</code>，因为使用 git clone 命令默认不会拉取项目中的子模块，你会发现主题文件是空的。（另外一种方法：<code>git submodule init &amp;&amp; git submodule update</code>）</p>
<h3 id="同步更新源文件"><a href="#同步更新源文件" class="headerlink" title="同步更新源文件"></a>同步更新源文件</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git pull origin develop</span><br></pre></td></tr></table></figure>

<h3 id="同步主题文件"><a href="#同步主题文件" class="headerlink" title="同步主题文件"></a>同步主题文件</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git submodule update --remote</span><br></pre></td></tr></table></figure>

<p>运行此命令后， Git 将会自动进入子模块然后抓取并更新，更新后重新提交一遍，子模块新的跟踪信息便也会记录到仓库中。这样就保证仓库主题是最新的。</p>
<h2 id="github、gitee、服务器三线部署hexo"><a href="#github、gitee、服务器三线部署hexo" class="headerlink" title="github、gitee、服务器三线部署hexo"></a>github、gitee、服务器三线部署hexo</h2><p>将hexo三线部署（由于部署hexo较慢，如果单独为<code>gitee</code>建立一个<code>workflows</code>，gitee会先部署完成，这样无法同步；hugo可以单独为<code>gitee</code>建立一个<code>workflows</code>，因为<code>hugo</code>部署到服务器会先于部署到<code>gitee</code>）：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Hexo</span> <span class="string">Deploy</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 只监听 source 分支的改动</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">develop</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 自定义环境变量</span></span><br><span class="line"><span class="attr">env:</span></span><br><span class="line">  <span class="attr">POST_ASSET_IMAGE_CDN:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build-and-deploy:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="comment"># 获取博客源码和主题</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v2.3.4</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">theme</span> <span class="string">repo</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v2.3.4</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">repository:</span> <span class="string">jerryc127/hexo-theme-butterfly</span></span><br><span class="line">          <span class="attr">ref:</span> <span class="string">master</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">themes/butterfly</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># 这里用的是 Node.js 14.x</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Set</span> <span class="string">up</span> <span class="string">Node.js</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&#x27;14&#x27;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># 设置 yarn 缓存，npm 的话可以看 actions/cache@v2 的文档示例</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Get</span> <span class="string">yarn</span> <span class="string">cache</span> <span class="string">directory</span> <span class="string">path</span></span><br><span class="line">        <span class="attr">id:</span> <span class="string">yarn-cache-dir-path</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">echo</span> <span class="string">&quot;::set-output name=dir::$(yarn cache dir)&quot;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Use</span> <span class="string">yarn</span> <span class="string">cache</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/cache@v2.1.6</span></span><br><span class="line">        <span class="attr">id:</span> <span class="string">yarn-cache</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">$&#123;&#123;</span> <span class="string">steps.yarn-cache-dir-path.outputs.dir</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">key:</span> <span class="string">$&#123;&#123;</span> <span class="string">runner.os</span> <span class="string">&#125;&#125;-yarn-$&#123;&#123;</span> <span class="string">hashFiles(&#x27;**/yarn.lock&#x27;)</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">restore-keys:</span> <span class="string">|</span></span><br><span class="line"><span class="string">            $&#123;&#123; runner.os &#125;&#125;-yarn-</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="comment"># 安装依赖</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">dependencies</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          yarn install --prefer-offline --frozen-lockfile</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="comment"># 从之前设置的 secret 获取部署私钥</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Set</span> <span class="string">up</span> <span class="string">environment</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">DEPLOY_KEY:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DEPLOY_KEY</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          sudo timedatectl set-timezone &quot;Asia/Shanghai&quot;</span></span><br><span class="line"><span class="string">          mkdir -p ~/.ssh</span></span><br><span class="line"><span class="string">          echo &quot;$DEPLOY_KEY&quot; &gt; ~/.ssh/id_rsa</span></span><br><span class="line"><span class="string">          chmod 600 ~/.ssh/id_rsa</span></span><br><span class="line"><span class="string">          ssh-keyscan github.com &gt;&gt; ~/.ssh/known_hosts</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="comment"># 生成并部署</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          npx hexo deploy --generate</span></span><br><span class="line"><span class="string"></span>          </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">Hexo</span> <span class="string">to</span> <span class="string">Server</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">SamKirkland/FTP-Deploy-Action@4.1.0</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">server:</span> <span class="number">104.224</span><span class="number">.191</span><span class="number">.88</span></span><br><span class="line">          <span class="attr">username:</span> <span class="string">admin</span></span><br><span class="line">          <span class="attr">password:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.FTP_MIRROR_PASSWORD</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">local-dir:</span> <span class="string">./public/</span></span><br><span class="line">          <span class="attr">server-dir:</span> <span class="string">/var/www/blog/</span></span><br><span class="line">          </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Sync</span> <span class="string">to</span> <span class="string">Gitee</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">wearerequired/git-mirror-action@master</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="comment"># 注意在 Settings-&gt;Secrets 配置 GITEE_RSA_PRIVATE_KEY</span></span><br><span class="line">          <span class="attr">SSH_PRIVATE_KEY:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITEE_RSA_PRIVATE_KEY</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="comment"># 注意替换为你的 GitHub 源仓库地址</span></span><br><span class="line">          <span class="attr">source-repo:</span> <span class="string">git@github.com:iwyang/iwyang.github.io.git</span></span><br><span class="line">          <span class="comment"># 注意替换为你的 Gitee 目标仓库地址</span></span><br><span class="line">          <span class="attr">destination-repo:</span> <span class="string">git@gitee.com:iwyang/iwyang.git</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">Gitee</span> <span class="string">Pages</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">yanglbme/gitee-pages-action@main</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="comment"># 注意替换为你的 Gitee 用户名</span></span><br><span class="line">          <span class="attr">gitee-username:</span> <span class="string">iwyang</span></span><br><span class="line">          <span class="comment"># 注意在 Settings-&gt;Secrets 配置 GITEE_PASSWORD</span></span><br><span class="line">          <span class="attr">gitee-password:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITEE_PASSWORD</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="comment"># 注意替换为你的 Gitee 仓库，仓库名严格区分大小写，请准确填写，否则会出错</span></span><br><span class="line">          <span class="attr">gitee-repo:</span> <span class="string">iwyang/iwyang</span></span><br><span class="line">          <span class="comment"># 要部署的分支，默认是 master，若是其他分支，则需要指定（指定的分支必须存在）</span></span><br><span class="line">          <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>

<h2 id="github、gitee、服务器三线部署hugo"><a href="#github、gitee、服务器三线部署hugo" class="headerlink" title="github、gitee、服务器三线部署hugo"></a>github、gitee、服务器三线部署hugo</h2><p>由于部署到<code>github</code>和服务器先于<code>gitee</code>，所有可以建立两个<code>workflows</code>。</p>
<ol>
<li>根目录新建<code>.github/workflows/deploy.yml</code>（用于部署到<code>github</code>和服务器）</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">name: GitHub Page Deploy</span><br><span class="line"></span><br><span class="line">on:</span><br><span class="line">  push:</span><br><span class="line">    branches:</span><br><span class="line">      - develop</span><br><span class="line"><span class="built_in">jobs</span>:</span><br><span class="line">  build-deploy:</span><br><span class="line">    runs-on: ubuntu-latest</span><br><span class="line">    steps:</span><br><span class="line">      - name: Checkout master</span><br><span class="line">        uses: actions/checkout@v2.3.4</span><br><span class="line">        with:</span><br><span class="line">          submodules: <span class="literal">true</span>  <span class="comment"># Fetch Hugo themes (true OR recursive)</span></span><br><span class="line">          fetch-depth: 0    <span class="comment"># Fetch all history for .GitInfo and .Lastmod</span></span><br><span class="line">      - name: Setup Hugo</span><br><span class="line">        uses: peaceiris/actions-hugo@v2.5.0</span><br><span class="line">        with:</span><br><span class="line">          hugo-version: <span class="string">&#x27;latest&#x27;</span></span><br><span class="line">          extended: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">      - name: Build Hugo</span><br><span class="line">        run: hugo --minify</span><br><span class="line"></span><br><span class="line">      - name: Deploy Hugo to gh-pages</span><br><span class="line">        uses: peaceiris/actions-gh-pages@v3.8.0</span><br><span class="line">        with:</span><br><span class="line">          github_token: <span class="variable">$&#123;&#123; secrets.GITHUB_TOKEN &#125;</span>&#125;</span><br><span class="line">          PUBLISH_BRANCH: master</span><br><span class="line">          PUBLISH_DIR: ./public</span><br><span class="line">        <span class="comment"># cname:</span></span><br><span class="line">        </span><br><span class="line">      - name: Deploy Hugo to Server</span><br><span class="line">        uses: SamKirkland/FTP-Deploy-Action@4.1.0</span><br><span class="line">        with:</span><br><span class="line">          server: 104.224.191.88</span><br><span class="line">          username: admin</span><br><span class="line">          password: <span class="variable">$&#123;&#123; secrets.FTP_MIRROR_PASSWORD &#125;</span>&#125;</span><br><span class="line">          local-dir: ./public/</span><br><span class="line">          server-dir: /var/www/blog/</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>根目录新建<code>.github/workflows/Sync to Gitee.yml</code>（用于部署到<code>gitee</code>）</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Sync</span> <span class="string">to</span> <span class="string">Gitee</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span> <span class="string">develop</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Sync</span> <span class="string">to</span> <span class="string">Gitee</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">wearerequired/git-mirror-action@master</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="comment"># 注意在 Settings-&gt;Secrets 配置 GITEE_RSA_PRIVATE_KEY</span></span><br><span class="line">          <span class="attr">SSH_PRIVATE_KEY:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITEE_RSA_PRIVATE_KEY</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="comment"># 注意替换为你的 GitHub 源仓库地址</span></span><br><span class="line">          <span class="attr">source-repo:</span> <span class="string">git@github.com:iwyang/iwyang.github.io.git</span></span><br><span class="line">          <span class="comment"># 注意替换为你的 Gitee 目标仓库地址</span></span><br><span class="line">          <span class="attr">destination-repo:</span> <span class="string">git@gitee.com:iwyang/iwyang.git</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">Gitee</span> <span class="string">Pages</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">yanglbme/gitee-pages-action@main</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="comment"># 注意替换为你的 Gitee 用户名</span></span><br><span class="line">          <span class="attr">gitee-username:</span> <span class="string">iwyang</span></span><br><span class="line">          <span class="comment"># 注意在 Settings-&gt;Secrets 配置 GITEE_PASSWORD</span></span><br><span class="line">          <span class="attr">gitee-password:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITEE_PASSWORD</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="comment"># 注意替换为你的 Gitee 仓库，仓库名严格区分大小写，请准确填写，否则会出错</span></span><br><span class="line">          <span class="attr">gitee-repo:</span> <span class="string">iwyang/iwyang</span></span><br><span class="line">          <span class="comment"># 要部署的分支，默认是 master，若是其他分支，则需要指定（指定的分支必须存在）</span></span><br><span class="line">          <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>

<h2 id="解决问题"><a href="#解决问题" class="headerlink" title="解决问题"></a>解决问题</h2><p>1.<strong>Error: FTPError: 550 Remove directory operation failed</strong></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">rm</span> <span class="string">-rf</span> <span class="string">/var/www/blog</span></span><br><span class="line"></span><br><span class="line"><span class="string">sudo</span> <span class="string">mkdir</span> <span class="string">-p</span> <span class="string">/var/www/blog</span></span><br><span class="line"><span class="string">sudo</span> <span class="string">chown</span> <span class="string">-R</span> <span class="string">$USER:$USER</span> <span class="string">/var/www/blog</span></span><br><span class="line"><span class="string">sudo</span> <span class="string">chmod</span> <span class="string">-R</span> <span class="number">755</span> <span class="string">/var/www</span></span><br><span class="line"></span><br><span class="line"><span class="string">sudo</span> <span class="string">chmod</span> <span class="number">755</span> <span class="string">/var/www/blog</span></span><br><span class="line"><span class="attr">sudo chown -R admin:</span> <span class="string">/var/www/blog</span></span><br><span class="line"></span><br><span class="line"><span class="string">sudo</span> <span class="string">systemctl</span> <span class="string">restart</span> <span class="string">vsftpd</span></span><br></pre></td></tr></table></figure>

<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://eliyar.biz/how_to_build_hexo_blog/">1.从 0 开始搭建 hexo 博客</a></p>
<p><a href="https://blog.yizhilee.com/post/letsencrypt-certificate/">2.为博客添加 Let’s Encrypt 免费证书</a></p>
<p><a href="https://github.com/SamKirkland">3.SamKirkland</a>&#x2F;<a href="https://github.com/SamKirkland/FTP-Deploy-Action">FTP-Deploy-Action</a></p>
<p><a href="https://blog.csdn.net/weixin_43782998/article/details/109163384">4.vsftpd参数设置，并允许root账户登录ftp</a></p>
<p><a href="https://blog.zhixuan.dev/posts/ce103e3b/">5.Stack主题 + GitHub Action</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>服务器</tag>
        <tag>hugo</tag>
        <tag>hexo</tag>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title>GitHub+jsDelivr+PicGo+Typora打造免费高速图床&amp;&amp;npm图床</title>
    <url>/archives/407b2bc4/</url>
    <content><![CDATA[<blockquote>
<p>2022.5.17 因为<code>jsdelivr</code>不再稳定，此法已失效。现在还是利用<code>typecho</code>将插入到文章的图片自动复制到<code>/source/img/</code>文件夹下，方法如下:</p>
<p>1.在<code>typora</code>菜单栏点击 <code>格式-&gt;图像-&gt;设置图片根目录</code>，将<code>hexo/source</code>作为其根目录即可。</p>
<p>2.首先在 hexo &gt; source目录下建一个文件夹叫img，用来保存博客中的图片。然后打开Typora的 文件 &gt; 偏好设置，进行如下设置。</p>
<p><img src="/../img/GitHub+jsDelivr+PicGo+Typora%E6%89%93%E9%80%A0%E5%85%8D%E8%B4%B9%E9%AB%98%E9%80%9F%E5%9B%BE%E5%BA%8A&&npm%E5%9B%BE%E5%BA%8A/00.jpg"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt;复制到制定路径</span><br><span class="line">&gt;../img/$&#123;filename&#125;</span><br><span class="line">&gt;勾选所有选项：</span><br><span class="line">&gt;对本地位置的图片应用上述规则</span><br><span class="line">&gt;对网络位置的图片应用上述规则</span><br><span class="line">&gt;优先使用相对路径</span><br><span class="line">&gt;允许根据YAML设置自动上传图片</span><br><span class="line">&gt;插入时自动转义图片URL</span><br></pre></td></tr></table></figure>

<p>这样的话所有插入到md的图片都将会保存到 <code>/source/img/该博客md文件名/图片名称</code>。</p>
<p>PS： <a href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a>主题相册：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt;&#123;% gallery %&#125;</span><br><span class="line"></span><br><span class="line">&gt;![](../../img/2022春季趣味运动会/1.jpg)</span><br><span class="line"></span><br><span class="line">&gt;![](../../img/2022春季趣味运动会/2.jpg)</span><br><span class="line"></span><br><span class="line">&gt;![](../../img/2022春季趣味运动会/3.jpg)</span><br><span class="line"></span><br><span class="line">&gt;![](../../img/2022春季趣味运动会/4.jpg)</span><br><span class="line"></span><br><span class="line">&gt;![](../../img/2022春季趣味运动会/5.jpg)</span><br><span class="line"></span><br><span class="line">&gt;![](../../img/2022春季趣味运动会/6.jpg)</span><br><span class="line"></span><br><span class="line">&gt;&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt;&lt;style&gt;</span><br><span class="line">&gt;.page-title &#123;</span><br><span class="line">   display: none;</span><br><span class="line"> &#125;</span><br><span class="line">&gt;&lt;/style&gt;</span><br><span class="line">&gt;## 骑行</span><br><span class="line"></span><br><span class="line">&gt;&lt;div class=&quot;gallery-group-main&quot;&gt;</span><br><span class="line">&gt;&#123;% galleryGroup &#x27;荆州行&#x27; &#x27;第一个100Km（2019.5）&#x27; &#x27;/gallery/jing-zhou-ride&#x27; ../img/荆州行/2.jpg %&#125;</span><br><span class="line">&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt;## 太和小学2019级</span><br><span class="line"></span><br><span class="line">&gt;&lt;div class=&quot;gallery-group-main&quot;&gt;</span><br><span class="line">&gt;&#123;% galleryGroup &#x27;2022春季趣味运动会&#x27; &#x27;那些精彩的瞬间&#x27; &#x27;/gallery/sport2022spring&#x27; ../img/2022春季趣味运动会/1.jpg %&#125;</span><br><span class="line">&gt;&#123;% galleryGroup &#x27;2021秋季趣味运动会&#x27; &#x27;那些精彩的瞬间&#x27; &#x27;/gallery/sport2021autumn&#x27; ../img/2021秋季趣味运动会/1.jpg %&#125;</span><br><span class="line">&gt;&#123;% galleryGroup &#x27;2021春季趣味运动会&#x27; &#x27;那些精彩的瞬间&#x27; &#x27;/gallery/sport2021spring&#x27; ../img/2021春季趣味运动会/3.jpg %&#125;</span><br><span class="line">&gt;&#123;% galleryGroup &#x27;2019秋季趣味运动会&#x27; &#x27;那些精彩的瞬间&#x27; &#x27;/gallery/sport2019autumn&#x27; ../img/2019秋季趣味运动会/1.jpg %&#125;</span><br><span class="line">&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt;## 湖大教技2010级</span><br><span class="line"></span><br><span class="line">&gt;&lt;div class=&quot;gallery-group-main&quot;&gt;</span><br><span class="line">&gt;&#123;% galleryGroup &#x27;那些花儿&#x27; &#x27;那些人，那些事&#x27; &#x27;/gallery/hubei-university&#x27; ../img/那些花儿/3.jpg %&#125;</span><br><span class="line">&gt;&#123;% galleryGroup &#x27;2012年木兰天池春游&#x27; &#x27;大学里的一次春游&#x27; &#x27;/gallery/mulan-great-lake&#x27; ../img/2012年木兰天池春游/4.jpg %&#125;</span><br><span class="line">&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>手动将图片文件夹放到上述文件夹下，然后在源码模式，一个个输入图片相对路径。</p>
</blockquote>
<h2 id="配置github"><a href="#配置github" class="headerlink" title="配置github"></a>配置github</h2><h3 id="新建公共仓库"><a href="#新建公共仓库" class="headerlink" title="新建公共仓库"></a>新建公共仓库</h3><p>新建一个公共仓库，例如我建的仓库地址：<code>https://github.com/iwyang/pic</code>，注意一定要勾选<strong>使用Readme文件初始化这个仓库</strong>，否则后面会无法上传图片。</p>
<h3 id="获取私人令牌"><a href="#获取私人令牌" class="headerlink" title="获取私人令牌"></a>获取私人令牌</h3><p><a href="https://github.com/settings/tokens">前往设置</a>，作用：授权仓库的操作权限，通过API实现自动化。然后填写 <code>Token</code> 描述，勾选 repo、write、read然后点击 <code>Generate token</code> 生成一个 <code>Token</code>。因为 Token 只会显示一次，所以先保存笔记本等。</p>
<h2 id="安装-amp-配置PicGo"><a href="#安装-amp-配置PicGo" class="headerlink" title="安装&amp;配置PicGo"></a>安装&amp;配置PicGo</h2><h3 id="安装PicGo"><a href="#安装PicGo" class="headerlink" title="安装PicGo"></a>安装PicGo</h3><p>访问<a href="https://github.com/Molunerfinn/PicGo/releases">PicGo Releases</a>直接下载你的操作系统对应的安装包并完成安装。</p>
<blockquote>
<p>注：在安装的时候安装目录千万不能选C:\Program Files\下的任何地方，因为PicGo无法解析这一路径，如果你不知道安装在哪里的话，选择仅为我安装，否则在设置Typora时会出现错误。</p>
</blockquote>
<h3 id="配置PicGo"><a href="#配置PicGo" class="headerlink" title="配置PicGo"></a>配置PicGo</h3><p>在PicGo设置里作如下修改：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">设置日志文件：日志记录等级选择<span class="string">&quot;错误-Error&quot;</span>和<span class="string">&quot;提醒-Warn&quot;</span></span><br><span class="line">时间戳重命名：开</span><br><span class="line">开启上传提示：开</span><br><span class="line">上传后自动复制URL：开</span><br><span class="line">选择显示的图床：只勾选Github图床</span><br></pre></td></tr></table></figure>

<h3 id="配置GitHub插件"><a href="#配置GitHub插件" class="headerlink" title="配置GitHub插件"></a>配置<code>GitHub</code>插件</h3><p>安装好后开始配置<code>GitHub</code>图床</p>
<ol>
<li>设定仓库名：按照 用户名&#x2F;仓库名 的格式填写（iwyang&#x2F;pic）</li>
<li>设定分支名：master</li>
<li>设定 Token：粘贴之前叫你保存的Token。（在网盘里搜索<code>图床</code>会找到Token）</li>
<li>设定自定义域名：它的的作用是，在图片上传后，PicGo 会按照自定义域名+上传的图片名的方式生成访问链接，放到粘贴板上。 <code>https://cdn.jsdelivr.net/gh/用户名/仓库名</code>（<code>https://cdn.jsdelivr.net/gh/iwyang/pic</code>）</li>
</ol>
<p><img src="/../img/GitHub+jsDelivr+PicGo+Typora%E6%89%93%E9%80%A0%E5%85%8D%E8%B4%B9%E9%AB%98%E9%80%9F%E5%9B%BE%E5%BA%8A&&npm%E5%9B%BE%E5%BA%8A/01.jpg"></p>
<ol start="5">
<li>点击<code>设为默认图床</code></li>
</ol>
<h3 id="上传和管理图片"><a href="#上传和管理图片" class="headerlink" title="上传和管理图片"></a>上传和管理图片</h3><ul>
<li>单击上传区，选择链接格式，使用点击上传或剪贴板图片上传，PicGo会自动上传图片并将符合链接格式的链接复制到剪贴板，你只要按下Ctrl+v即可粘贴图片的链接。</li>
<li>单击相册，你可以看到你上传的所有图片，你可以对所有图片进行复制链接，修改图片URL与删除操作，并可以批量复制或批量删除。</li>
</ul>
<h2 id="配置Typora"><a href="#配置Typora" class="headerlink" title="配置Typora"></a>配置Typora</h2><ul>
<li>点击Typora左上角的文件-&gt;偏好设置</li>
<li>在弹出的界面中点击图像，选择插入图片时选项为<code>上传图片</code>，并勾选<code>对本地位置的图片应用上述规则</code>和<code>对网络位置的图片应用上述规则</code>。</li>
<li><code>上传服务</code>选项里选择<code>PicGo(app)</code>，<code>PicGo路径</code>选择<code>PicGo.exe</code>的绝对路径。</li>
</ul>
<p>以后在Typora里插入本地图片时，它会利用PicGo自动帮你上传到github，并替换本地图片地址为github地址。</p>
<h2 id="Typora下载地址-amp-皮肤"><a href="#Typora下载地址-amp-皮肤" class="headerlink" title="Typora下载地址&amp;皮肤"></a>Typora下载地址&amp;皮肤</h2><p>下载地址：</p>
<ul>
<li><a href="https://www.ghxi.com/typora.html">Typora 1.3.8</a></li>
<li><a href="http://www.123pan.com/s/HQeA-UX1Sh">123pan</a></li>
</ul>
<p>皮肤：</p>
<ul>
<li><a href="https://github.com/liangjingkanji/DrakeTyporaTheme">DrakeTyporaTheme</a></li>
</ul>
<h2 id="npm图床"><a href="#npm图床" class="headerlink" title="npm图床"></a>npm图床</h2><p>1.首先需要注册一个 npm 的账号。访问 <a href="https://www.npmjs.com/signup/">npm 注册页面</a></p>
<p>2.完成邮箱验证，注册完成后进入账号管理界面:头像 -&gt;Account，拉倒最上方，你会看到 <code>You have not verified your email address</code> 字样的提示，点击以后按提示步骤验证你的邮箱。</p>
<p>3.部分同学需要切换回原生源，如果你没改过源请跳过此步。（右键空白处———Git bush）来打开终端，输入以下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm config set registry https://registry.npmjs.org</span><br></pre></td></tr></table></figure>

<p>4.添加本地 <code>npm</code> 用户设置</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 仅第一次使用需要添加用户，之后会提示你输入你的npm账号密码以及注册邮箱(第一次可能需要输入邮箱验证码)</span><br><span class="line">npm adduser</span><br><span class="line"># 非第一次使用直接登录即可，之后会提示你输入你的npm账号密码以及注册邮箱(第一次可能需要输入邮箱验证码)</span><br><span class="line">npm login</span><br></pre></td></tr></table></figure>

<p>5.新建一个文件夹，将你需要的上传到图床的图片放到里面。也可以将你之前的GitHub仓库的图片clone下来，右键文件夹空白处打开终端。输入以下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure>
<p>运行 <code>npm</code> 初始化指令，把整个图床仓库打包，按照指示进行配置，注意需要事先确认你的包名没有和别人已发布的包重复，可以在 npm 官网搜索相应包名，搜不到就说明还没被占用。</p>
<p><img src="/../img/GitHub+jsDelivr+PicGo+Typora%E6%89%93%E9%80%A0%E5%85%8D%E8%B4%B9%E9%AB%98%E9%80%9F%E5%9B%BE%E5%BA%8A&&npm%E5%9B%BE%E5%BA%8A/1.jpg"></p>
<p>6.禁用双重验证</p>
<p>如果不禁用双重验证，每次<code>npm publish</code>都会报错提示要输入验证码（必须加上<code>--otp=&lt;code&gt;</code>才能发布包）：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm ERR! You can provide a one-time password by passing --otp=&lt;code&gt; to the command you ran.</span><br></pre></td></tr></table></figure>

<p><strong>禁用方法：</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm profile disable-2fa</span><br></pre></td></tr></table></figure>

<p>npm 将提示你输入密码，然后npm会显示<code>Enter one-time password from your authenticator:6位数字</code>。</p>
<p>7.然后输入以下指令来发布我们的包：：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm publish</span><br></pre></td></tr></table></figure>

<p>8.那么如何利用<del>国内</del>节点引用图片等资源呢</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://unpkg.com/:package@:version/:file                  ## unpkg CDN </span><br><span class="line">https://cdn.jsdelivr.net/npm/:package@:version/:file       ## jsd cdn</span><br><span class="line">https://cdn1.tianli0.top/npm/:package@:version/:file       ## 第三方</span><br></pre></td></tr></table></figure>

<p>例如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://unpkg.com/iwyang@1.0.2/speak/butterfly-ispeak-swiper.min.js</span><br><span class="line">https://cdn.jsdelivr.net/npm/iwyang@1.0.2/speak/butterfly-ispeak-swiper.min.js</span><br><span class="line">https://cdn1.tianli0.top/npm/iwyang@1.0.2/speak/butterfly-ispeak-swiper.min.js</span><br></pre></td></tr></table></figure>

<blockquote>
<p>通过ping看出，<code>unpkg</code>比<code>jsd</code>要稳定、速度要更快，所以优先使用<code>unpkg</code></p>
</blockquote>
<p>9.每次更新 npm 图床都需要先修改<code>[AssetsRepo]\package.json</code>里的 <code>version</code>, 也就是版本号。<br>而 <code>npm version patch</code> 即为更新 package.json 里的版本号的指令，效果是末尾版本号 + 1，例如 <code>0.0.1=&gt;0.0.2</code>、<code>1.1.3=&gt;1.1.4</code>。免去了打开 <code>package.json</code> 再修改版本号的麻烦。（大版本更新还是需要手动改的）。更新 npm 图床务必要记得更新 <code>package.json</code> 里的版本号！</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm version patch</span><br></pre></td></tr></table></figure>

<p>10.可以在根目录新建 <code>deploy.sh</code>脚本：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 更新package版本号</span><br><span class="line">npm version patch</span><br><span class="line"># 发布新版本包</span><br><span class="line">npm publish</span><br></pre></td></tr></table></figure>

<h3 id="利用GitHub-actions发布包"><a href="#利用GitHub-actions发布包" class="headerlink" title="利用GitHub actions发布包"></a>利用GitHub actions发布包</h3><blockquote>
<p>此部分内容还未测试</p>
</blockquote>
<p>1.如果每次都要在本地进行 npm publish 的话，npm 的提交是整个包一起上传的，不存在增量更新，耗时不说，而且还往往需要架梯子才能正常上传。所以我们可以把它交给 github action 来完成。</p>
<p>在 <a href="https://www.npmjs.com/">npm 官网</a> -&gt;<code>头像</code> -&gt;<code>Access Tokens</code>-&gt;<code>Generate New Token</code>, 勾选<code>Automation</code>选项，<code>Token</code> 只会显示这一次，之后如果忘记了就只能重新生成重新配置了。</p>
<p><img src="/../img/GitHub+jsDelivr+PicGo+Typora%E6%89%93%E9%80%A0%E5%85%8D%E8%B4%B9%E9%AB%98%E9%80%9F%E5%9B%BE%E5%BA%8A&&npm%E5%9B%BE%E5%BA%8A/2.jpg"></p>
<p><img src="/../img/GitHub+jsDelivr+PicGo+Typora%E6%89%93%E9%80%A0%E5%85%8D%E8%B4%B9%E9%AB%98%E9%80%9F%E5%9B%BE%E5%BA%8A&&npm%E5%9B%BE%E5%BA%8A/3.jpg"></p>
<p>2.在 github 的 <code>[AssetsRepo]</code> 仓库设置项里添加一个名为 <code>NPM_TOKEN</code> 的 <code>secrets</code>，把获取的 Npm 的<code>Access token</code>输入进去。</p>
<p>3.在本地的 <code>[AssetsRepo]</code>文件夹下新建 <code>[AssetsRepo]/.github/workflows/autopublish.yml</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Node.js</span> <span class="string">Package</span></span><br><span class="line"><span class="comment"># 监测图床分支，2020年10月后github新建仓库默认分支改为main，记得更改</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">master</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">publish-npm:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/setup-node@v1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&quot;12.x&quot;</span></span><br><span class="line">          <span class="attr">registry-url:</span> <span class="string">https://registry.npmjs.org/</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">publish</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">NODE_AUTH_TOKEN:</span> <span class="string">$&#123;&#123;secrets.npm_token&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<p>4.在本地的 <code>[AssetsRepo]</code> 文件夹下打开终端，运行以下指令，上传新增内容至 github，即可触发部署。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 将更改提交</span></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;npm publish&quot;</span></span><br><span class="line"><span class="comment"># 更新package版本号</span></span><br><span class="line">npm version patch</span><br><span class="line"><span class="comment"># 推送至github触发action</span></span><br><span class="line">git push</span><br></pre></td></tr></table></figure>

<blockquote>
<p>此处的四行指令顺序严格。<br>每次更新 npm 图床都需要先修改<code>[AssetsRepo]\package.json</code>里的 <code>version</code>, 也就是版本号。<br>而 <code>npm version patch</code> 即为更新 package.json 里的版本号的指令，效果是末尾版本号 + 1，例如 <code>0.0.1=&gt;0.0.2</code>、<code>1.1.3=&gt;1.1.4</code>。免去了打开 <code>package.json</code> 再修改版本号的麻烦。（大版本更新还是需要手动改的）<br>更新 npm 图床务必要记得更新 <code>package.json</code> 里的版本号！</p>
</blockquote>
<p>5.总结：</p>
<ul>
<li>GitHub 图床仓库大小不能超过 1G。当仓库超过 1G 后会有人工审核仓库内容，如果发现用来做图床，轻则删库重则封号。</li>
<li>Npm 有 <code>100MB</code> 的包大小限制，但是 NPM 有丰富的国内节点。</li>
</ul>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://my.oschina.net/u/3990666/blog/4371252">1.GitHub + jsDelivr + PicGo 打造稳定快速、高效免费图床</a></li>
<li><a href="https://blog.csdn.net/disILLL/article/details/104944710">2.手把手教你用Typora自动上传到picgo图床</a></li>
<li><a href="https://yinyoupoet.github.io/2019/09/03/hexo%E5%8D%9A%E5%AE%A2%E4%B8%AD%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87/">3.typora + hexo博客中插入图片</a></li>
<li><a href="https://minecraftbilibili.com/posts/950569f3">4.使用npm作为图床</a></li>
<li><a href="https://sianx.com/posts/3e956346/">5.npm图床的使用技巧</a></li>
<li><a href="https://www.w3cschool.cn/npmjs/npmjs-qadz3kmo.html">6.npm 使用双因素身份验证.</a></li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>图床</tag>
      </tags>
  </entry>
  <entry>
    <title>Halo-theme-joe2.0 使用文档&amp;&amp;样式指南</title>
    <url>/archives/2df9228b/</url>
    <content><![CDATA[<p>本文参考： </p>
<ul>
<li><a href="https://bbchin.com/archives/halo-theme-joe20">Halo-theme-joe2.0 食用文档</a></li>
<li><a href="https://bbchin.com/archives/style-guideline">Joe2.0 样式指南</a></li>
</ul>
<h2 id="安装-amp-更新"><a href="#安装-amp-更新" class="headerlink" title="安装 &amp; 更新"></a>安装 &amp; 更新</h2><blockquote>
<p>安装前请确保 Halo版本 和主题的兼容性，V1.0.10 及以上版本仅支持 Halo 1.5+，以下版本兼容到 Halo 1.4.11，请知悉。</p>
</blockquote>
<ol>
<li><p>复制主题仓库地址 <a href="https://github.com/qinhua/halo-theme-joe2.0.git">https://github.com/qinhua/halo-theme-joe2.0.git</a></p>
</li>
<li><p>进入博客后台管理 外观-主题-安装-远程下载，贴入仓库地址进行安装（建议直接使用最新版本 ）。<br>如果在线安装失败（大概率失败 😆 ），那就选择 本地上传，到主题 Release 页面下载指定版本主题压缩包，并上传上去（务必在 Release 页面下载压缩包，否则可能出现资源加载出错的问题）；</p>
</li>
<li><p>等待提示安装完成即可；</p>
</li>
<li><p>更新主题时，建议直接通过 外观-主题-Joe2.0-更多-从主题包更新 把下载好的 zip 包上传上去，然后 先切换到其他主题，再切回本主题，并进入主题设置执行一次保存，最后强刷前端页面即可（这里切主题主要是为了避免有时候主题状态未激活和缓存的问题）。</p>
</li>
</ol>
<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ol>
<li>安装主题后请务必到 后台管理 - 博客设置 - 高级选项 中开启 API服务 并配置 Access key 为 joe2.0（切记要和主题设置中的 AccessKey 一致），不然部分用到 Content API 的页面会请求失败并报错。（请参考以下报错）</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">“API has been disabled by blogger currently” —— 后台管理中未开启API服务</span><br><span class="line">“API access key is mismatch” —— 主题中的 AccessKey 和后台管理中的不一致</span><br></pre></td></tr></table></figure>
<ol start="2">
<li><p>如果后台管理中之前已经配置了其它的 Access Key（内容不是 joe2.0），那么需要你到本主题设置中的 基本设置-AccessKey&lt;必填&gt; 同步一下这个 Access key，保证两部一致即可（切记一致才行，且不要填写中文或特殊字符）。</p>
</li>
<li><p>有时，主题升级后配置项变化较大，直接访问博客可能会报错，导致页面渲染不出来。此时，只需要进入当前主题的设置界面执行一下保存操作来更新旧的配置，然后再访问页面即可；</p>
</li>
<li><p>有时，明明已经提示主题更新成功了，但访问博客时页面还是加载的旧版本的文件，可能是由于 主题激活状态不正常 或 主题缓存的问题 导致的。此时，只需要先启用其他主题再启用本主题即可，建议每次更新主题之后都做一下这个操作（目前后台管理系统还不太完善）。还有就是如果你配置了 CDN 服务，记得清理相应节点的缓存，让它回源取最新资源。</p>
</li>
<li><p>强烈建议 每次更新主题后，务必先清空一下浏览器缓存，保证加载的资源都是最新版本的，并到主题设置中执行一次保存，保证配置项是最新的，不然可能有各种报错（你可以通过 Ctrl + F5 强制刷新或者 Ctrl + Shift + DEL 清空浏览器所有缓存）。</p>
</li>
<li><p>最后，建议大家在 后台管理-系统-博客设置-高级选项-其他设置 中开启 全局绝对路径。</p>
</li>
</ol>
<h2 id="插入多媒体"><a href="#插入多媒体" class="headerlink" title="插入多媒体"></a>插入多媒体</h2><h3 id="插入音乐"><a href="#插入音乐" class="headerlink" title="插入音乐"></a>插入音乐</h3><p>怎样在文章中插入网易云播放器？</p>
<blockquote>
<p>id：网易云歌单 ID 或 歌曲 ID（可从歌曲网址中获取）</p>
</blockquote>
<ul>
<li><p>歌单</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;joe-mlist id=&quot;6800335663&quot;&gt;&lt;/joe-mlist&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>单曲</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;joe-music id=&quot;1303046498&quot;&gt;&lt;/joe-music&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>本地音乐</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;joe-mp3</span><br><span class="line">  name=&quot;天生狂野-柴古唐斯主题曲&quot;</span><br><span class="line">  url=&quot;https://bbchin.com/upload/2022/04/%E5%A4%A9%E7%94%9F%E7%8B%82%E9%87%8E-%E6%9F%B4%E5%8F%A4%E5%94%90%E6%96%AF%E4%B8%BB%E9%A2%98%E6%9B%B2.mp3&quot;</span><br><span class="line">  theme=&quot;red&quot;</span><br><span class="line">  cover=&quot;https://bbchin.com/upload/2022/04/cgts.png&quot;</span><br><span class="line">  autoplay</span><br><span class="line">&gt;&lt;/joe-mp3&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="插入视频"><a href="#插入视频" class="headerlink" title="插入视频"></a>插入视频</h3><p>文章中如何插入视频？</p>
<blockquote>
<p>主题已集成 dplayer，只需要在编辑文章时使用 joe-dplayer 标签插入视频地址即可（建议 MP4 格式，其它格式未必支持，切记前后要空一行），它接受如下属性：</p>
</blockquote>
<ul>
<li>src：视频地址（必传）</li>
<li>width：阅读器宽度，默认为 100%</li>
<li>height：阅读器高度，默认 500px<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;joe-dplayer src=<span class="string">&quot;https://xxx.mp4&quot;</span>&gt;&lt;/joe-dplyer&gt;</span><br></pre></td></tr></table></figure>
如果你想嵌入 <strong>B站视频</strong>，可以使用 joe-bilibili 标签（切记前后要空一行），它接受如下属性（相关参数可以从视频地址中获取）。</li>
<li>bvid：视频的 id（必传）</li>
<li>page：视频的 page，即分页</li>
<li>width：阅读器宽度，默认为 100%</li>
<li>height：阅读器高度，默认 500px</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;joe-bilibili bvid=&quot;BV12h411k7vr&quot;&gt;&lt;/joe-bilibili&gt;</span><br></pre></td></tr></table></figure>
<h2 id="文本元素"><a href="#文本元素" class="headerlink" title="文本元素"></a>文本元素</h2><h3 id="段落缩进"><a href="#段落缩进" class="headerlink" title="段落缩进"></a>段落缩进</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;indent&quot;</span>&gt;</span></span><br><span class="line">  有些男人就像烤面筋，外表黄黄的，身体圆圆的，说话柔柔的，无害，看上去还非常好吃。可当你吃下去，才知道他绵绵的，并无特别的味道，甚至到你吃完，你都不知道他是用什么做的。</span><br><span class="line">  ---- 李七毛《我们都不擅长告别》</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="居中标题"><a href="#居中标题" class="headerlink" title="居中标题"></a>居中标题</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">joe-mtitle</span> <span class="attr">title</span>=<span class="string">&quot;牛鞭牛鞭&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">joe-mtitle</span>&gt;</span></span><br><span class="line">````</span><br><span class="line">## 按钮元素</span><br><span class="line">### 多彩按钮</span><br></pre></td></tr></table></figure>
<p><joe-abtn color="#409eff" content="多彩按钮"></joe-abtn></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;joe-abtn color=&quot;#409eff&quot; content=&quot;多彩按钮&quot;&gt;&lt;/joe-abtn&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><joe-abtn icon="fa-bell" content="带图标按钮"></joe-abtn></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;joe-abtn icon=&quot;fa-bell&quot; content=&quot;带图标按钮&quot;&gt;&lt;/joe-abtn&gt;</span><br></pre></td></tr></table></figure>
<p><joe-abtn radius="12px" content="圆角按钮"></joe-abtn></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;joe-abtn radius=&quot;12px&quot; content=&quot;圆角按钮&quot;&gt;&lt;/joe-abtn&gt;</span><br><span class="line"></span><br><span class="line">### 便条按钮</span><br><span class="line">&gt;便条按钮不能自定义色彩，必须使用一个图标，其他的的和上面的多彩按钮一样</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><joe-anote href="#" type="secondary" content="便条按钮"></joe-anote><br><joe-anote icon="fa-bus" href="#" type="success" content="便条按钮"></joe-anote><br><joe-anote icon="fa-bus" href="#" type="warning" content="便条按钮"></joe-anote><br><joe-anote icon="fa-bus" href="#" type="error" content="便条按钮"></joe-anote><br><joe-anote icon="fa-bus" href="#" type="info" content="便条按钮"></joe-anote></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;joe-anote href=&quot;#&quot; type=&quot;secondary&quot; content=&quot;便条按钮&quot;&gt;&lt;/joe-anote&gt;</span><br><span class="line">&lt;joe-anote icon=&quot;fa-bus&quot; href=&quot;#&quot; type=&quot;success&quot; content=&quot;便条按钮&quot;&gt;&lt;/joe-anote&gt;</span><br><span class="line">&lt;joe-anote icon=&quot;fa-bus&quot; href=&quot;#&quot; type=&quot;warning&quot; content=&quot;便条按钮&quot;&gt;&lt;/joe-anote&gt;</span><br><span class="line">&lt;joe-anote icon=&quot;fa-bus&quot; href=&quot;#&quot; type=&quot;error&quot; content=&quot;便条按钮&quot;&gt;&lt;/joe-anote&gt;</span><br><span class="line">&lt;joe-anote icon=&quot;fa-bus&quot; href=&quot;#&quot; type=&quot;info&quot; content=&quot;便条按钮&quot;&gt;&lt;/joe-anote&gt;</span><br><span class="line">### 网盘按钮</span><br></pre></td></tr></table></figure>
<p><joe-cloud type="default" url="" password=""></joe-cloud><br><joe-cloud type="360" url="" password=""></joe-cloud><br><joe-cloud type="bd" url="" password="bn6f"></joe-cloud><br><joe-cloud type="ty" url="" password=""></joe-cloud><br><joe-cloud type="ct" url="" password=""></joe-cloud><br><joe-cloud type="wy" url="" password=""></joe-cloud><br><joe-cloud type="github" url="" password=""></joe-cloud><br><joe-cloud type="gitee" url="" password=""></joe-cloud><br><joe-cloud type="lz" url="" password=""></joe-cloud></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;joe-cloud type=&quot;default&quot; url=&quot;&quot; password=&quot;&quot;&gt;&lt;/joe-cloud&gt;</span><br><span class="line">&lt;joe-cloud type=&quot;360&quot; url=&quot;&quot; password=&quot;&quot;&gt;&lt;/joe-cloud&gt;</span><br><span class="line">&lt;joe-cloud type=&quot;bd&quot; url=&quot;&quot; password=&quot;bn6f&quot;&gt;&lt;/joe-cloud&gt;</span><br><span class="line">&lt;joe-cloud type=&quot;ty&quot; url=&quot;&quot; password=&quot;&quot;&gt;&lt;/joe-cloud&gt;</span><br><span class="line">&lt;joe-cloud type=&quot;ct&quot; url=&quot;&quot; password=&quot;&quot;&gt;&lt;/joe-cloud&gt;</span><br><span class="line">&lt;joe-cloud type=&quot;wy&quot; url=&quot;&quot; password=&quot;&quot;&gt;&lt;/joe-cloud&gt;</span><br><span class="line">&lt;joe-cloud type=&quot;github&quot; url=&quot;&quot; password=&quot;&quot;&gt;&lt;/joe-cloud&gt;</span><br><span class="line">&lt;joe-cloud type=&quot;gitee&quot; url=&quot;&quot; password=&quot;&quot;&gt;&lt;/joe-cloud&gt;</span><br><span class="line">&lt;joe-cloud type=&quot;lz&quot; url=&quot;&quot; password=&quot;&quot;&gt;&lt;/joe-cloud&gt;</span><br><span class="line"></span><br><span class="line">## 装饰元素</span><br><span class="line">### 跑马灯</span><br><span class="line">```html</span><br><span class="line">&lt;span class=&quot;joe_lamp&quot;&gt;&lt;/span&gt;</span><br></pre></td></tr></table></figure>
<p><span class="joe_lamp"></span></p>
<h3 id="进度条"><a href="#进度条" class="headerlink" title="进度条"></a>进度条</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;joe-progress percentage=&quot;50%&quot; color=&quot;#6ce766&quot;&gt;&lt;/joe-progress&gt;</span><br></pre></td></tr></table></figure>
<p><joe-progress percentage="50%" color="#6ce766"></joe-progress></p>
<h3 id="彩色虚线"><a href="#彩色虚线" class="headerlink" title="彩色虚线"></a>彩色虚线</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;joe-dotted&gt;&lt;/joe-dotted&gt;</span><br><span class="line">&lt;joe-dotted startcolor=&quot;#1772e8&quot; endcolor=&quot;#4cd327&quot;&gt;&lt;/joe-dotted&gt;</span><br></pre></td></tr></table></figure>
<p><joe-dotted></joe-dotted><br><joe-dotted startcolor="#1772e8" endcolor="#4cd327"></joe-dotted></p>
<h3 id="Tabs"><a href="#Tabs" class="headerlink" title="Tabs"></a>Tabs</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;joe-tabs&gt;</span><br><span class="line">  &lt;div class=&quot;_tpl&quot;&gt;</span><br><span class="line">    &#123;tabs-pane 第一个&#125;单身狗的故事&#123;/tabs-pane&#125;</span><br><span class="line">    &#123;tabs-pane 第二个&#125;小说家的故事&#123;/tabs-pane&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/joe-tabs&gt;</span><br></pre></td></tr></table></figure>
<joe-tabs>
  <div class="_tpl">
    {tabs-pane 第一个}单身狗的故事{/tabs-pane}
    {tabs-pane 第二个}小说家的故事{/tabs-pane}
  </div>
</joe-tabs>

<h3 id="时间线"><a href="#时间线" class="headerlink" title="时间线"></a>时间线</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;joe-timeline&gt;</span><br><span class="line"> &lt;div class=&quot;_tpl&quot;&gt;</span><br><span class="line">   &#123;timeline-item 2020&#125;10元&#123;/timeline-item&#125;</span><br><span class="line">   &#123;timeline-item 2021&#125;20元&#123;/timeline-item&#125;</span><br><span class="line">   &#123;timeline-item 2022&#125;100元&#123;/timeline-item&#125;</span><br><span class="line"> &lt;/div&gt;</span><br><span class="line">&lt;/joe-timeline&gt;</span><br></pre></td></tr></table></figure>
<joe-timeline>
 <div class="_tpl">
   {timeline-item 2020}10元{/timeline-item}
   {timeline-item 2021}20元{/timeline-item}
   {timeline-item 2022}100元{/timeline-item}
 </div>
</joe-timeline>

<h3 id="评论后可见"><a href="#评论后可见" class="headerlink" title="评论后可见"></a>评论后可见</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;joe-hide&gt;&lt;/joe-hide&gt;</span><br></pre></td></tr></table></figure>
<h2 id="提示元素"><a href="#提示元素" class="headerlink" title="提示元素"></a>提示元素</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;joe-message type=&quot;success&quot; content=&quot;成功消息&quot;&gt;&lt;/joe-message&gt;</span><br><span class="line">&lt;joe-message type=&quot;info&quot; content=&quot;普通消息&quot;&gt;&lt;/joe-message&gt;</span><br><span class="line">&lt;joe-message type=&quot;warning&quot; content=&quot;警告消息&quot;&gt;&lt;/joe-message&gt;</span><br><span class="line">&lt;joe-message type=&quot;error&quot; content=&quot;错误消息&quot;&gt;&lt;/joe-message&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><joe-message type="success" content="成功消息"></joe-message><br><joe-message type="info" content="普通消息"></joe-message><br><joe-message type="warning" content="警告消息"></joe-message><br><joe-message type="error" content="错误消息"></joe-message></p>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><p>1.如何自定义导航条菜单图标？</p>
<blockquote>
<p>主题自身已经引入了部分 iconfont 图标，你可以直接用（全在这里），如果想在这个基础上增加图标，可联系我加入该项目的图标组，加入后即可获取最新的字体链接进行替换（template&#x2F;module&#x2F;link.ftl 中第 25 行）。iconfont 使用方式如下：<br>（目前主题菜单只支持字体图标，若要用图片请自行修改代码）</p>
</blockquote>
<p>2.如何设置文章仅评论后可见？</p>
<blockquote>
<p>主题目前支持文章页的 评论后可见功能，只要在后台管理中发布文章时设置-元数据 enable_read_limit 为 true 即可。设置之后&gt;文章页默认只展示一屏高度的内容，剩余内容需要评论后才可见（如果文章内容小于一屏高度，则此功能会被忽略）。</p>
</blockquote>
<p>3.怎样开启防盗链</p>
<p>很简单，直接在 nginx 里配一下就可以，不过记得添加白名单（如 logo 和 avatar），配置如下：</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 资源防盗链（指定目录or指定文件类型）</span></span><br><span class="line"><span class="comment"># location ~ .*\.(gif|jpg|jpeg|png|bmp|swf)$ &#123;</span></span><br><span class="line"><span class="section">location</span> /upload/ &#123;</span><br><span class="line">  <span class="attribute">access_log</span> <span class="literal">off</span>;</span><br><span class="line">  <span class="comment"># 域名白名单，去掉则阻止所有非本站请求</span></span><br><span class="line">  <span class="attribute">valid_referers</span> <span class="literal">none</span> <span class="literal">blocked</span> server_names <span class="regexp">*.bbchin.com</span> <span class="number">127.0.0.1</span> localhost ~\.google\. ~\.baidu\. ~\.qq\.;</span><br><span class="line">  <span class="attribute">if</span> (<span class="variable">$invalid_referer</span>) &#123;</span><br><span class="line">    <span class="attribute">rewrite</span><span class="regexp"> ^/</span> https://cdn.jsdelivr.net/gh/qinhua/cdn_assets/img/robber.jpg;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="attribute">proxy_pass</span> http://127.0.0.1:8090;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4.怎样配置合适的缓存策略</p>
<p>合理利用浏览器的缓存同样可以优化页面性能，提高加载速度，我们可以通过 Nginx 对相关资源的响应头进行配置，大致如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">    gzip_static on; # 静态压缩</span><br><span class="line">    add_header Cache-Control public,max-age=60,s-maxage=60; # 配置缓存</span><br><span class="line">    proxy_set_header HOST $host;</span><br><span class="line">    proxy_set_header X-Forwarded-Proto $scheme;</span><br><span class="line">    proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">    proxy_pass http://127.0.0.1:8090;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="主题修改"><a href="#主题修改" class="headerlink" title="主题修改"></a>主题修改</h2><p>修改首页文章数、分类数、标签数顺序：<br>自行修改 template&#x2F;module&#x2F;blogger.ftl 文件</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"> &lt;#if settings.overview_type == &#x27;A&#x27;&gt;</span><br><span class="line">&lt;@postTag method=&quot;count&quot;&gt;</span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">title</span>=<span class="string">&quot;累计文章数 $&#123;count!&#x27;0&#x27;&#125;&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;num&quot;</span>&gt;</span>$&#123;count!&#x27;0&#x27;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">span</span>&gt;</span>文章数<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   &lt;/@postTag&gt;</span><br><span class="line">   &lt;@categoryTag method=&quot;count&quot;&gt;</span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">title</span>=<span class="string">&quot;累计分类数 $&#123;count!&#x27;0&#x27;&#125;&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;num&quot;</span>&gt;</span>$&#123;count!&#x27;0&#x27;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">span</span>&gt;</span>分类数<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   &lt;/@categoryTag&gt;</span><br><span class="line">   &lt;@tagTag method=&quot;count&quot;&gt;</span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">title</span>=<span class="string">&quot;累计标签数 $&#123;count!&#x27;0&#x27;&#125;&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;num&quot;</span>&gt;</span>$&#123;count!&#x27;0&#x27;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">span</span>&gt;</span>标签数<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   &lt;/@tagTag&gt;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>halo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo-NexT (v7.7.2) 主题配置</title>
    <url>/archives/35679e29/</url>
    <content><![CDATA[<div class="note info"><p>2020.8.1 Hexo 5.0后要将主题配置文件复制到站点根目录，然后重命名为 _config.next.yml</p></div>

<h2 id="获取-NexT"><a href="#获取-NexT" class="headerlink" title="获取 NexT"></a>获取 NexT</h2><h3 id="下载最新-release-版本"><a href="#下载最新-release-版本" class="headerlink" title="下载最新 release 版本"></a>下载<a href="https://github.com/theme-next/hexo-theme-next/releases/latest">最新 release 版本</a></h3><p>通常情况下请选择 stable 版本。推荐不熟悉的用户按此方式进行。</p>
<p>这种方式将仅提供最新的 release 版本（其中不附带 <code>.git</code> 目录）。因此，你无法通过 git 更新这一方式安装的主题。</p>
<blockquote>
<p><strong>更新：推荐使用独立的配置文件（数据文件）而不在主题源代码进行更改，便于后续的更新（下载最新版本，替换掉旧版本）</strong>。</p>
<h2 id="站点配置"><a href="#站点配置" class="headerlink" title="站点配置"></a>站点配置</h2></blockquote>
<h3 id="设置-hexo-的-next-主题"><a href="#设置-hexo-的-next-主题" class="headerlink" title="设置 hexo 的 next 主题"></a>设置 hexo 的 next 主题</h3><p>我们在站点的配置文件<code>_config.yml</code>中找到 theme 后修改：<br><code>theme: next  # 配置成刚下载的next主题</code></p>
<h3 id="配置-hexo-网站相关信息"><a href="#配置-hexo-网站相关信息" class="headerlink" title="配置 hexo 网站相关信息"></a>配置 hexo 网站相关信息</h3><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span>          <span class="comment"># 网站标题</span></span><br><span class="line"><span class="attr">subtitle:</span>       <span class="comment"># 网站副标题</span></span><br><span class="line"><span class="attr">description:</span>    <span class="comment"># 描述，介绍网站的</span></span><br><span class="line"><span class="attr">keywords:</span>       <span class="comment"># 网站的关键字</span></span><br><span class="line"><span class="attr">author:</span>         <span class="comment"># 博主姓名</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-CN</span> <span class="comment"># 语言：zh-CN 是简体中文</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">&#x27;&#x27;</span>    <span class="comment">#时区，默认不填就好，如果要填，填Asia/Shanghai</span></span><br></pre></td></tr></table></figure>
<h3 id="设置-hexo-永久链接"><a href="#设置-hexo-永久链接" class="headerlink" title="设置 hexo 永久链接"></a>设置 hexo 永久链接</h3><p>本着简单原则，在站点配置文<code>_config.yml</code>件里将固定链接改成：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">url:</span> <span class="string">https://bore.vip</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">archives/:title/</span></span><br></pre></td></tr></table></figure>

<h3 id="nofollow-标签的使用"><a href="#nofollow-标签的使用" class="headerlink" title="nofollow 标签的使用"></a>nofollow 标签的使用</h3><p>减少出站链接能够有效防止权重分散，hexo 有很方便的自动为出站链接添加 <code>nofollow</code> 标签的插件。<br>首先安装 <code>hexo-filter-nofollow</code> 插件：<br><code>npm install hexo-filter-nofollow --save</code><br>然后我们在站点的配置文件<code>_config.yml</code> 中添加配置，将 <code>nofollow</code> 设置为 <code>true</code>：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 外部链接优化</span></span><br><span class="line"><span class="attr">nofollow:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">site</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;exclude1.com&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;exclude2.com&#x27;</span></span><br></pre></td></tr></table></figure>
<p>其中 <code>exclude</code>（例外的链接，比如友链）将不会被加上 <code>nofollow</code> 属性。</p>
<h3 id="站点地图-sitemap-生成"><a href="#站点地图-sitemap-生成" class="headerlink" title="站点地图 sitemap 生成"></a>站点地图 sitemap 生成</h3><p><code>npm install hexo-generator-sitemap --save</code><br>然后我们需要在 Hexo 站点配置文件中加入 sitemap 插件：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 通用站点地图</span></span><br><span class="line"><span class="attr">sitemap:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">sitemap.xml</span></span><br></pre></td></tr></table></figure>
<h3 id="修改网站的图标-Favicon"><a href="#修改网站的图标-Favicon" class="headerlink" title="修改网站的图标 Favicon"></a>修改网站的图标 Favicon</h3><p>把图标放在 &#x2F;themes&#x2F;next&#x2F;source&#x2F;images 里，并且修改 主题配置文件（next.yml）：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">favicon:</span></span><br><span class="line">  <span class="attr">small:</span> <span class="string">/images/favicon-16x16-next.png</span></span><br><span class="line">  <span class="attr">medium:</span> <span class="string">/images/favicon-32x32-next.png</span></span><br><span class="line">  <span class="attr">apple_touch_icon:</span> <span class="string">/images/favicon-32x32-next.png</span></span><br><span class="line">  <span class="attr">safari_pinned_tab:</span> <span class="string">/images/favicon-32x32-next.png</span></span><br><span class="line">  <span class="comment">#android_manifest: /images/manifest.json</span></span><br><span class="line">  <span class="comment">#ms_browserconfig: /images/browserconfig.xml</span></span><br></pre></td></tr></table></figure>

<h2 id="主题配置"><a href="#主题配置" class="headerlink" title="主题配置"></a>主题配置</h2><h3 id="准备工作，配置文件分离"><a href="#准备工作，配置文件分离" class="headerlink" title="准备工作，配置文件分离"></a>准备工作，配置文件分离</h3><p>Next主题在7.3之后分离了配置文件与主题，详情请见<a href="https://tding.top/archives/2bd6d82.html">小丁的个人博客</a></p>
<ul>
<li><p>新建文件夹<code>hexo/source/_data</code></p>
</li>
<li><p>将<code>./themes/next/_config.yml</code>复制到<code>hexo/source/_data</code>路径下并重命名为<code>next.yml</code></p>
</li>
<li><p>将<code>next.yml</code>中的<code>override</code>设置为<code>true</code>即可作为主题的配置文件使用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">override: true</span><br></pre></td></tr></table></figure>
</li>
<li><p>在<code>hexo/source/_data</code>中新建<code>body-end.swig</code>和<code>styles.styl</code>文件</p>
</li>
<li><p>然后在<code>next.yml</code>的<code>custom_file_path</code>中删除前面的<code>#</code>来启用<code>bodyEnd</code>和<code>style</code></p>
</li>
<li><p><code>custom_file_path</code>中的其他选项根据需要创建相关文件并启用</p>
</li>
</ul>
<h3 id="指定next-Gemini模板"><a href="#指定next-Gemini模板" class="headerlink" title="指定next-Gemini模板"></a>指定next-Gemini模板</h3><p>主题配置文件（next.yml），关键字：<code>Schemes</code>,修改</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#scheme: Muse</span></span><br><span class="line"><span class="comment">#scheme: Mist</span></span><br><span class="line"><span class="comment">#scheme: Pisces  #打开前面的注释</span></span><br><span class="line"><span class="attr">scheme:</span> <span class="string">Gemini</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Muse</strong> - 默认 Scheme，这是 NexT 最初的版本，黑白主调，大量留白</li>
<li><strong>Mist</strong> - Muse 的紧凑版本，整洁有序的单栏外观</li>
<li><strong>Pisces</strong> - 双栏 Scheme，小家碧玉似的清新</li>
<li><strong>Gemini</strong> - 左侧网站信息及目录，块+片段结构布局</li>
</ul>
<h3 id="配置-hexo-中的-about、tag、categories、sitemap-菜单"><a href="#配置-hexo-中的-about、tag、categories、sitemap-菜单" class="headerlink" title="配置 hexo 中的 about、tag、categories、sitemap 菜单"></a>配置 hexo 中的 about、tag、categories、sitemap 菜单</h3><p>默认的主题配置文件<code>_config.yml</code>（next.yml） 中，菜单只开启了首页和归档，我们根据需要，可以添加 about、tag、categories、sitemap 等菜单，所以把它们也取消注释。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 菜单设置为 菜单名: /菜单目录 || 菜单图标名字</span></span><br><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">home:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">home</span></span><br><span class="line">  <span class="attr">about:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">user</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">tags</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">th</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">archive</span></span><br><span class="line">  <span class="comment">#schedule: /schedule/ || calendar</span></span><br><span class="line">  <span class="attr">sitemap:</span> <span class="string">/sitemap.xml</span> <span class="string">||</span> <span class="string">sitemap</span></span><br><span class="line">  <span class="attr">commonweal:</span> <span class="string">/404/</span> <span class="string">||</span> <span class="string">heartbeat</span></span><br><span class="line"></span><br><span class="line"><span class="attr">menu_settings:</span></span><br><span class="line">  <span class="attr">icons:</span> <span class="literal">true</span>   <span class="comment"># 显示图标</span></span><br><span class="line">  <span class="attr">badges:</span> <span class="literal">true</span>  <span class="comment"># 显示统计信息</span></span><br></pre></td></tr></table></figure>
<p>注：hexo 所有图标均来自 fontawesome，其中 <code>||</code> 后面是你想要设置的图标的名字。<br>菜单项的中文文本翻译见<a href="http://bore.vip/archives/39662a01.html#%E8%8F%9C%E5%8D%95%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91">菜单中文翻译</a></p>
<h3 id="手动生成-hexo-菜单对应文件"><a href="#手动生成-hexo-菜单对应文件" class="headerlink" title="手动生成 hexo 菜单对应文件"></a>手动生成 hexo 菜单对应文件</h3><h4 id="新建-about-页面"><a href="#新建-about-页面" class="headerlink" title="新建 about 页面"></a>新建 about 页面</h4><p>我们可以在博客根目录下输入以下命令新建页面：<br><code>hexo new page about</code><br>然后你会发现多了一个 hexo&#x2F;source&#x2F;about 文件夹，里面有一个 index.md 文件，你可以根据自己的需要在这个 Markdown 文件中写一些内容（同文章一样，用 Markdown 语法）。</p>
<h4 id="新建一个-tags-页面"><a href="#新建一个-tags-页面" class="headerlink" title="新建一个 tags 页面"></a>新建一个 tags 页面</h4><p>同样的，我们可以新建 <code>tags</code> 页面：<br><code>hexo new page tags</code><br>在 <code>tags</code> 页面文件 <code>hexo/source/tags/index.md</code> 的头部修改为：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">标签</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2020-04-26 00:13:30</span>   <span class="comment"># 时间随意</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">&quot;tags&quot;</span>                <span class="comment"># 类型一定要为tags</span></span><br><span class="line"><span class="attr">comments:</span> <span class="literal">false</span>             <span class="comment"># 提示这个页面不需要加载评论</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure>
<h4 id="新建一个-categories-页面"><a href="#新建一个-categories-页面" class="headerlink" title="新建一个 categories 页面"></a>新建一个 categories 页面</h4><p>同样的，我们可以新建 categories 页面：<br><code>hexo new page categories</code><br>在 categories 页面文件 hexo&#x2F;source&#x2F;categories&#x2F;index.md 的头部修改为：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">文章分类</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2020-04-26 00:15:00</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">&quot;categories&quot;</span></span><br><span class="line"><span class="attr">comments:</span> <span class="literal">false</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure>
<h4 id="新建一个-404-页面"><a href="#新建一个-404-页面" class="headerlink" title="新建一个 404 页面"></a>新建一个 404 页面</h4><p>这里我们将 404 替换成腾讯的公益页面。<br>首先我们在 <code>hexo/source</code> 目录下创建自己的 <code>404.html</code>：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>404<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;//qzonestyle.gtimg.cn/qzone/hybrid/app/404/search_children.js&quot;</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> <span class="attr">homePageUrl</span>=<span class="string">&quot;/&quot;</span> <span class="attr">homePageName</span>=<span class="string">&quot;返回&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>注意：Hexo 博客的基本内容是一些 Markdown 文件，放在 source&#x2F;_post 文件夹下，每个文件对应一篇文章。除此之外，放在 source 文件夹下的所有开头不是下划线的文件，在 hexo generate 的时候，都会被拷贝到 public 文件夹下。但是，Hexo 默认会渲染所有的 HTML 和 Markdown 文件。</p>
<p>因此我们可以简单地在文件开头加上 layout: false 一行来避免渲染：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">layout: false</span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>404<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;//qzonestyle.gtimg.cn/qzone/hybrid/app/404/search_children.js&quot;</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> <span class="attr">homePageUrl</span>=<span class="string">&quot;/&quot;</span> <span class="attr">homePageName</span>=<span class="string">&quot;返回&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这样我们就完成了 404 页面的创建。注意：本地测试不出来，发布出来就### 配置 hexo 本地搜索可以了。</p>
<h3 id="配置-hexo-本地搜索"><a href="#配置-hexo-本地搜索" class="headerlink" title="配置 hexo 本地搜索"></a>配置 hexo 本地搜索</h3><h4 id="本地搜索的原理"><a href="#本地搜索的原理" class="headerlink" title="本地搜索的原理"></a>本地搜索的原理</h4><p>对于动态网站来说，可以通过 php 实现。但是，Hexo 博客是静态网站，用不了 php。<br>NexT 主题已经实现这个功能，它用了 Hexo 的拓展包 hexo-generator-searchdb，预先生成了一个文本库 search.xml，然后传到了网站里面。在本地搜索的时候，NexT 直接用 javascript 调用了这个文件，从而实现了静态网站的本地搜索。</p>
<h4 id="设置过程"><a href="#设置过程" class="headerlink" title="设置过程"></a>设置过程</h4><p>安装插件:<br><code>npm install hexo-generator-searchdb --save</code><br>然后我们修改站点配置_config.yml 文件，添加如下内容：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 本地搜索</span></span><br><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">all</span></span><br><span class="line">  <span class="attr">format:</span> <span class="string">html</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">100</span></span><br></pre></td></tr></table></figure>
<p>path：索引文件的路径，相对于站点根目录<br>field：搜索范围，默认是 post，还可以选择 page、all，设置成 all 表示搜索所有页面<br>limit：限制搜索的条目数<br>然后修改主题配置文件<code>_config.yml</code>（next.yml）：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Local Search</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/theme-next/hexo-generator-searchdb</span></span><br><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># If auto, trigger search by changing input.</span></span><br><span class="line">  <span class="comment"># If manual, trigger search by pressing enter key or search button.</span></span><br><span class="line">  <span class="attr">trigger:</span> <span class="string">auto</span></span><br><span class="line">  <span class="comment"># Show top n results per article, show all results by setting to -1</span></span><br><span class="line">  <span class="attr">top_n_per_article:</span> <span class="number">1</span></span><br><span class="line">  <span class="comment"># Unescape html strings to the readable one.</span></span><br><span class="line">  <span class="attr">unescape:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Preload the search data when the page loads.</span></span><br><span class="line">  <span class="attr">preload:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<h3 id="utterances评论系统-amp-amp-valine-评论"><a href="#utterances评论系统-amp-amp-valine-评论" class="headerlink" title="utterances评论系统&amp;&amp;valine 评论"></a>utterances评论系统&amp;&amp;valine 评论</h3><div class="note danger">如果使用utterances评论系统，一定要先关闭Pjax插件，否则utterances评论无法登陆</div>

<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">pjax:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h4 id="utterances评论系统"><a href="#utterances评论系统" class="headerlink" title="utterances评论系统"></a>utterances评论系统</h4><div class="note primary">注意NexT 8.1.0起没有用valine</div>

<p>具体见：<a href="https://github.com/next-theme/hexo-theme-next/commit/a4a1cdcf2002276783406093a1653b021bdd043e">Hide options of Valine</a></p>
<h5 id="创建-Github-仓库"><a href="#创建-Github-仓库" class="headerlink" title="创建 Github 仓库"></a>创建 Github 仓库</h5><p>utterance 使用 Github 保存评论，那我们就需要创建一个 <code>repository</code> 专门保存评论。你也可以将评论放在发布网页的仓库，注意要是公共仓库。</p>
<h5 id="授权"><a href="#授权" class="headerlink" title="授权"></a>授权</h5><p> 用户在博客页面上输入评论，utterance 拿到这个评论后，自动的提交到上面刚创建仓库的 Issues 里。</p>
<p>所以我们需要授权 utterance 应用能访问仓库的 Issues。</p>
<p>点击链接： <a href="https://github.com/apps/utterances">https://github.com/apps/utterances</a> ，点击选择<code>Only select repositories</code>，选中相应的仓库。</p>
<h5 id="主题配置-1"><a href="#主题配置-1" class="headerlink" title="主题配置"></a>主题配置</h5><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">utterances:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">iwyang/comments</span></span><br><span class="line">  <span class="comment"># Available values: pathname | url | title | og:title</span></span><br><span class="line">  <span class="attr">issue_term:</span> <span class="string">title</span></span><br><span class="line">  <span class="comment"># Available values: github-light | github-dark | preferred-color-scheme | github-dark-orange | icy-dark | dark-blue | photon-dark | boxy-light</span></span><br><span class="line">  <span class="attr">theme:</span> <span class="string">github-light</span></span><br></pre></td></tr></table></figure>

<p>解释一下主要参数：</p>
<ul>
<li>repo：存放评论的issues的仓库名</li>
<li>issue-term：指定issues的标题，<code>title</code>表示使用文章的标题作为issues的标题，推荐使用这个。（pathname：网址域名之外的文件名；url：博客网址，网址全路径；title：博客标题）</li>
</ul>
<h5 id="回复评论方法"><a href="#回复评论方法" class="headerlink" title="回复评论方法"></a>回复评论方法</h5><p>使用markdown语法引用，或者进issues里评论，或者直接在评论区<code>@用户名</code>然后再加上评论。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">&gt;</span>  <span class="string">这里引用别人的评论</span></span><br><span class="line"></span><br><span class="line"><span class="string">这里是你要回复的评论，中间要空一行</span></span><br></pre></td></tr></table></figure>

<h4 id="valine评论"><a href="#valine评论" class="headerlink" title="valine评论"></a>valine评论</h4><h5 id="获取-APP-id-和-APP-key"><a href="#获取-APP-id-和-APP-key" class="headerlink" title="获取 APP id 和 APP key"></a>获取 APP id 和 APP key</h5><p>注意右上角选择<strong>国际版</strong>。</p>
<ul>
<li>你可以点击 LeanCloud ，注册登录，进入控制台后点击创建应用。</li>
<li>进入刚刚创建的应用，选择设置 》应用Keys，就能看到你的 APP ID 和 APP Key</li>
</ul>
<h5 id="修改主题配置文件"><a href="#修改主题配置文件" class="headerlink" title="修改主题配置文件"></a>修改主题配置文件</h5><p>注意<code>guest_info</code>这一栏，删除link，评论框就没有网址选项。</p>
 <figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"> <span class="comment"># Valine</span></span><br><span class="line"><span class="comment"># You can get your appid and appkey from https://leancloud.cn</span></span><br><span class="line"><span class="comment"># For more information: https://valine.js.org, https://github.com/xCss/Valine</span></span><br><span class="line"><span class="comment"># 配置项详情请查阅官方文档。</span></span><br><span class="line"><span class="attr">valine:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 开启评论功能</span></span><br><span class="line">  <span class="attr">appid:</span>  <span class="comment"># 填入刚刚获取的APP ID</span></span><br><span class="line">  <span class="attr">appkey:</span> <span class="comment"># 填入刚刚获取的APP key</span></span><br><span class="line">  <span class="attr">notify:</span> <span class="literal">false</span> <span class="comment"># 邮件通知默认关闭</span></span><br><span class="line">  <span class="attr">verify:</span> <span class="literal">false</span> <span class="comment"># 验证码默认关闭</span></span><br><span class="line">  <span class="attr">placeholder:</span> <span class="string">在这里写下你的评论吧！</span> <span class="comment"># 评论框默认文字</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">mm</span> <span class="comment"># 头像风格</span></span><br><span class="line">  <span class="attr">guest_info:</span> <span class="string">nick,mail</span> <span class="comment">#,link # Custom comment header</span></span><br><span class="line">  <span class="attr">pageSize:</span> <span class="number">10</span> <span class="comment"># Pagination size</span></span><br><span class="line">  <span class="attr">language:</span> <span class="comment"># Language, available values: en, zh-cn</span></span><br><span class="line">  <span class="attr">visitor:</span> <span class="literal">false</span> <span class="comment"># leancloud-counter-security is not supported for now. When visitor is set to be true, appid and appkey are recommended to be the same as leancloud_visitors&#x27; for counter compatibility. Article reading statistic https://valine.js.org/visitor.html</span></span><br><span class="line">  <span class="attr">comment_count:</span> <span class="literal">false</span> <span class="comment"># If false, comment count will only be displayed in post page, not in home page</span></span><br><span class="line">  <span class="attr">recordIP:</span> <span class="literal">false</span> <span class="comment"># 是否记录IP</span></span><br><span class="line">  <span class="attr">serverURLs:</span> <span class="comment"># When the custom domain name is enabled, fill it in here (it will be detected automatically by default, no need to fill in)</span></span><br><span class="line">  <span class="comment">#post_meta_order: 0</span></span><br></pre></td></tr></table></figure>
<h5 id="valine评论标题改中文中文"><a href="#valine评论标题改中文中文" class="headerlink" title="valine评论标题改中文中文"></a>valine评论标题改中文中文</h5><p>打开<code>themes -&gt; next -&gt; languages -&gt; zh-CN.yml</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 在post标签下添加如下代码</span><br><span class="line">comments:</span><br><span class="line">    valine: 评论数 # 这里的中文随便自己定义</span><br></pre></td></tr></table></figure>

<h3 id="设置-hexo-中的-rss-订阅"><a href="#设置-hexo-中的-rss-订阅" class="headerlink" title="设置 hexo 中的 rss 订阅"></a>设置 hexo 中的 rss 订阅</h3><p>  没有用，不推荐</p>
<h3 id="配置-hexo-主题next-yml的-footer-信息"><a href="#配置-hexo-主题next-yml的-footer-信息" class="headerlink" title="配置 hexo 主题next.yml的 footer 信息"></a>配置 hexo 主题next.yml的 footer 信息</h3><p>底部 <code>footer</code> 可以开关显示 hexo 信息、theme 信息、建站时间等个性化配置：  </p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="attr">since:</span> <span class="number">2020</span>        <span class="comment"># 建站开始时间</span></span><br><span class="line">  <span class="attr">icon:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">user</span>       <span class="comment"># 设置 建站初始时间和至今时间中间的图标，默认是一个&#x27;小人像&#x27;，更改user为heart可以变成一个心</span></span><br><span class="line">    <span class="attr">animated:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">color:</span> <span class="string">&quot;#808080&quot;</span> <span class="comment"># 更改图标的颜色，红色为&#x27;#ff0000&#x27;</span></span><br><span class="line">  <span class="attr">powered:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span>     <span class="comment"># 开启hexo驱动</span></span><br><span class="line">    <span class="attr">version:</span> <span class="literal">true</span>    <span class="comment"># 开启hexo版本号</span></span><br><span class="line">  <span class="attr">theme:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span>     <span class="comment"># 开启主题驱动</span></span><br><span class="line">    <span class="attr">version:</span> <span class="literal">true</span>    <span class="comment"># 开启主题版本号</span></span><br><span class="line">  <span class="attr">custom_text:</span> <span class="string">Hosted</span> <span class="string">by</span> <span class="string">&lt;a</span> <span class="string">target=&quot;_blank&quot;</span> <span class="string">rel=&quot;external</span> <span class="string">nofollow&quot;</span> <span class="string">href=&quot;https://pages.coding.me&quot;&gt;&lt;b&gt;Coding</span> <span class="string">Pages&lt;/b&gt;&lt;/a&gt;</span> <span class="comment"># 这里的底部标识是为了添加coding page服务时的版权声明 打开注释就可以看到底部有一个 hosted by coding pages</span></span><br></pre></td></tr></table></figure>
<h3 id="头像信息设置-next-yml"><a href="#头像信息设置-next-yml" class="headerlink" title="头像信息设置 next.yml"></a>头像信息设置 next.yml</h3><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">avatar:</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">/images/avatar.jpg</span>  <span class="comment"># 设置头像资源的位置</span></span><br><span class="line">  <span class="attr">rounded:</span> <span class="literal">true</span>            <span class="comment"># 开启圆形头像</span></span><br><span class="line">  <span class="attr">opacity:</span> <span class="number">1</span>               <span class="comment"># 不透明的比例：0就是完全透明</span></span><br><span class="line">  <span class="attr">rotated:</span> <span class="literal">false</span>           <span class="comment"># 不开启旋转</span></span><br></pre></td></tr></table></figure>
<h3 id="社交信息和友链配置"><a href="#社交信息和友链配置" class="headerlink" title="社交信息和友链配置"></a>社交信息和友链配置</h3><p>这里和菜单设置格式一样，社交名字: 社交url || 社交图标，图标信息来自 <a href="https://fontawesome.com/v4.7.0/icons">fontawesome</a>：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">social:</span> </span><br><span class="line">  <span class="attr">GitHub:</span> <span class="string">https://github.com/yourname</span> <span class="string">||</span> <span class="string">github</span></span><br><span class="line">  <span class="attr">E-Mail:</span> <span class="string">mailto:yourname@gmail.com</span> <span class="string">||</span> <span class="string">envelope</span></span><br><span class="line">  <span class="attr">Google:</span> <span class="string">https://plus.google.com/yourname</span> <span class="string">||</span> <span class="string">google</span></span><br><span class="line"></span><br><span class="line"><span class="attr">social_icons:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span>      <span class="comment"># 显示社交图标</span></span><br><span class="line">  <span class="attr">icons_only:</span> <span class="literal">false</span> <span class="comment"># 只显示图标，不显示文字</span></span><br></pre></td></tr></table></figure>
<p>友链配置：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Blog rolls</span></span><br><span class="line"><span class="attr">links_icon:</span> <span class="string">link</span>          <span class="comment"># 友链的图标 参考上文</span></span><br><span class="line"><span class="attr">links_title:</span> <span class="string">Links</span>        <span class="comment"># 友链的title  比如你可以更改为 友情链接</span></span><br><span class="line"><span class="attr">links_layout:</span> <span class="string">block</span>       <span class="comment"># 友链摆放的样式：按块（一行一个）</span></span><br><span class="line"><span class="comment">#links_layout: inline     # 友链摆放的样式：按线摆放（一行很多个），注意，同时只能一种样式</span></span><br><span class="line"><span class="attr">links:</span></span><br><span class="line">  <span class="attr">Title:</span> <span class="string">http://example.com/</span>  <span class="comment"># 友链的地址</span></span><br></pre></td></tr></table></figure>
<p>官方提供的友链放在侧边栏下面，视觉上比较臃肿。这里我新建了一个友链页面：友情链接，设置教程见：Hexo-NexT 新增友链。</p>
<h3 id="首页文章不展示全文显示摘要"><a href="#首页文章不展示全文显示摘要" class="headerlink" title="首页文章不展示全文显示摘要"></a>首页文章不展示全文显示摘要</h3><blockquote>
<p>官方公告：<code>auto_excerpt</code> 可以自动截断文章内容作为摘要。此功能不是一个 Hexo 主题应当负责的，这为主题的维护者带来了太大压力。自 7.6.0 版本开始，此功能被移除，请自行安装第三方插件，或阅读 Hexo 有关文档。当然，我们仍然建议通过 &#96;&#96; 来精确控制 Read More 的位置。</p>
</blockquote>
<p><strong>因此，这个功能在新版的 NexT 已经被废弃了，大家可以直接在文章中添加 <span id="more"></span> 来精确控制摘要内容</strong>。</p>
<h3 id="首页文章属性next-yml"><a href="#首页文章属性next-yml" class="headerlink" title="首页文章属性next.yml"></a>首页文章属性next.yml</h3><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">post_meta:</span></span><br><span class="line">  <span class="attr">item_text:</span> <span class="literal">true</span>    <span class="comment"># 设为true 可以一行显示，文章的所有属性</span></span><br><span class="line">  <span class="attr">created_at:</span> <span class="literal">true</span>    <span class="comment"># 显示创建时间</span></span><br><span class="line">  <span class="attr">updated_at:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span>     <span class="comment"># 显示修改的时间</span></span><br><span class="line">    <span class="attr">another_day:</span> <span class="literal">true</span> <span class="comment"># 设true时，如果创建时间和修改时间一样则显示一个时间</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="literal">true</span>    <span class="comment"># 显示分类信息</span></span><br></pre></td></tr></table></figure>
<h3 id="页面阅读统计-不蒜子统计"><a href="#页面阅读统计-不蒜子统计" class="headerlink" title="页面阅读统计 不蒜子统计"></a>页面阅读统计 不蒜子统计</h3><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">busuanzi_count:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span>              <span class="comment"># 设true 开启</span></span><br><span class="line">  <span class="attr">total_visitors:</span> <span class="literal">true</span>       <span class="comment"># 总阅读人数（uv数）</span></span><br><span class="line">  <span class="attr">total_visitors_icon:</span> <span class="string">user</span>  <span class="comment"># 阅读总人数的图标</span></span><br><span class="line">  <span class="attr">total_views:</span> <span class="literal">true</span>          <span class="comment"># 总阅读次数（pv数）</span></span><br><span class="line">  <span class="attr">total_views_icon:</span> <span class="string">eye</span>      <span class="comment"># 阅读总次数的图标</span></span><br><span class="line">  <span class="attr">post_views:</span> <span class="literal">true</span>           <span class="comment"># 开启内容阅读次数</span></span><br><span class="line">  <span class="attr">post_views_icon:</span> <span class="string">eye</span>       <span class="comment"># 内容页阅读数的图标</span></span><br></pre></td></tr></table></figure>
<h3 id="字数统计、阅读时长"><a href="#字数统计、阅读时长" class="headerlink" title="字数统计、阅读时长"></a>字数统计、阅读时长</h3><p>首先安装插件：<br><code>npm install hexo-symbols-count-time --save</code><br>主题配置文件_config.yml（next.yml） 修改如下：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">symbols_count_time:</span></span><br><span class="line">  <span class="attr">separated_meta:</span> <span class="literal">true</span>  <span class="comment"># false会显示一行</span></span><br><span class="line">  <span class="attr">item_text_post:</span> <span class="literal">true</span>  <span class="comment"># 显示属性名称,设为false后只显示图标和统计数字,不显示属性的文字</span></span><br><span class="line">  <span class="attr">item_text_total:</span> <span class="literal">true</span> <span class="comment"># 底部footer是否显示字数统计属性文字</span></span><br><span class="line">  <span class="attr">awl:</span> <span class="number">4</span>                <span class="comment"># 计算字数的一个设置,没设置过</span></span><br><span class="line">  <span class="attr">wpm:</span> <span class="number">275</span>              <span class="comment"># 一分钟阅读的字数</span></span><br></pre></td></tr></table></figure>
<p>站点配置文件_config.yml 新增如下：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">symbols_count_time:</span></span><br><span class="line"> <span class="comment">#文章内是否显示</span></span><br><span class="line">  <span class="attr">symbols:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">time:</span> <span class="literal">true</span></span><br><span class="line"> <span class="comment"># 网页底部是否显示</span></span><br><span class="line">  <span class="attr">total_symbols:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_time:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h3 id="内容页里的代码块新增复制按钮"><a href="#内容页里的代码块新增复制按钮" class="headerlink" title="内容页里的代码块新增复制按钮"></a>内容页里的代码块新增复制按钮</h3><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">codeblock:</span></span><br><span class="line">  <span class="attr">copy_button:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span>      <span class="comment"># 增加复制按钮的开关</span></span><br><span class="line">    <span class="attr">show_result:</span> <span class="literal">true</span> <span class="comment"># 点击复制完后是否显示 复制成功 结果提示</span></span><br></pre></td></tr></table></figure>
<h3 id="Mac风格代码块样式"><a href="#Mac风格代码块样式" class="headerlink" title="Mac风格代码块样式"></a>Mac风格代码块样式</h3><p>hexo\source_data\next.yml里修改：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">codeblock:</span></span><br><span class="line">  <span class="comment"># Code Highlight theme</span></span><br><span class="line">  <span class="comment"># See: https://github.com/highlightjs/highlight.js/tree/master/src/styles</span></span><br><span class="line">  <span class="attr">theme:</span></span><br><span class="line">    <span class="attr">light:</span> <span class="string">agate</span></span><br><span class="line">    <span class="attr">dark:</span> <span class="string">dark</span></span><br><span class="line">  <span class="comment"># See: https://github.com/PrismJS/prism/tree/master/themes</span></span><br><span class="line">  <span class="attr">prism:</span></span><br><span class="line">    <span class="attr">light:</span> <span class="string">prism</span></span><br><span class="line">    <span class="attr">dark:</span> <span class="string">prism-dark</span></span><br><span class="line">  <span class="comment"># Add copy button on codeblock</span></span><br><span class="line">  <span class="attr">copy_button:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Available values: default | flat | mac</span></span><br><span class="line">    <span class="attr">style:</span> <span class="string">mac</span></span><br></pre></td></tr></table></figure>
<h3 id="配置微信，支付宝打赏"><a href="#配置微信，支付宝打赏" class="headerlink" title="配置微信，支付宝打赏"></a>配置微信，支付宝打赏</h3><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Reward</span></span><br><span class="line"><span class="attr">reward_comment:</span>                   <span class="comment"># 打赏描述</span></span><br><span class="line"><span class="attr">wechatpay:</span> <span class="string">/images/wechatpay.png</span>  <span class="comment"># 微信支付的二维码图片地址</span></span><br><span class="line"><span class="attr">alipay:</span> <span class="string">/images/alipay.png</span>        <span class="comment"># 支付宝的地址</span></span><br><span class="line"><span class="comment">#bitcoin: /images/bitcoin.png     # 比特币地址</span></span><br></pre></td></tr></table></figure>
<h3 id="相关文章推荐"><a href="#相关文章推荐" class="headerlink" title="相关文章推荐"></a>相关文章推荐</h3><p>安装推荐文章的插件：<br><code>npm install hexo-related-popular-posts --save</code><br>主题配置信息（next.yml）如下:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">related_posts:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">相关文章推荐</span>      <span class="comment"># 属性的命名</span></span><br><span class="line">  <span class="attr">display_in_home:</span> <span class="literal">false</span> <span class="comment"># false代表首页不显示</span></span><br><span class="line">  <span class="attr">params:</span></span><br><span class="line">    <span class="attr">maxCount:</span> <span class="number">5</span>          <span class="comment"># 最多5条</span></span><br><span class="line">    <span class="comment">#PPMixingRate: 0.0   # 相关度</span></span><br><span class="line">    <span class="comment">#isDate: true        # 是否显示日期</span></span><br><span class="line">    <span class="comment">#isImage: false      # 是否显示配图</span></span><br><span class="line">    <span class="attr">isExcerpt:</span> <span class="literal">false</span>     <span class="comment"># 是否显示摘要</span></span><br></pre></td></tr></table></figure>
<h3 id="文章原创申明"><a href="#文章原创申明" class="headerlink" title="文章原创申明"></a>文章原创申明</h3><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">creative_commons:</span></span><br><span class="line">  <span class="attr">license:</span> <span class="string">by-nc-sa</span></span><br><span class="line">  <span class="attr">sidebar:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">post:</span> <span class="literal">true</span>       <span class="comment"># 默认显示版权信息</span></span><br><span class="line">  <span class="attr">language:</span></span><br></pre></td></tr></table></figure>
<h3 id="修改文章底部标签的样式"><a href="#修改文章底部标签的样式" class="headerlink" title="修改文章底部标签的样式"></a>修改文章底部标签的样式</h3><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Use icon instead of the symbol # to indicate the tag at the bottom of the post</span></span><br><span class="line"><span class="comment"># 标签代替#</span></span><br><span class="line"><span class="attr">tag_icon:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h3 id="显示当前浏览进度next-yml"><a href="#显示当前浏览进度next-yml" class="headerlink" title="显示当前浏览进度next.yml"></a>显示当前浏览进度next.yml</h3><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">back2top:</span> </span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span> <span class="comment"># 默认关闭</span></span><br><span class="line">  <span class="comment"># Back to top in sidebar.</span></span><br><span class="line">  <span class="attr">sidebar:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Scroll percent label in b2t button.</span></span><br><span class="line">  <span class="attr">scrollpercent:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h3 id="修改-back2top-标签"><a href="#修改-back2top-标签" class="headerlink" title="修改 back2top 标签"></a>修改 back2top 标签</h3><p>地址：<a href="https://github.com/jiangtj-lab/hexo-cake-moon-menu">hexo-cake-moon-menu</a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install hexo-cake-moon-menu --save</span><br></pre></td></tr></table></figure>

<p>If you are using NexT theme version 7.8 or earlier, install version 2.1.2</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm i hexo-cake-moon-menu@2.1.2</span><br></pre></td></tr></table></figure>

<p>然后在站点配置文件<code>_config.yml </code>中添加以下代码：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">moon_menu:</span></span><br><span class="line">  <span class="attr">back2top:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fa</span> <span class="string">fa-chevron-up</span></span><br><span class="line">    <span class="attr">func:</span> <span class="string">back2top</span></span><br><span class="line">    <span class="attr">order:</span> <span class="number">-1</span></span><br><span class="line">  <span class="attr">back2bottom:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fa</span> <span class="string">fa-chevron-down</span></span><br><span class="line">    <span class="attr">func:</span> <span class="string">back2bottom</span></span><br><span class="line">    <span class="attr">order:</span> <span class="number">-2</span></span><br></pre></td></tr></table></figure>
<div class="note info flat"><p>2021.3.22 注意：如果在hexo升级5.4后，安装有此插件就会报错（当然也有可能是主题和这个插件不兼容，Next升级8.5后不会报错了，大概率是主题问题，只需升级到最新主题，即可避免这个问题），<del>则需要卸载此插件。代码如下：</del></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm remove hexo-cake-moon-menu --save</span><br></pre></td></tr></table></figure>

<hr>
<p>2021.6.19 安装此插件，不报错了，目前版本hexo 5.4+Next 8.5</p>
</div>

<h3 id="菜单栏显示分类-x2F-标签中的文章数目"><a href="#菜单栏显示分类-x2F-标签中的文章数目" class="headerlink" title="菜单栏显示分类 &#x2F; 标签中的文章数目"></a>菜单栏显示分类 &#x2F; 标签中的文章数目</h3><p>scheme选择Gemini</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">menu_settings:</span></span><br><span class="line">  <span class="attr">badges:</span> <span class="literal">true</span> <span class="comment"># 显示菜单分类的数目</span></span><br></pre></td></tr></table></figure>
<h2 id="进阶配置"><a href="#进阶配置" class="headerlink" title="进阶配置"></a>进阶配置</h2><h3 id="修改文章默认模板"><a href="#修改文章默认模板" class="headerlink" title="修改文章默认模板"></a>修改文章默认模板</h3><p>修改<code>hexo\scaffolds\post.md</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">title: &#123;&#123; title &#125;&#125;</span><br><span class="line">date: &#123;&#123; date &#125;&#125;</span><br><span class="line">categories: []</span><br><span class="line">tags: []</span><br><span class="line">abbrlink: </span><br><span class="line">top: </span><br></pre></td></tr></table></figure>

<h3 id="新增文章时自动打开Markdown编辑器"><a href="#新增文章时自动打开Markdown编辑器" class="headerlink" title="新增文章时自动打开Markdown编辑器"></a>新增文章时自动打开Markdown编辑器</h3><p>首先在 <code>hexo/scripts</code> 下新建一个 <code>newpost.js</code> 文件，如果没有 <code>scripts</code> 文件可以手动创建一个。</p>
<p>在这个文件写入如下代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> spawn = <span class="built_in">require</span>(<span class="string">&#x27;child_process&#x27;</span>).<span class="property">exec</span>;</span><br><span class="line">hexo.<span class="title function_">on</span>(<span class="string">&#x27;new&#x27;</span>, <span class="keyword">function</span>(<span class="params">data</span>)&#123;</span><br><span class="line">  <span class="title function_">spawn</span>(<span class="string">&#x27;start  &quot;markdown编辑器绝对路径.exe&quot; &#x27;</span> + data.<span class="property">path</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>注意里面要修改的是 Markdown 编辑器的绝对路径，我使用的是 Typora ，所以我的绝对路径是 <code>D:\Program Files\Typora\Typora.exe</code> ，大家可以对应进行修改。</p>
<h3 id="Pjax插件"><a href="#Pjax插件" class="headerlink" title="Pjax插件"></a>Pjax插件</h3><p>Pjax是基于Ajax的插件，能实现网页局部无刷新载入，听起来很香，然而存在一些小问题：</p>
<div class="note danger">如果使用utterances评论系统，一定要先关闭Pjax插件，否则utterances评论无法登陆</div>

<ul>
<li>使用Mediumzoom时，从归档进入博文不会加载图片，需要刷新网页才能加载</li>
<li>Echarts图表全部需要刷新才能显示，否则只有一片空白</li>
</ul>
<p>安装Pjax，地址：<a href="https://github.com/next-theme/pjax"> next-theme &#x2F;pjax </a>，运行以下代码安装：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/next-theme/pjax source/lib/pjax</span><br></pre></td></tr></table></figure>

<p>然后在next.yml中搜索pjax并设置为<code>pjax: true</code></p>
<p>如果部署是报错:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ERROR Process failed: lib/pjax/README.md</span><br><span class="line">YAMLException: end of the stream or a document separator is expected at line 9, column 102:</span><br><span class="line">     ... languages` and other directories:</span><br></pre></td></tr></table></figure>

<p>解决方法：<a href="https://github.com/next-theme/pjax/issues/2">安装完pjax插件后，部署时报错</a></p>
<p>在 Hexo 的 _config.yml 中找到名为 skip_render 的选项，然后设置为这样:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">skip_render:</span><br><span class="line">  - lib/**/*</span><br></pre></td></tr></table></figure>

<h3 id="加载进度条"><a href="#加载进度条" class="headerlink" title="加载进度条"></a>加载进度条</h3><div class="note primary">注意next8.0.1后改用NProgress进度条插件
</div>

<p>在next.yml中搜索Progress bar in the top during page loading并设置为：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">nprogress:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">spinner:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<div class="note primary">next8.0.1之前，先安装插件：</div>


<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/theme-next/theme-next-pace source/lib/pace</span><br></pre></td></tr></table></figure>

<p>然后设置：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">pace:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h3 id="阅读进度条"><a href="#阅读进度条" class="headerlink" title="阅读进度条"></a>阅读进度条</h3><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Reading progress bar</span></span><br><span class="line"><span class="attr">reading_progress:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Available values: top | bottom</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">top</span></span><br><span class="line">  <span class="attr">color:</span> <span class="string">&quot;#37c6c0&quot;</span></span><br><span class="line">  <span class="attr">height:</span> <span class="string">3px</span></span><br></pre></td></tr></table></figure>

<h3 id="背景图片"><a href="#背景图片" class="headerlink" title="背景图片"></a>背景图片</h3><p>将背景图片放置在.&#x2F;hexo&#x2F;themes&#x2F;next&#x2F;source&#x2F;images中并命名为background.jpg<br>然后在.&#x2F;hexo&#x2F;source&#x2F;_data&#x2F;styles.styl中添加</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">body &#123;</span><br><span class="line">    <span class="attr">background</span>:<span class="title function_">url</span>(<span class="regexp">/images/</span>background.<span class="property">jpg</span>);<span class="comment">//图片路径</span></span><br><span class="line">    background-<span class="attr">repeat</span>: no-repeat;<span class="comment">//是否重复平铺</span></span><br><span class="line">    background-<span class="attr">attachment</span>: fixed;<span class="comment">//是否随着网页上下滚动而滚动，fixed为固定</span></span><br><span class="line">    background-<span class="attr">position</span>: <span class="number">50</span>% <span class="number">50</span>%;<span class="comment">//图片位置</span></span><br><span class="line">    background-<span class="attr">size</span>: cover;<span class="comment">//图片展示大小</span></span><br><span class="line">    -webkit-background-<span class="attr">size</span>: cover;</span><br><span class="line">    -o-background-<span class="attr">size</span>: cover;</span><br><span class="line">    -moz-background-<span class="attr">size</span>: cover;</span><br><span class="line">    -ms-background-<span class="attr">size</span>: cover;</span><br><span class="line">    <span class="attr">opacity</span>: <span class="number">0.95</span>;</span><br><span class="line">    footer &gt; div &gt; div &#123;</span><br><span class="line">        <span class="attr">color</span>:#<span class="number">000000</span>;<span class="comment">//底部文字颜色</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>第二种代码：（未测试，目前使用的是上面的代码）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">body &#123;</span><br><span class="line">    <span class="attr">background</span>:<span class="title function_">url</span>(<span class="regexp">/images/y</span>ourbackground.<span class="property">jpg</span>);</span><br><span class="line">    background-<span class="attr">repeat</span>: no-repeat;</span><br><span class="line">    background-<span class="attr">attachment</span>:fixed; <span class="comment">//不重复</span></span><br><span class="line">    background-<span class="attr">size</span>: cover;      <span class="comment">//填充</span></span><br><span class="line">    background-<span class="attr">position</span>:<span class="number">50</span>% <span class="number">50</span>%;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//博客内容透明化</span></span><br><span class="line"><span class="comment">//文章内容的透明度设置</span></span><br><span class="line">.<span class="property">content</span>-wrap &#123;</span><br><span class="line">  <span class="attr">opacity</span>: <span class="number">0.95</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//侧边框的透明度设置</span></span><br><span class="line">.<span class="property">sidebar</span> &#123;</span><br><span class="line">  <span class="attr">opacity</span>: <span class="number">0.9</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//菜单栏的透明度设置</span></span><br><span class="line">.<span class="property">header</span>-inner &#123;</span><br><span class="line">  <span class="attr">background</span>: <span class="title function_">rgba</span>(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">0.9</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//搜索框（local-search）的透明度设置</span></span><br><span class="line">.<span class="property">popup</span> &#123;</span><br><span class="line">  <span class="attr">opacity</span>: <span class="number">0.9</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="首页文章阴影边框"><a href="#首页文章阴影边框" class="headerlink" title="首页文章阴影边框"></a>首页文章阴影边框</h3><p>找到三种方法，在next7.7.2中都不起效。</p>
<h4 id="scheme选择Gemini"><a href="#scheme选择Gemini" class="headerlink" title="scheme选择Gemini"></a>scheme选择Gemini</h4><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Schemes</span></span><br><span class="line"><span class="comment">#scheme: Muse</span></span><br><span class="line"><span class="comment">#scheme: Mist</span></span><br><span class="line"><span class="comment">#scheme: Pisces</span></span><br><span class="line"><span class="attr">scheme:</span> <span class="string">Gemini</span></span><br></pre></td></tr></table></figure>
<h4 id="在styles-styl里添加代码"><a href="#在styles-styl里添加代码" class="headerlink" title="在styles.styl里添加代码"></a>在<code>styles.styl</code>里添加代码</h4><p>方法一只有首页第一篇文章有阴影效果，其他两种方法都没有效果。（不折腾了）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">.<span class="property">content</span>-wrap &#123;</span><br><span class="line">    <span class="attr">background</span>: initial;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">post</span>-block &#123;</span><br><span class="line">  box-<span class="attr">shadow</span>: <span class="number">0</span> 2px 6px <span class="number">0</span> <span class="title function_">rgb</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.6</span>), <span class="number">0</span> <span class="number">0</span> 6px <span class="number">0</span> <span class="title function_">rgb</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.6</span>)</span><br><span class="line">  <span class="attr">background</span>: #<span class="variable constant_">FFF</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 主页文章添加阴影效果</span></span><br><span class="line"> .<span class="property">post_block</span> &#123;</span><br><span class="line">   <span class="attr">opacity</span>: <span class="number">0</span>;</span><br><span class="line">   margin-<span class="attr">top</span>: 60px;</span><br><span class="line">   margin-<span class="attr">bottom</span>: 60px;</span><br><span class="line">   <span class="attr">padding</span>: 25px;</span><br><span class="line">   -webkit-box-<span class="attr">shadow</span>: <span class="number">0</span> <span class="number">0</span> 5px <span class="title function_">rgba</span>(<span class="number">202</span>, <span class="number">203</span>, <span class="number">203</span>, <span class="number">.5</span>);</span><br><span class="line">   -moz-box-<span class="attr">shadow</span>: <span class="number">0</span> <span class="number">0</span> 5px <span class="title function_">rgba</span>(<span class="number">202</span>, <span class="number">203</span>, <span class="number">204</span>, <span class="number">.5</span>);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 主页文章添加阴影效果</span></span><br><span class="line">.<span class="property">post</span> &#123;</span><br><span class="line">   margin-<span class="attr">top</span>: 0px;</span><br><span class="line">   margin-<span class="attr">bottom</span>: 60px;</span><br><span class="line">   <span class="attr">padding</span>: 25px;</span><br><span class="line">   -webkit-box-<span class="attr">shadow</span>: <span class="number">0</span> <span class="number">0</span> 5px <span class="title function_">rgba</span>(<span class="number">202</span>, <span class="number">203</span>, <span class="number">203</span>, <span class="number">.5</span>);</span><br><span class="line">   -moz-box-<span class="attr">shadow</span>: <span class="number">0</span> <span class="number">0</span> 5px <span class="title function_">rgba</span>(<span class="number">202</span>, <span class="number">203</span>, <span class="number">204</span>, <span class="number">.5</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="自定义单行代码颜色"><a href="#自定义单行代码颜色" class="headerlink" title="自定义单行代码颜色"></a>自定义单行代码颜色</h3><p>在.&#x2F;hexo&#x2F;source&#x2F;_data&#x2F;styles.styl中添加</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 单行代码颜色</span></span><br><span class="line">code &#123;</span><br><span class="line">    <span class="attr">color</span>: #ff511A;</span><br><span class="line">    <span class="attr">background</span>: #fbf7f8;</span><br><span class="line">    <span class="attr">margin</span>: 2px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="代码块高亮diff写法"><a href="#代码块高亮diff写法" class="headerlink" title="代码块高亮diff写法"></a>代码块高亮<code>diff</code>写法</h3><p>Next主题其实是自带代码块高亮显示的，但是有另外一种好玩的代码块高亮写法，叫 <code>diff</code> 语言。只需要在 markdown 语法代码块的语言选择处写上 <code>diff</code> 即可，然后在相应代码前面加上 <code>-</code> 和 <code>+ </code>就行了。（<strong>注意<code>+ -</code>前面不要加空格</strong>）</p>
<p><img src="https://cdn.jsdelivr.net/gh/iwyang/pic/20200721161157.jpg"></p>
<h3 id="菜单中文翻译"><a href="#菜单中文翻译" class="headerlink" title="菜单中文翻译"></a>菜单中文翻译</h3><p>我们原来是通过配置主题下的 languages 目录中的 zh-CN.yml 文件来对菜单等进行中文翻译的，现在我们可以通过在 hexo&#x2F;source&#x2F;_data&#x2F; 下新建数据文件 languages.yml，配置如下：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">zh-CN:</span> </span><br><span class="line">  <span class="attr">menu:</span></span><br><span class="line">    <span class="attr">home:</span> <span class="string">首页</span></span><br><span class="line">    <span class="attr">top:</span> <span class="string">热榜</span></span><br><span class="line">    <span class="attr">archives:</span> <span class="string">归档</span></span><br><span class="line">    <span class="attr">categories:</span> <span class="string">分类</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="string">标签</span></span><br><span class="line">    <span class="attr">about:</span> <span class="string">关于</span></span><br><span class="line">    <span class="attr">links:</span> <span class="string">友情链接</span></span><br><span class="line">    <span class="attr">search:</span> <span class="string">搜索</span></span><br><span class="line">    <span class="attr">schedule:</span> <span class="string">日程表</span></span><br><span class="line">    <span class="attr">sitemap:</span> <span class="string">站点地图</span></span><br><span class="line">    <span class="attr">commonweal:</span> <span class="string">公益</span> <span class="number">404</span></span><br><span class="line">    <span class="attr">movies:</span> <span class="string">观影</span></span><br><span class="line">    <span class="attr">books:</span> <span class="string">阅读</span></span><br><span class="line">    <span class="attr">gallery:</span> <span class="string">画廊</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">reward:</span></span><br><span class="line">    <span class="attr">donate:</span> <span class="string">&lt;i</span> <span class="string">class=&quot;fa</span> <span class="string">fa-qrcode</span> <span class="string">fa-2x&quot;</span> <span class="string">style=&quot;line-height:35px;&quot;&gt;&lt;/i&gt;</span></span><br><span class="line">    <span class="attr">wechatpay:</span> <span class="string">微信支付</span></span><br><span class="line">    <span class="attr">alipay:</span> <span class="string">支付宝</span></span><br><span class="line">    <span class="attr">bitcoin:</span> <span class="string">比特币</span></span><br></pre></td></tr></table></figure>
<h3 id="文章末尾添加本文结束分割线"><a href="#文章末尾添加本文结束分割线" class="headerlink" title="文章末尾添加本文结束分割线"></a>文章末尾添加本文结束分割线</h3><p>新建 source&#x2F;_data&#x2F;post-body-end.swig 文件，添加内容：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    &#123;% if not is_index %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;text-align:center;color: #ccc;font-size:14px;&quot;</span>&gt;</span>-------------本文结束<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-paw&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>感谢您的阅读-------------<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在next.yml中，去掉注释<br><code>postBodyEnd: source/_data/post-body-end.swig</code></p>
<h3 id="圆角设置、中文字体设置"><a href="#圆角设置、中文字体设置" class="headerlink" title="圆角设置、中文字体设置"></a>圆角设置、中文字体设置</h3><h4 id="圆角设置"><a href="#圆角设置" class="headerlink" title="圆角设置"></a>圆角设置</h4><p>在自定义样式文件 <code>hexo\source\_data\variables.styl</code> 中添加：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 圆角设置</span></span><br><span class="line">$border-radius-inner     = 20px 20px 20px 20px;</span><br><span class="line">$border-radius           = 20px;</span><br></pre></td></tr></table></figure>
<p>然后在 NexT 的配置文件 next.yml 中取消 variables.styl 的注释：<br><code>variable: source/_data/variables.styl</code><br>在这里会有一个bug，左下角始终会有个白块。解决方法:你只需要在 <code>source\_data\styles.styl</code> 文件中添加一行代码即可：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 修复圆角</span></span><br><span class="line">:root&#123;--body-bg-<span class="attr">color</span>: <span class="title function_">hsla</span>(<span class="number">0</span>,<span class="number">0</span>%,<span class="number">100</span>%,<span class="number">0</span>)&#125;</span><br></pre></td></tr></table></figure>

<p>或者添加下列代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 修复圆角</span></span><br><span class="line">.<span class="property">sidebar</span> &#123;</span><br><span class="line">box-<span class="attr">shadow</span>: none</span><br><span class="line"><span class="attr">background</span>: none</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="中文字体设置"><a href="#中文字体设置" class="headerlink" title="中文字体设置"></a>中文字体设置</h4><p>首先修改主题配置文件 next.yml：</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">font:</span><br><span class="line"><span class="deletion">- enable: false</span></span><br><span class="line"><span class="addition">+ enable: true</span></span><br><span class="line"></span><br><span class="line">  # Uri of fonts host. E.g. //fonts.googleapis.com (Default).</span><br><span class="line"><span class="deletion">- host:</span></span><br><span class="line"><span class="addition">+ host: https://fonts.loli.net</span></span><br><span class="line"></span><br><span class="line">  # Font options:</span><br><span class="line">  # `external: true` will load this font family from `host` above.</span><br><span class="line">  # `family: Times New Roman`. Without any quotes.</span><br><span class="line">  # `size: xx`. Use `px` as unit.</span><br><span class="line"></span><br><span class="line">  # Global font settings used for all elements in &lt;body&gt;.</span><br><span class="line">  global:</span><br><span class="line">    external: true</span><br><span class="line"><span class="deletion">-   family:</span></span><br><span class="line"><span class="addition">+   family: Noto Serif SC</span></span><br><span class="line">    size:</span><br></pre></td></tr></table></figure>
<p>修改配置文件 \hexo\source_data\variables.styl，增加如下代码：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">//</span> <span class="string">中文字体</span></span><br><span class="line"><span class="string">$font-family-monospace</span>    <span class="string">=</span> <span class="string">consolas,</span> <span class="string">Menlo,</span> <span class="string">monospace,</span> <span class="string">$font-family-base;</span></span><br><span class="line"><span class="string">$font-family-monospace</span>    <span class="string">=</span> <span class="string">get_font_family(&#x27;codes&#x27;),</span> <span class="string">consolas,</span> <span class="string">Menlo,</span> <span class="string">monospace,</span> <span class="string">$font-family-base</span> <span class="string">if</span> <span class="string">get_font_family(&#x27;codes&#x27;);</span></span><br></pre></td></tr></table></figure>
<h3 id="鼠标点击特效、打字特效、友链等"><a href="#鼠标点击特效、打字特效、友链等" class="headerlink" title="鼠标点击特效、打字特效、友链等"></a>鼠标点击特效、打字特效、友链等</h3><h4 id="打字特效、鼠标点击特效"><a href="#打字特效、鼠标点击特效" class="headerlink" title="打字特效、鼠标点击特效"></a>打字特效、鼠标点击特效</h4><p>之前版本：<a href="https://tding.top/archives/58cff12b.html">Hexo-NexT 添加打字特效、鼠标点击特效</a>中，以下代码是放在 <code>hexo/next/_layout/_custom/custom.swig</code> 文件中的，现在这部分代码需要放到 <code>hexo/source/_data/body-end.swig</code> 文件中：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;# 鼠标点击特效 #&#125;</span><br><span class="line">&#123;% <span class="keyword">if</span> theme.<span class="property">cursor_effect</span> == <span class="string">&quot;fireworks&quot;</span> %&#125;</span><br><span class="line">  &lt;script <span class="keyword">async</span> src=<span class="string">&quot;/js/cursor/fireworks.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&#123;% elseif theme.<span class="property">cursor_effect</span> == <span class="string">&quot;explosion&quot;</span> %&#125;</span><br><span class="line">  &lt;canvas <span class="keyword">class</span>=<span class="string">&quot;fireworks&quot;</span> style=<span class="string">&quot;position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;&quot;</span> &gt;&lt;/canvas&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;//cdn.bootcss.com/animejs/2.2.0/anime.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">async</span> <span class="attr">src</span>=<span class="string">&quot;/js/cursor/explosion.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&#123;% elseif theme.<span class="property">cursor_effect</span> == <span class="string">&quot;love&quot;</span> %&#125;</span><br><span class="line">  &lt;script <span class="keyword">async</span> src=<span class="string">&quot;/js/cursor/love.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&#123;% elseif theme.<span class="property">cursor_effect</span> == <span class="string">&quot;text&quot;</span> %&#125;</span><br><span class="line">  &lt;script <span class="keyword">async</span> src=<span class="string">&quot;/js/cursor/text.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br><span class="line"></span><br><span class="line">&#123;# 打字特效 #&#125;</span><br><span class="line">&#123;% <span class="keyword">if</span> theme.<span class="property">typing_effect</span> %&#125;</span><br><span class="line">  &lt;script src=<span class="string">&quot;/js/activate-power-mode.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    POWERMODE.colorful = </span><span class="template-variable">&#123;&#123; <span class="name">theme.typing_effect.colorful</span> &#125;&#125;</span><span class="language-xml">;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    POWERMODE.shake = </span><span class="template-variable">&#123;&#123; <span class="name">theme.typing_effect.shake</span> &#125;&#125;</span><span class="language-xml">;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    document.body.addEventListener(&#x27;input&#x27;, POWERMODE);</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">  </span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>
<p>然后在 NexT 的配置文件 <code>next.yml</code> 中取消 <code>body-end.swig</code> 的注释：<br><code>bodyEnd: source/_data/body-end.swig</code><br>然后我们在 <code>next.yml</code> 中增加如下配置项：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 鼠标点击特效</span></span><br><span class="line"><span class="comment"># mouse click effect: fireworks | explosion | love | text</span></span><br><span class="line"><span class="attr">cursor_effect:</span> <span class="string">fireworks</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 打字特效</span></span><br><span class="line"><span class="comment"># typing effect</span></span><br><span class="line"><span class="attr">typing_effect:</span></span><br><span class="line">  <span class="attr">colorful:</span> <span class="literal">true</span>  <span class="comment"># 礼花特效</span></span><br><span class="line">  <span class="attr">shake:</span> <span class="literal">false</span>    <span class="comment"># 震动特效</span></span><br></pre></td></tr></table></figure>
<p>注意：上面所有特效的 JS 代码文件都放在站点的 source 目录下（即 <code>hexo/source/js/</code>）而不是主题目录下，如果没有 js 目录，则新建一个。</p>
<h4 id="友链添加"><a href="#友链添加" class="headerlink" title="友链添加"></a>友链添加</h4><p>详见：<a href="https://tding.top/archives/73ce4e7.html">Hexo-NexT 新增友链</a><br>从第一种友链方式改用第二种友链方式，因为第二种瀑布流友链样式是不用修改 NexT 主题源文件的。</p>
<h4 id="代码块折叠"><a href="#代码块折叠" class="headerlink" title="代码块折叠"></a>代码块折叠</h4><p>参考：<a href="https://tding.top/archives/2bd6d82.html#%E4%BB%A3%E7%A0%81%E5%9D%97%E6%8A%98%E5%8F%A0">代码块折叠</a></p>
<h3 id="近期文章、粒子时钟特效"><a href="#近期文章、粒子时钟特效" class="headerlink" title="近期文章、粒子时钟特效"></a>近期文章、粒子时钟特效</h3><h4 id="近期文章"><a href="#近期文章" class="headerlink" title="近期文章"></a>近期文章</h4><p>现在我们把上面的代码放到 hexo&#x2F;source&#x2F;_data&#x2F;sidebar.swig 文件中，并且做以下更改：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;% <span class="keyword">if</span> theme.<span class="property">recent_posts</span> %&#125;</span><br><span class="line">    &lt;div <span class="keyword">class</span>=<span class="string">&quot;links-of-blogroll motion-element &#123;&#123; &quot;</span>links-<span class="keyword">of</span>-blogroll-<span class="string">&quot; + theme.recent_posts_layout  &#125;&#125;&quot;</span>&gt;</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;links-of-blogroll-title&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!-- modify icon to fire by szw --&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-history fa-&#123;&#123; theme.recent_posts_icon | lower &#125;&#125;&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;&#123; theme.recent_posts_title &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;links-of-blogroll-list&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">-        &#123;% set posts = site.posts.sort(&#x27;-date&#x27;) %&#125;</span></span><br><span class="line"><span class="language-xml">+        &#123;% set posts = site.posts.sort(&#x27;-date&#x27;).toArray() %&#125;</span></span><br><span class="line"><span class="language-xml">        &#123;% for post in posts.slice(&#x27;0&#x27;, &#x27;5&#x27;) %&#125;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123; url_for(post.path) &#125;&#125;&quot;</span> <span class="attr">title</span>=<span class="string">&quot;&#123;&#123; post.title &#125;&#125;&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>&#123;&#123; post.title &#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;% endfor %&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>
<p>这是因为 NexT 已经更换 Nunjucks 作为模板引擎。</p>
<p>然后在 NexT 的配置文件 next.yml 中取消 sidebar.swig 的注释：<br><code>sidebar: source/_data/sidebar.swig</code><br>最后，为了配置方便，在主题的<code>next.yml</code> 中添加了几个变量，如下：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">recent_posts_title:</span> <span class="string">近期文章</span></span><br><span class="line"><span class="attr">recent_posts_layout:</span> <span class="string">block</span></span><br><span class="line"><span class="attr">recent_posts:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h4 id="粒子时钟特效"><a href="#粒子时钟特效" class="headerlink" title="粒子时钟特效"></a>粒子时钟特效</h4><p>现在我们只需要把粒子时钟的 js 代码直接放入到 <code>hexo/source/_data/sidebar.swig</code> 文件即可。<br>详情见：<a href="http://bore.vip/archives/2764ed9c.html">Hexo-NexT 增加 canvas 粒子时钟</a></p>
<h3 id="置顶文章标志"><a href="#置顶文章标志" class="headerlink" title="置顶文章标志"></a>置顶文章标志</h3><p>首先我们需要安装 hexo-generator-index-pin-top 这个插件，</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm uninstall hexo-generator-index --save</span><br><span class="line">npm install hexo-generator-index-pin-top --save</span><br></pre></td></tr></table></figure>
<div class="note primary flat"><p>2021.6.19：如果卸载<code>hexo-generator-index</code>，没有安装<code>hexo-generator-index-pin-top</code>，本地预览会提示<code>Cannot GET/</code>，原因在于缺少了<code>hexo-generator-index</code>组件。</p>
</div>

<p>然后将以下代码放入 hexo&#x2F;source&#x2F;_data&#x2F;post-meta.swig 文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% if post.top %&#125;</span><br><span class="line">    &lt;span class=&quot;post-meta-divider&quot;&gt;|&lt;/span&gt;</span><br><span class="line">    &lt;i class=&quot;fa fa-thumb-tack&quot;&gt;&lt;/i&gt;</span><br><span class="line">    &lt;font color=7D26CD&gt;置顶&lt;/font&gt;</span><br><span class="line">    &lt;span class=&quot;post-meta-divider&quot;&gt;|&lt;/span&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>
<p>然后在 NexT 的配置文件 next.yml 中取消 post-meta.swig 的注释：<br><code>post-meta: source/_data/post-meta.swig</code><br>使用方法：在需要置顶的文章的 Front-matter 中加上 top: true 或者 top: 任意数字，比如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: TMDb电影数据分析</span><br><span class="line">declare: true</span><br><span class="line">toc: true</span><br><span class="line">tags:</span><br><span class="line">  - Python</span><br><span class="line">  - 数据分析</span><br><span class="line">categories:</span><br><span class="line">  - 数据分析</span><br><span class="line">  - 实战</span><br><span class="line">abbrlink: 7e380af2</span><br><span class="line">date: 2018-11-23 13:20:03</span><br><span class="line">top: 100</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<p>注意：top 中数字越大，文章越靠前。</p>
<h3 id="静态资源压缩插件"><a href="#静态资源压缩插件" class="headerlink" title="静态资源压缩插件"></a>静态资源压缩插件</h3><p>安装插件：<br><code>npm install hexo-neat --save</code><br>然后我们需要在<strong>站点配置文件</strong>中添加以下代码：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 博文压缩</span></span><br><span class="line"><span class="attr">neat_enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># 压缩html</span></span><br><span class="line"><span class="attr">neat_html:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line"><span class="comment"># 压缩css  </span></span><br><span class="line"><span class="attr">neat_css:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;**/*.min.css&#x27;</span></span><br><span class="line"><span class="comment"># 压缩js</span></span><br><span class="line"><span class="attr">neat_js:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">mangle:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">output:</span></span><br><span class="line">  <span class="attr">compress:</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;**/*.min.js&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;**/jquery.fancybox.pack.js&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;**/index.js&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;**/fireworks.js&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="首页改归档页"><a href="#首页改归档页" class="headerlink" title="首页改归档页"></a>首页改归档页</h3><p>把 <code>layout/archive.swig</code> 改为 <code>layout/index.swig</code> 就行了。不过注意此时首页的 <code>meta</code> 信息是 <code>archive</code> （归档）……要做个清爽合格的首页，可以把原 <code>index.swig</code> 的 <code>meta</code> 信息拷贝到新 <code>index.swig</code> 下。</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">// new index.swig (archive.swig)</span><br><span class="line"></span><br><span class="line"><span class="deletion">- &#123;% block title %&#125;&#123;&#123; __(&#x27;title.archive&#x27;) &#125;&#125; | &#123;&#123; title &#125;&#125;&#123;% endblock %&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+ &#123;% block title %&#125;&#123;&#123; title &#125;&#125;&#123;%- if theme.index_with_subtitle and subtitle %&#125; - &#123;&#123; subtitle &#125;&#125;&#123;%- endif %&#125;&#123;% endblock %&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="修改首页、归档页显示文章数量"><a href="#修改首页、归档页显示文章数量" class="headerlink" title="修改首页、归档页显示文章数量"></a>修改首页、归档页显示文章数量</h3><p>站点配置文件<code>_config.yml</code>里修改：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">index_generator:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">order_by:</span> <span class="string">-date</span></span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Pagination</span></span><br><span class="line"><span class="comment">## Set per_page to 0 to disable pagination</span></span><br><span class="line"><span class="attr">per_page:</span> <span class="number">10</span></span><br><span class="line"><span class="attr">pagination_dir:</span> <span class="string">page</span></span><br></pre></td></tr></table></figure>

<h3 id="关闭文章目录自动数字编号"><a href="#关闭文章目录自动数字编号" class="headerlink" title="关闭文章目录自动数字编号"></a>关闭文章目录自动数字编号</h3><p>关闭文章目录自动数字编号后，可以自定义目录数字编号。</p>
<p>在hexo\source_data\next.yml里修改：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">toc:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Automatically add list number to toc.</span></span><br><span class="line">  <span class="attr">number:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># If true, all words will placed on next lines if header width longer then sidebar width.</span></span><br><span class="line">  <span class="attr">wrap:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># If true, all level of TOC in a post will be displayed, rather than the activated part of it.</span></span><br><span class="line">  <span class="attr">expand_all:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Maximum heading depth of generated toc.</span></span><br><span class="line">  <span class="attr">max_depth:</span> <span class="number">6</span></span><br></pre></td></tr></table></figure>

<h3 id="自动部署脚本"><a href="#自动部署脚本" class="headerlink" title="自动部署脚本"></a>自动部署脚本</h3><p>在根目录新建<code>deploy.sh</code>，输入以下内容：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">#!<span class="regexp">/bin/</span>bash</span><br><span class="line">echo -e <span class="string">&quot;\033[0;32mDeploying updates to gitee...\033[0m&quot;</span></span><br><span class="line">git add .	</span><br><span class="line">git commit -m <span class="string">&quot;site backup&quot;</span></span><br><span class="line">git push --force origin master</span><br><span class="line">hexo clean</span><br><span class="line">hexo g -d</span><br></pre></td></tr></table></figure>

<p>有时候可能需要多次运行脚本才能提交成功，这时不妨手动输入命令。</p>
<h3 id="styles-styl自定义样式"><a href="#styles-styl自定义样式" class="headerlink" title="styles.styl自定义样式"></a><code>styles.styl</code>自定义样式</h3><p>自用自定义样式如下：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">//</span> <span class="string">背景图片</span></span><br><span class="line"><span class="string">body</span> &#123;</span><br><span class="line">    <span class="string">background:url(https://cdn.jsdelivr.net/gh/iwyang/pic/background.jpg);</span></span><br><span class="line">    <span class="attr">background-repeat:</span> <span class="literal">no</span><span class="string">-repeat;//是否重复平铺</span></span><br><span class="line">    <span class="attr">background-attachment:</span> <span class="string">fixed;//是否随着网页上下滚动而滚动，fixed为固定</span></span><br><span class="line">    <span class="attr">background-position:</span> <span class="number">50</span><span class="string">%</span> <span class="number">50</span><span class="string">%;//图片位置</span></span><br><span class="line">    <span class="attr">background-size:</span> <span class="string">cover;//图片展示大小</span></span><br><span class="line">    <span class="string">-webkit-background-size:</span> <span class="string">cover;</span></span><br><span class="line">    <span class="string">-o-background-size:</span> <span class="string">cover;</span></span><br><span class="line">    <span class="string">-moz-background-size:</span> <span class="string">cover;</span></span><br><span class="line">    <span class="string">-ms-background-size:</span> <span class="string">cover;</span></span><br><span class="line">    <span class="attr">opacity:</span> <span class="number">0.95</span><span class="string">;</span></span><br><span class="line">    <span class="string">footer</span> <span class="string">&gt;</span> <span class="string">div</span> <span class="string">&gt;</span> <span class="string">div</span> &#123;</span><br><span class="line">        <span class="string">color:#000000;//底部文字颜色</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">//</span> <span class="string">单行代码颜色</span></span><br><span class="line"><span class="string">code</span> &#123;</span><br><span class="line">    <span class="attr">color:</span> <span class="comment">#ff511A;</span></span><br><span class="line">    <span class="attr">background:</span> <span class="comment">#fbf7f8;</span></span><br><span class="line">    <span class="attr">margin:</span> <span class="string">2px;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">//</span> <span class="string">修复圆角</span></span><br><span class="line"><span class="string">:root&#123;--body-bg-color:</span> <span class="string">hsla(0,0%,100%,0)&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="string">//</span> <span class="string">修改选中字符的颜色</span></span><br><span class="line"><span class="string">/*</span> <span class="string">webkit,</span> <span class="string">opera,</span> <span class="string">IE9</span> <span class="string">*/</span></span><br><span class="line"><span class="string">::selection</span> &#123;</span><br><span class="line">    <span class="attr">background:</span> <span class="comment">#00c4b6;</span></span><br><span class="line">    <span class="attr">color:</span> <span class="comment">#f7f7f7;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="string">/*</span> <span class="string">firefox</span> <span class="string">*/</span></span><br><span class="line"><span class="string">::-moz-selection</span> &#123;</span><br><span class="line">    <span class="attr">background:</span> <span class="comment">#00c4b6;</span></span><br><span class="line">    <span class="attr">color:</span> <span class="comment">#f7f7f7;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">//</span> <span class="string">删除线</span></span><br><span class="line"><span class="string">del</span> &#123;</span><br><span class="line">  <span class="attr">color:</span> <span class="comment">#b35888;</span></span><br><span class="line">  <span class="attr">background:</span> <span class="comment">#fbf7f8;</span></span><br><span class="line">  <span class="attr">margin:</span> <span class="string">2px;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">//</span> <span class="string">文章内链接文本样式</span> </span><br><span class="line"><span class="string">.post-body</span> <span class="string">p</span> <span class="string">a&#123;</span> </span><br><span class="line">    <span class="attr">color:</span> <span class="comment">#0593d3; </span></span><br><span class="line">    <span class="attr">border-bottom:</span> <span class="string">none;</span> </span><br><span class="line">    <span class="attr">border-bottom:</span> <span class="string">1px</span> <span class="string">solid</span> <span class="comment">#0593d3; </span></span><br><span class="line">    <span class="string">&amp;:hover</span> &#123; </span><br><span class="line">        <span class="attr">color:</span> <span class="comment">#fc6423; </span></span><br><span class="line">        <span class="attr">border-bottom:</span> <span class="string">none;</span> </span><br><span class="line">        <span class="attr">border-bottom:</span> <span class="string">1px</span> <span class="string">solid</span> <span class="comment">#fc6423; </span></span><br><span class="line">    &#125; </span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="二级菜单目录"><a href="#二级菜单目录" class="headerlink" title="二级菜单目录"></a>二级菜单目录</h3><p>NexT 主题支持多级目录，但是官网并没有直接给出配置的方法，因此很少见到有人使用，具体的样式可以参考官方网站的 Docs 页面，其上方的样式即为二级目录和三级目录。</p>
<p><img src="/../img/Hexo-NexT%20(v7.7.2)%20%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/20200821211714.png"></p>
<p>就以官方网站的 Docs 页面为例，其配置文件的目录设定内容为：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">    <span class="attr">News:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">bullhorn</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">Docs:</span></span><br><span class="line">      <span class="attr">default:</span> <span class="string">/docs/</span> <span class="string">||</span> <span class="string">book</span></span><br><span class="line"></span><br><span class="line">      <span class="attr">Getting Started:</span></span><br><span class="line">        <span class="attr">default:</span> <span class="string">/getting-started/</span> <span class="string">||</span> <span class="string">flag</span></span><br><span class="line">        <span class="attr">Installation:</span> <span class="string">/installation.html</span> <span class="string">||</span> <span class="string">download</span></span><br><span class="line">        <span class="attr">Deployment:</span> <span class="string">/deployment.html</span> <span class="string">||</span> <span class="string">upload</span></span><br><span class="line">        <span class="attr">Data Files:</span> <span class="string">/data-files.html</span> <span class="string">||</span> <span class="string">wrench</span></span><br><span class="line">        <span class="attr">Update from 5.x:</span> <span class="string">/update-from-v5.html</span> <span class="string">||</span> <span class="string">retweet</span></span><br><span class="line"></span><br><span class="line">      <span class="attr">Theme Settings:</span></span><br><span class="line">        <span class="attr">default:</span> <span class="string">/theme-settings/</span> <span class="string">||</span> <span class="string">star</span></span><br><span class="line">        <span class="attr">Footer:</span> <span class="string">/footer.html</span> <span class="string">||</span> <span class="string">sun-o</span></span><br><span class="line">        <span class="attr">Sidebar:</span> <span class="string">/sidebar.html</span> <span class="string">||</span> <span class="string">bars</span></span><br><span class="line">        <span class="attr">Posts:</span> <span class="string">/posts.html</span> <span class="string">||</span> <span class="string">pencil-square-o</span></span><br><span class="line">        <span class="attr">Custom Pages:</span> <span class="string">/custom-pages.html</span> <span class="string">||</span> <span class="string">file-o</span></span><br><span class="line">        <span class="attr">SEO:</span> <span class="string">/seo.html</span> <span class="string">||</span> <span class="string">external-link-square</span></span><br><span class="line">        <span class="attr">Front Matter:</span> <span class="string">/front-matter.html</span> <span class="string">||</span> <span class="string">header</span></span><br><span class="line"></span><br><span class="line">      <span class="attr">Third Party Services:</span></span><br><span class="line">        <span class="attr">default:</span> <span class="string">/third-party-services/</span> <span class="string">||</span> <span class="string">plug</span></span><br><span class="line">        <span class="attr">Math Equations:</span> <span class="string">/math-equations.html</span> <span class="string">||</span> <span class="string">superscript</span></span><br><span class="line">        <span class="attr">Comment Systems:</span> <span class="string">/comments.html</span> <span class="string">||</span> <span class="string">comments-o</span></span><br><span class="line">        <span class="attr">Statistics and Analytics:</span> <span class="string">/statistics-and-analytics.html</span> <span class="string">||</span> <span class="string">bar-chart</span></span><br><span class="line">        <span class="attr">Post Widgets:</span> <span class="string">/post-widgets.html</span> <span class="string">||</span> <span class="string">share-square</span></span><br><span class="line">        <span class="attr">Search Services:</span> <span class="string">/search-services.html</span> <span class="string">||</span> <span class="string">search-plus</span></span><br><span class="line">        <span class="attr">Chat Services:</span> <span class="string">/chat-services.html</span> <span class="string">||</span> <span class="string">comment</span></span><br><span class="line">        <span class="attr">External Libraries:</span> <span class="string">/external-libraries.html</span> <span class="string">||</span> <span class="string">puzzle-piece</span></span><br><span class="line"></span><br><span class="line">      <span class="attr">Tag Plugins:</span></span><br><span class="line">        <span class="attr">default:</span> <span class="string">/tag-plugins/</span> <span class="string">||</span> <span class="string">rocket</span></span><br><span class="line">        <span class="attr">Note:</span> <span class="string">/note.html</span> <span class="string">||</span> <span class="string">comment</span></span><br><span class="line">        <span class="attr">Tabs:</span> <span class="string">/tabs.html</span> <span class="string">||</span> <span class="string">columns</span></span><br><span class="line">        <span class="attr">PDF:</span> <span class="string">/pdf.html</span> <span class="string">||</span> <span class="string">file-pdf-o</span></span><br><span class="line">        <span class="attr">Mermaid:</span> <span class="string">/mermaid.html</span> <span class="string">||</span> <span class="string">tasks</span></span><br><span class="line">        <span class="attr">Label:</span> <span class="string">/label.html</span> <span class="string">||</span> <span class="string">font</span></span><br><span class="line">        <span class="attr">Video:</span> <span class="string">/video.html</span> <span class="string">||</span> <span class="string">video-camera</span></span><br><span class="line">        <span class="attr">Button:</span> <span class="string">/button.html</span> <span class="string">||</span> <span class="string">square</span></span><br><span class="line">        <span class="attr">Caniuse:</span> <span class="string">/caniuse.html</span> <span class="string">||</span> <span class="string">signal</span></span><br><span class="line">        <span class="attr">Group Pictures:</span> <span class="string">/group-pictures.html</span> <span class="string">||</span> <span class="string">file-image-o</span></span><br><span class="line"></span><br><span class="line">      <span class="attr">Advanced Settings:</span> <span class="string">/advanced-settings.html</span> <span class="string">||</span> <span class="string">cogs</span></span><br><span class="line">      <span class="string">FAQ&#x27;s:</span> <span class="string">/faqs.html</span> <span class="string">||</span> <span class="string">life-ring</span></span><br><span class="line">      <span class="attr">Troubleshooting:</span> <span class="string">/troubleshooting.html</span> <span class="string">||</span> <span class="string">bug</span></span><br><span class="line">    <span class="attr">archives:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">archive</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>也就是说，在一级目录 <code>Docs</code> 下，我们想要创建 <code>Getting Started</code>、<code>Theme Settings</code> 等二级目录页面，那么需要作出如下修改：</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">menu:</span><br><span class="line"><span class="deletion">-   Docs: /docs/ || book</span></span><br><span class="line"><span class="addition">+   Docs:</span></span><br><span class="line"><span class="addition">+         default: /docs/ || book</span></span><br></pre></td></tr></table></figure>

<p>即将当前目录默认页面的名称改为 <code>default</code>。然后再在 <code>default</code> 同级下添加：</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">Docs:</span><br><span class="line">      default: /docs/ || book</span><br><span class="line"><span class="addition">+     Getting Started: /getting-started/ || flag</span></span><br><span class="line"><span class="addition">+     Theme Settings: /theme-settings/ || star</span></span><br></pre></td></tr></table></figure>

<p>我们需要在 <code>~/source/docs/</code> 文件夹下创建对应的文件夹 <code>Getting Started</code> 和 <code>Theme Settings</code>，文件夹中创建对应的 <code>index.md</code> 文件，该文件即为其二级目录对应页面内容的存放文件。</p>
<p>同样，创建三级目录的时候，需要将对应的二级目录默认页面改为 <code>default</code>，然后在同级下添加同样格式的内容，在此不再赘述。如果你还没有明白是怎么设定的，可以研究一下 NexT 官方网站的源码仓库文件的存放位置。</p>
<hr>
<p>例子：将<code>友情链接</code>放在<code>关于</code>页面顶部导航栏。</p>
<p>先将<code>links文件夹</code>放在<code>about文件夹</code>里，然后设置目录菜单。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">about:</span></span><br><span class="line">      <span class="attr">default:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-user</span></span><br><span class="line">      <span class="attr">links:</span> <span class="string">/links/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-link</span></span><br></pre></td></tr></table></figure>

<h3 id="开启gitter"><a href="#开启gitter" class="headerlink" title="开启gitter"></a>开启<code>gitter</code></h3><div class="note primary">首先前往 <a class="btn-beautify " href="https://gitter.im" 
  title="gitter官网"><i class="link fa-lg fa-fw"></i><span>gitter官网</span></a> 建立社区房间，然后在`_config.next.yml`配置如下:</div>


<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">gitter:</span><br><span class="line"><span class="deletion">- enable:</span></span><br><span class="line"><span class="addition">+ enable: true</span></span><br><span class="line"><span class="deletion">- room:</span></span><br><span class="line"><span class="addition">+ room: iwyang/community</span></span><br></pre></td></tr></table></figure>

<p><strong>最终效果：</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/iwyang/pic/20210710120529.jpg"></p>
<div class="note primary">由于觉得开启gitter会影响页面美观，所以我没有开启gitter。</div>

<h2 id="V8-0-更新内容"><a href="#V8-0-更新内容" class="headerlink" title="V8.0 更新内容"></a>V8.0 更新内容</h2><h3 id="重要更新"><a href="#重要更新" class="headerlink" title="重要更新"></a>重要更新</h3><ul>
<li>图标库升级为 Font-Awesome 5 (<a href="https://github.com/theme-next/hexo-theme-next/pull/1438">theme-next&#x2F;hexo-theme-next#1438</a>)</li>
<li>模板格式从 <code>swig</code> 更改为 <code>njk</code></li>
<li>菜单设置变更 (<a href="https://github.com/next-theme/hexo-theme-next/commit/a527bfdf11d558ffd958cd0a0b05416fb1caaa33">a527bfd</a>)</li>
</ul>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">-override: false</span></span><br><span class="line"></span><br><span class="line">menu:</span><br><span class="line"><span class="deletion">-  home: / || fa fa-home</span></span><br><span class="line"><span class="addition">+  #home: / || fa fa-home</span></span><br><span class="line">  #about: /about/ || fa fa-user</span><br><span class="line">  #tags: /tags/ || fa fa-tags</span><br><span class="line">  #categories: /categories/ || fa fa-th</span><br><span class="line"><span class="deletion">-  archives: /archives/ || fa fa-archive</span></span><br><span class="line"><span class="addition">+  #archives: /archives/ || fa fa-archive</span></span><br><span class="line">  #schedule: /schedule/ || fa fa-calendar</span><br><span class="line">  #sitemap: /sitemap.xml || fa fa-sitemap</span><br><span class="line">  #commonweal: /404/ || fa fa-heartbeat</span><br></pre></td></tr></table></figure>

<p>Valine 选项更新 (<a href="https://github.com/next-theme/hexo-theme-next/commit/6e6fc74ae98a0ef7aa3aeaba3e330ef735698b7b">6e6fc74</a>)</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">valine:</span><br><span class="line"><span class="deletion">-  appid: # Your leancloud application appid</span></span><br><span class="line"><span class="deletion">-  appkey: # Your leancloud application appkey</span></span><br><span class="line"><span class="addition">+  appId: # Your leancloud application appid</span></span><br><span class="line"><span class="addition">+  appKey: # Your leancloud application appkey</span></span><br><span class="line">  ...</span><br><span class="line"><span class="deletion">-  guest_info: nick,mail,link # Custom comment header</span></span><br><span class="line"><span class="addition">+  meta: # Custom comment header</span></span><br><span class="line"><span class="addition">+    - nick</span></span><br><span class="line"><span class="addition">+    - mail</span></span><br><span class="line"><span class="addition">+    - link</span></span><br></pre></td></tr></table></figure>

<ul>
<li>支持 highlight.js (<a href="https://github.com/next-theme/hexo-theme-next/commit/9fdaba295a2c6c707a7d96d331762ab571b89c1a">9fdaba2</a>)</li>
<li>允许更多的代码高亮格式 (<a href="https://github.com/next-theme/hexo-theme-next/commit/03e50d01ac59d136d8d9ccda187d898c0e424332">03e50d0</a>)</li>
</ul>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">codeblock:</span><br><span class="line">  ...</span><br><span class="line"><span class="deletion">-  # Available values: normal | night | night eighties | night blue | night bright | solarized | solarized dark | galactic</span></span><br><span class="line"><span class="deletion">-  # See: https://github.com/chriskempson/tomorrow-theme</span></span><br><span class="line"><span class="deletion">-  highlight_theme: normal</span></span><br><span class="line"><span class="addition">+  # See: https://github.com/highlightjs/highlight.js/tree/master/src/styles</span></span><br><span class="line"><span class="addition">+  theme:</span></span><br><span class="line"><span class="addition">+    light: default</span></span><br><span class="line"><span class="addition">+    dark: dark</span></span><br></pre></td></tr></table></figure>

<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><h4 id="代码高亮"><a href="#代码高亮" class="headerlink" title="代码高亮"></a>代码高亮</h4><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">codeblock:</span></span><br><span class="line">  <span class="attr">theme:</span></span><br><span class="line">    <span class="attr">light:</span> <span class="string">agate</span></span><br><span class="line">    <span class="attr">dark:</span> <span class="string">dark</span></span><br><span class="line">  <span class="comment"># Add copy button on codeblock</span></span><br><span class="line">  <span class="attr">copy_button:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Show text copy result.</span></span><br><span class="line">    <span class="attr">show_result:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Available values: default | flat | mac</span></span><br><span class="line">    <span class="attr">style:</span> <span class="string">mac</span></span><br></pre></td></tr></table></figure>

<p>你可以在这里预览代码高亮的效果：<a href="https://highlightjs.org/">highlightjs</a> 选择你喜欢的 <code>style</code> 即可。</p>
<h4 id="更换模板"><a href="#更换模板" class="headerlink" title="更换模板"></a>更换模板</h4><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">custom_file_path:</span></span><br><span class="line">  <span class="comment">#head: source/_data/head.njk</span></span><br><span class="line">  <span class="comment">#header: source/_data/header.njk</span></span><br><span class="line">  <span class="comment">#sidebar: source/_data/sidebar.njk</span></span><br><span class="line">  <span class="attr">postMeta:</span> <span class="string">source/_data/post-meta.njk</span></span><br><span class="line">  <span class="attr">postBodyEnd:</span> <span class="string">source/_data/post-body-end.njk</span></span><br><span class="line">  <span class="attr">footer:</span> <span class="string">source/_data/footer.njk</span></span><br><span class="line">  <span class="attr">bodyEnd:</span> <span class="string">source/_data/body-end.njk</span></span><br><span class="line">  <span class="attr">variable:</span> <span class="string">source/_data/variables.styl</span></span><br><span class="line">  <span class="comment">#mixin: source/_data/mixins.styl</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">source/_data/styles.styl</span></span><br></pre></td></tr></table></figure>

<p>同时将原 <code>_data</code> 目录下的 <code>swig</code> 文件后缀改为 <code>njk</code> 即可</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://tding.top/archives/42c38b10.html">1.Hexo-NexT (v7.0+) 主题配置</a></li>
<li><a href="https://siriusq.top/Next%E5%8D%87%E7%BA%A7-Mac%E8%BF%81%E7%A7%BB.html">2.Next升级+Mac迁移</a></li>
<li><a href="https://blog.juanertu.com/archives/264a3045.html">3.Hexo 框架 (三)：Next 主题配置及美化</a></li>
<li><a href="https://hasaik.com/posts/ab21860c.html">4.Hexo博客+Next主题深度优化与定制</a></li>
<li><a href="https://guanqr.com/tech/website/hexo-theme-next-customization/#">5.Hexo-NexT 主题个性优化</a></li>
<li><a href="https://www.yunyoujun.cn/share/third-party-comment-system/">6.第三方评论系统之我见—云游君</a></li>
<li><a href="https://leay.net/2020/03/23/hexo-next/">7.尝试折腾了下用 Hexo-Next-Theme 搭建的博客</a></li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hugo Stack主题配置与使用</title>
    <url>/archives/3bf3725e/</url>
    <content><![CDATA[<p>又换主题了，这回使用的是<a href="https://github.com/CaiJimmy/hugo-theme-stack">hugo-theme-stack</a>，无意发现这款主题，正合我意，够简单，最重要的是支持本地搜索，再不用弄哪个<code>Alogia</code>了。</p>
<h2 id="下载主题-amp-更新主题"><a href="#下载主题-amp-更新主题" class="headerlink" title="下载主题&amp;更新主题"></a>下载主题&amp;更新主题</h2><ol>
<li>下载主题</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git init</span><br><span class="line">git submodule add https://github.com/CaiJimmy/hugo-theme-stack/ themes/hugo-theme-stack</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>更新主题</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git submodule update --remote</span><br></pre></td></tr></table></figure>

<h2 id="查看主题版本号"><a href="#查看主题版本号" class="headerlink" title="查看主题版本号"></a>查看主题版本号</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git show 查看当前版本</span><br><span class="line">----------------------------------------------------------------</span><br><span class="line">git tag　列出所有版本号</span><br><span class="line">git checkout　+某版本号　(你当前文件夹下的源码会变成这个版本号的源码)</span><br></pre></td></tr></table></figure>

<h2 id="config-yaml配置文件"><a href="#config-yaml配置文件" class="headerlink" title="config.yaml配置文件"></a><code>config.yaml</code>配置文件</h2><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">baseurl:</span> <span class="string">/</span></span><br><span class="line"><span class="attr">languageCode:</span> <span class="string">zh-CN</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">hugo-theme-stack</span></span><br><span class="line"><span class="attr">paginate:</span> <span class="number">10</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Bore&#x27;s</span> <span class="string">Notes</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Change it to your Disqus shortname before using</span></span><br><span class="line"><span class="comment"># disqusShortname: </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># GA Tracking ID</span></span><br><span class="line"><span class="attr">googleAnalytics:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Theme i18n support</span></span><br><span class="line"><span class="comment"># Available values: en, fr, id, ja, ko, pt-br, zh-cn, zh-tw, es, de, nl, it, th, el, uk</span></span><br><span class="line"><span class="attr">DefaultContentLanguage:</span> <span class="string">zh-cn</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set hasCJKLanguage to true if DefaultContentLanguage is in [zh-cn ja ko]</span></span><br><span class="line"><span class="comment"># This will make .Summary and .WordCount behave correctly for CJK languages.</span></span><br><span class="line"><span class="attr">hasCJKLanguage:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">permalinks:</span></span><br><span class="line">    <span class="attr">post:</span> <span class="string">/archives/:slug/</span></span><br><span class="line">    <span class="attr">page:</span> <span class="string">/:slug/</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># whether to use emoji code</span></span><br><span class="line"><span class="attr">enableEmoji:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">params:</span></span><br><span class="line">    <span class="attr">mainSections:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">post</span></span><br><span class="line">    <span class="attr">featuredImageField:</span> <span class="string">image</span></span><br><span class="line">    <span class="attr">rssFullContent:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">favicon:</span> <span class="string">/img/favicon.png</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">footer:</span></span><br><span class="line">        <span class="attr">since:</span> <span class="number">2020</span></span><br><span class="line">        <span class="attr">customText:</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">dateFormat:</span></span><br><span class="line">        <span class="attr">published:</span> <span class="number">2006-01-02</span></span><br><span class="line">        <span class="attr">lastUpdated:</span> <span class="number">2006-01-02</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">sidebar:</span></span><br><span class="line">        <span class="attr">emoji:</span> <span class="string">🍥</span></span><br><span class="line">        <span class="attr">subtitle:</span> <span class="string">博观而约取，厚积而薄发</span></span><br><span class="line">        <span class="attr">avatar:</span></span><br><span class="line">            <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">            <span class="attr">local:</span> <span class="literal">true</span></span><br><span class="line">            <span class="attr">src:</span> <span class="string">img/avatar.jpg</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">article:</span></span><br><span class="line">        <span class="attr">math:</span> <span class="literal">false</span></span><br><span class="line">        <span class="attr">toc:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">readingTime:</span> <span class="literal">false</span> </span><br><span class="line">        <span class="attr">license:</span></span><br><span class="line">            <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">            <span class="attr">default:</span> <span class="string">Licensed</span> <span class="string">under</span> <span class="string">CC</span> <span class="string">BY-NC-SA</span> <span class="number">4.0</span></span><br><span class="line">        <span class="attr">edit:</span></span><br><span class="line">            <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">comments:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">provider:</span> <span class="string">waline</span></span><br><span class="line">        </span><br><span class="line">        <span class="attr">disqusjs:</span></span><br><span class="line">            <span class="attr">shortname:</span></span><br><span class="line">            <span class="attr">apiUrl:</span></span><br><span class="line">            <span class="attr">apiKey:</span></span><br><span class="line">            <span class="attr">admin:</span></span><br><span class="line">            <span class="attr">adminLabel:</span></span><br><span class="line"></span><br><span class="line">        <span class="attr">utterances:</span></span><br><span class="line">            <span class="attr">repo:</span> </span><br><span class="line">            <span class="attr">issueTerm:</span> <span class="string">title</span></span><br><span class="line">            <span class="attr">label:</span> <span class="string">utterances</span></span><br><span class="line">            <span class="attr">theme:</span> <span class="string">dark-orange</span></span><br><span class="line"></span><br><span class="line">        <span class="attr">remark42:</span></span><br><span class="line">            <span class="attr">host:</span></span><br><span class="line">            <span class="attr">site:</span></span><br><span class="line">            <span class="attr">locale:</span></span><br><span class="line"></span><br><span class="line">        <span class="attr">vssue:</span></span><br><span class="line">            <span class="attr">platform:</span></span><br><span class="line">            <span class="attr">owner:</span></span><br><span class="line">            <span class="attr">repo:</span></span><br><span class="line">            <span class="attr">clientId:</span></span><br><span class="line">            <span class="attr">clientSecret:</span></span><br><span class="line">            <span class="attr">autoCreateIssue:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># Waline client configuration see: https://waline.js.org/en/reference/client.html</span></span><br><span class="line">        <span class="attr">waline:</span></span><br><span class="line">            <span class="attr">serverURL:</span> <span class="string">https://your-domain.vercel.app</span></span><br><span class="line">            <span class="attr">lang:</span> <span class="string">zh-CN</span></span><br><span class="line">            <span class="attr">visitor:</span> <span class="literal">false</span></span><br><span class="line">            <span class="attr">avatar:</span> <span class="string">mp</span></span><br><span class="line">            <span class="attr">emoji:</span></span><br><span class="line">                <span class="bullet">-</span> <span class="string">https://cdn.jsdelivr.net/gh/walinejs/emojis/weibo</span></span><br><span class="line">            <span class="attr">requiredMeta:</span></span><br><span class="line">                <span class="bullet">-</span> <span class="string">nick</span></span><br><span class="line">                <span class="bullet">-</span> <span class="string">mail</span></span><br><span class="line">            <span class="attr">placeholder:</span> <span class="string">欢迎评论</span></span><br><span class="line">            <span class="attr">locale:</span></span><br><span class="line">                <span class="attr">admin:</span> <span class="string">博主</span></span><br><span class="line">   </span><br><span class="line">        <span class="attr">twikoo:</span></span><br><span class="line">            <span class="attr">envId:</span> <span class="string">https://twikoo-lake.vercel.app</span></span><br><span class="line">            <span class="attr">region:</span></span><br><span class="line">            <span class="attr">path:</span></span><br><span class="line">            <span class="attr">lang:</span></span><br><span class="line">            </span><br><span class="line">        <span class="attr">giscus:</span></span><br><span class="line">            <span class="attr">repo:</span></span><br><span class="line">            <span class="attr">repoID:</span></span><br><span class="line">            <span class="attr">category:</span></span><br><span class="line">            <span class="attr">categoryID:</span></span><br><span class="line">            <span class="attr">mapping:</span></span><br><span class="line">            <span class="attr">lightTheme:</span></span><br><span class="line">            <span class="attr">darkTheme:</span></span><br><span class="line">            <span class="attr">reactionsEnabled:</span> <span class="number">1</span></span><br><span class="line">            <span class="attr">emitMetadata:</span> <span class="number">0</span></span><br><span class="line">            </span><br><span class="line">        <span class="attr">gitalk:</span></span><br><span class="line">            <span class="attr">owner:</span> </span><br><span class="line">            <span class="attr">admin:</span>  </span><br><span class="line">            <span class="attr">repo:</span> </span><br><span class="line">            <span class="attr">clientID:</span> </span><br><span class="line">            <span class="attr">clientSecret:</span> </span><br><span class="line">            </span><br><span class="line">        <span class="attr">cusdis:</span></span><br><span class="line">            <span class="attr">host:</span> </span><br><span class="line">            <span class="attr">id:</span> </span><br><span class="line"></span><br><span class="line">    <span class="attr">widgets:</span></span><br><span class="line">        <span class="attr">enabled:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">search</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">categories</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">tag-cloud</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">archives</span></span><br><span class="line">           </span><br><span class="line">        <span class="attr">archives:</span></span><br><span class="line">            <span class="attr">limit:</span> <span class="number">10000</span></span><br><span class="line"></span><br><span class="line">        <span class="attr">tagCloud:</span></span><br><span class="line">            <span class="attr">limit:</span> <span class="number">10000</span></span><br><span class="line">            </span><br><span class="line">        <span class="attr">categoriesCloud:</span></span><br><span class="line">            <span class="attr">limit:</span> <span class="number">10000</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">opengraph:</span></span><br><span class="line">        <span class="attr">twitter:</span></span><br><span class="line">            <span class="comment"># Your Twitter username</span></span><br><span class="line">            <span class="attr">site:</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># Available values: summary, summary_large_image</span></span><br><span class="line">            <span class="attr">card:</span> <span class="string">summary_large_image</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">defaultImage:</span></span><br><span class="line">        <span class="attr">opengraph:</span></span><br><span class="line">            <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">            <span class="attr">local:</span> <span class="literal">false</span></span><br><span class="line">            <span class="attr">src:</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">colorScheme:</span></span><br><span class="line">        <span class="comment"># Display toggle</span></span><br><span class="line">        <span class="attr">toggle:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># Available values: auto, light, dark</span></span><br><span class="line">        <span class="attr">default:</span> <span class="string">auto</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">imageProcessing:</span></span><br><span class="line">        <span class="attr">cover:</span></span><br><span class="line">            <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">content:</span></span><br><span class="line">            <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### Custom menu</span></span><br><span class="line"><span class="comment">### See https://docs.stack.jimmycai.com/configuration/custom-menu.html</span></span><br><span class="line"><span class="comment">### To remove about, archive and search page menu item, remove `menu` field from their FrontMatter</span></span><br><span class="line"><span class="attr">menu:</span></span><br><span class="line">    <span class="attr">main:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">identifier:</span> <span class="string">home</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">首页</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">/</span></span><br><span class="line">          <span class="attr">weight:</span> <span class="number">-100</span></span><br><span class="line">          <span class="attr">pre:</span> <span class="string">home</span></span><br><span class="line">          <span class="attr">params:</span></span><br><span class="line">              <span class="comment">### For demonstration purpose, the home link will be open in a new tab</span></span><br><span class="line">              <span class="attr">newTab:</span> <span class="literal">false</span></span><br><span class="line">              <span class="attr">icon:</span> <span class="string">home</span></span><br><span class="line">    <span class="comment"># social:</span></span><br><span class="line">        <span class="comment"># - identifier: github</span></span><br><span class="line">          <span class="comment"># name: GitHub</span></span><br><span class="line">          <span class="comment"># url: https://github.com/iwyang</span></span><br><span class="line">          <span class="comment"># params:</span></span><br><span class="line">            <span class="comment"># icon: brand-github</span></span><br><span class="line">            </span><br><span class="line">        <span class="comment"># - identifier: twitter</span></span><br><span class="line">          <span class="comment"># name: Twitter</span></span><br><span class="line">          <span class="comment"># url: https://twitter.com</span></span><br><span class="line">          <span class="comment"># params:</span></span><br><span class="line">            <span class="comment"># icon: brand-twitter</span></span><br><span class="line"></span><br><span class="line"><span class="attr">related:</span></span><br><span class="line">    <span class="attr">includeNewer:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">threshold:</span> <span class="number">60</span></span><br><span class="line">    <span class="attr">toLower:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">indices:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">tags</span></span><br><span class="line">          <span class="attr">weight:</span> <span class="number">100</span></span><br><span class="line"></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">categories</span></span><br><span class="line">          <span class="attr">weight:</span> <span class="number">200</span></span><br><span class="line"></span><br><span class="line"><span class="attr">markup:</span></span><br><span class="line">    <span class="attr">goldmark:</span></span><br><span class="line">        <span class="attr">renderer:</span></span><br><span class="line">            <span class="comment">## Set to true if you have HTML content inside Markdown</span></span><br><span class="line">            <span class="attr">unsafe:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">tableOfContents:</span></span><br><span class="line">        <span class="attr">endLevel:</span> <span class="number">4</span></span><br><span class="line">        <span class="attr">ordered:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">startLevel:</span> <span class="number">2</span></span><br><span class="line">    <span class="attr">highlight:</span></span><br><span class="line">        <span class="attr">noClasses:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h2 id="archetypes默认模板"><a href="#archetypes默认模板" class="headerlink" title="archetypes默认模板"></a><code>archetypes</code>默认模板</h2><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">title:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; replace .TranslationBaseName &quot;-&quot; &quot; &quot; | title &#125;&#125;</span>&quot;</span></span><br><span class="line"><span class="attr">slug:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="attr">date:</span> &#123;&#123; <span class="string">.Date</span> &#125;&#125;</span><br><span class="line"><span class="attr">lastmod:</span> &#123;&#123; <span class="string">.Date</span> &#125;&#125;</span><br><span class="line"><span class="attr">draft:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">toc:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">weight:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">image:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="attr">categories:</span> [<span class="string">&quot;&quot;</span>]</span><br><span class="line"><span class="attr">tags:</span> [<span class="string">&quot;&quot;</span>]</span><br></pre></td></tr></table></figure>

<h2 id="显示右侧工具栏分类目录"><a href="#显示右侧工具栏分类目录" class="headerlink" title="显示右侧工具栏分类目录"></a><del>显示右侧工具栏分类目录</del></h2><p><del>参考 <a href="https://github.com/CaiJimmy/hugo-theme-stack/issues/169">https://github.com/CaiJimmy/hugo-theme-stack/issues/169</a></del></p>
<blockquote>
<p>最新版主题已默认开启分类目录工具栏</p>
</blockquote>
<ol>
<li>Create <code>categories.html</code> in layouts&#x2F;partials&#x2F;widget</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;widget tagCloud&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;widget-icon&quot;</span>&gt;</span></span><br><span class="line">      &#123;&#123; partial &quot;helper/icon&quot; &quot;categories&quot; &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;widget-title section-title&quot;</span>&gt;</span>&#123;&#123; T &quot;widget.categoriesCloud.title&quot; &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tagCloud-tags&quot;</span>&gt;</span></span><br><span class="line">      &#123;&#123; range first .Site.Params.widgets.categoriesCloud.limit .Site.Taxonomies.categories.ByCount &#125;&#125;</span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123; .Page.RelPermalink &#125;&#125;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;font_size_&#123;&#123; .Count &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">              &#123;&#123; .Page.Title &#125;&#125;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      &#123;&#123; end &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>修改 <code>config.yaml</code></li>
</ol>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">widgets:</span></span><br><span class="line">        <span class="attr">enabled:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">categories</span></span><br><span class="line">        </span><br><span class="line">        <span class="attr">categoriesCloud:</span></span><br><span class="line">            <span class="attr">limit:</span> <span class="number">20</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>网站根目录新建<code>\i18n\zh-CN.yaml</code></li>
</ol>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">widget:</span></span><br><span class="line">    <span class="attr">categoriesCloud:</span></span><br><span class="line">        <span class="attr">title:</span> </span><br><span class="line">            <span class="attr">other:</span> <span class="string">分类</span></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>Download categories.svg paste to <code>assets/icons</code>, from <a href="https://github.com/rmdhnreza/rmdhnreza.my.id/tree/main/assets/icons">here</a></li>
</ol>
<blockquote>
<p><strong>注意</strong>：可以按需删除图标。</p>
</blockquote>
<h2 id="文章底部添加在-GitHub-上编辑此页"><a href="#文章底部添加在-GitHub-上编辑此页" class="headerlink" title="文章底部添加在 GitHub 上编辑此页"></a>文章底部添加<code>在 GitHub 上编辑此页</code></h2><ol>
<li>拷贝主题目录<code>/layouts/partials/article/components/footer.html</code>到网站根目录，修改为：</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">footer</span> <span class="attr">class</span>=<span class="string">&quot;article-footer&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123; partial &quot;article/components/tags&quot; . &#125;&#125;</span><br><span class="line"></span><br><span class="line">    &#123;&#123; if and (.Site.Params.article.license.enabled) (not (eq .Params.license false)) &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;article-copyright&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123; partial &quot;helper/icon&quot; &quot;copyright&quot; &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; default .Site.Params.article.license.default .Params.license | markdownify &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">    &#123;&#123; end &#125;&#125;</span><br><span class="line">	</span><br><span class="line">	&#123;&#123; if and (.Site.Params.article.edit.enabled) (not (eq .Params.edit false)) &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;article-edit&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123; partial &quot;helper/icon&quot; &quot;external-link&quot; &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;color: inherit;&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://github.com/iwyang/iwyang.github.io/edit/develop/content/&#123;&#123; replace .File.Path &quot;</span>\\&quot; &quot;/&quot; &#125;&#125;&quot; <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;noopener noreferrer&quot;</span>&gt;</span>在 GitHub 上编辑此页<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">    &#123;&#123; end &#125;&#125;</span><br><span class="line"></span><br><span class="line">    &#123;&#123;- if ne .Lastmod .Date -&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;article-lastmod&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123; partial &quot;helper/icon&quot; &quot;clock&quot; &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span></span><br><span class="line">            &#123;&#123; T &quot;article.lastUpdatedOn&quot; &#125;&#125; &#123;&#123; .Lastmod.Format ( or .Site.Params.dateFormat.lastUpdated &quot;Jan 02, 2006 15:04 MST&quot; ) &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">    &#123;&#123;- end -&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>编辑<code>config.yaml</code>：</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">article:</span></span><br><span class="line">    <span class="attr">math:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">toc:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">readingTime:</span> <span class="literal">true</span> </span><br><span class="line">    <span class="attr">license:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">        <span class="attr">default:</span> <span class="string">Licensed</span> <span class="string">under</span> <span class="string">CC</span> <span class="string">BY-NC-SA</span> <span class="number">4.0</span></span><br><span class="line">    <span class="attr">edit:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>以后只要在Frontmatter添加<code>edit: false</code>来关闭。</p>
<ol start="3">
<li>拷贝<code>external-link.svg</code>图标到网站根目录<code>/assets/icons</code>下。图标地址：<a href="https://github.com/iwyang/iwyang.github.io/tree/develop/assets/icons">点击直达</a></li>
</ol>
<h2 id="自动更新文章最后修改时间"><a href="#自动更新文章最后修改时间" class="headerlink" title="自动更新文章最后修改时间"></a>自动更新文章最后修改时间</h2><p>1.在<code>config.yaml</code>里写:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">frontmatter:</span></span><br><span class="line">  <span class="attr">lastmod:</span> [<span class="string">&quot;:git&quot;</span>, <span class="string">&quot;lastmod&quot;</span>, <span class="string">&quot;:fileModTime&quot;</span>, <span class="string">&quot;:defalut&quot;</span>]    </span><br><span class="line">  </span><br><span class="line"><span class="attr">enableGitInfo:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">gitRepo:</span> <span class="string">&quot;https://github.com/iwyang/hugo&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>:git</code>：git 文件提交修改时间</li>
<li><code>:fileModTime</code>：文件修改时间</li>
<li><code>lastmod</code>：文章里 lastmod 字段</li>
<li><code>:defalut</code>：默认时间</li>
</ul>
<blockquote>
<p><code>config.toml</code>里写：</p>
<p>[frontmatter]<br>  lastmod &#x3D; [“:git”, “lastmod”, “:fileModTime”, “:defalut”]</p>
<p>enableGitInfo &#x3D; true</p>
<p>gitRepo &#x3D; “<a href="https://github.com/iwyang/hugo">https://github.com/iwyang/hugo</a>“</p>
</blockquote>
<p>2.<code>.github/workflows/xx.yml</code>：</p>
<p>yml 文件中添加 2 行设置当前环境时区</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Hugo</span> <span class="string">build</span> <span class="string">and</span> <span class="string">deploy</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">env:</span></span><br><span class="line">  <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span> <span class="comment"># 设置当前环境时区</span></span><br></pre></td></tr></table></figure>

<p>3.gihutb action 里 yaml 上配置</p>
<p><strong>建构前</strong>新增以下配置，主要是 quotePath，默认情况下，文件名包含中文时，git 会使用引号吧文件名括起来，这会导致 action 中无法读取<code>:GitInfo</code> 变量，所以要设置 <code>Disable quotePath</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Git</span> <span class="string">Configuration</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          git config --global core.quotePath false</span></span><br><span class="line"><span class="string">          git config --global core.autocrlf false</span></span><br><span class="line"><span class="string">          git config --global core.safecrlf true</span></span><br><span class="line"><span class="string">          git config --global core.ignorecase false</span></span><br></pre></td></tr></table></figure>

<p>使用 <code>checkout</code> 的话 <code>fetch-depth</code> 需要设为 0，depth 默认是为 1，默认只拉取分支最近一次 commit，可能会导致一些文章的 <code>GitInfo</code> 变量无法获取，设为 0 代表拉去所有分支所有提交。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">	  <span class="attr">fetch-depth:</span> <span class="number">0</span>   <span class="comment">#设为0</span></span><br></pre></td></tr></table></figure>

<p>以下是我最终的 yml 配置文件：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">GitHub</span> <span class="string">Page</span> <span class="string">Deploy</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">develop</span></span><br><span class="line">      </span><br><span class="line"><span class="attr">env:</span></span><br><span class="line">  <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span> <span class="comment"># 设置当前环境时区</span></span><br><span class="line">  </span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build-deploy:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">master</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v2.3.4</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">submodules:</span> <span class="literal">true</span>  <span class="comment"># Fetch Hugo themes (true OR recursive)</span></span><br><span class="line">          <span class="attr">fetch-depth:</span> <span class="number">0</span>    <span class="comment"># Fetch all history for .GitInfo and .Lastmod</span></span><br><span class="line">          </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Git</span> <span class="string">Configuration</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          git config --global core.quotePath false</span></span><br><span class="line"><span class="string">          git config --global core.autocrlf false</span></span><br><span class="line"><span class="string">          git config --global core.safecrlf true</span></span><br><span class="line"><span class="string">          git config --global core.ignorecase false </span></span><br><span class="line"><span class="string"></span>          </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Hugo</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">peaceiris/actions-hugo@v2.5.0</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">hugo-version:</span> <span class="string">&#x27;latest&#x27;</span></span><br><span class="line">          <span class="attr">extended:</span> <span class="literal">true</span></span><br><span class="line">          </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Cache</span> <span class="string">resources</span> <span class="comment"># 缓存 resource 文件加快生成速度</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/cache@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">resources</span></span><br><span class="line">         <span class="comment"># 检查照片文件变化</span></span><br><span class="line">          <span class="attr">key:</span> <span class="string">$&#123;&#123;</span> <span class="string">runner.os</span> <span class="string">&#125;&#125;-hugocache-$&#123;&#123;</span> <span class="string">hashFiles(&#x27;content/**/*&#x27;)</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">restore-keys:</span> <span class="string">$&#123;&#123;</span> <span class="string">runner.os</span> <span class="string">&#125;&#125;-hugocache-</span>             </span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">Hugo</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">hugo</span> <span class="string">-v</span> <span class="string">--gc</span> <span class="string">--minify</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">Hugo</span> <span class="string">to</span> <span class="string">gh-pages</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">peaceiris/actions-gh-pages@v3.8.0</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">github_token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">PUBLISH_BRANCH:</span> <span class="string">master</span></span><br><span class="line">          <span class="attr">PUBLISH_DIR:</span> <span class="string">./public</span></span><br><span class="line">        <span class="comment"># cname:</span></span><br><span class="line">        </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">Hugo</span> <span class="string">to</span> <span class="string">Server</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">SamKirkland/FTP-Deploy-Action@4.3.0</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">server:</span> <span class="number">104.224</span><span class="number">.191</span><span class="number">.88</span></span><br><span class="line">          <span class="attr">username:</span> <span class="string">admin</span></span><br><span class="line">          <span class="attr">password:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.FTP_MIRROR_PASSWORD</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">local-dir:</span> <span class="string">./public/</span></span><br><span class="line">          <span class="attr">server-dir:</span> <span class="string">/var/www/speak/</span></span><br></pre></td></tr></table></figure>

<p>别人：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attr">name:</span> <span class="string">Hugo</span> <span class="string">build</span> <span class="string">and</span> <span class="string">deploy</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">env:</span></span><br><span class="line">  <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span> <span class="comment"># 设置当前环境时区</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">Actions-Hugo-Deploy:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Check</span> <span class="string">out</span> <span class="string">repository</span> <span class="string">code</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">submodules:</span> <span class="string">recursive</span>  <span class="comment"># Fetch Hugo themes (true OR recursive)</span></span><br><span class="line">          <span class="attr">fetch-depth:</span> <span class="number">0</span>         <span class="comment"># Fetch all history for .GitInfo and .Lastmod</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Git</span> <span class="string">Configuration</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          git config --global core.quotePath false</span></span><br><span class="line"><span class="string">          git config --global core.autocrlf false</span></span><br><span class="line"><span class="string">          git config --global core.safecrlf true</span></span><br><span class="line"><span class="string">          git config --global core.ignorecase false          </span></span><br><span class="line"><span class="string"></span>      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Hugo</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">peaceiris/actions-hugo@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">hugo-version:</span> <span class="string">latest</span></span><br><span class="line">          <span class="attr">extended:</span> <span class="literal">true</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">Hugo</span> <span class="string">static</span> <span class="string">files</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">hugo</span> <span class="string">-v</span> <span class="string">--gc</span> <span class="string">--minify</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">to</span> <span class="string">Github</span> <span class="string">Pages</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">peaceiris/actions-gh-pages@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">DEPLOY_KEY:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DEPLOY_KEY</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">external_repository:</span> <span class="string">Charlie-king/Charlie-king.github.io</span></span><br><span class="line">          <span class="attr">publish_branch:</span> <span class="string">main</span></span><br><span class="line">          <span class="attr">publish_dir:</span> <span class="string">./public</span></span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">NPM</span> <span class="string">install</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Update</span> <span class="string">Algolia</span> <span class="string">index</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">ALGOLIA_APP_ID:</span> <span class="string">B6R922P6DD</span></span><br><span class="line">          <span class="attr">ALGOLIA_ADMIN_KEY:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.ALGOLIA_ADMIN_KEY</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">ALGOLIA_INDEX_NAME:</span> <span class="string">&#x27;dev_hugo&#x27;</span></span><br><span class="line">          <span class="attr">ALGOLIA_INDEX_FILE:</span> <span class="string">&#x27;./public/index.json&#x27;</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">run</span> <span class="string">algolia</span></span><br><span class="line">  </span><br></pre></td></tr></table></figure>

<h3 id="删除文章底部更新于"><a href="#删除文章底部更新于" class="headerlink" title="删除文章底部更新于"></a>删除文章底部更新于</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.article-footer</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="删除相关文章、分类图片，修改相关文章数目"><a href="#删除相关文章、分类图片，修改相关文章数目" class="headerlink" title="删除相关文章、分类图片，修改相关文章数目"></a>删除相关文章、分类图片，修改相关文章数目</h2><h3 id="删除相关文章图片"><a href="#删除相关文章图片" class="headerlink" title="删除相关文章图片"></a>删除相关文章图片</h3><p>根目录<code>assets/scss/partials/layout/article.scss</code></p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.related-contents</span> &#123;</span><br><span class="line">    <span class="attribute">overflow-x</span>: auto;</span><br><span class="line">    <span class="attribute">padding-bottom</span>: <span class="number">15px</span>;</span><br><span class="line"></span><br><span class="line">    &amp; &gt; <span class="selector-class">.flex</span> &#123;</span><br><span class="line">        <span class="attribute">float</span>: left;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">article</span> &#123;</span><br><span class="line">        <span class="attribute">margin-right</span>: <span class="number">15px</span>;</span><br><span class="line">        <span class="attribute">flex-shrink</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">overflow</span>: hidden;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">250px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">80px</span>; <span class="comment">//改为80</span></span><br><span class="line">        <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--shadow-l2); <span class="comment">//加个卡片阴影</span></span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.article-title</span> &#123;</span><br><span class="line">            <span class="attribute">font-size</span>: <span class="number">1.4rem</span>; <span class="comment">//改为1.4</span></span><br><span class="line">            <span class="attribute">margin</span>: auto;</span><br><span class="line">            <span class="attribute">justify-content</span>: center; <span class="comment">//居中</span></span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<h3 id="删除分类图片"><a href="#删除分类图片" class="headerlink" title="删除分类图片"></a>删除分类图片</h3><p>根目录<code>assets/scss/partials/layout/list.scss</code></p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.subsection-list</span> &#123;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="built_in">var</span>(--section-separation);</span><br><span class="line">    <span class="attribute">overflow-x</span>: auto;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.article-list--tile</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: flex;</span><br><span class="line">        <span class="attribute">padding-bottom</span>: <span class="number">15px</span>;</span><br><span class="line"></span><br><span class="line">        <span class="selector-tag">article</span> &#123;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">200px</span>; <span class="comment">//改爲200px</span></span><br><span class="line">            <span class="attribute">height</span>: <span class="number">50px</span>; <span class="comment">//改爲50px</span></span><br><span class="line">            <span class="attribute">margin-right</span>: <span class="number">5px</span>; <span class="comment">//改爲5px</span></span><br><span class="line">            <span class="attribute">flex-shrink</span>: <span class="number">0</span>;</span><br><span class="line">            <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--shadow-l2); <span class="comment">//改个卡片阴影</span></span><br><span class="line"></span><br><span class="line">            <span class="selector-class">.article-title</span> &#123;</span><br><span class="line">                <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">                <span class="attribute">font-size</span>: <span class="number">1.5rem</span>; <span class="comment">//改爲1.5rem，調整字體尺寸</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="selector-class">.article-details</span> &#123;</span><br><span class="line">                <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">                <span class="attribute">justify-content</span>: center; <span class="comment">//添加justify-content設定，保持字體居中</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="修改相关文章数目"><a href="#修改相关文章数目" class="headerlink" title="修改相关文章数目"></a>修改相关文章数目</h3><p>根目录<code>layouts/partials/article/components/related-contents.html</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;&#123; $related := (where (.Site.RegularPages.Related .) &quot;Params.hidden&quot; &quot;!=&quot; true) | first 3 &#125;&#125;  //修改数字即可</span><br></pre></td></tr></table></figure>

<p>数字设为0，即关闭<code>相关文章</code>。</p>
<h2 id="加入字数统计、站点总字数统计"><a href="#加入字数统计、站点总字数统计" class="headerlink" title="加入字数统计、站点总字数统计"></a>加入字数统计、站点总字数统计</h2><h3 id="加入字数统计"><a href="#加入字数统计" class="headerlink" title="加入字数统计"></a>加入字数统计</h3><p>1.直接用阅读时间改的，图标路径为根目录<code>assets\icons</code></p>
<p>根目录<code>layouts\partials\article\components\details.html</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">    &#123;&#123; if .Site.Params.article.readingTime &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            &#123;&#123; partial &quot;helper/icon&quot; &quot;pencil&quot; &#125;&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">time</span> <span class="attr">class</span>=<span class="string">&quot;article-words&quot;</span>&gt;</span></span><br><span class="line">                &#123;&#123; .WordCount &#125;&#125; 字</span><br><span class="line">            <span class="tag">&lt;/<span class="name">time</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    &#123;&#123; end &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2.然后在<code>config.yaml</code>中加入一行，以正确显示中文字符数量</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">hasCJKLanguage:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>3.<code>config.yaml</code>中确保<code>readingTime: true</code></p>
<h3 id="站点总字数统计"><a href="#站点总字数统计" class="headerlink" title="站点总字数统计"></a>站点总字数统计</h3><p>1.根目录<code>layouts\partials\footer\footer.html</code>里写上总字数参数</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;&#123;$scratch := newScratch&#125;&#125;</span><br><span class="line">&#123;&#123; range (where .Site.Pages &quot;Kind&quot; &quot;page&quot; )&#125;&#125;</span><br><span class="line">    &#123;&#123;$scratch.Add &quot;total&quot; .WordCount&#125;&#125;</span><br><span class="line">&#123;&#123; end &#125;&#125;</span><br></pre></td></tr></table></figure>

<p>2.根目录<code>layouts\partials\footer\footer.html</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;copyright&quot;</span>&gt;</span></span><br><span class="line">        <span class="symbol">&amp;copy;</span> </span><br><span class="line">        &#123;&#123; if and (.Site.Params.footer.since) (ne .Site.Params.footer.since (int (now.Format &quot;2006&quot;))) &#125;&#125;</span><br><span class="line">            &#123;&#123; .Site.Params.footer.since &#125;&#125; - </span><br><span class="line">        &#123;&#123; end &#125;&#125;</span><br><span class="line">        &#123;&#123; now.Format &quot;2006&quot; &#125;&#125; Bore&#x27;s Blog<span class="tag">&lt;<span class="name">br</span>&gt;</span>共 &#123;&#123; div ($scratch.Get &quot;total&quot;) 1000.0 | lang.FormatNumber 2 &#125;&#125;k 字 · 共 &#123;&#123; len (where .Site.RegularPages &quot;Section&quot; &quot;post&quot;) &#125;&#125;篇文章<span class="tag">&lt;/<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>PS：如果加入<code>站点总字数统计</code>，<code>Github Action</code>部署到服务器就会变慢。</strong></p>
<h2 id="添加友情链接-shortcodes"><a href="#添加友情链接-shortcodes" class="headerlink" title="添加友情链接 shortcodes"></a>添加友情链接 shortcodes</h2><ol>
<li><p>网站根目录新建文件<code>layouts\page\links.html</code>：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;&#123; define &quot;body-class&quot; &#125;&#125;article-page keep-sidebar&#123;&#123; end &#125;&#125;</span><br><span class="line">&#123;&#123; define &quot;main&quot; &#125;&#125;</span><br><span class="line">    &#123;&#123; partial &quot;article/article.html&quot; . &#125;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;article-list--compact links&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123; $siteResources := resources &#125;&#125;</span><br><span class="line">        &#123;&#123; range $i, $link :=  $.Site.Data.links &#125;&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">article</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123; $link.website &#125;&#125;&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;noopener&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;article-details&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;article-title&quot;</span>&gt;</span></span><br><span class="line">                            &#123;&#123;- $link.title -&#125;&#125;</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">footer</span> <span class="attr">class</span>=<span class="string">&quot;article-time&quot;</span>&gt;</span></span><br><span class="line">                            &#123;&#123; with $link.description &#125;&#125;</span><br><span class="line">                                &#123;&#123; . &#125;&#125;</span><br><span class="line">                            &#123;&#123; else &#125;&#125;</span><br><span class="line">                                &#123;&#123; $link.website &#125;&#125;</span><br><span class="line">                            &#123;&#123; end &#125;&#125;</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">                    &#123;&#123; if $link.image &#125;&#125;</span><br><span class="line">                        &#123;&#123; $image := $siteResources.Get (delimit (slice &quot;link-img/&quot; $link.image) &quot;&quot;) | resources.Fingerprint &quot;md5&quot; &#125;&#125;</span><br><span class="line">                        &#123;&#123; $imageResized := $image.Resize &quot;120x120&quot; &#125;&#125;</span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;article-image&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123; $imageResized.RelPermalink &#125;&#125;&quot;</span> <span class="attr">width</span>=<span class="string">&quot;&#123;&#123; $imageResized.Width &#125;&#125;&quot;</span> <span class="attr">height</span>=<span class="string">&quot;&#123;&#123; $imageResized.Height &#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                                <span class="attr">loading</span>=<span class="string">&quot;lazy&quot;</span> <span class="attr">data-key</span>=<span class="string">&quot;links-&#123;&#123; $link.website &#125;&#125;&quot;</span> <span class="attr">data-hash</span>=<span class="string">&quot;&#123;&#123; $image.Data.Integrity &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    &#123;&#123; end &#125;&#125;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line">        &#123;&#123; end &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    &#123;&#123; if or (not (isset .Params &quot;comments&quot;)) (eq .Params.comments &quot;true&quot;)&#125;&#125; </span><br><span class="line">        &#123;&#123; partial &quot;comments/include&quot; . &#125;&#125;</span><br><span class="line">    &#123;&#123; end &#125;&#125;</span><br><span class="line"></span><br><span class="line">    &#123;&#123; partialCached &quot;footer/footer&quot; . &#125;&#125;</span><br><span class="line"></span><br><span class="line">    &#123;&#123; partialCached &quot;article/components/photoswipe&quot; . &#125;&#125;</span><br><span class="line">&#123;&#123; end &#125;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>网站根目录新建文件<code>\layouts\shortcodes\link.html</code>：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;&#123;$URL := .Get 0&#125;&#125;</span><br><span class="line">&#123;&#123; with .Site.GetPage $URL &#125;&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;post-preview&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;post-preview--meta&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:100%;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;post-preview--middle&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h4</span> <span class="attr">class</span>=<span class="string">&quot;post-preview--title&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123; .Permalink &#125;&#125;&quot;</span>&gt;</span>&#123;&#123; .Title &#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">time</span> <span class="attr">class</span>=<span class="string">&quot;post-preview--date&quot;</span>&gt;</span>&#123;&#123; .Date.Format ( default &quot;2006-01-02&quot;) &#125;&#125;<span class="tag">&lt;/<span class="name">time</span>&gt;</span></span><br><span class="line">      &#123;&#123; if .Params.tags &#125;&#125;</span><br><span class="line">      <span class="tag">&lt;<span class="name">small</span>&gt;</span>&#123;&#123; range .Params.tags &#125;&#125;#&#123;&#123; . &#125;&#125;<span class="symbol">&amp;nbsp;</span>&#123;&#123; end &#125;&#125;<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">      &#123;&#123; end &#125;&#125;</span><br><span class="line">      <span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">&quot;max-height:105px;overflow:hidden;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;post-preview--excerpt&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123; .Summary | plainify&#125;&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;&#123; end &#125;&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><code>网站图像</code>放在网站根目录<code>\assets\link-img\</code>文件夹下。</li>
<li>网站根目录新建文件<code>\data\links.json</code>：</li>
</ol>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Upptime&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;website&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://iwyang.github.io/check&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;image&quot;</span><span class="punctuation">:</span> <span class="string">&quot;upptime.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;利用Github Actions查看网站运行状态。&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ConstOwn&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;website&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://blog.juanertu.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;image&quot;</span><span class="punctuation">:</span> <span class="string">&quot;constown.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;能与你一起成长，我荣幸之至。&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;小丁的个人博客&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;website&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://tding.top&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;image&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ding.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;世间所有的相遇，都是久别重逢。&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Xu&#x27;s Blog&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;website&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://hasaik.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;image&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xu.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;简单不先于复杂，而是在复杂之后。&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;知行志&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;website&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://baozi.fun&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;image&quot;</span><span class="punctuation">:</span> <span class="string">&quot;zhi.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Halo Theme Xue作者。&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Takagi&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;website&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://lixingyong.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;image&quot;</span><span class="punctuation">:</span> <span class="string">&quot;takagi.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Takagi是啥呀？？当然是最喜欢的Takagi了吖ヾ(≧∇≦*)ゝ&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;千与千寻&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;website&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://www.chihiro.org.cn&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;image&quot;</span><span class="punctuation">:</span> <span class="string">&quot;qian.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;所以，看不到光，算是不幸吗？需要光才是真正的不幸吧。&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Bill Yang&#x27;s Blog&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;website&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://blog.bill.moe&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;image&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bill.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;这辈子都不可能更新的 。&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Sanarous&#x27;s Blog&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;website&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://bestzuo.cn&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;image&quot;</span><span class="punctuation">:</span> <span class="string">&quot;sanarous.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Dream it possible, make it possible&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">	    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;JACK小桔子的小屋&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;website&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://jackxjz.top/&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;image&quot;</span><span class="punctuation">:</span> <span class="string">&quot;jack.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;一个分享科技/日常的网站。&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;若只如初见&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;website&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://joyli.net.cn/&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;image&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ruo.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;世间所有的相遇，都是久别重逢。&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;大大的小蜗牛&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;website&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://eallion.com/&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;image&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eallion.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;机会总是垂青于有准备的人。&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p>5.调整布局，设置友情链接为双栏：</p>
<p>修改根目录<code>/assets/scss/custom.scss</code></p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="comment">//友情链接双栏</span></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">min-width</span>: <span class="number">1024px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.article-list--compact</span><span class="selector-class">.links</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: grid;</span><br><span class="line">        <span class="attribute">grid-template-columns</span>: <span class="number">1</span>fr <span class="number">1</span>fr;</span><br><span class="line">        <span class="attribute">background</span>: none;</span><br><span class="line">        <span class="attribute">box-shadow</span>: none;</span><br><span class="line">        </span><br><span class="line">        <span class="selector-tag">article</span> &#123;</span><br><span class="line">            <span class="attribute">background</span>: <span class="built_in">var</span>(--card-background);</span><br><span class="line">            <span class="attribute">border</span>: none;</span><br><span class="line">            <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--shadow-l2);</span><br><span class="line">            <span class="attribute">margin-bottom</span>: <span class="number">8px</span>;</span><br><span class="line">            <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">            &amp;<span class="selector-pseudo">:nth-child</span>(odd) &#123;</span><br><span class="line">                <span class="attribute">margin-right</span>: <span class="number">8px</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="添加音乐短代码"><a href="#添加音乐短代码" class="headerlink" title="添加音乐短代码"></a>添加音乐短代码</h2><p>1.网站根目录新建文件<code>layouts\shortcodes\music.html</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;&#123;- $scratch := .Page.Scratch.Get &quot;scratch&quot; -&#125;&#125;</span><br><span class="line"><span class="comment">&lt;!-- require APlayer --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"><span class="selector-class">.dark-theme</span> <span class="selector-class">.aplayer</span>&#123;<span class="attribute">background</span>:<span class="number">#212121</span>&#125;<span class="selector-class">.dark-theme</span> <span class="selector-class">.aplayer</span><span class="selector-class">.aplayer-withlist</span> <span class="selector-class">.aplayer-info</span>&#123;<span class="attribute">border-bottom-color</span>:<span class="number">#5c5c5c</span>&#125;<span class="selector-class">.dark-theme</span> <span class="selector-class">.aplayer</span><span class="selector-class">.aplayer-fixed</span> <span class="selector-class">.aplayer-list</span>&#123;<span class="attribute">border-color</span>:<span class="number">#5c5c5c</span>&#125;<span class="selector-class">.dark-theme</span> <span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-body</span>&#123;<span class="attribute">background-color</span>:<span class="number">#212121</span>&#125;<span class="selector-class">.dark-theme</span> <span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-info</span>&#123;<span class="attribute">border-top-color</span>:<span class="number">#212121</span>&#125;<span class="selector-class">.dark-theme</span> <span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-info</span> <span class="selector-class">.aplayer-music</span> <span class="selector-class">.aplayer-title</span>&#123;<span class="attribute">color</span>:<span class="number">#fff</span>&#125;<span class="selector-class">.dark-theme</span> <span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-info</span> <span class="selector-class">.aplayer-music</span> <span class="selector-class">.aplayer-author</span>&#123;<span class="attribute">color</span>:<span class="number">#fff</span>&#125;<span class="selector-class">.dark-theme</span> <span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-info</span> <span class="selector-class">.aplayer-controller</span> <span class="selector-class">.aplayer-time</span>&#123;<span class="attribute">color</span>:<span class="number">#eee</span>&#125;<span class="selector-class">.dark-theme</span> <span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-info</span> <span class="selector-class">.aplayer-controller</span> <span class="selector-class">.aplayer-time</span> <span class="selector-class">.aplayer-icon</span> path&#123;fill:<span class="number">#eee</span>&#125;<span class="selector-class">.dark-theme</span> <span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-list</span>&#123;<span class="attribute">background-color</span>:<span class="number">#212121</span>&#125;<span class="selector-class">.dark-theme</span> <span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-list</span>::-webkit-scrollbar-thumb&#123;<span class="attribute">background-color</span>:<span class="number">#999</span>&#125;<span class="selector-class">.dark-theme</span> <span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-list</span>::-webkit-scrollbar-thumb:hover&#123;<span class="attribute">background-color</span>:<span class="number">#bbb</span>&#125;<span class="selector-class">.dark-theme</span> <span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-list</span> <span class="selector-tag">li</span>&#123;<span class="attribute">color</span>:<span class="number">#fff</span>;<span class="attribute">border-top-color</span>:<span class="number">#666</span>&#125;<span class="selector-class">.dark-theme</span> <span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-list</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span>&#123;<span class="attribute">background</span>:<span class="number">#4e4e4e</span>&#125;<span class="selector-class">.dark-theme</span> <span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-list</span> <span class="selector-tag">li</span><span class="selector-class">.aplayer-list-light</span>&#123;<span class="attribute">background</span>:<span class="number">#6c6c6c</span>&#125;<span class="selector-class">.dark-theme</span> <span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-list</span> <span class="selector-tag">li</span> <span class="selector-class">.aplayer-list-index</span>&#123;<span class="attribute">color</span>:<span class="number">#ddd</span>&#125;<span class="selector-class">.dark-theme</span> <span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-list</span> <span class="selector-tag">li</span> <span class="selector-class">.aplayer-list-author</span>&#123;<span class="attribute">color</span>:<span class="number">#ddd</span>&#125;<span class="selector-class">.dark-theme</span> <span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-lrc</span>&#123;<span class="attribute">text-shadow</span>:-<span class="number">1px</span> -<span class="number">1px</span> <span class="number">0</span> <span class="number">#666</span>&#125;<span class="selector-class">.dark-theme</span> <span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-lrc</span><span class="selector-pseudo">:before</span>&#123;<span class="attribute">background</span>:<span class="built_in">-moz-linear-gradient</span>(top, <span class="number">#212121</span> <span class="number">0%</span>, <span class="built_in">rgba</span>(<span class="number">33</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">0</span>) <span class="number">100%</span>);<span class="attribute">background</span>:<span class="built_in">-webkit-linear-gradient</span>(top, <span class="number">#212121</span> <span class="number">0%</span>, <span class="built_in">rgba</span>(<span class="number">33</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">0</span>) <span class="number">100%</span>);<span class="attribute">background</span>:<span class="built_in">linear-gradient</span>(to bottom, <span class="number">#212121</span> <span class="number">0%</span>, <span class="built_in">rgba</span>(<span class="number">33</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">0</span>) <span class="number">100%</span>);<span class="attribute">filter</span>:progid:DXImageTransform.Microsoft.<span class="built_in">gradient</span>( startColorstr=<span class="string">&#x27;#212121&#x27;</span>, endColorstr=<span class="string">&#x27;#00212121&#x27;</span>,GradientType=<span class="number">0</span> )&#125;<span class="selector-class">.dark-theme</span> <span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-lrc</span><span class="selector-pseudo">:after</span>&#123;<span class="attribute">background</span>:<span class="built_in">-moz-linear-gradient</span>(top, <span class="built_in">rgba</span>(<span class="number">33</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">0</span>) <span class="number">0%</span>, <span class="built_in">rgba</span>(<span class="number">33</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">0.8</span>) <span class="number">100%</span>);<span class="attribute">background</span>:<span class="built_in">-webkit-linear-gradient</span>(top, <span class="built_in">rgba</span>(<span class="number">33</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">0</span>) <span class="number">0%</span>, <span class="built_in">rgba</span>(<span class="number">33</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">0.8</span>) <span class="number">100%</span>);<span class="attribute">background</span>:<span class="built_in">linear-gradient</span>(to bottom, <span class="built_in">rgba</span>(<span class="number">33</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">0</span>) <span class="number">0%</span>, <span class="built_in">rgba</span>(<span class="number">33</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">0.8</span>) <span class="number">100%</span>);<span class="attribute">filter</span>:progid:DXImageTransform.Microsoft.<span class="built_in">gradient</span>( startColorstr=<span class="string">&#x27;#00212121&#x27;</span>, endColorstr=<span class="string">&#x27;#cc212121&#x27;</span>,GradientType=<span class="number">0</span> )&#125;<span class="selector-class">.dark-theme</span> <span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-lrc</span> <span class="selector-tag">p</span>&#123;<span class="attribute">color</span>:<span class="number">#fff</span>&#125;<span class="selector-class">.dark-theme</span> <span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-miniswitcher</span>&#123;<span class="attribute">background</span>:<span class="number">#484848</span>&#125;<span class="selector-class">.dark-theme</span> <span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-miniswitcher</span> <span class="selector-class">.aplayer-icon</span> path&#123;fill:<span class="number">#eee</span>&#125;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- require MetingJS --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/meting@2.0.1/dist/Meting.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&#123;&#123;- if .IsNamedParams -&#125;&#125;</span><br><span class="line">    &#123;&#123;- if .Get &quot;url&quot; -&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">meting-js</span> <span class="attr">url</span>=<span class="string">&quot;&#123;&#123; .Get `url` &#125;&#125;&quot;</span> <span class="attr">name</span>=<span class="string">&quot;&#123;&#123; .Get `name` &#125;&#125;&quot;</span> <span class="attr">artist</span>=<span class="string">&quot;&#123;&#123; .Get `artist` &#125;&#125;&quot;</span> <span class="attr">cover</span>=<span class="string">&quot;&#123;&#123; .Get `cover` &#125;&#125;&quot;</span> <span class="attr">theme</span>=<span class="string">&quot;&#123;&#123; .Get `theme` | default `#2980b9` &#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">        &#123;&#123;<span class="attr">-</span> <span class="attr">with</span> <span class="attr">.Get</span> &quot;<span class="attr">fixed</span>&quot; &#125;&#125; <span class="attr">fixed</span>=<span class="string">&quot;&#123;&#123; . &#125;&#125;&quot;</span>&#123;&#123; <span class="attr">end</span> <span class="attr">-</span>&#125;&#125;</span></span><br><span class="line"><span class="tag">        &#123;&#123;<span class="attr">-</span> <span class="attr">with</span> <span class="attr">.Get</span> &quot;<span class="attr">mini</span>&quot; &#125;&#125; <span class="attr">mini</span>=<span class="string">&quot;&#123;&#123; . &#125;&#125;&quot;</span>&#123;&#123; <span class="attr">end</span> <span class="attr">-</span>&#125;&#125;</span></span><br><span class="line"><span class="tag">        &#123;&#123;<span class="attr">-</span> <span class="attr">with</span> <span class="attr">.Get</span> &quot;<span class="attr">autoplay</span>&quot; &#125;&#125; <span class="attr">autoplay</span>=<span class="string">&quot;&#123;&#123; . &#125;&#125;&quot;</span>&#123;&#123; <span class="attr">end</span> <span class="attr">-</span>&#125;&#125;</span></span><br><span class="line"><span class="tag">        &#123;&#123;<span class="attr">-</span> <span class="attr">with</span> <span class="attr">.Get</span> &quot;<span class="attr">volume</span>&quot; &#125;&#125; <span class="attr">volume</span>=<span class="string">&quot;&#123;&#123; . &#125;&#125;&quot;</span>&#123;&#123; <span class="attr">end</span> <span class="attr">-</span>&#125;&#125;</span></span><br><span class="line"><span class="tag">        &#123;&#123;<span class="attr">-</span> <span class="attr">with</span> <span class="attr">.Get</span> &quot;<span class="attr">mutex</span>&quot; &#125;&#125; <span class="attr">mutex</span>=<span class="string">&quot;&#123;&#123; . &#125;&#125;&quot;</span>&#123;&#123; <span class="attr">end</span> <span class="attr">-</span>&#125;&#125;</span></span><br><span class="line"><span class="tag">        &gt;</span><span class="tag">&lt;/<span class="name">meting-js</span>&gt;</span></span><br><span class="line">    &#123;&#123;- else if .Get &quot;auto&quot; -&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">meting-js</span> <span class="attr">auto</span>=<span class="string">&quot;&#123;&#123; .Get `auto` &#125;&#125;&quot;</span> <span class="attr">theme</span>=<span class="string">&quot;&#123;&#123; .Get `theme` | default `#2980b9` &#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">        &#123;&#123;<span class="attr">-</span> <span class="attr">with</span> <span class="attr">.Get</span> &quot;<span class="attr">fixed</span>&quot; &#125;&#125; <span class="attr">fixed</span>=<span class="string">&quot;&#123;&#123; . &#125;&#125;&quot;</span>&#123;&#123; <span class="attr">end</span> <span class="attr">-</span>&#125;&#125;</span></span><br><span class="line"><span class="tag">        &#123;&#123;<span class="attr">-</span> <span class="attr">with</span> <span class="attr">.Get</span> &quot;<span class="attr">mini</span>&quot; &#125;&#125; <span class="attr">mini</span>=<span class="string">&quot;&#123;&#123; . &#125;&#125;&quot;</span>&#123;&#123; <span class="attr">end</span> <span class="attr">-</span>&#125;&#125;</span></span><br><span class="line"><span class="tag">        &#123;&#123;<span class="attr">-</span> <span class="attr">with</span> <span class="attr">.Get</span> &quot;<span class="attr">autoplay</span>&quot; &#125;&#125; <span class="attr">autoplay</span>=<span class="string">&quot;&#123;&#123; . &#125;&#125;&quot;</span>&#123;&#123; <span class="attr">end</span> <span class="attr">-</span>&#125;&#125;</span></span><br><span class="line"><span class="tag">        &#123;&#123;<span class="attr">-</span> <span class="attr">with</span> <span class="attr">.Get</span> &quot;<span class="attr">loop</span>&quot; &#125;&#125; <span class="attr">loop</span>=<span class="string">&quot;&#123;&#123; . &#125;&#125;&quot;</span>&#123;&#123; <span class="attr">end</span> <span class="attr">-</span>&#125;&#125;</span></span><br><span class="line"><span class="tag">        &#123;&#123;<span class="attr">-</span> <span class="attr">with</span> <span class="attr">.Get</span> &quot;<span class="attr">order</span>&quot; &#125;&#125; <span class="attr">order</span>=<span class="string">&quot;&#123;&#123; . &#125;&#125;&quot;</span>&#123;&#123; <span class="attr">end</span> <span class="attr">-</span>&#125;&#125;</span></span><br><span class="line"><span class="tag">        &#123;&#123;<span class="attr">-</span> <span class="attr">with</span> <span class="attr">.Get</span> &quot;<span class="attr">volume</span>&quot; &#125;&#125; <span class="attr">volume</span>=<span class="string">&quot;&#123;&#123; . &#125;&#125;&quot;</span>&#123;&#123; <span class="attr">end</span> <span class="attr">-</span>&#125;&#125;</span></span><br><span class="line"><span class="tag">        &#123;&#123;<span class="attr">-</span> <span class="attr">with</span> <span class="attr">.Get</span> &quot;<span class="attr">mutex</span>&quot; &#125;&#125; <span class="attr">mutex</span>=<span class="string">&quot;&#123;&#123; . &#125;&#125;&quot;</span>&#123;&#123; <span class="attr">end</span> <span class="attr">-</span>&#125;&#125;</span></span><br><span class="line"><span class="tag">        &#123;&#123;<span class="attr">-</span> <span class="attr">with</span> <span class="attr">.Get</span> &quot;<span class="attr">list-folded</span>&quot; &#125;&#125; <span class="attr">list-folded</span>=<span class="string">&quot;&#123;&#123; . &#125;&#125;&quot;</span>&#123;&#123; <span class="attr">end</span> <span class="attr">-</span>&#125;&#125;</span></span><br><span class="line"><span class="tag">        &#123;&#123;<span class="attr">-</span> <span class="attr">with</span> <span class="attr">.Get</span> &quot;<span class="attr">list-max-height</span>&quot; &#125;&#125; <span class="attr">list-max-height</span>=<span class="string">&quot;&#123;&#123; . &#125;&#125;&quot;</span>&#123;&#123; <span class="attr">end</span> <span class="attr">-</span>&#125;&#125;</span></span><br><span class="line"><span class="tag">        &gt;</span><span class="tag">&lt;/<span class="name">meting-js</span>&gt;</span></span><br><span class="line">    &#123;&#123;- else -&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">meting-js</span> <span class="attr">server</span>=<span class="string">&quot;&#123;&#123; .Get `server` &#125;&#125;&quot;</span> <span class="attr">type</span>=<span class="string">&quot;&#123;&#123; .Get `type` &#125;&#125;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&#123;&#123; .Get `id` &#125;&#125;&quot;</span> <span class="attr">theme</span>=<span class="string">&quot;&#123;&#123; .Get `theme` | default `#2980b9` &#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">        &#123;&#123;<span class="attr">-</span> <span class="attr">with</span> <span class="attr">.Get</span> &quot;<span class="attr">fixed</span>&quot; &#125;&#125; <span class="attr">fixed</span>=<span class="string">&quot;&#123;&#123; . &#125;&#125;&quot;</span>&#123;&#123; <span class="attr">end</span> <span class="attr">-</span>&#125;&#125;</span></span><br><span class="line"><span class="tag">        &#123;&#123;<span class="attr">-</span> <span class="attr">with</span> <span class="attr">.Get</span> &quot;<span class="attr">mini</span>&quot; &#125;&#125; <span class="attr">mini</span>=<span class="string">&quot;&#123;&#123; . &#125;&#125;&quot;</span>&#123;&#123; <span class="attr">end</span> <span class="attr">-</span>&#125;&#125;</span></span><br><span class="line"><span class="tag">        &#123;&#123;<span class="attr">-</span> <span class="attr">with</span> <span class="attr">.Get</span> &quot;<span class="attr">autoplay</span>&quot; &#125;&#125; <span class="attr">autoplay</span>=<span class="string">&quot;&#123;&#123; . &#125;&#125;&quot;</span>&#123;&#123; <span class="attr">end</span> <span class="attr">-</span>&#125;&#125;</span></span><br><span class="line"><span class="tag">        &#123;&#123;<span class="attr">-</span> <span class="attr">with</span> <span class="attr">.Get</span> &quot;<span class="attr">loop</span>&quot; &#125;&#125; <span class="attr">loop</span>=<span class="string">&quot;&#123;&#123; . &#125;&#125;&quot;</span>&#123;&#123; <span class="attr">end</span> <span class="attr">-</span>&#125;&#125;</span></span><br><span class="line"><span class="tag">        &#123;&#123;<span class="attr">-</span> <span class="attr">with</span> <span class="attr">.Get</span> &quot;<span class="attr">order</span>&quot; &#125;&#125; <span class="attr">order</span>=<span class="string">&quot;&#123;&#123; . &#125;&#125;&quot;</span>&#123;&#123; <span class="attr">end</span> <span class="attr">-</span>&#125;&#125;</span></span><br><span class="line"><span class="tag">        &#123;&#123;<span class="attr">-</span> <span class="attr">with</span> <span class="attr">.Get</span> &quot;<span class="attr">volume</span>&quot; &#125;&#125; <span class="attr">volume</span>=<span class="string">&quot;&#123;&#123; . &#125;&#125;&quot;</span>&#123;&#123; <span class="attr">end</span> <span class="attr">-</span>&#125;&#125;</span></span><br><span class="line"><span class="tag">        &#123;&#123;<span class="attr">-</span> <span class="attr">with</span> <span class="attr">.Get</span> &quot;<span class="attr">mutex</span>&quot; &#125;&#125; <span class="attr">mutex</span>=<span class="string">&quot;&#123;&#123; . &#125;&#125;&quot;</span>&#123;&#123; <span class="attr">end</span> <span class="attr">-</span>&#125;&#125;</span></span><br><span class="line"><span class="tag">        &#123;&#123;<span class="attr">-</span> <span class="attr">with</span> <span class="attr">.Get</span> &quot;<span class="attr">list-folded</span>&quot; &#125;&#125; <span class="attr">list-folded</span>=<span class="string">&quot;&#123;&#123; . &#125;&#125;&quot;</span>&#123;&#123; <span class="attr">end</span> <span class="attr">-</span>&#125;&#125;</span></span><br><span class="line"><span class="tag">        &#123;&#123;<span class="attr">-</span> <span class="attr">with</span> <span class="attr">.Get</span> &quot;<span class="attr">list-max-height</span>&quot; &#125;&#125; <span class="attr">list-max-height</span>=<span class="string">&quot;&#123;&#123; . &#125;&#125;&quot;</span>&#123;&#123; <span class="attr">end</span> <span class="attr">-</span>&#125;&#125;</span></span><br><span class="line"><span class="tag">        &gt;</span><span class="tag">&lt;/<span class="name">meting-js</span>&gt;</span></span><br><span class="line">    &#123;&#123;- end -&#125;&#125;</span><br><span class="line">&#123;&#123;- else if strings.HasSuffix (.Get 0) &quot;http&quot; -&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">meting-js</span> <span class="attr">auto</span>=<span class="string">&quot;&#123;&#123; .Get 0 &#125;&#125;&quot;</span> <span class="attr">theme</span>=<span class="string">&quot;#2980b9&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">meting-js</span>&gt;</span></span><br><span class="line">&#123;&#123;- else -&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">meting-js</span> <span class="attr">server</span>=<span class="string">&quot;&#123;&#123; .Get 0 &#125;&#125;&quot;</span> <span class="attr">type</span>=<span class="string">&quot;&#123;&#123; .Get 1 &#125;&#125;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&#123;&#123; .Get 2 &#125;&#125;&quot;</span> <span class="attr">theme</span>=<span class="string">&quot;#2980b9&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">meting-js</span>&gt;</span></span><br><span class="line">&#123;&#123;- end -&#125;&#125;</span><br><span class="line">&#123;&#123;- $scratch.Set &quot;music&quot; true -&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>2.添加歌曲列表（注意：去掉注释&#x2F;*  *&#x2F;）</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;&#123;/<span class="emphasis">* &lt; music auto=&quot;https://music.163.com/#/playlist?id=60198&quot;&gt; *</span>/&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>3.添加单曲（注意：去掉注释&#x2F;*  *&#x2F;）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;/* &lt; music server=&quot;netease&quot; type=&quot;song&quot; id=&quot;1868553&quot; &gt; */&#125;&#125;</span><br><span class="line">或者</span><br><span class="line">&#123;&#123;/* &lt; music netease song 1868553 &gt; */&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>4.其它参数</p>
<p><code>music</code> shortcode 有一些可以应用于以上三种方式的其它命名参数:</p>
<ul>
<li><p><strong>autoplay</strong> <em>[可选]</em></p>
<p>是否自动播放音乐, 默认值是 <code>false</code>.</p>
</li>
</ul>
<h2 id="更改分类、标签、页面显示中文"><a href="#更改分类、标签、页面显示中文" class="headerlink" title="更改分类、标签、页面显示中文"></a>更改分类、标签、页面显示中文</h2><ol>
<li><code>content</code>目录下新建<code>categories\_index.md</code>:</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">&quot;分类&quot;</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li><code>content</code>目录下新建<code>tags\_index.md</code>:</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">&quot;标签&quot;</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>根目录<code>\i18n\zh-CN.yaml</code>输入：</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">list:</span></span><br><span class="line">    <span class="attr">page:</span></span><br><span class="line">        <span class="attr">one:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; .Count &#125;&#125;</span> 页面&quot;</span></span><br><span class="line">        <span class="attr">other:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; .Count &#125;&#125;</span> 页面&quot;</span></span><br></pre></td></tr></table></figure>

<p>最终根目录<code>\i18n\zh-CN.yaml</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">list:</span></span><br><span class="line">    <span class="attr">page:</span></span><br><span class="line">        <span class="attr">one:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; .Count &#125;&#125;</span> 页面&quot;</span></span><br><span class="line">        <span class="attr">other:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; .Count &#125;&#125;</span> 页面&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">widget:</span></span><br><span class="line">    <span class="attr">categoriesCloud:</span></span><br><span class="line">        <span class="attr">title:</span> </span><br><span class="line">            <span class="attr">other:</span> <span class="string">分类</span></span><br></pre></td></tr></table></figure>

<h2 id="附：使用Git-Submodule管理Hugo主题"><a href="#附：使用Git-Submodule管理Hugo主题" class="headerlink" title="附：使用Git Submodule管理Hugo主题"></a>附：使用Git Submodule管理Hugo主题</h2><ul>
<li>如果克隆库的时候要初始化子模块，请加上 <code>--recursive</code> 参数，如：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b develop git@github.com:iwyang/iwyang.github.io.git blog --recursive</span><br></pre></td></tr></table></figure>

<ul>
<li>如果已经克隆了主库但没初始化子模块，则用：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git submodule update --init --recursive</span><br></pre></td></tr></table></figure>

<ul>
<li>如果已经克隆并初始化子模块，而需要从子模块的源更新这个子模块，则：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git submodule update --recursive --remote</span><br></pre></td></tr></table></figure>

<p>更新之后主库的 git 差异中会显示新的 SHA 码，把这个差异选中提交即可。</p>
<hr>
<ul>
<li>其他命令：在主仓库更新所有子模块：<code>git submodule foreach git pull origin master</code></li>
</ul>
<h2 id="附：hugo注释"><a href="#附：hugo注释" class="headerlink" title="附：hugo注释"></a>附：hugo注释</h2><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line">&#123;&#123;<span class="string">/*</span> <span class="string">comment</span> <span class="string">*/</span>&#125;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><p><a href="https://docs.stack.jimmycai.com/zh/">Hugo 主题 Stack文档</a></p>
</li>
<li><p><a href="https://github.com/CaiJimmy/hugo-theme-stack/issues/169">Adding the widget tag-cloud for “categories”, on the right content region on Homepage</a></p>
</li>
<li><p><a href="https://github.com/vinceying/Vince-blog">vinceying&#x2F;Vince-blog-https://i.vince.pub/</a></p>
</li>
<li><p><a href="https://immmmm.com/hugo-shortcodes-music/">hugo音乐短代码</a></p>
</li>
<li><p><a href="https://hugodoit.pages.dev/zh-cn/theme-documentation-extended-shortcodes/#8-music">主题文档 - 扩展 Shortcodes-music</a></p>
</li>
<li><p><a href="https://hugo.aiaide.com/post/hugo%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/#%E6%B3%A8%E9%87%8A">Hugo模板的基本语法-注释</a></p>
</li>
<li><p><a href="https://mantyke.icu/2022/stack-theme-furnish03/">Hugo | 第三篇 Stack 主题装修记录，堂堂再临！</a></p>
</li>
<li><p><a href="https://blog.yfei.page/cn/2021/03/lastmod-hugo/">自动添加博客页面更新日期</a></p>
</li>
<li><p><a href="https://mantyke.icu/2021/f9f0ec87/">Hugo | 看中 Stack 主题的归档功能，搬家并做修改</a></p>
</li>
<li><p><a href="https://kingpo.vercel.app/posts/202208/hugo-github-action%E5%92%8Cvecel%E9%83%A8%E7%BD%B2%E5%90%8E%E6%96%87%E7%AB%A0%E6%9B%B4%E6%96%B0%E6%97%B6%E9%97%B4%E5%BC%82%E5%B8%B8%E4%BF%AE%E5%A4%8D/#">hugo github action|vecel 部署后文章更新时间异常修复</a></p>
</li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>hugo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hugo迁移笔记</title>
    <url>/archives/c3be6469/</url>
    <content><![CDATA[<p>最好首先克隆<code>github</code>上的源码。</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">git clone <span class="literal">-b</span> develop git@github.com:iwyang/hugo.git hugo <span class="literal">--recursive</span></span><br></pre></td></tr></table></figure>

<p> 首先当然是备份博客源文件。</p>
<h2 id="更换服务器"><a href="#更换服务器" class="headerlink" title="更换服务器"></a>更换服务器</h2><p>参考：</p>
<ul>
<li><a href="https://iwyang.gitee.io/post/hugo-install-on-centos/#%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%93%8D%E4%BD%9C">Hugo部署到centos —服务器操作部分</a></li>
<li><a href="https://iwyang.gitee.io/post/hugo-install-on-ubuntu/#%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%93%8D%E4%BD%9C">Hugo部署到ubuntu —服务器操作部分</a></li>
</ul>
<h2 id="更换电脑、重装系统"><a href="#更换电脑、重装系统" class="headerlink" title="更换电脑、重装系统"></a>更换电脑、重装系统</h2><h3 id="本地操作"><a href="#本地操作" class="headerlink" title="本地操作"></a>本地操作</h3><p>参考：<a href="https://bore.vip/post/hugo-install-on-coding/#%E6%9C%AC%E5%9C%B0%E6%93%8D%E4%BD%9C">hugo部署到coding—本地操作部分</a>，重新配置环境，生成公钥。</p>
<p><strong>注意最后不用初始化hugo，因为我们已经有了博客原文件了</strong>。</p>
<h3 id="服务器上的操作"><a href="#服务器上的操作" class="headerlink" title="服务器上的操作"></a>服务器上的操作</h3><p>如果是部署到服务器，先将服务器原来的SSH 公钥先删除，再上传新的SSH 公钥。具体操作如下:</p>
<p>服务器上输入：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">su git</span><br><span class="line"><span class="built_in">cd</span> ~/.ssh</span><br><span class="line"><span class="built_in">rm</span> -rf authorized_keys</span><br></pre></td></tr></table></figure>

<p>本地Git Bash里输入：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">ssh-copy-id -i ~<span class="regexp">/.ssh/i</span>d_rsa.<span class="property">pub</span> git@服务器ip地址</span><br></pre></td></tr></table></figure>

<p>如果在git bash中输入ssh git@服务器的IP地址,能够远程登录的话，则表示设置成功了。如若还是要输入密码，就修改目录权限：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">chmod <span class="number">600</span> ~<span class="regexp">/.ssh/</span>authorized_keys</span><br><span class="line">chmod <span class="number">700</span> ~/.<span class="property">ssh</span></span><br></pre></td></tr></table></figure>

<h3 id="github-amp-gitee上的操作"><a href="#github-amp-gitee上的操作" class="headerlink" title="github&amp;gitee上的操作"></a>github&amp;gitee上的操作</h3><p>如果是备份源码到githuhb上，部署网页到gitee上，要将重新生成的SSH公钥添加到github&amp;gitee上。两者都在右上角<code>个人设置里添加</code>。</p>
<h3 id="还原源码"><a href="#还原源码" class="headerlink" title="还原源码"></a>还原源码</h3><p><del>重装系统后，Algolia的自动提交索引功能要重新部署一遍，具体可查看：<a href="https://bore.vip/hugo-theme-loveit-algolia/">Hugo添加Algolia</a>。最后还要在博客目录里重新关联远程仓库，还是一样先备份源码到github，再部署网页到相应服务器。</del></p>
<p><del><strong>先备份源码，再部署网页，是为了<code>GitInfo</code>以及<code>lastmod</code>能够生效和更新</strong>，其实源码可以备份到github、gitee、coding中任意一个公开仓库都可以，当然备份到github最好。网页也无需和源码放在同一个代码托管平台上。</del></p>
<p>2022.3.4  如果使用<code>Git Submodule</code>子模块管理Hugo主题，将源码克隆到本地，使用下面这条命令才能将主题一同克隆到本地。</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">git clone <span class="literal">-b</span> develop git@github.com:iwyang/hugo.git hugo <span class="literal">--recursive</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>hugo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hugo部署到centos服务器</title>
    <url>/archives/99e0f84a/</url>
    <content><![CDATA[<p> 服务器环境：Centos 8 x64</p>
<p>本地环境：Win10 x64</p>
<h2 id="本地操作"><a href="#本地操作" class="headerlink" title="本地操作"></a>本地操作</h2><p>参考：<a href="https://bore.vip/hugo-install-on-coding-and-gitee/#1-%E6%9C%AC%E5%9C%B0%E6%93%8D%E4%BD%9C">hugo部署到coding&amp;gitee-本地操作部分</a></p>
<h2 id="服务器操作"><a href="#服务器操作" class="headerlink" title="服务器操作"></a>服务器操作</h2><blockquote>
<p><strong>注意：这里是参照服务器搭建hexo，所以代码里hexo没有改成hugo，不过这没有任何影响</strong>。</p>
</blockquote>
<p>准备工作：如果服务器端口不是22，先要更改SSH端口，</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/ssh/sshd_config</span><br><span class="line">port 22</span><br></pre></td></tr></table></figure>

<p>然后重启生效。</p>
<p>首先，在服务器上安装 Git 和 nginx。</p>
<div class="note primary">2021.5.27 注意最好不要执行下面第一步升级操作，不然升级到最后一步会卡死，最后导致后面无法启动nginx。</div>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum update -y</span><br><span class="line">yum install git-core nginx -y</span><br></pre></td></tr></table></figure>

<p>如果是centos 7，先要安装安装epel：<code>yum install epel-release</code>，才能安装nginx。</p>
<p>Nginx 安装完成后需要手动启动，启动Nginx并设置开机自启：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl start nginx</span><br><span class="line">systemctl <span class="built_in">enable</span> nginx</span><br></pre></td></tr></table></figure>

<p>如果开启了防火墙，记得添加 HTTP 和 HTTPS 端口到防火墙允许列表。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">firewall-cmd --permanent --zone=public --add-service=http </span><br><span class="line">firewall-cmd --permanent --zone=public --add-service=https</span><br><span class="line">firewall-cmd --reload</span><br><span class="line">systemctl restart firewalld.service</span><br></pre></td></tr></table></figure>

<p>配置完成后，访问使用浏览器服务器 ip ，如果能看到以下界面，表示运行成功。</p>
<h3 id="配置用户"><a href="#配置用户" class="headerlink" title="配置用户"></a>配置用户</h3><p>然后新增一个名为 git 的用户，过程中需要设置登录密码，输入两次密码即可。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">adduser git</span><br><span class="line">passwd git</span><br></pre></td></tr></table></figure>

<p>给用户 <code>git</code> 赋予无需密码操作的权限（否则到后面 Hexo 部署的时候会提示无权限）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 740 /etc/sudoers</span><br><span class="line">vi /etc/sudoers</span><br></pre></td></tr></table></figure>

<p>在图示位置<code>root ALL=(ALL:ALL) ALL</code>的下方添加</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git ALL=(ALL:ALL) ALL</span><br></pre></td></tr></table></figure>

<p>然后保存。然后更改读写权限。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 440 /etc/sudoers</span><br></pre></td></tr></table></figure>

<h3 id="上传-SSH-公钥"><a href="#上传-SSH-公钥" class="headerlink" title="上传 SSH 公钥"></a>上传 SSH 公钥</h3><p>接下来要把本地的 ssh 公钥上传到服务器 。执行</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">su git</span><br><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line"><span class="built_in">mkdir</span> .ssh &amp;&amp; <span class="built_in">cd</span> .ssh</span><br><span class="line"><span class="built_in">touch</span> authorized_keys</span><br><span class="line">vi authorized_keys</span><br></pre></td></tr></table></figure>

<p>现在要打开本地的 <code>Git Bash</code>，输入<code>vi ~/.ssh/id_rsa.pub</code>，把里面的内容复制下来粘贴到上面打开的文件里。</p>
<p>接着把ssh目录设置为只有属主有读、写、执行权限。代码如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 600 ~/.ssh/authorized_keys</span><br><span class="line"><span class="built_in">chmod</span> 700 ~/.ssh</span><br></pre></td></tr></table></figure>

<p>然后建立放部署的网页的 Git 库。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line"><span class="built_in">mkdir</span> hexo.git &amp;&amp; <span class="built_in">cd</span> hexo.git</span><br><span class="line">git init --bare</span><br></pre></td></tr></table></figure>

<p>测试一下，如果在 Git Bash 中输入 <code>ssh git@服务器的IP地址</code> 能够远程登录的话，则表示设置成功了。如果你的服务器端口不是22。最好像开头那样更改SSH端口。也可以参考：<a href="https://bore.vip/post/hugo-install-on-ubuntu-%E6%9C%8D%E5%8A%A1%E5%99%A8/#%E4%B8%8A%E4%BC%A0-ssh-%E5%85%AC%E9%92%A5">上传SSH公钥</a>。</p>
<hr>
<p>ps: 如果配置完成还是提示要输入密码，可以使用 <code>ssh-copy-id</code>，在本地打开 Git Bash 输入：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh-copy-id -i ~/.ssh/id_rsa.pub git@服务器ip地址</span><br></pre></td></tr></table></figure>

<hr>
<p>登录成功会提示：</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> ssh git@<span class="number">104.224</span>.<span class="number">191.88</span></span><br><span class="line">Last login: Sat Feb <span class="number">26</span> <span class="number">02</span>:<span class="number">33</span>:<span class="number">30</span> <span class="number">2022</span> from <span class="number">171.81</span>.<span class="number">158.144</span></span><br><span class="line">[<span class="type">git</span>@<span class="type">special</span>-<span class="type">beep</span>-<span class="number">1</span> ~]<span class="variable">$</span></span><br></pre></td></tr></table></figure>

<h3 id="用户授权"><a href="#用户授权" class="headerlink" title="用户授权"></a>用户授权</h3><p>接下来要给用户 git 授予操作 nginx 放网页的地方的权限：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">su</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /var/www/hexo</span><br><span class="line"><span class="built_in">chown</span> git:git -R /var/www/hexo</span><br></pre></td></tr></table></figure>

<h3 id="配置钩子"><a href="#配置钩子" class="headerlink" title="配置钩子"></a>配置钩子</h3><p>现在就要向 Git Hooks 操作，配置好钩子：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">su git</span><br><span class="line"><span class="built_in">cd</span> /home/git/hexo.git/hooks</span><br><span class="line">vi post-receive</span><br></pre></td></tr></table></figure>

<p>输入内容并保存：（里面的路径看着换吧，上面的命令没改的话也不用换）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">GIT_REPO=/home/git/hexo.git</span><br><span class="line">TMP_GIT_CLONE=/tmp/hexo</span><br><span class="line">PUBLIC_WWW=/var/www/hexo</span><br><span class="line"><span class="built_in">rm</span> -rf <span class="variable">$&#123;TMP_GIT_CLONE&#125;</span></span><br><span class="line">git <span class="built_in">clone</span> <span class="variable">$GIT_REPO</span> <span class="variable">$TMP_GIT_CLONE</span></span><br><span class="line"><span class="built_in">rm</span> -rf <span class="variable">$&#123;PUBLIC_WWW&#125;</span>/*</span><br><span class="line"><span class="built_in">cp</span> -rf <span class="variable">$&#123;TMP_GIT_CLONE&#125;</span>/* <span class="variable">$&#123;PUBLIC_WWW&#125;</span></span><br></pre></td></tr></table></figure>

<p>赋予可执行权限：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x post-receive</span><br></pre></td></tr></table></figure>

<h3 id="配置-nginx"><a href="#配置-nginx" class="headerlink" title="配置 nginx"></a>配置 nginx</h3><p>然后是配置 nginx。执行</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">su</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/nginx/conf.d/hexo.conf</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">  listen  80 ;</span><br><span class="line">  listen [::]:80;</span><br><span class="line">  root /var/www/hexo;</span><br><span class="line">  server_name bore.vip www.bore.vip;</span><br><span class="line">  access_log  /var/log/nginx/hexo_access.log;</span><br><span class="line">  error_log   /var/log/nginx/hexo_error.log;</span><br><span class="line">  error_page 404 =  /404.html;</span><br><span class="line">  location ~* ^.+\.(ico|gif|jpg|jpeg|png)$ &#123;</span><br><span class="line">    root /var/www/hexo;</span><br><span class="line">    access_log   off;</span><br><span class="line">    expires      1d;</span><br><span class="line">  &#125;</span><br><span class="line">  location ~* ^.+\.(css|js|txt|xml|swf|wav)$ &#123;</span><br><span class="line">    root /var/www/hexo;</span><br><span class="line">    access_log   off;</span><br><span class="line">    expires      10m;</span><br><span class="line">  &#125;</span><br><span class="line">  location / &#123;</span><br><span class="line">    root /var/www/hexo;</span><br><span class="line">    <span class="keyword">if</span> (-f <span class="variable">$request_filename</span>) &#123;</span><br><span class="line">    rewrite ^/(.*)$  /<span class="variable">$1</span> <span class="built_in">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  location /nginx_status &#123;</span><br><span class="line">    stub_status on;</span><br><span class="line">    access_log off;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>因为放中文进去会乱码所以就不在里面注释了。代码里面配置了默认的根目录，绑定了域名，并且自定义了 404 页面的路径。<br>最后就重启 nginx 服务器：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl restart nginx</span><br></pre></td></tr></table></figure>

<hr>
<p>如果上传网页后，Nginx 出现 403 Forbidden，执行：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/selinux/config</span><br></pre></td></tr></table></figure>

<p>将SELINUX&#x3D;enforcing 修改为 SELINUX&#x3D;disabled 状态。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELINUX=disabled</span><br></pre></td></tr></table></figure>

<p>重启生效，reboot。</p>
<hr>
<p>ps: 最好做一个301跳转，把bore.vip和<code>www.bore.vip</code>合并，并把之前的域名也一并合并. 有两种实现方法,第一种方法是判断nginx核心变量host(老版本是http_host)：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">server_name bore.vip www.bore.vip ;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$host</span> != <span class="string">&#x27;bore.vip&#x27;</span> ) &#123;</span><br><span class="line">rewrite ^/(.*)$ http://bore.vip/<span class="variable">$1</span> permanent;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="修改自动部署脚本"><a href="#修改自动部署脚本" class="headerlink" title="修改自动部署脚本"></a>修改自动部署脚本</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[0;32mDeploying updates to Coding...\033[0m&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Removing existing files</span></span><br><span class="line"><span class="built_in">rm</span> -rf public/*</span><br><span class="line"><span class="comment"># Build the project</span></span><br><span class="line">hugo</span><br><span class="line"><span class="comment"># Go To Public folder</span></span><br><span class="line"><span class="built_in">cd</span> public</span><br><span class="line">git remote <span class="built_in">rm</span> origin</span><br><span class="line">git init</span><br><span class="line">git remote add origin git@你的ip:hexo.git</span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line"><span class="comment"># Commit changes.</span></span><br><span class="line">msg=<span class="string">&quot;rebuilding site `date`&quot;</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> -eq 1 ]</span><br><span class="line">  <span class="keyword">then</span> msg=<span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">git commit -m <span class="string">&quot;<span class="variable">$msg</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Push source and build repos.</span></span><br><span class="line">git push origin master --force</span><br><span class="line"></span><br><span class="line"><span class="comment"># Come Back up to the Project Root</span></span><br><span class="line"><span class="built_in">cd</span> ..</span><br></pre></td></tr></table></figure>

<p>或直接在<code>Git Bash</code>中手动运行以下代码：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">rm</span> -rf public/*</span><br><span class="line">hugo</span><br><span class="line"><span class="built_in">cd</span> public</span><br><span class="line">git remote <span class="built_in">rm</span> origin</span><br><span class="line">git init</span><br><span class="line">git remote add origin git@104.224.191.88:hexo.git</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;building site&quot;</span></span><br><span class="line">git push origin master --force</span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>最好不要反复切换部署仓库，否则git会出现以下错误提示：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">remote: error: The last gc run reported the following. Please correct the root cause</span><br><span class="line">remote: and remove gc.log.</span><br><span class="line">remote: Automatic cleanup will not be performed until the file is removed.</span><br><span class="line">remote:</span><br><span class="line">remote: warning: There are too many unreachable loose objects; run <span class="string">&#x27;git prune&#x27;</span> to remove them.</span><br></pre></td></tr></table></figure>

<p>查资料，原来是自己本地一些 “悬空对象”太多(git删除分支或者清空stash的时候，这些其实还没有真正删除，成为悬空对象，我们可以使用merge命令可以从中恢复一些文件)</p>
<p>解决方法：</p>
<p>1.输入命令：<code>git fsck --lost-found</code>，可以看到好多“dangling commit”</p>
<p>2.清空他们：<code>git gc --prune=now</code>，完成</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://tiktoking.github.io/2016/01/26/hexo/#">1.在服务器上搭建hexo博客，利用git更新</a></li>
<li><a href="https://eliyar.biz/how_to_build_hexo_blog/">2.从 0 开始搭建 hexo 博客</a></li>
<li><a href="https://segmentfault.com/a/1190000012907499">3.基于CentOS搭建Hexo博客</a></li>
<li><a href="https://blog.csdn.net/qq_35843543/article/details/81561240">4.Nginx出现403 forbidden</a></li>
<li><a href="https://blog.csdn.net/persist_xyz/article/details/88619036">5.git运行突然提示 remote: error: The last gc run reported the following</a></li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>服务器</tag>
        <tag>hugo</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx开启目录浏览</title>
    <url>/archives/d3052efc/</url>
    <content><![CDATA[<p> 系统为centos8</p>
<p> Nginx默认目录：<code>/usr/share/nginx/html</code></p>
<p>Nginx主要配置文件：<code>/etc/nginx/nginx.conf</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure>

<p>将下面几行配置文件加入nginx配置的server段内：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">autoindex on;                        </span><br><span class="line">autoindex_exact_size off;            </span><br><span class="line">autoindex_localtime on;              </span><br><span class="line">charset utf-8,gbk;</span><br></pre></td></tr></table></figure>

<p>重启nginx服务：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl restart nginx</span><br></pre></td></tr></table></figure>

<p>参考链接：<a href="http://www.cppcns.com/os/linux/289324.html">centos8自定义目录安装nginx</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>Memos部署记录</title>
    <url>/archives/d5e37958/</url>
    <content><![CDATA[<blockquote>
<p>Memos是什么：一个开源的、支持私有化部署的碎片化知识卡片管理工具。可以说是支持 Docker 自部署的 flomo</p>
<p>官网：<a href="https://usememos.com/">https://usememos.com/</a></p>
<p>仓库地址：<a href="https://github.com/usememos/memos">https://github.com/usememos/memos</a></p>
</blockquote>
<h2 id="Docker部署"><a href="#Docker部署" class="headerlink" title="Docker部署"></a>Docker部署</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker run -d --name memos -p 5230:5230 -v ~/.memos/:/var/opt/memos neosmemo/memos:latest</span><br></pre></td></tr></table></figure>

<h2 id="Docker-Compose部署"><a href="#Docker-Compose部署" class="headerlink" title="Docker Compose部署"></a>Docker Compose部署</h2><p>1.创建 Memos 工作目录</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mkdir memos &amp;&amp; cd memos</span><br><span class="line">vi docker-compose.yaml</span><br></pre></td></tr></table></figure>

<p>2.编写 <code>docker-compose.yaml</code> 文件：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.0&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">memos:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">neosmemo/memos:latest</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span> </span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">memos</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">~/.memos/:/var/opt/memos</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">5230</span><span class="string">:5230</span></span><br></pre></td></tr></table></figure>

<p>更多参考：<a href="https://github.com/usememos/memos/blob/main/docker-compose.yaml"><code>docker-compose.yaml</code></a></p>
<p>3.执行命令，<code>Memos</code> 后端程序将运行在 <code>http://localhost:端口号</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure>

<p>通过访问 <code>localhost:5230</code> 即可打开 Memos，首次安装会提示注册用户，请记牢您的而密码。数据文件默认存储在 <strong><code>~/.memos</code></strong> 中。</p>
<blockquote>
<p>PS：如果使用vultr，注意由于默认vultr什么端口都没有开放，安装后要记得要开放5230端口：</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">iptables -I INPUT -p tcp --dport 5230 -j ACCEPT</span><br></pre></td></tr></table></figure>

<p>4.<strong>更新</strong>。删除现有容器，拉取最新镜像，然后重新创建容器即可。</p>
<p><strong>Docker Compose</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd memos</span><br><span class="line">docker-compose down  </span><br><span class="line">docker-compose pull</span><br><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure>

<blockquote>
<p>可选命令：</p>
<p><code>cp -r /root/.memos /root/.memos.archive</code>  事先备份，以防万一（将<code>/root/.memos</code>文件夹下的数据库复制到<code>/root/.memos.archive</code>文件夹下）</p>
<p><code>docker image prune </code> 用来删除不再使用的 docker 对象。删除所有未被 tag 标记和未被容器使用的镜像</p>
<p>提示：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">WARNING! This will remove all dangling images.</span><br><span class="line">Are you sure you want to continue? [y/N] </span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>Docker</strong></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">docker</span> <span class="string">stop</span> <span class="string">memos</span></span><br><span class="line"></span><br><span class="line"><span class="string">docker</span> <span class="string">rm</span> <span class="string">-f</span> <span class="string">memos</span></span><br><span class="line"></span><br><span class="line"><span class="string">cp</span> <span class="string">-r</span> <span class="string">/root/data/docker_data/memos/.memos</span> <span class="string">/root/data/docker_data/memos/.memos.archive</span>  <span class="comment"># 万事先备份，以防万一</span></span><br><span class="line"></span><br><span class="line"><span class="string">docker</span> <span class="string">pull</span> <span class="string">neosmemo/memos:latest</span>  <span class="comment"># 拉取最新镜像</span></span><br><span class="line"></span><br><span class="line"><span class="string">docker</span> <span class="string">run</span> <span class="string">-it</span> <span class="string">-d</span> <span class="string">\</span></span><br><span class="line">  <span class="string">--name</span> <span class="string">memos</span> <span class="string">\</span></span><br><span class="line">  <span class="string">--publish</span> <span class="number">5230</span><span class="string">:5230</span> <span class="string">\</span></span><br><span class="line">  <span class="string">--volume</span> <span class="string">/root/data/docker_data/memos/.memos/:/var/opt/memos</span> <span class="string">\</span></span><br><span class="line">  <span class="string">neosmemo/memos:latest</span> <span class="string">\</span></span><br><span class="line">  <span class="string">--mode</span> <span class="string">prod</span> <span class="string">\</span></span><br><span class="line">  <span class="string">--port</span> <span class="number">5230</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>/root/data/docker_data/memos/.memos/</code>这个可以换成你自己服务器的路径；</p>
</blockquote>
<p>5.卸载</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker stop memos</span><br><span class="line"></span><br><span class="line">docker rm -f memos  # 停止容器，此时不会删除映射到本地的数据</span><br><span class="line"></span><br><span class="line">rm -rf /root/data/docker_data/memos  # 完全删除映射到本地的数据</span><br></pre></td></tr></table></figure>

<p>6.一些 Docker Compose 常用命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker-compose restart  # 重启容器</span><br><span class="line">docker-compose stop     # 暂停容器</span><br><span class="line">docker-compose down     # 删除容器</span><br><span class="line">docker-compose pull     # 更新镜像</span><br><span class="line">docker-compose exec artalk bash # 进入容器</span><br></pre></td></tr></table></figure>

<h2 id="配置域名访问"><a href="#配置域名访问" class="headerlink" title="配置域名访问"></a>配置域名访问</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vi /etc/nginx/conf.d/memos.conf</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">server</span><br><span class="line">&#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  server_name me.bore.vip;</span><br><span class="line">  </span><br><span class="line">  <span class="comment"># proxy to 5230</span></span><br><span class="line">  location / &#123;</span><br><span class="line">    proxy_pass http://127.0.0.1:5230;</span><br><span class="line">    proxy_set_header Host <span class="variable">$host</span>;</span><br><span class="line">    proxy_set_header X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">    proxy_set_header X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">    proxy_set_header X-Forwarded-Proto <span class="variable">$scheme</span>;</span><br><span class="line">    proxy_set_header REMOTE-HOST <span class="variable">$remote_addr</span>;</span><br><span class="line">    add_header X-Cache <span class="variable">$upstream_cache_status</span>;</span><br><span class="line">    <span class="comment"># cache</span></span><br><span class="line">    add_header Cache-Control no-cache;</span><br><span class="line">    expires 12h;</span><br><span class="line">  &#125;</span><br><span class="line">  location ^~ /.well-known/acme-challenge/ &#123;</span><br><span class="line">    default_type <span class="string">&quot;text/plain&quot;</span>;</span><br><span class="line">    allow all;</span><br><span class="line">    root /data/wwwroot/me.bore.vip/;</span><br><span class="line">  &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>重启Nginx：<code>systemctl restart nginx</code></p>
<h2 id="申请SSL证书"><a href="#申请SSL证书" class="headerlink" title="申请SSL证书"></a>申请SSL证书</h2><p>参考：<a href="/archives/58fed3fc/#Debian10%E4%B8%8A%E7%9A%84%E6%93%8D%E4%BD%9C">Nginx 配置 ssl 证书</a></p>
<p>1.新建文件夹：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mkdir -p /data/wwwroot/me.bore.vip</span><br></pre></td></tr></table></figure>

<p>2.申请证书</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt-get install letsencrypt -y</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">certbot certonly --webroot -w /data/wwwroot/me.bore.vip -d me.bore.vip -m 455343442@qq.com --agree-tos</span><br></pre></td></tr></table></figure>

<p>3.编辑 Nginx</p>
<p><strong>（1）未启用端口复用：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vi /etc/nginx/conf.d/memos.conf</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">server</span><br><span class="line">&#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  listen 443 ssl http2;</span><br><span class="line">  server_name me.bore.vip;</span><br><span class="line">  root /data/wwwroot/me.bore.vip;</span><br><span class="line"></span><br><span class="line">  # SSL setting</span><br><span class="line">  ssl_certificate /etc/letsencrypt/live/me.bore.vip/fullchain.pem;</span><br><span class="line">  ssl_certificate_key /etc/letsencrypt/live/me.bore.vip/privkey.pem;</span><br><span class="line">  ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;</span><br><span class="line">  ssl_ciphers EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;</span><br><span class="line">  ssl_prefer_server_ciphers on;</span><br><span class="line">  ssl_session_cache shared:SSL:10m;</span><br><span class="line">  ssl_session_timeout 10m;</span><br><span class="line">  add_header Strict-Transport-Security &quot;max-age=31536000&quot;;</span><br><span class="line"></span><br><span class="line">  # proxy to 5230</span><br><span class="line">  location / &#123;</span><br><span class="line">    proxy_pass http://127.0.0.1:5230;</span><br><span class="line">    proxy_set_header Host $host;</span><br><span class="line">    proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">    proxy_set_header X-Forwarded-Proto $scheme;</span><br><span class="line">    proxy_set_header REMOTE-HOST $remote_addr;</span><br><span class="line">    add_header X-Cache $upstream_cache_status;</span><br><span class="line">    # cache</span><br><span class="line">    add_header Cache-Control no-cache;</span><br><span class="line">    expires 12h;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  location ^~ /.well-known/acme-challenge/ &#123;</span><br><span class="line">    default_type &quot;text/plain&quot;;</span><br><span class="line">    allow all;</span><br><span class="line">    root /data/wwwroot/me.bore.vip/;</span><br><span class="line">  &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>（2）启用端口复用：</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">server</span><br><span class="line">&#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  listen 127.0.0.1:1314 ssl http2 proxy_protocol;</span><br><span class="line">  set_real_ip_from 127.0.0.1;</span><br><span class="line">  real_ip_header proxy_protocol; </span><br><span class="line">  port_in_redirect off;  </span><br><span class="line">  server_name me.bore.vip;</span><br><span class="line">  root /data/wwwroot/me.bore.vip;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable">$host</span> != <span class="string">&#x27;me.bore.vip&#x27;</span> ) &#123;</span><br><span class="line">      rewrite ^/(.*)$ https://me.bore.vip/<span class="variable">$1</span> permanent;</span><br><span class="line">  &#125;  </span><br><span class="line"></span><br><span class="line">  <span class="comment"># SSL setting</span></span><br><span class="line">  ssl_certificate /etc/letsencrypt/live/me.bore.vip/fullchain.pem;</span><br><span class="line">  ssl_certificate_key /etc/letsencrypt/live/me.bore.vip/privkey.pem;</span><br><span class="line">  ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;</span><br><span class="line">  ssl_ciphers EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;</span><br><span class="line">  ssl_prefer_server_ciphers on;</span><br><span class="line">  ssl_session_cache shared:SSL:10m;</span><br><span class="line">  ssl_session_timeout 10m;</span><br><span class="line">  add_header Strict-Transport-Security <span class="string">&quot;max-age=31536000&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment"># proxy to 5230</span></span><br><span class="line">  location / &#123;</span><br><span class="line">    proxy_pass http://127.0.0.1:5230;</span><br><span class="line">    proxy_set_header Host <span class="variable">$host</span>;</span><br><span class="line">    proxy_set_header X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">    proxy_set_header X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">    proxy_set_header X-Forwarded-Proto <span class="variable">$scheme</span>;</span><br><span class="line">    proxy_set_header REMOTE-HOST <span class="variable">$remote_addr</span>;</span><br><span class="line">    add_header X-Cache <span class="variable">$upstream_cache_status</span>;</span><br><span class="line">    <span class="comment"># cache</span></span><br><span class="line">    add_header Cache-Control no-cache;</span><br><span class="line">    expires 12h;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  location ^~ /.well-known/acme-challenge/ &#123;</span><br><span class="line">    default_type <span class="string">&quot;text/plain&quot;</span>;</span><br><span class="line">    allow all;</span><br><span class="line">    root /data/wwwroot/me.bore.vip/;</span><br><span class="line">  &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.重启Nginx、xr</p>
<h2 id="证书自动续期"><a href="#证书自动续期" class="headerlink" title="证书自动续期"></a>证书自动续期</h2><p>参考：<a href="/archives/58fed3fc/#%E4%BD%BF%E7%94%A8-webroot-%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E8%AF%81%E4%B9%A6-1">自动续期</a></p>
<h2 id="安卓快捷方式发送Memos"><a href="#安卓快捷方式发送Memos" class="headerlink" title="安卓快捷方式发送Memos"></a>安卓快捷方式发送Memos</h2><p>参考：<a href="/archives/6c31209c/#%E5%AE%89%E5%8D%93%E6%89%8B%E6%9C%BA%E4%B8%8A%E5%BF%AB%E6%8D%B7%E6%96%B9%E5%BC%8F%E5%8F%91%E9%80%81">安卓手机上快捷方式发送</a></p>
<p>注意：</p>
<p>1.变量只添加一个<code>content</code>即可</p>
<p>2.<code>响应体/响应参数</code>，选择<code>自定义类型</code>，Content-Type 填写 <code>application/json</code>，请求体填写：(最好不要直接点复制按钮复制代码，直接拖动选择所有行代码，这样张贴就会保留空格)</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;content&#125;&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<div class="note warning flat"><p>注意：上面的<code>{content}</code>  需要先删除，然后点击旁边的 <code>{}</code> 插入变量（插入的变量颜色是蓝色）。不能直接填写！！！</p>
</div>

<p>3.<code>#tag </code>后面必须有个空格才能创建tag</p>
<h2 id="首页轮播"><a href="#首页轮播" class="headerlink" title="首页轮播"></a>首页轮播</h2><blockquote>
<p>API 调用最新 10 条 memos 在博客首页轮播显示。</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;bber-talk&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-id">#bber-talk</span>&#123;<span class="attribute">display</span>:-webkit-flex;<span class="attribute">display</span>:flex;<span class="attribute">width</span>:<span class="number">100%</span>;<span class="attribute">line-height</span>:<span class="number">35px</span>;<span class="attribute">height</span>:<span class="number">45px</span>;<span class="attribute">max-width</span>:<span class="number">760px</span>;<span class="attribute">text-align</span><span class="selector-pseudo">:left</span>;<span class="attribute">padding</span>:<span class="number">5px</span> <span class="number">15px</span>;<span class="attribute">margin</span>:<span class="number">20px</span> <span class="number">0</span>;<span class="attribute">position</span>: relative;<span class="attribute">background-color</span>: <span class="built_in">var</span>(--light-header);<span class="attribute">border-radius</span>:<span class="number">8px</span>;<span class="attribute">font-size</span>:<span class="number">15px</span>;<span class="attribute">overflow</span>:hidden;&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-id">#bber-talk</span> svg&#123;fill: currentColor;<span class="attribute">vertical-align</span>: middle;<span class="attribute">display</span>: inline;<span class="attribute">margin-right</span>:<span class="number">5px</span>;<span class="attribute">margin-top</span>: -<span class="number">4px</span>;&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.talk-wrap</span>&#123;<span class="attribute">width</span>:<span class="number">100%</span>;&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.talk-list</span>&#123;<span class="attribute">margin</span>: <span class="number">0</span>;<span class="attribute">height</span>: <span class="number">35px</span>;&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.talk-list</span> <span class="selector-tag">li</span> &#123;<span class="attribute">list-style</span>:none;<span class="attribute">margin-bottom</span>:<span class="number">10px</span>;<span class="attribute">width</span>: <span class="number">100%</span>;<span class="attribute">white-space</span>: nowrap;<span class="attribute">text-overflow</span>: ellipsis;<span class="attribute">overflow</span>: hidden;zoom: <span class="number">1</span>;&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.talk-list</span> <span class="selector-tag">li</span> <span class="selector-class">.datetime</span>&#123;<span class="attribute">margin-right</span>:<span class="number">2px</span>;&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.talk-list</span> <span class="selector-tag">li</span> <span class="selector-tag">a</span>&#123;<span class="attribute">text-decoration</span>:none;&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.dark-theme</span> <span class="selector-id">#bber-talk</span>&#123;<span class="attribute">background-color</span>: <span class="built_in">var</span>(--dark-header);&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.dark-theme</span> <span class="selector-class">.talk-list</span>&#123;<span class="attribute">color</span>: <span class="built_in">var</span>(--dark-color);&#125;</span></span><br><span class="line"><span class="language-css"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>:<span class="number">683px</span>) &#123;</span></span><br><span class="line"><span class="language-css">	<span class="selector-id">#bber-talk</span>&#123;<span class="attribute">margin</span>:<span class="number">2em</span> <span class="number">1em</span> <span class="number">1em</span>;<span class="attribute">width</span>:<span class="number">94%</span>;&#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/dayjs@1.11.5/dayjs.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/dayjs@1.11.5/locale/zh-cn.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/dayjs@1.11.5/plugin/relativeTime.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript">dayjs.<span class="title function_">locale</span>(<span class="string">&#x27;zh-cn&#x27;</span>);dayjs.<span class="title function_">extend</span>(<span class="variable language_">window</span>.<span class="property">dayjs_plugin_relativeTime</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">var bbUrl = &quot;https://me.edui.fun/api/memo?creatorId=101&amp;limit=10&quot;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">fetch(bbUrl).then(res =&gt; res.json()).then( resdata =&gt;&#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    var result = &#x27;&#x27;,resultAll=&quot;&quot;,data = resdata.data</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    console.log(data)</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    for(var i=0;i &lt; data.length;i++)&#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        var bbTime = dayjs.unix(data[i].createdTs).fromNow()</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        var bbCont = data[i].content</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        var newbbCont = bbCont.replace(/(https?:[^:<span class="tag">&lt;&gt;</span>&quot;]*\/)([^:<span class="tag">&lt;&gt;</span>&quot;]*)(\.((png!thumbnail)|(png)|(jpg)|(webp)|(jpeg)|(gif))(!blogimg)?)/g,&#x27; 🌅 &#x27;)</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        var newbbCont = newbbCont.replace(/\bhttps?:\/\/(?!\S+(?:jpe?g|png|bmp|gif|webp|jfif|gif))\S+/g,&#x27; 🔗 &#x27;)</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        result += `<span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;datetime&quot;</span>&gt;</span>$&#123;bbTime&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span>： <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://me.edui.fun/u/101&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>$&#123;newbbCont&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>`;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    &#125;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    var bbDom = document.querySelector(&#x27;#bber-talk&#x27;);</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    var bbBefore = `<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;index-talk-icon&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">svg</span> <span class="attr">viewBox</span>=<span class="string">&quot;0 0 1024 1024&quot;</span> <span class="attr">width</span>=<span class="string">&quot;21&quot;</span> <span class="attr">height</span>=<span class="string">&quot;21&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M184.32 891.667692c-12.603077 0-25.206154-2.363077-37.809231-7.876923-37.021538-14.966154-59.864615-49.624615-59.864615-89.009231v-275.692307c0-212.676923 173.292308-385.969231 385.969231-385.969231h78.76923c212.676923 0 385.969231 173.292308 385.969231 385.969231 0 169.353846-137.846154 307.2-307.2 307.2H289.083077l-37.021539 37.021538c-18.904615 18.116923-43.323077 28.356923-67.741538 28.356923zM472.615385 195.347692c-178.018462 0-322.953846 144.935385-322.953847 322.953846v275.692308c0 21.267692 15.753846 29.144615 20.48 31.507692 4.726154 2.363077 22.055385 7.876923 37.021539-7.08923l46.473846-46.473846c6.301538-6.301538 14.178462-9.452308 22.055385-9.452308h354.461538c134.695385 0 244.184615-109.489231 244.184616-244.184616 0-178.018462-144.935385-322.953846-322.953847-322.953846H472.615385z&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M321.378462 512m-59.076924 0a59.076923 59.076923 0 1 0 118.153847 0 59.076923 59.076923 0 1 0-118.153847 0Z&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M518.301538 512m-59.076923 0a59.076923 59.076923 0 1 0 118.153847 0 59.076923 59.076923 0 1 0-118.153847 0Z&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M715.224615 512m-59.076923 0a59.076923 59.076923 0 1 0 118.153846 0 59.076923 59.076923 0 1 0-118.153846 0Z&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span><span class="tag">&lt;/<span class="name">svg</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;talk-wrap&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;talk-list&quot;</span>&gt;</span>`</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    var bbAfter = `<span class="tag">&lt;/<span class="name">ul</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>`</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    resultAll = bbBefore + result + bbAfter</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    bbDom.innerHTML = resultAll;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">&#125;);</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">setInterval(function() &#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    for (var s, n = document.querySelector(&quot;.talk-list&quot;), e = n.querySelectorAll(&quot;.item&quot;), t = 0; t &lt; e.length; t++)</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    setTimeout(function() &#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">      n.appendChild(e[0])</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    &#125;,1000)</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">&#125;,1000)</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="单页部署代码"><a href="#单页部署代码" class="headerlink" title="单页部署代码"></a>单页部署代码</h2><blockquote>
<p>已做 js 文件调用处理，找个页面丢入以下 html + js + css 即可。当然，得先部署个 <a href="https://immmmm.com/hi-memos/">Memos</a>，或者，找个好朋友开个 id 也可以。</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;bber&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> bbMemos = &#123;</span></span><br><span class="line"><span class="language-javascript">    memos : <span class="string">&#x27;https://me.edui.fun/&#x27;</span>,<span class="comment">//修改为自己的 apiurl，末尾有 / 斜杠</span></span></span><br><span class="line"><span class="language-javascript">    limit : <span class="string">&#x27;&#x27;</span>,<span class="comment">//默认每次显示 10条 </span></span></span><br><span class="line"><span class="language-javascript">    <span class="attr">creatorId</span>:<span class="string">&#x27;&#x27;</span> ,<span class="comment">//默认为 101用户 https://demo.usememos.com/u/101</span></span></span><br><span class="line"><span class="language-javascript">    <span class="attr">domId</span>: <span class="string">&#x27;&#x27;</span>,<span class="comment">//默认为 &lt;div id=&quot;bber&quot;&gt;&lt;/div&gt;</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://immmmm.com/bb-lmm.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://fastly.jsdelivr.net/gh/Tokinx/ViewImage/view-image.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://fastly.jsdelivr.net/gh/Tokinx/Lately/lately.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>样式代码供参考：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#bber</span>&#123;<span class="attribute">margin-top</span>:<span class="number">1em</span>;&#125;</span><br><span class="line"><span class="selector-class">.timeline</span> <span class="selector-tag">ul</span> &#123;<span class="attribute">margin</span>:<span class="number">0</span>;&#125;</span><br><span class="line"><span class="selector-class">.timeline</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;<span class="attribute">background</span>:<span class="number">#3b3d42</span>;<span class="attribute">list-style-type</span>:none;<span class="attribute">position</span>:relative;<span class="attribute">width</span>:<span class="number">3px</span>;<span class="attribute">margin-left</span>:<span class="number">1em</span>;<span class="attribute">padding</span>:<span class="number">0.8em</span> <span class="number">0</span> <span class="number">2em</span>;&#125;</span><br><span class="line"><span class="selector-class">.timeline</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span><span class="selector-pseudo">::after</span> &#123;<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>);<span class="attribute">content</span>:<span class="string">&#x27;&#x27;</span>;<span class="attribute">background-color</span>: <span class="number">#3b3d42</span>;<span class="attribute">display</span>: block;<span class="attribute">position</span>: absolute;<span class="attribute">top</span>: <span class="number">10px</span>;<span class="attribute">left</span>: -<span class="number">5px</span>;<span class="attribute">width</span>: <span class="number">0.8em</span>;<span class="attribute">height</span>: <span class="number">0.8em</span>;<span class="attribute">outline</span>:<span class="number">15px</span> solid <span class="number">#fff</span>;&#125;</span><br><span class="line"><span class="selector-class">.timeline</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">div</span> &#123;<span class="attribute">position</span>:relative;<span class="attribute">top</span>:-<span class="number">13px</span>;<span class="attribute">left</span>:<span class="number">1em</span>;<span class="attribute">width</span>:<span class="number">670px</span>;<span class="attribute">padding</span>:<span class="number">0px</span> <span class="number">16px</span> <span class="number">0px</span>;&#125;</span><br><span class="line"><span class="selector-class">.timeline</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">p</span><span class="selector-class">.datatime</span>&#123;<span class="attribute">color</span>: <span class="number">#fafafa</span>;<span class="attribute">font-size</span>: <span class="number">0.75em</span>;<span class="attribute">font-style</span>: italic;<span class="attribute">background-color</span>: <span class="number">#3b3d42</span>;<span class="attribute">display</span>: inline-block;<span class="attribute">padding</span>:<span class="number">0.25em</span> <span class="number">1em</span> <span class="number">0.2em</span> <span class="number">1em</span>;&#125;</span><br><span class="line"><span class="selector-class">.timeline</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">p</span><span class="selector-class">.datacont</span>&#123;<span class="attribute">white-space</span>: pre-wrap;<span class="attribute">margin</span>:<span class="number">0.65em</span> <span class="number">0</span> <span class="number">0.3em</span>;&#125;</span><br><span class="line"><span class="selector-class">.timeline</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">p</span><span class="selector-class">.datacont</span> <span class="selector-tag">img</span>&#123;<span class="attribute">display</span>:block;<span class="attribute">max-height</span>:<span class="number">340px</span> <span class="meta">!important</span>;&#125;</span><br><span class="line"><span class="selector-class">.timeline</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">p</span><span class="selector-class">.datacont</span> <span class="selector-tag">img</span><span class="selector-attr">[src*=<span class="string">&quot;emotion&quot;</span>]</span>&#123;<span class="attribute">display</span>:inline-block;<span class="attribute">width</span>:auto;&#125;</span><br><span class="line"><span class="selector-class">.timeline</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">p</span><span class="selector-class">.datafrom</span>&#123;<span class="attribute">color</span>: <span class="number">#aaa</span>;<span class="attribute">font-size</span>: <span class="number">0.75em</span> <span class="meta">!important</span>;<span class="attribute">font-style</span>: italic;&#125;</span><br><span class="line"><span class="selector-class">.timeline</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">p</span>&#123;<span class="attribute">margin</span>:<span class="number">0</span>;<span class="attribute">font-size</span>:<span class="number">16px</span>;<span class="attribute">letter-spacing</span>:<span class="number">1px</span>;<span class="attribute">color</span>: <span class="number">#3b3d42</span>;&#125;</span><br><span class="line"><span class="selector-class">.timeline</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">p</span><span class="selector-class">.datacont</span> <span class="selector-class">.img</span>&#123;<span class="attribute">cursor</span>: pointer;<span class="attribute">border</span>:<span class="number">1px</span> solid <span class="number">#3b3d42</span>;<span class="attribute">max-width</span>:<span class="number">20rem</span>;<span class="attribute">margin</span>:<span class="number">6px</span> <span class="number">0</span> <span class="number">6px</span> <span class="number">0</span>;&#125;</span><br><span class="line"><span class="selector-tag">button</span>&#123;<span class="attribute">border-radius</span>:<span class="number">0</span>;&#125;</span><br><span class="line"><span class="selector-class">.dark-theme</span> <span class="selector-class">.timeline</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">div</span> <span class="selector-tag">p</span>&#123;<span class="attribute">color</span>:<span class="number">#fafafa</span>;&#125;</span><br><span class="line"><span class="selector-class">.dark-theme</span> <span class="selector-class">.timeline</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">div</span> <span class="selector-tag">p</span> svg&#123;fill:<span class="number">#fafafa</span>;&#125;</span><br><span class="line"><span class="selector-class">.dark-theme</span> <span class="selector-class">.timeline</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">p</span><span class="selector-class">.datafrom</span>&#123;<span class="attribute">color</span>: <span class="number">#aaa</span>;&#125;</span><br><span class="line"><span class="selector-class">.dark-theme</span> <span class="selector-class">.timeline</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span>&#123;<span class="attribute">background</span>:<span class="number">#3b3d42</span>;&#125;</span><br><span class="line"><span class="selector-class">.dark-theme</span> <span class="selector-class">.timeline</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span><span class="selector-pseudo">::after</span>&#123;<span class="attribute">outline</span>: <span class="number">15px</span> solid <span class="number">#2f2f2f</span>;&#125;</span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width</span>:<span class="number">860px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.timeline</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span>&#123;<span class="attribute">margin-left</span>:<span class="number">0</span>;&#125;</span><br><span class="line">  <span class="selector-class">.timeline</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">div</span>&#123;<span class="attribute">width</span>:<span class="built_in">calc</span>(<span class="number">100vw</span> - <span class="number">75px</span>);<span class="attribute">left</span>:<span class="number">30px</span>;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="定时备份数据库"><a href="#定时备份数据库" class="headerlink" title="定时备份数据库"></a>定时备份数据库</h2><p>参考：<a href="/archives/3a4bd17/">halo 定时备份的方法</a></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>感觉还是小康speak和Butterfly主题更搭，况且小康speak也可以独立部署，所以还是用前者吧！</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://immmmm.com/hi-memos/">Hi，Memos</a></p>
<p><a href="https://immmmm.com/bb-by-memos/">哔哔点啥 By Memos</a></p>
<p><a href="https://1900.live/build_your_own_flomo_applications/">搭建属于你自己的 flomo 应用 :Memos</a></p>
<p><a href="https://blog.laoda.de/archives/docker-install-memos">好玩儿的Docker项目</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx配置ssl证书</title>
    <url>/archives/58fed3fc/</url>
    <content><![CDATA[<h2 id="启用阿里免费证书"><a href="#启用阿里免费证书" class="headerlink" title="启用阿里免费证书"></a>启用阿里免费证书</h2><h3 id="申请证书"><a href="#申请证书" class="headerlink" title="申请证书"></a>申请证书</h3><p>查看：<a href="https://help.aliyun.com/document_detail/156645.html">申请免费DV试用证书</a></p>
<h3 id="安装证书"><a href="#安装证书" class="headerlink" title="安装证书"></a>安装证书</h3><p>基本操作参考：<a href="https://help.aliyun.com/document_detail/98728.html?spm=5176.2020520163.cas.13.6053jBDQjBDQPD">在Nginx&#x2F;Tengine服务器上安装证书</a>，这里具体讲下Nginx上的配置。</p>
<p>1.在nginx根目录（默认为&#x2F;etc&#x2F;nginx）下创建目录cert。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/nginx</span><br><span class="line"><span class="built_in">mkdir</span> cert</span><br></pre></td></tr></table></figure>

<p>2.把下载的证书两个文件.pem和.key上传到目录cert中。</p>
<p>3.修改nginx配置文件。<code>vi /etc/nginx/conf.d/hexo.conf</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name bore.vip www.bore.vip;</span><br><span class="line">    rewrite ^(.*)$ https://$server_name<span class="variable">$1</span> permanent;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">   listen 443;</span><br><span class="line">  root /var/www/hexo;</span><br><span class="line">  server_name bore.vip www.bore.vip;</span><br><span class="line">  ssl on;</span><br><span class="line">  ssl_certificate /etc/nginx/cert/xxxx.pem;</span><br><span class="line">  ssl_certificate_key /etc/nginx/cert/xxxx.key;</span><br><span class="line">  ssl_session_timeout 5m;</span><br><span class="line">  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">  ssl_ciphers ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP;</span><br><span class="line">  ssl_prefer_server_ciphers on;</span><br><span class="line">  access_log  /var/log/nginx/hexo_access.log;</span><br><span class="line">  error_log   /var/log/nginx/hexo_error.log;</span><br><span class="line">  error_page 404 =  /404.html;</span><br><span class="line">  location ~* ^.+\.(ico|gif|jpg|jpeg|png)$ &#123;</span><br><span class="line">    root /var/www/hexo;</span><br><span class="line">    access_log   off;</span><br><span class="line">    expires      1d;</span><br><span class="line">  &#125;</span><br><span class="line">  location ~* ^.+\.(css|js|txt|xml|swf|wav)$ &#123;</span><br><span class="line">    root /var/www/hexo;</span><br><span class="line">    access_log   off;</span><br><span class="line">    expires      10m;</span><br><span class="line">  &#125;</span><br><span class="line">  location / &#123;</span><br><span class="line">    root /var/www/hexo;</span><br><span class="line">    <span class="keyword">if</span> (-f <span class="variable">$request_filename</span>) &#123;</span><br><span class="line">    rewrite ^/(.*)$  /<span class="variable">$1</span> <span class="built_in">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  location /nginx_status &#123;</span><br><span class="line">    stub_status on;</span><br><span class="line">    access_log off;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.修改hugo站点配置文件_config.toml</p>
<p><code>baseURL = &quot;https://bore.vip/&quot;</code></p>
<p>5.开启负载均衡</p>
<p>在阿里云<a href="https://yundunnext.console.aliyun.com/?spm=a2c4g.11186623.2.13.775345eav2PxV4&p=cas#/overview/cn-hangzhou">SSl证书控制台</a>，依次选择<code>部署—负载均衡—选择所有区域</code>，然后部署。</p>
<p>6.重启nginx服务。</p>
<p>ubuntu、centos 6</p>
<p><code>/etc/init.d/nginx restart</code></p>
<p>centos 7、8</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl restart nginx</span><br></pre></td></tr></table></figure>

<h2 id="添加-Let’s-Encrypt-免费证书"><a href="#添加-Let’s-Encrypt-免费证书" class="headerlink" title="添加 Let’s Encrypt 免费证书"></a>添加 Let’s Encrypt 免费证书</h2><h3 id="Ubuntu上的操作"><a href="#Ubuntu上的操作" class="headerlink" title="Ubuntu上的操作"></a>Ubuntu上的操作</h3><h4 id="安装-Certbot"><a href="#安装-Certbot" class="headerlink" title="安装 Certbot"></a>安装 Certbot</h4><p>在 Ubuntu 上只需要简单的一行命令：</p>
<p><code>sudo apt-get install letsencrypt</code></p>
<p>其他的发行版可以在<a href="https://certbot.eff.org/">这里</a>选择。</p>
<h4 id="使用-webroot-自动生成证书"><a href="#使用-webroot-自动生成证书" class="headerlink" title="使用 webroot 自动生成证书"></a>使用 webroot 自动生成证书</h4><p>Certbot 支持多种不同的「插件」来获取证书，这里选择使用 <a href="https://certbot.eff.org/docs/using.html#webroot">webroot</a> 插件，它可以在不停止 Web 服务器的前提下自动生成证书，使用 <code>--webroot</code> 参数指定网站的根目录。</p>
<p><code>letsencrypt certonly --webroot -w /var/www/hexo -d iwyang.top</code></p>
<p>这样，在 &#x2F;var&#x2F;www&#x2F;hexo 目录下创建临时文件 .well-known&#x2F;acme-challenge ，通过这个文件来证明对域名 iwyang.top 的控制权，然后 Let’s Encrypt 验证服务器发出 HTTP 请求，验证每个请求的域的 DNS 解析，验证成功即颁发证书。</p>
<p>生成的 pem 和 key 在 <code>/etc/letsencrypt/live/</code> 目录下</p>
<blockquote>
<p>cert.pem 用户证书<br>chain.pem 中间证书<br>fullchain.pem 证书链, chain.pem + cert.pem<br>privkey.pem 证书私钥</p>
</blockquote>
<p>&#96;</p>
<h4 id="自动续期"><a href="#自动续期" class="headerlink" title="自动续期"></a>自动续期</h4><p>Let’s Encrypt 的证书有效期为 90 天，不过我们可以通过 crontab 定时运行命令更新证书。</p>
<p>先运行以下命令来测试证书的自动更新：</p>
<p><code>letsencrypt renew --dry-run --agree-tos</code></p>
<p>如果一切正常，就可以编辑 crontab 定期运行以下命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">crontab -e</span><br><span class="line">* 2 * * * service nginx stop &amp; letsencrypt renew &amp; service nginx start</span><br></pre></td></tr></table></figure>

<h4 id="配置-Nginx"><a href="#配置-Nginx" class="headerlink" title="配置 Nginx"></a>配置 Nginx</h4><p>修改 Nginx 配置文件中关于证书的配置：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/nginx/conf.d/hexo.conf</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name iwyang.top www.iwyang.top;</span><br><span class="line">    rewrite ^(.*)$ https://$server_name<span class="variable">$1</span> permanent;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">   listen 443;</span><br><span class="line">  root /var/www/hexo;</span><br><span class="line">  server_name iwyang.top www.iwyang.top;</span><br><span class="line">  ssl on;</span><br><span class="line">  ssl_certificate /etc/letsencrypt/live/iwyang.top/fullchain.pem;</span><br><span class="line">  ssl_certificate_key /etc/letsencrypt/live/iwyang.top/privkey.pem;</span><br><span class="line">  ssl_session_timeout 5m;</span><br><span class="line">  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">  ssl_ciphers ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP;</span><br><span class="line">  ssl_prefer_server_ciphers on;</span><br><span class="line">  access_log  /var/log/nginx/hexo_access.log;</span><br><span class="line">  error_log   /var/log/nginx/hexo_error.log;</span><br><span class="line">  error_page 404 =  /404.html;</span><br><span class="line">  location ~* ^.+\.(ico|gif|jpg|jpeg|png)$ &#123;</span><br><span class="line">    root /var/www/hexo;</span><br><span class="line">    access_log   off;</span><br><span class="line">    expires      1d;</span><br><span class="line">  &#125;</span><br><span class="line">  location ~* ^.+\.(css|js|txt|xml|swf|wav)$ &#123;</span><br><span class="line">    root /var/www/hexo;</span><br><span class="line">    access_log   off;</span><br><span class="line">    expires      10m;</span><br><span class="line">  &#125;</span><br><span class="line">  location / &#123;</span><br><span class="line">    root /var/www/hexo;</span><br><span class="line">    <span class="keyword">if</span> (-f <span class="variable">$request_filename</span>) &#123;</span><br><span class="line">    rewrite ^/(.*)$  /<span class="variable">$1</span> <span class="built_in">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  location /nginx_status &#123;</span><br><span class="line">    stub_status on;</span><br><span class="line">    access_log off;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后重启 Nginx ，应该就可以看到小绿标了。<code>/etc/init.d/nginx restart</code></p>
<h3 id="Centos-8上的操作"><a href="#Centos-8上的操作" class="headerlink" title="Centos 8上的操作"></a>Centos 8上的操作</h3><h4 id="安装Certbot"><a href="#安装Certbot" class="headerlink" title="安装Certbot"></a>安装Certbot</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum install epel-release -y</span><br><span class="line">yum install certbot -y</span><br></pre></td></tr></table></figure>

<p>然后执行：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">certbot certonly --webroot -w /var/www/hexo -d bore.vip -m 455343442@qq.com --agree-tos</span><br></pre></td></tr></table></figure>

<h4 id="配置Nginx"><a href="#配置Nginx" class="headerlink" title="配置Nginx"></a>配置Nginx</h4><p>顶级域名参考上面Ubuntu Nginx的配置，二级域名操作如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/nginx/conf.d/hexo.conf</span><br></pre></td></tr></table></figure>
<p>现在用的：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">server</span> &#123;</span><br><span class="line">  <span class="string">listen</span> <span class="number">80</span><span class="string">;</span></span><br><span class="line">  <span class="string">listen</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:443</span> <span class="string">ssl</span> <span class="string">http2</span> <span class="string">proxy_protocol;</span></span><br><span class="line">  <span class="string">root</span> <span class="string">/var/www/hexo;</span></span><br><span class="line">  <span class="string">server_name</span> <span class="string">bore.vip</span> <span class="string">www.bore.vip;</span></span><br><span class="line">  <span class="string">if</span> <span class="string">($host</span> <span class="type">!=</span> <span class="string">&#x27;bore.vip&#x27;</span> <span class="string">)</span> &#123;</span><br><span class="line">      <span class="string">rewrite</span> <span class="string">^/(.*)$</span> <span class="string">https://bore.vip/$1</span> <span class="string">permanent;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="string">if</span> <span class="string">($ssl_protocol</span> <span class="string">=</span> <span class="string">&quot;&quot;</span><span class="string">)</span> &#123;</span><br><span class="line">        <span class="string">return</span> <span class="number">301</span> <span class="string">https://$host$request_uri;</span></span><br><span class="line">  &#125;  </span><br><span class="line">  <span class="string">ssl</span> <span class="string">on;</span></span><br><span class="line">  <span class="string">ssl_certificate</span> <span class="string">/etc/letsencrypt/live/bore.vip/fullchain.pem;</span></span><br><span class="line">  <span class="string">ssl_certificate_key</span> <span class="string">/etc/letsencrypt/live/bore.vip/privkey.pem;</span></span><br><span class="line">  <span class="string">ssl_protocols</span> <span class="string">TLSv1</span> <span class="string">TLSv1.1</span> <span class="string">TLSv1.2</span> <span class="string">TLSv1.3;</span></span><br><span class="line">  <span class="string">ssl_ciphers</span> <span class="string">TLS13-AES-256-GCM-SHA384:TLS13-CHACHA20-POLY1305-SHA256:TLS13-AES-128-GCM-SHA256:TLS13-AES-128-CCM-8-SHA256:TLS13-AES-128-CCM-SHA256:EECDH+CHACHA20:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;</span></span><br><span class="line">  <span class="string">ssl_prefer_server_ciphers</span> <span class="string">on;</span></span><br><span class="line">  <span class="string">ssl_session_timeout</span> <span class="string">10m;</span></span><br><span class="line">  <span class="string">ssl_session_cache</span> <span class="string">builtin:1000</span> <span class="string">shared:SSL:10m;</span></span><br><span class="line">  <span class="string">ssl_buffer_size</span> <span class="number">1400</span><span class="string">;</span></span><br><span class="line">  <span class="string">add_header</span> <span class="string">Strict-Transport-Security</span> <span class="string">max-age=15768000;</span></span><br><span class="line">  <span class="string">ssl_stapling</span> <span class="string">on;</span></span><br><span class="line">  <span class="string">ssl_stapling_verify</span> <span class="string">on;</span></span><br><span class="line">  <span class="string">access_log</span>  <span class="string">/var/log/nginx/hexo_access.log;</span></span><br><span class="line">  <span class="string">error_log</span>   <span class="string">/var/log/nginx/hexo_error.log;</span></span><br><span class="line">  <span class="string">error_page</span> <span class="number">404</span> <span class="string">=</span>  <span class="string">/404.html;</span></span><br><span class="line">  <span class="string">location</span> <span class="string">~*</span> <span class="string">^.+\.(ico|gif|jpg|jpeg|png)$</span> &#123;</span><br><span class="line">    <span class="string">root</span> <span class="string">/var/www/hexo;</span></span><br><span class="line">    <span class="string">access_log</span>   <span class="string">off;</span></span><br><span class="line">    <span class="string">expires</span>      <span class="string">1d;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="string">location</span> <span class="string">~*</span> <span class="string">^.+\.(css|js|txt|xml|swf|wav)$</span> &#123;</span><br><span class="line">    <span class="string">root</span> <span class="string">/var/www/hexo;</span></span><br><span class="line">    <span class="string">access_log</span>   <span class="string">off;</span></span><br><span class="line">    <span class="string">expires</span>      <span class="string">10m;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="string">location</span> <span class="string">/</span> &#123;</span><br><span class="line">    <span class="string">root</span> <span class="string">/var/www/hexo;</span></span><br><span class="line">    <span class="string">if</span> <span class="string">(-f</span> <span class="string">$request_filename)</span> &#123;</span><br><span class="line">    <span class="string">rewrite</span> <span class="string">^/(.*)$</span>  <span class="string">/$1</span> <span class="string">break;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="string">location</span> <span class="string">/nginx_status</span> &#123;</span><br><span class="line">    <span class="string">stub_status</span> <span class="string">on;</span></span><br><span class="line">    <span class="string">access_log</span> <span class="string">off;</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以前用的:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name bore.vip www.bore.vip;</span><br><span class="line">    rewrite ^(.*)$ https://$server_name<span class="variable">$1</span> permanent;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">  listen 443;</span><br><span class="line">  root /var/www/hexo;</span><br><span class="line">  server_name bore.vip www.bore.vip;</span><br><span class="line">  ssl on;</span><br><span class="line">  ssl_certificate /etc/letsencrypt/live/bore.vip/fullchain.pem;</span><br><span class="line">  ssl_certificate_key /etc/letsencrypt/live/bore.vip/privkey.pem;</span><br><span class="line">  ssl_session_timeout 5m;</span><br><span class="line">  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">  ssl_ciphers ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP;</span><br><span class="line">  ssl_prefer_server_ciphers on;</span><br><span class="line">  access_log  /var/log/nginx/hexo_access.log;</span><br><span class="line">  error_log   /var/log/nginx/hexo_error.log;</span><br><span class="line">  error_page 404 =  /404.html;</span><br><span class="line">  location ~* ^.+\.(ico|gif|jpg|jpeg|png)$ &#123;</span><br><span class="line">    root /var/www/hexo;</span><br><span class="line">    access_log   off;</span><br><span class="line">    expires      1d;</span><br><span class="line">  &#125;</span><br><span class="line">  location ~* ^.+\.(css|js|txt|xml|swf|wav)$ &#123;</span><br><span class="line">    root /var/www/hexo;</span><br><span class="line">    access_log   off;</span><br><span class="line">    expires      10m;</span><br><span class="line">  &#125;</span><br><span class="line">  location / &#123;</span><br><span class="line">    root /var/www/hexo;</span><br><span class="line">    <span class="keyword">if</span> (-f <span class="variable">$request_filename</span>) &#123;</span><br><span class="line">    rewrite ^/(.*)$  /<span class="variable">$1</span> <span class="built_in">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  location /nginx_status &#123;</span><br><span class="line">    stub_status on;</span><br><span class="line">    access_log off;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>重启Nginx生效：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl restart nginx</span><br></pre></td></tr></table></figure>

<h4 id="证书自动更新"><a href="#证书自动更新" class="headerlink" title="证书自动更新"></a>证书自动更新</h4><p>由于这个证书的时效只有 90 天，我们需要设置自动更新的功能，帮我们自动更新证书的时效。首先先在命令行模拟证书更新：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">certbot renew --dry-run</span><br></pre></td></tr></table></figure>

<p>模拟更新成功的效果如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span><br><span class="line">** DRY RUN: simulating <span class="string">&#x27;certbot renew&#x27;</span> close to cert expiry</span><br><span class="line">**          (The <span class="built_in">test</span> certificates below have not been saved.)</span><br><span class="line"><span class="comment">## 可以看到两个域名续期成功</span></span><br><span class="line">The following certs were successfully renewed:</span><br><span class="line">  /etc/letsencrypt/live/blog.bore.vip/fullchain.pem (success)</span><br><span class="line">  /etc/letsencrypt/live/f.bore.vip/fullchain.pem (success)</span><br><span class="line"><span class="comment">## 以下失败的一个域名不用管</span></span><br><span class="line">The following certs could not be renewed:</span><br><span class="line">  /etc/letsencrypt/live/novel.bore.vip/fullchain.pem (failure)</span><br><span class="line">** DRY RUN: simulating <span class="string">&#x27;certbot renew&#x27;</span> close to cert expiry</span><br><span class="line">**          (The <span class="built_in">test</span> certificates above have not been saved.)</span><br><span class="line">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span><br></pre></td></tr></table></figure>

<p>在无法确认你的 nginx 配置是否正确时，一定要运行模拟更新命令，确保certbot和服务器通讯正常。使用 crontab -e 的命令来启用自动任务，命令行：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure>

<p>添加配置：（每隔两个月凌晨2:30自动执行证书更新操作）后保存退出。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">30 2 * */2 * /usr/bin/certbot renew --quiet &amp;&amp; /bin/systemctl restart nginx</span><br></pre></td></tr></table></figure>

<p>查看证书有效期的命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">openssl x509 -noout -dates -<span class="keyword">in</span> /etc/letsencrypt/live/bore.vip/cert.pem</span><br></pre></td></tr></table></figure>

<h3 id="Debian10上的操作"><a href="#Debian10上的操作" class="headerlink" title="Debian10上的操作"></a>Debian10上的操作</h3><h4 id="安装-Certbot-1"><a href="#安装-Certbot-1" class="headerlink" title="安装 Certbot"></a>安装 Certbot</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install letsencrypt -y</span><br></pre></td></tr></table></figure>
<h4 id="使用-webroot-自动生成证书-1"><a href="#使用-webroot-自动生成证书-1" class="headerlink" title="使用 webroot 自动生成证书"></a>使用 webroot 自动生成证书</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">certbot certonly --webroot -w /var/www/hexo -d bore.vip -m 455343442@qq.com --agree-tos</span><br></pre></td></tr></table></figure>

<h4 id="编辑Nginx"><a href="#编辑Nginx" class="headerlink" title="编辑Nginx"></a>编辑<code>Nginx</code></h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/nginx/conf.d/hexo.conf</span><br></pre></td></tr></table></figure>
<p><strong>hexo用：</strong></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">server</span> &#123;</span><br><span class="line">    <span class="string">listen</span> <span class="number">80</span><span class="string">;</span></span><br><span class="line">    <span class="string">listen</span> [<span class="string">::</span>]<span class="string">:80;</span></span><br><span class="line">    <span class="string">root</span> <span class="string">/var/www/hexo;</span></span><br><span class="line">    <span class="string">server_name</span>  <span class="string">bore.vip</span> <span class="string">www.bore.vip;</span></span><br><span class="line">    <span class="string">if</span> <span class="string">($host</span> <span class="type">!=</span> <span class="string">&#x27;bore.vip&#x27;</span> <span class="string">)</span> &#123;</span><br><span class="line">      <span class="string">rewrite</span> <span class="string">^/(.*)$</span> <span class="string">https://bore.vip/$1</span> <span class="string">permanent;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="string">listen</span> <span class="number">443</span> <span class="string">ssl;</span> <span class="comment"># managed by Certbot</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># RSA certificate</span></span><br><span class="line">    <span class="string">ssl_certificate</span> <span class="string">/etc/letsencrypt/live/bore.vip/fullchain.pem;</span> <span class="comment"># managed by Certbot</span></span><br><span class="line">    <span class="string">ssl_certificate_key</span> <span class="string">/etc/letsencrypt/live/bore.vip/privkey.pem;</span> <span class="comment"># managed by Certbot</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Redirect non-https traffic to https</span></span><br><span class="line">    <span class="string">if</span> <span class="string">($scheme</span> <span class="type">!=</span> <span class="string">&quot;https&quot;</span><span class="string">)</span> &#123;</span><br><span class="line">        <span class="string">return</span> <span class="number">301</span> <span class="string">https://$host$request_uri;</span></span><br><span class="line">    &#125; <span class="comment"># managed by Certbot</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>现在用的：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  listen 127.0.0.1:443 ssl http2 proxy_protocol;</span><br><span class="line">  set_real_ip_from 127.0.0.1;</span><br><span class="line">  real_ip_header proxy_protocol;  </span><br><span class="line">  root /var/www/hexo;</span><br><span class="line">  server_name bore.vip www.bore.vip;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable">$host</span> != <span class="string">&#x27;bore.vip&#x27;</span> ) &#123;</span><br><span class="line">      rewrite ^/(.*)$ https://bore.vip/<span class="variable">$1</span> permanent;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable">$ssl_protocol</span> = <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">        <span class="built_in">return</span> 301 https://$host<span class="variable">$request_uri</span>;</span><br><span class="line">  &#125;  </span><br><span class="line">  ssl_certificate /etc/letsencrypt/live/bore.vip/fullchain.pem;</span><br><span class="line">  ssl_certificate_key /etc/letsencrypt/live/bore.vip/privkey.pem;</span><br><span class="line">  ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3;</span><br><span class="line">  ssl_ciphers TLS13-AES-256-GCM-SHA384:TLS13-CHACHA20-POLY1305-SHA256:TLS13-AES-128-GCM-SHA256:TLS13-AES-128-CCM-8-SHA256:TLS13-AES-128-CCM-SHA256:EECDH+CHACHA20:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;</span><br><span class="line">  ssl_prefer_server_ciphers on;</span><br><span class="line">  ssl_session_timeout 10m;</span><br><span class="line">  ssl_session_cache <span class="built_in">builtin</span>:1000 shared:SSL:10m;</span><br><span class="line">  ssl_buffer_size 1400;</span><br><span class="line">  add_header Strict-Transport-Security max-age=15768000;</span><br><span class="line">  ssl_stapling on;</span><br><span class="line">  ssl_stapling_verify on;</span><br><span class="line">  access_log  /var/log/nginx/hexo_access.log;</span><br><span class="line">  error_log   /var/log/nginx/hexo_error.log;</span><br><span class="line">  error_page 404 =  /404.html;</span><br><span class="line">  location ~* ^.+\.(ico|gif|jpg|jpeg|png)$ &#123;</span><br><span class="line">    root /var/www/hexo;</span><br><span class="line">    access_log   off;</span><br><span class="line">    expires      1d;</span><br><span class="line">  &#125;</span><br><span class="line">  location ~* ^.+\.(css|js|txt|xml|swf|wav)$ &#123;</span><br><span class="line">    root /var/www/hexo;</span><br><span class="line">    access_log   off;</span><br><span class="line">    expires      10m;</span><br><span class="line">  &#125;</span><br><span class="line">  location / &#123;</span><br><span class="line">    root /var/www/hexo;</span><br><span class="line">    <span class="keyword">if</span> (-f <span class="variable">$request_filename</span>) &#123;</span><br><span class="line">    rewrite ^/(.*)$  /<span class="variable">$1</span> <span class="built_in">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  location /nginx_status &#123;</span><br><span class="line">    stub_status on;</span><br><span class="line">    access_log off;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以前用的：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">server</span> &#123;</span><br><span class="line">    <span class="string">listen</span> <span class="number">80</span><span class="string">;</span></span><br><span class="line">    <span class="string">server_name</span> <span class="string">bore.vip</span> <span class="string">www.bore.vip;</span></span><br><span class="line">    <span class="string">rewrite</span> <span class="string">^(.*)$</span> <span class="string">https://$server_name$1</span> <span class="string">permanent;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="string">server</span> &#123;</span><br><span class="line">  <span class="string">listen</span> <span class="number">443</span><span class="string">;</span></span><br><span class="line">  <span class="string">root</span> <span class="string">/var/www/hexo;</span></span><br><span class="line">  <span class="string">server_name</span> <span class="string">bore.vip</span> <span class="string">www.bore.vip;</span></span><br><span class="line">  <span class="string">ssl</span> <span class="string">on;</span></span><br><span class="line">  <span class="string">ssl_certificate</span> <span class="string">/etc/letsencrypt/live/bore.vip/fullchain.pem;</span></span><br><span class="line">  <span class="string">ssl_certificate_key</span> <span class="string">/etc/letsencrypt/live/bore.vip/privkey.pem;</span></span><br><span class="line">  <span class="string">ssl_session_timeout</span> <span class="string">5m;</span></span><br><span class="line">  <span class="string">ssl_protocols</span> <span class="string">TLSv1</span> <span class="string">TLSv1.1</span> <span class="string">TLSv1.2;</span></span><br><span class="line">  <span class="string">ssl_ciphers</span> <span class="string">ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP;</span></span><br><span class="line">  <span class="string">ssl_prefer_server_ciphers</span> <span class="string">on;</span></span><br><span class="line">  <span class="string">access_log</span>  <span class="string">/var/log/nginx/hexo_access.log;</span></span><br><span class="line">  <span class="string">error_log</span>   <span class="string">/var/log/nginx/hexo_error.log;</span></span><br><span class="line">  <span class="string">error_page</span> <span class="number">404</span> <span class="string">=</span>  <span class="string">/404.html;</span></span><br><span class="line">  <span class="string">location</span> <span class="string">~*</span> <span class="string">^.+\.(ico|gif|jpg|jpeg|png)$</span> &#123;</span><br><span class="line">    <span class="string">root</span> <span class="string">/var/www/hexo;</span></span><br><span class="line">    <span class="string">access_log</span>   <span class="string">off;</span></span><br><span class="line">    <span class="string">expires</span>      <span class="string">1d;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="string">location</span> <span class="string">~*</span> <span class="string">^.+\.(css|js|txt|xml|swf|wav)$</span> &#123;</span><br><span class="line">    <span class="string">root</span> <span class="string">/var/www/hexo;</span></span><br><span class="line">    <span class="string">access_log</span>   <span class="string">off;</span></span><br><span class="line">    <span class="string">expires</span>      <span class="string">10m;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="string">location</span> <span class="string">/</span> &#123;</span><br><span class="line">    <span class="string">root</span> <span class="string">/var/www/hexo;</span></span><br><span class="line">    <span class="string">if</span> <span class="string">(-f</span> <span class="string">$request_filename)</span> &#123;</span><br><span class="line">    <span class="string">rewrite</span> <span class="string">^/(.*)$</span>  <span class="string">/$1</span> <span class="string">break;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="string">location</span> <span class="string">/nginx_status</span> &#123;</span><br><span class="line">    <span class="string">stub_status</span> <span class="string">on;</span></span><br><span class="line">    <span class="string">access_log</span> <span class="string">off;</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试配置是否有问题：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nginx -t</span><br></pre></td></tr></table></figure>
<p>重启Nginx生效：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl restart nginx</span><br></pre></td></tr></table></figure>
<h4 id="自动续期-1"><a href="#自动续期-1" class="headerlink" title="自动续期"></a>自动续期</h4><p>Let’s Encrypt 的证书有效期为 90 天，不过我们可以通过 crontab 定时运行命令更新证书。</p>
<p>先运行以下命令来测试证书的自动更新：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">certbot renew --dry-run</span><br></pre></td></tr></table></figure>
<p>如果一切正常，就可以编辑 crontab 定期运行以下命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">30 2 * */2 * /usr/bin/certbot renew --quiet &amp;&amp; /bin/systemctl restart nginx</span><br></pre></td></tr></table></figure>
<p>查看证书有效期的命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">openssl x509 -noout -dates -in /etc/letsencrypt/live/bore.vip/cert.pem</span><br></pre></td></tr></table></figure>

<h2 id="https-www跳转"><a href="#https-www跳转" class="headerlink" title="https www跳转"></a>https www跳转</h2><figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">upstream halo &#123;</span><br><span class="line">  server 127.0.0.1:8090;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  listen [::]:80;</span><br><span class="line">  listen 443 ssl http2;</span><br><span class="line">  listen [::]:443 ssl http2;</span><br><span class="line">  server_name bore.vip www.bore.vip;</span><br><span class="line"><span class="addition">+  if ($host != &#x27;bore.vip&#x27; ) &#123;</span></span><br><span class="line"><span class="addition">+      rewrite ^/(.*)$ https://bore.vip/$1 permanent;</span></span><br><span class="line"><span class="addition">+  &#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://help.aliyun.com/document_detail/98728.html?spm=5176.2020520163.cas.13.6053jBDQjBDQPD">1.在Nginx&#x2F;Tengine服务器上安装证书</a></li>
<li><a href="https://www.ratel.net.cn/2019/07/18/%E9%98%BF%E9%87%8C%E4%BA%91hexo%E7%AB%99%E7%82%B9https%E4%B9%8Bnginx%E9%85%8D%E7%BD%AE/">2.阿里云hexo站点https之nginx配置</a></li>
<li><a href="https://blog.yizhilee.com/post/letsencrypt-certificate/">3.为博客添加 Let’s Encrypt 免费证书 </a></li>
<li><a href="https://www.cnblogs.com/gabin/p/6844481.html">4.ubuntu 生成https证书 for let’s encrypt</a></li>
<li><a href="https://blog.csdn.net/a295277302/article/details/78143010">5.Ubuntu 16设置定时任务</a></li>
<li><a href="https://blog.csdn.net/zhuangtim1987/article/details/52280409">6.Ubuntu查看crontab运行日志</a></li>
<li><a href="https://blog.csdn.net/shasharoman/article/details/80915222">7.Let’s Encrypt证书自动更新</a></li>
<li><a href="https://juejin.im/entry/5b59c3f26fb9a04fda4e2238">8.CentOS 7 Nginx配置Let’s Encrypt SSL证书</a></li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>Notepad++批量修改文件内容</title>
    <url>/archives/ef06a4ae/</url>
    <content><![CDATA[<p>所需软件：<a class="btn-beautify blue larger" href="https://notepad-plus-plus.org/downloads/" 
  title="Notepad++"><i class="far fa-hand-point-right"></i><span>Notepad++</span></a></p>
<p>步骤：</p>
<ol>
<li>将所需替换文件放到同一个文件夹里。</li>
<li>用<code>Notepad++</code>打开其中的一个文件，执行<code>搜索—查找—文件查找</code>填好<code>查找目标、替换为、文件类型（如：*.md）、目录</code>，最后点击<code>在文件中替换</code>。</li>
</ol>
<p><img src="/../img/Notepad-%E6%89%B9%E9%87%8F%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9/1.jpg"></p>
<p>参考：<a href="https://blog.csdn.net/weixin_43269414/article/details/107839575">windows批量查找替换多个文本文件中的内容</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>tips</tag>
      </tags>
  </entry>
  <entry>
    <title>PS制作打印字体效果</title>
    <url>/archives/a4ea1c26/</url>
    <content><![CDATA[<p> 要修改图片文件里的字体，步骤如下。</p>
<p>1.打开图片并ctrl+J复制图层。</p>
<p>2.在你复制的图层上，利用选框工具选出你要修改的地方，然后shif+F5，选择内容识别(他会选择你就近的颜色来填充，尽量不要大面积的填充，若一次填充不行，那就继续选框小范围选择再shif f5 一直到与背景一致为止)。或者使用<code>仿制图章工具</code>也行。</p>
<p>3.添加你的要文字，一般都是宋体类的，然后靠你仔细度去调整距离，大小，颜色，宽度（把图片放大，找一个字取色，不要纯黑）</p>
<p>4.栅格化文字以后，滤镜—杂色—添加杂色（一般15左右）</p>
<p>5.滤镜-模糊-高斯模糊（一般在0.2~0.4左右 视照片模糊程度而定）</p>
<p>6、如果觉得和样张还有点出入，想再增加一点模糊的效果。可以再复制一个文字的新图层，对新图层文字添加 滤镜–添加杂色，加15点左右。再使用 滤镜-模糊-高斯模糊，0.2~0.4左右左右。</p>
<p>7.若照片比较久远，或者为彩印，滤镜-滤镜库-画笔描边-喷溅。会有文字里头有小色斑的效果</p>
<p>步骤其实不多，靠的是仔细和耐心，因为一旦栅格化以后，字体颜色都是不可改变了。所以真的要造假造的以假乱真，你就得多试几次</p>
<hr>
<p>PS：如若字体发黑，可按住ctrl选择文字图层缩略图，将图层转化为选区，然后点击 “选择—修改—扩展—2像素”，然后根据实际情况看是否需要复制文字图层。</p>
<p>参考链接：</p>
<ul>
<li><p><a href="https://www.jianshu.com/p/c6b6808c39d7">PS打印效果之术以假乱真</a></p>
</li>
<li><p><a href="https://www.jb51.net/photoshop/335683.html">ps怎么做出针式打印机打印效果字体？</a></p>
</li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>ps</tag>
      </tags>
  </entry>
  <entry>
    <title>PS批量压缩&amp;重命名图片</title>
    <url>/archives/31774ac/</url>
    <content><![CDATA[<h2 id="创建重命名动作"><a href="#创建重命名动作" class="headerlink" title="创建重命名动作"></a>创建重命名动作</h2><p>首先打开任意一张图片，然后创建一个新的动作，接着就是记录动作：可以先调整图片的尺寸（如把1080P图片改成720P），然后依次点击<code>文件—存储为</code>将图片保存在文件夹里。完成后点击<code>停止记录动作</code>。</p>
<h2 id="批量重命名图片"><a href="#批量重命名图片" class="headerlink" title="批量重命名图片"></a>批量重命名图片</h2><p>依次点击<code>文件—自动—批处理</code>，打开批处理窗口。接着按以下操作：</p>
<ul>
<li>选择刚才的动作。</li>
<li>选择源文件夹。（图片文件夹）</li>
<li>选择批处理后图片存放位置。（选择上面图片存放文件夹即可）</li>
<li>勾选<code>覆盖动作中的&quot;存储为&quot;命令</code>。</li>
<li>选择重命名格式。</li>
<li>点击<code>确定</code>，开始执行批处理动作。</li>
</ul>
<p><img src="/../img/PS%E6%89%B9%E9%87%8F%E5%8E%8B%E7%BC%A9&%E9%87%8D%E5%91%BD%E5%90%8D%E5%9B%BE%E7%89%87/20200811103621.jpeg"></p>
<h2 id="批量压缩图片"><a href="#批量压缩图片" class="headerlink" title="批量压缩图片"></a>批量压缩图片</h2><p>在上一步保存图片时其实可以适当调整图片大小，如果对图片大小还是不满意的话。可接上一步批量压缩图片。先打开一张图片，然后记录动作：依次点击<code>文件—导出—存储为Web所有格式（旧版）</code>，然后调整大小后保存，完成后点击<code>停止记录动作</code>。接着批量压缩图片可以参考上面的操作。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><div class="note primary">
    <p>之所以不把两个动作合在一起，直接在导出图片时选择—存储为Web所有格式（旧版），是因为如果这样的话，最后图片不能重命名了，不知问题出在哪里，所以干脆就分两步进行了，如果不是对图片大小有过于苛刻的要求的话，只进行第一步就行了。</p>
</div>

<p>​    </p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>ps</tag>
      </tags>
  </entry>
  <entry>
    <title>PS竖屏图片转横屏</title>
    <url>/archives/5f14ae6/</url>
    <content><![CDATA[<p>PS竖屏图片转横屏方法有多种，这里记录一下：</p>
<h3 id="方法一："><a href="#方法一：" class="headerlink" title="方法一："></a>方法一：</h3><p>1.调整图片画布大小。</p>
<p>2.选中图片空白区域， 单击右键选择<code>填充-内容识别</code>，勾选<code>颜色识别</code>，确定。</p>
<p>3.利用<code>仿制图章</code>工具作最后的调整。</p>
<h3 id="方法二："><a href="#方法二：" class="headerlink" title="方法二："></a>方法二：</h3><p>1.套索工具选择主体，单击右键选择<code>存储选取</code>，取消选区。</p>
<p>2.<code>编辑-内容识别缩放</code>，保护选择刚才存储的选区，然后点亮<code>人形图标</code>。</p>
<h3 id="方法三："><a href="#方法三：" class="headerlink" title="方法三："></a>方法三：</h3><p>裁剪时勾选<code>内容识别</code>。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>ps</tag>
      </tags>
  </entry>
  <entry>
    <title>Win10重装系统&amp;清灰记录&amp;整机&amp;护眼</title>
    <url>/archives/88857f5f/</url>
    <content><![CDATA[<div class="note primary">Fn+F2进入bios，Fn+F12选择启动顺序。</div> 

<h3 id="原版系统"><a href="#原版系统" class="headerlink" title="原版系统"></a><del>原版系统</del></h3><ol>
<li><p><del>备份E盘文件到移动硬盘。</del>  </p>
</li>
<li><p><del>进PE，这里使用<a href="http://www.wepe.com.cn/">微pe工具箱</a>。</del></p>
</li>
<li><p><del>将系统iso文件装载到虚拟光驱，然后运行<code>setup.exe</code></del></p>
<ul>
<li><p>先删掉所有分区，然后给C盘分区，大小为：82703M（80*1024+100+16+567+100&#x3D;82703）</p>
</li>
<li><p>安装完系统再用系统自带磁盘管理给D盘和E盘分区，D盘大小为：71780M（70*1024+100&#x3D;71780），剩下的给E盘。</p>
</li>
</ul>
</li>
</ol>
<h3 id="精简系统"><a href="#精简系统" class="headerlink" title="精简系统"></a>精简系统</h3><ol>
<li>备份E盘文件到移动硬盘。</li>
<li>进PE，这里使用<a href="http://www.wepe.com.cn/">微pe工具箱</a>。</li>
<li>用DiskGenius分区，C盘80G，D盘70G，剩余给E盘。注意给C盘分区时，勾选<code>建立ESP分区</code>和<code>建立MSR分区</code>，勾选<code>对齐到此扇区的整数倍</code>，选择<code>2048扇区</code>。给D盘和E盘分区时也要勾选对齐到<code>2048扇区</code>。</li>
<li>用windows安装器安装系统。注意<code>选择安装驱动器的位置</code>为<code>C盘</code>，还有选择相应的安装版本。</li>
</ol>
<h3 id="系统安装记录"><a href="#系统安装记录" class="headerlink" title="系统安装记录"></a>系统安装记录</h3><table>
<thead>
<tr>
<th align="center">序号</th>
<th align="center">日期</th>
<th align="center">版本</th>
</tr>
</thead>
<tbody><tr>
<td align="center">5</td>
<td align="center">2025.2.17</td>
<td align="center">win11 24H2</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">2023.2.19</td>
<td align="center">win11 22H2</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">2022.3.4</td>
<td align="center">win10 21H2</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">2021.8.29</td>
<td align="center">win10 21H1</td>
</tr>
<tr>
<td align="center">1</td>
<td align="center">2020.5.24</td>
<td align="center">win10 2004</td>
</tr>
</tbody></table>
<h3 id="笔记本清灰记录"><a href="#笔记本清灰记录" class="headerlink" title="笔记本清灰记录"></a>笔记本清灰记录</h3><table>
<thead>
<tr>
<th align="center">序号</th>
<th align="center">日期</th>
<th align="center">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">2020.6.18</td>
<td align="center">风扇都没有拆下来清理</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">2022.3.5</td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><p><del>0.办公室旧电脑安装精简版Win7，出现错误<code>Windows could not start the installation process</code>，解决方法：删除分区，重新分区。</del></p>
<p><strong>1.MSVCP120.dll错误</strong></p>
<p>重新安装Visual C++ 2013运行库<br>这是解决MSVCP120.dll问题最彻底的方法。访问微软官方网站下载vcredist_x86.exe（32位系统）或vcredist_x64.exe（64位系统），运行安装程序并按照提示完成安装。安装完成后建议重启计算机以确保所有更改生效。</p>
<h3 id="整机"><a href="#整机" class="headerlink" title="整机"></a>整机</h3><p><code>2022年3月13号购入</code></p>
<p>0.分区：C盘100G D盘200G E盘剩下</p>
<p>1.微星主板按<code>F11</code>选择启动顺序，按<code>Delete</code>进入bios。</p>
<p><del>2.蓝宝石北极狐机箱尺寸：392×185×303（长×宽×高 mm）</del></p>
<p>机箱玻璃摔破了，新机箱尺寸：335×182×423 MM</p>
<p>包装尺寸：460×231×390MM</p>
<p>3.AOC 23.8寸显示器尺寸：长550mm，宽200mm,高430mm</p>
<p>4.aoc键盘 446×143×34</p>
<p>5.调显存大小，重启黑屏。解决方法：拔掉主板电池（拔掉电池的方法见bibi收藏夹，直接将挡板往外按，电池会自动弹起。注意不要用手挡住电池，否则电池无法弹出），5分钟后再装上去。买之前 应该说清楚，不用搞高频，正常使用就好；不用调显存大小，默认就行。默认内建显示配置：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Initiate Graphic Adapter   [PEG]</span><br><span class="line">Integrated Graphics        [Game Mode]</span><br><span class="line">UMA Frame Butter Size      [自动]</span><br></pre></td></tr></table></figure>

<p>估计是直接将显存由<code>4g</code>直接改成<code>自动</code>，第二项没有设置为<code>Game Mode</code>而导致黑屏，无法点亮。</p>
<h3 id="护眼模式"><a href="#护眼模式" class="headerlink" title="护眼模式"></a>护眼模式</h3><p>一、显示设置—夜间模式强度调到30左右。</p>
<p>二、调整颜色：</p>
<p>1、鼠标右键点击【开始】菜单按钮选择【运行】，<br>2、输入 regedit 点击【确定】，<br>3、展开注册表路径至：HKEY_CURRENT_USER\Control Panel, 点击【Colors】文件夹，<br>4、在右侧找到 Window，鼠标右击【Window】选择【修改】，<br>5、将数值数据改为【202 234 206】（豆沙绿）点击【确定】，（初始：255 255 255）</p>
<p>6、定位：<code>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Themes\DefaultColors\Standard</code>，找到Window，双击Window，更改数值：<code>caeace</code> (默认值为ffffff)，选择：十六进制</p>
<p>7、重启电脑，设置生效。</p>
<p>三、右键—个性化—颜色—浅色—打开透明效果—自定义颜色（202 234 206)—勾选<code>在标题栏和窗口边框</code>显示主颜色。</p>
<p>三、浏览器安装保护眼睛插件。<a href="https://chrome.google.com/webstore/detail/eye-protector/fgadnbmmolnmbkbklpaojbogcopipopl">保护眼睛</a></p>
<h3 id="常见问题-1"><a href="#常见问题-1" class="headerlink" title="常见问题"></a>常见问题</h3><p>Windows开始菜单绝对路径：<code>C:\ProgramData\Microsoft\Windows\Start Menu\Programs</code></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>win10</tag>
      </tags>
  </entry>
  <entry>
    <title>Win10 修改host文件的方法</title>
    <url>/archives/fd505a8d/</url>
    <content><![CDATA[<p>1.鼠标右键点击桌面左下角的开始菜单，选择“命令提示符（管理员）</p>
<p>2.在打开的黑色命令提示符窗口中输入 notepad，敲回车；</p>
<p>3.打开的记事本页面中点右上角的文件，然后点打开</p>
<p><code>C:\Windows\System32\drivers\etc\hosts</code></p>
<p>4.在打开的host文件中修改你要添加的内容，最后保存。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>win10</tag>
      </tags>
  </entry>
  <entry>
    <title>chatgpt使用方法</title>
    <url>/archives/692a32c1/</url>
    <content><![CDATA[<p>  <strong>如果使用中转api key，代理地址一定要填如下形式（&#x2F;v1&#x2F;chat&#x2F;completions一定要加上），才能在wx某模块正常使用。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://api.xty.app/v1/chat/completions</span><br></pre></td></tr></table></figure>

<p><strong>不同的客户端需要填写不同的BASE_URL, 请尝试如下地址</strong></p>
<p><a href="https://api.chatgptid.net/">https://api.chatgptid.net/</a> 或<a href="https://api.chatgptid.net/v1">https://api.chatgptid.net/v1</a> 或<a href="https://api.chatgptid.net/v1/chat/completions">https://api.chatgptid.net/v1/chat/completions</a></p>
<hr>
<p>0.解释的更简单些</p>
<p>1.请帮我用两句话总结以下内容：  </p>
<p>2.请帮我（用悲伤的语气）改写以下内容：</p>
<p>3.利用以下内容： 将它改写成一首诗</p>
<p>4.写一篇题为“文章标题”3000字论文，论文末尾附上参考文献</p>
<p>6.常用指令：</p>
<p>形容词：</p>
<p>以中年人语气</p>
<p>以年轻人语气</p>
<p>有趣活泼的</p>
<p>正式的</p>
<p>7.（1）请写出十个吸引人的关于泡咖啡的Instagram post标题</p>
<p>（2）请写出“文章标题”Instagram post内文</p>
<p>8.角色脚本：<a href="https://github.com/f/awesome-chatgpt-prompts">https://github.com/f/awesome-chatgpt-prompts</a></p>
<p>接下来都以中文来回答</p>
<p>9.脚本应用程序：<a href="https://github.com/lencx/ChatGPT">https://github.com/lencx/ChatGPT</a></p>
<p>（1）加载脚本</p>
<p>preference—control center—language model—sync custom—sync （点击sync后，就会把所有脚本加载）</p>
<p>（2）输入“&#x2F;”选择相应角色</p>
<p><strong>10.角色扮演法提问</strong>(一个角色，一个聊天室)</p>
<p>例如：</p>
<blockquote>
<p>请你扮演一位语言学习专家，擅长以有趣的方式教导一般人语言效果。我现在正在学习英文，在英文口说方面有困难，请给我五个练习英文口说的意见</p>
</blockquote>
<p><strong>11.固定角色设定</strong></p>
<p>例一：</p>
<blockquote>
<p>请扮演一个专业文字编辑跟翻译，帮我归纳及重点整理英文内容，请使用简体中文回复，此规则应用所有我们的对话，规则不需要我再重复。</p>
</blockquote>
<p>例二：Email助理</p>
<blockquote>
<p>请扮演一个专业英文助理及翻译，帮助我回覆中文或是英文信件，内容要正式，此规则应用接下来所有对话，不需要我再重复</p>
</blockquote>
<p>例三：回一封信</p>
<blockquote>
<p>请帮我用友善的态度回复以下信件，我刚好那一天有私事不能参加，但很高兴收到邀请，祝活动顺利：”附上原信内容”</p>
</blockquote>
<p>例四：程式码老师</p>
<blockquote>
<p>请扮演一位Python老师，指导我写出我需要的Python程式码，此规则应用所有我们的对话，规则不需要我再重复。</p>
</blockquote>
<p><strong>12.指定作答风格</strong></p>
<p>范例：目标读者为中老年人的新闻报道</p>
<blockquote>
<p>写一篇新闻报道，以中国记者的文笔，生动活泼地介绍过去五个重要的人工智能发展事件给中国的中老年族群，（不要提到“生动活泼地文笔”，不要提到“中老年族群”</p>
</blockquote>
<p>范例：目标读者为年轻读者的社群平台贴文 </p>
<blockquote>
<p>写一篇社群平台贴文,以年轻人编辑的文笔、非正式、casual的方式、加入大量的emoji ,生动活泼地介绍过去五个重要的人工智能发展的事件给中国的年轻族群</p>
</blockquote>
<p>范例：以简短的文字及表格整理作答</p>
<blockquote>
<p>请用一段简短的文字，解释什么是大型语言模型，举例三个语言模型及其特色，以表格呈现。</p>
</blockquote>
<p><strong>13.长篇文章创作</strong></p>
<p>角色扮演+架构建立</p>
<p>（1）范例：指定角色并提案文章标题</p>
<blockquote>
<p>请你扮演人工智慧专家，我要写一篇关于人工智慧的发展与AI人型机器人未来对人类生活的影响的长篇文章，这篇文章会发表在个人部落格，请列出十个吸引人的文章标题</p>
</blockquote>
<p>修改标题：<code>提供类似“AI人型机器人的崛起：改变未来生活的无限可能＂另外五个版本标题</code></p>
<p>（1.1）请写出10个关于“即将被AI取代的工作”文章标题</p>
<p>（2）请写出“AI人型机器人的变革之力：探索未来生活的新篇章”的文章大纲</p>
<p>（3）请按照上面大纲写出“A部分”的内容</p>
<p>（4）写文章常用指令：</p>
<p>rephrase 重写</p>
<p>lengthen 延伸</p>
<p>shorten 浓缩</p>
<p>explain 解释</p>
<p>pull out keywords 抓关键字</p>
<p>（5）重写（rephrase）“一段话”</p>
<p><strong>13.资料归纳整理</strong></p>
<p>范例：</p>
<blockquote>
<p>请扮演一个专业文字编辑及翻译，帮我归纳及重点整理以下新闻，请使用简体中文：“新闻或者是资料内容”</p>
</blockquote>
<p>范例：精准翻译并将专有名词原文附于译文后</p>
<blockquote>
<p>ChatGFT,请扮演一名专业的翻译者，将以下英文论文段落精地翻译成繁体中文，适用于学术论文。在翻译过程中，对于专有名词和带有引号的字词，请在繁体中文译文后用括号附上英文原文。例如：美德(virtue)丶汤姆(Tom)以及被引号包围的字词如”word”。请确保翻译结果字数不超过N个字，并在必要时将原文分成较小的段落进行翻译。</p>
<p>“在这里贴上原文”</p>
<p>根据以上要求，请将这雨个段落分别翻译成繁体中文，并在适当的地方加上英文原文。请注意保持翻译的精准性和一致性，并避免增加原文没有的句子。</p>
</blockquote>
<p><strong>14.ChatPDF</strong></p>
<p><strong>15.ChatGPT标记法</strong>（gpt-4才能使用）</p>
<p>范例：分批输入大量资料，使用@帮资料编号</p>
<blockquote>
<p>我接下来要在多个对话中，提供给你用 「@」编号的文章内容，请先记住，但 请不要摘要，此规则不需我再重复，适 用于接下来你所有回答</p>
</blockquote>
<ol>
<li></li>
</ol>
<blockquote>
<p>先记住@1的文章内容：<br>文章内容</p>
</blockquote>
<p>ps:如果gpt还是给出摘要，提醒：不要摘要，记住规则</p>
<p>2）</p>
<blockquote>
<p>综合总结@1@2@3全部内容</p>
</blockquote>
<p><strong>16.写电脑自动化程式</strong></p>
<p><strong>17.Newbing</strong></p>
<h3 id="附1：bwg无法使用chatgpt"><a href="#附1：bwg无法使用chatgpt" class="headerlink" title="附1：bwg无法使用chatgpt"></a>附1：bwg无法使用chatgpt</h3><p>解决方法：</p>
<ol>
<li>把VPS的IP伪装成家用IP。用warp来伪装，原理就是把VPS的出口流量转发到另一个IP（由cloudfare免费提供）上进行代理。<br>具体操作：在VPS上<code>bash &lt;(curl -fsSL git.io/warp.sh) d</code></li>
<li>直接用一个解锁chatgpt的机场，例如<a href="https://songshuyun.top./">https://songshuyun.top。</a></li>
</ol>
<p>参考：<a href="https://github.com/Alvin9999/new-pac/issues/1407">Chat GPT是不是</a></p>
<blockquote>
<p>PS：有些脚本自带分流，分流种类：</p>
<p><strong>IPv6分流</strong>：</p>
<ul>
<li>可以指定网站只走IPv6，应用场景【1.Google人机验证 2.流媒体解锁】</li>
<li>vps需支持IPv6</li>
</ul>
<p><strong>WARP分流</strong></p>
<ul>
<li>指定网站通过WARP分流 <strong>(如：chatgpt，记得不要设置warp全局，只需要添加openai.com域名即可，不然速度会降低）</strong></li>
</ul>
<p><strong>其他分流</strong></p>
</blockquote>
<h3 id="附2：ChatGPT-设置定时任务"><a href="#附2：ChatGPT-设置定时任务" class="headerlink" title="附2：ChatGPT 设置定时任务"></a>附2：ChatGPT 设置定时任务</h3><p>查看：<a href="/archives/964093b3/#ChatGPT%E8%AE%BE%E7%BD%AE%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1">ChatGPT 设置定时任务</a></p>
<h3 id="附3：ChatGPTsed-替换冒号以及冒号后面内容"><a href="#附3：ChatGPTsed-替换冒号以及冒号后面内容" class="headerlink" title="附3：ChatGPTsed 替换冒号以及冒号后面内容"></a>附3：ChatGPTsed 替换冒号以及冒号后面内容</h3><blockquote>
<p>windows 上使用linux命令，先安装：<a href="https://git-scm.com/downloads">Git for Windows</a></p>
</blockquote>
<p>提问：<code>sed 替换冒号以及冒号后面内容</code></p>
<p>在Linux和macOS系统中，你可以使用<code>sed</code>命令来替换冒号以及冒号后面的内容。<code>sed</code>是一个流编辑器，可以用于在文本中执行替换等操作。下面是使用<code>sed</code>命令替换冒号以及冒号后面的内容的示例：</p>
<p>假设你有一个文本文件名为 <code>example.txt</code>，其内容如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">这是一段文本: 冒号后面的内容将被删除。</span><br><span class="line">另一段文本: 这也会被删除。</span><br><span class="line">这是没有冒号的文本，不会受影响。</span><br></pre></td></tr></table></figure>

<p>使用<code>sed</code>命令删除冒号以及冒号后面的内容：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sed <span class="string">&#x27;s/:.*//&#x27;</span> example.txt &gt; output.txt</span><br></pre></td></tr></table></figure>

<p>执行以上命令后，会生成一个名为 <code>output.txt</code> 的新文件，其内容如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">这是一段文本</span><br><span class="line">另一段文本</span><br><span class="line">这是没有冒号的文本，不会受影响。</span><br></pre></td></tr></table></figure>

<p>解释一下<code>sed</code>命令的含义：</p>
<ul>
<li><code>s/</code> 表示替换操作的开始。</li>
<li><code>:</code> 是要查找的文本，即冒号。</li>
<li><code>.*</code> 表示匹配冒号后的任意字符（包括冒号本身）。</li>
<li><code>/</code> 用于分隔查找的文本和替换的文本。</li>
<li>空格后面的是替换的文本，这里我们用空字符串表示删除匹配到的内容。</li>
<li><code>example.txt</code> 是要处理的输入文件。</li>
<li><code>&gt; output.txt</code> 表示将输出结果重定向到名为 <code>output.txt</code> 的文件。</li>
</ul>
<p>请注意，在执行 <code>sed</code> 命令时，原始文件并没有被直接修改，而是将修改后的内容输出到另一个文件。如果需要直接在原始文件上进行修改，可以使用 <code>-i</code> 参数，不过在使用时要小心，确保备份原始文件以防止数据丢失。例如：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sed -i <span class="string">&#x27;s/:.*//&#x27;</span> example.txt</span><br></pre></td></tr></table></figure>

<p>这样会直接在 <code>example.txt</code> 文件上进行修改。</p>
<blockquote>
<p>PS：合并txt（cmd上操作）： <code>type *txt&gt;&gt;all.txt</code></p>
</blockquote>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>chatgpt</tag>
      </tags>
  </entry>
  <entry>
    <title>debian 10安装xfce桌面和配置vnc和wine</title>
    <url>/archives/26d4b8da/</url>
    <content><![CDATA[<div class="note warning flat"><p>Debian10 上安装部分应用，速度几乎为0，至少需要Debian11以上，512M内存足够。</p>
</div>

<h2 id="安装桌面环境和VNC服务器"><a href="#安装桌面环境和VNC服务器" class="headerlink" title="安装桌面环境和VNC服务器"></a>安装桌面环境和VNC服务器</h2><p>默认情况下，Debian 11的服务器并没有安装图形化桌面环境或VNC服务器，所以你将从安装这些开始。<br>在选择 VNC 服务器和桌面环境方面，您有很多选择。在本教程中，你将安装最新的Xfce桌面环境和TightVNC软件包，这些软件包可从Ubuntu官方仓库获得。Xfce和TightVNC都以轻量级和快速著称，这将有助于确保即使在较慢的互联网连接上，VNC连接也能顺利和稳定。</p>
<p>0.如果新装系统，参考:<a href="/archives/9eb70758/#vi%E6%97%A0%E6%B3%95%E6%AD%A3%E5%B8%B8%E4%BD%BF%E7%94%A8"><code>vi</code> 无法正常使用</a></p>
<p>1.用SSH连接到你的服务器后，更新你的软件包列表。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">sudo apt <span class="keyword">update</span></span><br></pre></td></tr></table></figure>

<p>2.现在在你的服务器上安装Xfce桌面环境，以及<code>xfce4-goodies</code> 包。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">sudo apt install xfce4 xfce4<span class="operator">-</span>goodies</span><br></pre></td></tr></table></figure>

<p>在安装过程中，你可能会被提示为Xfce选择一个默认的显示管理器。显示管理器是一个允许你通过图形界面选择和登录到桌面环境的程序。你只有在用VNC客户端连接时才会使用Xfce，在这些Xfce会话中，你已经以你的非root Debian用户身份登录了。所以在本教程中，你对显示管理器的选择并不重要。选择其中一个，然后按<code>ENTER</code> 。</p>
<p>3.安装完成后，安装TightVNC服务器。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">sudo apt install tightvncserver</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果是debian 11，还需要安装dbus-x11 依赖关系，以确保与VNC服务器的正常连接:<code>sudo apt install tightvncserver</code></p>
</blockquote>
<p>4.为了在安装后完成VNC服务器的初始配置，使用<code>vncserver</code> 命令来设置安全密码并创建初始配置文件。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">vncserver</span><br></pre></td></tr></table></figure>

<p>接下来会有一个提示，要求输入并验证一个密码，以便远程访问你的机器。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Output</span><br><span class="line">You will require a password to access your desktops.</span><br><span class="line"></span><br><span class="line">Password:</span><br><span class="line">Verify:</span><br></pre></td></tr></table></figure>

<p>密码的长度必须在六到八个字符之间。超过八个字符的密码将被自动截断。</p>
<p>一旦你验证了密码，你可以选择创建一个仅供查看的密码。使用只查看密码登录的用户将不能用鼠标或键盘控制VNC实例。如果你想用你的VNC服务器向其他人演示一些东西，这是一个有用的选项，但这不是必需的。<code>Would you like to enter a view-only password (y/n)? n</code></p>
<p>然后，该过程为服务器创建必要的默认配置文件和连接信息。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">OutputWould you like to enter a view-only password (y/n)? n</span><br><span class="line">xauth:  file /home/sammy/.Xauthority does not exist</span><br><span class="line"></span><br><span class="line">New &#x27;X&#x27; desktop is your_hostname:1</span><br><span class="line"></span><br><span class="line">Creating default startup script /home/sammy/.vnc/xstartup</span><br><span class="line">Starting applications specified in /home/sammy/.vnc/xstartup</span><br><span class="line">Log file is /home/sammy/.vnc/your_hostname:1.log</span><br></pre></td></tr></table></figure>

<p>接下来，配置它以启动Xfce并通过图形界面访问服务器。</p>
<p>5.提示<code>执行子进程“dbus-launch”失败</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt-get install dbus-x11</span><br></pre></td></tr></table></figure>

<h2 id="配置VNC服务器"><a href="#配置VNC服务器" class="headerlink" title="配置VNC服务器"></a>配置VNC服务器</h2><p>VNC服务器需要知道启动时要执行哪些命令。具体来说，VNC需要知道它应该连接到哪个图形桌面。</p>
<p>这些命令位于你的主目录下<code>.vnc</code> 文件夹中一个名为<code>xstartup</code> 的配置文件中。启动脚本是在上一步运行<code>vncserver</code> 命令时创建的，但你将创建自己的脚本来启动Xfce桌面。</p>
<p>当VNC第一次被设置时，它在端口<code>5901</code> ，启动一个默认的服务器实例。这个端口被称为<em>显示端口</em>，VNC称其为<code>:1</code> 。VNC可以在其他显示端口启动多个实例，如<code>:2</code> 、<code>:3</code> ，等等。</p>
<p>因为你要改变VNC服务器的配置方式，所以首先用以下命令停止运行在端口<code>5901</code> 的VNC服务器实例。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vncserver -kill :1</span><br></pre></td></tr></table></figure>

<p>以下是针对你的服务器环境的PID的输出。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Output</span><br><span class="line">Killing Xtightvnc process ID 17648</span><br></pre></td></tr></table></figure>

<p>在你修改<code>xstartup</code> 文件之前，先备份原文件。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mv ~/.vnc/xstartup ~/.vnc/xstartup.bak</span><br></pre></td></tr></table></figure>

<p>现在创建一个新的<code>xstartup</code> 文件并在你喜欢的文本编辑器中打开它。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vi ~/.vnc/xstartup</span><br></pre></td></tr></table></figure>

<p>只要你启动或重新启动VNC服务器，该文件中的命令就会自动执行。如果你的桌面环境还没有启动，你需要VNC来启动它。在该文件中添加以下命令。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">xrdb <span class="variable">$HOME</span>/.Xresources</span><br><span class="line">startxfce4 &amp;</span><br></pre></td></tr></table></figure>

<p>下面简要介绍一下每一行的作用。</p>
<ul>
<li><code>#!/bin/bash</code>:第一行是一个<a href="https://link.juejin.cn/?target=https://en.wikipedia.org/wiki/Shebang_(Unix)">shebang</a>。在*nix平台上的可执行纯文本文件中，shebang告诉系统将该文件传递给哪个解释器来执行。在这个例子中，你要把文件传给Bash解释器。这将使每一个连续的行被当作命令来执行，按顺序进行。</li>
<li><code>xrdb $HOME/.Xresources</code>:这个命令告诉VNC的GUI框架读取用户的<code>.Xresources</code> 文件。<code>.Xresources</code> ，用户可以在这里对图形桌面的某些设置进行修改，比如终端颜色、光标主题和字体渲染。</li>
<li><code>startxfce4 &amp;</code>:这个命令告诉服务器启动Xfce。在这里你可以找到所有你需要的图形软件，以便舒适地管理你的服务器。</li>
</ul>
<p>当你完成后，保存并退出你的编辑器。如果你使用的是<code>nano</code> ，你可以通过按<code>CTRL+X</code> ，然后按<code>Y</code> ，再按<code>ENTER</code> 。</p>
<p>为了确保VNC服务器能够正确使用这个新的启动文件，你需要使它可执行。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo chmod +x ~/.vnc/xstartup</span><br></pre></td></tr></table></figure>

<p>现在，重新启动VNC服务器。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vncserver</span><br></pre></td></tr></table></figure>

<p>输出结果将类似于以下内容。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Output</span><br><span class="line">New &#x27;X&#x27; desktop is your_hostname:1</span><br><span class="line"></span><br><span class="line">Starting applications specified in /home/sammy/.vnc/xstartup</span><br><span class="line">Log file is /home/sammy/.vnc/your_hostname:1.log</span><br></pre></td></tr></table></figure>

<h2 id="配置防火墙"><a href="#配置防火墙" class="headerlink" title="配置防火墙"></a>配置防火墙</h2><p>如果你Debian 11正在运行防火墙，并且使用<a href="https://www.myfreax.com/how-to-setup-a-firewall-with-ufw-on-debian-10/">ufw</a>作为<a href="https://www.myfreax.com/how-to-setup-a-firewall-with-ufw-on-debian-10/">防火墙</a>管理工具。则需要打开端口5901的连接。</p>
<p>如果你显示端口是<code>:2</code>。则需要打开端口5902的连接，以此类推，请随时添加你需要允许的端口。</p>
<p>在本教程中我们将打开端口5901，运行ufw命令<code>sudo ufw allow 5901</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo ufw allow 5901</span><br></pre></td></tr></table></figure>

<p>配置到位后，你就可以从你的本地机器连接到VNC服务器了。</p>
<h2 id="安全地连接VNC桌面"><a href="#安全地连接VNC桌面" class="headerlink" title="安全地连接VNC桌面"></a>安全地连接VNC桌面</h2><p>这部分内容参考：<a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-vnc-on-debian-10#step-3-connecting-the-vnc-desktop-securely">Step 3 — Connecting the VNC Desktop Securely</a></p>
<p>我直接用的：<a href="https://www.realvnc.com/en/connect/download/viewer/">VNC Viewer</a></p>
<h2 id="作为系统服务运行VNC"><a href="#作为系统服务运行VNC" class="headerlink" title="作为系统服务运行VNC"></a>作为系统服务运行VNC</h2><p>接下来，你将把VNC服务器设置为一个systemd服务。你可以像其他服务一样，根据需要启动、停止和重启它。这也将确保VNC在你的服务器重启时也能启动。</p>
<p>首先，用你喜欢的文本编辑器创建一个名为<code>/etc/systemd/system/vncserver@.service</code> 的新单元文件。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo vi /etc/systemd/system/vncserver@.service</span><br></pre></td></tr></table></figure>

<p>名字后面的<code>@</code> 符号将让你传入一个参数，你可以在服务配置中使用。你将用它来指定你在管理服务时要使用的VNC显示端口。</p>
<p>在文件中添加以下几行。请确保修改<code>User</code> 、<code>Group</code> 、<code>WorkingDirectory</code> ，以及<code>PIDFILE</code> 中的用户名，以符合你的用户名。</p>
<p><strong>官方：</strong>(如果要用下面配置，先参考：<a href="https://www.digitalocean.com/community/tutorials/initial-server-setup-with-debian-10">Initial Server Setup with Debian 10</a>，进行设置用户名、防火墙等操作)</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Start TightVNC server at startup</span><br><span class="line">After=syslog.target network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">User=sammy</span><br><span class="line">Group=sammy</span><br><span class="line">WorkingDirectory=/home/sammy</span><br><span class="line"></span><br><span class="line">PIDFile=/home/sammy/.vnc/%H:%i.pid</span><br><span class="line">ExecStartPre=-/usr/bin/vncserver -<span class="built_in">kill</span> :%i &gt; /dev/null 2&gt;&amp;1</span><br><span class="line">ExecStart=/usr/bin/vncserver -depth 24 -geometry 1280x800 :%i</span><br><span class="line">ExecStop=/usr/bin/vncserver -<span class="built_in">kill</span> :%i</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<p><strong>修改为：</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Start TightVNC server at startup</span><br><span class="line">After=syslog.target network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">User=root</span><br><span class="line">Group=root</span><br><span class="line">WorkingDirectory=/root</span><br><span class="line"></span><br><span class="line">PIDFile=/root/.vnc/%H:%i.pid</span><br><span class="line">ExecStartPre=-/usr/bin/vncserver -<span class="built_in">kill</span> :%i &gt; /dev/null 2&gt;&amp;1</span><br><span class="line">ExecStart=/usr/bin/vncserver -depth 24 -geometry 1280x800 :%i</span><br><span class="line">ExecStop=/usr/bin/vncserver -<span class="built_in">kill</span> :%i</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<p>如果VNC已经在运行，<code>ExecStartPre</code> 命令会停止它。<code>ExecStart</code> 命令启动VNC，并将色深设置为24位色，分辨率为1280x800。你也可以修改这些启动选项以满足你的需要。完成后保存并关闭该文件。</p>
<p>接下来，让系统知道这个新的单元文件。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo systemctl daemon-reload</span><br></pre></td></tr></table></figure>

<p>然后，启用该单元文件。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo systemctl enable vncserver@1.service</span><br></pre></td></tr></table></figure>

<p><code>@</code> 后面的<code>1</code> 标志着服务应该出现在哪个显示号码上，在这种情况下，默认的<code>:1</code> ，正如在 中讨论的那样。</p>
<p>如果VNC服务器的当前实例仍在运行，请停止它。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vncserver -kill :1</span><br></pre></td></tr></table></figure>

<p>然后像启动其他systemd服务一样启动它。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo systemctl start vncserver@1</span><br></pre></td></tr></table></figure>

<p>你可以用下面的命令来验证它是否启动。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo systemctl status vncserver@1</span><br></pre></td></tr></table></figure>

<p>如果启动正确，输出结果将类似于下面。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Output</span><br><span class="line">● vncserver@1.service - Start TightVNC server at startup</span><br><span class="line">Loaded: loaded (/etc/systemd/system/vncserver@.service; enabled; vendor preset: enabled)</span><br><span class="line">Active: active (running) since Fri 2022-08-19 16:21:36 UTC; 5s ago</span><br><span class="line">Process: 24469 ExecStartPre=/usr/bin/vncserver -kill :1 &gt; /dev/null 2&gt;&amp;1 (code=exited, status=2)</span><br><span class="line">Process: 24474 ExecStart=/usr/bin/vncserver -depth 24 -geometry 1280x800 -localhost :1 (code=exited, status=0/SUCCESS)</span><br><span class="line">Main PID: 24482 (Xtightvnc)</span><br><span class="line">. . .</span><br></pre></td></tr></table></figure>

<p>当你重新启动机器时，你的VNC服务器就可以使用了。</p>
<p>再次启动你的SSH隧道。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ssh -L 5901:127.0.0.1:5901 -C -N -l sammy your_server_ip</span><br></pre></td></tr></table></figure>

<p>然后用你的VNC客户端软件建立一个新的连接，<code>localhost:5901</code> ，连接到你的机器。</p>
<h2 id="Too-many-authentication-failures-VNC-server"><a href="#Too-many-authentication-failures-VNC-server" class="headerlink" title="Too many authentication failures VNC server"></a>Too many authentication failures VNC server</h2><p>解决方法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vncserver -kill :1</span><br><span class="line">vncserver</span><br></pre></td></tr></table></figure>

<h2 id="xfce4-设置中文"><a href="#xfce4-设置中文" class="headerlink" title="xfce4 设置中文"></a>xfce4 设置中文</h2><p>1.安装locales并配置</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt install locales</span><br><span class="line">sudo dpkg-reconfigure locales</span><br></pre></td></tr></table></figure>

<p>进入语言设置界面，其中，空格键为选取&#x2F;取消，Tab键为切换到确认选择。</p>
<p>2.通过方向键与空格键选择语言编码en_US.UTF8，zh_CN GB2312，zh_CN GBK GBK，zh_CN UTF-8 UTF-8</p>
<p>3.然后按Tab选择<OK>，回车进入下一个界面，选择 <code>zh_CN UTF-8 UTF-8</code>为默认系统环境，回车。</p>
<p>4.为当前用户配置默认语言为中文zh_CN UTF-8 UTF-8</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vi ~/.bashrc</span><br><span class="line">在.bashrc最后添加一行</span><br><span class="line">export LANG=zh_CN.UTF-8</span><br></pre></td></tr></table></figure>

<p>5.安装中文字体</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt install fonts-wqy-zenhei</span><br></pre></td></tr></table></figure>

<p>6.重启</p>
<h2 id="Debian-10安装firefox"><a href="#Debian-10安装firefox" class="headerlink" title="Debian 10安装firefox"></a>Debian 10安装firefox</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt upgrade</span><br><span class="line">sudo apt install firefox-esr -y</span><br></pre></td></tr></table></figure>

<h2 id="Debian-10安装wine-7-0"><a href="#Debian-10安装wine-7-0" class="headerlink" title="Debian 10安装wine 7.0"></a>Debian 10安装wine 7.0</h2><blockquote>
<p>貌似debian 10只能装wine 7.0，装不了wine 8.0。debian 11才能安装wine 8.0，wine 8.0可以微信，不过都是乱码，<strong>根本就没必要装wine</strong>，不过还是记录以下</p>
</blockquote>
<h3 id="Step-1-Prerequsiteis"><a href="#Step-1-Prerequsiteis" class="headerlink" title="Step 1: Prerequsiteis"></a>Step 1: Prerequsiteis</h3><p>In order to run Winehq, You need to enable i386 architecture on your Debian system. Also, import the GPG key to your system by which the wine packages are signed.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo dpkg --add-architecture i386  </span><br><span class="line">wget -qO - https://dl.winehq.org/wine-builds/winehq.key | sudo apt-key add - </span><br></pre></td></tr></table></figure>

<p>Use one of the following commands to enable the Wine apt repository in your system based on your operating system and version.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt -y install gnupg2 software-properties-common</span><br><span class="line">sudo apt-add-repository https://dl.winehq.org/wine-builds/debian/ </span><br></pre></td></tr></table></figure>

<h3 id="Step-2-Install-Wine-on-Debian-10"><a href="#Step-2-Install-Wine-on-Debian-10" class="headerlink" title="Step 2: Install Wine on Debian 10"></a>Step 2: Install Wine on Debian 10</h3><p>Your system is ready to install Winehq. Update the apt information with the newly added repositories. Execute the following commands. The <code>--install-recommends</code> option will install all the recommended packages by <strong>winehq-stable</strong> on your system.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt update </span><br><span class="line">sudo apt install --install-recommends winehq-stable </span><br></pre></td></tr></table></figure>

<p>The wine packages are installed under &#x2F;opt&#x2F;wine-stable directory. So set the wine bin directory to the <strong>PATH</strong> environment to access commands system-wide.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export PATH=$PATH:/opt/wine-stable/bin </span><br></pre></td></tr></table></figure>

<h3 id="Step-3-Check-Wine-Version"><a href="#Step-3-Check-Wine-Version" class="headerlink" title="Step 3: Check Wine Version"></a>Step 3: Check Wine Version</h3><p>Wine installation successfully completed. Use the following command to check the version of wine installed on your system</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wine --version </span><br><span class="line"></span><br><span class="line">wine-7.0</span><br></pre></td></tr></table></figure>

<h3 id="How-to-Use-Wine-Optional"><a href="#How-to-Use-Wine-Optional" class="headerlink" title="How to Use Wine (Optional)"></a>How to Use Wine (Optional)</h3><p>To use wine we need to log in to the Debian desktop system. After that download a windows .exe file like <a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html">PuTTY </a>on your system and open it with Wine as below screenshot or use the following command.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wine ~/Downloads/putty.exe </span><br></pre></td></tr></table></figure>

<h2 id="Debian-11安装wine-8-0"><a href="#Debian-11安装wine-8-0" class="headerlink" title="Debian 11安装wine 8.0"></a>Debian 11安装wine 8.0</h2><h3 id="Step-1-Enable-32-bit-architecture"><a href="#Step-1-Enable-32-bit-architecture" class="headerlink" title="Step 1: Enable 32 bit architecture"></a>Step 1: Enable 32 bit architecture</h3><p>If you’re running a 64-bit system, enable support for 32-bit applications.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo dpkg --add-architecture i386</span><br></pre></td></tr></table></figure>

<p>The command above won’t return any output.</p>
<h3 id="Step-2-Add-WineHQ-repository"><a href="#Step-2-Add-WineHQ-repository" class="headerlink" title="Step 2: Add WineHQ repository"></a>Step 2: Add WineHQ repository</h3><p>We will pull the latest Wine packages from WineHQ repository that is added manually.</p>
<p>First, import GPG key:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt -y install gnupg2 software-properties-common</span><br><span class="line">wget -nc https://dl.winehq.org/wine-builds/winehq.key</span><br><span class="line">sudo apt-key add winehq.key</span><br></pre></td></tr></table></figure>

<p>You should receive “<strong>OK</strong>” in the output.</p>
<p>Add the Wine repository by running the following command:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt-add-repository https://dl.winehq.org/wine-builds/debian/</span><br></pre></td></tr></table></figure>

<p>The command will add repository to line <em>&#x2F;etc&#x2F;apt&#x2F;sources.list</em> file.</p>
<p>Update APT package index after:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt update</span><br></pre></td></tr></table></figure>

<h3 id="Using-OBS-repository-Alternative"><a href="#Using-OBS-repository-Alternative" class="headerlink" title="Using OBS repository (Alternative)"></a>Using OBS repository (Alternative)</h3><p>You can also use OBS repository instead of the official repository. Add Wine OBS repository as shown below:</p>
<p><strong>Debian 11:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wget -O- -q https://download.opensuse.org/repositories/Emulators:/Wine:/Debian/Debian_11/Release.key | sudo apt-key add -    </span><br><span class="line">echo &quot;deb http://download.opensuse.org/repositories/Emulators:/Wine:/Debian/Debian_11 ./&quot; | sudo tee /etc/apt/sources.list.d/wine-obs.list</span><br></pre></td></tr></table></figure>

<h3 id="Step-3-Install-Wine-on-Debian-11-10-9"><a href="#Step-3-Install-Wine-on-Debian-11-10-9" class="headerlink" title="Step 3: Install Wine on Debian 11|10|9"></a>Step 3: Install Wine on Debian 11|10|9</h3><p>After configuration of the APT repository, the final step is the actual installation of Wine on Debian.</p>
<p>Then install Wine from Stable branch:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install --install-recommends winehq-stable</span><br></pre></td></tr></table></figure>

<p>The wine packages are installed under &#x2F;opt&#x2F;wine-stable directory. So set the wine bin directory to the <strong>PATH</strong> environment to access commands system-wide.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export PATH=$PATH:/opt/wine-stable/bin </span><br></pre></td></tr></table></figure>

<p>After installation. verify version installed.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ wine --version</span><br><span class="line">wine-8.0</span><br></pre></td></tr></table></figure>

<h3 id="Step-4-Using-Wine-on-Debian"><a href="#Step-4-Using-Wine-on-Debian" class="headerlink" title="Step 4: Using Wine on Debian"></a>Step 4: Using Wine on Debian</h3><p>For basic usage of wine, check help page.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ wine --help</span><br></pre></td></tr></table></figure>

<p>Example below is used to run <a href="https://github.com/notepad-plus-plus/notepad-plus-plus/releases">Notepad++ editor</a> on Linux.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd ~/Downloads</span><br><span class="line">VER=$(curl -s https://api.github.com/repos/notepad-plus-plus/notepad-plus-plus/releases/latest | grep tag_name | cut -d &#x27;&quot;&#x27; -f 4 | sed &#x27;s/v//g&#x27;)</span><br><span class="line">wget https://github.com/notepad-plus-plus/notepad-plus-plus/releases/download/v$&#123;VER&#125;/npp.$&#123;VER&#125;.Installer.exe</span><br><span class="line">wine ./npp.$&#123;VER&#125;.Installer.exe</span><br></pre></td></tr></table></figure>



<p>Follow installation prompts like for any other Windows application.</p>
<h2 id="附：第二种作为系统服务运行VNC"><a href="#附：第二种作为系统服务运行VNC" class="headerlink" title="附：第二种作为系统服务运行VNC"></a>附：第二种作为系统服务运行VNC</h2><p>1.创建systemd服务文件：使用命令 <code>sudo nano /etc/systemd/system/tightvncserver@.service</code>创建一个新的systemd服务文件。</p>
<p>2.编辑systemd服务文件：在文件中填写以下内容：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=TightVNC server</span><br><span class="line">After=syslog.target network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">User=&lt;username&gt;</span><br><span class="line">PAMName=login</span><br><span class="line">PIDFile=/home/&lt;username&gt;/.vnc/%H:%i.pid</span><br><span class="line">ExecStartPre=-/usr/bin/vncserver -<span class="built_in">kill</span> :%i &gt; /dev/null 2&gt;&amp;1</span><br><span class="line">ExecStart=/usr/bin/vncserver :%i</span><br><span class="line">ExecStop=/usr/bin/vncserver -<span class="built_in">kill</span> :%i</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>修改为：</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description<span class="operator">=</span>TightVNC server</span><br><span class="line">After<span class="operator">=</span>syslog.target network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type<span class="operator">=</span>forking</span><br><span class="line"><span class="keyword">User</span><span class="operator">=</span>root</span><br><span class="line">PAMName<span class="operator">=</span>login</span><br><span class="line">PIDFile<span class="operator">=</span><span class="operator">/</span>root<span class="operator">/</span>.vnc<span class="operator">/</span><span class="operator">%</span>H:<span class="operator">%</span>i.pid</span><br><span class="line">ExecStartPre<span class="operator">=</span><span class="operator">-</span><span class="operator">/</span>usr<span class="operator">/</span>bin<span class="operator">/</span>vncserver <span class="operator">-</span>kill :<span class="operator">%</span>i <span class="operator">&gt;</span> <span class="operator">/</span>dev<span class="operator">/</span><span class="keyword">null</span> <span class="number">2</span><span class="operator">&gt;</span><span class="operator">&amp;</span><span class="number">1</span></span><br><span class="line">ExecStart<span class="operator">=</span><span class="operator">/</span>usr<span class="operator">/</span>bin<span class="operator">/</span>vncserver :<span class="operator">%</span>i</span><br><span class="line">ExecStop<span class="operator">=</span><span class="operator">/</span>usr<span class="operator">/</span>bin<span class="operator">/</span>vncserver <span class="operator">-</span>kill :<span class="operator">%</span>i</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy<span class="operator">=</span>multi<span class="operator">-</span>user.target</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>3.重新加载systemd服务：在终端窗口中输入命令 <code>sudo systemctl daemon-reload</code>。</p>
<p>4.启用VNC Server服务：在终端窗口中输入命令 <code>sudo systemctl enable tightvncserver@1</code></p>
<p>5.启动VNC Server服务：在终端窗口中输入命令 <code>sudo systemctl start tightvncserver@1</code></p>
<p>6.检查VNC Server服务状态：在终端窗口中输入命令 <code>systemctl status tightvncserver@1</code>，检查服务是否已启动。</p>
<p>这样，你就可以在Ubuntu系统开机时自动启动VNC Server服务了。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>你现在有了一个安全的VNC服务器并在你的Debian 11服务器上运行。现在，您可以通过一个用户友好和熟悉的图形界面来管理您的文件、软件和设置。您还可以远程运行图形化软件，如网页浏览器。</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><p><a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-vnc-on-debian-10">How to Install and Configure VNC on Debian 10</a></p>
</li>
<li><p><a href="https://juejin.cn/post/7162831879303856164">如何在Debian 11上安装和配置VNC</a></p>
</li>
<li><p><a href="https://www.myfreax.com/how-to-install-and-configure-vnc-on-debian-11/">如何在Debian 11安装VNC</a></p>
</li>
<li><p><a href="https://www.cnblogs.com/KylinBlog/p/16588008.html">xfce4 设置中文</a></p>
</li>
<li><p><a href="https://juejin.cn/s/ubuntu%20vnc%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8">ubuntu vnc开机启动</a></p>
</li>
<li><p><a href="https://www.digitalocean.com/community/tutorials/initial-server-setup-with-debian-10">Initial Server Setup with Debian 10</a></p>
</li>
<li><p><a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-vnc-on-debian-11">How to Install and Configure VNC on Debian 11</a></p>
</li>
<li><p><a href="https://tecadmin.net/install-wine-on-debian-10-buster/">How To Install Wine 7.0 on Debian 10 </a></p>
</li>
<li><p><a href="https://computingforgeeks.com/how-to-install-wine-on-debian/?expand_article=1">How To Install Wine 8 on Debian 11</a></p>
</li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo butterfly主题配置与使用</title>
    <url>/archives/5b629e16/</url>
    <content><![CDATA[<p>开始使用hexo butterfly主题，简单记录一下。主题安装文档网站：<a class="btn-beautify blue larger" href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a></p>
<p>在你的 Hexo 根目录里：  </p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">npm i hexo<span class="literal">-theme-butterfly</span></span><br></pre></td></tr></table></figure>

<p>升级方法：在 Hexo 根目录下，运行：</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">npm update hexo<span class="literal">-theme-butterfly</span></span><br></pre></td></tr></table></figure>

<p>如果无法升级，先修改<code>package.json</code>，然后执行以上命令。</p>
<p>图标无法显示：</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">npm i hexo<span class="literal">-butterfly-extjs</span></span><br></pre></td></tr></table></figure>

<h2 id="Front-matter"><a href="#Front-matter" class="headerlink" title="Front-matter"></a>Front-matter</h2><h3 id="Post-Front-matter"><a href="#Post-Front-matter" class="headerlink" title="Post Front-matter"></a>Post Front-matter</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title:        # 【必需】文章标题</span><br><span class="line">date:         # 【必需】文章创建日期</span><br><span class="line">updated:      # 【可选】文章更新日期</span><br><span class="line">tags:         # 【可选】文章标籤</span><br><span class="line">categories:    # 【可选】文章分类</span><br><span class="line">keywords:      # 【可选】文章关键字</span><br><span class="line">description:   # 【可选】文章描述</span><br><span class="line">top<span class="emphasis">_img:       # 【可选】文章顶部图片</span></span><br><span class="line"><span class="emphasis">comments:      # 【可选】显示文章评论模块(默认 true)</span></span><br><span class="line"><span class="emphasis">cover:         # 【可选】文章缩略图(如果没有设置top_</span>img,文章页顶部将显示缩略图，可设为false/图片地址/留空)       </span><br><span class="line">toc:           # 【可选】显示文章TOC(默认为设置中toc的enable配置)</span><br><span class="line">toc<span class="emphasis">_number:    # 【可选】显示toc_</span>number(默认为设置中toc的number配置)</span><br><span class="line">toc<span class="emphasis">_style_</span>simple:    # 【可选】显示 toc 简洁模式</span><br><span class="line">copyright:           # 【可选】显示文章版权模块(默认为设置中post<span class="emphasis">_copyright的enable配置)</span></span><br><span class="line"><span class="emphasis">copyright_</span>author:    # 【可选】文章版权模块的文章作者</span><br><span class="line">copyright<span class="emphasis">_author_</span>href:    # 【可选】文章版权模块的文章作者链接</span><br><span class="line">copyright<span class="emphasis">_url:            # 【可选】文章版权模块的文章连结链接</span></span><br><span class="line"><span class="emphasis">copyright_</span>info:           # 【可选】文章版权模块的版权声明文字</span><br><span class="line">mathjax:                  # 【可选】显示mathjax(当设置mathjax的per<span class="emphasis">_page: false时，才需要配置，默认 false)</span></span><br><span class="line"><span class="emphasis">katex:                    # 【可选】显示katex(当设置katex的per_</span>page: false时，才需要配置，默认 false)</span><br><span class="line">aplayer:                  # 【可选】在需要的页面加载aplayer的js和css,请参考文章下面的音乐 配置</span><br><span class="line">highlight<span class="emphasis">_shrink:         # 【可选】配置代码框是否展开(true/false)(默认为设置中highlight_</span>shrink的配置)</span><br><span class="line">aside:                    # 【可选】显示侧边栏 (默认 true)</span><br><span class="line">--- </span><br></pre></td></tr></table></figure>

<h3 id="Page-Front-matter"><a href="#Page-Front-matter" class="headerlink" title="Page Front-matter"></a>Page Front-matter</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title:       # 【必需】页面标题</span><br><span class="line">date:        # 【必需】页面创建日期</span><br><span class="line">updated:     # 【可选】页面更新日期</span><br><span class="line">type:        # 【必需】标籤、分类和友情链接三个页面需要配置</span><br><span class="line">comments:    # 【可选】显示页面评论模块(默认 true)</span><br><span class="line">description:  # 【可选】页面描述</span><br><span class="line">keywords:     # 【可选】页面关键字</span><br><span class="line">top<span class="emphasis">_img:      # 【可选】页面顶部图片</span></span><br><span class="line"><span class="emphasis">mathjax:      # 【可选】显示mathjax(当设置mathjax的per_</span>page: false时，才需要配置，默认 false)</span><br><span class="line">katex:        # 【可选】显示katex(当设置katex的per<span class="emphasis">_page: false时，才需要配置，默认 false)</span></span><br><span class="line"><span class="emphasis">aside:        # 【可选】显示侧边栏 (默认 true)</span></span><br><span class="line"><span class="emphasis">aplayer:      # 【可选】在需要的页面加载aplayer的js和css,请参考文章下面的音乐 配置</span></span><br><span class="line"><span class="emphasis">highlight_</span>shrink:  【可选】配置代码框是否展开(true/false)(默认为设置中highlight<span class="emphasis">_shrink的配置)</span></span><br><span class="line"><span class="emphasis">---</span></span><br></pre></td></tr></table></figure>

<h2 id="标签外挂"><a href="#标签外挂" class="headerlink" title="标签外挂"></a>标签外挂</h2><h3 id="Note"><a href="#Note" class="headerlink" title="Note"></a>Note</h3><p>修改 主题配置文件：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">note:</span></span><br><span class="line">  <span class="comment"># Note tag style values:</span></span><br><span class="line">  <span class="comment">#  - simple    bs-callout old alert style. Default.</span></span><br><span class="line">  <span class="comment">#  - modern    bs-callout new (v2-v3) alert style.</span></span><br><span class="line">  <span class="comment">#  - flat      flat callout style with background, like on Mozilla or StackOverflow.</span></span><br><span class="line">  <span class="comment">#  - disabled  disable all CSS styles import of note tag.</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">flat</span></span><br><span class="line">  <span class="attr">icons:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">border_radius:</span> <span class="number">3</span></span><br><span class="line">  <span class="comment"># Offset lighter of background in % for modern and flat styles (modern: -12 | 12; flat: -18 | 6).</span></span><br><span class="line">  <span class="comment"># Offset also applied to label tag variables. This option can work with disabled note tag.</span></span><br><span class="line">  <span class="attr">light_bg_offset:</span> <span class="number">0</span></span><br></pre></td></tr></table></figure>

<div class="tabs" id="note"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="note-1">用法1</button><button type="button" class="tab " data-href="note-2">用法 2（自定义 icon）</button></ul><div class="tab-contents"><div class="tab-item-content active" id="note-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note [class] [no-icon] [style] %&#125;</span><br><span class="line">Any content (support inline tags too.io).</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>名稱</th>
<th>用法</th>
</tr>
</thead>
<tbody><tr>
<td>class</td>
<td>【可選】標識，不同的標識有不同的配色<br>（ default &#x2F; primary &#x2F; success &#x2F; info &#x2F; warning &#x2F; danger ）</td>
</tr>
<tr>
<td>no-icon</td>
<td>【可選】不顯示 icon</td>
</tr>
<tr>
<td>style</td>
<td>【可選】可以覆蓋配置中的 style <br>（simple&#x2F;modern&#x2F;flat&#x2F;disabled）</td>
</tr>
</tbody></table>
<blockquote>
<p>no-icon</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note no-icon %&#125;</span><br><span class="line">默认 提示块标籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default no-icon %&#125;</span><br><span class="line">default 提示块标籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary no-icon %&#125;</span><br><span class="line">primary 提示块标籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success no-icon %&#125;</span><br><span class="line">success 提示块标籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info no-icon %&#125;</span><br><span class="line">info 提示块标籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning no-icon %&#125;</span><br><span class="line">warning 提示块标籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger no-icon %&#125;</span><br><span class="line">danger 提示块标籤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>

<div class="note no-icon flat"><p>默认 提示块标籤</p>
</div>

<div class="note default no-icon flat"><p>default 提示块标籤</p>
</div>

<div class="note primary no-icon flat"><p>primary 提示块标籤</p>
</div>

<div class="note success no-icon flat"><p>success 提示块标籤</p>
</div>

<div class="note info no-icon flat"><p>info 提示块标籤</p>
</div>

<div class="note warning no-icon flat"><p>warning 提示块标籤</p>
</div>

<div class="note danger no-icon flat"><p>danger 提示块标籤</p>
</div>

<blockquote>
<p>flat</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note flat %&#125;</span><br><span class="line">默认 提示块标籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default flat %&#125;</span><br><span class="line">default 提示块标籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary flat %&#125;</span><br><span class="line">primary 提示块标籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success flat %&#125;</span><br><span class="line">success 提示块标籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info flat %&#125;</span><br><span class="line">info 提示块标籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning flat %&#125;</span><br><span class="line">warning 提示块标籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger flat %&#125;</span><br><span class="line">danger 提示块标籤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>

<div class="note flat"><p>默认 提示块标籤</p>
</div>

<div class="note default flat"><p>default 提示块标籤</p>
</div>

<div class="note primary flat"><p>primary 提示块标籤</p>
</div>

<div class="note success flat"><p>success 提示块标籤</p>
</div>

<div class="note info flat"><p>info 提示块标籤</p>
</div>

<div class="note warning flat"><p>warning 提示块标籤</p>
</div>

<div class="note danger flat"><p>danger 提示块标籤</p>
</div></div><div class="tab-item-content" id="note-2"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note [color] [icon] [style] %&#125;</span><br><span class="line">Any content (support inline tags too.io).</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>名稱</th>
<th>用法</th>
</tr>
</thead>
<tbody><tr>
<td>color</td>
<td>【可選】顔色 <br>(default &#x2F; blue &#x2F; pink &#x2F; red &#x2F; purple &#x2F; orange &#x2F; green)</td>
</tr>
<tr>
<td>icon</td>
<td>【可選】可配置自定義 icon (只支持 fontawesome 圖標, 也可以配置 no-icon )</td>
</tr>
<tr>
<td>style</td>
<td>【可選】可以覆蓋配置中的 style<br/>（simple&#x2F;modern&#x2F;flat&#x2F;disabled）</td>
</tr>
</tbody></table>
<blockquote>
<p>no-icon</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note no-icon %&#125;</span><br><span class="line">你是刷 Visa 还是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue no-icon %&#125;</span><br><span class="line">2021年快到了....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink no-icon %&#125;</span><br><span class="line">小心开车 安全至上</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red no-icon %&#125;</span><br><span class="line">这是三片呢？还是四片？</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange no-icon %&#125;</span><br><span class="line">你是刷 Visa 还是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple no-icon %&#125;</span><br><span class="line">剪刀石头布</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green no-icon %&#125;</span><br><span class="line">前端最讨厌的浏览器</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>

<div class="note no-icon flat"><p>你是刷 Visa 还是 UnionPay</p>
</div>
<div class="note blue no-icon flat"><p>2021年快到了….</p>
</div>
<div class="note pink no-icon flat"><p>小心开车 安全至上</p>
</div>
<div class="note red no-icon flat"><p>这是三片呢？还是四片？</p>
</div>
<div class="note orange no-icon flat"><p>你是刷 Visa 还是 UnionPay</p>
</div>
<div class="note purple no-icon flat"><p>剪刀石头布</p>
</div>
<div class="note green no-icon flat"><p>前端最讨厌的浏览器</p>
</div>

<blockquote>
<p>flat</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; flat %&#125;</span><br><span class="line">你是刷 Visa 还是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; flat %&#125;</span><br><span class="line">2021年快到了....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; flat %&#125;</span><br><span class="line">小心开车 安全至上</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; flat%&#125;</span><br><span class="line">这是三片呢？还是四片？</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; flat %&#125;</span><br><span class="line">你是刷 Visa 还是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; flat %&#125;</span><br><span class="line">剪刀石头布</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; flat %&#125;</span><br><span class="line">前端最讨厌的浏览器</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>

<div class="note icon-padding flat"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 还是 UnionPay</p>
</div>
<div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了….</p>
</div>
<div class="note pink icon-padding flat"><i class="note-icon fas fa-car-crash"></i><p>小心开车 安全至上</p>
</div>
<div class="note red icon-padding flat"><i class="note-icon fas fa-fan"></i><p>这是三片呢？还是四片？</p>
</div>
<div class="note orange icon-padding flat"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 还是 UnionPay</p>
</div>
<div class="note purple icon-padding flat"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石头布</p>
</div>
<div class="note green icon-padding flat"><i class="note-icon fab fa-internet-explorer"></i><p>前端最讨厌的浏览器</p>
</div></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>

<h3 id="Tabs"><a href="#Tabs" class="headerlink" title="Tabs"></a>Tabs</h3><p>使用方法：</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% tabs Unique name, [index] %&#125;</span><br><span class="line">&lt;!-- tab [Tab caption] [@icon] --&gt;</span><br><span class="line">Any content (support inline tags too).</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br><span class="line"></span><br><span class="line">Unique name   : Unique name of tabs block tag without comma.</span><br><span class="line"><span class="code">                Will be used in #id&#x27;s as prefix for each tab with their index numbers.</span></span><br><span class="line"><span class="code">                If there are whitespaces in name, for generate #id all whitespaces will replaced by dashes.</span></span><br><span class="line"><span class="code">                Only for current url of post/page must be unique!</span></span><br><span class="line"><span class="code">[index]       : Index number of active tab.</span></span><br><span class="line"><span class="code">                If not specified, first tab (1) will be selected.</span></span><br><span class="line"><span class="code">                If index is -1, no tab will be selected. It&#x27;s will be something like spoiler.</span></span><br><span class="line"><span class="code">                Optional parameter.</span></span><br><span class="line"><span class="code">[Tab caption] : Caption of current tab.</span></span><br><span class="line"><span class="code">                If not caption specified, unique name with tab index suffix will be used as caption of tab.</span></span><br><span class="line"><span class="code">                If not caption specified, but specified icon, caption will empty.</span></span><br><span class="line"><span class="code">                Optional parameter.</span></span><br><span class="line"><span class="code">[@icon]       : FontAwesome icon name (full-name, look like &#x27;fas fa-font&#x27;)</span></span><br><span class="line"><span class="code">                Can be specified with or without space; e.g. &#x27;Tab caption @icon&#x27; similar to &#x27;Tab caption@icon&#x27;.</span></span><br><span class="line"><span class="code">                Optional parameter.</span></span><br></pre></td></tr></table></figure>

<div class="note primary no-icon flat"><p>Demo 1 - 预设选择第一个【默认】</p>
</div>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% tabs 方法 %&#125;</span><br><span class="line">&lt;!-- tab 方法一 --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 方法二 --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 方法三 --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure>

<div class="tabs" id="方法"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="方法-1">方法一</button><button type="button" class="tab " data-href="方法-2">方法二</button><button type="button" class="tab " data-href="方法-3">方法三</button></ul><div class="tab-contents"><div class="tab-item-content active" id="方法-1"><p><strong>This is Tab 1.</strong></p></div><div class="tab-item-content" id="方法-2"><p><strong>This is Tab 2.</strong></p></div><div class="tab-item-content" id="方法-3"><p><strong>This is Tab 3.</strong></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>

<div class="note primary no-icon flat"><p>Demo 4 - 自定义Tab名 + 只有icon + icon和Tab名</p>
</div>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% tabs test4 %&#125;</span><br><span class="line">&lt;!-- tab 第一个Tab --&gt;</span><br><span class="line"><span class="strong">**tab名字为第一个Tab**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab @fab fa-apple-pay --&gt;</span><br><span class="line"><span class="strong">**只有图标 没有Tab名字**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 炸弹@fas fa-bomb --&gt;</span><br><span class="line"><span class="strong">**名字+icon**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure>

<div class="tabs" id="test4"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="test4-1">第一个Tab</button><button type="button" class="tab " data-href="test4-2"><i class="fab fa-apple-pay" style="text-align: center;"></i></button><button type="button" class="tab " data-href="test4-3"><i class="fas fa-bomb"></i>炸弹</button></ul><div class="tab-contents"><div class="tab-item-content active" id="test4-1"><p><strong>tab名字为第一个Tab</strong></p></div><div class="tab-item-content" id="test4-2"><p><strong>只有图标 没有Tab名字</strong></p></div><div class="tab-item-content" id="test4-3"><p><strong>名字+icon</strong></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>

<h3 id="Button"><a href="#Button" class="headerlink" title="Button"></a>Button</h3><p>使用方法：</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% btn [url],[text],[icon],[color] [style] [layout] [position] [size] %&#125;</span><br><span class="line"></span><br><span class="line">[url]         : 链接</span><br><span class="line">[text]        : 按钮文字</span><br><span class="line">[icon]        : [可选] 图标</span><br><span class="line">[color]       : [可选] 按钮背景顔色(默认style时）</span><br><span class="line"><span class="code">                      按钮字体和边框顔色(outline时)</span></span><br><span class="line"><span class="code">                      default/blue/pink/red/purple/orange/green</span></span><br><span class="line"><span class="code">[style]       : [可选] 按钮样式 默认实心</span></span><br><span class="line"><span class="code">                      outline/留空</span></span><br><span class="line"><span class="code">[layout]      : [可选] 按钮佈局 默认为line</span></span><br><span class="line"><span class="code">                      block/留空</span></span><br><span class="line"><span class="code">[position]    : [可选] 按钮位置 前提是设置了layout为block 默认为左边</span></span><br><span class="line"><span class="code">                      center/right/留空</span></span><br><span class="line"><span class="code">[size]        : [可选] 按钮大小</span></span><br><span class="line"><span class="code">                      larger/留空</span></span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,blue larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,pink larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,red larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,purple larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,orange larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,green larger %&#125;</span><br></pre></td></tr></table></figure>

<a class="btn-beautify larger" href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify blue larger" href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify pink larger" href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify red larger" href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify purple larger" href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify orange larger" href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify green larger" href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,block blue larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,block center pink larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,block right red larger %&#125;</span><br></pre></td></tr></table></figure>

<a class="btn-beautify block blue larger" href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify block center pink larger" href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify block right red larger" href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>

<h3 id="label"><a href="#label" class="headerlink" title="label"></a>label</h3><p>高亮所需的文字</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% label text color %&#125;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>text</th>
<th>文字</th>
</tr>
</thead>
<tbody><tr>
<td>參數</td>
<td>解釋</td>
</tr>
<tr>
<td>color</td>
<td>【可選】背景顏色，默認為 <code>default</code><br />default&#x2F;blue&#x2F;pink&#x2F;red&#x2F;purple&#x2F;orange&#x2F;green</td>
</tr>
</tbody></table>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">臣亮言：&#123;% label 先帝 %&#125;创业未半，而&#123;% label 中道崩殂 blue %&#125;。今天下三分，&#123;% label 益州疲敝 pink %&#125;，此诚&#123;% label 危急存亡之秋 red %&#125;也！然侍衞之臣，不懈于内；&#123;% label 忠志之士 purple %&#125;，忘身于外者，盖追先帝之殊遇，欲报之于陛下也。诚宜开张圣听，以光先帝遗德，恢弘志士之气；不宜妄自菲薄，引喻失义，以塞忠谏之路也。</span><br><span class="line">宫中、府中，俱为一体；陟罚臧否，不宜异同。若有&#123;% label 作奸 orange %&#125;、&#123;% label 犯科 green %&#125;，及为忠善者，宜付有司，论其刑赏，以昭陛下平明之治；不宜偏私，使内外异法也。</span><br></pre></td></tr></table></figure>

<p>臣亮言：<mark class="hl-label default">先帝</mark> 创业未半，而<mark class="hl-label blue">中道崩殂</mark> 。今天下三分，<mark class="hl-label pink">益州疲敝</mark> ，此诚<mark class="hl-label red">危急存亡之秋</mark> 也！然侍衞之臣，不懈于内；<mark class="hl-label purple">忠志之士</mark> ，忘身于外者，盖追先帝之殊遇，欲报之于陛下也。诚宜开张圣听，以光先帝遗德，恢弘志士之气；不宜妄自菲薄，引喻失义，以塞忠谏之路也。<br>宫中、府中，俱为一体；陟罚臧否，不宜异同。若有<mark class="hl-label orange">作奸</mark> 、<mark class="hl-label green">犯科</mark> ，及为忠善者，宜付有司，论其刑赏，以昭陛下平明之治；不宜偏私，使内外异法也。</p>
<h3 id="timeline"><a href="#timeline" class="headerlink" title="timeline"></a>timeline</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% timeline title,color %&#125;</span><br><span class="line">&lt;!-- timeline title --&gt;</span><br><span class="line">xxxxx</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&lt;!-- timeline title --&gt;</span><br><span class="line">xxxxx</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>參數</th>
<th>解釋</th>
</tr>
</thead>
<tbody><tr>
<td>title</td>
<td>標題&#x2F;時間線</td>
</tr>
<tr>
<td>color</td>
<td>timeline 顏色<br />default(留空) &#x2F; blue &#x2F; pink &#x2F; red &#x2F; purple &#x2F; orange &#x2F; green</td>
</tr>
</tbody></table>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% timeline 2022 %&#125;</span><br><span class="line">&lt;!-- timeline 01-02 --&gt;</span><br><span class="line">这是测试页面</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure>

<div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>2022</p>
</div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>01-02</p>
</div></div><div class='timeline-item-content'><p>这是测试页面</p>
</div></div></div>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% timeline 2022,blue %&#125;</span><br><span class="line">&lt;!-- timeline 01-02 --&gt;</span><br><span class="line">这是测试页面</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure>

<div class="timeline blue"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>2022</p>
</div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>01-02</p>
</div></div><div class='timeline-item-content'><p>这是测试页面</p>
</div></div></div>

<h3 id="tag-hide"><a href="#tag-hide" class="headerlink" title="tag-hide"></a>tag-hide</h3><div class="note warning flat"><p>2.2.0以上提供</p>
<p>請注意，tag-hide內的標簽外掛content內都不建議有h1 - h6 等標題。因為Toc會把隱藏內容標題也顯示出來，而且當滾動屏幕時，如果隱藏內容沒有顯示出來，會導致Toc的滾動出現異常。</p>
</div>

<p>如果你想把一些文字、內容隱藏起來，並提供按鈕讓用戶點擊顯示。可以使用這個標籤外掛。</p>
<div class="tabs" id="tag-hide"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="tag-hide-1">Toggle</button><button type="button" class="tab " data-href="tag-hide-2">Inline</button><button type="button" class="tab " data-href="tag-hide-3">Block</button></ul><div class="tab-contents"><div class="tab-item-content active" id="tag-hide-1"><blockquote>
<p>2.3.0以上支持</p>
</blockquote>
<p>如果你需要展示的內容太多，可以把它隱藏在收縮框裏，需要時再把它展開。</p>
<p>( display 不能包含英文逗號，可用<code>&amp;sbquo;</code>)</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% hideToggle display,bg,color %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endhideToggle %&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Demo</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% hideToggle Butterfly安裝方法 %&#125;</span><br><span class="line">在你的博客根目錄裏</span><br><span class="line"></span><br><span class="line">git clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/Butterfly</span><br><span class="line"></span><br><span class="line">如果想要安裝比較新的dev分支，可以</span><br><span class="line"></span><br><span class="line">git clone -b dev https://github.com/jerryc127/hexo-theme-butterfly.git themes/Butterfly</span><br><span class="line"></span><br><span class="line">&#123;% endhideToggle %&#125;</span><br></pre></td></tr></table></figure>

<details class="toggle" ><summary class="toggle-button" style="">Butterfly安裝方法</summary><div class="toggle-content"><p>在你的博客根目錄裏</p>
<p>git clone -b master <a href="https://github.com/jerryc127/hexo-theme-butterfly.git">https://github.com/jerryc127/hexo-theme-butterfly.git</a> themes&#x2F;Butterfly</p>
<p>如果想要安裝比較新的dev分支，可以</p>
<p>git clone -b dev <a href="https://github.com/jerryc127/hexo-theme-butterfly.git">https://github.com/jerryc127/hexo-theme-butterfly.git</a> themes&#x2F;Butterfly</p>
</div></details></div><div class="tab-item-content" id="tag-hide-2"><p><code>inline</code> 在文本里面添加按鈕隱藏內容，只限文字</p>
<p>( content不能包含英文逗號，可用<code>&amp;sbquo;</code>)</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% hideInline content,display,bg,color %&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>content: 文本內容</p>
</li>
<li><p>display: 按鈕顯示的文字(可選)</p>
</li>
<li><p>bg: 按鈕的背景顏色(可選)</p>
</li>
<li><p>color: 按鈕文字的顏色(可選)</p>
</li>
</ul>
<blockquote>
<p>Demo</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">哪個英文字母最酷？ &#123;% hideInline 因為西裝褲(C裝酷),查看答案,#FF7242,#fff %&#125;</span><br><span class="line"></span><br><span class="line">門裏站着一個人? &#123;% hideInline 閃 %&#125;</span><br></pre></td></tr></table></figure>

<p>哪個英文字母最酷？ <span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案<br>  </button><span class="hide-content">因為西裝褲(C裝酷)</span></span></p>
<p>門裏站着一個人? <span class="hide-inline"><button type="button" class="hide-button" style="">Click<br>  </button><span class="hide-content">閃</span></span></p></div><div class="tab-item-content" id="tag-hide-3"><p><code>block</code>獨立的block隱藏內容，可以隱藏很多內容，包括圖片，代碼塊等等</p>
<p>( display 不能包含英文逗號，可用<code>&amp;sbquo;</code>)</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% hideBlock display,bg,color %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>content: 文本內容</li>
<li>display: 按鈕顯示的文字(可選)</li>
<li>bg: 按鈕的背景顏色(可選)</li>
<li>color: 按鈕文字的顏色(可選)</li>
</ul>
<blockquote>
<p>Demo</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">查看答案</span><br><span class="line">&#123;% hideBlock 查看答案 %&#125;</span><br><span class="line">傻子，怎麼可能有答案</span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure>

<p>查看答案</p>
<div class="hide-block"><button type="button" class="hide-button" style="">查看答案
    </button><div class="hide-content"><p>傻子，怎麼可能有答案</p>
</div></div></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>

<h3 id="flink"><a href="#flink" class="headerlink" title="flink"></a>flink</h3><p>可在任何界面插入類似友情鏈接列表效果</p>
<p>內容格式與友情鏈接界面一樣，支持 yml 格式</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% flink %&#125;</span><br><span class="line">xxxxxx</span><br><span class="line">&#123;% endflink %&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% flink %&#125;</span><br><span class="line"><span class="bullet">-</span> class<span class="emphasis">_name: 友情鏈接</span></span><br><span class="line"><span class="emphasis">  class_</span>desc: 那些人，那些事</span><br><span class="line">  link<span class="emphasis">_list:</span></span><br><span class="line"><span class="emphasis">    - name: JerryC</span></span><br><span class="line"><span class="emphasis">      link: https://jerryc.me/</span></span><br><span class="line"><span class="emphasis">      avatar: https://jerryc.me/img/avatar.png</span></span><br><span class="line"><span class="emphasis">      descr: 今日事,今日畢</span></span><br><span class="line"><span class="emphasis">    - name: Hexo</span></span><br><span class="line"><span class="emphasis">      link: https://hexo.io/zh-tw/</span></span><br><span class="line"><span class="emphasis">      avatar: https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg</span></span><br><span class="line"><span class="emphasis">      descr: 快速、簡單且強大的網誌框架</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">- class_</span>name: 網站</span><br><span class="line">  class<span class="emphasis">_desc: 值得推薦的網站</span></span><br><span class="line"><span class="emphasis">  link_</span>list:</span><br><span class="line"><span class="bullet">    -</span> name: Youtube</span><br><span class="line"><span class="code">      link: https://www.youtube.com/</span></span><br><span class="line"><span class="code">      avatar: https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png</span></span><br><span class="line"><span class="code">      descr: 視頻網站</span></span><br><span class="line"><span class="code">    - name: Weibo</span></span><br><span class="line"><span class="code">      link: https://www.weibo.com/</span></span><br><span class="line"><span class="code">      avatar: https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png</span></span><br><span class="line"><span class="code">      descr: 中國最大社交分享平臺</span></span><br><span class="line"><span class="code">    - name: Twitter</span></span><br><span class="line"><span class="code">      link: https://twitter.com/</span></span><br><span class="line"><span class="code">      avatar: https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png</span></span><br><span class="line"><span class="code">      descr: 社交分享平臺</span></span><br><span class="line"><span class="code">&#123;% endflink %&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="引入Aplayer播放音乐"><a href="#引入Aplayer播放音乐" class="headerlink" title="引入Aplayer播放音乐"></a>引入Aplayer播放音乐</h2><p><strong>PS：未测试</strong></p>
<ol>
<li><p>在博客根目录[Blogroot]下打开终端，运行以下指令安装hexo-tag-aplayer插件：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-tag-aplayer --save</span><br></pre></td></tr></table></figure>
</li>
<li><p>在站点配置文件<code>[Blogroot]\_config.yml</code>中新增配置项，建议直接加在最底下：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># APlayer</span></span><br><span class="line"><span class="comment"># https://github.com/MoePlayer/hexo-tag-aplayer/blob/master/docs/README-zh_cn.md</span></span><br><span class="line"><span class="attr">aplayer:</span></span><br><span class="line">  <span class="attr">meting:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">asset_inject:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>修改主题配置文件<code>[Blogroot]\_config.butterfly.yml</code>中关于Aplayer的配置内容</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Inject the css and script (aplayer/meting)</span></span><br><span class="line"><span class="attr">aplayerInject:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在主题配置文件<code>[Blogroot]\_config.butterfly.yml</code>的inject配置项中添加Aplayer的容器。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">  <span class="attr">bottom:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;div</span> <span class="string">class=&quot;aplayer</span> <span class="literal">no</span><span class="string">-destroy&quot;</span> <span class="string">data-id=&quot;5183531430&quot;</span> <span class="string">data-server=&quot;netease&quot;</span> <span class="string">data-type=&quot;playlist&quot;</span> <span class="string">data-fixed=&quot;true&quot;</span> <span class="string">data-mini=&quot;true&quot;</span> <span class="string">data-listFolded=&quot;false&quot;</span> <span class="string">data-order=&quot;random&quot;</span> <span class="string">data-preload=&quot;none&quot;</span> <span class="string">data-autoplay=&quot;false&quot;</span> <span class="string">muted&gt;&lt;/div&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在博客根目录<code>[Blogroot]</code>下打开终端，运行以下指令</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure>
</li>
<li><p>关于更换歌单的问题，大部分同学都因为只更改了data-id的值，所以出现歌单加载不出的情况，此处需要注意，data-id、data-server、data-type分别对应了<code>歌单的id，歌单的服务商、歌单的类型</code><del>（感觉自己说了废话）</del>，所以需要确认这三项是一一对应的。</p>
<p>如图中所示，找到网易云歌单的url，<code>https://music.163.com/#/playlist?id=4907060762</code>,此处的palylist对应的就是data-type的值，id就是data-id的值，而网易云的data-server为netease，这个可以通过Aplayer的插件文档查阅到。<strong>只有三个参数对应正确才能正常加载歌单。</strong></p>
</li>
<li><p>Aplayer的网易云歌单接口时不时的会挂掉，所以如果你确定你配置正确，但是歌单还是没有出现。不妨去看看其他人的站点是不是也没有Aplayer标签了来判断是Aplayer本身接口的问题还是自己配置出错的问题。</p>
</li>
<li><p>配置成功后会发现Aplayer的吸底标签一直占据着左下角的一片空间，对手机端阅读不太友好，可以添加一下CSS样式使其自动缩进隐藏。在 <code>[Blogroot]\themes\butterfly\source\css\custom.css</code>中(没有这个文件就按照路径自己新建)添加如下内容：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.aplayer</span><span class="selector-class">.aplayer-fixed</span><span class="selector-class">.aplayer-narrow</span> <span class="selector-class">.aplayer-body</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: -<span class="number">66px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="comment">/* 默认情况下缩进左侧66px，只留一点箭头部分 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.aplayer</span><span class="selector-class">.aplayer-fixed</span><span class="selector-class">.aplayer-narrow</span> <span class="selector-class">.aplayer-body</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="comment">/* 鼠标悬停是左侧缩进归零，完全显示按钮 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>9.不要忘了到主题配置文件引入自定义样式，修改<code>[Blogroot]_config.butterfly.yml</code>的<code>inject</code>配置项：</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">  inject:</span><br><span class="line">    head:</span><br><span class="line"><span class="addition">+     - &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/custom.css&quot;  media=&quot;defer&quot; onload=&quot;this.media=&#x27;all&#x27;&quot;&gt;</span></span><br><span class="line">    bottom:</span><br><span class="line">      - &lt;div class=&quot;aplayer no-destroy&quot; data-id=&quot;5183531430&quot; data-server=&quot;netease&quot; data-type=&quot;playlist&quot; data-fixed=&quot;true&quot; data-mini=&quot;true&quot; data-listFolded=&quot;false&quot; data-order=&quot;random&quot; data-preload=&quot;none&quot; data-autoplay=&quot;false&quot; muted&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>10.更多自定义样式魔改内容详见站内教程：<a href="https://akilar.top/posts/ebf20e02/">Custom Beautify</a></p>
</li>
</ol>
<h2 id="引入自定义-css"><a href="#引入自定义-css" class="headerlink" title="引入自定义 css"></a>引入自定义 css</h2><p>在站点配置文件 blog&#x2F;_config.blog.yml 中，搜索定位到 inject，插入以下内容：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="comment"># - &lt;link rel=&quot;stylesheet&quot; href=&quot;/xxx.css&quot;&gt;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/custom.css&quot;&gt;</span></span><br></pre></td></tr></table></figure>

<p>这样，后续所有样式的自定义，就可以在 blog&#x2F;source&#x2F;css&#x2F;custom.css 文件中进行，能不动主题源码，就不要改源码，以免后续更新变得复杂。</p>
<h3 id="H1-H6-小风车样式修改"><a href="#H1-H6-小风车样式修改" class="headerlink" title="H1~H6 小风车样式修改"></a>H1~H6 小风车样式修改</h3><p>方法一：</p>
<p>找到主题配置文件<code>_config.butterfly.yml</code></p>
<p>1.把beautify的title-prefix-icon处修改为:’\f863’</p>
<p>（如果没有开启图标功能则需要将enable设置为true）</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">beautify:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">title-prefix-icon:</span> <span class="string">&#x27;\f863&#x27;</span></span><br></pre></td></tr></table></figure>

<p>2.在inject的head处引入以下文件:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;&lt;style&gt;#article-container.post-content h1:before, h2:before, h3:before, h4:before, h5:before, h6:before &#123; -webkit-animation: avatar_turn_around 1s linear infinite; -moz-animation: avatar_turn_around 1s linear infinite; -o-animation: avatar_turn_around 1s linear infinite; -ms-animation: avatar_turn_around 1s linear infinite; animation: avatar_turn_around 1s linear infinite; &#125;&lt;/style&gt;&quot;</span></span><br></pre></td></tr></table></figure>

<p>重新部署，启动，就可以看到效果啦。</p>
<p>方法二：</p>
<p>1.主题目录：</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">beautify:</span><br><span class="line">  enable: true</span><br><span class="line">  field: post # site/post</span><br><span class="line">  # title-prefix-icon: &#x27;\f0c1&#x27; </span><br><span class="line"><span class="addition">+  title-prefix-icon: &#x27;\f863&#x27;</span></span><br><span class="line">  title-prefix-icon-color: &#x27;#F47466&#x27;</span><br></pre></td></tr></table></figure>

<p>2.让小风车转起来,在上文的 <code>blog/source/css/custom.css</code> 文件中，加入以下代码即可。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 文章页H1-H6图标样式效果 */</span></span><br><span class="line"><span class="selector-tag">h1</span><span class="selector-pseudo">::before</span>, <span class="selector-tag">h2</span><span class="selector-pseudo">::before</span>, <span class="selector-tag">h3</span><span class="selector-pseudo">::before</span>, <span class="selector-tag">h4</span><span class="selector-pseudo">::before</span>, <span class="selector-tag">h5</span><span class="selector-pseudo">::before</span>, <span class="selector-tag">h6</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    -webkit-<span class="attribute">animation</span>: ccc <span class="number">1.6s</span> linear infinite ;</span><br><span class="line">    <span class="attribute">animation</span>: ccc <span class="number">1.6s</span> linear infinite ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@-webkit-keyframes</span> ccc &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        -webkit-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        -webkit-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">1turn</span>);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">1turn</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> ccc &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        -webkit-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        -webkit-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">1turn</span>);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">1turn</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.小风车颜色 css 代码</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h1</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#ef50a8</span> ;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">1.55rem</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1.3rem</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: -<span class="number">0.23rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h2</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fb7061</span> ;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">1.35rem</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1.1rem</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: -<span class="number">0.12rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h3</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#ffbf00</span> ;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">1.22rem</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0.95rem</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: -<span class="number">0.09rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h4</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#a9e000</span> ;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">1.05rem</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0.8rem</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: -<span class="number">0.09rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h5</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#57c850</span> ;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">0.9rem</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0.7rem</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">0.0rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h6</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#5ec1e0</span> ;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">0.9rem</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0.66rem</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">0.0rem</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>修改风车图标大小：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h1</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#ef50a8</span> ;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">31px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">26px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: -<span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h2</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fb7061</span> ;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">27px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">22px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: -<span class="number">3px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h3</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#ffbf00</span> ;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">25px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: -<span class="number">2px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h4</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#a9e000</span> ;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: -<span class="number">2px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h5</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#57c850</span> ;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h6</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#5ec1e0</span> ;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.小风车 hover 效果</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h1</span><span class="selector-pseudo">:hover</span>, <span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h2</span><span class="selector-pseudo">:hover</span>, <span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h3</span><span class="selector-pseudo">:hover</span>, <span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h4</span><span class="selector-pseudo">:hover</span>, <span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h5</span><span class="selector-pseudo">:hover</span>, <span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h6</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#49b1f5</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h1</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::before</span>, <span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h2</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::before</span>, <span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h3</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::before</span>, <span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h4</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::before</span>, <span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h5</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::before</span>, <span class="selector-id">#content-inner</span><span class="selector-class">.layout</span> <span class="selector-tag">h6</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#49b1f5</span> ;</span><br><span class="line">    -webkit-<span class="attribute">animation</span>: ccc <span class="number">3.2s</span> linear infinite ;</span><br><span class="line">    <span class="attribute">animation</span>: ccc <span class="number">3.2s</span> linear infinite ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="修改标题前图标为闪电"><a href="#修改标题前图标为闪电" class="headerlink" title="修改标题前图标为闪电"></a>修改标题前图标为闪电</h3><p>修改标题前图标为闪电：<code>title-prefix-icon:&#39;\f0e7&#39;</code>，颜色为黄色： <code>title-prefix-icon-color: &quot;#ffb821&quot;</code></p>
<h3 id="页面设置图标转速"><a href="#页面设置图标转速" class="headerlink" title="页面设置图标转速"></a>页面设置图标转速</h3><p><code>blog/source/css/custom.css</code> 文件中，加入以下代码：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 页面设置icon转动速度调整 */</span></span><br><span class="line"><span class="selector-id">#rightside_config</span> <span class="selector-tag">i</span><span class="selector-class">.fas</span><span class="selector-class">.fa-cog</span><span class="selector-class">.fa-spin</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>: fa-spin <span class="number">5s</span> linear infinite ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="页面插入-B-站视频-x2F-Bilibili"><a href="#页面插入-B-站视频-x2F-Bilibili" class="headerlink" title="页面插入 B 站视频 &#x2F; Bilibili"></a>页面插入 B 站视频 &#x2F; Bilibili</h3><p>直接复制插入你的 md 文章就行，修改里面的 aid 为你的视频 id：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">center</span> <span class="attr">class</span>=<span class="string">&quot;aspect-ratio&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;https://player.bilibili.com/player.html?aid=9926758&amp;&amp;page=1&amp;as_wide=1&amp;high_quality=1&amp;danmaku=0&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">scrolling</span>=<span class="string">&quot;no&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">border</span>=<span class="string">&quot;0&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">frameborder</span>=<span class="string">&quot;no&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">framespacing</span>=<span class="string">&quot;0&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">high_quality</span>=<span class="string">1</span></span></span><br><span class="line"><span class="tag">    <span class="attr">danmaku</span>=<span class="string">1</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">allowfullscreen</span>=<span class="string">&quot;true&quot;</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>修改 css 样式，记得去 <code>blog/source/css/custom.css</code> 里，添加上述的样式：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*哔哩哔哩视频适配*/</span></span><br><span class="line"><span class="selector-class">.aspect-ratio</span> &#123;<span class="attribute">position</span>: relative;<span class="attribute">width</span>: <span class="number">100%</span>;<span class="attribute">height</span>: <span class="number">0</span>;<span class="attribute">padding-bottom</span>: <span class="number">75%</span>;<span class="attribute">margin</span>: <span class="number">3%</span> auto;<span class="attribute">text-align</span>: center;&#125;      </span><br><span class="line"><span class="selector-class">.aspect-ratio</span> <span class="selector-tag">iframe</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="图片下的说明文字居中"><a href="#图片下的说明文字居中" class="headerlink" title="图片下的说明文字居中"></a>图片下的说明文字居中</h3><p>在 <code>blog/source/css/custom.css</code> 中添加如下代码：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.jg-caption</span>&#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="隐藏指定页面title"><a href="#隐藏指定页面title" class="headerlink" title="隐藏指定页面title"></a>隐藏指定页面<code>title</code></h2><p>在页面md源码输入：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.page-title</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="隐藏二级目录"><a href="#隐藏二级目录" class="headerlink" title="隐藏二级目录"></a>隐藏二级目录</h2><p>默认子目录是展开的，如果你想要隐藏，在子目录里添加 hide 。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">List||fas</span> <span class="string">fa-list||hide:</span></span><br><span class="line">  <span class="attr">Music:</span> <span class="string">/music/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-music</span></span><br><span class="line">  <span class="attr">Movie:</span> <span class="string">/movies/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-video</span></span><br></pre></td></tr></table></figure>

<h2 id="Tag-Plugins-Plus"><a href="#Tag-Plugins-Plus" class="headerlink" title="Tag Plugins Plus"></a>Tag Plugins Plus</h2><p>地址：<a href="https://akilar.top/posts/615e2dec">Tag Plugins Plus</a></p>
<h2 id="侧边栏添加微博热搜"><a href="#侧边栏添加微博热搜" class="headerlink" title="侧边栏添加微博热搜"></a>侧边栏添加微博热搜</h2><h3 id="新建侧边栏"><a href="#新建侧边栏" class="headerlink" title="新建侧边栏"></a>新建侧边栏</h3><blockquote>
<p>官方文档：<a href="https://butterfly.js.org/posts/ea33ab97/%EF%BC%8C%E6%83%B3%E8%A6%81%E4%BA%86%E8%A7%A3%E6%9B%B4%E5%A4%9A%E5%8F%AF%E4%BB%A5%E6%9F%A5%E7%9C%8B%E8%BF%99%E7%AF%87%E6%96%87%E7%AB%A0%E3%80%82">https://butterfly.js.org/posts/ea33ab97/，想要了解更多可以查看这篇文章。</a></p>
</blockquote>
<p>打开<code>_data</code>文件夹，创建一个<code>widget.yml</code>文件，在里面粘贴如下代码:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">bottom:</span>  </span><br><span class="line">  <span class="bullet">-</span> <span class="attr">class_name:</span> </span><br><span class="line">    <span class="attr">id_name:</span> <span class="string">weibo</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">微博热搜</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fa-brands</span> <span class="string">fa-weibo</span></span><br><span class="line">    <span class="attr">order:</span> <span class="number">-2</span></span><br><span class="line">    <span class="attr">html:</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/weibo.css&quot;&gt;&lt;div</span> <span class="string">id=&quot;weiboContent&quot;&gt;&lt;img</span> <span class="string">src=&quot;https://bu.dusays.com/2022/05/01/626e88f349943.gif&quot;&gt;&lt;/div&gt;&lt;script</span> <span class="string">src=&quot;/js/weibo.js&quot;&gt;&lt;/script&gt;</span>       </span><br></pre></td></tr></table></figure>



<blockquote>
<p>上面图像也可用本地路径：<code>/img/loading.gif</code> ，如果想删除加载动画可删除下面这行：</p>
<p><code>&lt;img src=&quot;https://bu.dusays.com/2022/05/01/626e88f349943.gif&quot;&gt;</code></p>
</blockquote>
<p><strong>自用：</strong>(这里填top表示所有地方都显示，buttom表示只在非文章页面显示，如主页等等)</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">top:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">latestBB</span></span><br><span class="line">    <span class="attr">id_name:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">最新说说</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-bolt</span></span><br><span class="line">    <span class="attr">order:</span> <span class="number">2</span></span><br><span class="line">    <span class="attr">html:</span> <span class="string">|</span></span><br><span class="line"><span class="string">      &lt;div class=&quot;swiper-container swiper-container-aside&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;div class=&quot;swiper-wrapper swiper-weapper-aside&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;a class=&quot;bb-btn button--animated&quot; href=&quot;/say/&quot; title=&quot;查看全部&quot;&gt;&lt;i class=&quot;far fa-hand-point-right fa-fw&quot;&gt;&lt;/i&gt; 查看更多 &lt;/a&gt;</span></span><br><span class="line"><span class="string">      &lt;script&gt;</span></span><br><span class="line"><span class="string">        window.kkBBConfig = &#123;</span></span><br><span class="line"><span class="string">          limit: 10,</span></span><br><span class="line"><span class="string">          blog:&#x27;/say/&#x27;,</span></span><br><span class="line"><span class="string">          author: &#x27;这里填个人ID&#x27;,</span></span><br><span class="line"><span class="string">          api_url:</span></span><br><span class="line"><span class="string">            &#x27;这里填api_url&#x27;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &lt;/script&gt;</span></span><br><span class="line"><span class="string">      &lt;script src=&quot;https://cdn1.tianli0.top/npm/iwyang@1.0.7/speak/butterfly-speak-swiper@1.1.0.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string"></span>      </span><br><span class="line"><span class="attr">bottom:</span>  </span><br><span class="line">  <span class="bullet">-</span> <span class="attr">class_name:</span> </span><br><span class="line">    <span class="attr">id_name:</span> <span class="string">weibo</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">微博热搜</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fa-brands</span> <span class="string">fa-weibo</span></span><br><span class="line">    <span class="attr">order:</span> <span class="number">-2</span></span><br><span class="line">    <span class="attr">html:</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/weibo.css&quot;&gt;&lt;div</span> <span class="string">id=&quot;weiboContent&quot;&gt;&lt;img</span> <span class="string">src=&quot;https://bu.dusays.com/2022/05/01/626e88f349943.gif&quot;&gt;&lt;/div&gt;&lt;script</span> <span class="string">src=&quot;/js/weibo.js&quot;&gt;&lt;/script&gt;</span>       </span><br></pre></td></tr></table></figure>

<h3 id="引入weibo-css和weibo-js"><a href="#引入weibo-css和weibo-js" class="headerlink" title="引入weibo.css和weibo.js"></a>引入weibo.css和weibo.js</h3><p><code>_config.butterfly.yml</code>里修改：</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">inject:</span><br><span class="line">  head:</span><br><span class="line">    # - &lt;link rel=&quot;stylesheet&quot; href=&quot;/xxx.css&quot;&gt;</span><br><span class="line">    - &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/custom.css&quot;&gt;</span><br><span class="line"><span class="addition">+    - &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/weibo.css&quot;&gt;    </span></span><br><span class="line">  bottom:</span><br><span class="line">    # - &lt;script src=&quot;xxxx&quot;&gt;&lt;/script&gt;</span><br><span class="line"><span class="addition">+    - &lt;script src=&quot;/js/weibo.js&quot;&gt;&lt;/script&gt;    </span></span><br></pre></td></tr></table></figure>

<h3 id="创建weibo-css文件"><a href="#创建weibo-css文件" class="headerlink" title="创建weibo.css文件"></a>创建weibo.css文件</h3><p>在<code>\source\css</code>目录下新建<code>weibo.css</code>：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="selector-class">.weibo-new</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#ff3852</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.weibo-hot</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#ff9406</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.weibo-jyzy</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#ffc000</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.weibo-recommend</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#00b7ee</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.weibo-adrecommend</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#febd22</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.weibo-friend</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#8fc21e</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.weibo-boom</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#bd0000</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.weibo-topic</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#ff6f49</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.weibo-topic-ad</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#4dadff</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.weibo-boil</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#f86400</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#weibo</span> <span class="selector-class">.item-content</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#weibo-container</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">140px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">95%</span>;</span><br><span class="line">    <span class="attribute">overflow-y</span>: auto;</span><br><span class="line">    -ms-<span class="attribute">overflow</span>-style: none;</span><br><span class="line">    <span class="attribute">scrollbar-width</span>: none</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.weibo-list-item</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: row;</span><br><span class="line">    <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">    <span class="attribute">flex-wrap</span>: nowrap</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.weibo-title</span> &#123;</span><br><span class="line">    <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">    <span class="attribute">margin-right</span>: auto</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.weibo-num</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: right</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.weibo-hotness</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">6px</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(.<span class="number">8</span>) <span class="built_in">translateX</span>(-<span class="number">3px</span>);</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#weibo-container</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#555</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span> <span class="selector-id">#weibo-container</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.7</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 隐藏滚动条 */</span></span><br><span class="line"><span class="selector-id">#weibo-container</span>::-webkit-scrollbar&#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="创建weibo-js文件"><a href="#创建weibo-js文件" class="headerlink" title="创建weibo.js文件"></a>创建weibo.js文件</h3><p>在<code>\source\js</code>目录下新建<code>weibo.js</code>：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123; <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;weibo&#x27;</span>).<span class="property">clientWidth</span>) <span class="title function_">weibo</span>(); &#125; <span class="keyword">catch</span> (error) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">weibo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> hotness = &#123;</span><br><span class="line">        <span class="string">&#x27;爆&#x27;</span>: <span class="string">&#x27;weibo-boom&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;热&#x27;</span>: <span class="string">&#x27;weibo-hot&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;沸&#x27;</span>: <span class="string">&#x27;weibo-boil&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;新&#x27;</span>: <span class="string">&#x27;weibo-new&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;荐&#x27;</span>: <span class="string">&#x27;weibo-recommend&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;音&#x27;</span>: <span class="string">&#x27;weibo-jyzy&#x27;</span>,		</span><br><span class="line">        <span class="string">&#x27;影&#x27;</span>: <span class="string">&#x27;weibo-jyzy&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;剧&#x27;</span>: <span class="string">&#x27;weibo-jyzy&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;综&#x27;</span>: <span class="string">&#x27;weibo-jyzy&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> html = <span class="string">&#x27;&lt;div id=&quot;weibo-container&quot;&gt;&#x27;</span></span><br><span class="line">    <span class="keyword">let</span> data = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;weibo&#x27;</span>));</span><br><span class="line">    <span class="keyword">let</span> nowTime = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">    <span class="keyword">let</span> ls;</span><br><span class="line">    <span class="keyword">if</span> (data == <span class="literal">null</span> || nowTime - data.<span class="property">time</span> &gt; <span class="number">600000</span>) &#123; <span class="comment">// 600000为缓存时间，即10分钟，防止频繁请求，加快本地访问速度。</span></span><br><span class="line">        <span class="title function_">getData</span>();</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        ls = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(data.<span class="property">ls</span>)</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> ls) &#123;</span><br><span class="line">        html += <span class="string">&#x27;&lt;div class=&quot;weibo-list-item&quot;&gt;&lt;div class=&quot;weibo-hotness &#x27;</span> + hotness[(item.<span class="property">hot</span> || <span class="string">&#x27;荐&#x27;</span>)] + <span class="string">&#x27;&quot;&gt;&#x27;</span> + (item.<span class="property">hot</span> || <span class="string">&#x27;荐&#x27;</span>) + <span class="string">&#x27;&lt;/div&gt;&#x27;</span> +</span><br><span class="line">            <span class="string">&#x27;&lt;span class=&quot;weibo-title&quot;&gt;&lt;a title=&quot;&#x27;</span> + item.<span class="property">title</span> + <span class="string">&#x27;&quot;href=&quot;&#x27;</span> + item.<span class="property">url</span> + <span class="string">&#x27;&quot; target=&quot;_blank&quot; rel=&quot;external nofollow noreferrer&quot;&gt;&#x27;</span> + item.<span class="property">title</span> + <span class="string">&#x27;&lt;/a&gt;&lt;/span&gt;&#x27;</span> +</span><br><span class="line">            <span class="string">&#x27;&lt;div class=&quot;weibo-num&quot;&gt;&lt;span&gt;&#x27;</span> + item.<span class="property">num</span> + <span class="string">&#x27;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    html += <span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;weiboContent&#x27;</span>).<span class="property">innerHTML</span> = html;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getData</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">fetch</span>(<span class="string">&#x27;https://weibo-top-api-two.vercel.app/api&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> data.<span class="title function_">json</span>()).<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">        data = &#123; <span class="attr">time</span>: <span class="title class_">Date</span>.<span class="title function_">now</span>(), <span class="attr">ls</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data) &#125;</span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;weibo&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data))</span><br><span class="line">    &#125;).<span class="title function_">then</span>(weibo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="自建-Vercel-API"><a href="#自建-Vercel-API" class="headerlink" title="自建 Vercel API"></a>自建 Vercel API</h3><p>地址：<a href="https://github.com/Eurkon">Eurkon</a>&#x2F;<strong><a href="https://github.com/Eurkon/weibo-top-api">weibo-top-api</a></strong></p>
<p>虽然 Vercel 的访问应当没有次数限制，但是不排除存在因访问次数过多而限流等限制。所以还是建议各位自建 API。使用 Vercel 部署，完全免费。且无需服务器。</p>
<blockquote>
<p>最后记得修改<code>weibo.js</code>里的api地址，即：<code>https://weibo-top-api.vercel.app/api</code>改成<code>https://你的域名//api</code></p>
</blockquote>
<h3 id="自建第三方-API"><a href="#自建第三方-API" class="headerlink" title="自建第三方 API"></a>自建第三方 API</h3><p>查看：<a href="https://blog.leonus.cn/2022/weibo.html">https://blog.leonus.cn/2022/weibo.html</a></p>
<h2 id="友链朋友圈（弃用，用下方的）"><a href="#友链朋友圈（弃用，用下方的）" class="headerlink" title="友链朋友圈（弃用，用下方的）"></a><del>友链朋友圈</del>（弃用，用下方的）</h2><ul>
<li>仓库地址：<a href="https://github.com/Rock-Candy-Tea/hexo-circle-of-friends">https://github.com/Rock-Candy-Tea/hexo-circle-of-friends</a></li>
<li>文档：<a href="https://fcircle-doc.js.cool/">https://fcircle-doc.js.cool</a></li>
</ul>
<h3 id="前端部署"><a href="#前端部署" class="headerlink" title="前端部署"></a><a href="https://fcircle-doc.js.cool/#/frontenddeploy?id=%E5%89%8D%E7%AB%AF%E9%83%A8%E7%BD%B2">前端部署</a></h3><p>推荐使用朋友圈5.x版本最新前端，基于林木木的方案进行优化，同时添加管理面板，方便进行配置管理。</p>
<p>hexo下的部署方法，在博客根目录下，创建普通页面：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo new page fcircle</span><br></pre></td></tr></table></figure>

<p>可以看到<code>source/fcircle/index.md</code> 文件，打开该文件，粘贴以下内容：</p>
<p><strong>官方：</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 朋友圈</span><br><span class="line">date: 2022-10-09 00:38:16</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> <span class="title class_">UserConfig</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 填写你的api地址</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">private_api_url</span>: <span class="string">&#x27;http://192.168.142.88:8000/&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 点击加载更多时，一次最多加载几篇文章，默认10</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">page_turning_number</span>: <span class="number">10</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 头像加载失败时，默认头像地址</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">error_img</span>: <span class="string">&#x27;https://sdn.geekzu.org/avatar/57d8260dfb55501c37dde588e7c3852c&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 进入页面时第一次的排序规则</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">sort_rule</span>: <span class="string">&#x27;created&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://npm.elemecdn.com/imgscdn@1.1.39/fcircle/app.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://npm.elemecdn.com/imgscdn@1.1.39/fcircle/bundle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>访问域名下的<code>/fcircle</code>即可看到效果。</p>
<p>如果觉得该cdn比较慢，可以手动将这两个js文件放到你认为更快的cdn上。新版前端在顶部右下角卡片新增管理面板。点击即可进入。第一次部署成功后，<strong>输入第一个密码的同时设置密码。请设置一个安全可靠的密码，并防止泄露</strong>。</p>
<p>当保存设置时，由于网络原因，可能需要一段时间响应，尽量避免连续保存。</p>
<p>除了在管理面板配置之外，朋友圈同样支持修改配置文件进行配置，详见<a href="https://fcircle-doc.yyyzyyyz.cn/#/settings">配置项说明</a>。</p>
<h2 id="hexo设置skip-render"><a href="#hexo设置skip-render" class="headerlink" title="hexo设置skip_render"></a>hexo设置skip_render</h2><p>hexo设置skip_render, 指定不进行渲染的文件或文件夹</p>
<p>1.单个文件夹下全部文件：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">skip_render: demo/*</span><br></pre></td></tr></table></figure>

<p>2.单个文件夹下指定类型文件：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">skip_render: demo/*.html</span><br></pre></td></tr></table></figure>

<p>3.单个文件夹下全部文件以及子目录:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">skip_render: demo/**</span><br></pre></td></tr></table></figure>

<p>4.多个文件夹以及各种复杂情况：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">skip_render:</span><br><span class="line">    - &#x27;demo/*.html&#x27;</span><br><span class="line">    - &#x27;demo/**&#x27;</span><br></pre></td></tr></table></figure>

<h2 id="配置友链朋友圈"><a href="#配置友链朋友圈" class="headerlink" title="配置友链朋友圈"></a>配置友链朋友圈</h2><ul>
<li><a href="https://github.com/willow-god/Friend-Circle-Lite">Friend-Circle-Lite</a></li>
<li><a href="https://blog.liushen.fun/posts/4dc716ec/">文档地址</a></li>
</ul>
<h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><p>博客根目录执行：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install js-yaml --save</span><br><span class="line"></span><br><span class="line">npm install yamljs</span><br></pre></td></tr></table></figure>

<p>然后在博客根目录添加文件link.js，写入以下代码：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">const</span> <span class="string">YML</span> <span class="string">=</span> <span class="string">require(&#x27;yamljs&#x27;)</span></span><br><span class="line"><span class="string">const</span> <span class="string">fs</span> <span class="string">=</span> <span class="string">require(&#x27;fs&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="string">const</span> <span class="string">blacklist</span> <span class="string">=</span> [<span class="string">&quot;友站名称1&quot;</span>, <span class="string">&quot;友站名称2&quot;</span>, <span class="string">&quot;友站名称3&quot;</span>]<span class="string">;</span> <span class="string">//</span> <span class="string">由于某种原因，不想订阅的列表</span></span><br><span class="line"></span><br><span class="line"><span class="string">let</span> <span class="string">friends</span> <span class="string">=</span> []<span class="string">,</span></span><br><span class="line">    <span class="string">data_f</span> <span class="string">=</span> <span class="string">YML.parse(fs.readFileSync(&#x27;source/_data/link.yml&#x27;).toString().replace(/(?&lt;=rss:)\s*\n/g,</span> <span class="string">&#x27; &quot;&quot;\n&#x27;</span><span class="string">));</span></span><br><span class="line"></span><br><span class="line"><span class="string">data_f.forEach((entry,</span> <span class="string">index)</span> <span class="string">=&gt;</span> &#123;</span><br><span class="line">    <span class="string">let</span> <span class="string">lastIndex</span> <span class="string">=</span> <span class="number">2</span><span class="string">;</span></span><br><span class="line">    <span class="string">if</span> <span class="string">(index</span> <span class="string">&lt;</span> <span class="string">lastIndex)</span> &#123;</span><br><span class="line">        <span class="string">const</span> <span class="string">filteredLinkList</span> <span class="string">=</span> <span class="string">entry.link_list.filter(linkItem</span> <span class="string">=&gt;</span> <span class="type">!blacklist.includes(linkItem.name));</span></span><br><span class="line">        <span class="string">friends</span> <span class="string">=</span> <span class="string">friends.concat(filteredLinkList);</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="string">);</span></span><br><span class="line"></span><br><span class="line"><span class="string">//</span> <span class="string">根据规定的格式构建</span> <span class="string">JSON</span> <span class="string">数据</span></span><br><span class="line"><span class="string">const</span> <span class="string">friendData</span> <span class="string">=</span> &#123;</span><br><span class="line">    <span class="attr">friends:</span> <span class="string">friends.map(item</span> <span class="string">=&gt;</span> &#123;</span><br><span class="line">        <span class="string">return</span> [<span class="string">item.name</span>, <span class="string">item.link</span>, <span class="string">item.avatar</span>]<span class="string">;</span></span><br><span class="line">    &#125;<span class="string">)</span></span><br><span class="line">&#125;<span class="string">;</span></span><br><span class="line"></span><br><span class="line"><span class="string">//</span> <span class="string">将</span> <span class="string">JSON</span> <span class="string">对象转换为字符串</span></span><br><span class="line"><span class="string">const</span> <span class="string">friendJSON</span> <span class="string">=</span> <span class="string">JSON.stringify(friendData,</span> <span class="literal">null</span><span class="string">,</span> <span class="number">2</span><span class="string">);</span></span><br><span class="line"></span><br><span class="line"><span class="string">//</span> <span class="string">写入</span> <span class="string">friend.json</span> <span class="string">文件</span></span><br><span class="line"><span class="string">fs.writeFileSync(&#x27;./source/friend.json&#x27;,</span> <span class="string">friendJSON);</span></span><br><span class="line"></span><br><span class="line"><span class="string">console.log(&#x27;friend.json</span> <span class="string">文件已生成。&#x27;);</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>按照需求修改其中的黑名单，该黑名单可以用于排除一些采集站之类的灌水文章，其中填写对应站点的名称</p>
<h3 id="json获取"><a href="#json获取" class="headerlink" title="json获取"></a>json获取</h3><p>然后再在根目录执行：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node link.js</span><br></pre></td></tr></table></figure>

<p>你将会在source文件中发现文件friend.json，即为对应格式文件，下面正常hexo三件套即可放置到网站根目录。</p>
<p>为了更加方便，可以在博客根目录添加运行脚本：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">echo -e &quot;\033[0;32mDeploying updates to gitee...\033[0m&quot;</span><br><span class="line">git add .	</span><br><span class="line">git commit -m &quot;site backup&quot;</span><br><span class="line">git push --force origin backup</span><br><span class="line">node link.js</span><br><span class="line">hexo clean</span><br><span class="line">hexo g -d</span><br></pre></td></tr></table></figure>

<h3 id="action配置"><a href="#action配置" class="headerlink" title="action配置"></a>action配置</h3><ul>
<li><p>Fork 本仓库:<br>点击页面右上角的 Fork 按钮，将本仓库复制到你自己的GitHub账号下。</p>
</li>
<li><p>配置 Secrets:<br>在你 Fork 的仓库中，依次进入 Settings -&gt; Secrets -&gt; New repository secret，添加以下 Secrets：</p>
</li>
</ul>
<p>PAT_TOKEN: （2024-09-05更新）已弃用，无需添加。<br>SMTP_PWD: SMTP 服务器的密码，用于发送电子邮件。</p>
<h3 id="配置action权限："><a href="#配置action权限：" class="headerlink" title="配置action权限："></a><strong>配置action权限</strong>：</h3><p>在设置中，点击action，拉到最下面，勾选Read and write permissions选项并保存，确保action有读写权限。</p>
<p>启用 GitHub Actions:<br>GitHub Actions 已经配置好在仓库的 .github&#x2F;workflows&#x2F;*.yml 文件中，当到一定时间时将自动执行，也可以手动运行。<br>其中，每个action功能如下：</p>
<p>friend_circle_lite.yml实现核心功能，爬取并发送邮箱；<br>deal_subscribe_issue.yml处理固定格式的issue，打上固定标签，评论，并关闭issue；<br>设置issue格式：<br>这个我已经设置好了，你只需要进行自定义即可。</p>
<h3 id="配置选项"><a href="#配置选项" class="headerlink" title="配置选项"></a>配置选项</h3><ul>
<li>爬虫相关配置(必选)<br>使用 requests 库实现友链文章的爬取，并将结果存储到根目录下的 all.json 文件中。</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spider_settings:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">json_url:</span> <span class="string">&quot;https://bore.vip/friend.json&quot;</span></span><br><span class="line">  <span class="attr">article_count:</span> <span class="number">5</span></span><br><span class="line">  <span class="attr">merge_result:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">merge_json_url:</span> <span class="string">&quot;https://fc.liushen.fun&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>enable：开启或关闭，默认开启；</p>
<p>json_url：友链朋友圈通用爬取格式第一种，填写上面生成的json文件网络地址即可。</p>
<p>article_count：每个作者留存文章个数，建议不要太多，五个正好合适。</p>
<p>marge_result：是否合并多个json文件，若为true则会合并指定网络地址和本地地址的json文件，建议在自部署部分使用，如果你有多个结果需要合并也可以使用，该部分需要&#x2F;all.json和&#x2F;errors.json地址可访问。</p>
<p>enable：是否启用合并功能，该功能提供与自部署的友链合并功能，可以解决服务器部分国外网站，服务器无法访问的问题</p>
<p>marge_json_path：请填写网络地址的json文件，用于合并，不带最后的斜杠！！！</p>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>由于在action中请求了github api，有较为严格的限额，所以我将更新后自动执行action的触发器关掉了，防止多次重复请求，你可以自行点击并运行action，如果在Check RSS feeds部分中，获取到了文章,并且正常提交到仓库中，则基本实现友链朋友圈功能。你可以在仓库根目录下找到all.json文件，里面即为所有的文章，程序已经按照时间顺序进行排序。</p>
<h3 id="前端部署-1"><a href="#前端部署-1" class="headerlink" title="前端部署"></a>前端部署</h3><p>vercel 部署完成后，检查对应页面，页面中没有数据，且 &#x2F;all.json 路径无法访问。原因是部署到main分支了，可以<strong>先删除development</strong>，然后通过 setting-git-Production Branch ，填写为page，并绑定域名，最后<strong>在github里</strong>手动执行action重新进行部署即可。</p>
<p>这样，我们就可以通过地址<a href="https://fc.liushen.fun/all.json%E8%AE%BF%E9%97%AE%E5%88%B0%E4%BD%A0%E7%9A%84%E6%96%87%E7%AB%A0%E5%86%85%E5%AE%B9%EF%BC%8C%E5%B9%B6%E4%B8%94%E5%9B%A0%E4%B8%BA%E6%96%87%E4%BB%B6%E9%9D%9E%E5%B8%B8%E5%B0%8F%EF%BC%8C%E8%AE%BF%E9%97%AE%E4%BD%93%E9%AA%8C%E4%B9%9F%E9%9D%9E%E5%B8%B8%E4%B8%8D%E9%94%99%EF%BC%8C%E5%B9%B6%E4%B8%94%E4%B8%8D%E4%BC%9A%E5%9B%A0%E4%B8%BA%E9%A2%91%E7%B9%81%E8%AF%B7%E6%B1%82%E4%B8%8D%E5%90%8Capi%E8%80%8C%E8%BF%87%E9%87%8F%E4%BD%BF%E7%94%A8vercel%E6%8F%90%E4%BE%9B%E7%9A%84edge">https://fc.liushen.fun/all.json访问到你的文章内容，并且因为文件非常小，访问体验也非常不错，并且不会因为频繁请求不同api而过量使用vercel提供的edge</a> requests次数。</p>
<h3 id="部署到页面"><a href="#部署到页面" class="headerlink" title="部署到页面"></a>部署到页面</h3><p>下面在你的页面md文件中直接放置以下内容：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;div id=&quot;friend-circle-lite-root&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    if (typeof UserConfig === &#x27;undefined&#x27;) &#123;</span><br><span class="line">        var UserConfig = &#123;</span><br><span class="line">            // 填写你的fc Lite地址</span><br><span class="line">            private_api_url: &#x27;https://f.bore.vip/&#x27;,</span><br><span class="line">            // 点击加载更多时，一次最多加载几篇文章，默认20</span><br><span class="line">            page_turning_number: 24,</span><br><span class="line">            // 头像加载失败时，默认头像地址</span><br><span class="line">            error_img: &#x27;https://pic.imgdb.cn/item/6695daa4d9c307b7e953ee3d.jpg&#x27;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;https://fastly.jsdelivr.net/gh/willow-god/Friend-Circle-Lite/main/fclite.min.css&quot;&gt;</span><br><span class="line">&lt;script src=&quot;https://fastly.jsdelivr.net/gh/willow-god/Friend-Circle-Lite/main/fclite.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>注意其中的private_api_url尾部需要&#x2F;防止拼接路径时出现错误。</p>
<p>hexo三联后，即可查看效果，本站部署的页面你可以通过顶部导航栏直接进入查看效果。</p>
<h2 id="更新记录"><a href="#更新记录" class="headerlink" title="更新记录"></a>更新记录</h2><p>2023.5.7</p>
<ul>
<li>Commits on Dec 29, 2023</li>
<li>Commits on Oct 9, 2023</li>
<li>Commits on Jun 6, 2023</li>
<li>Commits on Apr 10, 2023</li>
</ul>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://butterfly.js.org/posts/21cfbf15/">Butterfly 安装文档(一) 快速开始</a></li>
<li><a href="https://guole.fun/posts/butterfly-custom/">我的 Blog 美化日记 ——Hexo+Butterfly</a></li>
<li><a href="https://www.jianshu.com/p/76220131c7e9">hexo设置skip_render, 指定不进行渲染的文件或文件夹</a></li>
<li><a href="https://akilar.top/posts/3afa069a/">引入Aplayer播放音乐</a></li>
<li><a href="https://blog.leonus.cn/2022/weibo.html">微博热搜api使用与自建</a></li>
<li><a href="https://blog.eurkon.com/post/38b005e1.html">Butterfly 微博热搜侧边栏</a></li>
<li><a href="https://cnhuazhu.top/butterfly/2021/02/24/Hexo%E9%AD%94%E6%94%B9/Hexo%E5%B0%8F%E6%A0%87%E9%A2%98%E6%97%8B%E8%BD%AC%E9%A3%8E%E8%BD%A6%E8%AE%BE%E7%BD%AE/">Hexo小标题旋转风车设置</a></li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>halo定时备份的方法</title>
    <url>/archives/3a4bd17/</url>
    <content><![CDATA[<p> 在网上查询了一下halo定时备份有三种方案：邮箱和Dropbox，以及github。</p>
<h2 id="备份到QQ邮箱"><a href="#备份到QQ邮箱" class="headerlink" title="备份到QQ邮箱"></a>备份到QQ邮箱</h2><h3 id="安装邮件发送依赖组件"><a href="#安装邮件发送依赖组件" class="headerlink" title="安装邮件发送依赖组件"></a><strong>安装邮件发送依赖组件</strong></h3><h4 id="Centos-7"><a href="#Centos-7" class="headerlink" title="Centos 7"></a>Centos 7</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum install sendmail mailx -y</span><br></pre></td></tr></table></figure>

<h4 id="Centos-8"><a href="#Centos-8" class="headerlink" title="Centos 8"></a>Centos 8</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum -y install postfix sendmail-cf mailx</span><br><span class="line">service postfix start</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> postfix</span><br></pre></td></tr></table></figure>
<h4 id="Debian"><a href="#Debian" class="headerlink" title="Debian"></a>Debian</h4><ol>
<li>安装 mailtuils:<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt install mailutils -y</span><br></pre></td></tr></table></figure></li>
<li>安装postfix后缀:<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt install postfix</span><br></pre></td></tr></table></figure>
在安装过程即将结束时，您将看到一个类似于下图中的窗口的窗口。默认选项是<code>Internet Site</code>。这是本教程的推荐选项，请按<code>TAB</code>，然后按<code>ENTER</code>。<br>之后，您将获得另一个窗口，就像下一个图像中的窗口一样。该系统邮件名称应该是一样的，你分配给服务器，当你在创造它的名字。如果它显示子域<code>subdomain.example.com</code>，请将其更改为<code>ust example.com</code>。完成后，按<code>TAB</code>，然后<code>ENTER</code>。</li>
</ol>
<h3 id="修改附件发送大小限制"><a href="#修改附件发送大小限制" class="headerlink" title="修改附件发送大小限制"></a>修改附件发送大小限制</h3><p>看下现在邮件的大小限制：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo postconf message_size_limit</span><br></pre></td></tr></table></figure>

<div class="note info">message_size_limit = 20480000</div>

<p>差不多是10M，放大20倍，应该差不多了。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo postconf -e <span class="string">&quot;message_size_limit = 204800000&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="获得-amp-编辑备份脚本"><a href="#获得-amp-编辑备份脚本" class="headerlink" title="获得&amp;编辑备份脚本"></a>获得&amp;编辑备份脚本</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget https://raw.githubusercontent.com/iwyang/scripts/master/halo_email_backup.sh</span><br></pre></td></tr></table></figure>

<h4 id="创建备份文件夹"><a href="#创建备份文件夹" class="headerlink" title="创建备份文件夹"></a>创建备份文件夹</h4><div class="note primary">如果选择将文件备份到临时目录的话，这步可跳过，直接修改脚本即可。我直接跳过了这一步。</div>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /home/back</span><br></pre></td></tr></table></figure>

<h4 id="修改脚本"><a href="#修改脚本" class="headerlink" title="修改脚本"></a>修改脚本</h4><p>脚本原来模样：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">#!<span class="regexp">/bin/</span>bash</span><br><span class="line"># 进入到备份文件夹</span><br><span class="line">cd /home/back</span><br><span class="line">#压缩网站数据</span><br><span class="line">tar zcvf <span class="title function_">web_$</span>(date +<span class="string">&quot;%Y%m%d&quot;</span>).<span class="property">tar</span>.<span class="property">gz</span> 网站目录</span><br><span class="line"># 导出数据库到备份文件夹内</span><br><span class="line">mysqldump -uroot -p数据库密码 数据库名称 &gt; <span class="title function_">web_data_$</span>(date +<span class="string">&quot;%Y%m%d&quot;</span>).<span class="property">sql</span></span><br><span class="line"># 以附件形式发送数据库到指定邮箱</span><br><span class="line">echo <span class="string">&quot;Blog date&quot;</span>|mail -s <span class="string">&quot;Backup$(date +%Y-%m-%d)&quot;</span> -a <span class="title function_">web_data_$</span>(date +<span class="string">&quot;%Y%m%d&quot;</span>).<span class="property">sql</span> 收件人邮箱</span><br><span class="line"># 删除本地<span class="number">3</span>天前的数据</span><br><span class="line">rm -rf <span class="title function_">web_$</span>(date -d -3day +<span class="string">&quot;%Y%m%d&quot;</span>).<span class="property">tar</span>.<span class="property">gz</span> <span class="title function_">web_data_$</span>(date -d -3day +<span class="string">&quot;%Y%m%d&quot;</span>).<span class="property">sql</span></span><br><span class="line"># 登录<span class="variable constant_">FTP</span></span><br><span class="line">lftp ftp地址 -u ftp用户名,ftp密码 &lt;&lt; <span class="variable constant_">EOF</span></span><br><span class="line"># 进入<span class="variable constant_">FTP</span>根目录</span><br><span class="line">cd ftp根目录文件夹</span><br><span class="line"># 删除<span class="number">3</span>天前备份文件</span><br><span class="line">mrm <span class="title function_">web_$</span>(date -d -3day +<span class="string">&quot;%Y%m%d&quot;</span>).<span class="property">tar</span>.<span class="property">gz</span></span><br><span class="line">mrm <span class="title function_">web_data_$</span>(date -d -3day +<span class="string">&quot;%Y%m%d&quot;</span>).<span class="property">sql</span></span><br><span class="line"># 上传当天备份文件</span><br><span class="line">mput <span class="title function_">web_$</span>(date +<span class="string">&quot;%Y%m%d&quot;</span>).<span class="property">tar</span>.<span class="property">gz</span></span><br><span class="line">mput <span class="title function_">web_data_$</span>(date -d -3day +<span class="string">&quot;%Y%m%d&quot;</span>).<span class="property">sql</span></span><br><span class="line">bye</span><br><span class="line"><span class="variable constant_">EOF</span></span><br></pre></td></tr></table></figure>

<p>根据实际需求，改成下面模样：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vi email.sh</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">#!<span class="regexp">/bin/</span>bash</span><br><span class="line">cd /tmp</span><br><span class="line">tar zcvf <span class="title function_">web_$</span>(date +<span class="string">&quot;%Y%m%d&quot;</span>).<span class="property">tar</span>.<span class="property">gz</span> /root/.<span class="property">halo</span></span><br><span class="line">echo <span class="string">&quot;Blog date&quot;</span>|mail -s <span class="string">&quot;Backup$(date +%Y-%m-%d)&quot;</span> -a <span class="title function_">web_$</span>(date +<span class="string">&quot;%Y%m%d&quot;</span>).<span class="property">tar</span>.<span class="property">gz</span> <span class="number">455343442</span>@qq.<span class="property">com</span></span><br><span class="line">rm -f <span class="title function_">web_$</span>(date +<span class="string">&quot;%Y%m%d&quot;</span>).<span class="property">tar</span>.<span class="property">gz</span></span><br></pre></td></tr></table></figure>
<p>上面代码中最后的<code>rm -f web_$(date +&quot;%Y%m%d&quot;).tar.gz</code>，表示删除本地的临时文件。</p>
<blockquote>
<p><strong>注意</strong>在<strong>Debian</strong>下要讲<code>-a</code> 改成 <code>-A</code>（如下）</p>
</blockquote>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">- echo &quot;Blog date&quot;|mail -s &quot;Backup$(date +%Y-%m-%d)&quot; -a web_$(date +&quot;%Y%m%d&quot;).tar.gz 455343442@qq.com</span></span><br><span class="line"><span class="addition">+ echo &quot;Blog date&quot;|mail -s &quot;Backup$(date +%Y-%m-%d)&quot; -A web_$(date +&quot;%Y%m%d&quot;).tar.gz 455343442@qq.com</span></span><br></pre></td></tr></table></figure>

<h4 id="设置定时任务"><a href="#设置定时任务" class="headerlink" title="设置定时任务"></a>设置定时任务</h4><h5 id="赋予文件执行权限"><a href="#赋予文件执行权限" class="headerlink" title="赋予文件执行权限"></a>赋予文件执行权限</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x /root/email.sh</span><br></pre></td></tr></table></figure>

<p>运行的时候就输入下面的代码即可：<code>./email.sh</code></p>
<h5 id="设定自动任务"><a href="#设定自动任务" class="headerlink" title="设定自动任务"></a>设定自动任务</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">01 00 * * * /root/email.sh</span><br></pre></td></tr></table></figure>

<p>意思是每天凌晨0:01运行这个脚本。</p>
<h2 id="备份到Dropbox"><a href="#备份到Dropbox" class="headerlink" title="备份到Dropbox"></a>备份到Dropbox</h2><h3 id="创建Dropbox应用"><a href="#创建Dropbox应用" class="headerlink" title="创建Dropbox应用"></a>创建Dropbox应用</h3><p>首先，需要创建一个Dropbox应用，可以从该网址进行创建：<a href="https://www.dropbox.com/developers/apps/create">https://www.dropbox.com/developers/apps/create</a></p>
<p>在这里，应用类型选择<code>Dropbox API</code>，数据存储类型选择<code>App folder</code>，然后<code>命名</code>创建。然后切换到<code>Permissions</code>选项卡，勾选相应权限。最后记录下<code>App key</code>，<code>App secret</code>，下面要用。</p>
<p><img src="/../img/halo%E5%AE%9A%E6%97%B6%E5%A4%87%E4%BB%BD%E7%9A%84%E6%96%B9%E6%B3%95/dropbox_uploader.jpg"></p>
<h3 id="下载dropbox-uploader-sh"><a href="#下载dropbox-uploader-sh" class="headerlink" title="下载dropbox_uploader.sh"></a>下载dropbox_uploader.sh</h3><p><a href="https://github.com/andreafabrizi/Dropbox-Uploader/">dropbox_uploader</a> 是一个第三方Dropbox备份脚本，首先下载脚本：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl <span class="string">&quot;https://raw.githubusercontent.com/andreafabrizi/Dropbox-Uploader/master/dropbox_uploader.sh&quot;</span> -o dropbox_uploader.sh</span><br></pre></td></tr></table></figure>

<p>然后，为该脚本添加执行权限：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x dropbox_uploader.sh</span><br></pre></td></tr></table></figure>

<p>执行该脚本，绑定APP：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./dropbox_uploader.sh</span><br></pre></td></tr></table></figure>
<p>在终端里输入<code>App key</code>，<code>App secret</code>，接着会返回一个网址，浏览器打开，复制得到的<code>token</code>，最后在终端里完成绑定。</p>
<p>之后可以执行下面的命令测试上传，提示Done就是绑定成功了：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./dropbox_uploader.sh upload /etc/passwd /backup/passwd.old</span><br></pre></td></tr></table></figure>
<p>如果报错<code>unlink</code>,先执行命令<code>rm ~/.dropbox_uploader</code>，删除相应文件夹，然后删除上面申请的APP。按上面的操作重新申请</p>
<p>APP、重新绑定，一般第二次申请就会成功。</p>
<h3 id="编写备份脚本"><a href="#编写备份脚本" class="headerlink" title="编写备份脚本"></a>编写备份脚本</h3><p>编写定时备份脚本，取名为<code>backup.sh</code>。代码原来模样如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi backup.sh</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">#!<span class="regexp">/bin/</span>bash</span><br><span class="line"><span class="variable constant_">SCRIPT_DIR</span>=<span class="string">&quot;/root&quot;</span> #这个改成你存放刚刚下载下来的dropbox_uploader.<span class="property">sh</span>的文件夹位置</span><br><span class="line"><span class="variable constant_">DROPBOX_DIR</span>=<span class="string">&quot;/backup&quot;</span> #这个改成你的备份文件想要放在<span class="title class_">Dropbox</span>下面的文件夹名称，如果不存在，脚本会自动创建</span><br><span class="line"><span class="variable constant_">BACKUP_SRC</span>=<span class="string">&quot;/home/wwwroot /usr/local/nginx/conf&quot;</span> #这个是你想要备份的本地服务器上的文件，不同的目录用空格分开</span><br><span class="line"><span class="variable constant_">BACKUP_DST</span>=<span class="string">&quot;/tmp&quot;</span> #这个是你暂时存放备份压缩文件的地方，一般用/tmp即可</span><br><span class="line"><span class="variable constant_">MYSQL_SERVER</span>=<span class="string">&quot;localhost&quot;</span> #这个是你mysql服务器的地址，一般填这个本地地址即可</span><br><span class="line"><span class="variable constant_">MYSQL_USER</span>=<span class="string">&quot;mysqluser&quot;</span> #这个是你mysql的用户名名称，比如root或admin之类的</span><br><span class="line"><span class="variable constant_">MYSQL_PASS</span>=<span class="string">&quot;password&quot;</span> #这个是你mysql用户的密码</span><br><span class="line"># 下面的一般不用改了</span><br><span class="line"><span class="variable constant_">NOW</span>=$(date +<span class="string">&quot;%Y.%m.%d&quot;</span>)</span><br><span class="line"><span class="variable constant_">DESTFILE</span>=<span class="string">&quot;$BACKUP_DST/$NOW.tar.gz&quot;</span></span><br><span class="line"># 备份mysql数据库并和其它备份文件一起压缩成一个文件</span><br><span class="line">mysqldump -u $MYSQL_USER -h $MYSQL_SERVER -p$MYSQL_PASS --all-databases &gt; <span class="string">&quot;$NOW-Databases.sql&quot;</span></span><br><span class="line">echo <span class="string">&quot;数据库备份完成，打包网站数据中...&quot;</span></span><br><span class="line">tar cfzP <span class="string">&quot;$DESTFILE&quot;</span> $BACKUP_SRC <span class="string">&quot;$NOW-Databases.sql&quot;</span></span><br><span class="line">echo <span class="string">&quot;所有数据打包完成，准备上传...&quot;</span></span><br><span class="line"># 用脚本上传到dropbox</span><br><span class="line">$SCRIPT_DIR/dropbox_uploader.<span class="property">sh</span> upload <span class="string">&quot;$DESTFILE&quot;</span> <span class="string">&quot;$DROPBOX_DIR/$NOW.tar.gz&quot;</span></span><br><span class="line"><span class="keyword">if</span> [ $? -eq <span class="number">0</span> ];then</span><br><span class="line">     echo <span class="string">&quot;上传完成&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">     echo <span class="string">&quot;上传失败，重新尝试&quot;</span></span><br><span class="line">fi</span><br><span class="line"># 删除本地的临时文件</span><br><span class="line">rm -f <span class="string">&quot;$NOW-Databases.sql&quot;</span> <span class="string">&quot;$DESTFILE&quot;</span></span><br></pre></td></tr></table></figure>

<p>根据实际情况改成下面模样：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">#!<span class="regexp">/bin/</span>bash</span><br><span class="line"><span class="variable constant_">SCRIPT_DIR</span>=<span class="string">&quot;/root&quot;</span> </span><br><span class="line"><span class="variable constant_">DROPBOX_DIR</span>=<span class="string">&quot;/backup&quot;</span> </span><br><span class="line"><span class="variable constant_">BACKUP_SRC</span>=<span class="string">&quot;/root/.halo&quot;</span> </span><br><span class="line"><span class="variable constant_">BACKUP_DST</span>=<span class="string">&quot;/tmp&quot;</span></span><br><span class="line"><span class="variable constant_">NOW</span>=$(date +<span class="string">&quot;%Y.%m.%d&quot;</span>)</span><br><span class="line"><span class="variable constant_">DESTFILE</span>=<span class="string">&quot;$BACKUP_DST/$NOW.tar.gz&quot;</span></span><br><span class="line">echo <span class="string">&quot;打包网站数据中...&quot;</span></span><br><span class="line">tar cfzP <span class="string">&quot;$DESTFILE&quot;</span> $BACKUP_SRC</span><br><span class="line">echo <span class="string">&quot;所有数据打包完成，准备上传...&quot;</span></span><br><span class="line">$SCRIPT_DIR/dropbox_uploader.<span class="property">sh</span> <span class="keyword">delete</span> <span class="string">&quot;$DROPBOX_DIR&quot;</span></span><br><span class="line">$SCRIPT_DIR/dropbox_uploader.<span class="property">sh</span> upload <span class="string">&quot;$DESTFILE&quot;</span> <span class="string">&quot;$DROPBOX_DIR/$NOW.tar.gz&quot;</span></span><br><span class="line"><span class="keyword">if</span> [ $? -eq <span class="number">0</span> ];then</span><br><span class="line">     echo <span class="string">&quot;上传完成&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">     echo <span class="string">&quot;上传失败，重新尝试&quot;</span></span><br><span class="line">fi</span><br><span class="line">rm -f <span class="string">&quot;$DESTFILE&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>先用<code>$SCRIPT_DIR/dropbox_uploader.sh delete &quot;$DROPBOX_DIR&quot;</code>删除<code>Dropbox</code>备份文件夹，再上传文件。这样就保证<code>Dropbox</code>永远只有一个最新的备份文件，不用手动删除多余的备份文件了</strong>。</p>
<hr>
<p>当然也可以通过脚本设置保留旧数据的时长。如下面一个脚本就是让旧数据在Dropbox保留7天，本地保留10天。（不过觉得没有必要，还是上面的方法简单，下面方法尝试过，老是出现问题，旧数据删除不了，不想折腾了）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">#!<span class="regexp">/bin/</span>bash</span><br><span class="line"> </span><br><span class="line"># 定义需要备份的目录</span><br><span class="line"><span class="variable constant_">WEB_DIR</span>=<span class="regexp">/home/</span>www # 网站数据存放目录</span><br><span class="line"> </span><br><span class="line"># 定义备份存放目录</span><br><span class="line"><span class="variable constant_">DROPBOX_DIR</span>=/$(date +%Y-%m-%d) # <span class="title class_">Dropbox</span>上的备份目录</span><br><span class="line"><span class="variable constant_">LOCAL_BAK_DIR</span>=<span class="regexp">/home/</span>backup # 本地备份文件存放目录</span><br><span class="line"> </span><br><span class="line"># 定义备份文件名称</span><br><span class="line"><span class="title class_">DBBakName</span>=<span class="title function_">DB_$</span>(date +%Y%m%d).<span class="property">tar</span>.<span class="property">gz</span></span><br><span class="line"><span class="title class_">WebBakName</span>=<span class="title class_">Web</span>_<span class="title function_">$</span>(date +%Y%m%d).<span class="property">tar</span>.<span class="property">gz</span></span><br><span class="line"> </span><br><span class="line"># 定义旧数据名称</span><br><span class="line"><span class="title class_">Old</span>_DROPBOX_DIR=/$(date -d -7day +%Y-%m-%d)</span><br><span class="line"><span class="title class_">OldDBBakName</span>=<span class="title function_">DB_$</span>(date -d -10day +%Y%m%d).<span class="property">tar</span>.<span class="property">gz</span></span><br><span class="line"><span class="title class_">OldWebBakName</span>=<span class="title class_">Web</span>_<span class="title function_">$</span>(date -d -10day +%Y%m%d).<span class="property">tar</span>.<span class="property">gz</span></span><br><span class="line"> </span><br><span class="line">cd $LOCAL_BAK_DIR</span><br><span class="line"> </span><br><span class="line">#使用命令导出数据库</span><br><span class="line">mongodump --out $LOCAL_BAK_DIR/mongodb/ --db bastogne</span><br><span class="line"> </span><br><span class="line">#压缩数据库文件合并为一个压缩文件</span><br><span class="line">tar zcf $LOCAL_BAK_DIR/$DBBakName $LOCAL_BAK_DIR/mongodb</span><br><span class="line">rm -rf $LOCAL_BAK_DIR/mongodb</span><br><span class="line"> </span><br><span class="line">#压缩网站数据</span><br><span class="line">cd $WEB_DIR</span><br><span class="line">tar zcf $LOCAL_BAK_DIR/$WebBakName .<span class="comment">/*</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">cd ~</span></span><br><span class="line"><span class="comment">#开始上传</span></span><br><span class="line"><span class="comment">./dropbox_uploader.sh upload $LOCAL_BAK_DIR/$DBBakName $DROPBOX_DIR/$DBBakName</span></span><br><span class="line"><span class="comment">./dropbox_uploader.sh upload $LOCAL_BAK_DIR/$WebBakName $DROPBOX_DIR/$WebBakName</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">#删除旧数据</span></span><br><span class="line"><span class="comment">rm -rf $LOCAL_BAK_DIR/$OldDBBakName $LOCAL_BAK_DIR/$OldWebBakName</span></span><br><span class="line"><span class="comment">./dropbox_uploader.sh delete $Old_DROPBOX_DIR/</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">echo -e &quot;Backup Done!&quot;</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="赋予文件执行权限-1"><a href="#赋予文件执行权限-1" class="headerlink" title="赋予文件执行权限"></a>赋予文件执行权限</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x backup.sh</span><br></pre></td></tr></table></figure>

<p>运行的时候就输入下面的代码即可：<code>./backup.sh</code></p>
<h3 id="设置定时任务-1"><a href="#设置定时任务-1" class="headerlink" title="设置定时任务"></a>设置定时任务</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">02 00 * * * /root/backup.sh</span><br></pre></td></tr></table></figure>

<p>这样，就可以每天凌晨00:02自动备份到Dropbox了。</p>
<h2 id="备份到github"><a href="#备份到github" class="headerlink" title="备份到github"></a>备份到github</h2><h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><p>首先当然是在服务器上安装<code>GIt</code>，配置<code>ssh公钥</code>，并且在<code>github</code>上添加服务器<code>ssh公钥</code>。具体过程略。</p>
<h3 id="初始化仓库"><a href="#初始化仓库" class="headerlink" title="初始化仓库"></a>初始化仓库</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /root/.halo</span><br><span class="line">git init</span><br><span class="line">git remote add origin git@github.com:iwyang/halo.git</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;site backup&quot;</span></span><br><span class="line">git push --force origin master</span><br></pre></td></tr></table></figure>

<hr>
<p>注意要删除主题文件夹下的<code>.git</code>文件夹，不然的话就无法备份主题了。当然也可以不备份主题，因为主题所有配置选项都在数据库里。如果这样的话，命令要作如下调整：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git add application.yaml upload/ db/</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="设置定时任务-2"><a href="#设置定时任务-2" class="headerlink" title="设置定时任务"></a>设置定时任务</h3><h4 id="编写备份脚本-1"><a href="#编写备份脚本-1" class="headerlink" title="编写备份脚本"></a>编写备份脚本</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /root</span><br><span class="line">vi github.sh</span><br></pre></td></tr></table></figure>

<p>脚本原来模样：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">#!<span class="regexp">/bin/</span>bash</span><br><span class="line">#进入到网站根目录，记得修改为自己的站点</span><br><span class="line">cd /home/xxx.<span class="property">com</span></span><br><span class="line">#将数据库导入到该目录，这里以mysql为例，passwd为数据库密码，typecho为数据库名称，typecho.<span class="property">sql</span>为备份的数据库文件</span><br><span class="line">mysqldump -uroot -ppasswd typecho &gt; typecho.<span class="property">sql</span></span><br><span class="line">git add -A</span><br><span class="line">git commit -m <span class="string">&quot;backsite&quot;</span></span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>

<p>根据实际情况修改如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">#!<span class="regexp">/bin/</span>bash</span><br><span class="line">echo -e <span class="string">&quot;\033[0;32mDeploying updates to github...\033[0m&quot;</span></span><br><span class="line">cd /root/.<span class="property">halo</span></span><br><span class="line">git add .	</span><br><span class="line">git commit -m <span class="string">&quot;site backup&quot;</span></span><br><span class="line">git push --force origin master</span><br></pre></td></tr></table></figure>

<p>为了防止服务器里<code>.git</code>文件夹过大，脚本可以作如下调整：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">#!<span class="regexp">/bin/</span>bash</span><br><span class="line">echo -e <span class="string">&quot;\033[0;32mDeploying updates to github...\033[0m&quot;</span></span><br><span class="line">cd /root/.<span class="property">halo</span></span><br><span class="line">rm -rf .<span class="property">git</span></span><br><span class="line">git init</span><br><span class="line">git remote add origin git@github.<span class="property">com</span>:iwyang/halo.<span class="property">git</span></span><br><span class="line">git add .    </span><br><span class="line">git commit -m <span class="string">&quot;site backup&quot;</span></span><br><span class="line">git push --force origin master</span><br><span class="line">rm -rf .<span class="property">git</span></span><br></pre></td></tr></table></figure>

<h4 id="赋予文件执行权限-2"><a href="#赋予文件执行权限-2" class="headerlink" title="赋予文件执行权限"></a>赋予文件执行权限</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x /root/github.sh</span><br></pre></td></tr></table></figure>

<h4 id="设定自动任务-1"><a href="#设定自动任务-1" class="headerlink" title="设定自动任务"></a>设定自动任务</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">03</span> <span class="number">00</span> * * * <span class="regexp">/root/gi</span>thub.<span class="property">sh</span></span><br></pre></td></tr></table></figure>

<p>意思是每天凌晨0:03运行这个脚本。</p>
<h3 id="还原博客"><a href="#还原博客" class="headerlink" title="还原博客"></a>还原博客</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git@github.com:iwyang/halo.git .halo</span><br></pre></td></tr></table></figure>

<p> 接下来就是配置个 Java 环境，下载个 Halo 运行包，配置域名访问。具体可参考<a href="https://halo.run/">官方文档</a>。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p><code>halo</code>博客迁移后，最好删除<code>logs</code>文件夹下的日志文件。</p>
<hr>
<h2 id="SCP命令"><a href="#SCP命令" class="headerlink" title="SCP命令"></a>SCP命令</h2><h3 id="下载文件"><a href="#下载文件" class="headerlink" title="下载文件"></a>下载文件</h3><p>从服务器下载文件到本地，在<code>Git Bash</code>执行：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">scp root@104.224.191.88:/root/.ssh/mysite ssh</span><br></pre></td></tr></table></figure>

<p>意思是将服务器<code>/root/.ssh</code>目录下的mysite文件复制到当前路径下<code>ssh</code>文件夹下。</p>
<h3 id="上传文件"><a href="#上传文件" class="headerlink" title="上传文件"></a>上传文件</h3><p>从本地上传文件到服务器，在<code>Git Bash</code>执行：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">scp .halo.zip root@137.220.43.191:/root/</span><br></pre></td></tr></table></figure>

<p>意思是将当前目录下<code>.halo.ip</code>文件上传到服务器<code>/root/目录下</code>。</p>
<h2 id="wordpress相关"><a href="#wordpress相关" class="headerlink" title="wordpress相关"></a>wordpress相关</h2><h3 id="wordpress常用mysql命令"><a href="#wordpress常用mysql命令" class="headerlink" title="wordpress常用mysql命令"></a>wordpress常用mysql命令</h3><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.删除数据库</span></span><br><span class="line"><span class="string">mysqladmin</span> <span class="string">-u</span> <span class="string">root</span> <span class="string">-p</span> <span class="string">drop</span> <span class="string">wordpress</span></span><br><span class="line"><span class="comment"># 2.新建一个空数据库</span></span><br><span class="line"><span class="string">mysqladmin</span> <span class="string">-u</span> <span class="string">root</span> <span class="string">-p</span> <span class="string">create</span> <span class="string">wordpress</span></span><br><span class="line"><span class="comment"># 3.导入数据</span></span><br><span class="line"><span class="string">mysql</span> <span class="string">-uroot</span> <span class="string">-p”你的密码”</span> <span class="string">wordpress</span> <span class="string">&lt;</span> <span class="string">你的数据sql文件</span></span><br><span class="line"><span class="comment"># 4.更新Url</span></span><br><span class="line"><span class="comment"># 4.1.连接数据库</span></span><br><span class="line"><span class="string">mysql</span> <span class="string">-u</span> <span class="string">root</span> <span class="string">-p</span></span><br><span class="line"><span class="comment"># 4.2. 选择数据库</span></span><br><span class="line"><span class="string">use</span> <span class="string">wordpress</span></span><br><span class="line"><span class="comment"># 4.3.更新URL</span></span><br><span class="line"><span class="string">SELECT</span> <span class="string">*</span> <span class="string">FROM</span> <span class="string">wp_options</span> <span class="string">WHERE</span> <span class="string">option_name</span> <span class="string">=</span> <span class="string">&#x27;home&#x27;</span><span class="string">;</span></span><br><span class="line"><span class="string">UPDATE</span> <span class="string">wp_options</span> <span class="string">SET</span> <span class="string">option_value=&quot;https://new_url/&quot;</span> <span class="string">WHERE</span> <span class="string">option_name</span> <span class="string">=</span> <span class="string">&quot;home&quot;</span><span class="string">;</span></span><br><span class="line"></span><br><span class="line"><span class="string">SELECT</span> <span class="string">*</span> <span class="string">FROM</span> <span class="string">wp_options</span> <span class="string">WHERE</span> <span class="string">option_name</span> <span class="string">=</span> <span class="string">&#x27;siteurl&#x27;</span><span class="string">;</span></span><br><span class="line"><span class="string">UPDATE</span> <span class="string">wp_options</span> <span class="string">SET</span> <span class="string">option_value=&quot;https://new_url/&quot;</span> <span class="string">WHERE</span> <span class="string">option_name</span> <span class="string">=</span> <span class="string">&quot;siteurl&quot;</span><span class="string">;</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="Debian-10-五分钟-x2F-一键安装Wordpress"><a href="#Debian-10-五分钟-x2F-一键安装Wordpress" class="headerlink" title="Debian 10 五分钟&#x2F;一键安装Wordpress"></a>Debian 10 五分钟&#x2F;一键安装Wordpress</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#Debian8下载脚本</span></span><br><span class="line">wget http://w3.gubo.org/pubfiles/tylemp/10/tylemp.sh </span><br><span class="line"><span class="comment">#安装稳定版Nginx+PHP+MariaDB</span></span><br><span class="line">bash tylemp.sh stable</span><br><span class="line"><span class="comment">#安装wordpress，www.yourdomain.com即为你的域名</span></span><br><span class="line">bash tylemp.sh wordpress www.yourdomain.com </span><br></pre></td></tr></table></figure>

<p>命令列表</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bash tylemp.sh system <span class="comment"># 优化系统，删除不需要组件，dropbear替代sshd </span></span><br><span class="line">bash tylemp.sh exim4 <span class="comment"># 更轻量级邮件系统 </span></span><br><span class="line">bash tylemp.sh mysql <span class="comment"># 安装mysql </span></span><br><span class="line">bash tylemp.sh nginx <span class="comment"># 安装nginx，默认一个进程，可调整</span></span><br><span class="line">bash tylemp.sh php <span class="comment"># 安装php，包含php5-gd，可使用验证码</span></span><br><span class="line">bash tylemp.sh stable <span class="comment"># 安装上面所有，软件是debian官方stable源，版本较旧</span></span><br><span class="line">bash tylemp.sh wordpress www.yourdomain.com <span class="comment"># 一键安装wordpress, 数据库自动配置好。 </span></span><br><span class="line">bash tylemp.sh vhost www.yourdomain.com <span class="comment"># 一键安装静态虚拟主机。</span></span><br><span class="line">bash tylemp.sh dhost www.yourdomain.com <span class="comment"># 一键安装动态虚拟主机，方便直接上传网站程序。</span></span><br><span class="line">bash tylemp.sh typecho www.yourdomain.com <span class="comment"># 安装typecho，提供数据库名，密码等自主添加完成安装</span></span><br><span class="line">bash tylemp.sh phpmyadmin www.yourdomain.com <span class="comment"># 一键安装phpmyadmin 数据库管理软件，用http://www.yourdomain.com/phpMyAdmin访问 </span></span><br><span class="line">bash tylemp.sh addnginx 2 <span class="comment">#调整nginx进程，这里2表示调整后的进程数，请根据vps配置（cpu核心数）更改</span></span><br><span class="line">bash tylemp.sh sshport 22022 <span class="comment">#更改ssh端口号22022，建议更改10000以上端口。重启后生效。</span></span><br><span class="line">bash tylemp.sh rainloop www.yourdomain.com  <span class="comment"># 增加Gmail的web客户端一键安装</span></span><br><span class="line">bash tylemp.sh carbon www.yourdomain.com  <span class="comment"># 增加Carbon Forum的一键安装</span></span><br></pre></td></tr></table></figure>

<h3 id="修改-WordPress-上传文件大小限制"><a href="#修改-WordPress-上传文件大小限制" class="headerlink" title="修改 WordPress 上传文件大小限制"></a>修改 WordPress 上传文件大小限制</h3><p>1.查找php.ini配置文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">find / -name &quot;php.ini&quot;</span><br></pre></td></tr></table></figure>

<p>会出现两个结果，修改类似<code>/etc/php/7.3/fpm/php.ini</code></p>
<p>2.修改 <code>php.ini</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vi /etc/php/7.3/fpm/php.ini</span><br></pre></td></tr></table></figure>

<p>在其中搜索并修改以下配置：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">upload_max_filesize = 512M</span><br><span class="line">post_max_size = 512M</span><br><span class="line">max_execution_time = 3000</span><br></pre></td></tr></table></figure>

<p>这里配置上限为 512 MB，同时增加了最大处理时间。</p>
<p>3.修改 nginx.conf</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vi /etc/nginx/conf.d/blog.bore.vip.conf</span><br></pre></td></tr></table></figure>

<p>在 <code>http</code> 或 <code>server</code> 配置下添加</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">client_max_body_size 512M;</span><br></pre></td></tr></table></figure>

<p>这里配置上限为 512 MB。</p>
<p>4.重启nginx和php</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">service nginx restart</span><br><span class="line">service php7.3-fpm restart</span><br></pre></td></tr></table></figure>

<h2 id="nginx-command-not-found-解决方案"><a href="#nginx-command-not-found-解决方案" class="headerlink" title="nginx: command not found 解决方案"></a><code>nginx</code>: command not found 解决方案</h2><p>只需要输入<code>source /etc/profile</code> ，让配置文件重新生效一下即可。</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://www.moerats.com/archives/69/">1.Linux 每日自动备份到FTP及数据库通过邮箱发送方法</a></li>
<li><a href="http://blog.sina.com.cn/s/blog_7edf8b9f0100to4p.html">2.fetchmail: SMTP error: 552 5.3.4 Message size exceeds fixed limit</a></li>
<li><a href="http://sufaming.com/?p=189">3.如何将服务器上的网站数据定时自动备份到Dropbox</a></li>
<li><a href="https://www.moerats.com/archives/858/">4.Linux 定时备份服务器&#x2F;网站数据到Github私人仓库</a></li>
<li><a href="https://www.runoob.com/mysql/mysql-tutorial.html">5.MySQL 教程</a></li>
<li><a href="https://precisionsec.com/changing-the-wordpress-site-url-using-the-mysql-command-line/">6.Changing the WordPress site URL using the MySQL command line</a></li>
<li><a href="https://blog.csdn.net/jia12216/article/details/106098267">7.CentOs8系统安装mailx发邮件</a></li>
<li><a href="https://github.com/andreafabrizi/Dropbox-Uploader/issues/459">8.Impossible to unlink</a></li>
<li><a href="https://cloud.tencent.com/developer/article/1363216">9.如何在Debian 9上安装和配置Postfix作为仅发送SMTP服务</a></li>
<li><a href="https://www.gubo.org/debian-lemp-script/">10.Debian LNMP&#x2F;LEMP&#x2F;WordPress一键脚本</a></li>
<li><a href="https://blog.nex3z.com/2020/07/14/%E4%BF%AE%E6%94%B9-wordpress-%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E5%A4%A7%E5%B0%8F%E9%99%90%E5%88%B6/">11.修改 WordPress 上传文件大小限制</a></li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>halo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo利用Github Actions自动构建博客</title>
    <url>/archives/db6e761/</url>
    <content><![CDATA[<h2 id="生成公钥"><a href="#生成公钥" class="headerlink" title="生成公钥"></a>生成公钥</h2><p>Windows 上安装 <a href="https://git-for-windows.github.io/">Git for Windows</a> 之后在开始菜单里打开 Git Bash 输入：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;你的用户名&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;你的电子邮箱&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line"><span class="built_in">mkdir</span> .ssh</span><br><span class="line"><span class="built_in">cd</span> .ssh</span><br><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>

<p>在系统当前用户文件夹下生成了私钥 <code>id_rsa</code> 和公钥 <code>id_rsa.pub</code>。</p>
<h3 id="上传id-rsa-pub"><a href="#上传id-rsa-pub" class="headerlink" title="上传id_rsa.pub"></a>上传id_rsa.pub</h3><p>在右上角个人账户依次点击<code>Settings</code>-&gt;<code>SSH and GPG keys</code>添加刚刚生成的公钥，名称随意。</p>
<h3 id="上传id-rsa"><a href="#上传id-rsa" class="headerlink" title="上传id_rsa"></a>上传id_rsa</h3><p>然后在 Settings &gt; Secrets 中新增一个 secret，命名为 <code>DEPLOY_KEY</code>，把私钥 <code>id_rsa</code> 的内容复制进去，供后续使用。</p>
<h2 id="配置-GitHub-Actions"><a href="#配置-GitHub-Actions" class="headerlink" title="配置 GitHub Actions"></a>配置 GitHub Actions</h2><h3 id="第一种"><a href="#第一种" class="headerlink" title="第一种"></a>第一种</h3><p>在博客根目录新建<code>.github/workflows/gh_pages.yml</code>文件。代码如下：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Hexo</span> <span class="string">Deploy</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 只监听 source 分支的改动</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">develop</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 自定义环境变量</span></span><br><span class="line"><span class="attr">env:</span></span><br><span class="line">  <span class="attr">POST_ASSET_IMAGE_CDN:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build-and-deploy:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="comment"># 获取博客源码和主题</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v2.3.4</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">theme</span> <span class="string">repo</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v2.3.4</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">repository:</span> <span class="string">jerryc127/hexo-theme-butterfly</span></span><br><span class="line">          <span class="attr">ref:</span> <span class="string">master</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">themes/butterfly</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># 这里用的是 Node.js 14.x</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Set</span> <span class="string">up</span> <span class="string">Node.js</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&#x27;14&#x27;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># 设置 yarn 缓存，npm 的话可以看 actions/cache@v2 的文档示例</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Get</span> <span class="string">yarn</span> <span class="string">cache</span> <span class="string">directory</span> <span class="string">path</span></span><br><span class="line">        <span class="attr">id:</span> <span class="string">yarn-cache-dir-path</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">echo</span> <span class="string">&quot;::set-output name=dir::$(yarn cache dir)&quot;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Use</span> <span class="string">yarn</span> <span class="string">cache</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/cache@v2.1.6</span></span><br><span class="line">        <span class="attr">id:</span> <span class="string">yarn-cache</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">$&#123;&#123;</span> <span class="string">steps.yarn-cache-dir-path.outputs.dir</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">key:</span> <span class="string">$&#123;&#123;</span> <span class="string">runner.os</span> <span class="string">&#125;&#125;-yarn-$&#123;&#123;</span> <span class="string">hashFiles(&#x27;**/yarn.lock&#x27;)</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">restore-keys:</span> <span class="string">|</span></span><br><span class="line"><span class="string">            $&#123;&#123; runner.os &#125;&#125;-yarn-</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="comment"># 安装依赖</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">dependencies</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          yarn install --prefer-offline --frozen-lockfile</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="comment"># 从之前设置的 secret 获取部署私钥</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Set</span> <span class="string">up</span> <span class="string">environment</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">DEPLOY_KEY:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DEPLOY_KEY</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          sudo timedatectl set-timezone &quot;Asia/Shanghai&quot;</span></span><br><span class="line"><span class="string">          mkdir -p ~/.ssh</span></span><br><span class="line"><span class="string">          echo &quot;$DEPLOY_KEY&quot; &gt; ~/.ssh/id_rsa</span></span><br><span class="line"><span class="string">          chmod 600 ~/.ssh/id_rsa</span></span><br><span class="line"><span class="string">          ssh-keyscan github.com &gt;&gt; ~/.ssh/known_hosts</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="comment"># 生成并部署</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          npx hexo deploy --generate</span></span><br><span class="line"><span class="string"></span>          </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">Hexo</span> <span class="string">to</span> <span class="string">Server</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">SamKirkland/FTP-Deploy-Action@4.1.0</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">server:</span> <span class="number">104.224</span><span class="number">.191</span><span class="number">.88</span></span><br><span class="line">          <span class="attr">username:</span> <span class="string">admin</span></span><br><span class="line">          <span class="attr">password:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.FTP_MIRROR_PASSWORD</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">local-dir:</span> <span class="string">./public/</span></span><br><span class="line">          <span class="attr">server-dir:</span> <span class="string">/var/www/blog/</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="第二种"><a href="#第二种" class="headerlink" title="第二种"></a>第二种</h3><p>PS：第二种比第一种慢。</p>
<p>首先确认<code> _config.yml</code> 文件中有类似如下的 GitHub Pages 配置：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span></span><br><span class="line">    <span class="attr">github:</span> <span class="string">git@github.com:iwyang/hexo.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">gh-pages</span></span><br></pre></td></tr></table></figure>

<h4 id="配置私钥"><a href="#配置私钥" class="headerlink" title="配置私钥"></a>配置私钥</h4><ul>
<li>首先在 GitHub 上打开保存 Hexo 的仓库，访问 Settings -&gt; Secrets，然后选择 New secret;</li>
<li>名字部分填写：HEXO_DEPLOY_KEY，注意大小写，这个后面的 GitHub Actions Workflow 要用到;</li>
<li>在 Value 的部分填入 github-deploy-key 中的内容。</li>
</ul>
<h4 id="添加公钥"><a href="#添加公钥" class="headerlink" title="添加公钥"></a>添加公钥</h4><ul>
<li>接下来我们需要访问存放网页的仓库，也就是 Hexo 部署以后的仓库，访问 Settings -&gt; Deploy keys;</li>
<li>按 Add deploy key 来添加一个新的公钥；</li>
<li>在 Title中输入：HEXO_DEPLOY_PUB 字样，当然也可以填写其它自定义的名字;</li>
<li>在 Key 中粘贴 github-deploy-key.pub文件的内容。</li>
</ul>
<h4 id="创建-Workflow"><a href="#创建-Workflow" class="headerlink" title="创建 Workflow"></a>创建 Workflow</h4><p><strong>在 Hexo 的仓库中创建一个新文件：.github&#x2F;workflows&#x2F;auto_deploy.yml，文件的内容如下:</strong></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">auto</span> <span class="string">deploy</span> <span class="comment"># workflow name</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 只监听 source 分支的改动</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">develop</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span> <span class="comment"># job1 id</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span> <span class="comment"># 运行环境为最新版 Ubuntu</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">auto</span> <span class="string">deploy</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="comment"># step1 获取源码</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">actions/checkout@v1</span> <span class="comment"># 使用 actions/checkout@v1</span></span><br><span class="line">      <span class="attr">with:</span> <span class="comment"># 条件</span></span><br><span class="line">        <span class="attr">submodules:</span> <span class="literal">true</span> <span class="comment"># Checkout private submodules(themes or something else). 当有子模块时切换分支？</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Node.js</span> <span class="number">12.</span><span class="string">x</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">actions/setup-node@master</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">node-version:</span> <span class="string">&quot;12.x&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Generate</span> <span class="string">Public</span> <span class="string">Files</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">        npm i</span></span><br><span class="line"><span class="string">        npm install hexo-cli -g</span></span><br><span class="line"><span class="string">        hexo clean &amp;&amp; hexo generate</span></span><br><span class="line"><span class="string"></span>    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">peaceiris/actions-gh-pages@v3</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">deploy_key:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.HEXO_DEPLOY_KEY</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">external_repository:</span> <span class="string">iwyang/hexo</span></span><br><span class="line">        <span class="attr">publish_branch:</span> <span class="string">public</span></span><br><span class="line">        <span class="attr">publish_dir:</span> <span class="string">./public</span></span><br><span class="line">        <span class="attr">commit_message:</span> <span class="string">$&#123;&#123;</span> <span class="string">github.event.head_commit.message</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">user_name:</span> <span class="string">&#x27;github-actions[bot]&#x27;</span></span><br><span class="line">        <span class="attr">user_email:</span> <span class="string">&#x27;github-actions[bot]@users.noreply.github.com&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">Hexo</span> <span class="string">to</span> <span class="string">Server</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">SamKirkland/FTP-Deploy-Action@4.1.0</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">server:</span> <span class="number">104.224</span><span class="number">.191</span><span class="number">.88</span></span><br><span class="line">        <span class="attr">username:</span> <span class="string">hexo</span></span><br><span class="line">        <span class="attr">password:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.FTP_MIRROR_PASSWORD</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">local-dir:</span> <span class="string">./public/</span></span><br><span class="line">        <span class="attr">server-dir:</span> <span class="string">/var/www/hexo/</span></span><br></pre></td></tr></table></figure>



<h2 id="github、gitee、服务器三线部署"><a href="#github、gitee、服务器三线部署" class="headerlink" title="github、gitee、服务器三线部署"></a>github、gitee、服务器三线部署</h2><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Hexo</span> <span class="string">Deploy</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 只监听 source 分支的改动</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">develop</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 自定义环境变量</span></span><br><span class="line"><span class="attr">env:</span></span><br><span class="line">  <span class="attr">POST_ASSET_IMAGE_CDN:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build-and-deploy:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="comment"># 获取博客源码和主题</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v2.3.4</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">theme</span> <span class="string">repo</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v2.3.4</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">repository:</span> <span class="string">jerryc127/hexo-theme-butterfly</span></span><br><span class="line">          <span class="attr">ref:</span> <span class="string">master</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">themes/butterfly</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># 这里用的是 Node.js 14.x</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Set</span> <span class="string">up</span> <span class="string">Node.js</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&#x27;14&#x27;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># 设置 yarn 缓存，npm 的话可以看 actions/cache@v2 的文档示例</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Get</span> <span class="string">yarn</span> <span class="string">cache</span> <span class="string">directory</span> <span class="string">path</span></span><br><span class="line">        <span class="attr">id:</span> <span class="string">yarn-cache-dir-path</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">echo</span> <span class="string">&quot;::set-output name=dir::$(yarn cache dir)&quot;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Use</span> <span class="string">yarn</span> <span class="string">cache</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/cache@v2.1.6</span></span><br><span class="line">        <span class="attr">id:</span> <span class="string">yarn-cache</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">$&#123;&#123;</span> <span class="string">steps.yarn-cache-dir-path.outputs.dir</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">key:</span> <span class="string">$&#123;&#123;</span> <span class="string">runner.os</span> <span class="string">&#125;&#125;-yarn-$&#123;&#123;</span> <span class="string">hashFiles(&#x27;**/yarn.lock&#x27;)</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">restore-keys:</span> <span class="string">|</span></span><br><span class="line"><span class="string">            $&#123;&#123; runner.os &#125;&#125;-yarn-</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="comment"># 安装依赖</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">dependencies</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          yarn install --prefer-offline --frozen-lockfile</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="comment"># 从之前设置的 secret 获取部署私钥</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Set</span> <span class="string">up</span> <span class="string">environment</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">DEPLOY_KEY:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DEPLOY_KEY</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          sudo timedatectl set-timezone &quot;Asia/Shanghai&quot;</span></span><br><span class="line"><span class="string">          mkdir -p ~/.ssh</span></span><br><span class="line"><span class="string">          echo &quot;$DEPLOY_KEY&quot; &gt; ~/.ssh/id_rsa</span></span><br><span class="line"><span class="string">          chmod 600 ~/.ssh/id_rsa</span></span><br><span class="line"><span class="string">          ssh-keyscan github.com &gt;&gt; ~/.ssh/known_hosts</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="comment"># 生成并部署</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          npx hexo deploy --generate</span></span><br><span class="line"><span class="string"></span>          </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">Hexo</span> <span class="string">to</span> <span class="string">Server</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">SamKirkland/FTP-Deploy-Action@4.1.0</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">server:</span> <span class="number">104.224</span><span class="number">.191</span><span class="number">.88</span></span><br><span class="line">          <span class="attr">username:</span> <span class="string">admin</span></span><br><span class="line">          <span class="attr">password:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.FTP_MIRROR_PASSWORD</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">local-dir:</span> <span class="string">./public/</span></span><br><span class="line">          <span class="attr">server-dir:</span> <span class="string">/var/www/blog/</span></span><br><span class="line">          </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Sync</span> <span class="string">to</span> <span class="string">Gitee</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">wearerequired/git-mirror-action@master</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="comment"># 注意在 Settings-&gt;Secrets 配置 GITEE_RSA_PRIVATE_KEY</span></span><br><span class="line">          <span class="attr">SSH_PRIVATE_KEY:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITEE_RSA_PRIVATE_KEY</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="comment"># 注意替换为你的 GitHub 源仓库地址</span></span><br><span class="line">          <span class="attr">source-repo:</span> <span class="string">git@github.com:iwyang/iwyang.github.io.git</span></span><br><span class="line">          <span class="comment"># 注意替换为你的 Gitee 目标仓库地址</span></span><br><span class="line">          <span class="attr">destination-repo:</span> <span class="string">git@gitee.com:iwyang/iwyang.git</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">Gitee</span> <span class="string">Pages</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">yanglbme/gitee-pages-action@main</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="comment"># 注意替换为你的 Gitee 用户名</span></span><br><span class="line">          <span class="attr">gitee-username:</span> <span class="string">iwyang</span></span><br><span class="line">          <span class="comment"># 注意在 Settings-&gt;Secrets 配置 GITEE_PASSWORD</span></span><br><span class="line">          <span class="attr">gitee-password:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITEE_PASSWORD</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="comment"># 注意替换为你的 Gitee 仓库，仓库名严格区分大小写，请准确填写，否则会出错</span></span><br><span class="line">          <span class="attr">gitee-repo:</span> <span class="string">iwyang/iwyang</span></span><br><span class="line">          <span class="comment"># 要部署的分支，默认是 master，若是其他分支，则需要指定（指定的分支必须存在）</span></span><br><span class="line">          <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>

<p>将hexo三线部署（由于部署hexo较慢，如果单独为<code>gitee</code>建立一个<code>workflows</code>，gitee会先部署完成，这样无法同步；hugo可以单独为<code>gitee</code>建立一个<code>workflows</code>，因为<code>hugo</code>部署到服务器会先于部署到<code>gitee</code>）</p>
<h2 id="推送到远端"><a href="#推送到远端" class="headerlink" title="推送到远端"></a>推送到远端</h2><h3 id="配置Hexo的-config-yml"><a href="#配置Hexo的-config-yml" class="headerlink" title="配置Hexo的_config.yml"></a>配置Hexo的_config.yml</h3><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span></span><br><span class="line">    <span class="attr">github:</span> <span class="string">git@github.com:iwyang/iwyang.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">iwyang</span></span><br><span class="line">  <span class="attr">email:</span> <span class="number">455343442</span><span class="string">@qq.com</span></span><br></pre></td></tr></table></figure>

<p>当然，具体步骤还是得根据自己的需求进行相应的修改。</p>
<h3 id="提交源码"><a href="#提交源码" class="headerlink" title="提交源码"></a>提交源码</h3><p>今后只需备份源码到<code>develop</code>分支，<code>gitbub action</code>就会自动部署博客到<code>iwyang.github.io</code>仓库。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">git</span> <span class="string">init</span></span><br><span class="line"><span class="string">git</span> <span class="string">checkout</span> <span class="string">-b</span> <span class="string">develop</span></span><br><span class="line"><span class="string">git</span> <span class="string">remote</span> <span class="string">add</span> <span class="string">origin</span> <span class="string">git@github.com:iwyang/iwyang.github.io.git</span></span><br><span class="line"><span class="string">git</span> <span class="string">add</span> <span class="string">.</span></span><br><span class="line"><span class="string">git</span> <span class="string">commit</span> <span class="string">-m</span> <span class="string">&quot;备份源码&quot;</span></span><br><span class="line"><span class="string">git</span> <span class="string">push</span> <span class="string">--force</span> <span class="string">origin</span> <span class="string">develop</span></span><br></pre></td></tr></table></figure>

<h3 id="最终部署脚本"><a href="#最终部署脚本" class="headerlink" title="最终部署脚本"></a>最终部署脚本</h3><p><code>deploy.sh</code>内容：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[0;32mDeploying updates to gitee...\033[0m&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># backup</span></span><br><span class="line">git config --global core.autocrlf <span class="literal">false</span></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;site backup&quot;</span></span><br><span class="line">git push origin develop --force</span><br></pre></td></tr></table></figure>

<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://printempw.github.io/use-github-actions-to-deploy-hexo-blog/">使用 GitHub Actions 自动部署 Hexo 博客</a></li>
<li><a href="https://weijiajin.com/1f41c35f3517/">GitHub Actions 实现 Hexo 自动部署</a></li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo已使用插件备忘</title>
    <url>/archives/6b1d45d4/</url>
    <content><![CDATA[<h2 id="Hexo-一键部署插件"><a href="#Hexo-一键部署插件" class="headerlink" title="Hexo 一键部署插件"></a>Hexo 一键部署插件</h2><h3 id="地址"><a href="#地址" class="headerlink" title="地址"></a>地址</h3><ul>
<li><a href="https://github.com/hexojs/hexo-deployer-git">hexo-deployer-git</a></li>
</ul>
<h3 id="安装配置"><a href="#安装配置" class="headerlink" title="安装配置"></a>安装配置</h3><p>安装插件：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>

<p>然后修改站点配置文件_config.yml 中的配置：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line"> type: git</span><br><span class="line"> repo: git@blog.yizhilee.com:hexo.git</span><br></pre></td></tr></table></figure>

<h2 id="Hexo-本地搜索功能"><a href="#Hexo-本地搜索功能" class="headerlink" title="Hexo 本地搜索功能"></a>Hexo 本地搜索功能</h2><h3 id="地址-1"><a href="#地址-1" class="headerlink" title="地址"></a>地址</h3><ul>
<li><a href="https://github.com/theme-next/hexo-generator-searchdb">hexo-generator-searchdb</a></li>
</ul>
<h3 id="安装配置-1"><a href="#安装配置-1" class="headerlink" title="安装配置"></a>安装配置</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure>

<p>然后我们修改站点配置<code>_config.yml</code> 文件，添加如下内容：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">all</span></span><br><span class="line">  <span class="attr">content:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<ul>
<li>path：索引文件的路径，相对于站点根目录</li>
<li>field：搜索范围，默认是 post，还可以选择 page、all，设置成 all 表示搜索所有页面</li>
<li>limit：限制搜索的条目数</li>
</ul>
<p>然后修改主题配置文件<code>next.yml</code>：</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">local_search:</span><br><span class="line"><span class="deletion">-  enable: false</span></span><br><span class="line"><span class="addition">+  enable: true</span></span><br></pre></td></tr></table></figure>

<h2 id="Hexo-站点地图-sitemap-生成"><a href="#Hexo-站点地图-sitemap-生成" class="headerlink" title="Hexo 站点地图 sitemap 生成"></a>Hexo 站点地图 sitemap 生成</h2><h3 id="地址-2"><a href="#地址-2" class="headerlink" title="地址"></a>地址</h3><ul>
<li><a href="https://github.com/hexojs/hexo-generator-sitemap">hexo-generator-sitemap</a></li>
</ul>
<h3 id="安装配置-2"><a href="#安装配置-2" class="headerlink" title="安装配置"></a>安装配置</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-sitemap --save</span><br></pre></td></tr></table></figure>

<p>然后我们需要在 Hexo 站点配置文件<code>_config.yml</code> 中加入 sitemap 插件：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 通用站点地图</span></span><br><span class="line"><span class="attr">sitemap:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">sitemap.xml</span></span><br><span class="line">  <span class="attr">rel:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h2 id="hexo-abbrlink"><a href="#hexo-abbrlink" class="headerlink" title="hexo-abbrlink"></a>hexo-abbrlink</h2><p>可以把链接permalink转为数字的插件，配置容易，生成时自动转为数字。</p>
<p>地址：<a href="https://github.com/rozbo/hexo-abbrlink">hexo-abbrlink</a></p>
<p>安装：<code>npm install hexo-abbrlink --save</code></p>
<p>配置 <code>config.yml</code>:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">url:</span> <span class="string">https://bore.vip</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">archives/:abbrlink/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># abbrlink config</span></span><br><span class="line"><span class="attr">abbrlink:</span></span><br><span class="line">  <span class="attr">alg:</span> <span class="string">crc32</span> <span class="comment">#support crc16(default) and crc32</span></span><br><span class="line">  <span class="attr">rep:</span> <span class="string">hex</span> <span class="comment">#support dec(default) and hex</span></span><br><span class="line">  <span class="attr">drafts:</span> <span class="literal">false</span> <span class="comment">#(true)Process draft,(false)Do not process draft. false(default)</span></span><br><span class="line">  <span class="comment"># Generate categories from directory-tree</span></span><br><span class="line">  <span class="comment"># depth: the max_depth of directory-tree you want to generate, should &gt; 0</span></span><br><span class="line">  <span class="attr">auto_category:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span> <span class="comment">#true(default)</span></span><br><span class="line">    <span class="attr">depth:</span> <span class="comment">#3(default)</span></span><br><span class="line">    <span class="attr">over_write:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">auto_title:</span> <span class="literal">false</span> <span class="comment">#enable auto title, it can auto fill the title by path</span></span><br><span class="line">  <span class="attr">auto_date:</span> <span class="literal">false</span> <span class="comment">#enable auto date, it can auto fill the date by time today</span></span><br><span class="line">  <span class="attr">force:</span> <span class="literal">false</span> <span class="comment">#enable force mode,in this mode, the plugin will ignore the cache, and calc the abbrlink for every post even it already had abbrlink.</span></span><br><span class="line">     <span class="comment">#进制： dec(default) and hex</span></span><br></pre></td></tr></table></figure>

<h2 id="hexo-filter-nofollow"><a href="#hexo-filter-nofollow" class="headerlink" title="hexo-filter-nofollow"></a>hexo-filter-nofollow</h2><p>安装：<code>npm i hexo-filter-nofollow --save</code></p>
<p>然后我们在站点的配置文件<code>_config.yml</code> 中添加配置，</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">nofollow:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">site</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br></pre></td></tr></table></figure>

<h2 id="文章置顶"><a href="#文章置顶" class="headerlink" title="文章置顶"></a>文章置顶</h2><p>地址：<a href="https://github.com/hexojs/hexo-generator-index">hexo-generator-index</a></p>
<p>安装：<code>npm install hexo-generator-index --save</code></p>
<p>配置：然后我们修改站点配置<code>_config.yml</code> 文件</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="comment">index_generator:</span></span><br><span class="line">  path: &#x27;&#x27;</span><br><span class="line">  per_page: 10</span><br><span class="line">  order_by: -date</span><br><span class="line"><span class="addition">+ pagination_dir: page</span></span><br></pre></td></tr></table></figure>

<p>使用：你可以直接在文章的front-matter区域里添加<code>sticky: 1</code>属性来把这篇文章置顶。数值越大，置顶的优先级越大。</p>
<h2 id="RSS订阅插件"><a href="#RSS订阅插件" class="headerlink" title="RSS订阅插件"></a>RSS订阅插件</h2><p>地址：<a href="https://github.com/hexojs/hexo-generator-feed">hexo-generator-feed</a></p>
<p>安装：<code>npm install hexo-generator-feed --save</code></p>
<p>配置：然后我们修改站点配置<code>_config.yml</code> 文件</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">feed:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">rss2</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">rss2.xml</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">20</span></span><br><span class="line">  <span class="attr">hub:</span></span><br><span class="line">  <span class="attr">content:</span></span><br><span class="line">  <span class="attr">content_limit:</span> <span class="number">140</span></span><br><span class="line">  <span class="attr">content_limit_delim:</span> <span class="string">&#x27; &#x27;</span></span><br><span class="line">  <span class="attr">order_by:</span> <span class="string">-date</span></span><br><span class="line">  <span class="attr">icon:</span> <span class="string">icon.png</span></span><br><span class="line">  <span class="attr">autodiscovery:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">template:</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>使用atom.xml会出现乱码，更多选项查看插件说明。</p>
</blockquote>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://tding.top/archives/567debe0.html">本博客当前使用的插件总结</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo版本升级</title>
    <url>/archives/d6da8e6c/</url>
    <content><![CDATA[<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="备份源文件"><a href="#备份源文件" class="headerlink" title="备份源文件"></a>备份源文件</h3><div class="note danger">版本升级以前一定要先备份源文件，防止后面一些插件升级出现bug</div>

<h3 id="npm速度太慢"><a href="#npm速度太慢" class="headerlink" title="npm速度太慢"></a>npm速度太慢</h3><p>如果<code>npm install</code>速度过慢，可安装cnpm淘宝镜像替代：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>

<p>安装好了就可以使用cnpm来替代npm进行依赖的下载了:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cnpm install</span><br></pre></td></tr></table></figure>

<h2 id="版本升级"><a href="#版本升级" class="headerlink" title="版本升级"></a>版本升级</h2><p> 先查看hexo版本：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo version</span><br></pre></td></tr></table></figure>

<p>升级命令如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm i hexo-cli -g</span><br><span class="line">npm update</span><br><span class="line">hexo version</span><br></pre></td></tr></table></figure>

<hr>
<div class="note primary">注意：如果升级后报错，大概率是因为安装的某个插件的问题（如hexo升级5.4后，hexo-cake-moon-menu插件导致报错，就需卸载此插件，当然也有可能是主题和这个插件不兼容），这时就需要排查是哪个插件的问题，最直接的方法就是重新初始化hexo，所以说升级前备份源文件是及其重要的。</div>

<h2 id="插件升级"><a href="#插件升级" class="headerlink" title="插件升级"></a>插件升级</h2><p>上面升级命令不够正确（插件没有升级，不过插件升级可能会导致bug，要事先备份好源文件），继续往下操作：</p>
<h3 id="检查插件是否有升级"><a href="#检查插件是否有升级" class="headerlink" title="检查插件是否有升级"></a>检查插件是否有升级</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install -g npm-check</span><br><span class="line">npm-check</span><br></pre></td></tr></table></figure>

<h3 id="升级系统中的插件"><a href="#升级系统中的插件" class="headerlink" title="升级系统中的插件"></a>升级系统中的插件</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install -g npm-upgrade</span><br><span class="line">npm-upgrade</span><br></pre></td></tr></table></figure>

<h3 id="更新全局包"><a href="#更新全局包" class="headerlink" title="更新全局包"></a>更新全局包</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm update -g</span><br></pre></td></tr></table></figure>

<h3 id="更新生产环境依赖包"><a href="#更新生产环境依赖包" class="headerlink" title="更新生产环境依赖包"></a>更新生产环境依赖包</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm update --save</span><br></pre></td></tr></table></figure>

<h3 id="再次查看版本号"><a href="#再次查看版本号" class="headerlink" title="再次查看版本号"></a>再次查看版本号</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo version</span><br></pre></td></tr></table></figure>

<h2 id="出现的问题"><a href="#出现的问题" class="headerlink" title="出现的问题"></a>出现的问题</h2><p>升级插件后报错：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo TypeError [ERR_INVALID_URL]: Invalid URL</span><br></pre></td></tr></table></figure>

<p>主要是因为某些插件升级后有bug，需要退版本，解决方法如下：</p>
<ul>
<li><p>删除<code>node_modules</code>文件夹</p>
</li>
<li><p>把稳定版本的<code>package.json</code>和<code>package-lock.json</code>复制到当前文件夹并覆盖</p>
</li>
<li><p><code>npm install</code></p>
</li>
</ul>
<h2 id="hexo-5-0升级"><a href="#hexo-5-0升级" class="headerlink" title="hexo 5.0升级"></a>hexo 5.0升级</h2><h3 id="升级方法"><a href="#升级方法" class="headerlink" title="升级方法"></a>升级方法</h3><p>2020.7.29 To upgrade to Hexo v5, change the following line in your package.json,</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">package.json</span><br><span class="line"></span><br><span class="line"><span class="deletion">-  &quot;hexo&quot;: &quot;^4.2.1&quot;,</span></span><br><span class="line"><span class="addition">+  &quot;hexo&quot;: &quot;^5.0.0&quot;,</span></span><br></pre></td></tr></table></figure>

<p>然后</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">npm</span> <span class="string">i</span> <span class="string">hexo-cli</span> <span class="string">-g</span></span><br><span class="line"><span class="string">npm</span> <span class="string">update</span></span><br><span class="line"><span class="string">hexo</span> <span class="string">version</span></span><br></pre></td></tr></table></figure>

<h3 id="存在的问题"><a href="#存在的问题" class="headerlink" title="存在的问题"></a>存在的问题</h3><p>升级hexo 5.0后，<code>hexo s</code>后，提示：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">INFO  Validating config</span><br><span class="line">WARN  Deprecated config detected: &quot;use_date_for_updated&quot; is deprecated, please use &quot;updated_option&quot; instead. See https://hexo.io/docs/configuration for more details.</span><br></pre></td></tr></table></figure>

<h3 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h3><p>站点配置文件<code>_config.yml</code></p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">- use_date_for_updated: false</span></span><br><span class="line"><span class="addition">+ updated_option: mtime</span></span><br></pre></td></tr></table></figure>

<hr>
<div class="note primary flat"><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">Hexo</span> <span class="number">4.0</span><span class="number">.0</span> <span class="string">提供的</span> <span class="string">use_date_for_updated</span> <span class="string">配置项现已被</span> <span class="string">updated_option</span> <span class="string">替代。</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">use_date_for_updated:</span> <span class="literal">true</span> <span class="string">现在等价于</span> <span class="attr">updated_option:</span> <span class="string">&#x27;date&#x27;</span><span class="string">。</span></span><br><span class="line">    <span class="attr">use_date_for_updated:</span> <span class="literal">false</span> <span class="string">现在等价于</span> <span class="attr">updated_option:</span> <span class="string">&#x27;mtime&#x27;</span><span class="string">。</span></span><br><span class="line">    <span class="string">//如果从hexo</span> <span class="number">4.0</span><span class="string">升级到5.0，这里应当是updated_option:</span> <span class="string">mtime（不要引号）</span></span><br></pre></td></tr></table></figure>
</div>

<h2 id="hexo-6-2升级"><a href="#hexo-6-2升级" class="headerlink" title="hexo 6.2升级"></a>hexo 6.2升级</h2><p>出现问题：<a href="https://github.com/hexojs/hexo/issues/4970#issuecomment-1126868358">Asset render failed: %s css&#x2F;style.css #4970</a></p>
<p>解决方法：</p>
<p>node16 npm8<br>修改 package.json：</p>
<p><a href="https://github.com/volantis-x/demo/blob/5063cebe42975af229aea88fbcc0e25fa1cc3048/package.json#L14-L19">https://github.com/volantis-x/demo/blob/5063cebe42975af229aea88fbcc0e25fa1cc3048/package.json#L14-L19</a></p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;hexo-site&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;0.0.0&quot;,</span><br><span class="line">  &quot;private&quot;: true,</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;build&quot;: &quot;hexo generate&quot;,</span><br><span class="line">    &quot;clean&quot;: &quot;hexo clean&quot;,</span><br><span class="line">    &quot;deploy&quot;: &quot;hexo deploy&quot;,</span><br><span class="line">    &quot;server&quot;: &quot;hexo server&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;hexo&quot;: &#123;</span><br><span class="line">    &quot;version&quot;: &quot;6.2.0&quot;</span><br><span class="line">  &#125;,</span><br><span class="line"><span class="addition">+  &quot;overrides&quot;: &#123;</span></span><br><span class="line"><span class="addition">+   &quot;nib&quot;: &#123;</span></span><br><span class="line"><span class="addition">+      &quot;stylus&quot;: &quot;0.54.8&quot;</span></span><br><span class="line"><span class="addition">+   &#125;,</span></span><br><span class="line"><span class="addition">+   &quot;glob&quot;: &quot;7.2.0&quot;</span></span><br><span class="line"><span class="addition">+  &#125;,</span></span><br><span class="line">  &quot;dependencies&quot;: &#123;</span><br><span class="line">    &quot;hexo&quot;: &quot;^6.0.0&quot;,</span><br><span class="line">    &quot;hexo-abbrlink&quot;: &quot;^2.2.1&quot;,</span><br><span class="line">    &quot;hexo-deployer-git&quot;: &quot;^3.0.0&quot;,</span><br><span class="line">    &quot;hexo-filter-nofollow&quot;: &quot;^2.0.2&quot;,</span><br><span class="line">    &quot;hexo-generator-archive&quot;: &quot;^1.0.0&quot;,</span><br><span class="line">    &quot;hexo-generator-category&quot;: &quot;^1.0.0&quot;,</span><br><span class="line">    &quot;hexo-generator-index&quot;: &quot;^2.0.0&quot;,</span><br><span class="line">    &quot;hexo-generator-searchdb&quot;: &quot;^1.4.0&quot;,</span><br><span class="line">    &quot;hexo-generator-sitemap&quot;: &quot;^2.2.0&quot;,</span><br><span class="line">    &quot;hexo-generator-tag&quot;: &quot;^1.0.0&quot;,</span><br><span class="line">    &quot;hexo-renderer-ejs&quot;: &quot;^2.0.0&quot;,</span><br><span class="line">    &quot;hexo-renderer-marked&quot;: &quot;^5.0.0&quot;,</span><br><span class="line">    &quot;hexo-renderer-pug&quot;: &quot;^2.0.0&quot;,</span><br><span class="line">    &quot;hexo-renderer-stylus&quot;: &quot;^2.0.1&quot;,</span><br><span class="line">    &quot;hexo-server&quot;: &quot;^3.0.0&quot;,</span><br><span class="line">    &quot;hexo-theme-butterfly&quot;: &quot;^4.1.0&quot;,</span><br><span class="line">    &quot;hexo-theme-landscape&quot;: &quot;^0.0.3&quot;,</span><br><span class="line">    &quot;hexo-wordcount&quot;: &quot;^6.0.1&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>删除 package-lock.json node_modules<br>然后 执行安装命令:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm i</span><br></pre></td></tr></table></figure>

<p>（安装glob只是执行了npm i，并没有什么用，如果安装了建议马上卸载 npm un glob）</p>
<p><a href="https://github.com/hexojs/hexo/issues/4968">#4968</a></p>
<p><a href="https://github.com/isaacs/node-glob/issues/471">isaacs&#x2F;node-glob#471</a></p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://ifumei.cc/2019/10/26/hexo%E5%92%8Cthemes-Next%E7%89%88%E6%9C%AC%E5%8D%87%E7%BA%A7/">1.hexo版本升级</a></li>
<li><a href="https://blog.csdn.net/u014253173/article/details/81088518">2.Hexo版本升级和Next主题升级之坑</a></li>
<li><a href="https://blog.csdn.net/he_han_san/article/details/103900365">3.hexo TypeError  ERR_INVALID_URL: Invalid URL</a></li>
<li><a href="https://www.jianshu.com/p/ad58bbcede05">4.npm太慢，安装cnpm淘宝镜像替代</a></li>
<li><a href="https://github.com/hexojs/hexo/issues/4450">5.”use_date_for_updated” is deprecated</a></li>
<li><a href="https://blog.skk.moe/post/hexo-5/">6.Hexo 5.0.0 正式发布</a></li>
<li><a href="https://github.com/hexojs/hexo/issues/4970#issuecomment-1126868358">7.Asset render failed: %s css&#x2F;style.css #4970</a></li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo迁移笔记</title>
    <url>/archives/b7fa73bc/</url>
    <content><![CDATA[<h3 id="1-更换电脑、重装系统"><a href="#1-更换电脑、重装系统" class="headerlink" title="1. 更换电脑、重装系统"></a>1. 更换电脑、重装系统</h3><p>首先安装安装 Git 和 Node.js  ，然后配置好SSH 公钥，将<code>id_rsa.pub</code>上传到博客仓库的 Settings-&gt;Deploy keys-&gt;add deploy key。</p>
<p>如果提示port 22问题，参考 <a href="/archives/2284a148/?highlight=port">port22</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b backup git@github.com:iwyang/iwyang.github.io.git blog </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd blog</span><br><span class="line">npm install -g hexo-cli	    </span><br><span class="line">npm install	</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure>

<p>最后将服务器原来的SSH 公钥先删除，再上传新的SSH 公钥。具体操作如下:</p>
<p>服务器上输入：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">su git</span><br><span class="line">cd ~/.ssh</span><br><span class="line">rm -rf authorized_keys</span><br></pre></td></tr></table></figure>

<p>本地Git Bash里输入：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ssh-copy-id -i ~/.ssh/id_rsa.pub git@服务器ip地址</span><br></pre></td></tr></table></figure>

<p>如果在git bash中输入ssh git@服务器的IP地址,能够远程登录的话，则表示设置成功了。如若还是要输入密码，就修改目录权限：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">su git</span><br><span class="line">chmod 600 ~/.ssh/authorized_keys</span><br><span class="line">chmod 700 ~/.ssh</span><br></pre></td></tr></table></figure>

<p>登录成功会提示：</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> ssh git@<span class="number">104.224</span>.<span class="number">191.88</span></span><br><span class="line">Last login: Sat Feb <span class="number">26</span> <span class="number">02</span>:<span class="number">33</span>:<span class="number">30</span> <span class="number">2022</span> from <span class="number">171.81</span>.<span class="number">158.144</span></span><br><span class="line">[<span class="type">git</span>@<span class="type">special</span>-<span class="type">beep</span>-<span class="number">1</span> ~]<span class="variable">$</span></span><br></pre></td></tr></table></figure>

<h3 id="2-更换服务器"><a href="#2-更换服务器" class="headerlink" title="2. 更换服务器"></a>2. 更换服务器</h3><p>最好首先克隆<code>github</code>上的源码。</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">git config <span class="literal">--global</span> user.name <span class="string">&quot;iwyang&quot;</span></span><br><span class="line">git config <span class="literal">--global</span> user.email <span class="string">&quot;455343442@qq.com&quot;</span></span><br><span class="line">git clone <span class="literal">-b</span> backup git@github.com:iwyang/iwyang.github.io.git blog</span><br><span class="line">ssh<span class="literal">-copy-id</span> <span class="literal">-i</span> ~/.ssh/id_rsa.pub git@<span class="number">104.224</span>.<span class="number">191.88</span></span><br><span class="line">ssh git@<span class="number">104.224</span>.<span class="number">191.88</span></span><br><span class="line">git clone git@github.com:iwyang/pic.git pic</span><br></pre></td></tr></table></figure>

<p><strong>可结合<a href="https://bore.vip/archives/hexo-backup/">hexo通过git备份&amp;还原源码</a>这篇文章来看</strong>。</p>
<p>参考：</p>
<ul>
<li><a href="https://bore.vip/archives/45284.html#%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%93%8D%E4%BD%9C">ubuntu 搭建hexo-服务器操作部分</a></li>
<li><a href="https://bore.vip/archives/cb52221e.html#%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%93%8D%E4%BD%9C">centos8 搭建hexo-服务器操作部分</a></li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo通过git备份&amp;还原源码</title>
    <url>/archives/c5bb486d/</url>
    <content><![CDATA[<p> 上回做过<a href="https://bore.vip/archives/a0c508c1.html">hexo迁移笔记</a>，基本思路是利用U盘拷贝，或者网盘自动同步来备份，这回是通过git备份还原hexo源码。</p>
<blockquote>
<p>Hexo博客存在一个问题：我们仅仅将博客的静态页面文件部署到了github远程仓库中，而我们的站点源文件仍在本地存储。如果存储站点源文件的电脑系统崩溃了，或者我们换了其他电脑，我们便无法实时更新博客了。</p>
</blockquote>
<span id="more"></span>

<blockquote>
<p>如果选择重新搭建站点，不仅过程繁琐，而且还需要大量时间安装依赖、主题配置、博客优化，极其麻烦。所以我们需要将站点必要文件也部署到远程仓库中。然而github的私有仓库是要收费的，如果用免费仓库，暴露hexo源码，尤其是配置文件是很不安全的，因为配置文件中可能含有你的隐私信息，比如各种秘钥等。所以有一个私人仓库是很有利的。你可以通过购买服务器搭建自己的git私人服务器并备份hexo源码。你也可以在coding等这样提供私人仓库的服务商进行hexo源码备份。<br>我们采取的远程仓库部署策略是：使用coding的私人仓库，一个仓库两个分支。仓库即[<a href="http://yourname.coding.me/">yourname.coding.me</a>]，一个分支[master]用于托管演示页面，一个分支[backup]用于备份Hexo博客站点的必要文件。</p>
</blockquote>
<h2 id="备份"><a href="#备份" class="headerlink" title="备份"></a>备份</h2><p>多机同步更新的前提：backup分支（也可以是其他名称的分支或者新的仓库）</p>
<p>Hexo博客站点的必要文件：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">.</span></span><br><span class="line"><span class="string">├──</span> <span class="string">scaffolds</span>    <span class="comment"># 文章模板</span></span><br><span class="line"><span class="string">├──</span> <span class="string">source</span>       <span class="comment"># 用户源文件：页面，文章markdown文件</span></span><br><span class="line"><span class="string">├──</span> <span class="string">themes</span>       <span class="comment"># 主题</span></span><br><span class="line"><span class="string">├──</span> <span class="string">.gitignore</span>   <span class="comment"># git忽略文件信息</span></span><br><span class="line"><span class="string">├──</span> <span class="string">_config.yml</span>  <span class="comment"># 站点配置文件</span></span><br><span class="line"><span class="string">├──</span> <span class="string">package.json</span> <span class="comment"># 已安装插件映射表，下次只需npm install即直接安装表中的插件</span></span><br><span class="line"><span class="string">├──</span> <span class="string">package-lock.json</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>使git上传远程git服务器（这里是coding）时可忽略不必要的文件，做法是编辑<strong>站点根目录</strong>下的<code>.gitignore</code>文件，复制粘贴一下内容到<code>.gitignore</code>文件中。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">.DS_Store</span></span><br><span class="line"><span class="string">Thumbs.db</span></span><br><span class="line"><span class="string">db.json</span></span><br><span class="line"><span class="string">*.log</span></span><br><span class="line"><span class="string">node_modules/</span></span><br><span class="line"><span class="string">public/</span></span><br><span class="line"><span class="string">.deploy*/</span></span><br></pre></td></tr></table></figure>

<h3 id="删除必要文件"><a href="#删除必要文件" class="headerlink" title="删除必要文件"></a>删除必要文件</h3><p>删除<code>themes/你的主题</code>中的<code>.git</code>，<code>.github</code>，<code>.gitignore</code>等git仓库文件，只保留站点根目录下的<code>.gitignore</code>。</p>
<h3 id="hexo源码备份"><a href="#hexo源码备份" class="headerlink" title="hexo源码备份"></a>hexo源码备份</h3><h4 id="备份到gitee-backup分支"><a href="#备份到gitee-backup分支" class="headerlink" title="备份到gitee backup分支"></a>备份到gitee backup分支</h4><p>2020.7.8 现在没用这种备份方法</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">git</span> <span class="string">init</span>                  </span><br><span class="line"><span class="string">git</span> <span class="string">checkout</span> <span class="string">-b</span> <span class="string">backup</span>  	 </span><br><span class="line"><span class="string">git</span> <span class="string">add</span> <span class="string">.</span>				 	  </span><br><span class="line"><span class="string">git</span> <span class="string">commit</span> <span class="string">-m</span> <span class="string">&quot;提交说明&quot;</span> 	  </span><br><span class="line"><span class="string">git</span> <span class="string">remote</span> <span class="string">add</span> <span class="string">origin</span> <span class="string">git@gitee.com:iwyang/iwyang.git</span>  </span><br><span class="line"><span class="string">git</span> <span class="string">push</span> <span class="string">--force</span> <span class="string">origin</span> <span class="string">backup</span>	 </span><br></pre></td></tr></table></figure>

<h4 id="备份到github-master分支"><a href="#备份到github-master分支" class="headerlink" title="备份到github master分支"></a>备份到github master分支</h4><p>2020.7.8 目前采用这种备份方法（<strong>一步一步的执行</strong>）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git init</span><br><span class="line">git remote add origin git@github.com:iwyang/hexo.git</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;site backup&quot;</span></span><br><span class="line">git push --force origin master</span><br></pre></td></tr></table></figure>

<hr>
<p><strong>PS</strong>: 如果执行第二步<code>git checkout -b backup</code>后，提示<code>fatal: A branch named &#39;backup&#39; already exists.</code>，则执行以下操作</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git remote <span class="built_in">rm</span> origin</span><br><span class="line">git checkout -b backup</span><br></pre></td></tr></table></figure>

<p>实在不行先执行下面命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -D backup <span class="comment">#删除分支:必须切换到其他的分之下才可操作</span></span><br></pre></td></tr></table></figure>

<hr>
<h4 id="备份到github-backup分支"><a href="#备份到github-backup分支" class="headerlink" title="备份到github backup分支"></a>备份到github backup分支</h4><p>2022.2.4 目前采用这种备份方法（<strong>一步一步的执行</strong>）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git init                  </span><br><span class="line">git checkout -b backup  	 			 	  	  </span><br><span class="line">git remote add origin git@github.com:iwyang/iwyang.github.io.git  </span><br><span class="line">git add .	</span><br><span class="line">git commit -m <span class="string">&quot;site backup&quot;</span> </span><br><span class="line">git push --force origin backup</span><br></pre></td></tr></table></figure>

<p>如果出现问题参考上面解决方法。</p>
<h3 id="部署脚本"><a href="#部署脚本" class="headerlink" title="部署脚本"></a>部署脚本</h3><p>根目录新建<code>deploy.sh</code>：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[0;32mDeploying updates to gitee...\033[0m&quot;</span></span><br><span class="line">git add .	</span><br><span class="line">git commit -m <span class="string">&quot;site backup&quot;</span></span><br><span class="line">git push --force origin backup</span><br><span class="line">hexo clean</span><br><span class="line">hexo g -d</span><br></pre></td></tr></table></figure>

<h2 id="还原"><a href="#还原" class="headerlink" title="还原"></a>还原</h2><h3 id="还原前提"><a href="#还原前提" class="headerlink" title="还原前提"></a>还原前提</h3><p>安装Git，nodejs，配置环境变量。</p>
<h3 id="hexo源码还原"><a href="#hexo源码还原" class="headerlink" title="hexo源码还原"></a>hexo源码还原</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> git@github.com:iwyang/hexo.git	<span class="comment"># 克隆master分支到本地，私有仓库需要输入用户名和密码</span></span><br><span class="line">$ <span class="built_in">cd</span> hexo-master		     <span class="comment"># 进入hexo-master文件夹</span></span><br><span class="line">$ npm install -g hexo-cli	 <span class="comment"># 全局安装hexo</span></span><br><span class="line">$ npm install				 <span class="comment"># 安装所有依赖(hexo以及插件的依赖)，根据package.json自动安装之前安装过的插件</span></span><br></pre></td></tr></table></figure>

<h3 id="Git配置用户信息（新系统环境下）"><a href="#Git配置用户信息（新系统环境下）" class="headerlink" title="Git配置用户信息（新系统环境下）"></a>Git配置用户信息（新系统环境下）</h3><p>在Git bash中输入：</p>
<p>1.设置用户名</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global user.name <span class="string">&#x27;这里填写自己的用户名&#x27;</span></span><br></pre></td></tr></table></figure>

<p>2.设置用户名邮箱</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global user.email <span class="string">&#x27;这里填写自己的用户邮箱&#x27;</span></span><br></pre></td></tr></table></figure>

<p>3.查看配置信息</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --list</span><br></pre></td></tr></table></figure>

<p>注意：该设置在GitHub仓库主页显示谁提交了该文件，注意这里的 - 有两个！</p>
<h3 id="配置网络协议"><a href="#配置网络协议" class="headerlink" title="配置网络协议"></a>配置网络协议</h3><p>SSH协议，长期部署推荐SSH，一劳永逸。</p>
<p>1.SSH秘钥：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C <span class="string">&quot;youremail@example.com&quot;</span>		<span class="comment"># 生成rsa秘钥</span></span><br><span class="line">$ <span class="built_in">cd</span> ~/.ssh		 		<span class="comment"># 进入虚拟目录ssh文件中</span></span><br><span class="line">$ <span class="built_in">cat</span> id_rsa.pub		<span class="comment"># 显示id_rsa.pub文件内容</span></span><br></pre></td></tr></table></figure>

<p>2.复制秘钥至github&#x2F;coding-&gt;用户setting-&gt;SSH keys，New SSH Key</p>
<p>3.验证是否添加成功</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ssh -T git@github.com  <span class="comment"># 验证github是否添加成功</span></span><br><span class="line">$ ssh -T git@git.coding.net  <span class="comment"># 验证coding是否添加成功</span></span><br></pre></td></tr></table></figure>

<p>4.编辑<strong>站点配置文件</strong><code>_config.yml</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line">    <span class="built_in">type</span>: git</span><br><span class="line">    repo: </span><br><span class="line">        github: git@github.com:yourname/yourname.github.io.git </span><br><span class="line">        coding: git@git.coding.net:yourname/yourname.coding.me.git </span><br><span class="line">    branch: master</span><br></pre></td></tr></table></figure>

<h3 id="及时更新hexo源码到coding"><a href="#及时更新hexo源码到coding" class="headerlink" title="及时更新hexo源码到coding"></a>及时更新hexo源码到coding</h3><p>发表文章、更新文章、修改源码，要及时更新hexo源码到coding。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;更新&quot;</span></span><br><span class="line">git push --force origin master</span><br></pre></td></tr></table></figure>

<p>2020.7.8 把这段代码放在自动部署脚本里即可。</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://www.qcmoke.site/blog/hexo_backup.html">1.通过git备份还原hexo源码</a></p>
<p><a href="https://www.cnblogs.com/leaf930814/p/6664706.html">2.git报错：’fatal:remote origin already exists’怎么处理</a></p>
<p><a href="https://blog.csdn.net/www1056481167/article/details/80046132">3.git 常用命令</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo部署到centos服务器</title>
    <url>/archives/d693fd5d/</url>
    <content><![CDATA[<p> 服务器环境：Centos 8 x64</p>
<p>本地环境：Win10 x64</p>
<h2 id="本地操作"><a href="#本地操作" class="headerlink" title="本地操作"></a>本地操作</h2><h3 id="安装-Git-和-Node-js"><a href="#安装-Git-和-Node-js" class="headerlink" title="安装 Git 和 Node.js"></a>安装 Git 和 Node.js</h3><p>本地需要安装 <a href="https://git-scm.com/">Git</a> 和 <a href="https://nodejs.org/en/">Node.js</a>，安装过程略。</p>
<p>安装完git后还要配置环境变量：<br>右键我的电脑 –&gt; 属性，然后点击高级系统设置 –&gt; 环境变量 –&gt; 选择用户变量或系统变量中的Path,点击编辑；找到Git安装目录,添加以下地址:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">D:\Program Files\Git\bin</span><br><span class="line">D:\Program Files\Git\mingw64\libexec\git-core</span><br><span class="line">D:\Program Files\Git\mingw64\bin</span><br></pre></td></tr></table></figure>

<h3 id="配置SSH-公钥"><a href="#配置SSH-公钥" class="headerlink" title="配置SSH 公钥"></a>配置SSH 公钥</h3><p>Windows 上安装 <a href="https://git-for-windows.github.io/">Git for Windows</a> 之后在开始菜单里打开 Git Bash 输入：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;你的用户名&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;你的电子邮箱&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line"><span class="built_in">mkdir</span> .ssh</span><br><span class="line"><span class="built_in">cd</span> .ssh</span><br><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>

<p>在系统当前用户文件夹下生成了私钥 <code>id_rsa</code> 和公钥 <code>id_rsa.pub</code>。</p>
<h3 id="初始化-Hexo"><a href="#初始化-Hexo" class="headerlink" title="初始化 Hexo"></a>初始化 Hexo</h3><p>在电脑任意目录新建一个文件夹 <code>hexo</code>，进入文件夹，在空白处点击右键选择 Git Bash，输入：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br><span class="line">hexo init</span><br><span class="line">npm install</span><br><span class="line">hexo d -<span class="built_in">fg</span></span><br><span class="line">hexo serve</span><br></pre></td></tr></table></figure>

<p>这样便在本地初始化了 Hexo 文件夹，然后输入：<br><code>hexo new post &quot;第一篇文章&quot;</code><br>即可新建一篇文章，用文本编辑器打开 <code>hexo/source/_post/第一篇文章.md</code> 可以快速开始写作。其余使用方法和配置按照 Hexo 官网操作即可。推荐编辑器**<a href="https://github.com/zhuzhuyule/HexoEditor">hexo-editor</a>**</p>
<p>2020&#x2F;4&#x2F;27更新: hexo-editor速度太慢，改用<a href="https://www.typora.io/">Typora</a></p>
<h3 id="修改-deploy-参数"><a href="#修改-deploy-参数" class="headerlink" title="修改 deploy 参数"></a>修改 deploy 参数</h3><p>打开位于 <code>hexo</code> 文件夹下的 <code>_config.yml</code>，修改 deploy 参数：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line"> <span class="built_in">type</span>: git</span><br><span class="line"> repo: git@blog.yizhilee.com:hexo.git</span><br><span class="line"> branch: master</span><br></pre></td></tr></table></figure>

<h4 id="提交到github"><a href="#提交到github" class="headerlink" title="提交到github"></a>提交到github</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo:</span><br><span class="line">    coding: git@e.coding.net:iwyang/iwyang.coding.me.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>

<h4 id="github、coding双线部署"><a href="#github、coding双线部署" class="headerlink" title="github、coding双线部署"></a>github、coding双线部署</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo:</span><br><span class="line">    github: git@github.com:iwyang/iwyang.github.io.git</span><br><span class="line">    coding: git@e.coding.net:iwyang/iwyang.coding.me.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>

<h4 id="github、coding、服务器三线线部署"><a href="#github、coding、服务器三线线部署" class="headerlink" title="github、coding、服务器三线线部署"></a>github、coding、服务器三线线部署</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo:</span><br><span class="line">    github: git@github.com:iwyang/iwyang.github.io.git</span><br><span class="line">    coding: git@e.coding.net:iwyang/iwyang.coding.me.git</span><br><span class="line">    服务器: git@45.76.173.167:hexo.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>

<h2 id="服务器操作"><a href="#服务器操作" class="headerlink" title="服务器操作"></a>服务器操作</h2><p>首先，在 服务器 上安装 Git 和 nginx。</p>
<div class="note primary">2021.5.27 注意最好不要执行下面第一步升级操作，不然升级到最后一步会卡死，最后导致后面无法启动nginx。</div>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum update -y</span><br><span class="line">yum install git-core nginx -y</span><br></pre></td></tr></table></figure>

<p>如果是centos 7，先要安装安装epel：<code>yum install epel-release</code>，才能安装nginx。</p>
<p>Nginx 安装完成后需要手动启动，启动Nginx并设置开机自启：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl start nginx</span><br><span class="line">systemctl <span class="built_in">enable</span> nginx</span><br></pre></td></tr></table></figure>

<p>如果开启了防火墙，记得添加 HTTP 和 HTTPS 端口到防火墙允许列表。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">firewall-cmd --permanent --zone=public --add-service=http </span><br><span class="line">firewall-cmd --permanent --zone=public --add-service=https</span><br><span class="line">firewall-cmd --reload</span><br><span class="line">systemctl restart firewalld.service</span><br></pre></td></tr></table></figure>

<p>或者直接关闭防火墙：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl stop firewalld.service</span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld.service</span><br></pre></td></tr></table></figure>

<p>如果提示”<a href="https://www.cnblogs.com/zkwarrior/p/14361509.html">Failed to get properties: Access denied</a>“，执行</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">kill</span> -TERM 1</span><br></pre></td></tr></table></figure>

<p>配置完成后，访问使用浏览器服务器 ip ，如果能看到以下界面，表示运行成功。</p>
<h3 id="配置用户"><a href="#配置用户" class="headerlink" title="配置用户"></a>配置用户</h3><p>然后新增一个名为 git 的用户，过程中需要设置登录密码，输入两次密码即可。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">adduser git</span><br><span class="line">passwd git</span><br></pre></td></tr></table></figure>

<p>给用户 <code>git</code> 赋予无需密码操作的权限（否则到后面 Hexo 部署的时候会提示无权限）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 740 /etc/sudoers</span><br><span class="line">vi /etc/sudoers</span><br></pre></td></tr></table></figure>

<p>在图示位置<code>root ALL=(ALL:ALL) ALL</code>的下方添加</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git ALL=(ALL:ALL) ALL</span><br></pre></td></tr></table></figure>

<p>然后保存。然后更改读写权限。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 440 /etc/sudoers</span><br></pre></td></tr></table></figure>

<h3 id="上传-SSH-公钥"><a href="#上传-SSH-公钥" class="headerlink" title="上传 SSH 公钥"></a>上传 SSH 公钥</h3><p>接下来要把本地的 ssh 公钥上传到 服务器 。执行</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">su git</span><br><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line"><span class="built_in">mkdir</span> .ssh &amp;&amp; <span class="built_in">cd</span> .ssh</span><br><span class="line"><span class="built_in">touch</span> authorized_keys</span><br><span class="line">vi authorized_keys</span><br></pre></td></tr></table></figure>

<p>现在要打开本地的 <code>Git Bash</code>，输入<code>vi ~/.ssh/id_rsa.pub</code>，把里面的内容复制下来粘贴到上面打开的文件里。</p>
<p>接着把ssh目录设置为只有属主有读、写、执行权限。代码如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 600 ~/.ssh/authorized_keys</span><br><span class="line"><span class="built_in">chmod</span> 700 ~/.ssh</span><br></pre></td></tr></table></figure>

<p>然后建立放部署的网页的 Git 库。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line"><span class="built_in">mkdir</span> hexo.git &amp;&amp; <span class="built_in">cd</span> hexo.git</span><br><span class="line">git init --bare</span><br></pre></td></tr></table></figure>

<p>测试一下，如果在 Git Bash 中输入 <code>ssh git@服务器的IP地址</code> 能够远程登录的话，则表示设置成功了。如果你的服务器端口不是22。参考：<a href="https://bore.vip/archives/45284.html#%E4%B8%8A%E4%BC%A0-SSH-%E5%85%AC%E9%92%A5">上传SSH公钥</a>。</p>
<hr>
<p>ps: 如果配置完成还是提示要输入密码，可以使用 <code>ssh-copy-id</code>，在本地打开 Git Bash 输入：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh-copy-id -i ~/.ssh/id_rsa.pub git@服务器ip地址</span><br></pre></td></tr></table></figure>

<hr>
<p>登录成功会提示：</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> ssh git@<span class="number">104.224</span>.<span class="number">191.88</span></span><br><span class="line">Last login: Sat Feb <span class="number">26</span> <span class="number">02</span>:<span class="number">33</span>:<span class="number">30</span> <span class="number">2022</span> from <span class="number">171.81</span>.<span class="number">158.144</span></span><br><span class="line">[<span class="type">git</span>@<span class="type">special</span>-<span class="type">beep</span>-<span class="number">1</span> ~]<span class="variable">$</span></span><br></pre></td></tr></table></figure>

<h3 id="用户授权"><a href="#用户授权" class="headerlink" title="用户授权"></a>用户授权</h3><p>接下来要给用户 git 授予操作 nginx 放网页的地方的权限：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">su</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /var/www/hexo</span><br><span class="line"><span class="built_in">chown</span> git:git -R /var/www/hexo</span><br></pre></td></tr></table></figure>

<h3 id="配置钩子"><a href="#配置钩子" class="headerlink" title="配置钩子"></a>配置钩子</h3><p>现在就要向 Git Hooks 操作，配置好钩子：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">su git</span><br><span class="line"><span class="built_in">cd</span> /home/git/hexo.git/hooks</span><br><span class="line">vi post-receive</span><br></pre></td></tr></table></figure>

<p>输入内容并保存：（里面的路径看着换吧，上面的命令没改的话也不用换）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">GIT_REPO=/home/git/hexo.git</span><br><span class="line">TMP_GIT_CLONE=/tmp/hexo</span><br><span class="line">PUBLIC_WWW=/var/www/hexo</span><br><span class="line"><span class="built_in">rm</span> -rf <span class="variable">$&#123;TMP_GIT_CLONE&#125;</span></span><br><span class="line">git <span class="built_in">clone</span> <span class="variable">$GIT_REPO</span> <span class="variable">$TMP_GIT_CLONE</span></span><br><span class="line"><span class="built_in">rm</span> -rf <span class="variable">$&#123;PUBLIC_WWW&#125;</span>/*</span><br><span class="line"><span class="built_in">cp</span> -rf <span class="variable">$&#123;TMP_GIT_CLONE&#125;</span>/* <span class="variable">$&#123;PUBLIC_WWW&#125;</span></span><br></pre></td></tr></table></figure>

<p>赋予可执行权限：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x post-receive</span><br></pre></td></tr></table></figure>

<h3 id="配置-nginx"><a href="#配置-nginx" class="headerlink" title="配置 nginx"></a>配置 nginx</h3><p>然后是配置 nginx。执行</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">su</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/nginx/conf.d/hexo.conf</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">  listen  80 ;</span><br><span class="line">  listen [::]:80;</span><br><span class="line">  root /var/www/hexo;</span><br><span class="line">  server_name bore.vip www.bore.vip;</span><br><span class="line">  access_log  /var/log/nginx/hexo_access.log;</span><br><span class="line">  error_log   /var/log/nginx/hexo_error.log;</span><br><span class="line">  error_page 404 =  /404.html;</span><br><span class="line">  location ~* ^.+\.(ico|gif|jpg|jpeg|png)$ &#123;</span><br><span class="line">    root /var/www/hexo;</span><br><span class="line">    access_log   off;</span><br><span class="line">    expires      1d;</span><br><span class="line">  &#125;</span><br><span class="line">  location ~* ^.+\.(css|js|txt|xml|swf|wav)$ &#123;</span><br><span class="line">    root /var/www/hexo;</span><br><span class="line">    access_log   off;</span><br><span class="line">    expires      10m;</span><br><span class="line">  &#125;</span><br><span class="line">  location / &#123;</span><br><span class="line">    root /var/www/hexo;</span><br><span class="line">    <span class="keyword">if</span> (-f <span class="variable">$request_filename</span>) &#123;</span><br><span class="line">    rewrite ^/(.*)$  /<span class="variable">$1</span> <span class="built_in">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  location /nginx_status &#123;</span><br><span class="line">    stub_status on;</span><br><span class="line">    access_log off;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>因为放中文进去会乱码所以就不在里面注释了。代码里面配置了默认的根目录，绑定了域名，并且自定义了 404 页面的路径。<br>最后就重启 nginx 服务器：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl restart nginx</span><br></pre></td></tr></table></figure>

<hr>
<p>如果上传网页后，Nginx 出现 403 Forbidden，执行：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/selinux/config</span><br></pre></td></tr></table></figure>

<p>将SELINUX&#x3D;enforcing 修改为 SELINUX&#x3D;disabled 状态。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELINUX=disabled</span><br></pre></td></tr></table></figure>

<p>重启生效，reboot。</p>
<hr>
<p>ps: 最好做一个301跳转，把bore.vip和<code>www.bore.vip</code>合并，并把之前的域名也一并合并. 有两种实现方法,第一种方法是判断nginx核心变量host(老版本是http_host)：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">server_name bore.vip www.bore.vip ;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$host</span> != <span class="string">&#x27;bore.vip&#x27;</span> ) &#123;</span><br><span class="line">rewrite ^/(.*)$ http://bore.vip/<span class="variable">$1</span> permanent;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="发布文章"><a href="#发布文章" class="headerlink" title="发布文章"></a>发布文章</h2><p>在本地编辑好文章之后使用 <code>hexo g -d</code> ，如果hexo d后， ERROR Deployer not found: git，执行</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -- save hexo-deployer-git</span><br></pre></td></tr></table></figure>

<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><p><a href="https://tiktoking.github.io/2016/01/26/hexo/#">1.在服务器上搭建hexo博客，利用git更新</a></p>
</li>
<li><p><a href="https://eliyar.biz/how_to_build_hexo_blog/">2.从 0 开始搭建 hexo 博客 </a></p>
</li>
<li><p><a href="https://segmentfault.com/a/1190000012907499">3.基于CentOS搭建Hexo博客</a></p>
</li>
<li><p><a href="https://blog.csdn.net/qq_35843543/article/details/81561240">4.Nginx出现403 forbidden</a></p>
</li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>服务器</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo配置哔哔点啥&amp;&amp;Speak</title>
    <url>/archives/6c31209c/</url>
    <content><![CDATA[<div class="note warning flat"><p>2022.8.1 由于腾讯云开发要开始收费了，故将<code>哔哔点啥</code>改成<code>Speak</code>。点击直达：<a class="btn-beautify blue larger" href="/archives/6c31209c/#%E9%83%A8%E7%BD%B2Speak" 
  title="部署 Speak"><i class="far fa-hand-point-right"></i><span>部署 Speak</span></a></p>
</div>

<div class="note warning flat"><p>2022.8.28 Vercel崩了，要绑定个二级域名才能用。或者使用服务器部署版。</p>
</div>

<h2 id="服务部署"><a href="#服务部署" class="headerlink" title="服务部署"></a>服务部署</h2><p>1.首先保证成功激活腾讯云开发.</p>
<p>2.<a href="https://console.cloud.tencent.com/tcb/env/index?action=CreateAndDeployCloudBaseProject&appUrl=https://github.com/lmm214/bber&branch=main">点击一键部署至云开发</a></p>
<blockquote>
<p>推荐创建上海环境。如选择广州环境，需要在 twikoo.init() 时额外指定环境 region: “ap-guangzhou”</p>
</blockquote>
<p>3.进入环境-登录授权，启用“匿名登录”</p>
<p>4.进入<a href="https://console.cloud.tencent.com/tcb/env/safety">环境-安全配置</a>，将博客网址添加到“WEB安全域名”</p>
<p>5.进入<a href="https://console.cloud.tencent.com/tcb/env/access">环境-HTTP访问服务</a>，复制链接备用。</p>
<p>进入<a href="https://console.cloud.tencent.com/tcb/scf/index">云函数</a>，修改自定义serverkey <code>bber</code> 并保存备用。</p>
<p>6.进入云函数，修改自定义serverkey bber 并保存备用。</p>
<p>7.扫码进入公众号，输入命名绑定。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/bber 你刚刚设置的key,https://你的云函数HTTP访问地址/bber</span><br><span class="line"></span><br><span class="line">比如: /bber mykey,https://balabala.ap-shanghai.app.tcloudbase.com/bber</span><br></pre></td></tr></table></figure>

<p><strong>8. 手动添加一条哔哔 <em>必须要有</em></strong></p>
<p>进入腾讯云数据库-&gt;talks-&gt;文档列表-&gt;添加文档</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">字段: content</span><br><span class="line">类型: string</span><br><span class="line">值: 随便</span><br></pre></td></tr></table></figure>

<p>点击确定</p>
<p>验证微信发送</p>
<p>9.微信发送一条文字，返回哔哔成功，talks文档列表里多出来一条，即为服务部署成功。</p>
<h2 id="前端部署"><a href="#前端部署" class="headerlink" title="前端部署"></a>前端部署</h2><p>1.打开Hugo的unsafe</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">markup:</span></span><br><span class="line">    <span class="attr">tableOfContents:</span></span><br><span class="line">        <span class="attr">endLevel:</span> <span class="number">4</span></span><br><span class="line">        <span class="attr">ordered:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">startLevel:</span> <span class="number">2</span></span><br><span class="line">    <span class="attr">highlight:</span></span><br><span class="line">        <span class="attr">noClasses:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">goldmark:</span></span><br><span class="line">        <span class="attr">renderer:</span></span><br><span class="line">            <span class="attr">unsafe:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>2.新建一个<em>markdown</em>文件（此法不通，jsdelivr用不了，需要更换地址，见下文）</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&#x27;speak&#x27;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">speak</span>&gt;</span></span></span><br><span class="line">&lt;!-- 使用markdown渲染 --&gt;</span><br><span class="line">&lt;!-- 使用markdown渲染 --&gt;</span><br><span class="line">&lt;!-- <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/ispeak-bber/ispeak-bber-md.min.js&quot;</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> &gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span> --&gt;</span><br><span class="line">&lt;!-- 不使用markdown渲染 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/ispeak-bber/ispeak-bber.min.js&quot;</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> &gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;!-- 解析微信表情（参考：https://github.com/buddys/qq-wechat-emotion-parser） --&gt;</span><br><span class="line">&lt;!-- <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/buddys/qq-wechat-emotion-parser@master/dist/qq-wechat-emotion-parser.min.js&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span> --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span></span><br><span class="line">ispeakBber</span><br><span class="line"><span class="code">    .init(&#123;</span></span><br><span class="line"><span class="code">      el: &#x27;#speak&#x27;, // 容器选择器</span></span><br><span class="line"><span class="code">      name: &#x27;bore&#x27;, // 显示的昵称</span></span><br><span class="line"><span class="code">      envId: &#x27;腾讯云开发环境id&#x27;, // 环境id</span></span><br><span class="line"><span class="code">      region: &#x27;ap-shanghai&#x27;, // 腾讯云地址，默认为上海</span></span><br><span class="line"><span class="code">      limit: 10, // 每次加载的条数，默认为5</span></span><br><span class="line"><span class="code">      avatar: &#x27;https://cdn.jsdelivr.net/gh/iwyang/pic/avatar.jpg&#x27;,</span></span><br><span class="line"><span class="code">      fromColor:&#x27;rgb(245, 150, 170)&#x27;, // 下方标签背景颜色 默认 rgb(245, 150, 170)</span></span><br><span class="line"><span class="code">      loadingImg: &#x27;https://7.dusays.com/2021/03/04/d2d5e983e2961.gif&#x27;, // 自定义loading的图片，示例值为默认值</span></span><br><span class="line"><span class="code">      dbName:&#x27;talks&#x27; // 数据的名称，默认talks，避免有人的命名不是这个，所以加入此配置字段。</span></span><br><span class="line"><span class="code">    &#125;)</span></span><br><span class="line"><span class="code">    .then(function() &#123;</span></span><br><span class="line"><span class="code">      // 哔哔加载完成后的回调函数，你可以写你自己的功能</span></span><br><span class="line"><span class="code">      console.log(&#x27;哔哔 加载完成&#x27;)</span></span><br><span class="line"><span class="code">    &#125;)</span></span><br><span class="line"><span class="code">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>
<p>2022.5.18 <code>jsdelivr</code>用不了，需要修改地址（本地相对路径）：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">&lt;style&gt;</span></span><br><span class="line"><span class="string">.page-title</span> &#123;</span><br><span class="line">    <span class="attr">display:</span> <span class="string">none;</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="string">&lt;/style&gt;</span></span><br><span class="line"><span class="string">&lt;!--</span>  <span class="string">自言自语</span>  <span class="string">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&lt;div</span> <span class="string">id=&#x27;speak&#x27;&gt;</span></span><br><span class="line"><span class="string">&lt;script</span> <span class="string">type=&quot;text/javascript&quot;</span> <span class="string">src=&quot;/img/js/ispeak-bber.min.js&quot;</span> <span class="string">charset=&quot;utf-8&quot;</span> <span class="string">&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;script&gt;</span></span><br><span class="line"><span class="string">ispeakBber</span></span><br><span class="line">    <span class="string">.init(&#123;</span></span><br><span class="line">        <span class="attr">el:</span> <span class="string">&#x27;#speak&#x27;</span><span class="string">,</span> <span class="string">//</span> <span class="string">容器选择器</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">&#x27;Bore 🦄&#x27;</span><span class="string">,</span> <span class="string">//</span> <span class="string">显示的昵称</span></span><br><span class="line">        <span class="attr">envId:</span> <span class="string">&#x27;hello-cloudbase-0gc8y1np937491cb&#x27;</span><span class="string">,</span> <span class="string">//</span> <span class="string">环境id</span></span><br><span class="line">        <span class="attr">region:</span> <span class="string">&#x27;ap-shanghai&#x27;</span><span class="string">,</span> <span class="string">//</span> <span class="string">腾讯云地址，默认为上海</span></span><br><span class="line">        <span class="attr">limit:</span> <span class="number">10</span><span class="string">,</span> <span class="string">//</span> <span class="string">每次加载的条数，默认为5</span></span><br><span class="line">        <span class="attr">avatar:</span> <span class="string">&#x27;/img/avatar.jpg&#x27;</span><span class="string">,</span> <span class="string">//</span> <span class="string">头像地址</span></span><br><span class="line">        <span class="string">fromColor:&#x27;rgb(245,</span> <span class="number">150</span><span class="string">,</span> <span class="number">170</span><span class="string">)&#x27;,</span> <span class="string">//</span> <span class="string">下方标签背景颜色</span> <span class="string">默认</span> <span class="string">rgb(245,</span> <span class="number">150</span><span class="string">,</span> <span class="number">170</span><span class="string">)</span></span><br><span class="line">        <span class="attr">loadingImg:</span> <span class="string">&#x27;/img/loading.gif&#x27;</span><span class="string">,</span> <span class="string">//</span> <span class="string">自定义loading的图片，示例值为默认值</span></span><br><span class="line">        <span class="string">dbName:&#x27;talks&#x27;</span> <span class="string">//</span> <span class="string">数据的名称，默认talks，避免有人的命名不是这个，所以加入此配置字段。</span></span><br><span class="line">    <span class="string">&#125;)</span></span><br><span class="line">    <span class="string">.then(function()</span> &#123;</span><br><span class="line">        <span class="string">//</span> <span class="string">哔哔加载完成后的回调函数，你可以写你自己的功能</span></span><br><span class="line">        <span class="string">console.log(&#x27;哔哔</span> <span class="string">加载完成&#x27;)</span></span><br><span class="line">    &#125;<span class="string">)</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br></pre></td></tr></table></figure>



<p>3.bber 说说美化(调整了说说出现图片时，顶部空白过大问题；更换一种 timeago 方法，解决 “两周前”、“三周前” 等部分情况下显示实际日期的 bug；修复头像尺寸异常的 bug等)</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--  自言自语  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&#x27;speak&#x27;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/js/timeago.min.js&quot;</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/kuole-o/bber-ispeak@main/dist/ispeak-bber.min.js&quot;</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">ispeakBber</span></span><br><span class="line"><span class="language-javascript">    .<span class="title function_">init</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#speak&#x27;</span>, <span class="comment">// 容器选择器</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&#x27;夜的第八章 🦄&#x27;</span>, <span class="comment">// 显示的昵称</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">envId</span>: <span class="string">&#x27;blogpkly-13278c&#x27;</span>, <span class="comment">// 环境id</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">region</span>: <span class="string">&#x27;ap-shanghai&#x27;</span>, <span class="comment">// 腾讯云地址，默认为上海</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">limit</span>: <span class="number">7</span>, <span class="comment">// 每次加载的条数，默认为5</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">avatar</span>: <span class="string">&#x27;https://cdn.guole.fun/img/gl.jpg&#x27;</span>, <span class="comment">// 头像地址</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">fromColor</span>:<span class="string">&#x27;rgb(245, 150, 170)&#x27;</span>, <span class="comment">// 下方标签背景颜色 默认 rgb(245, 150, 170)</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">loadingImg</span>: <span class="string">&#x27;https://7.dusays.com/2021/03/04/d2d5e983e2961.gif&#x27;</span>, <span class="comment">// 自定义loading的图片，示例值为默认值</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">dbName</span>:<span class="string">&#x27;talks&#x27;</span> <span class="comment">// 数据的名称，默认talks，避免有人的命名不是这个，所以加入此配置字段。</span></span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    .<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 哔哔加载完成后的回调函数，你可以写你自己的功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;哔哔 加载完成&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="部署BBer-weixin公众号"><a href="#部署BBer-weixin公众号" class="headerlink" title="部署BBer-weixin公众号"></a>部署BBer-weixin公众号</h2><p>点击<a href="https://console.cloud.tencent.com/tcb/env/index?action=CreateAndDeployCloudBaseProject&appUrl=https://github.com/lmm214/bber-weixin&branch=main">部署到云开发</a>将 BBer-weixin 微信公众号后端，一键部署到云开发。</p>
<p>对接的微信公众号简要流程：</p>
<p>1.点击 <a href="https://console.cloud.tencent.com/tcb/scf/index">bber-weixin</a> 云函数，右上角<strong>【编辑】</strong>，开启<strong>【固定IP】</strong>，留存<strong>公网固定IP</strong>。</p>
<blockquote>
<p>我将from <code>微信公众号</code>改成了<code>💎 WeChat</code></p>
</blockquote>
<p>2.进入<a href="https://console.cloud.tencent.com/tcb/env/access">环境-HTTP访问服务</a>，获取<code>触发路径链接</code>并留存，如以下格式：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">https://bb-f5c0f-222222.ap-shanghai.app.tcloudbase.com/bber-weixin</span><br></pre></td></tr></table></figure>

<p>3.打开 <a href="https://mp.weixin.qq.com/">微信公众平台</a>，进入开发-基本配置，获取<code>AppID</code>和<code>AppSecret</code>留存，修改<code>IP白名单</code>为上一步的公网固定IP。继续服务器配置：</p>
<blockquote>
<p>消息加密方式选择<code>兼容模式</code></p>
</blockquote>
<p>一个<code>URL</code>，即第2步留存的触发链接；</p>
<p>一个<code>Token</code>，预设为 <code>weixin</code></p>
<p><strong>!!!先不点，不点，不点，不点提交！！！</strong></p>
<p>4.回 <a href="https://console.cloud.tencent.com/tcb/scf/index">bber-weixin</a> 云函数，填入<code>微信公众号appid</code>、<code>微信公众号appsecret</code> 保存。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">const token = <span class="string">&#x27;weixin&#x27;</span> // 微信公众号的服务器验证用的令牌 token</span><br><span class="line">//填入自己的微信公众号appid和appsecret</span><br><span class="line">var wxappid = <span class="string">&#x27;微信公众号appid&#x27;</span>,</span><br><span class="line">    wxappsecret = <span class="string">&#x27;微信公众号appsecret&#x27;</span>,</span><br></pre></td></tr></table></figure>

<p>5.回 <a href="https://mp.weixin.qq.com/">微信公众平台</a>，提交，验证成功！</p>
<p>6.回 <a href="https://console.cloud.tencent.com/tcb/scf/index">bber-weixin</a> 云函数，注释第44行代码，保存。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(tmpStr == signature)&#123;</span><br><span class="line">     //请求来源鉴权</span><br><span class="line">     //成功后注释下行代码</span><br><span class="line">     //return event.queryStringParameters.echostr //成功后注释本行代码</span><br><span class="line">     //成功后注释上行代码</span><br></pre></td></tr></table></figure>

<p>7.手动配置或更新代码： <a href="https://github.com/lmm214/bber-weixin/tree/main/bber-weixin">https://github.com/lmm214/bber-weixin/tree/main/bber-weixin</a></p>
<h2 id="公众号发布说说"><a href="#公众号发布说说" class="headerlink" title="公众号发布说说"></a>公众号发布说说</h2><p><del>接上面，部署好自己的公众号就可以用公众号发布了。这里注意利用公众号发图片。</del></p>
<p>1.先在公众号发一张图片</p>
<p>2.接着输入<code>/a &lt;br&gt;文字说明</code></p>
<p>(输入<code>&lt;br&gt;</code>是为了使图片和文字不处于同一行)</p>
<p>注意：用公众号发图片会一连发几张，不知道是什么原因，以后就用浏览器插件发图片，注意<strong>比例 16:9，长度568px</strong></p>
<h2 id="Chrome-Edge-发布说说"><a href="#Chrome-Edge-发布说说" class="headerlink" title="Chrome + Edge 发布说说"></a>Chrome + Edge 发布说说</h2><h3 id="安装本地插件"><a href="#安装本地插件" class="headerlink" title="安装本地插件"></a>安装本地插件</h3><p><a href="https://cdn.guole.fun/others/bber%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8F%91%E5%B8%83%E6%8F%92%E4%BB%B6.zip">点此下载我提取并修改的浏览器插件包</a></p>
<p>Chrome 安装本地插件：</p>
<p>访问 Chrome——更多工具——扩展程序——左上角“加载已解压的扩展程序”，选择我提供的附件，解压缩后的文件夹 1.0.0_0_Chrome，然后回到 Chrome，点开右上角<code>扩展程序</code>来固定插件。</p>
<p>注意：插件文件移动或丢失后，浏览器扩展失效，因为不是云端的，所以要保存在可靠路径。</p>
<h3 id="应用商店安装插件"><a href="#应用商店安装插件" class="headerlink" title="应用商店安装插件"></a>应用商店安装插件</h3><p>下载地址：<a href="https://chrome.google.com/webstore/detail/ispeak-bber%E6%97%B6%E5%85%89%E6%9C%BA/mmehomnjakoijcfmmofbmkaigcdkkbke/related">iSpeak-bber时光机</a></p>
<p>本地插件<code>from</code>默认为<code>🌈 Chrome</code></p>
<h2 id="Android-捷径发布说说"><a href="#Android-捷径发布说说" class="headerlink" title="Android 捷径发布说说"></a>Android 捷径发布说说</h2><p>从 Github 下载安装这款 “HTTP 快捷方式” apk，安装后继续下文操作。</p>
<p>下载地址：<a href="https://github.com/Waboodoo/HTTP-Shortcuts/releases">HTTP-Shortcuts</a></p>
<p>打开 HTTP 快捷方式 App，选择新建快捷方式，自定义名称、描述，在 “基本设置” 中，设置方法为 “POST” 或 “GET”，URL 为</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">https://你后台显示的.ap-shanghai.app.tcloudbase.com/bber?key=</span><br></pre></td></tr></table></figure>

<p>至于 key、from，我们设置为常量，text 则设置为变量 content，每次发布的时候填写说说内容。</p>
<p>点击 URL 右侧的 {}，选择添加变量。常量 key 为你云函数里的 key，如果没有特别设置就是 bber。from 我们设置一个好玩的如<code>📱 Android 11</code>。添加一个变量 content。（个人觉得from直接设置为<code>Android</code>就行，不然免得以后安卓升级版本，还要跟着修改。）</p>
<p>接着回到 URL 页面，补充完刚才添加的常量和变量，如以下格式：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">https://你后台显示的.ap-shanghai.app.tcloudbase.com/bber?key=&#123;key&#125;&amp;from=&#123;from&#125;&amp;text=&#123;content&#125;</span><br></pre></td></tr></table></figure>

<p>右上角，保存这个快捷方式，然后长按发送到桌面，搞定！</p>
<h2 id="修改ispeak-bber样式"><a href="#修改ispeak-bber样式" class="headerlink" title="修改ispeak-bber样式"></a>修改<code>ispeak-bber</code>样式</h2><h3 id="隐藏页面标题"><a href="#隐藏页面标题" class="headerlink" title="隐藏页面标题"></a>隐藏页面标题</h3><p>将以下代码放在文章正文最上方。</p>
<p><a href="https://github.com/CaiJimmy/hugo-theme-stack">hugo-stack</a>主题：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line"><span class="selector-class">.article-header</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p><a href="https://github.com/jerryc127/hexo-theme-butterfly">hexo-butterfly</a>主题：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line"><span class="selector-class">.page-title</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="修改顶部文字"><a href="#修改顶部文字" class="headerlink" title="修改顶部文字"></a>修改顶部文字</h3><p>自己胡乱改的，居然起了作用。不管了先用再说。</p>
<p>1.首先下载：<a href="https://cdn.jsdelivr.net/npm/ispeak-bber/ispeak-bber-md.min.js">ispeak-bber-md.min.js</a></p>
<p>2.用<code>Notepad++</code>打开，搜索<code>My BiBi</code>改成<code>我的说说</code>。</p>
<p>3.按F12，打开浏览器控制台，定位标题。可以发现<code>color: #49b1f5</code>前面就是标题字体大小，搜索<code>color: #49b1f5</code>，将前面的字体改成22px：<code>font-size: 22px</code></p>
<p>4.接着改图标大小，一样方法定位图标，可以发现<code>color: black</code>后面就是图标大小，搜索<code>color: black</code>，将后面图标大小改成22px：<code>font-size: 22px</code></p>
<h3 id="修复说说出现图片时，顶部空白过大问题"><a href="#修复说说出现图片时，顶部空白过大问题" class="headerlink" title="修复说说出现图片时，顶部空白过大问题"></a>修复说说出现图片时，顶部空白过大问题</h3><p>搜索<code>white-space</code>作如下修改</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">- &#123;\n  padding: 10px 0;\n  white-space: pre-wrap;\n&#125;</span></span><br><span class="line"><span class="addition">+ &#123;\n  padding: 0.8rem 0;\n&#125;</span></span><br></pre></td></tr></table></figure>

<p><del>注意：利用微信公众号发图片后追加文字说明，前面要加个换行符，要不然图片和文字处在同一行。</del></p>
<p>注意：用公众号发图片会一连发几张，不知道是什么原因，以后就用浏览器插件发图片，注意<strong>比例 16:9，长度568px</strong></p>
<h3 id="解决公众号连续发多张图片"><a href="#解决公众号连续发多张图片" class="headerlink" title="解决公众号连续发多张图片"></a>解决公众号连续发多张图片</h3><p>云函数代码问题，改成下面这样即可（<strong>还未测试</strong>）：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">104行</span><br><span class="line"><span class="built_in">let</span> res = await cloudRequest(cloudHttpUrl,cloudKey,createTime,content)</span><br><span class="line"></span><br><span class="line">124行</span><br><span class="line"><span class="built_in">let</span> res = await cloudRequest(cloudHttpUrl,cloudKey,createTime,content)</span><br><span class="line"></span><br><span class="line">160行</span><br><span class="line"><span class="keyword">function</span> cloudRequest(cloudHttpUrl,cloudKey,createTime,content)&#123;</span><br></pre></td></tr></table></figure>

<p>中，删掉 “createTime,”，接着</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">162行</span><br><span class="line">var param1 = &#123;<span class="string">&#x27;key&#x27;</span>: cloudKey,<span class="string">&#x27;time&#x27;</span>: createTime,<span class="string">&#x27;text&#x27;</span>: content,<span class="string">&#x27;from&#x27;</span>:<span class="string">&#x27;微信公众号&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>

<p>删掉 “’time’: createTime,” 就解决了。</p>
<h3 id="取消显示’一周前’-’一小时前’"><a href="#取消显示’一周前’-’一小时前’" class="headerlink" title="取消显示’一周前’,’一小时前’"></a>取消显示’一周前’,’一小时前’</h3><p>去掉“周前”，”月前“这些时间点：</p>
<ul>
<li><ol>
<li>找到<code>ispeak-bber-md.min.js</code> or <code>ispeak-bber.min.js</code></li>
</ol>
</li>
<li><p>2.复制下面这段代码，查找，然后删掉它们 (未测试)</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(l&gt;=<span class="number">1</span>&amp;&amp;l&lt;=<span class="number">3</span>)n=<span class="string">&quot; &quot;</span>+<span class="built_in">parseInt</span>(l)+<span class="string">&quot; 月前&quot;</span>;<span class="keyword">else</span> <span class="keyword">if</span>(f&gt;=<span class="number">1</span>&amp;&amp;f&lt;=<span class="number">3</span>)n=<span class="string">&quot; &quot;</span>+<span class="built_in">parseInt</span>(f)+<span class="string">&quot; 周前&quot;</span>;<span class="keyword">else</span> <span class="keyword">if</span>(c&gt;=<span class="number">1</span>&amp;&amp;c&lt;=<span class="number">6</span>)n=<span class="string">&quot; &quot;</span>+<span class="built_in">parseInt</span>(c)+<span class="string">&quot; 天前&quot;</span>;<span class="keyword">else</span> <span class="keyword">if</span>(u&gt;=<span class="number">1</span>&amp;&amp;u&lt;=<span class="number">23</span>)n=<span class="string">&quot; &quot;</span>+<span class="built_in">parseInt</span>(u)+<span class="string">&quot; 小时前&quot;</span>;<span class="keyword">else</span> <span class="keyword">if</span>(a&gt;=<span class="number">1</span>&amp;&amp;a&lt;=<span class="number">59</span>)n=<span class="string">&quot; &quot;</span>+<span class="built_in">parseInt</span>(a)+<span class="string">&quot; 分钟前&quot;</span>;<span class="keyword">else</span> <span class="keyword">if</span>(s&gt;=<span class="number">0</span>&amp;&amp;s&lt;=r)n=<span class="string">&quot;刚刚&quot;</span>;<span class="keyword">else</span></span><br></pre></td></tr></table></figure>

<h2 id="butterfly-主题添加首页轮播"><a href="#butterfly-主题添加首页轮播" class="headerlink" title="butterfly 主题添加首页轮播"></a>butterfly 主题添加首页轮播</h2><p>添加首页轮播借助了 <a href="https://butterfly.js.org/posts/ea33ab97/">butterfly 主题自定义组件</a>的功能实现，通过在自定义组件处加载 JavaScript 生成首页的轮播展示。</p>
<h3 id="创建-widget-yml"><a href="#创建-widget-yml" class="headerlink" title="创建 widget.yml"></a>创建 widget.yml</h3><p>在Hexo博客目录中的<code>source/_data</code>（如果没有 _data 文件夹，请自行创建），创建一个文件 widget.yml，代码如下：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">top:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">latestBB</span></span><br><span class="line">    <span class="attr">id_name:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">最新说说</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-bolt</span></span><br><span class="line">    <span class="attr">order:</span> <span class="number">2</span></span><br><span class="line">    <span class="attr">html:</span> <span class="string">|</span></span><br><span class="line"><span class="string">      &lt;div class=&quot;swiper-container swiper-container-aside&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;div class=&quot;swiper-wrapper swiper-weapper-aside&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;a class=&quot;bb-btn button--animated&quot; href=&quot;/say/&quot; title=&quot;查看全部&quot;&gt;&lt;i class=&quot;far fa-hand-point-right fa-fw&quot;&gt;&lt;/i&gt; 查看更多 &lt;/a&gt;</span></span><br><span class="line"><span class="string">      &lt;script&gt;</span></span><br><span class="line"><span class="string">        window.kkBBConfig = &#123;</span></span><br><span class="line"><span class="string">          limit: 10,</span></span><br><span class="line"><span class="string">          blog:&#x27;/say/&#x27;,</span></span><br><span class="line"><span class="string">          api_url:</span></span><br><span class="line"><span class="string">            &#x27;https://xxx/json/bber.json&#x27;//你的json url</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &lt;/script&gt;</span></span><br><span class="line"><span class="string">      &lt;script src=&quot;https://cdn.jsdelivr.net/npm/butterfly-bber-swiper/dist/index.min.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>

<p>2022.5.18 <code>jsdelivr</code>用不了，需要修改地址（本地相对路径）：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">top:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">latestBB</span></span><br><span class="line">    <span class="attr">id_name:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">最新说说</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-bolt</span></span><br><span class="line">    <span class="attr">order:</span> <span class="number">2</span></span><br><span class="line">    <span class="attr">html:</span> <span class="string">|</span></span><br><span class="line"><span class="string">      &lt;div class=&quot;swiper-container swiper-container-aside&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;div class=&quot;swiper-wrapper swiper-weapper-aside&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;a class=&quot;bb-btn button--animated&quot; href=&quot;/say/&quot; title=&quot;查看全部&quot;&gt;&lt;i class=&quot;far fa-hand-point-right fa-fw&quot;&gt;&lt;/i&gt; 查看更多 &lt;/a&gt;</span></span><br><span class="line"><span class="string">      &lt;script&gt;</span></span><br><span class="line"><span class="string">        window.kkBBConfig = &#123;</span></span><br><span class="line"><span class="string">          limit: 10,</span></span><br><span class="line"><span class="string">          blog:&#x27;/say/&#x27;,</span></span><br><span class="line"><span class="string">          api_url:</span></span><br><span class="line"><span class="string">            &#x27;https://xxx/json/bber.json&#x27;//你的json url</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &lt;/script&gt;</span></span><br><span class="line"><span class="string">      &lt;script src=&quot;/img/js/butterfly-bber-swiper.min.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="去掉侧边栏最新说说"><a href="#去掉侧边栏最新说说" class="headerlink" title="去掉侧边栏最新说说"></a>去掉侧边栏最新说说</h3><p>在 <code>blog/source/css/custom.css</code> 文件中，加入以下代码即可。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 去掉侧边栏最新吐槽 */</span></span><br><span class="line"><span class="selector-class">.latestBB</span> &#123;</span><br><span class="line"><span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="解决移动端二级菜单缩进问题"><a href="#解决移动端二级菜单缩进问题" class="headerlink" title="解决移动端二级菜单缩进问题"></a>解决移动端二级菜单缩进问题</h3><p>设置完首页轮播后，移动端二级菜单会出现缩进问题，浏览器F12发现问题：</p>
<p><img src="/../img/hexo%E9%85%8D%E7%BD%AE%E5%93%94%E5%93%94%E7%82%B9%E5%95%A5&&Speak/QQ%E6%88%AA%E5%9B%BE20220521125739.jpg"></p>
<p>解决方法：</p>
<p><code>butterfly-bber-swiper.min.js</code>(轮播js文件)，<del>搜索<code>bbTimeList</code>删除前面的<code>padding: 0;\n</code></del>；直接搜索<code>padding: 0;\n</code>将其删除，注意后面就是<code>bbTimeList</code>，搜索<code>bbTimeList</code>会出现多个结果，故搜索后者较好。</p>
<h2 id="部署Speak"><a href="#部署Speak" class="headerlink" title="部署Speak"></a>部署Speak</h2><p>2022.8.1 由于腾讯云开发要开始收费了，故将<code>哔哔点啥</code>改成<code>Speak</code>。官方文档：</p>
<ul>
<li><p><a href="https://www.antmoe.com/speak/">小康Speak</a></p>
</li>
<li><p><a href="https://kkapi-doc.vercel.app/">kkAPI-Doc</a></p>
<ul>
<li><p><a href="https://github.com/kkfive/kkapi-open">kkapi-open</a></p>
</li>
<li><p><a href="https://github.com/kkfive/kkadmin-open">kkadmin-open</a></p>
</li>
<li><p><a href="http://github.com/kkfive/iSpeak/">iSpeak</a></p>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>首先要参考上面官方文档搭建好API、后台管理等内容。然后再弄前端。Vercel搭建见官方文档，<strong>下面主要记录服务器部署。</strong></p>
</blockquote>
<h3 id="Docker-安装-MongoDB"><a href="#Docker-安装-MongoDB" class="headerlink" title="Docker 安装 MongoDB"></a>Docker 安装 MongoDB</h3><p>1.先安装docker，参考：<a href="/archives/9755dbc8/">Debian 10 安装 Docker &amp; Docker Compose</a></p>
<p>2.取最新版的 MongoDB 镜像</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker pull mongo:latest</span><br></pre></td></tr></table></figure>

<p>3.查看本地镜像，使用以下命令来查看是否已安装了 mongo：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure>

<p>4.运行容器</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d --name mongodb \</span><br><span class="line">	-p 27017:27017 \</span><br><span class="line">	-v /my/own/datadir:/data/db \</span><br><span class="line">	-e MONGO_INITDB_ROOT_USERNAME=mongoadmin \</span><br><span class="line">	-e MONGO_INITDB_ROOT_PASSWORD=secret \</span><br><span class="line">	mongo</span><br></pre></td></tr></table></figure>

<p>之后可以使用工具测试一下连接。如<code>navicat</code></p>
<p>5.使容器开机启动</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker update --restart=always mongodb</span><br></pre></td></tr></table></figure>

<h3 id="kkapi-部署"><a href="#kkapi-部署" class="headerlink" title="kkapi 部署"></a>kkapi 部署</h3><p>1.首先克隆项目源码 </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://ghproxy.com/https://github.com/kkfive/kkapi-open.git</span><br></pre></td></tr></table></figure>

<p>2.接下来j进入项目目录，安装项目需要安装的工具 <code>yarn</code> 和 <code>pm2</code>，分别是 :</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd kkapi-open</span><br><span class="line">apt install npm -y</span><br><span class="line">npm i yarn -g</span><br><span class="line">npm i pm2 -g</span><br></pre></td></tr></table></figure>

<p>3.<strong>升级node版本</strong>，仓库给的构建版本是16+的，node版本过低，下一步会出错，最后一步项目无法启动。(上面安装npm时默认会安装低版本node，所以要更新node版本)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node --version</span><br><span class="line">curl -fsSL https://deb.nodesource.com/setup_current.x | sudo -E bash -</span><br><span class="line">sudo apt install nodejs -y</span><br><span class="line">node --version</span><br></pre></td></tr></table></figure>

<p>上面操作会安装最新版的node，安装nodeV16：<code>curl -sL https://deb.nodesource.com/setup_16.x | sudo bash -</code></p>
<p>4.然后安装项目所需依赖 <code>yarn install</code></p>
<p>5.之后再执行 <code>yarn build</code> 编译项目。<del>这里我的小鸡顶不住编译所以自己在本地编译传上去了。</del></p>
<p>6.在项目文件夹创建环境变量文件，格式如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vi local.env</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">PORT=3000</span><br><span class="line">DATABASE_URL=mongodb://127.0.0.1:27017/kkpaiopen?authSource=admin</span><br><span class="line">DATABASE_USER=mongoadmin</span><br><span class="line">DATABASE_PASSWORD=secret</span><br><span class="line"><span class="comment"># 加密密钥 测试</span></span><br><span class="line">SECRETKEY=xxxxxxxxxxxxxxx</span><br></pre></td></tr></table></figure>

<p>7.使用 <code>pm2</code> 使用守护线程启动项目 <code>pm2 start pm2.json</code></p>
<p>我启动项目遇到了 <code>[PM2][WARN] Expect “restart_delay” to be a typeof [object Number], but now is [object String]</code> 错误，这个错误原因是作者的 pm2.json 中的 <code>restart_delay</code> 值是字符串类型 <code>60s</code> 改成数值 <code>60</code> 就可以了。</p>
<p>8.测试项目是否成功启动 可以使用 <code>lsof -i:端口</code> 查看端口是否被监听判断项目是否成功启动。没成功的原因大概率是因为数据库连接地址、数据库账号密码不正确。</p>
<p>9.创建初始化用户 <code>curl http://127.0.0.1:3000/api/user/init?userName=bore</code> 创建的默认用户名和密码是 <code>bore</code> 和 <code>123456</code>，这个用户名密码用来登陆可视化的管理后台，并且用户似乎<strong>只能拥有一个</strong>。</p>
<p>10.更新项目</p>
<p>进入项目并执行一下命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git pull</span><br><span class="line">yarn build</span><br><span class="line">pm2 restart pm2.json</span><br></pre></td></tr></table></figure>

<p><strong>11.备份</strong></p>
<p><code>/my/own/datadir</code> 这一段就是数据库的文件，把这个打包搞走就行，然后换到新地方以后，部署mongodb数据库还要对应上。</p>
<p><strong>首先完整搭建好（要初始化账号，能访问后台，这时后台会显示什么都没有），然后删除<code>my</code>文件夹，将备份的数据库文件夹上传到相应目录，重启容器即可登录后台，查看到原来的数据了。</strong></p>
<p>定时备份数据库，参考：<a href="https://bore.vip/archives/3a4bd17/">halo 定时备份的方法</a></p>
<h3 id="开机启动kkapi"><a href="#开机启动kkapi" class="headerlink" title="开机启动kkapi"></a>开机启动kkapi</h3><p>1.编辑脚本</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi s.sh</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">#!<span class="regexp">/bin/</span>bash</span><br><span class="line">cd /root/kkapi-open</span><br><span class="line">/usr/local/bin/pm2 start pm2.<span class="property">json</span></span><br></pre></td></tr></table></figure>

<p>2.赋予脚本执行权限</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x /root/s.sh</span><br></pre></td></tr></table></figure>

<p>运行的时候就输入下面的代码即可：<code>./s.sh</code></p>
<p>3.设定开机自动运行脚本</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">@reboot /root/s.sh</span><br></pre></td></tr></table></figure>

<h3 id="配置域名访问"><a href="#配置域名访问" class="headerlink" title="配置域名访问"></a>配置域名访问</h3><p>参考：</p>
<p><a href="/archives/d5e37958/#%E9%85%8D%E7%BD%AE%E5%9F%9F%E5%90%8D%E8%AE%BF%E9%97%AE">配置域名访问</a></p>
<p><a href="/archives/d5e37958/#%E7%94%B3%E8%AF%B7SSL%E8%AF%81%E4%B9%A6">申请 SSL 证书</a></p>
<p><a href="/archives/58fed3fc/#%E4%BD%BF%E7%94%A8-webroot-%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E8%AF%81%E4%B9%A6-1">SSL证书自动续期</a></p>
<p><strong>注意修改反代端口号，如果SSL443端口不能用，将<code>listen 443</code>改成<code>listen 1314</code></strong></p>
<h3 id="kkapiadmin（可视化管理后台）"><a href="#kkapiadmin（可视化管理后台）" class="headerlink" title="kkapiadmin（可视化管理后台）"></a>kkapiadmin（可视化管理后台）</h3><p>见官方文档：<a href="https://kkapi.js.org/guide/admin/setup.html">kkapi后台配置</a></p>
<p>之后登录就是用前面初始化的用户名密码，进入后台以后可以修改密码。登陆后台以后需要设置：</p>
<ul>
<li>ISpeak 标签。因为发布说说是需要选择标签的，标签中的背景颜色值是<strong>十六进制的颜色</strong>代码</li>
<li>添加用户token。<strong>需要注意！！！</strong>，添加的token的<strong>标题</strong>只能是 <code>speak</code> 不能是其他的，否则发布说说时会提示token不存在，发布时验证的就是字段为 <code>speak</code> 的token的值。</li>
</ul>
<h2 id="前端"><a href="#前端" class="headerlink" title="前端"></a>前端</h2><p>参考：<a href="https://kkapi-doc.vercel.app/posts/ispeak/front.html#%E5%8D%9A%E5%AE%A2%E5%89%8D%E7%AB%AF%E6%96%B9%E6%A1%88">博客前端方案</a>，新建一个<code>Markdown</code>文件：</p>
<h3 id="v4-4-0以前"><a href="#v4-4-0以前" class="headerlink" title="v4.4.0以前"></a>v4.4.0以前</h3><p><strong>官方：</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;tip&quot;</span> <span class="attr">style</span>=<span class="string">&quot;text-align:center;&quot;</span>&gt;</span>ipseak加载中<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;ispeak&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span></span></span><br><span class="line"><span class="tag">  <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">href</span>=<span class="string">&quot;https://cdn.staticfile.org/highlight.js/10.6.0/styles/atom-one-dark.min.css&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span></span></span><br><span class="line"><span class="tag">  <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">href</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/ispeak@4.2.0/style.css&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#article-container</span> <span class="selector-class">.D-avatar</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">10px</span> <span class="number">0</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.D-footer</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticfile.org/highlight.js/10.6.0/highlight.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticfile.org/marked/2.0.0/marked.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/discuss/dist/Discuss.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/ispeak@4.2.0/ispeak.umd.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> head = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;head&#x27;</span>)[<span class="number">0</span>]</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> meta = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;meta&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">  meta.<span class="property">name</span> = <span class="string">&#x27;referrer&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  meta.<span class="property">content</span> = <span class="string">&#x27;no-referrer&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  head.<span class="title function_">appendChild</span>(meta)</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">if</span> (ispeak) &#123;</span></span><br><span class="line"><span class="language-javascript">    ispeak</span></span><br><span class="line"><span class="language-javascript">      .<span class="title function_">init</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#ispeak&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">api</span>: <span class="string">&#x27;https://kkapi-dev.vercel.app/&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">author</span>: <span class="string">&#x27;61fe93508fd621d39a155725&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">pageSize</span>: <span class="number">10</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">loading_img</span>: <span class="string">&#x27;https://bu.dusays.com/2022/05/01/626e88f349943.gif&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">initCommentName</span>: <span class="string">&#x27;Discuss&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">initCommentOptions</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">serverURLs</span>: <span class="string">&#x27;https://kkdiscuss.vercel.app/&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">      .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ispeak 加载完成&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;tip&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">  &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;tip&#x27;</span>).<span class="property">innerHTML</span> = <span class="string">&#x27;ipseak依赖加载失败！&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>自用：</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;js-pjax&quot;</span> <span class="attr">id</span>=<span class="string">&quot;tip&quot;</span> <span class="attr">style</span>=<span class="string">&quot;text-align:center;&quot;</span>&gt;</span>ipseak加载中<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;js-pjax&quot;</span> <span class="attr">id</span>=<span class="string">&quot;ispeak&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span></span></span><br><span class="line"><span class="tag">  <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">href</span>=<span class="string">&quot;https://cdn.staticfile.org/highlight.js/10.6.0/styles/atom-one-dark.min.css&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span></span></span><br><span class="line"><span class="tag">  <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">href</span>=<span class="string">&quot;https://cdn1.tianli0.top/npm/ispeak@4.3.3/style.css&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#article-container</span> <span class="selector-class">.D-avatar</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">10px</span> <span class="number">0</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.D-footer</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticfile.org/highlight.js/10.6.0/highlight.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticfile.org/marked/2.0.0/marked.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn1.tianli0.top/npm/ispeak@4.3.3/ispeak.umd.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> head = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;head&#x27;</span>)[<span class="number">0</span>]</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> meta = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;meta&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">  meta.<span class="property">name</span> = <span class="string">&#x27;referrer&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  meta.<span class="property">content</span> = <span class="string">&#x27;no-referrer&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  head.<span class="title function_">appendChild</span>(meta)</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">if</span> (ispeak) &#123;</span></span><br><span class="line"><span class="language-javascript">    ispeak</span></span><br><span class="line"><span class="language-javascript">      .<span class="title function_">init</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#ispeak&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">api</span>: <span class="string">&#x27;https://kkapi-open-six.vercel.app/&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">author</span>: <span class="string">&#x27;这里填个人ID&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">pageSize</span>: <span class="number">10</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">loading_img</span>: <span class="string">&#x27;https://bu.dusays.com/2022/05/01/626e88f349943.gif&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">speakPage</span>: <span class="string">&#x27;/say&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">githubClientId</span>: <span class="string">&#x27;这里填githubClientId&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">hideComment</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">      .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ispeak 加载完成&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;tip&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">  &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;tip&#x27;</span>).<span class="property">innerHTML</span> = <span class="string">&#x27;ipseak依赖加载失败！&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>如若CDN用不了，上面的<code>CSS</code>、<code>JS</code>、<code>图像</code>等可以用本地路径，如：<code>/img/loading.gif</code>  <code>/img/js/speak/style.css</code>，不用使用：<del>..&#x2F;img&#x2F;loading.gif</del>，使用上面的相对路径即可。</li>
<li>hugo loveit主题要把 KaTeX 在这个页面单独关闭，因为和说说冲突了。<code>math: false</code></li>
</ul>
</blockquote>
<h3 id="v4-4-0以后"><a href="#v4-4-0以后" class="headerlink" title="v4.4.0以后"></a>v4.4.0以后</h3><p><strong>官方：</strong> （以<a href="https://artalk.js.org/">Artalk</a>评论为例）</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;tip&quot;</span> <span class="attr">style</span>=<span class="string">&quot;text-align:center;&quot;</span>&gt;</span>ipseak加载中<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;ispeak&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span></span></span><br><span class="line"><span class="tag">  <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">href</span>=<span class="string">&quot;https://cdn.staticfile.org/highlight.js/10.6.0/styles/atom-one-dark.min.css&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span></span></span><br><span class="line"><span class="tag">  <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">href</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/ispeak@4.4.0/style.css&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticfile.org/highlight.js/10.6.0/highlight.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticfile.org/marked/2.0.0/marked.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/ispeak@4.4.0/ispeak.umd.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- CSS --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://unpkg.com/artalk@2.3.4/dist/Artalk.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- JS --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/artalk@2.3.4/dist/Artalk.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> head = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;head&#x27;</span>)[<span class="number">0</span>]</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> meta = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;meta&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">  meta.<span class="property">name</span> = <span class="string">&#x27;referrer&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  meta.<span class="property">content</span> = <span class="string">&#x27;no-referrer&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  head.<span class="title function_">appendChild</span>(meta)</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">if</span> (ispeak) &#123;</span></span><br><span class="line"><span class="language-javascript">    ispeak</span></span><br><span class="line"><span class="language-javascript">      .<span class="title function_">init</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#ispeak&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">api</span>: <span class="string">&#x27;https://kkapi-dev.vercel.app/&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">author</span>: <span class="string">&#x27;61fe93508fd621d39a155725&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">pageSize</span>: <span class="number">10</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">loading_img</span>: <span class="string">&#x27;https://bu.dusays.com/2021/03/04/d2d5e983e2961.gif&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">comment</span>: <span class="keyword">function</span> (<span class="params">speak</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 4.4.0 之后在此回调函数中初始化评论</span></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">const</span> &#123; _id, title, content &#125; = speak</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">const</span> contentSub = content.<span class="title function_">substring</span>(<span class="number">0</span>, <span class="number">30</span>)</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">new</span> <span class="title class_">Artalk</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>: <span class="string">&#x27;.ispeak-comment&#x27;</span>, <span class="comment">// 默认情况下 ipseak 生成class为 ispeak-comment 的div</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageKey</span>: <span class="string">&#x27;/speak/info.html?q=&#x27;</span> + _id, <span class="comment">// 手动传入当前speak的唯一id</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageTitle</span>: title || contentSub, <span class="comment">// 手动传入当前speak的标题(由于content可能过长，因此截取前30个字符)</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">server</span>: <span class="string">&#x27;https://api.antmoe.com/artalk/&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">site</span>: <span class="string">&#x27;speak&#x27;</span> <span class="comment">// 你的站点名</span></span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">      .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ispeak 加载完成&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;tip&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">  &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;tip&#x27;</span>).<span class="property">innerHTML</span> = <span class="string">&#x27;ipseak依赖加载失败！&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a href="https://kkapi.js.org/posts/ispeak/comment.html#%E8%AF%B4%E6%98%8E">官方设置评论</a>：</p>
<p><code>info.md</code>页面内容：</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: Speak</span><br><span class="line">date: 2022-08-21 14:11:00</span><br><span class="line">update: 2022-08-21 14:11:00</span><br><span class="line">top<span class="emphasis">_img: https://tva1.sinaimg.cn/large/005B3XPgly1ghkxqgvmy0j30zk0irn2q.jpg</span></span><br><span class="line"><span class="emphasis">aside: false</span></span><br><span class="line"><span class="emphasis">comments: false</span></span><br><span class="line"><span class="emphasis">description: 欢迎来到小康的Speak页面，快来看看小康分享了什么speak！</span></span><br><span class="line"><span class="emphasis">---</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&lt;!-- CSS --&gt;</span></span><br><span class="line"><span class="emphasis"><span class="language-xml"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://unpkg.com/artalk@2.3.4/dist/Artalk.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis"><span class="language-xml"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.staticfile.org/highlight.js/10.6.0/styles/atom-one-dark.min.css&quot;</span> /&gt;</span></span></span></span><br><span class="line"><span class="emphasis"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&#x27;content&#x27;</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">  <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;https://bu.dusays.com/2022/05/01/626e88f349943.gif&#x27;</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">&#123;% btn &#x27;https://www.antmoe.com/speak/&#x27;,查看全部,far fa-hand-point-right,block center blue larger %&#125;</span></span><br><span class="line"><span class="emphasis"><span class="language-xml"><span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span></span></span><br><span class="line"><span class="emphasis"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&#x27;ispeak-comment&#x27;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">&lt;!-- JS --&gt;</span></span><br><span class="line"><span class="emphasis"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/artalk@2.3.4/dist/Artalk.js&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/marked@4.0.18/marked.min.js&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticfile.org/highlight.js/10.6.0/highlight.min.js&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">  const searchParams = new URLSearchParams(window.location.search);</span></span><br><span class="line"><span class="emphasis">  const speakId = searchParams.get(&#x27;q&#x27;);</span></span><br><span class="line"><span class="emphasis">  const path = window.location.pathname;</span></span><br><span class="line"><span class="emphasis">  const apiURL = &#x27;https://kkapi.vercel.app/api/ispeak&#x27;;</span></span><br><span class="line"><span class="emphasis">  const markedRender = (body, loading_</span>img=&#x27;https://bu.dusays.com/2022/05/01/626e88f349943.gif&#x27;) =&gt; &#123;</span><br><span class="line"><span class="code">    const renderer = &#123;</span></span><br><span class="line"><span class="code">      image(href, title, text) &#123;</span></span><br><span class="line"><span class="code">        return `&lt;a href=&quot;$&#123;href&#125;&quot; target=&quot;_blank&quot; data-fancybox=&quot;group&quot; class=&quot;fancybox&quot;&gt;</span></span><br><span class="line"><span class="code">            &lt;img speak-src=&quot;$&#123;href&#125;&quot; src=$&#123;loading_img&#125; alt=&#x27;$&#123;text&#125;&#x27;&gt;</span></span><br><span class="line"><span class="code">            &lt;/a&gt;`</span></span><br><span class="line"><span class="code">      &#125;</span></span><br><span class="line"><span class="code">    &#125;</span></span><br><span class="line"><span class="code">    marked.setOptions(&#123;</span></span><br><span class="line"><span class="code">      renderer: new marked.Renderer(),</span></span><br><span class="line"><span class="code">      highlight: function (code) &#123;</span></span><br><span class="line"><span class="code">        if (hljs) &#123;</span></span><br><span class="line"><span class="code">          return hljs.highlightAuto(code).value</span></span><br><span class="line"><span class="code">        &#125; else &#123;</span></span><br><span class="line"><span class="code">          return code</span></span><br><span class="line"><span class="code">        &#125;</span></span><br><span class="line"><span class="code">      &#125;,</span></span><br><span class="line"><span class="code">      pedantic: false,</span></span><br><span class="line"><span class="code">      gfm: true,</span></span><br><span class="line"><span class="code">      tables: true,</span></span><br><span class="line"><span class="code">      breaks: true,</span></span><br><span class="line"><span class="code">      sanitize: false,</span></span><br><span class="line"><span class="code">      smartLists: true,</span></span><br><span class="line"><span class="code">      smartypants: false,</span></span><br><span class="line"><span class="code">      xhtml: false</span></span><br><span class="line"><span class="code">    &#125;)</span></span><br><span class="line"><span class="code">    marked.use(&#123; renderer &#125;)</span></span><br><span class="line"><span class="code">    return marked.parse(body)</span></span><br><span class="line"><span class="code">  &#125;</span></span><br><span class="line"><span class="code">  fetch(`$&#123;apiURL&#125;/get/$&#123;speakId&#125;`)</span></span><br><span class="line"><span class="code">  .then(response =&gt; response.json())</span></span><br><span class="line"><span class="code">  .then(res =&gt; &#123;</span></span><br><span class="line"><span class="code">    const data = res.data;</span></span><br><span class="line"><span class="code">    if(data)&#123;</span></span><br><span class="line"><span class="code">      const &#123;title,content&#125; = data;</span></span><br><span class="line"><span class="code">      const contentSub = content.substring(0, 30);</span></span><br><span class="line"><span class="code">      document.querySelector(&#x27;.content&#x27;).innerHTML = markedRender(content);</span></span><br><span class="line"><span class="code">      if(title)&#123;</span></span><br><span class="line"><span class="code">        document.title = title;</span></span><br><span class="line"><span class="code">      &#125;</span></span><br><span class="line"><span class="code">      new Artalk(&#123;</span></span><br><span class="line"><span class="code">        el: &#x27;.ispeak-comment&#x27;,</span></span><br><span class="line"><span class="code">        pageKey: path + &#x27;?q=&#x27; + speakId,</span></span><br><span class="line"><span class="code">        pageTitle: title || contentSub,</span></span><br><span class="line"><span class="code">        server: &#x27;https://api.antmoe.com/artalk/&#x27;,</span></span><br><span class="line"><span class="code">        site: &#x27;speak&#x27;, // 你的站点名</span></span><br><span class="line"><span class="code">        useBackendConf: true,</span></span><br><span class="line"><span class="code">      &#125;)</span></span><br><span class="line"><span class="code">    &#125;</span></span><br><span class="line"><span class="code">  &#125;);</span></span><br><span class="line"><span class="code">  </span></span><br><span class="line"><span class="code">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>自用：</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;js-pjax&quot;</span> <span class="attr">id</span>=<span class="string">&quot;tip&quot;</span> <span class="attr">style</span>=<span class="string">&quot;text-align:center;&quot;</span>&gt;</span>ipseak加载中<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;js-pjax&quot;</span> <span class="attr">id</span>=<span class="string">&quot;ispeak&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span></span></span><br><span class="line"><span class="tag">  <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">href</span>=<span class="string">&quot;https://cdn.staticfile.org/highlight.js/10.6.0/styles/atom-one-dark.min.css&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span></span></span><br><span class="line"><span class="tag">  <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">href</span>=<span class="string">&quot;https://cdn1.tianli0.top/npm/ispeak@4.4.0/style.css&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#article-container</span> <span class="selector-class">.D-avatar</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">10px</span> <span class="number">0</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.D-footer</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticfile.org/highlight.js/10.6.0/highlight.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticfile.org/marked/2.0.0/marked.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn1.tianli0.top/npm/ispeak@4.4.0/ispeak.umd.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> head = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;head&#x27;</span>)[<span class="number">0</span>]</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> meta = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;meta&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">  meta.<span class="property">name</span> = <span class="string">&#x27;referrer&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  meta.<span class="property">content</span> = <span class="string">&#x27;no-referrer&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  head.<span class="title function_">appendChild</span>(meta)</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">if</span> (ispeak) &#123;</span></span><br><span class="line"><span class="language-javascript">    ispeak</span></span><br><span class="line"><span class="language-javascript">      .<span class="title function_">init</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#ispeak&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">api</span>: <span class="string">&#x27;https://kkapi-open-six.vercel.app/&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">author</span>: <span class="string">&#x27;你的个人ID&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">pageSize</span>: <span class="number">10</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">loading_img</span>: <span class="string">&#x27;https://bu.dusays.com/2022/05/01/626e88f349943.gif&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">speakPage</span>: <span class="string">&#x27;/say&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">githubClientId</span>: <span class="string">&#x27;你的githubClientId&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">hideComment</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">      .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ispeak 加载完成&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;tip&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">  &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;tip&#x27;</span>).<span class="property">innerHTML</span> = <span class="string">&#x27;ipseak依赖加载失败！&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：</p>
<ol>
<li>从v4.4.0的上一个版本v4.3.3就可以添加<code>hideComment: true,</code>隐藏评论</li>
<li><del>Artalk还未搭建好，故没有加入相关字段。</del>评论搞不定，算了。感觉说说没必要弄评论。只能用V4.3.3了，或者新版本关闭评论。</li>
</ol>
</blockquote>
<h2 id="首页轮播"><a href="#首页轮播" class="headerlink" title="首页轮播"></a>首页轮播</h2><p>参考上面，在Hexo博客目录中的<code>source/_data</code>（如果没有 _data 文件夹，请自行创建），创建一个文件 widget.yml，代码如下：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">top:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">latestBB</span></span><br><span class="line">    <span class="attr">id_name:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">Ispeak</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-bolt</span></span><br><span class="line">    <span class="attr">order:</span> <span class="number">2</span></span><br><span class="line">    <span class="attr">html:</span> <span class="string">|</span></span><br><span class="line"><span class="string">      &lt;div class=&quot;swiper-container swiper-container-aside&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;div class=&quot;swiper-wrapper swiper-weapper-aside&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;a class=&quot;bb-btn button--animated&quot; href=&quot;/say/&quot; title=&quot;查看全部&quot;&gt;&lt;i class=&quot;far fa-hand-point-right fa-fw&quot;&gt;&lt;/i&gt; 查看更多 &lt;/a&gt;</span></span><br><span class="line"><span class="string">      &lt;script&gt;</span></span><br><span class="line"><span class="string">        window.kkBBConfig = &#123;</span></span><br><span class="line"><span class="string">          limit: 10,</span></span><br><span class="line"><span class="string">          blog:&#x27;/say/&#x27;,</span></span><br><span class="line"><span class="string">          api_url: &#x27;你的api地址（末尾不要/）&#x27;,</span></span><br><span class="line"><span class="string">          author: &#x27;你的个人ID&#x27;            </span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &lt;/script&gt;</span></span><br><span class="line"><span class="string">      &lt;script src=&quot;https://cdn1.tianli0.top/npm/iwyang@1.0.8/speak/butterfly-speak-swiper@1.1.0.min.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>如若轮播j<code>js</code>CDN用不了，上面轮播<code>js</code>可改成本地：<code>/img/js/speak/butterfly-speak-swiper@1.1.0.min.js</code></p>
</blockquote>
<p>上面是自己瞎改的，不过能用。最后可以看上面<code>解决移动端二级菜单缩进问题</code>，解决缩进问题。<strong>下面是官方解答：<a href="https://github.com/kkfive/kkapi-open/issues/2">怎样使ispeak实现首页轮播</a></strong></p>
<blockquote>
<p>我个人的方法是通过挂载在侧边栏，然后侧边栏引用js动态插入顶部轮播位置。</p>
<p>参考代码：</p>
</blockquote>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">bottom:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">latestBB</span></span><br><span class="line">    <span class="attr">id_name:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">Ispeak</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-bolt</span></span><br><span class="line">    <span class="attr">order:</span> <span class="number">2</span></span><br><span class="line">    <span class="attr">html:</span> <span class="string">|</span></span><br><span class="line"><span class="string">      &lt;div class=&quot;swiper-container swiper-container-aside&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;div class=&quot;swiper-wrapper swiper-weapper-aside&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;a class=&quot;bb-btn button--animated&quot; href=&quot;/speak/&quot; title=&quot;查看全部&quot;&gt;&lt;i class=&quot;far fa-hand-point-right fa-fw&quot;&gt;&lt;/i&gt; 查看更多 &lt;/a&gt;</span></span><br><span class="line"><span class="string">      &lt;script&gt;</span></span><br><span class="line"><span class="string">        window.kkBBConfig = &#123;</span></span><br><span class="line"><span class="string">          limit: 9,</span></span><br><span class="line"><span class="string">          blog:&#x27;/speak&#x27;,</span></span><br><span class="line"><span class="string">          api_url: &#x27;api地址&#x27;,</span></span><br><span class="line"><span class="string">          author: &#x27;你的用户token&#x27;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &lt;/script&gt;</span></span><br><span class="line"><span class="string">      &lt;script src=&quot;https://cdn1.tianli0.top/npm/butterfly-speak-swiper@1.1.0/dist/index.min.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="去掉侧边栏最新说说-1"><a href="#去掉侧边栏最新说说-1" class="headerlink" title="去掉侧边栏最新说说"></a>去掉侧边栏最新说说</h3><p>在 <code>blog/source/css/custom.css</code> 文件中，加入以下代码即可。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 去掉侧边栏最新吐槽 */</span></span><br><span class="line"><span class="selector-class">.latestBB</span> &#123;</span><br><span class="line"><span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="发送speak方式"><a href="#发送speak方式" class="headerlink" title="发送speak方式"></a>发送speak方式</h2><p>参考：<a href="https://kkapi-doc.vercel.app/posts/ispeak/send-mode.html">发送方式</a></p>
<h3 id="安卓手机上快捷方式发送"><a href="#安卓手机上快捷方式发送" class="headerlink" title="安卓手机上快捷方式发送"></a>安卓手机上快捷方式发送</h3><blockquote>
<p>此部分转自：<a href="https://blog.leonus.cn/2022/talkInAndroid.html">https://blog.leonus.cn/2022/talkInAndroid.html</a></p>
</blockquote>
<h4 id="获取api的url"><a href="#获取api的url" class="headerlink" title="获取api的url"></a>获取api的url</h4><p>这个很好弄，只需要在你部署的API地址后面加上<code>/api/ispeak/addByToken</code>即可<br>如：<code>https://xxx.vercel.app/api/ispeak/addByToken</code>（不是后台的地址，而是api的地址，也就是你部署的时候第一个部署的那个）</p>
<h4 id="获取标签id"><a href="#获取标签id" class="headerlink" title="获取标签id"></a>获取标签id</h4><blockquote>
<p>用谷歌浏览器简单些，如果开发者工具是英语，可点击右上角小齿轮切换成中文。</p>
</blockquote>
<p>1.先登录到<code>Ispeak管理后台</code>，并切换到<code>Ispeak标签管理</code>。</p>
<p>2.然后按F12打开<code>开发者工具</code>，依次点击<code>Network(网络)</code>—<code>Fetch/XHR</code>—刷新网页—找到<code>getByPage...</code>(总共就两个，鼠标<strong>选择下面一个</strong>。)— 选中<code>响应</code>然后点击左下角的一个<code>&#123;&#125;</code>进行格式化（美观输出），我们分别复制id(name上面的id，不是user厘米俺的id，别弄混了)发送到手机即可(<strong>记清楚对应的标签</strong>，别到时候弄混了)<br>详细请看下图：</p>
<p><img src="/../img/hexo%E9%85%8D%E7%BD%AE%E5%93%94%E5%93%94%E7%82%B9%E5%95%A5&&Speak/kzt.png"></p>
<h4 id="获取token网页端发送"><a href="#获取token网页端发送" class="headerlink" title="获取token网页端发送"></a>获取token网页端发送</h4><p>在后台的设置里，找到 设置 &gt; 个人设置 &gt; Tokens &gt; 添加token<br>标题填写<code>speak</code>，值随便填。将填写的值发送到手机。</p>
<h4 id="下载软件"><a href="#下载软件" class="headerlink" title="下载软件"></a>下载软件</h4><p>下载<code>HTTP Shortcuts</code>，可以直接使用谷歌搜索下载(推荐)<br>也可以通过Github下载：<a href="https://github.com/Waboodoo/HTTP-Shortcuts/releases">https://github.com/Waboodoo/HTTP-Shortcuts/releases</a><br>不确定手机什么内核的可以下载<code>app-universal-release.apk</code></p>
<h4 id="添加变量"><a href="#添加变量" class="headerlink" title="添加变量"></a><strong>添加变量</strong></h4><p>1.点击右上角三个点 &gt; 变量，点击加号，选择<code>输入文本</code>，名称填<code>content</code>，标题可以填：说说内容，下面的对话框可填可不填，这都不是必须的。</p>
<p>输入选项选中<code>多行</code>,高级设置选中<code>JSON编码</code>，然后点右上角对号进行保存。</p>
<p><img src="/../img/hexo%E9%85%8D%E7%BD%AE%E5%93%94%E5%93%94%E7%82%B9%E5%95%A5&&Speak/content.jpg"></p>
<p>2.再点击加号，选择<code>选项</code>，名称填<code>tag</code>，对话框标题可填：标签，然后添加选项。标签填写你的标签的名字，值填写你的标签对应的ID，然后点确定。<br>如果有多个标签可以继续添加，高级设置选中<code>JSON编码</code>，都添加完之后点右上角对号进行保存。</p>
<p><img src="/../img/hexo%E9%85%8D%E7%BD%AE%E5%93%94%E5%93%94%E7%82%B9%E5%95%A5&&Speak/tags.jpg"></p>
<p>3.再点击加号，选择<code>选项</code>，名称填<code>type</code>，对话框标题可填：<code>可视范围</code>，然后添加以下3个选项。标签填写你的标签的名字，值填写<code>0</code>、<code>1</code>、<code>2</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1.标签：公开         值：0</span><br><span class="line">2.标签：登录可见      值：1</span><br><span class="line">3.标签：仅自己        值：2</span><br></pre></td></tr></table></figure>

<p>填完后记得高级设置选中<code>JSON编码</code>，都添加完之后点右上角对号进行保存。</p>
<p><img src="/../img/hexo%E9%85%8D%E7%BD%AE%E5%93%94%E5%93%94%E7%82%B9%E5%95%A5&&Speak/type.jpg"></p>
<h4 id="添加快捷方式"><a href="#添加快捷方式" class="headerlink" title="添加快捷方式"></a>添加快捷方式</h4><p>返回主页面，点击加号，选择最上面的<code>新建快捷方式</code>，名称随便，描述随便。</p>
<p>1.点击<code>基本设置</code>，方法选择<code>POST</code>，URL填写上面获取的<code>API的URL</code>，然后返回</p>
<p><img src="/../img/hexo%E9%85%8D%E7%BD%AE%E5%93%94%E5%93%94%E7%82%B9%E5%95%A5&&Speak/kj.jpg"></p>
<p>2.点击<code>请求头</code>，点击加号，头部填写<code>Content-Type</code>，值填写<code>application/json</code>，确定然后返回</p>
<p>3.再点击<code>响应体/响应参数</code>，选择<code>自定义类型</code>，Content-Type填写<code>application/json</code>，请求体填写：(最好不要直接点复制按钮复制代码，直接拖动选择所有行代码，这样张贴就会保留空格)</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;token&quot;</span><span class="punctuation">:</span> <span class="string">&quot;你的token值&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;tag&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;tag&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;content&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;type&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;showComment&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<div class="note warning flat"><p>注意：上面的<code>{tag}</code>和<code>{content}</code>以及<code>{type}</code>需要先删除，然后点击旁边的<code>{}</code>插入变量（插入的变量颜色是蓝色）。不能直接填写！！！<br>tag和content还有type顺序决定你发布时弹窗的先后，tag在上就是先选择标签再输入内容，content在上就是先输入内容再选择标签。</p>
</div>

<p><img src="/../img/hexo%E9%85%8D%E7%BD%AE%E5%93%94%E5%93%94%E7%82%B9%E5%95%A5&&Speak/url.jpg"></p>
<p>全部填写完之后保存即可，点击快捷方式就可以实现发送说说了。<br>长按快捷方式可以将此快捷方式添加到桌面，想发说说时直接点击即可，方便至极。</p>
<h3 id="网页端发送"><a href="#网页端发送" class="headerlink" title="网页端发送"></a>网页端发送</h3><p>进入<a href="https://ispeak-biubiu.vercel.app/">ispeak-biubiu</a>页面，首先配置基础配置。</p>
<blockquote>
<ul>
<li>API地址：URL后面要加<code>/api</code></li>
<li>Token：token的名称必须为<code>speak</code></li>
</ul>
</blockquote>
<p><img src="/../img/hexo%E9%85%8D%E7%BD%AE%E5%93%94%E5%93%94%E7%82%B9%E5%95%A5&&Speak/speak.jpg"></p>
<h4 id="自己部署ispeak-biubiu"><a href="#自己部署ispeak-biubiu" class="headerlink" title="自己部署ispeak-biubiu"></a>自己部署<code>ispeak-biubiu</code></h4><p>仓库地址：<a href="https://github.com/kkfive/speak-biubiu">speak-biubiu</a>，（直接部署到Vercel不会，所以采用了一种笨方法）</p>
<p>1.首先fork一份备份，然后下载一份源码到本地，进入项目目录，执行以下命令（过程会很慢）：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install</span><br><span class="line">npm run build</span><br><span class="line">npm run preview</span><br></pre></td></tr></table></figure>
<p>2.然后将<code>dist</code> 这个文件夹里面的网页上传到GitHub，最后再部署到Vercel。</p>
<blockquote>
<p>ispeak-biubiu为Vite项目，更多使用说明查看：<a href="https://cn.vitejs.dev/">https://cn.vitejs.dev/</a></p>
<p><strong>默认情况下，执行<code>npm run build</code>构建会输出到 <code>dist</code> 文件夹中。你可以部署这个 <code>dist</code> 文件夹到任何你喜欢的平台。</strong></p>
</blockquote>
<blockquote>
<p>PS：可以直接fork此仓库：<a href="https://github.com/iwyang/say">iwyang&#x2F;say</a>，然后部署到<code>Vercel</code></p>
</blockquote>
<h3 id="后台发送"><a href="#后台发送" class="headerlink" title="后台发送"></a>后台发送</h3><p>进入后台新增即可。<strong>更多发送方式查看：<a href="https://kkapi-doc.vercel.app/posts/ispeak/send-mode.html">发送方式</a></strong></p>
<h2 id="speak-amp-amp-twikoo-amp-amp-Verce域名绑定"><a href="#speak-amp-amp-twikoo-amp-amp-Verce域名绑定" class="headerlink" title="speak&amp;&amp;twikoo&amp;&amp;Verce域名绑定"></a>speak&amp;&amp;twikoo&amp;&amp;Verce域名绑定</h2><p><code>Vercel崩了，要绑定个二级域名才能用</code></p>
<ol>
<li><p>speak首页轮播api地址：<code>\source\_data\widget.yml</code>，改为可以访问的api url</p>
</li>
<li><p>speak页面api地址：<code>\source\say\index.md</code>，改为可以访问的api url</p>
</li>
<li><p>安卓快捷方式speak api地址，改为可以访问的api url</p>
</li>
<li><p>speak后台管理github秘钥：VITE_GLOB_API_URL改为可以访问的api url</p>
</li>
<li><p>speak后台、speak url发布 访问url，改为可以访问的url（还未更改）</p>
</li>
<li><p>twikoo envId地址：<code>_config.butterfly.yml</code>，改为可以访问的url</p>
</li>
<li><p>友链朋友圈api地址：<code>\source\fcircle\index.md</code>，改为可以访问的api url</p>
</li>
</ol>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://immmmm.com/bb-by-wechat-pro/">「哔哔点啥」微信公众号 2.0</a></p>
<p><a href="https://www.fanziqi.site/posts/af935eab.html">手把手教你配置哔哔点啥</a></p>
<p><a href="https://guole.fun/posts/bber-caikeng/">Android “捷径”・木木 bber 踩坑记录 + 电脑 or 手机 4 种方式直发说说</a></p>
<p><a href="https://www.antmoe.com/posts/7ec820ee/">给 bber 换个皮肤</a></p>
<p><a href="https://guole.fun/posts/butterfly-custom/#bber%E8%AF%B4%E8%AF%B4%E9%A6%96%E9%A1%B5%E8%BD%AE%E6%92%AD">bber说说首页轮播</a></p>
<p><a href="https://gitlab.com/DreamyTZK/ispeak-bber/-/issues/2">bber的style导致’child menu items’缩进问题</a></p>
<p><a href="https://blog.leonus.cn/2022/bb.html">Hexo博客哔哔更换记录</a></p>
<p><a href="https://blog.ccknbc.cc/essay">短文 | CC的部落格</a></p>
<p><a href="https://discuss.js.org/guide/Get-MongoDB-DataBase.html">申请免费的 MongoDB 数据库 | Discuss 开源免费评论系统</a></p>
<p><a href="https://blog.leonus.cn/2022/talkInAndroid.html">在安卓手机上快捷发送说说(哔哔)</a></p>
<p><a href="https://braindance.top/posts/kkapi+ispeak%E8%AF%B4%E8%AF%B4%E9%A1%B5%E9%9D%A2%E9%83%A8%E7%BD%B2/">KKapi+ISpeak说说页面部署</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>hugo</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo部署到github&amp;coding&amp;gitee</title>
    <url>/archives/8b53a475/</url>
    <content><![CDATA[<h2 id="本地操作"><a href="#本地操作" class="headerlink" title="本地操作"></a>本地操作</h2><h3 id="安装-Git-和-Node-js"><a href="#安装-Git-和-Node-js" class="headerlink" title="安装 Git 和 Node.js"></a>安装 Git 和 Node.js</h3><p>本地需要安装 <a href="https://git-scm.com/">Git</a> （ Latest source Release  2.31.1）和 <a href="https://nodejs.org/en/">Node.js</a>（14.16.0 LTS），安装过程略。</p>
<p>安装完git后还要配置环境变量：<br>右键我的电脑 –&gt; 属性，然后点击高级系统设置 –&gt; 环境变量 –&gt; 选择用户变量或系统变量中的Path,点击编辑；找到Git安装目录,添加以下地址:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">D:\Program Files\Git\bin</span><br><span class="line">D:\Program Files\Git\mingw64\libexec\git-core</span><br><span class="line">D:\Program Files\Git\mingw64\bin</span><br></pre></td></tr></table></figure>

<h3 id="配置SSH-公钥"><a href="#配置SSH-公钥" class="headerlink" title="配置SSH 公钥"></a>配置SSH 公钥</h3><p>Windows 上安装 <a href="https://git-for-windows.github.io/">Git for Windows</a> 之后在开始菜单里打开 Git Bash 输入：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;你的用户名&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;你的电子邮箱&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line"><span class="built_in">mkdir</span> .ssh</span><br><span class="line"><span class="built_in">cd</span> .ssh</span><br><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>

<p>在系统当前用户文件夹下生成了私钥 <code>id_rsa</code> 和公钥 <code>id_rsa.pub</code>。</p>
<h3 id="初始化-Hexo"><a href="#初始化-Hexo" class="headerlink" title="初始化 Hexo"></a>初始化 Hexo</h3><p>在电脑任意目录新建一个文件夹 <code>hexo</code>，进入文件夹，在空白处点击右键选择 Git Bash，输入：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br><span class="line">hexo init blog</span><br><span class="line"><span class="built_in">cd</span> blog</span><br><span class="line">npm install</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure>

<p>这样便在本地初始化了 Hexo 文件夹，然后输入：<br><code>hexo new post &quot;第一篇文章&quot;</code><br>即可新建一篇文章，用文本编辑器打开 <code>hexo/source/_post/第一篇文章.md</code> 可以快速开始写作。其余使用方法和配置按照 Hexo 官网操作即可。推荐编辑器**<a href="https://github.com/zhuzhuyule/HexoEditor">hexo-editor</a>**</p>
<p>2020&#x2F;4&#x2F;27更新: hexo-editor速度太慢，改用<a href="https://www.typora.io/">Typora</a></p>
<h3 id="修改-deploy-参数"><a href="#修改-deploy-参数" class="headerlink" title="修改 deploy 参数"></a>修改 deploy 参数</h3><p>打开位于 <code>hexo</code> 文件夹下的 <code>_config.yml</code>，修改 deploy 参数：</p>
<h4 id="单线部署"><a href="#单线部署" class="headerlink" title="单线部署"></a>单线部署</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line"> <span class="built_in">type</span>: git</span><br><span class="line"> repo: git@blog.yizhilee.com:hexo.git</span><br><span class="line"> branch: master</span><br></pre></td></tr></table></figure>

<h4 id="多线部署"><a href="#多线部署" class="headerlink" title="多线部署"></a>多线部署</h4><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span></span><br><span class="line">    <span class="attr">github:</span> <span class="string">git@github.com:iwyang/iwyang.github.io.git</span></span><br><span class="line">    <span class="attr">coding:</span> <span class="string">git@e.coding.net:iwyang/iwyang.coding.me.git</span></span><br><span class="line">    <span class="attr">gitee:</span> <span class="string">git@gitee.com:iwyang/iwyang.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>

<h2 id="部署到-GitHub"><a href="#部署到-GitHub" class="headerlink" title="部署到 GitHub"></a>部署到 GitHub</h2><p>比部署到服务器要简单，这里着重讲下<strong>绑定域名</strong>。</p>
<h3 id="添加解析记录"><a href="#添加解析记录" class="headerlink" title="添加解析记录"></a>添加解析记录</h3><p>添加cname记录指向Github Pages </p>
<table>
<thead>
<tr>
<th>www</th>
<th>CNAME</th>
<th>境外</th>
<th>iwyang.github.io</th>
</tr>
</thead>
<tbody><tr>
<td>@</td>
<td>CNAME</td>
<td>境外</td>
<td>iwyang.github.io</td>
</tr>
</tbody></table>
<p>这里让境外线路走github</p>
<span id="more"></span>

<h3 id="Github-Pages-对自定义域上-Https"><a href="#Github-Pages-对自定义域上-Https" class="headerlink" title="Github Pages 对自定义域上 Https"></a>Github Pages 对自定义域上 Https</h3><p>在GitHub pages绑定域名，<strong>这里暂时不要勾选SSL</strong>。</p>
<h3 id="解决CNAME反复被删问题"><a href="#解决CNAME反复被删问题" class="headerlink" title="解决CNAME反复被删问题"></a>解决CNAME反复被删问题</h3><blockquote>
<p>一般我们会将Hexo博客搭建到Github上，如果在Github上为其配置一个自定义的域名时，会自动在项目仓库根目录下新添加一个<code>CNAME</code>文件。但是这里有个问题，如果将Hexo博客重新部署一遍后，Github仓库里的这个<code>CNAME</code>文件就会消失掉，又需要重新配置一遍。</p>
</blockquote>
<p>**其实这里有个技巧，我们可以将需要上传部署到Github的文件都放在<code>source</code>文件夹里，例如<code>CNAME</code>文件、<code>favicon.ico</code>、或者其他的图片等等，这样在执行<code>hexo d</code>这个命令之后，这些文件就不会被删除了。 **</p>
<p>然后在<strong>站点配置文件</strong><code>_config.yml</code>中添加<code>skip_render</code>配置：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">skip_render:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">CNAME</span></span><br></pre></td></tr></table></figure>

<h2 id="部署到-coding"><a href="#部署到-coding" class="headerlink" title="部署到 coding"></a>部署到 coding</h2><p>操作和部署到github大同小异，注意以下几点：</p>
<ul>
<li>项目地址按iwyang.coding.me来写，建议勾选“启用readme.md初始化项目”</li>
<li>配置SSH公钥时要勾选启用推送权限。</li>
<li>开启Coding Pages 服务，要先在<code>项目设置—功能开关</code>里开启持续集成和持续部署。然后进行实名认证：右上角—团队管理—团队设置—高级设置。</li>
<li>删除项目，点左下角—项目设置—更多。</li>
<li>添加自定义域名，添加cname记录，指向给你的网址。线路选默认。这样就保证国内线路走coding。</li>
<li>注意：一定要选首选的域名，并且非首选域名要勾选跳转至首选域名，不然有些第三方服务数据会统计不到一起。</li>
<li>开启 HTTPS，要先去域名 DNS 把 GitHub 的解析暂停掉，然后再重新申请 SSL 证书，然后开启强制 HTTPS 访问。（不然会申请失败）</li>
<li>如果后面要用cdn全站加速，这里先不要开启ssl。</li>
</ul>
<h3 id="解决404错误"><a href="#解决404错误" class="headerlink" title="解决404错误"></a>解决404错误</h3><p>可是当你push完hexo g生成的静态页面源码到你的repo中后点Coding给你分配的访问地址后却返回的是404页面，其实解决这个问题也很简单，就是点一下上图中的立即部署就行了。</p>
<h2 id="部署到-gitee"><a href="#部署到-gitee" class="headerlink" title="部署到 gitee"></a>部署到 gitee</h2><p>和部署到coding大同小异，但需要注意以下几点：</p>
<p>免费版gitee page不支持绑定域名、不支持自动部署，并且上传了代码服务里才有gitee pages选项。还有关于首页地址见官方文档：</p>
<blockquote>
<p>如何创建一个首页访问地址不带二级目录的 pages，如ipvb.gitee.io？</p>
</blockquote>
<p>答：如果你想你的 pages 首页访问地址不带二级目录，如ipvb.gitee.io，你需要建立一个与自己个性地址同名的仓库，如 <a href="https://gitee.com/ipvb">https://gitee.com/ipvb</a> 这个用户，想要创建一个自己的站点，但不想以子目录的方式访问，想以ipvb.gitee.io直接访问，那么他就可以创建一个名字为ipvb的仓库 <a href="https://gitee.com/ipvb/ipvb">https://gitee.com/ipvb/ipvb</a> 部署完成后，就可以以 <a href="https://ipvb.gitee.io/">https://ipvb.gitee.io</a> 进行访问了。</p>
<h2 id="自动部署脚本"><a href="#自动部署脚本" class="headerlink" title="自动部署脚本"></a>自动部署脚本</h2><p>在根目录新建<code>deploy.sh</code>，输入以下内容：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[0;32mDeploying updates to gitee...\033[0m&quot;</span></span><br><span class="line">hexo clean</span><br><span class="line">hexo g -d</span><br></pre></td></tr></table></figure>

<p>有时候可能需要多次运行脚本才能提交成功，这时不妨手动输入命令。</p>
<h2 id="全站-CDN-加速"><a href="#全站-CDN-加速" class="headerlink" title="全站 CDN 加速"></a>全站 CDN 加速</h2><p>使用Cloudflare，encryption mode选 Full，在Edge Certificates选项卡开启Always Use Https</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><p><a href="https://blog.juanertu.com/archives/fde43a3f.html">1.Hexo 框架 (八)：双线部署及全站 CDN 加速</a></p>
</li>
<li><p><a href="https://blog.csdn.net/qq_41793001/article/details/102995817">2.hexo双线部署coding+github pages，实现https并开启又拍云CDN全站加速</a></p>
</li>
<li><p><a href="https://aoguai.top/archives/ce8b9c09.html">3.2019hexo博客部署到coding该绕的坑-奥怪的小栈</a></p>
</li>
<li><p><a href="https://www.yanyunliang.com/2018/11/21/hexo-problem-with-github-deleting-the-original-custom-domain-name-when-revising-update-site.html">4.Hexo - 解决更新网站时 Github 删除原先的自定义域名的问题</a></p>
</li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hugo利用Github Actions自动构建博客</title>
    <url>/archives/23eeae2f/</url>
    <content><![CDATA[<h2 id="初始化-GitHub-仓库"><a href="#初始化-GitHub-仓库" class="headerlink" title="初始化 GitHub 仓库"></a>初始化 GitHub 仓库</h2><p>Github上新建一个名为<code>iwyang.github.io</code>的仓库。</p>
<h2 id="配置ACTIONS-DEPLOY-KEY"><a href="#配置ACTIONS-DEPLOY-KEY" class="headerlink" title="配置ACTIONS_DEPLOY_KEY"></a>配置<code>ACTIONS_DEPLOY_KEY</code></h2><h3 id="生成公钥"><a href="#生成公钥" class="headerlink" title="生成公钥"></a>生成公钥</h3><p>Windows 上安装 <a href="https://git-for-windows.github.io/">Git for Windows</a> 之后在开始菜单里打开 Git Bash 输入：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;你的用户名&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;你的电子邮箱&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line"><span class="built_in">mkdir</span> .ssh</span><br><span class="line"><span class="built_in">cd</span> .ssh</span><br><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>

<p>在系统当前用户文件夹下生成了私钥 <code>id_rsa</code> 和公钥 <code>id_rsa.pub</code>。</p>
<h3 id="上传id-rsa-pub"><a href="#上传id-rsa-pub" class="headerlink" title="上传id_rsa.pub"></a>上传id_rsa.pub</h3><p>点击博客仓库的Settings-&gt;Deploy keys-&gt;add deploy key，Title填写<code>ACTIONS_DEPLOY_KEY</code>，Key填写<code>id_rsa.pub</code>文件的内容。</p>
<h3 id="上传id-rsa"><a href="#上传id-rsa" class="headerlink" title="上传id_rsa"></a>上传id_rsa</h3><p>点击博客仓库的Settings-&gt;Secrets-&gt;Add a new secret，Name填写<code>ACTIONS_DEPLOY_KEY</code>，Value填写<code>id_rsa</code>文件的内容。</p>
<h2 id="利用FTP-Deploy-Action上传文件"><a href="#利用FTP-Deploy-Action上传文件" class="headerlink" title="利用FTP-Deploy-Action上传文件"></a>利用<code>FTP-Deploy-Action</code>上传文件</h2><p>这里在<code>Github actions</code>里利用<code>FTP-Deploy-Action</code>上传文件到服务器。项目地址：<a href="https://github.com/SamKirkland">SamKirkland</a>&#x2F;<a href="https://github.com/SamKirkland/FTP-Deploy-Action">FTP-Deploy-Action</a></p>
<p>首先是搭建ftp服务器。</p>
<h3 id="安装vsftpd"><a href="#安装vsftpd" class="headerlink" title="安装vsftpd"></a>安装vsftpd</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo yum install vsftpd -y</span><br></pre></td></tr></table></figure>

<p>安装软件包后，启动vsftpd，并使其能够在引导时自动启动：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo systemctl start vsftpd</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> vsftpd</span><br></pre></td></tr></table></figure>

<h3 id="配置vsftpd"><a href="#配置vsftpd" class="headerlink" title="配置vsftpd"></a>配置vsftpd</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/vsftpd/vsftpd.conf</span><br></pre></td></tr></table></figure>

<p>在<code>userlist_enable=YES</code>下面，加上：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">userlist_file=/etc/vsftpd/user_list</span><br><span class="line">userlist_deny=NO</span><br></pre></td></tr></table></figure>

<h3 id="创建FTP用户"><a href="#创建FTP用户" class="headerlink" title="创建FTP用户"></a>创建FTP用户</h3><ul>
<li>创建一个新用户，名为git:</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo adduser git</span><br><span class="line">sudo passwd git</span><br></pre></td></tr></table></figure>

<ul>
<li>将用户添加到允许的FTP用户列表中：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;git&quot;</span> | sudo <span class="built_in">tee</span> -a /etc/vsftpd/user_list</span><br></pre></td></tr></table></figure>

<ul>
<li>设置正确的权限</li>
</ul>
<p>为了使ftp用户可以上传网站文件到相应目录：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo <span class="built_in">chmod</span> 755 /var/www/hexo</span><br><span class="line">sudo <span class="built_in">chown</span> -R git: /var/www/hexo</span><br></pre></td></tr></table></figure>

<ul>
<li>重启vsftpd服务。</li>
</ul>
<p>保存文件并重新启动vsftpd服务，以使更改生效：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo systemctl restart vsftpd</span><br></pre></td></tr></table></figure>

<h2 id="配置FTP-MIRROR-PASSWORD"><a href="#配置FTP-MIRROR-PASSWORD" class="headerlink" title="配置FTP_MIRROR_PASSWORD"></a>配置<code>FTP_MIRROR_PASSWORD</code></h2><p>点击博客仓库的Settings-&gt;Secrets-&gt;Add a new secret，Name填写<code>FTP_MIRROR_PASSWORD</code>，Value填写用户密码。</p>
<h2 id="配置-Github-actions"><a href="#配置-Github-actions" class="headerlink" title="配置 Github actions"></a>配置 Github actions</h2><p>在博客根目录新建<code>.github/workflows/gh_pages.yml</code>文件。代码（<strong>不添加缓存</strong>）如下：最好使用下面添加了缓存的。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">GitHub</span> <span class="string">Page</span> <span class="string">Deploy</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">develop</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build-deploy:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">master</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v2.3.4</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">submodules:</span> <span class="literal">true</span>  <span class="comment"># Fetch Hugo themes (true OR recursive)</span></span><br><span class="line">          <span class="attr">fetch-depth:</span> <span class="number">0</span>    <span class="comment"># Fetch all history for .GitInfo and .Lastmod</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Hugo</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">peaceiris/actions-hugo@v2.5.0</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">hugo-version:</span> <span class="string">&#x27;latest&#x27;</span></span><br><span class="line">          <span class="attr">extended:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">Hugo</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">hugo</span> <span class="string">--minify</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">Hugo</span> <span class="string">to</span> <span class="string">gh-pages</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">peaceiris/actions-gh-pages@v3.8.0</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">github_token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">PUBLISH_BRANCH:</span> <span class="string">master</span></span><br><span class="line">          <span class="attr">PUBLISH_DIR:</span> <span class="string">./public</span></span><br><span class="line">        <span class="comment"># cname:</span></span><br><span class="line">        </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">Hugo</span> <span class="string">to</span> <span class="string">Server</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">SamKirkland/FTP-Deploy-Action@4.1.0</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">server:</span> <span class="number">104.224</span><span class="number">.191</span><span class="number">.88</span></span><br><span class="line">          <span class="attr">username:</span> <span class="string">git</span></span><br><span class="line">          <span class="attr">password:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.FTP_MIRROR_PASSWORD</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">local-dir:</span> <span class="string">./public/</span></span><br><span class="line">          <span class="attr">server-dir:</span> <span class="string">/var/www/hexo/</span></span><br></pre></td></tr></table></figure>

<p><strong>添加缓存：</strong></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">GitHub</span> <span class="string">Page</span> <span class="string">Deploy</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">develop</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build-deploy:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">master</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v2.3.4</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">submodules:</span> <span class="literal">true</span>  <span class="comment"># Fetch Hugo themes (true OR recursive)</span></span><br><span class="line">          <span class="attr">fetch-depth:</span> <span class="number">0</span>    <span class="comment"># Fetch all history for .GitInfo and .Lastmod</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Hugo</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">peaceiris/actions-hugo@v2.5.0</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">hugo-version:</span> <span class="string">&#x27;latest&#x27;</span></span><br><span class="line">          <span class="attr">extended:</span> <span class="literal">true</span></span><br><span class="line">          </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Cache</span> <span class="string">resources</span> <span class="comment"># 缓存 resource 文件加快生成速度</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/cache@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">resources</span></span><br><span class="line">         <span class="comment"># 检查照片文件变化</span></span><br><span class="line">          <span class="attr">key:</span> <span class="string">$&#123;&#123;</span> <span class="string">runner.os</span> <span class="string">&#125;&#125;-hugocache-$&#123;&#123;</span> <span class="string">hashFiles(&#x27;content/**/*&#x27;)</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">restore-keys:</span> <span class="string">$&#123;&#123;</span> <span class="string">runner.os</span> <span class="string">&#125;&#125;-hugocache-</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">Hugo</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">hugo</span> <span class="string">--minify</span> <span class="string">--gc</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">Hugo</span> <span class="string">to</span> <span class="string">gh-pages</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">peaceiris/actions-gh-pages@v3.8.0</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">github_token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">PUBLISH_BRANCH:</span> <span class="string">master</span></span><br><span class="line">          <span class="attr">PUBLISH_DIR:</span> <span class="string">./public</span></span><br><span class="line">        <span class="comment"># cname:</span></span><br><span class="line">        </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">Hugo</span> <span class="string">to</span> <span class="string">Server</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">SamKirkland/FTP-Deploy-Action@4.1.0</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">server:</span> <span class="number">104.224</span><span class="number">.191</span><span class="number">.88</span></span><br><span class="line">          <span class="attr">username:</span> <span class="string">git</span></span><br><span class="line">          <span class="attr">password:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.FTP_MIRROR_PASSWORD</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">local-dir:</span> <span class="string">./public/</span></span><br><span class="line">          <span class="attr">server-dir:</span> <span class="string">/var/www/hexo/</span></span><br></pre></td></tr></table></figure>

<p><strong>第三方：</strong></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">GitHub</span> <span class="string">Page</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">    <span class="attr">push:</span></span><br><span class="line">        <span class="attr">branches:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">master</span> <span class="comment"># master 更新触发</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">        <span class="attr">runs-on:</span> <span class="string">ubuntu-18.04</span></span><br><span class="line">        <span class="attr">steps:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">              <span class="attr">with:</span></span><br><span class="line">                  <span class="attr">submodules:</span> <span class="literal">true</span> <span class="comment"># clone submodules</span></span><br><span class="line">                  <span class="attr">fetch-depth:</span> <span class="number">0</span> <span class="comment"># 克隆所有历史信息</span></span><br><span class="line"></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Hugo</span></span><br><span class="line">              <span class="attr">uses:</span> <span class="string">peaceiris/actions-hugo@v2</span></span><br><span class="line">              <span class="attr">with:</span></span><br><span class="line">                  <span class="attr">hugo-version:</span> <span class="string">&quot;0.87.0&quot;</span> <span class="comment"># Hugo 版本</span></span><br><span class="line">                  <span class="attr">extended:</span> <span class="literal">true</span> <span class="comment"># hugo插件版 Stack主题 必须启用</span></span><br><span class="line"></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Cache</span> <span class="string">resources</span> <span class="comment"># 缓存 resource 文件加快生成速度</span></span><br><span class="line">              <span class="attr">uses:</span> <span class="string">actions/cache@v2</span></span><br><span class="line">              <span class="attr">with:</span></span><br><span class="line">                  <span class="attr">path:</span> <span class="string">resources</span></span><br><span class="line">                  <span class="comment"># 检查照片文件变化</span></span><br><span class="line">                  <span class="attr">key:</span> <span class="string">$&#123;&#123;</span> <span class="string">runner.os</span> <span class="string">&#125;&#125;-hugocache-$&#123;&#123;</span> <span class="string">hashFiles(&#x27;content/**/*&#x27;)</span> <span class="string">&#125;&#125;</span></span><br><span class="line">                  <span class="attr">restore-keys:</span> <span class="string">$&#123;&#123;</span> <span class="string">runner.os</span> <span class="string">&#125;&#125;-hugocache-</span></span><br><span class="line"></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="comment"># 生成网页 删除无用 resource 文件 削减空行</span></span><br><span class="line">              <span class="attr">run:</span> <span class="string">hugo</span> <span class="string">--minify</span> <span class="string">--gc</span></span><br><span class="line"></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="comment"># 部署到 GitHub Page</span></span><br><span class="line">              <span class="attr">uses:</span> <span class="string">peaceiris/actions-gh-pages@v3</span></span><br><span class="line">              <span class="attr">with:</span></span><br><span class="line">                  <span class="comment"># 如果在同一个仓库下使用请使用 github_token 并注释 deploy_key</span></span><br><span class="line">                  <span class="comment"># github_token: $&#123;&#123; secrets.GITHUB_TOKEN &#125;&#125;</span></span><br><span class="line">                  <span class="attr">deploy_key:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.ACTIONS_DEPLOY_KEY</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">                  <span class="comment"># 如果在同一个仓库请注释</span></span><br><span class="line">                  <span class="attr">external_repository:</span> <span class="comment"># 你的 GitHub page 仓库 example/example.github.io</span></span><br><span class="line"></span><br><span class="line">                  <span class="attr">publish_dir:</span> <span class="string">./public</span></span><br><span class="line">                  <span class="attr">user_name:</span> <span class="string">&quot;github-actions[bot]&quot;</span></span><br><span class="line">                  <span class="attr">user_email:</span> <span class="string">&quot;github-actions[bot]@users.noreply.github.com&quot;</span></span><br><span class="line">                  <span class="attr">full_commit_message:</span> <span class="string">Deploy</span> <span class="string">from</span> <span class="string">$&#123;&#123;</span> <span class="string">github.repository</span> <span class="string">&#125;&#125;@$&#123;&#123;</span> <span class="string">github.sha</span> <span class="string">&#125;&#125;</span> <span class="string">🚀</span></span><br></pre></td></tr></table></figure>

<h3 id="提交源码"><a href="#提交源码" class="headerlink" title="提交源码"></a>提交源码</h3><p>初始化git，新建并切换到<code>develop</code>分支，将源码提交到<code>develop</code>分支。稍等片刻，github action会自动部署blog到<code>master</code>分支。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git init</span><br><span class="line">git checkout -b develop</span><br><span class="line">git remote add origin git@github.com:iwyang/iwyang.github.io.git</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;备份源码&quot;</span></span><br><span class="line">git push --force origin develop</span><br></pre></td></tr></table></figure>

<h3 id="最终部署脚本"><a href="#最终部署脚本" class="headerlink" title="最终部署脚本"></a>最终部署脚本</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[0;32mDeploying updates to gitee...\033[0m&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># backup</span></span><br><span class="line">git config --global core.autocrlf <span class="literal">false</span></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;site backup&quot;</span></span><br><span class="line">git push origin develop --force</span><br></pre></td></tr></table></figure>

<h2 id="本地操作"><a href="#本地操作" class="headerlink" title="本地操作"></a>本地操作</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b develop git@github.com:iwyang/iwyang.github.io.git blog --recursive</span><br></pre></td></tr></table></figure>
<p>因为使用<code>Submodule</code>管理主题，所以最后要加上 <code>--recursive</code>，因为使用 git clone 命令默认不会拉取项目中的子模块，你会发现主题文件是空的。（另外一种方法：<code>git submodule init &amp;&amp; git submodule update</code>）</p>
<h3 id="同步更新源文件"><a href="#同步更新源文件" class="headerlink" title="同步更新源文件"></a>同步更新源文件</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git pull</span><br></pre></td></tr></table></figure>

<h3 id="同步主题文件"><a href="#同步主题文件" class="headerlink" title="同步主题文件"></a>同步主题文件</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git submodule update --remote</span><br></pre></td></tr></table></figure>

<p>运行此命令后， Git 将会自动进入子模块然后抓取并更新，更新后重新提交一遍，子模块新的跟踪信息便也会记录到仓库中。这样就保证仓库主题是最新的。</p>
<h2 id="服务器通过git拉取更新"><a href="#服务器通过git拉取更新" class="headerlink" title="服务器通过git拉取更新"></a>服务器通过git拉取更新</h2><p>2021.8.15 已经不用此方法，现在直接在<code>Github actions</code>利用<code>FTP-Deploy-Action</code>上传文件到服务器。</p>
<h3 id="克隆仓库"><a href="#克隆仓库" class="headerlink" title="克隆仓库"></a>克隆仓库</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">rm</span> -rf /var/www/hexo</span><br><span class="line">git <span class="built_in">clone</span> git@github.com:iwyang/iwyang.github.io.git /var/www/hexo</span><br></pre></td></tr></table></figure>

<h3 id="出现问题"><a href="#出现问题" class="headerlink" title="出现问题"></a>出现问题</h3><p>执行上一步可能会出现问题：<code> Permission denied (publickey). Could not read from remote repository</code>。</p>
<p>解决方法：</p>
<h4 id="服务器生成ssh-key"><a href="#服务器生成ssh-key" class="headerlink" title="服务器生成ssh key"></a>服务器生成ssh key</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum install rsync -y</span><br><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;455343442@qq.com&quot;</span></span><br></pre></td></tr></table></figure>

<p>一路回车即可，会生成你的ssh key。然后再终端下执行命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh -v git@github.com</span><br></pre></td></tr></table></figure>

<p>这时会报错，最后两句是：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">No more authentication methods to try.  </span><br><span class="line">　　Permission denied (publickey).</span><br></pre></td></tr></table></figure>

<p>在终端再执行以下命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh-agent -s </span><br></pre></td></tr></table></figure>

<p>接着在执行:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh-add ~/.ssh/id_rsa</span><br></pre></td></tr></table></figure>

<p>出现问题：<code>Could not open a connection to your authentication agent.</code></p>
<p>解决方法：使用：<code>ssh-agent bash</code> 命令，然后再次使用<code>ssh-add ~/.ssh/id_rsa_name</code>这个命令就没问题了。(<strong>注意</strong>：Identity added: …这是ssh key文件路径的信息，如<code>/.ssh/id_rsa</code>)</p>
<h4 id="配置github"><a href="#配置github" class="headerlink" title="配置github"></a>配置github</h4><p>打开你刚刚生成的<code>id_rsa.pub</code>，将里面的内容复制，进入你的github账号，在settings下，SSH and GPG keys下new SSH key，然后将id_rsa.pub里的内容复制到Key中，完成后Add SSH Key。</p>
<h4 id="验证Key"><a href="#验证Key" class="headerlink" title="验证Key"></a>验证Key</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh -T git@github.com </span><br></pre></td></tr></table></figure>

<h3 id="设置crontab定时任务："><a href="#设置crontab定时任务：" class="headerlink" title="设置crontab定时任务："></a>设置crontab定时任务：</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">crontab -e</span><br><span class="line">*/5 * * * * git -C /var/www/hexo pull</span><br></pre></td></tr></table></figure>

<p>这样只要提交源码给github，<code>github action</code>就会帮你部署博客到<code>github page</code>，服务器通过<code>git pull</code>定时拉取更新。换台电脑不用再搭建环境，直接在gtihub新建或者修改文章，剩下的工作就交给<code>github action</code>。注意回本地电脑先<code>git pull</code>拉取更新，再提交源码。</p>
<p><strong>注意：好像先要从源码仓库clone一份源码到本地，才能利用<code>git pull</code>拉取github已有的更新。只有先拉取github已有的更新，再在本地提交源码，github上的更新才不会被删除</strong>。</p>
<h2 id="附：使用Git-Submodule管理Hugo主题"><a href="#附：使用Git-Submodule管理Hugo主题" class="headerlink" title="附：使用Git Submodule管理Hugo主题"></a>附：使用Git Submodule管理Hugo主题</h2><ul>
<li>如果克隆库的时候要初始化子模块，请加上 <code>--recursive</code> 参数，如：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b develop git@github.com:iwyang/iwyang.github.io.git blog --recursive</span><br></pre></td></tr></table></figure>

<ul>
<li>如果已经克隆了主库但没初始化子模块，则用：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git submodule update --init --recursive</span><br></pre></td></tr></table></figure>

<ul>
<li>如果已经克隆并初始化子模块，而需要从子模块的源更新这个子模块，则：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git submodule update --recursive --remote</span><br></pre></td></tr></table></figure>

<p>更新之后主库的 git 差异中会显示新的 SHA 码，把这个差异选中提交即可。</p>
<hr>
<ul>
<li>其他命令：在主仓库更新所有子模块：<code>git submodule foreach git pull origin master</code></li>
</ul>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://yanlong.me/post/deploy-blog-use-github-actions/">1.使用Github Actions自动编译部署基于hugo的博客</a></li>
<li><a href="https://juejin.im/post/5e0d9f61f265da5d0d435a24">2.用 Hugo 自动构建 搭建 GitHub Pages</a></li>
<li><a href="https://blog.lunawen.com/posts/20200628-luna-tech-github-action-blog-autodeployment/">3.使用 GitHub Action 自动部署博客到远程服务器</a></li>
<li><a href="https://frostming.com/2020/04-26/github-actions-deploy">4.使用 GitHub Actions 实现博客自动化部署</a></li>
<li><a href="https://blog.csdn.net/ywl470812087/article/details/104459288">5.解决git@github.com: Permission denied (publickey). Could not read from remote repository</a></li>
<li><a href="https://yihui.org/cn/2017/03/git-submodule/">6.GIT 子模块</a></li>
<li><a href="https://zj-git-guide.readthedocs.io/zh_CN/stable/basic/%E5%AD%90%E6%A8%A1%E5%9D%97.html">7.子模块</a></li>
<li><a href="https://blog.zhixuan.dev/posts/ce103e3b/">8.Stack主题 + GitHub Action</a></li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>hugo</tag>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title>hugo部署到coding&amp;备份源码</title>
    <url>/archives/aa22a796/</url>
    <content><![CDATA[<h2 id="本地操作"><a href="#本地操作" class="headerlink" title="本地操作"></a>本地操作</h2><h3 id="安装GIt"><a href="#安装GIt" class="headerlink" title="安装GIt"></a>安装GIt</h3><p>本地需要安装 <a href="https://git-scm.com/">Git</a> ，安装过程略。安装完git后还要配置环境变量：<br>右键我的电脑 –&gt; 属性，然后点击高级系统设置 –&gt; 环境变量 –&gt; 选择用户变量或系统变量中的Path,点击编辑；找到Git安装目录,添加以下地址:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">D:\Program Files\Git\bin</span><br><span class="line">D:\Program Files\Git\mingw64\libexec\git-core</span><br><span class="line">D:\Program Files\Git\mingw64\bin</span><br></pre></td></tr></table></figure>

<h3 id="配置SSH-公钥"><a href="#配置SSH-公钥" class="headerlink" title="配置SSH 公钥"></a>配置SSH 公钥</h3><p>Windows 上安装 <a href="https://git-for-windows.github.io/">Git for Windows</a> 之后在开始菜单里打开 Git Bash 输入：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;你的用户名&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;你的电子邮箱&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line"><span class="built_in">mkdir</span> .ssh</span><br><span class="line"><span class="built_in">cd</span> .ssh</span><br><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>

<p>在系统当前用户文件夹下生成了私钥 <code>id_rsa</code> 和公钥 <code>id_rsa.pub</code>。</p>
<h3 id="初始化-Hugo"><a href="#初始化-Hugo" class="headerlink" title="初始化 Hugo"></a>初始化 Hugo</h3><h4 id="安装hugo"><a href="#安装hugo" class="headerlink" title="安装hugo"></a>安装hugo</h4><p>windows10下安装hugo，可以参照Hugo官方手册的方法，这里讲一个相对简单稳定的方法。</p>
<p>1.下载hugo程序压缩包：前往<a href="https://github.com/gohugoio/hugo/releases%E4%B8%8B%E8%BD%BD%E5%92%8C%E8%87%AA%E5%B7%B1%E7%B3%BB%E7%BB%9F%E7%89%88%E6%9C%AC%E7%9B%B8%E7%AC%A6%E5%90%88%E7%9A%84hugo%E7%A8%8B%E5%BA%8F%E5%8E%8B%E7%BC%A9%E5%8C%85%E3%80%82(%E5%BB%BA%E8%AE%AE%E4%B8%8B%E8%BD%BDhugo_extended%E7%89%88%E6%9C%AC)">https://github.com/gohugoio/hugo/releases下载和自己系统版本相符合的hugo程序压缩包。(建议下载hugo_extended版本)</a></p>
<p>2.解压到某个文件夹中（路径不要有中文，而且自己要记得文件夹的路径），最好是不常改动的文件夹下边，以防文件被误删或者丢失。</p>
<p>3.添加hugo到系统环境变量PATH中</p>
<ul>
<li>找到“系统环境变量”的设置位置，在开始菜单的搜索栏搜索环境变量</li>
<li>添加用户环境变量，依此：点击环境变量，找到用户变量中的path，点击编辑，然后点击新建，在使用浏览按钮选中文件夹，即可使用hugo。（选中到hugo.exe所在的文件夹即可，不需要选中hugo.exe，貌似添加完系统变量，要重启电脑才能在Git Bash里运行hugo）</li>
<li>接下来，为了万无一失，还是要检查一下hugo是否安装完成。以管理员方式打开cmd命令窗口，然后输入以下指令：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hugo version</span><br></pre></td></tr></table></figure>

<p>如果得到如下响应，（即显示版本信息），说明安装成功，接下来就可以玩转hugo了。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Hugo Static Site Generator v0.70.0/extended windows/amd64 BuildDate: unknown</span><br></pre></td></tr></table></figure>

<h4 id="创建并配置站点"><a href="#创建并配置站点" class="headerlink" title="创建并配置站点"></a>创建并配置站点</h4><blockquote>
<p>以下命令均在’Git Bash’中运行</p>
</blockquote>
<p>进入你想存放 Hugo 网站文件夹的目录，执行以下命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hugo new site blog  </span><br></pre></td></tr></table></figure>

<h4 id="添加主题"><a href="#添加主题" class="headerlink" title="添加主题"></a>添加主题</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/dillonzq/LoveIt.git themes/LoveIt</span><br></pre></td></tr></table></figure>

<p>附更新主题命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ./themes/LoveIt/</span><br><span class="line">git pull</span><br></pre></td></tr></table></figure>

<p>配置主题</p>
<p>将 根目录\themes\even\exampleSite路径下的config.toml文件复制到根目录下，覆盖掉根目录下的config.toml文件。然后，我们在notepad++中打开并对其作一定的修改就可以直接使用。</p>
<h4 id="配置config-toml"><a href="#配置config-toml" class="headerlink" title="配置config.toml"></a>配置config.toml</h4><p>略</p>
<h4 id="设置文章模板"><a href="#设置文章模板" class="headerlink" title="设置文章模板"></a>设置文章模板</h4><p>为了更好的使用附加功能，我们提前修改一下模板。这样，每次使用新建一篇文档时候就省去很多麻烦事。<br>使用Typora文档工具打开themes&#x2F;tranquilpeak&#x2F;archetypes中的post.md直接替换为以下的模板：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; replace .Name &quot;-&quot; &quot; &quot; | title &#125;&#125;</span>&quot;</span></span><br><span class="line"><span class="attr">date:</span> &#123;&#123; <span class="string">.Date</span> &#125;&#125;</span><br><span class="line"><span class="attr">lastmod:</span> &#123;&#123; <span class="string">.Date</span> &#125;&#125;</span><br><span class="line"><span class="attr">draft:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">weight:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">categories:</span> [<span class="string">&quot;&quot;</span>]</span><br><span class="line"><span class="attr">tags:</span> [<span class="string">&quot;&quot;</span>] </span><br></pre></td></tr></table></figure>

<p>　接下来在根目录下使用以下命令生成一篇文档吧：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hugo new post/XXXX.md</span><br></pre></td></tr></table></figure>

<h4 id="新建“关于”页面"><a href="#新建“关于”页面" class="headerlink" title="新建“关于”页面"></a>新建“关于”页面</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hugo new about.md</span><br></pre></td></tr></table></figure>

<p><code>config.toml</code>相应位置添加：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line">[[<span class="string">menu.main</span>]]</span><br><span class="line">  <span class="string">name</span> <span class="string">=</span> <span class="string">&quot;关于&quot;</span></span><br><span class="line">  <span class="string">weight</span> <span class="string">=</span> <span class="number">50</span></span><br><span class="line">  <span class="string">identifier</span> <span class="string">=</span> <span class="string">&quot;about&quot;</span></span><br><span class="line">  <span class="string">url</span> <span class="string">=</span> <span class="string">&quot;/about/&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="启动博客的本地预览"><a href="#启动博客的本地预览" class="headerlink" title="启动博客的本地预览"></a>启动博客的本地预览</h4><p>建议在配置文件中设置好主题，或者使用 –t指令指定主题，在站点的根目录下使用命令进行本地启动，本地启动的命令如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hugo server -D</span><br></pre></td></tr></table></figure>

<p>使用浏览器打开 <a href="http://localhost:1313/">http://localhost:1313</a> 预览。</p>
<h2 id="部署到coding"><a href="#部署到coding" class="headerlink" title="部署到coding"></a>部署到coding</h2><p>略</p>
<h3 id="提交本地仓库"><a href="#提交本地仓库" class="headerlink" title="提交本地仓库"></a>提交本地仓库</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">rm</span> -rf public/*</span><br><span class="line">hugo</span><br><span class="line"><span class="built_in">cd</span> public</span><br><span class="line">git remote <span class="built_in">rm</span> origin</span><br><span class="line">git init</span><br><span class="line">git remote add origin git@e.coding.net:iwyang/hugo/hugo.git</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;Add a new post&quot;</span></span><br><span class="line">git push --force origin master</span><br></pre></td></tr></table></figure>

<h3 id="备份脚本"><a href="#备份脚本" class="headerlink" title="备份脚本"></a>备份脚本</h3><p>为了后续更新方便起见，可以在根目录新建一个一键部署脚本，命名为<code>deploy.sh</code>（如果对配置不做大的改动（例如：更换主题等），后续的更新可以使用以下脚本）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[0;32mDeploying updates to gitee...\033[0m&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Removing existing files</span></span><br><span class="line"><span class="built_in">rm</span> -rf public/*</span><br><span class="line"><span class="comment"># Build the project</span></span><br><span class="line">hugo</span><br><span class="line"><span class="comment"># Go To Public folder</span></span><br><span class="line"><span class="built_in">cd</span> public</span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line"><span class="comment"># Commit changes.</span></span><br><span class="line">msg=<span class="string">&quot;rebuilding site `date`&quot;</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> -eq 1 ]</span><br><span class="line">  <span class="keyword">then</span> msg=<span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">git commit -m <span class="string">&quot;<span class="variable">$msg</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Push source and build repos.</span></span><br><span class="line">git push origin master --force</span><br><span class="line"></span><br><span class="line"><span class="comment"># Come Back up to the Project Root</span></span><br><span class="line"><span class="built_in">cd</span> ..</span><br></pre></td></tr></table></figure>

<p>创建完脚本以后，不要忘了加权限</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 777 xxx</span><br></pre></td></tr></table></figure>



<h3 id="提交本地仓库-1"><a href="#提交本地仓库-1" class="headerlink" title="提交本地仓库"></a>提交本地仓库</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">rm</span> -rf public/*</span><br><span class="line">hugo</span><br><span class="line"><span class="built_in">cd</span> public</span><br><span class="line">git remote <span class="built_in">rm</span> origin</span><br><span class="line">git init</span><br><span class="line">git remote add origin git@gitee.com:iwyang/iwyang.git</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;Add a new post&quot;</span></span><br><span class="line">git push origin master --force</span><br></pre></td></tr></table></figure>

<h3 id="备份hugo源码"><a href="#备份hugo源码" class="headerlink" title="备份hugo源码"></a>备份hugo源码</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git remote <span class="built_in">rm</span> origin</span><br><span class="line">git init</span><br><span class="line">git checkout -b backup</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;备份源码&quot;</span></span><br><span class="line">git remote add origin git@gitee.com:iwyang/iwyang.git</span><br><span class="line">git push origin backup --force</span><br></pre></td></tr></table></figure>

<h2 id="备份hugo源码-1"><a href="#备份hugo源码-1" class="headerlink" title="备份hugo源码"></a>备份hugo源码</h2><p>PS: <strong>如果执行第三步<code>git checkout -b backup</code>后，提示<code>fatal: A branch named &#39;backup&#39; already exists.</code>，则执行以下操作：</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -D backup    <span class="comment">#删除分支:必须切换到其他的分之下才可操作</span></span><br><span class="line">git checkout -b backup  <span class="comment">#切换分支</span></span><br></pre></td></tr></table></figure>

<h3 id="备份到github-master分支"><a href="#备份到github-master分支" class="headerlink" title="备份到github master分支"></a>备份到github master分支</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git remote <span class="built_in">rm</span> origin</span><br><span class="line">git init</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;备份源码&quot;</span></span><br><span class="line">git remote add origin git@github.com:iwyang/hugo.git</span><br><span class="line">git push --force origin master</span><br></pre></td></tr></table></figure>

<hr>
<blockquote>
<p>PS:这里<code>Git Bash</code>开头会报错：<code>warning: LF will be replaced by CRLF</code>，解决方法：在<code>git add .</code>前面添加：</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global core.autocrlf <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p> 最终效果：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># backup</span></span><br><span class="line">git config --global core.autocrlf <span class="literal">false</span></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;备份源码&quot;</span></span><br><span class="line">git remote add origin git@github.com:iwyang/hugo-backup.git</span><br><span class="line">git push origin master --force</span><br></pre></td></tr></table></figure>

<p>在部署脚本里也要作相应修改。</p>
<h2 id="还原源码"><a href="#还原源码" class="headerlink" title="还原源码"></a>还原源码</h2><p><del>重装系统后，Algolia的自动提交索引功能要重新部署一遍，具体可查看：<a href="https://bore.vip/hugo-theme-loveit-algolia/">Hugo添加Algolia</a>。最后还要在博客目录里重新关联远程仓库，还是一样先备份源码到github，再部署网页到相应服务器。</del></p>
<p><del><strong>先备份源码，再部署网页，是为了<code>GitInfo</code>以及<code>lastmod</code>能够生效和更新</strong>，其实源码可以备份到github、gitee、coding中任意一个公开仓库都可以，当然备份到github最好。网页也无需和源码放在同一个代码托管平台上。</del></p>
<p>2022.3.4 如果使用<code>Git Submodule</code>子模块管理Hugo主题，将源码克隆到本地，使用下面这条命令才能将主题一同克隆到本地。</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">git clone <span class="literal">-b</span> develop git@github.com:iwyang/hugo.git hugo <span class="literal">--recursive</span></span><br></pre></td></tr></table></figure>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>最好不要反复切换部署仓库，否则git会出现以下错误提示：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">remote: error: The last gc run reported the following. Please correct the root cause</span><br><span class="line">remote: and remove gc.log.</span><br><span class="line">remote: Automatic cleanup will not be performed until the file is removed.</span><br><span class="line">remote:</span><br><span class="line">remote: warning: There are too many unreachable loose objects; run <span class="string">&#x27;git prune&#x27;</span> to remove them.</span><br></pre></td></tr></table></figure>

<p>查资料，原来是自己本地一些 “悬空对象”太多(git删除分支或者清空stash的时候，这些其实还没有真正删除，成为悬空对象，我们可以使用merge命令可以从中恢复一些文件)</p>
<p>解决方法：</p>
<p>1.输入命令：<code>git fsck --lost-found</code>，可以看到好多“dangling commit”</p>
<p>2.清空他们：<code>git gc --prune=now</code>，完成</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://saquarius.com/2019/07/hugo-github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2windows10/#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C">1.Hugo+github搭建个人博客 (windows10)</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/57361697">2.如何利用 GitHub Pages 和 Hugo 轻松搭建个人博客？</a></li>
<li><a href="https://blog.olowolo.com/post/hugo-quick-start/">3.Hugo 从入门到会用</a></li>
<li><a href="https://gitee.com/help/articles/4136#article-header0">4.码云Pages</a></li>
<li><a href="https://blog.csdn.net/persist_xyz/article/details/88619036">5.git运行突然提示 remote: error: The last gc run reported the following</a></li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>hugo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hugo Papermod主题配置与使用</title>
    <url>/archives/ca21a352/</url>
    <content><![CDATA[<p>最近一两天又在折腾主题，这回是<a href="https://git.io/hugopapermod">Hugo-PaperMod</a>主题，虽然还没打算换，但还是记录一下吧。</p>
<h2 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h2><p>查看文档：**<a href="https://github.com/adityatelange/hugo-PaperMod/wiki/Features">PaperMod - Features</a>**</p>
<h2 id="config-yml配置"><a href="#config-yml配置" class="headerlink" title="config.yml配置"></a><code>config.yml</code>配置</h2><p><strong>注意</strong>：如果把<code>baseURL</code>设置成<code>&quot;/&quot;</code>，页面顶部导航失效，如果要用顶部导航，就设置为<code>baseURL: &quot;https://bore.vip&quot;</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">baseURL:</span> <span class="string">&quot;/&quot;</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Bore&#x27;s</span> <span class="string">Notes</span></span><br><span class="line"><span class="attr">paginate:</span> <span class="number">10</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">PaperMod</span></span><br><span class="line"><span class="attr">defaultContentLanguage:</span> <span class="string">zh</span></span><br><span class="line"></span><br><span class="line"><span class="attr">permalinks:</span></span><br><span class="line">    <span class="attr">posts:</span> <span class="string">/archives/:slug/</span></span><br><span class="line"></span><br><span class="line"><span class="attr">enableInlineShortcodes:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">enableRobotsTXT:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">buildDrafts:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">buildFuture:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">buildExpired:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">enableEmoji:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># googleAnalytics: UA-123-45</span></span><br><span class="line"></span><br><span class="line"><span class="attr">minify:</span></span><br><span class="line">    <span class="attr">disableXML:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">minifyOutput:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="attr">menu:</span></span><br><span class="line">    <span class="attr">main:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">identifier:</span> <span class="string">home</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">首页</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">/</span></span><br><span class="line">          <span class="attr">weight:</span> <span class="number">10</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">identifier:</span> <span class="string">archives</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">归档</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">/archives/</span></span><br><span class="line">          <span class="attr">weight:</span> <span class="number">20</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">identifier:</span> <span class="string">categories</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">分类</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">/categories/</span></span><br><span class="line">          <span class="attr">weight:</span> <span class="number">30</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">identifier:</span> <span class="string">tags</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">标签</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">/tags/</span></span><br><span class="line">          <span class="attr">weight:</span> <span class="number">40</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">identifier:</span> <span class="string">about</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">关于</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">/about/</span></span><br><span class="line">          <span class="attr">weight:</span> <span class="number">50</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">identifier:</span> <span class="string">search</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">搜索</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">/search/</span></span><br><span class="line">          <span class="attr">weight:</span> <span class="number">60</span></span><br><span class="line"></span><br><span class="line"><span class="attr">outputs:</span></span><br><span class="line">    <span class="attr">home:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">HTML</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">RSS</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">JSON</span></span><br><span class="line"></span><br><span class="line"><span class="attr">params:</span></span><br><span class="line">    <span class="attr">env:</span> <span class="string">production</span> <span class="comment"># to enable google analytics, opengraph, twitter-cards and schema.</span></span><br><span class="line">    <span class="attr">description:</span> <span class="string">&quot;本站主要用来收集整理资料、记录笔记，方便自己查询使用。&quot;</span></span><br><span class="line">    <span class="attr">author:</span> </span><br><span class="line">    <span class="comment"># author: [&quot;Me&quot;, &quot;You&quot;] # multiple authors</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">defaultTheme:</span> <span class="string">auto</span></span><br><span class="line">    <span class="attr">disableThemeToggle:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">DateFormat:</span> <span class="string">&quot;2006-01-02&quot;</span></span><br><span class="line">    <span class="attr">ShowShareButtons:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">ShowReadingTime:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">disableSpecial1stPost:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">displayFullLangName:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">ShowPostNavLinks:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">ShowBreadCrumbs:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">ShowCodeCopyButtons:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">ShowToc:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">comments:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">images:</span> [<span class="string">&quot;papermod-cover.png&quot;</span>]</span><br><span class="line">    <span class="attr">mainSections:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">posts</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">profileMode:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">PaperMod</span></span><br><span class="line">        <span class="attr">imageUrl:</span> <span class="string">&quot;#&quot;</span></span><br><span class="line">        <span class="attr">imageTitle:</span> <span class="string">my</span> <span class="string">image</span></span><br><span class="line">        <span class="comment"># imageWidth: 120</span></span><br><span class="line">        <span class="comment"># imageHeight: 120</span></span><br><span class="line">        <span class="attr">buttons:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Archives</span></span><br><span class="line">              <span class="attr">url:</span> <span class="string">archives</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Tags</span></span><br><span class="line">              <span class="attr">url:</span> <span class="string">tags</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># homeInfoParams:</span></span><br><span class="line">        <span class="comment"># Title: &quot;PaperMod&quot;</span></span><br><span class="line">        <span class="comment"># Content: &gt;</span></span><br><span class="line">            <span class="comment"># Welcome to demo of hugo&#x27;s theme PaperMod.</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># - **PaperMod** is a simple but fast and responsive theme with useful feature-set that enhances UX.</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># - Do give a 🌟 on Github !</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># - PaperMod is based on theme [Paper](https://github.com/nanxiaobei/hugo-paper).</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">socialIcons:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">github</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">&quot;https://github.com/adityatelange/hugo-PaperMod&quot;</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">KoFi</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">&quot;https://ko-fi.com/adityatelange&quot;</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">RsS</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">&quot;index.xml&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">editPost:</span></span><br><span class="line">        <span class="attr">URL:</span> <span class="string">&quot;https://github.com/iwyang/iwyang.github.io/tree/develop/content&quot;</span></span><br><span class="line">        <span class="attr">Text:</span> <span class="string">&quot;Suggest Changes&quot;</span> <span class="comment"># edit text</span></span><br><span class="line">        <span class="attr">appendFilePath:</span> <span class="literal">true</span> <span class="comment"># to append file path to Edit link</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># label:</span></span><br><span class="line">    <span class="comment">#     text: &quot;Home&quot;</span></span><br><span class="line">    <span class="comment">#     icon: icon.png</span></span><br><span class="line">    <span class="comment">#     iconHeight: 35</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># analytics:</span></span><br><span class="line">    <span class="comment">#     google:</span></span><br><span class="line">    <span class="comment">#         SiteVerificationTag: &quot;XYZabc&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">assets:</span></span><br><span class="line">        <span class="attr">favicon:</span> <span class="string">&quot;/images/favicon.png&quot;</span></span><br><span class="line">        <span class="attr">favicon16x16:</span> <span class="string">&quot;/images/favicon.png&quot;</span></span><br><span class="line">        <span class="attr">favicon32x32:</span> <span class="string">&quot;/images/favicon.png&quot;</span></span><br><span class="line">        <span class="attr">apple_touch_icon:</span> <span class="string">&quot;/images/favicon.png&quot;</span></span><br><span class="line">        <span class="attr">safari_pinned_tab:</span> <span class="string">&quot;/images/favicon.png&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">cover:</span></span><br><span class="line">        <span class="attr">hidden:</span> <span class="literal">true</span> <span class="comment"># hide everywhere but not in structured data</span></span><br><span class="line">        <span class="attr">hiddenInList:</span> <span class="literal">true</span> <span class="comment"># hide on list pages and home</span></span><br><span class="line">        <span class="attr">hiddenInSingle:</span> <span class="literal">true</span> <span class="comment"># hide on single page</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">fuseOpts:</span></span><br><span class="line">        <span class="attr">isCaseSensitive:</span> <span class="literal">false</span></span><br><span class="line">        <span class="attr">shouldSort:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">location:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">distance:</span> <span class="number">1000</span></span><br><span class="line">        <span class="attr">threshold:</span> <span class="number">0.4</span></span><br><span class="line">        <span class="attr">minMatchCharLength:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">keys:</span> [<span class="string">&quot;title&quot;</span>, <span class="string">&quot;permalink&quot;</span>, <span class="string">&quot;summary&quot;</span>, <span class="string">&quot;content&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="attr">taxonomies:</span></span><br><span class="line">    <span class="attr">category:</span> <span class="string">categories</span></span><br><span class="line">    <span class="attr">tag:</span> <span class="string">tags</span></span><br><span class="line">    <span class="attr">series:</span> <span class="string">series</span></span><br><span class="line"></span><br><span class="line"><span class="attr">markup:</span></span><br><span class="line">    <span class="attr">goldmark:</span></span><br><span class="line">        <span class="attr">renderer:</span></span><br><span class="line">            <span class="attr">unsafe:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment">#     highlight:</span></span><br><span class="line"><span class="comment">#         # anchorLineNos: true</span></span><br><span class="line"><span class="comment">#         codeFences: true</span></span><br><span class="line"><span class="comment">#         guessSyntax: true</span></span><br><span class="line"><span class="comment">#         lineNos: true</span></span><br><span class="line"><span class="comment">#         # noClasses: false</span></span><br><span class="line"><span class="comment">#         style: monokai</span></span><br><span class="line"></span><br><span class="line"><span class="attr">privacy:</span></span><br><span class="line">    <span class="attr">vimeo:</span></span><br><span class="line">        <span class="attr">disabled:</span> <span class="literal">false</span></span><br><span class="line">        <span class="attr">simple:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">twitter:</span></span><br><span class="line">        <span class="attr">disabled:</span> <span class="literal">false</span></span><br><span class="line">        <span class="attr">enableDNT:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">simple:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">instagram:</span></span><br><span class="line">        <span class="attr">disabled:</span> <span class="literal">false</span></span><br><span class="line">        <span class="attr">simple:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">youtube:</span></span><br><span class="line">        <span class="attr">disabled:</span> <span class="literal">false</span></span><br><span class="line">        <span class="attr">privacyEnhanced:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">    <span class="attr">instagram:</span></span><br><span class="line">        <span class="attr">disableInlineCSS:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">twitter:</span></span><br><span class="line">        <span class="attr">disableInlineCSS:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h2 id="archetypes默认模板"><a href="#archetypes默认模板" class="headerlink" title="archetypes默认模板"></a><code>archetypes</code>默认模板</h2><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">&quot;My 1st post&quot;</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2020-09-15T11:30:03+00:00</span></span><br><span class="line"><span class="comment"># weight: 1</span></span><br><span class="line"><span class="comment"># aliases: [&quot;/first&quot;]</span></span><br><span class="line"><span class="attr">tags:</span> [<span class="string">&quot;first&quot;</span>]</span><br><span class="line"><span class="attr">author:</span> <span class="string">&quot;Me&quot;</span></span><br><span class="line"><span class="comment"># author: [&quot;Me&quot;, &quot;You&quot;] # multiple authors</span></span><br><span class="line"><span class="attr">showToc:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">TocOpen:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">draft:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">hidemeta:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">comments:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">&quot;Desc Text.&quot;</span></span><br><span class="line"><span class="attr">canonicalURL:</span> <span class="string">&quot;https://canonical.url/to/page&quot;</span></span><br><span class="line"><span class="attr">disableHLJS:</span> <span class="literal">true</span> <span class="comment"># to disable highlightjs</span></span><br><span class="line"><span class="attr">disableShare:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">disableHLJS:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">hideSummary:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">searchHidden:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">ShowReadingTime:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">ShowBreadCrumbs:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">ShowPostNavLinks:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">cover:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">&quot;&lt;image path/url&gt;&quot;</span> <span class="comment"># image path/url</span></span><br><span class="line">    <span class="attr">alt:</span> <span class="string">&quot;&lt;alt text&gt;&quot;</span> <span class="comment"># alt text</span></span><br><span class="line">    <span class="attr">caption:</span> <span class="string">&quot;&lt;text&gt;&quot;</span> <span class="comment"># display caption under cover</span></span><br><span class="line">    <span class="attr">relative:</span> <span class="literal">false</span> <span class="comment"># when using page bundles set this to true</span></span><br><span class="line">    <span class="attr">hidden:</span> <span class="literal">true</span> <span class="comment"># only hide on current single page</span></span><br><span class="line"><span class="attr">editPost:</span></span><br><span class="line">    <span class="attr">URL:</span> <span class="string">&quot;https://github.com/&lt;path_to_repo&gt;/content&quot;</span></span><br><span class="line">    <span class="attr">Text:</span> <span class="string">&quot;Suggest Changes&quot;</span> <span class="comment"># edit text</span></span><br><span class="line">    <span class="attr">appendFilePath:</span> <span class="literal">true</span> <span class="comment"># to append file path to Edit link</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure>

<p>自定义：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">title:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; replace .TranslationBaseName &quot;-&quot; &quot; &quot; | title &#125;&#125;</span>&quot;</span></span><br><span class="line"><span class="attr">slug:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="attr">date:</span> &#123;&#123; <span class="string">.Date</span> &#125;&#125;</span><br><span class="line"><span class="attr">lastmod:</span> &#123;&#123; <span class="string">.Date</span> &#125;&#125;</span><br><span class="line"><span class="attr">draft:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">showToc:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">weight:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">categories:</span> [<span class="string">&quot;&quot;</span>]</span><br><span class="line"><span class="attr">tags:</span> [<span class="string">&quot;&quot;</span>]</span><br></pre></td></tr></table></figure>

<h2 id="加入Waline评论系统"><a href="#加入Waline评论系统" class="headerlink" title="加入Waline评论系统"></a>加入<code>Waline</code>评论系统</h2><p>根目录新建<code>layouts\partials\comments.html</code>：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;https://cdn.jsdelivr.net/npm/@waline/client&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;div <span class="built_in">id</span>=<span class="string">&quot;waline&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  new Waline(&#123;</span><br><span class="line">    el: <span class="string">&#x27;#waline&#x27;</span>,</span><br><span class="line">    serverURL: <span class="string">&#x27;https://your-domain.vercel.app&#x27;</span>,</span><br><span class="line">    copyright: <span class="literal">true</span>,</span><br><span class="line">    login: <span class="string">&#x27;enable&#x27;</span>,</span><br><span class="line">    placeholder: <span class="string">&#x27;欢迎评论&#x27;</span>,</span><br><span class="line">    dark: <span class="string">&#x27;.dark&#x27;</span>,</span><br><span class="line">	requiredMeta: [<span class="string">&#x27;nick&#x27;</span>, <span class="string">&#x27;mail&#x27;</span>],</span><br><span class="line">  &#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>网上别人配置：</p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line">&lt;!-- Waline --&gt;</span><br><span class="line">&#123;&#123;- if <span class="selector-class">.Site</span><span class="selector-class">.Params</span><span class="selector-class">.waline</span><span class="selector-class">.enable</span> -&#125;&#125;</span><br><span class="line">&lt;script <span class="attribute">src</span>=&quot;https://cdn.jsdelivr.net/npm/@waline/client@&#123;&#123; <span class="selector-class">.Site</span><span class="selector-class">.Params</span><span class="selector-class">.waline</span><span class="selector-class">.version</span> &#125;&#125;/dist/Waline<span class="selector-class">.min</span><span class="selector-class">.js</span>&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;<span class="selector-tag">div</span> class=&quot;pagination__title&quot;&gt;</span><br><span class="line">    &lt;<span class="selector-tag">span</span> class=&quot;pagination__title-h&quot;</span><br><span class="line">        &gt;&lt;<span class="selector-tag">span</span> class=&quot;vcount&quot;&gt;&lt;/<span class="selector-tag">span</span>&gt;精彩评论&lt;/<span class="selector-tag">span</span></span><br><span class="line">    &gt;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">div</span> id=&quot;waline&quot;&gt;&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="selector-tag">var</span> locale = &#123;</span><br><span class="line">        admin: <span class="string">&quot;Ṽerified&quot;</span>, // 博主标识</span><br><span class="line">        busy: <span class="string">&quot;操作频繁，请稍候再试...&quot;</span>,</span><br><span class="line">        cancel: <span class="string">&quot;取消&quot;</span>,</span><br><span class="line">        cancelReply: <span class="string">&quot;取消回复&quot;</span>,</span><br><span class="line">        comments: <span class="string">&quot;评论&quot;</span>,</span><br><span class="line">        confirm: <span class="string">&quot;确认&quot;</span>,</span><br><span class="line">        continue: <span class="string">&quot;继续&quot;</span>,</span><br><span class="line">        days: <span class="string">&quot;天前&quot;</span>,</span><br><span class="line">        emoji: <span class="string">&quot;表情&quot;</span>,</span><br><span class="line">        expand: <span class="string">&quot;查看更多...&quot;</span>,</span><br><span class="line">        hours: <span class="string">&quot;小时前&quot;</span>,</span><br><span class="line">        link: <span class="string">&quot;网址&quot;</span>,</span><br><span class="line">        login: <span class="string">&quot;登录&quot;</span>,</span><br><span class="line">        logout: <span class="string">&quot;退出&quot;</span>,</span><br><span class="line">        mail: <span class="string">&quot;邮箱&quot;</span>,</span><br><span class="line">        mailFail: <span class="string">&quot;请填写正确的邮件地址&quot;</span>,</span><br><span class="line">        minutes: <span class="string">&quot;分钟前&quot;</span>,</span><br><span class="line">        more: <span class="string">&quot;加载更多...&quot;</span>,</span><br><span class="line">        nick: <span class="string">&quot;昵称&quot;</span>,</span><br><span class="line">        nickFail: <span class="string">&quot;昵称不能少于 3 个字符&quot;</span>,</span><br><span class="line">        now: <span class="string">&quot;刚刚&quot;</span>,</span><br><span class="line">        placeholder:</span><br><span class="line">            <span class="string">&quot;·支持 匿名评论\n·支持 Markdown\n·支持 Twimoji\n·支持 代码块语法高亮\n·不收集 UserAgent&quot;</span>, // 评论框提示语</span><br><span class="line">        preview: <span class="string">&quot;预览&quot;</span>,</span><br><span class="line">        reply: <span class="string">&quot;回复&quot;</span>,</span><br><span class="line">        seconds: <span class="string">&quot;秒前&quot;</span>,</span><br><span class="line">        sofa: <span class="string">&quot;来发评论吧～&quot;</span>,</span><br><span class="line">        submit: <span class="string">&quot;提交&quot;</span>,</span><br><span class="line">        uploadDone: <span class="string">&quot;传输完成！&quot;</span>,</span><br><span class="line">        uploading: <span class="string">&quot;正在传输...&quot;</span>,</span><br><span class="line">        word: <span class="string">&quot;字&quot;</span>,</span><br><span class="line">        wordHint: <span class="string">&quot;评论字数应在 $0 到 $1 字之间！\n当前字数：$2&quot;</span>,</span><br><span class="line">        <span class="string">&quot;code-98&quot;</span>: <span class="string">&quot;Waline 初始化失败，请检查 av-min.js 版本&quot;</span>,</span><br><span class="line">        <span class="string">&quot;code-99&quot;</span>: <span class="string">&quot;Waline 初始化失败，请检查 init 中的`el`元素.&quot;</span>,</span><br><span class="line">        <span class="string">&quot;code-100&quot;</span>: <span class="string">&quot;Waline 初始化失败，请检查你的 AppId 和 AppKey.&quot;</span>,</span><br><span class="line">        <span class="string">&quot;code-140&quot;</span>: <span class="string">&quot;今日 API 调用总次数已超过开发版限制.&quot;</span>,</span><br><span class="line">        <span class="string">&quot;code-401&quot;</span>: <span class="string">&quot;未经授权的操作，请检查你的 AppId 和 AppKey.&quot;</span>,</span><br><span class="line">        <span class="string">&quot;code-403&quot;</span>: <span class="string">&quot;访问被 API 域名白名单拒绝，请检查你的安全域名设置.&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    new <span class="built_in">Waline</span>(&#123;</span><br><span class="line">        el: &quot;#waline&quot;, // 初始化 Waline 挂载器</span><br><span class="line">        avatarCDN: &quot;https://sdn.geekzu.org/avatar/&quot;, // 设置 Gravatar 头像 CDN 地址</span><br><span class="line">        copyright: true, // Waline 版权信息</span><br><span class="line">        dark: &quot;auto&quot;, // 适配暗黑模式</span><br><span class="line">        highlight: true, // 代码高亮</span><br><span class="line">        locale, // 自定义语言 i18n，请在上面 locale 中修改内容</span><br><span class="line">        requiredMeta: [&quot;nick&quot;, &quot;mail&quot;], // 必填项</span><br><span class="line">        serverURL: &quot;https://tcb.eallion.com/waline&quot;, // Waline 的服务端地址，末尾勿加 “/”</span><br><span class="line">        visitor: true, // 开启访问量统计</span><br><span class="line">        wordLimit: <span class="number">0</span>, // 评论字数限制，<span class="number">0</span> 为无限制</span><br><span class="line">    &#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&#123;&#123;- end &#125;&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- Twikoo --&gt;</span><br><span class="line">&#123;&#123;- if <span class="selector-class">.Site</span><span class="selector-class">.Params</span><span class="selector-class">.twikoo</span><span class="selector-class">.enable</span> -&#125;&#125;</span><br><span class="line">&lt;<span class="selector-tag">div</span> class=&quot;pagination__title&quot;&gt;</span><br><span class="line">    &lt;<span class="selector-tag">span</span> class=&quot;pagination__title-h&quot;&gt;精彩评论&lt;/<span class="selector-tag">span</span>&gt;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">div</span> id=&quot;tcomment&quot;&gt;&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">&lt;script <span class="attribute">src</span>=&quot;https://cdn.jsdelivr.net/npm/twikoo@&#123;&#123; <span class="selector-class">.Site</span><span class="selector-class">.Params</span><span class="selector-class">.twikoo</span><span class="selector-class">.version</span> &#125;&#125;/dist/twikoo<span class="selector-class">.all</span><span class="selector-class">.min</span><span class="selector-class">.js</span>&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;!-- &lt;script&gt;window<span class="selector-class">.TWIKOO_MAGIC_PATH</span>=&quot;共用评论区的名称&quot;&lt;/script&gt; --&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    twikoo<span class="selector-class">.init</span>(&#123;</span><br><span class="line">        envId: &quot;eallion-<span class="number">8</span>gkunp4re49bae66&quot;,</span><br><span class="line">        el: &quot;#tcomment&quot;,</span><br><span class="line">        path: &#x27;window.TWIKOO_MAGIC_PATH||window.location.pathname&#x27;,</span><br><span class="line">        onCommentLoaded: function () &#123;</span><br><span class="line">            $(&quot;.tk-content img:not(.tk-avatar-img)&quot;)<span class="selector-class">.each</span>(function () &#123;</span><br><span class="line">                <span class="selector-tag">var</span> _b = $(&quot;&lt;a&gt;&lt;/a&gt;&quot;)<span class="selector-class">.attr</span>(&quot;href&quot;, this.src);</span><br><span class="line">                $(this)<span class="selector-class">.wrap</span>(_b);</span><br><span class="line">            &#125;)</span><br><span class="line">            $(&quot;.tk-content a[rel!=link]:has(img)&quot;)<span class="selector-class">.slimbox</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&#123;&#123;- end &#125;&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- DisqusJS --&gt;</span><br><span class="line">&#123;&#123;- if <span class="selector-class">.Site</span><span class="selector-class">.Params</span><span class="selector-class">.disqus</span><span class="selector-class">.enable</span> -&#125;&#125;</span><br><span class="line">&lt;<span class="selector-tag">div</span> id=&quot;disqus_thread&quot;&gt;&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">&#123;&#123;- if <span class="selector-class">.Site</span><span class="selector-class">.Params</span><span class="selector-class">.disqus</span><span class="selector-class">.proxy</span> -&#125;&#125;</span><br><span class="line">&lt;script <span class="attribute">src</span>=&quot;https://cdn.jsdelivr.net/npm/disqusjs@&#123;&#123; <span class="selector-class">.Site</span><span class="selector-class">.Params</span><span class="selector-class">.disqus</span><span class="selector-class">.version</span> &#125;&#125;/dist/disqus<span class="selector-class">.js</span>&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="selector-tag">var</span> dsqjs = new <span class="built_in">DisqusJS</span>(&#123;</span><br><span class="line">        shortname: &quot;eallion&quot;,</span><br><span class="line">        siteName: &quot;&#123;&#123; .Site.Params.title &#125;&#125;&quot;,</span><br><span class="line">        identifier:</span><br><span class="line">            &#x27;&#123;&#123; if .Params.identifier &#125;&#125;&#123;&#123; trim .Params.identifier &quot;/&quot; &#125;&#125;&#123;&#123; else &#125;&#125;&#123;&#123; trim .RelPermalink &quot;/&quot; &#125;&#125;&#123;&#123; end &#125;&#125;&#x27;,</span><br><span class="line">        url: &#x27;&#123;&#123; if .Params.identifier &#125;&#125;&quot;&#123;&#123; trim .Site.BaseURL &quot;/&quot; &#125;&#125;&#123;&#123; .Params.identifier &#125;&#125;&quot;&#123;&#123; else &#125;&#125;&#123;&#123; .Permalink &#125;&#125;&#123;&#123; end &#125;&#125;&#x27;,</span><br><span class="line">        title: &quot;&#123;&#123; .Title &#125;&#125;&quot;,</span><br><span class="line">        api: &quot;https://disqus.skk.moe/disqus/&quot;,</span><br><span class="line">        apikey: &quot;fF9m3DwDSmNQ2g5DIpuWElDaQTx1ofpMSSW8JeKaB2loVBExeInmMbaEGeLs7lOL&quot;,</span><br><span class="line">        admin: &quot;eallion&quot;,</span><br><span class="line">        adminLabel: &quot;&quot;,</span><br><span class="line">        nocomment: &quot;&quot;,</span><br><span class="line">    &#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&#123;&#123;- else -&#125;&#125; &#123;&#123;- <span class="variable">$script</span> := printf `</span><br><span class="line">&lt;script defer src=<span class="string">&quot;https://%s.disqus.com/embed.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">` .Site.Params.comment.disqus.shortname -&#125;&#125; &#123;&#123;- end -&#125;&#125;</span><br><span class="line">&lt;noscript&gt;</span><br><span class="line">    Please enable JavaScript to view the</span><br><span class="line">    &lt;<span class="selector-tag">a</span> href=&quot;https://disqus.com/?ref_noscript<span class="string">&quot;&gt;comments powered by Disqus.&lt;/a&gt;</span></span><br><span class="line"><span class="string">&lt;/noscript&gt;</span></span><br><span class="line"><span class="string">&#123;&#123;- end -&#125;&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;!-- Utterances --&gt;</span></span><br><span class="line"><span class="string">&#123;&#123;- if .Site.Params.utterances.enable -&#125;&#125;</span></span><br><span class="line"><span class="string">&lt;script</span></span><br><span class="line"><span class="string">    src=&quot;</span>https://utteranc.es/client.js<span class="string">&quot;</span></span><br><span class="line"><span class="string">    repo=&quot;</span>eallion/blog<span class="string">&quot;</span></span><br><span class="line"><span class="string">    issueterm=&quot;</span>url<span class="string">&quot;</span></span><br><span class="line"><span class="string">    label=&quot;</span>Comments<span class="string">&quot;</span></span><br><span class="line"><span class="string">    theme=&quot;</span>github-light<span class="string">&quot;</span></span><br><span class="line"><span class="string">    crossorigin=&quot;</span>anonymous<span class="string">&quot;</span></span><br><span class="line"><span class="string">    async</span></span><br><span class="line"><span class="string">&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">&#123;&#123;- end -&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="更改分类、标签显示中文"><a href="#更改分类、标签显示中文" class="headerlink" title="更改分类、标签显示中文"></a>更改分类、标签显示中文</h2><ol>
<li><code>content</code>目录下新建<code>categories\_index.md</code>:</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">&quot;分类&quot;</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li><code>content</code>目录下新建<code>tags\_index.md</code>:</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">&quot;标签&quot;</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li><code>posts</code>目录下新建<code>posts\_index.md</code>:</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">&quot;文章&quot;</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure>

<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://github.com/adityatelange/hugo-PaperMod/">1.hugo-PaperMod</a></li>
<li><a href="https://404gle.cn/">2.ĀKURAI’s</a></li>
<li><a href="https://github.com/akuraito/blog">3.akuraito&#x2F;blog</a></li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>hugo</tag>
      </tags>
  </entry>
  <entry>
    <title>linux利用crontab设置定时任务</title>
    <url>/archives/964093b3/</url>
    <content><![CDATA[<h2 id="更改时区"><a href="#更改时区" class="headerlink" title="更改时区"></a>更改时区</h2><p>如果你不知道服务器当前时间，可以使用下面的命令，查看当前时间：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">date -R</span><br></pre></td></tr></table></figure>

<p>修改当前时区为上海：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo timedatectl set-timezone Asia/Shanghai</span><br></pre></td></tr></table></figure>

<p>再次不带任何选项参数调用 <code>timedatectl </code>命令，打印系统当前设置的时区即可：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">timedatectl</span><br></pre></td></tr></table></figure>

<h2 id="查看定时任务"><a href="#查看定时任务" class="headerlink" title="查看定时任务"></a>查看定时任务</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">crontab -l</span><br></pre></td></tr></table></figure>

<h2 id="编辑定时任务"><a href="#编辑定时任务" class="headerlink" title="编辑定时任务"></a>编辑定时任务</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure>
<p>第一个*是分钟</p>
<p>第二个*是小时</p>
<p>第三个*是日期</p>
<p>第四个*是月份</p>
<p>第五个*是星期(0-6)</p>
<p><strong>例如：每个星期一凌晨3点自动重启</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">0 3 * * 1  /sbin/reboot</span><br></pre></td></tr></table></figure>
<h2 id="使用实例"><a href="#使用实例" class="headerlink" title="使用实例"></a>使用实例</h2><p>每天，每月，每年 定时启动:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">每五分钟执行  */<span class="number">5</span> * * * *</span><br><span class="line"></span><br><span class="line">每小时执行     <span class="number">0</span> * * * *</span><br><span class="line"></span><br><span class="line">每天执行        <span class="number">0</span> <span class="number">0</span> * * *</span><br><span class="line"></span><br><span class="line">每周执行       <span class="number">0</span> <span class="number">0</span> * * <span class="number">0</span></span><br><span class="line"></span><br><span class="line">每月执行        <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> * *</span><br><span class="line"></span><br><span class="line">每年执行       <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> *</span><br></pre></td></tr></table></figure>

<p>crontab时间举例：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"># 每天早上<span class="number">6</span>点 </span><br><span class="line"><span class="number">0</span> <span class="number">6</span> * * * echo <span class="string">&quot;Good morning.&quot;</span> &gt;&gt; <span class="regexp">/tmp/</span>test.<span class="property">txt</span> <span class="comment">//注意单纯echo，从屏幕上看不到任何输出，因为cron把任何输出都email到root的信箱了。</span></span><br><span class="line"></span><br><span class="line"># 每两个小时 </span><br><span class="line"><span class="number">0</span> *<span class="regexp">/2 * * * echo &quot;Have a break now.&quot; &gt;&gt; /</span>tmp/test.<span class="property">txt</span>  </span><br><span class="line"></span><br><span class="line"># 晚上<span class="number">11</span>点到早上<span class="number">8</span>点之间每两个小时和早上八点 </span><br><span class="line"><span class="number">0</span> <span class="number">23</span>-<span class="number">7</span>/<span class="number">2</span>，<span class="number">8</span> * * * echo <span class="string">&quot;Have a good dream&quot;</span> &gt;&gt; <span class="regexp">/tmp/</span>test.<span class="property">txt</span></span><br><span class="line"></span><br><span class="line"># 每个月的<span class="number">4</span>号和每个礼拜的礼拜一到礼拜三的早上<span class="number">11</span>点 </span><br><span class="line"><span class="number">0</span> <span class="number">11</span> <span class="number">4</span> * <span class="number">1</span>-<span class="number">3</span> command line</span><br><span class="line"></span><br><span class="line"># <span class="number">1</span>月<span class="number">1</span>日早上<span class="number">4</span>点 </span><br><span class="line"><span class="number">0</span> <span class="number">4</span> <span class="number">1</span> <span class="number">1</span> * command line <span class="variable constant_">SHELL</span>=<span class="regexp">/bin/</span>bash <span class="variable constant_">PATH</span>=<span class="regexp">/sbin:/</span><span class="attr">bin</span>:<span class="regexp">/usr/</span><span class="attr">sbin</span>:<span class="regexp">/usr/</span>bin <span class="variable constant_">MAILTO</span>=root <span class="comment">//如果出现错误，或者有数据输出，数据作为邮件发给这个帐号 HOME=/ </span></span><br><span class="line"></span><br><span class="line"># 每小时（第一分钟）执行/etc/cron.<span class="property">hourly</span>内的脚本</span><br><span class="line"><span class="number">01</span> * * * * root run-parts /etc/cron.<span class="property">hourly</span></span><br><span class="line"></span><br><span class="line"># 每天（凌晨<span class="number">4</span>：<span class="number">02</span>）执行/etc/cron.<span class="property">daily</span>内的脚本</span><br><span class="line"><span class="number">02</span> <span class="number">4</span> * * * root run-parts /etc/cron.<span class="property">daily</span> </span><br><span class="line"></span><br><span class="line"># 每星期（周日凌晨<span class="number">4</span>：<span class="number">22</span>）执行/etc/cron.<span class="property">weekly</span>内的脚本</span><br><span class="line"><span class="number">22</span> <span class="number">4</span> * * <span class="number">0</span> root run-parts /etc/cron.<span class="property">weekly</span> </span><br><span class="line"></span><br><span class="line"># 每月（<span class="number">1</span>号凌晨<span class="number">4</span>：<span class="number">42</span>）去执行/etc/cron.<span class="property">monthly</span>内的脚本 </span><br><span class="line"><span class="number">42</span> <span class="number">4</span> <span class="number">1</span> * * root run-parts /etc/cron.<span class="property">monthly</span> </span><br><span class="line"></span><br><span class="line"># 注意:  <span class="string">&quot;run-parts&quot;</span>这个参数了，如果去掉这个参数的话，后面就可以写要运行的某个脚本名，而不是文件夹名。 　 </span><br><span class="line"></span><br><span class="line"># 每天的下午<span class="number">4</span>点、<span class="number">5</span>点、<span class="number">6</span>点的<span class="number">5</span> min、<span class="number">15</span> min、<span class="number">25</span> min、<span class="number">35</span> min、<span class="number">45</span> min、<span class="number">55</span> min时执行命令。 </span><br><span class="line"><span class="number">5</span>，<span class="number">15</span>，<span class="number">25</span>，<span class="number">35</span>，<span class="number">45</span>，<span class="number">55</span> <span class="number">16</span>，<span class="number">17</span>，<span class="number">18</span> * * * command</span><br><span class="line"></span><br><span class="line"># 每周一，三，五的下午<span class="number">3</span>：<span class="number">00</span>系统进入维护状态，重新启动系统。</span><br><span class="line"><span class="number">00</span> <span class="number">15</span> * *<span class="number">1</span>，<span class="number">3</span>，<span class="number">5</span> shutdown -r +<span class="number">5</span></span><br><span class="line"></span><br><span class="line"># 每小时的<span class="number">10</span>分，<span class="number">40</span>分执行用户目录下的innd/bbslin这个指令： </span><br><span class="line"><span class="number">10</span>，<span class="number">40</span> * * * * innd/bbslink </span><br><span class="line"></span><br><span class="line"># 每小时的<span class="number">1</span>分执行用户目录下的bin/account这个指令： </span><br><span class="line"><span class="number">1</span> * * * * bin/account</span><br><span class="line"></span><br><span class="line"># 每天早晨三点二十分执行用户目录下如下所示的两个指令（每个指令以;分隔）： </span><br><span class="line"><span class="number">203</span> * * * （/bin/rm -f expire.<span class="property">ls</span> logins.<span class="property">bad</span>;bin/expire$#@<span class="number">62</span>;expire.1st）</span><br><span class="line"></span><br><span class="line"># 每<span class="number">1</span>分钟执行一次myCommand</span><br><span class="line">* * * * * myCommand</span><br><span class="line"></span><br><span class="line"># 每小时的第<span class="number">3</span>和第<span class="number">15</span>分钟执行</span><br><span class="line"><span class="number">3</span>,<span class="number">15</span> * * * * myCommand</span><br><span class="line"></span><br><span class="line"># 在上午<span class="number">8</span>点到<span class="number">11</span>点的第<span class="number">3</span>和第<span class="number">15</span>分钟执行</span><br><span class="line"><span class="number">3</span>,<span class="number">15</span> <span class="number">8</span>-<span class="number">11</span> * * * myCommand</span><br><span class="line"></span><br><span class="line"># 每隔两天的上午<span class="number">8</span>点到<span class="number">11</span>点的第<span class="number">3</span>和第<span class="number">15</span>分钟执行</span><br><span class="line"><span class="number">3</span>,<span class="number">15</span> <span class="number">8</span>-<span class="number">11</span> */<span class="number">2</span>  *  * myCommand</span><br><span class="line"></span><br><span class="line"># 每周一上午<span class="number">8</span>点到<span class="number">11</span>点的第<span class="number">3</span>和第<span class="number">15</span>分钟执行</span><br><span class="line"><span class="number">3</span>,<span class="number">15</span> <span class="number">8</span>-<span class="number">11</span> * * <span class="number">1</span> myCommand</span><br><span class="line"></span><br><span class="line"># 每晚的<span class="number">21</span>:<span class="number">30</span>重启smb</span><br><span class="line"><span class="number">30</span> <span class="number">21</span> * * * <span class="regexp">/etc/i</span>nit.<span class="property">d</span>/smb restart</span><br><span class="line"></span><br><span class="line"># 每月<span class="number">1</span>、<span class="number">10</span>、<span class="number">22</span>日的<span class="number">4</span> : <span class="number">45</span>重启smb</span><br><span class="line"><span class="number">45</span> <span class="number">4</span> <span class="number">1</span>,<span class="number">10</span>,<span class="number">22</span> * * <span class="regexp">/etc/i</span>nit.<span class="property">d</span>/smb restart</span><br><span class="line"></span><br><span class="line"># 每周六、周日的<span class="number">1</span> : <span class="number">10</span>重启smb</span><br><span class="line"><span class="number">10</span> <span class="number">1</span> * * <span class="number">6</span>,<span class="number">0</span> /etc/init.<span class="property">d</span>/smb restart</span><br><span class="line"></span><br><span class="line"># 每天<span class="number">18</span> : <span class="number">00</span>至<span class="number">23</span> : <span class="number">00</span>之间每隔<span class="number">30</span>分钟重启smb</span><br><span class="line"><span class="number">0</span>,<span class="number">30</span> <span class="number">18</span>-<span class="number">23</span> * * * <span class="regexp">/etc/i</span>nit.<span class="property">d</span>/smb restart</span><br><span class="line"></span><br><span class="line"># 每星期六的晚上<span class="number">11</span> : <span class="number">00</span> pm重启smb</span><br><span class="line"><span class="number">0</span> <span class="number">23</span> * * <span class="number">6</span> /etc/init.<span class="property">d</span>/smb restart</span><br><span class="line"></span><br><span class="line"># 每一小时重启smb</span><br><span class="line">* *<span class="regexp">/1 * * * /</span>etc/init.<span class="property">d</span>/smb restart</span><br><span class="line"></span><br><span class="line"># 晚上<span class="number">11</span>点到早上<span class="number">7</span>点之间，每隔一小时重启smb</span><br><span class="line"><span class="number">0</span> <span class="number">23</span>-<span class="number">7</span> * * * <span class="regexp">/etc/i</span>nit.<span class="property">d</span>/smb restart</span><br></pre></td></tr></table></figure>

<h2 id="开机自动运行脚本"><a href="#开机自动运行脚本" class="headerlink" title="开机自动运行脚本"></a>开机自动运行脚本</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">@reboot /root/s.sh</span><br></pre></td></tr></table></figure>

<p>更多查看：<a href="/archives/6c31209c/#%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8kkapi">开机启动 kkapi</a></p>
<h2 id="ChatGPT设置定时任务"><a href="#ChatGPT设置定时任务" class="headerlink" title="ChatGPT设置定时任务"></a>ChatGPT设置定时任务</h2><blockquote>
<p>PS：ChatGPT有时给出的答案可能是错误的，需要验证：<a href="https://crontab.guru/">crontab guru</a></p>
</blockquote>
<p><strong>1.提问：每隔2天运行一次</strong></p>
<p>回答：要设置一个每隔2天运行一次的cron作业，你可以使用以下cron表达式：</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">0 0 <span class="emphasis">*/2 *</span> <span class="emphasis">*</span></span><br></pre></td></tr></table></figure>

<p>解析这个cron表达式的含义如下：</p>
<ul>
<li>第一个字段（<code>0</code>）表示cron作业运行的分钟数（在这种情况下，设置为0，表示整点）。</li>
<li>第二个字段（<code>0</code>）表示cron作业运行的小时数（在这种情况下，设置为0，表示午夜）。</li>
<li>第三个字段（<code>*/2</code>）表示月份中的日期。<code>*/2</code> 表示每隔2天运行一次。</li>
<li>第四个字段（<code>*</code>）表示月份，设置为<code>*</code>，表示任意月份。</li>
<li>第五个字段（<code>*</code>）表示星期几，也设置为<code>*</code>，表示任意星期几。</li>
</ul>
<p>使用这个cron表达式，你的作业将在每隔2天的午夜运行一次。根据你的具体需求，可以调整时间（前两个字段）来适应你的要求。</p>
<p><strong>2.每隔48小时运行一次</strong></p>
<p>要设置一个每隔48小时运行一次的cron作业，你可以使用以下cron表达式：</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">0 <span class="emphasis">*/48 *</span> <span class="emphasis">* *</span></span><br></pre></td></tr></table></figure>

<p>这个cron表达式的含义如下：</p>
<ul>
<li>第一个字段（<code>0</code>）表示cron作业运行的分钟数（在这种情况下，设置为0）。</li>
<li>第二个字段（<code>*/48</code>）表示小时数。<code>*/48</code> 表示每隔48小时运行一次。</li>
<li>第三个字段（<code>*</code>）表示月份中的日期，设置为<code>*</code>，表示任意日期。</li>
<li>第四个字段（<code>*</code>）表示月份，设置为<code>*</code>，表示任意月份。</li>
<li>第五个字段（<code>*</code>）表示星期几，设置为<code>*</code>，表示任意星期几。</li>
</ul>
<p>使用这个cron表达式，你的作业将在每隔48小时运行一次。请注意，这个表达式不是严格意义上的每隔48小时，而是以作业开始时间为基准，再加上48小时的间隔运行。因此，如果作业在一个特定时间点启动，它将在启动后的48小时再次运行。</p>
<p>3.输入<code>* */48 * * *</code></p>
<p><code>* */48 * * *</code> 是一个有效的cron表达式，它表示每隔48小时运行一次。</p>
<p>让我们对这个cron表达式进行解析：</p>
<ul>
<li>第一个字段（<code>*</code>）表示cron作业运行的分钟数，这里设置为<code>*</code>表示每分钟都匹配。</li>
<li>第二个字段（<code>*/48</code>）表示cron作业运行的小时数，<code>*/48</code> 表示每隔48小时运行一次。</li>
<li>第三个字段（<code>*</code>）表示月份中的日期，设置为<code>*</code>表示任意日期。</li>
<li>第四个字段（<code>*</code>）表示月份，设置为<code>*</code>表示任意月份。</li>
<li>第五个字段（<code>*</code>）表示星期几，设置为<code>*</code>表示任意星期几。</li>
</ul>
<p>使用这个cron表达式，你的作业将在每隔48小时运行一次。无论何时启动作业，它都会在每个完整的48小时周期后再次运行。请注意，这个表达式不是严格意义上的每隔48小时，而是以作业启动时间为基准，再加上48小时的间隔运行。</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://crontab.guru/">0.crontab guru</a></li>
<li><a href="https://blog.csdn.net/qq_22823581/article/details/80783835">1.Linux之crontab定时任务</a></li>
<li><a href="https://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/crontab.html">2.crontab 定时任务</a></li>
<li><a href="https://blog.csdn.net/qq_22823581/article/details/80783835">3.crontab 每天，每月，每年   定时启动</a></li>
<li><a href="https://www.cnblogs.com/yychuyu/p/13095732.html">4.Linux系统如何设置开机自动运行脚本</a></li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>office更改默认字体</title>
    <url>/archives/144e85ab/</url>
    <content><![CDATA[<p>  这里以<code>office2021</code>为例</p>
<h3 id="word"><a href="#word" class="headerlink" title="word"></a>word</h3><p>方法一：</p>
<p>1.在开始选项卡找到正文。</p>
<p>2.正文右键，点击修改。</p>
<p>3.设定格式之后，点击基于该模板的新文档，并且点击确定。</p>
<p>方法二：</p>
<p>1.切换到设计选项卡</p>
<p>2.字体—自定义字体—设为默认值</p>
<h3 id="excel"><a href="#excel" class="headerlink" title="excel"></a>excel</h3><p>1.新建Excel文档，默认的字体在“文件-选项-常规-新建工作簿时”的设置中指定的</p>
<h3 id="ppt"><a href="#ppt" class="headerlink" title="ppt"></a>ppt</h3><p>1.新建一个空白演示文稿。</p>
<p>2.单击工具栏上的”<strong>视图</strong>“，然后单击“<strong>幻灯片母版</strong>”。</p>
<p>3.找到”<strong>字体</strong>“，在下拉选项框中选择”<strong>自定义字体</strong>“。</p>
<p>4.修改中文和西文字体，保存，然后关闭母版视图。</p>
<p>5.单击“<strong>文件</strong>”&gt;“<strong>另存为</strong>”，将文件名改为”<strong>blank</strong>“，保存类型改为” <strong>PowerPoint模板</strong>“。注意：文件名一定是”<strong>blank</strong>“和保存类型一定是” <strong>PowerPoint模板</strong>“。</p>
<p>6.再打开”<strong>资源管理器</strong>“，”<strong>查看</strong>“→“<strong>显示“→</strong>勾选<strong>”隐藏的项目“。（别关闭第5步的窗口）</strong></p>
<p>7.看回第5步的”<strong>另存为</strong>“的界面，手动更改保存的路径：<code>C:\Users\&lt;用户名&gt;\AppData\Roaming\Microsoft\Templates</code> ，然后单击保存完成默认字体的设置。</p>
<p>随意打开一个新的演示文稿，会看到默认字体已变为微软雅黑。</p>
<p>在开始菜单中会多一个名为”Default Theme“的ppt模板，以后新建ppt就单击这个就可以。</p>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li><a href="https://blog.csdn.net/Williamcsj/article/details/120688661">Word——永久修改默认标题和正文样式</a></li>
<li><a href="https://www.luyouqi.com/shezhi/30957.html">如何设置修改Excel默认字体</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/556010400">修改PPT默认字体方法</a></li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>excel</tag>
        <tag>word</tag>
        <tag>ppt</tag>
      </tags>
  </entry>
  <entry>
    <title>Ps2020更换照片底色</title>
    <url>/archives/c327291f/</url>
    <content><![CDATA[<p> 更换登记照底色的方法网上有多种，这里先记录一种，以PS2020为例。</p>
<p>1.左侧工具栏选择<code>选择</code>工具，然后顶部工具栏先点击<code>选择主体</code>，然后选择<code>选择并遮住</code>，接着右侧属性工具栏勾选<code>净化颜色</code>，确定。</p>
<p>2.新建一图层，调整背景色，按<code>Ctrl+Delete</code>填充颜色，最后将图片移至最上层。</p>
<p>3.要更改背景色颜色，只需选择颜色图层，选择合适的颜色填充即可。</p>
<p>其他方法：</p>
<p>1、用魔棒工具快速把蓝底框选出来，Ctrl+Shift+I 反选，把人像抠出。</p>
<p>2、在图层下新建图层，填充白色，这时候你会看到人像的四周还有蓝边，不用担心，我们下一步就来调整。</p>
<p>3、这里执行，选择——选择并遮住，把净化颜色勾上，用画笔擦拭边缘，擦拭完按确认。</p>
<p>参考:</p>
<ul>
<li><p><a href="https://www.bilibili.com/video/BV1Q741147i4/">1.ps2020超快速更换证件照背景颜色的</a></p>
</li>
<li><p><a href="https://zhuanlan.zhihu.com/p/97560952">2.PS如何给证件照换底色？</a></p>
</li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>ps</tag>
      </tags>
  </entry>
  <entry>
    <title>pr学习笔记</title>
    <url>/archives/968db8c4/</url>
    <content><![CDATA[<p> 决定把pr系统地过一遍，看能不能坚持下来。</p>
<p>1.源窗口，<code>i</code>标记入点，<code>o</code>标记出点，可以将需要的一小段素材拖到视频轨道。      </p>
<p>2.<code>Shift+m</code>：跳转到下一标记点；<code>Ctrl+Shirt+m</code>：跳转到上一标记点。</p>
<p>3.按住<code>Alt</code>键，选中音频，再按<code>Delete</code>键，可以快速删除音频。</p>
<p>4.<code>波纹删除</code>可以快速删除两端素材之间的空白，不过会移动标记点，为了使标记点不移动，这时就要右键删除，再鼠标拖动、拼接素材。  </p>
<p>5.音乐鼓点节拍插件BeatEdit</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>pr</tag>
      </tags>
  </entry>
  <entry>
    <title>upptime-利用Github-Actions检测网站运行状态</title>
    <url>/archives/b32c2189/</url>
    <content><![CDATA[<h2 id="创建-upptime-源"><a href="#创建-upptime-源" class="headerlink" title="创建 upptime 源"></a>创建 upptime 源</h2><ol>
<li>进入 <a href="https://github.com/upptime/upptime">upptime – GitHub</a> ，点击 Use this template。</li>
<li>Create a new repository from upptime，注意勾选<code>Include all branches</code>。</li>
<li>进入源设置，下拉到 GitHub Pages 选项，确认 Source 已经设置为 gh-pages 分支。</li>
</ol>
<h2 id="设置-PAT"><a href="#设置-PAT" class="headerlink" title="设置 PAT"></a>设置 PAT</h2><ol>
<li>新建 <code>Personal access token</code>。</li>
</ol>
<ul>
<li>进入 GitHub 账户 Setttings – Developer settings – Personal access token，点击 Generate new token</li>
<li>新建 token，权限勾选 repo 和 workflow</li>
<li>完成后复制 token</li>
</ul>
<ol start="2">
<li>进入源的设置页面，选择 Secrets，新建 Secret。</li>
</ol>
<ul>
<li>将名称设置为 <code>GH_PAT</code> 并填入 token，保存</li>
</ul>
<h2 id="配置并运行-upptime"><a href="#配置并运行-upptime" class="headerlink" title="配置并运行 upptime"></a>配置并运行 upptime</h2><ol>
<li>配置 upptime</li>
</ol>
<ul>
<li>打开源根目录下的 .upptimerc.yml，编辑以下内容：</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Change these first</span></span><br><span class="line"><span class="attr">owner:</span> <span class="string">iwyang</span> <span class="comment"># Your GitHub organization or username, where this repository lives(更改用户名)</span></span><br><span class="line"><span class="attr">repo:</span> <span class="string">check</span> <span class="comment"># The name of this repository（更改仓库名）</span></span><br><span class="line"></span><br><span class="line"><span class="attr">sites:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Bore&#x27;s</span> <span class="string">Notes</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://bore.vip</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">ConstOwn</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://blog.juanertu.com</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="number">01</span><span class="string">小丁的个人博客</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://tding.top</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Xu&#x27;s</span> <span class="string">Blog</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://hasaik.com</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="number">02</span><span class="string">知行志</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://baozi.fun</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Takagi</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://lixingyong.com</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="number">03</span><span class="string">千与千寻</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://www.chihiro.org.cn</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Bill</span> <span class="string">Yang&#x27;s</span> <span class="string">Blog</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://blog.bill.moe</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Sanarous&#x27;s</span> <span class="string">Blog</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://bestzuo.cn</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">JACK小桔子的小屋</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://jackxjz.top</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="number">04</span><span class="string">若只如初见</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://joyli.net.cn</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="number">05</span><span class="string">大大的小蜗牛</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://eallion.com</span></span><br><span class="line"></span><br><span class="line"><span class="attr">status-website:</span></span><br><span class="line">  <span class="comment"># Add your custom domain name, or remove the `cname` line if you don&#x27;t have a domain</span></span><br><span class="line">  <span class="comment"># Uncomment the `baseUrl` line if you don&#x27;t have a custom domain and add your repo name there</span></span><br><span class="line">  <span class="comment"># cname: demo.upptime.js.org （如果没有自己的域名，则注释掉cname，取消注释baseUrl）</span></span><br><span class="line">  <span class="attr">baseUrl:</span> <span class="string">/check</span></span><br><span class="line">  <span class="attr">logoUrl:</span> <span class="string">https://raw.githubusercontent.com/upptime/upptime.js.org/master/static/img/icon.svg</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">Upptime</span></span><br><span class="line">  <span class="attr">introTitle:</span> <span class="string">&quot;**Upptime** is the open-source uptime monitor and status page, powered entirely by GitHub.&quot;</span></span><br><span class="line">  <span class="attr">introMessage:</span> <span class="string">This</span> <span class="string">is</span> <span class="string">a</span> <span class="string">sample</span> <span class="string">status</span> <span class="string">page</span> <span class="string">which</span> <span class="string">uses</span> <span class="string">**real-time**</span> <span class="string">data</span> <span class="string">from</span> <span class="string">our</span> [<span class="string">GitHub</span> <span class="string">repository</span>]<span class="string">(https://github.com/upptime/upptime).</span> <span class="literal">No</span> <span class="string">server</span> <span class="string">required</span> <span class="string">—</span> <span class="string">just</span> <span class="string">GitHub</span> <span class="string">Actions,</span> <span class="string">Issues,</span> <span class="string">and</span> <span class="string">Pages.</span> [<span class="string">**Get</span> <span class="string">your</span> <span class="string">own</span> <span class="string">for</span> <span class="string">free**</span>]<span class="string">(https://github.com/upptime/upptime)</span></span><br><span class="line">  <span class="attr">navbar:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">title:</span> <span class="string">Status</span></span><br><span class="line">      <span class="attr">href:</span> <span class="string">/check</span>  <span class="comment"># （修改Status的url为repo的名称）</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">title:</span> <span class="string">GitHub</span></span><br><span class="line">      <span class="attr">href:</span> <span class="string">https://github.com/$OWNER/$REPO</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Upptime also supports notifications, assigning issues, and more</span></span><br><span class="line"><span class="comment"># See https://upptime.js.org/docs/configuration</span></span><br></pre></td></tr></table></figure>

<p><img src="/../img/upptime-%E5%88%A9%E7%94%A8Github-Actions%E6%A3%80%E6%B5%8B%E7%BD%91%E7%AB%99%E8%BF%90%E8%A1%8C%E7%8A%B6%E6%80%81/20210802091341.jpg"></p>
<ul>
<li>编辑后 GItHub Actions 会自动更新 upptime 配置信息</li>
</ul>
<ol start="2">
<li>如果 upptime 没有成功运行，可以手动执行 GitHub Actions 中的 Setup 工作流。</li>
</ol>
<h2 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h2><ul>
<li><p><a href="https://iwyang.github.io/check">https://iwyang.github.io/check</a></p>
</li>
<li><p><a href="https://github.com/iwyang/check">https://github.com/iwyang/check</a></p>
</li>
</ul>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><p><a href="https://azhuge233.com/upptime-%E5%88%A9%E7%94%A8-github-actions-%E7%9B%91%E6%8E%A7%E7%BD%91%E7%AB%99%E8%BF%90%E8%A1%8C%E7%8A%B6%E6%80%81/">upptime – 利用 Github Actions 查看网站运行状态</a></p>
</li>
<li><p><a href="https://github.com/upptime/upptime">upptime – GitHub</a></p>
</li>
<li><p><a href="https://upptime.js.org/docs/get-started">Getting started</a></p>
</li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title>一加5T(安卓10)root&amp;EdXposed框架&amp;救砖&amp;氧OS安装ColorOS的拨号程序</title>
    <url>/archives/a2a9d239/</url>
    <content><![CDATA[<p> 首先保障手机已解锁，一加5T解锁教程：<a href="https://www.oneplusbbs.com/forum.php?mod=viewthread&tid=3829403">一加5T解锁、root、刷机教程</a></p>
<h2 id="root-amp-EdXposed框架"><a href="#root-amp-EdXposed框架" class="headerlink" title="root&amp;EdXposed框架"></a>root&amp;EdXposed框架</h2><ol>
<li>准备以下6个文件</li>
</ol>
<p>注意要先把2—6号文件放在手机根目录（如果放在文件夹里，文件夹名不能有中文）。</p>
<ol>
<li>一加手机5T工具箱 _2.2.1</li>
<li>twrp-3.3.1-0-dumpling.img  （第三方recovery镜像）</li>
<li>Magisk-v20.4(20400).zip （集root管理、模块安装等功能）</li>
<li>MM管理器(叶子修改版)v1.8.zip</li>
</ol>
<div class="note info">可在TWRP下对Magisk模块进行管理、卸载。一定要先安装这个，再安装EdXposed的两个模块，防止安装模块后手机变砖无法开机，这时就可以通过MM管理器来删除安装的模块，使用方法：在第三方rec下，点击高级→终端，输入/data/media/mm，然后回车，就可以禁用该模块了。</div>

<ol start="5">
<li><p>Riru_(Riru_-<em>Core)-v21.2(35).zip和Riru</em>-<em>EdXposed-v0.4.6.1</em>(4510)_(YAHFA)(4510).zip （EdXposed两个模块包）</p>
</li>
<li><p>EdXposedManager.apk （EdXposed管理器）</p>
</li>
<li><p>刷入第三方recover&amp;root</p>
</li>
</ol>
<ul>
<li>打开一加手机5T工具箱，选择选项8—刷写自选Recovery，按照提示把下载好的rec拖入工具箱随后回车刷入。（如果无法拖入，直接输入rec路径即可）</li>
<li>刷完会自动进入第三方Recovery（TWRP），这时候可以一次性选择2—5号文件刷入，当然如果只想root则只用刷入Magisk。</li>
<li><code>root</code>后可以利用<code>link2sd</code>这个软件，冻结或者卸载系统应用，安卓10好像只能冻结，卸载不了。具体使用方法，例如：搜索更新，将自动更新冻结，以后就收不到更新了。</li>
</ul>
<ol start="3">
<li>刷入EdXposed模块</li>
</ol>
<p>选择MM管理器以及两个模块刷入。（如果模块无法刷入，可能是命名格式问题，将模块重命名为1.zip、2.zip即可，同理上面Magisk无法刷入，也重命名一下；实在不行就在<code>Magisk</code>里刷入模块）</p>
<ol start="4">
<li><p>安装EdXposed管理器</p>
<p>重启手机安装EdXposed管理器。之后就是安装各种使用的模块了。</p>
</li>
</ol>
<h2 id="救砖"><a href="#救砖" class="headerlink" title="救砖"></a>救砖</h2><p>主要教程查看：<a href="https://www.oneplusbbs.com/forum.php?mod=viewthread&tid=4446250">一加手机全系列⑮机型线刷救砖资源★附教程</a>，这里要注意以下几点：</p>
<ul>
<li><p>1.救砖后系统恢复为安卓7。</p>
</li>
<li><p>2.要升级系统好像只能逐级升级（安卓7—安卓8—安卓9—安卓10），将下载好的官方全量包—安卓8、安卓9、安卓10放在根目录依次升级，如果想直接从安卓7升级到安卓10，会失败。这里用官方<code>recovery</code>即可。</p>
</li>
<li><p>3.升级到安卓9，出现bug—WiFi开关打不开；升级到安卓10，出现bug—相机、手电筒不能用。于是乎就卡刷了第三方ROM：<a href="https://www.oneplusbbs.com/thread-4723496-1.html">终结之作-5T Beta30 纯净优化包</a>，刷这个包用到的<code>recovery</code>是用<code>一加手机5T工具箱 _2.2.1</code>刷的自选<code>Recovery</code>—<code>twrp-3.3.1</code>。</p>
</li>
<li><p>4.<code>root</code>后可以利用<code>link2sd</code>这个软件，冻结或者卸载系统应用，安卓10好像只能冻结，卸载不了。具体使用方法，例如：搜索更新，将自动更新冻结，以后就收不到更新了。</p>
</li>
<li><p>5.网上还有线刷的方法：<a href="https://www.oneplusbbs.com/thread-4330832-1.html">【任意升降级】一加系统任意升级降级 7.1&#x2F;8.0&#x2F;8.1 新手福利</a>，不过测试未成功，不想再折腾了。</p>
</li>
<li><p>6.不知为什么升级到安卓10后，相机不能用了。以后就暂且用这个包：<a href="https://www.oneplusbbs.com/thread-4723496-1.html">终结之作-5T Beta30 纯净优化包</a>。（这里好像是在升级到安卓10出现问题后，再卡刷这个包的，不知道能否直接从安卓7卡刷，以后有机会再测试吧，当然要注意<code>recovery</code>版本不能太低了，用<code>twrp-3.3.1</code>应该没问题）。</p>
</li>
</ul>
<h2 id="氧OS安装ColorOS的拨号程序"><a href="#氧OS安装ColorOS的拨号程序" class="headerlink" title="氧OS安装ColorOS的拨号程序"></a>氧OS安装ColorOS的拨号程序</h2><ol>
<li>手机上安装apkmirror installer程序：<ul>
<li>可以直接从play市场搜索【apkmirror installer】</li>
<li>可以点击跳转play市场下载：<a href="https://play.google.com/store/apps/details?id=com.apkmirror.helper.prod">https://play.google.com/store/apps/details?id=com.apkmirror.helper.prod</a></li>
<li>可以从apk mirror网站下载apkmirror installer：<a href="https://www.apkmirror.com/apk/apkmirror/apkmirror-installer-official/">https://www.apkmirror.com/apk/apkmirror/apkmirror-installer-official/</a></li>
</ul>
</li>
<li>下载ColorOS拨号安装包（apkm格式）：<a href="https://www.apkmirror.com/apk/coloros/odialer/">https://www.apkmirror.com/apk/coloros/odialer/</a> 。</li>
<li>使用apkmirror install安装第二步下好的包即可。</li>
</ol>
<h2 id="手机使用记录"><a href="#手机使用记录" class="headerlink" title="手机使用记录"></a>手机使用记录</h2><ol>
<li>2018年2月买的，用到2021年6月</li>
<li>一加9R 2021年6月买的一加5T</li>
</ol>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://www.oneplusbbs.com/thread-5460360-1.html">1.OnePlus 5T Android 10 root亲测教程</a></li>
<li><a href="https://www.oneplusbbs.com/forum.php?mod=viewthread&tid=4662409">2.完美支持安卓10Xposed框架★EdXposed</a></li>
<li><a href="https://www.daxiaamu.com/8498/">3.一加手机刷氧OS后，如何安装ColorOS的拨号程序</a></li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>tips</tag>
      </tags>
  </entry>
  <entry>
    <title>一年级数学上册大括号问题</title>
    <url>/archives/9cf7845/</url>
    <content><![CDATA[<p> 大括号问题，是一年级数学一个必考题目，只有两种做法：加法或者减法。尽管很简单，我们依然要让孩子分清题目的不同表示方法，下面列出三种加法的表示：</p>
<blockquote>
<p>大括号表示什么意思？表示两部分合起来！<br>问号表示什么意思？表示需要求的问题！<br>这里必须要注意的地方，是问题的答案必须写在等号的右边，这也是很多孩子容易犯的错误之一。就是把算式写错了，尽管知道正确的结果，但是写的位置不对！</p>
</blockquote>
<p>用 口诀加强理解：</p>
<blockquote>
<p>大括号，小问号，</p>
<p>在一起，我会算。</p>
<p><strong>小问号，在中间</strong></p>
<p><strong>求一共，用加法</strong>。</p>
<p><strong>小问号，在一边</strong>，</p>
<p><strong>求部分，用减法</strong>。</p>
</blockquote>
<p>用这个口诀，可以加深孩子的印象。之后，我们就慢慢要给孩子用整体和部分来理解，因为这是理解加法和减法关系的基础。</p>
<p>解题步骤：</p>
<ol>
<li>看？在哪儿</li>
<li>求什么</li>
<li>加还是减</li>
</ol>
<p>参考链接：<a href="http://www.360doc.cn/mip/800320995.html">一年级数学上册《大括号问题》</a></p>
]]></content>
      <categories>
        <category>教学</category>
      </categories>
      <tags>
        <tag>一年级数学</tag>
      </tags>
  </entry>
  <entry>
    <title>一年级数学一图四式问题</title>
    <url>/archives/96ae2461/</url>
    <content><![CDATA[<blockquote>
<p>什么是“一图四式”呢？</p>
<p><strong>给出一个图，写出四个算式，两道加法算式，两道减法算式。</strong>这类数学题的目的，是为了训练一年级小学生看图的能力，以及对加减法意义的理解。</p>
</blockquote>
<p>口诀：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">一图四式题，先来数左边，再来数右边，</span><br><span class="line">两道加法题，左边加右边，右边加左边。</span><br><span class="line">两位减法题，先来数总数，</span><br><span class="line">总数减左边，就等于右边。</span><br><span class="line">总数减右边，就等于左边。</span><br></pre></td></tr></table></figure>

<p>参考链接：<a href="https://www.sohu.com/a/344323527_750537">一年级数学“一图四式”</a></p>
]]></content>
      <categories>
        <category>教学</category>
      </categories>
      <tags>
        <tag>一年级数学</tag>
      </tags>
  </entry>
  <entry>
    <title>一年级数学下册估算问题</title>
    <url>/archives/bdfef9ea/</url>
    <content><![CDATA[<p> 估算是数学里一种很重要的能力，一年级数学下册有关估算这部分内容出现在课本71页，主要讲的是两位数加两位数的进位加法的估算。首先来了解一下什么是估算，对于两位数加两位数的进位加法的估算，可以把其中一个加数看作与它最接近的“整十数”，也可以把两个加数分别看作与它们接近的“整十数”，再口算出得数。我们拿书上例题为例。淘气摘了17个苹果，笑笑摘了38个苹果，箱子能装60个苹果，让你估一估，这个箱子能装得下吗？</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">这里有三种估法，如下：</span><br><span class="line">方法一：把17看作20</span><br><span class="line">             20+38=58(个)</span><br><span class="line">            58＜60</span><br><span class="line">      答：这个箱子装得下。</span><br><span class="line">方法二：把38看作40</span><br><span class="line">             17+40=57(个)</span><br><span class="line">            57＜60</span><br><span class="line">      答：这个箱子装得下。</span><br><span class="line">方法三：把17看作20，把38看作40</span><br><span class="line">            20+40=60(个)</span><br><span class="line">            60=60</span><br><span class="line">      答：这个箱子装得下。</span><br><span class="line">总结：三种估法都是往大了估。往大了估，可以装下，实际比估计的少，所以也能装下。</span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">再看下72页练一练第1题，已知第一袋可装43颗珠子，第二袋可装19颗，第三袋能装38颗，现在70颗能穿一条项链。</span><br><span class="line">问“估一估，哪两袋珠子合起来够穿一条项链”，这里要往小了估。答案如下：</span><br><span class="line">             把43看作40</span><br><span class="line">              40+38=78(颗)</span><br><span class="line">              78＞70</span><br><span class="line">            答：第一袋和第三袋能够穿一条项链。</span><br><span class="line">总结：往小了估够70颗，实际比估计的多，肯定也够，所以第一袋和第三袋合起来能穿一条项链。</span><br></pre></td></tr></table></figure>

<p>有时也也会遇到估算类填空题：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">1.估算48+33时，可以把48看作（50），（50）+33=（83），结果是（83）。</span><br><span class="line">2.估算48+33时，可以把48看作（50），把32看作（30），结果是（80）。</span><br></pre></td></tr></table></figure>

<p>更多有关估算类的内容可以查看：</p>
<p><a href="http://blog.sina.com.cn/s/blog_81e64c020100wxdx.html">1.运用估算方法来解答应用题</a></p>
<p><a href="https://wenku.baidu.com/view/e80250c750e79b89680203d8ce2f0066f5336482.html">2.估算应用题</a></p>
]]></content>
      <categories>
        <category>教学</category>
      </categories>
      <tags>
        <tag>一年级数学</tag>
      </tags>
  </entry>
  <entry>
    <title>一年级数学下册列式计算(加数、被减数、比多比少)</title>
    <url>/archives/68d861c/</url>
    <content><![CDATA[<p>首先要记忆以下几个公式：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">加数+加数=和    </span><br><span class="line">被减数-减数=差</span><br><span class="line">和-加数=加数</span><br><span class="line">被减数-差=减数</span><br><span class="line">减数+差=被减数</span><br></pre></td></tr></table></figure>

<p>要让他们将以上几个公式，写在数学书第一页上，然后背诵。列式计算具体习题如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">1、一个加数是25，另一个加数是36，和是多少?</span><br><span class="line"></span><br><span class="line">2、两个加数都是46，和是多少？</span><br><span class="line"></span><br><span class="line">3、一个加数是37，另一个加数比它多17，和是多少？</span><br><span class="line"></span><br><span class="line">4、被减数是56，减数是39，差是多少？</span><br><span class="line"></span><br><span class="line">5、两个加数的和是87，其中的一个加数是40，另一个加数是多少？</span><br><span class="line"></span><br><span class="line">6、被减数是56，差是34，减数是多少？</span><br><span class="line"></span><br><span class="line">7、减数是27，差是49，被减数是多少？</span><br><span class="line"></span><br><span class="line">8、72与45的差，再加上38是多少？</span><br><span class="line"></span><br><span class="line">9、36与45的和，再减去42是多少？</span><br><span class="line"></span><br><span class="line">10、86比20多多少？</span><br><span class="line"></span><br><span class="line">11、一个加数由3个十和4个一组成，另一个加数由2个十和7个一组成，</span><br><span class="line">这两个加数的和是多少？</span><br><span class="line"></span><br><span class="line">12、30比90少多少？</span><br><span class="line"></span><br><span class="line">13、三个25连续相加，和是多少？</span><br><span class="line"></span><br><span class="line">14、从80里减去27，在加上25，和是多少？</span><br><span class="line"></span><br><span class="line">15、一个数是56，它比哪一个数大21，另一个数是多少？它们的和是多少？它们的和是多少？</span><br><span class="line"></span><br><span class="line">16、72和91相差多少？</span><br><span class="line"></span><br><span class="line">17、比85少39的数是多少？</span><br><span class="line"></span><br><span class="line">18、甲数是26，乙数是35，丙数是28，它们的和是多少？</span><br><span class="line"></span><br><span class="line">19、35与44的差，再加上30与16的和，得多少？</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/iwyang/pic/20200721160729.jpg"></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">列式计算</span><br><span class="line">1、67比30多多少？     2、78比70多多少？</span><br><span class="line"></span><br><span class="line">3、34比40少多少？     4、66比60小多少？</span><br><span class="line"></span><br><span class="line">5、93比90大多少？     6、 比78多9的数是多少？</span><br><span class="line"></span><br><span class="line">7、比34少6的数是多少？</span><br><span class="line"></span><br><span class="line">8、最大的一位数与最小的两位数的和是多少？差是多少？</span><br><span class="line"></span><br><span class="line">9、两个加数都是30，它们的和是多少？差是多少？</span><br><span class="line"></span><br><span class="line">10、减数是50，差是34，被减数是多少？</span><br><span class="line"></span><br><span class="line">11、减数和差都是40，被减数是多少？</span><br><span class="line"></span><br><span class="line">12、26加上34与30的差，和是多少？</span><br><span class="line"></span><br><span class="line">13、76减去21与9的和，差是多少？</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"> 一、列式计算。</span><br><span class="line">1、 一个加数是45，另一个加数是28，和是多少?</span><br><span class="line"> </span><br><span class="line">2` 40与57相差多少?                     3. 43比20多多少?</span><br><span class="line"> </span><br><span class="line">4. 两个加数都是45,和是多少?</span><br><span class="line"> </span><br><span class="line">5. 一个加数是25, 另一个加数是19, 和是多少? </span><br><span class="line"> </span><br><span class="line">6. 18与32的和是多少?    7. 被减数是50，减数是26，差是多少?</span><br><span class="line"> </span><br><span class="line">8. 62比27大多少？         9. 减数是26，被减数是32，差是几？</span><br><span class="line"> </span><br><span class="line">10. 两个加数都是34，和是多少？           11.1 8比37小多少？　　 </span><br><span class="line"></span><br><span class="line">12.23和32相差多少？             13. 比42少17的数是多少?</span><br><span class="line"> </span><br><span class="line">14. 比38多29的数是多少?           15.25比70少多少？</span><br><span class="line"></span><br><span class="line">16.减数是24，差是16，被减数是多少？    17.60比34多多少？</span><br><span class="line"></span><br><span class="line">18.25加上18，再减去24，得多少？    19.5个4相加是多少？</span><br><span class="line"></span><br><span class="line">20.60减去45，再加上26，得多少？     21、2个5连加得多少？</span><br><span class="line"></span><br><span class="line">22.最小的三位数比最大的两位数多多少？</span><br><span class="line"></span><br><span class="line">23.最大的两位数比最大的一位数多多少？</span><br><span class="line"></span><br><span class="line">24.35比100少多少？          25.两个因数都是5，积是多少？</span><br><span class="line"></span><br><span class="line">26.5乘3得多少？   27.一个因数是5，另一个因数是2，积是多少？</span><br><span class="line"> </span><br><span class="line">28.两个数的和是45，其中一个加数是13，另一个加数是多少？</span><br><span class="line"></span><br><span class="line">29.5和4相乘得多少？             30.3个5相加的和是多少？</span><br><span class="line"></span><br><span class="line">31.比28多16的数是多少？        32.比28少16的数是多少？</span><br><span class="line"></span><br><span class="line">33.减数是36，差是24，被减数是多少？</span><br><span class="line"></span><br><span class="line">34.被减数和减数都是26，差是多少？</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>题目选自：</p>
<ul>
<li><a href="https://wenku.baidu.com/view/847865f3152ded630b1c59eef8c75fbfc77d9489.html">1.一年级下数学列式计算题及答案</a></li>
<li><a href="https://www.topstudy8.com/article/57498070">2.一年级下册数学列式计算专项练习</a></li>
<li><a href="https://wenku.baidu.com/view/9be4c6a6af45b307e9719711.html?fr=search">3.小学一年级数学下册列式计算题专项训练</a></li>
</ul>
]]></content>
      <categories>
        <category>教学</category>
      </categories>
      <tags>
        <tag>一年级数学</tag>
        <tag>练习题</tag>
      </tags>
  </entry>
  <entry>
    <title>一年级数学括号最大能填几</title>
    <url>/archives/b156363c/</url>
    <content><![CDATA[<p>求“括号最大能填几”，分两步计算。例如：</p>
<p>(1)  <strong>39-(   )＞14</strong></p>
<ul>
<li><p>第一步，先想比14大1的数是几？14+1&#x3D;15；</p>
</li>
<li><p>第二步，再想39减几等于15，39-(   )&#x3D;15，答案是24。</p>
</li>
</ul>
<p>(2)  <strong>84＞(   )+12</strong></p>
<ul>
<li><p>第一步，先想比84小1的数是几，84-1&#x3D;83；</p>
</li>
<li><p>第二步，再想几加12等于83，答案是71。</p>
</li>
</ul>
<p>(3)  <strong>29+(  )＜46</strong></p>
<ul>
<li>第一步，先想比46小1的数是几，46-1&#x3D;45，是45。 </li>
<li>第二步，再想29加几等于45，45-29&#x3D;16，答案是16。</li>
</ul>
<p>更多有关“括号最大能填几”内容，可查看：<a href="https://www.sohu.com/a/358938277_100195078">括号里最大能填几？</a></p>
]]></content>
      <categories>
        <category>教学</category>
      </categories>
      <tags>
        <tag>一年级数学</tag>
      </tags>
  </entry>
  <entry>
    <title>一年级数学下册数图形有几个</title>
    <url>/archives/585d2a79/</url>
    <content><![CDATA[<p><img src="/../img/%E4%B8%80%E5%B9%B4%E7%BA%A7%E6%95%B0%E5%AD%A6%E4%B8%8B%E5%86%8C%E6%95%B0%E5%9B%BE%E5%BD%A2%E6%9C%89%E5%87%A0%E4%B8%AA/1.gif"></p>
<p><img src="/../img/%E4%B8%80%E5%B9%B4%E7%BA%A7%E6%95%B0%E5%AD%A6%E4%B8%8B%E5%86%8C%E6%95%B0%E5%9B%BE%E5%BD%A2%E6%9C%89%E5%87%A0%E4%B8%AA/2.gif"></p>
<p><img src="/../img/%E4%B8%80%E5%B9%B4%E7%BA%A7%E6%95%B0%E5%AD%A6%E4%B8%8B%E5%86%8C%E6%95%B0%E5%9B%BE%E5%BD%A2%E6%9C%89%E5%87%A0%E4%B8%AA/3.gif"></p>
<h4 id="思路："><a href="#思路：" class="headerlink" title="思路："></a>思路：</h4><p>以最后一个数三角形有几个为例：</p>
<p><img src="/../img/%E4%B8%80%E5%B9%B4%E7%BA%A7%E6%95%B0%E5%AD%A6%E4%B8%8B%E5%86%8C%E6%95%B0%E5%9B%BE%E5%BD%A2%E6%9C%89%E5%87%A0%E4%B8%AA/4.png"></p>
<ol>
<li>首先给小三角形编号：1号、2号、3号。</li>
<li>先数小三角形有几个：3个</li>
<li>再数中型三角形（ 把两个小三角形看作一个中型三角形）有几个：1号和2号是一个，2号和3号是一个，合起来是2个。</li>
<li>大三角形有1个。</li>
<li>所以一共有：3+2+1&#x3D;6（个）</li>
</ol>
<h4 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h4><p>感觉还是做个flash动画直观一些。</p>
<h4 id="参考链接："><a href="#参考链接：" class="headerlink" title="参考链接："></a>参考链接：</h4><ul>
<li><p><a href="https://v.qq.com/x/page/e084872v5rs.html">1.怎么数一数到底有几个三角形，一年级数学认识图形</a></p>
</li>
<li><p><a href="https://haokan.baidu.com/v?pd=wisenatural&vid=11256514435927699277">2.一年级下数学：如何教孩子数图形的个数，才不会漏数呢？</a></p>
</li>
<li><p><a href="https://wenku.baidu.com/view/ad88740ff5335a8103d22015.html">3.一年级数学-巧数图形</a></p>
</li>
</ul>
]]></content>
      <categories>
        <category>教学</category>
      </categories>
      <tags>
        <tag>一年级数学</tag>
      </tags>
  </entry>
  <entry>
    <title>三年级数学上册册第四单元《小树有多少棵》教学反思</title>
    <url>/archives/7273e00a/</url>
    <content><![CDATA[<p>这是三年级的第一次公开课，国庆来了第一天第一节课就开始上。本次公开课的课题是《小树有多少棵》，主要内容是探究并整十、整百数乘一位数的口算方法。在上课开始我通过“对口令”的小游戏使学生来快速进入学习状态，让他们对今天所学知识有一个初步的了解。接着就是探究整十、整百数乘一位数的口算方法，主要有以下四步：（1）先独立列出算式（2）尝试用自己喜欢的方法获得计算结果（3）交流计算方法：连加、列举法、表内乘法等（4）总结算法。纵观本次公开课主要存在以下问题：</p>
<ol>
<li><p>缺少板书，虽然多媒体课件什么都有，但是黑板上一定要有板书，其实在上课结束时我就意识到这一点。</p>
</li>
<li><p>重要的知识点总结、概念都要让学生读几遍。</p>
</li>
<li><p>数学语言不够精确，在最后总结规律时，应该说“一个乘数，另一个乘数”而不是“一个数，另一个数”</p>
</li>
<li><p>缺乏对后进生的关注。对于学困生课堂要多加关注。</p>
</li>
</ol>
]]></content>
      <categories>
        <category>教学</category>
      </categories>
      <tags>
        <tag>三年级数学</tag>
        <tag>教学反思</tag>
      </tags>
  </entry>
  <entry>
    <title>三年级数学上册册第四单元《小树有多少棵》教学设计</title>
    <url>/archives/fe24fa8e/</url>
    <content><![CDATA[<p>一、    教学目标：</p>
<p>1、探索并掌握整十、整百数乘一位数的口算方法，并能正确地进行口算。</p>
<p>2、结合具体情境，在讨论解决实际问题的过程中，培养学生提出问题和解决问题的意识和能力。</p>
<p>二、教学重点：探索并掌握整十、整百数乘一位数的口算方法，并能正确地进行计算。</p>
<p>三、教学难点：结合具体情境，体验算法的多样性，并优化出整十、整百数乘一位数的口算方法。</p>
<p>四、教学课时：1课时</p>
<p>五、教学手段：</p>
<p>六、教学过程：</p>
<p>（一）复习旧知，新知铺垫</p>
<p>1.“对口令”小游戏：在上课前，我们来玩一个“对口令”小游戏，由我来说乘法口诀前半部分，你们来说后半部分。</p>
<p>2.可能有的同学已经猜到了，今天我们要学的就与乘法口诀有关。</p>
<p>（二）创设情境，提出问题</p>
<p>1.出示书上情境图，提问：说一说你能从中得到那些数学信息。</p>
<p>2.提问：从这些数学信息中，你能提出哪些数学问题。</p>
<p>根据这些数学信息可以提出很多数学问题，今天我们就主要研究这两个数学问题：</p>
<p>（1）3捆一共多少棵？</p>
<p>（2）园林工人运走了三车树苗，一共运走了多少棵？</p>
<p>（三）探究整十数乘一位数算法</p>
<p>1．3捆一共多少棵？</p>
<p>（1）先独立列出算式；（20×3）</p>
<p>（2）尝试用自己喜欢的方法获得计算结果；（20×3&#x3D;60（棵））</p>
<p>（3）交流计算方法；（连加、列举法、表内乘法等）</p>
<p>（4）总结算法：整十数乘一位数，先用整十数0前面的数与一位数相乘，再在积的末尾添上一个0。</p>
<p>（四）探究整百数乘一位数算法</p>
<ol>
<li>园林工人运走了三车树苗，一共运走了多少棵？</li>
</ol>
<p>（1）先独立列出算式；（500×3）</p>
<p>（2）尝试用自己喜欢的方法获得计算结果；（500×3&#x3D;1500（棵）</p>
<p>（3）交流计算方法；（连加、表内乘法等）</p>
<p>（4）总结算法：整百数乘一位数，先用整百数0前面的数与一位数相乘，再在积的末尾添上两个0。</p>
<p>2.算一算，你发现了什么？</p>
<p>（两个数相乘，一个乘数不变，另一个乘数扩大10倍，积也跟着扩大10倍；另一个乘数扩大100倍，积也跟着扩大100倍。）</p>
<p>（三）扩展应用</p>
<p>1.整千数乘一位数：2000×4&#x3D;</p>
<p>2.整十数乘整十数：30×60&#x3D;</p>
<p>（四）巩固应用</p>
<p>“练一练”的第1-5题。</p>
<p>（五）回顾整理</p>
<p>通过这节课的学习，你学到了什么？</p>
<p>整十、整百数乘一位数，先用整十、整百数0前面的数与一位数相乘，再在积的末尾添上相应个数的0。</p>
<p> 七、板书设计</p>
<p>20×3&#x3D;60（棵）</p>
<p>500×3&#x3D;1500（棵）</p>
]]></content>
      <categories>
        <category>教学</category>
      </categories>
      <tags>
        <tag>三年级数学</tag>
        <tag>教学设计</tag>
      </tags>
  </entry>
  <entry>
    <title>三年级数学上册知识点总结</title>
    <url>/archives/dec02429/</url>
    <content><![CDATA[<h2 id="第一单元-混合运算"><a href="#第一单元-混合运算" class="headerlink" title="第一单元 混合运算"></a>第一单元 混合运算</h2><p>1.什么是脱式计算？脱式计算的格式？</p>
<p>像<code>5+6×5</code>这样既有加法又有乘法两种运算的算式就是综合算式。在综合算式中为了准确表示<code>先算什么，再算什么</code>，要用到脱式计算。脱式计算的格式：等号写在数字前面，不算的部分注意一定要落下来。</p>
<h2 id="第二单元-观察物体"><a href="#第二单元-观察物体" class="headerlink" title="第二单元 观察物体"></a>第二单元 观察物体</h2><p>1.观察的位置是相对，观察的画面就是相反的。</p>
<h2 id="第三单元-加与减"><a href="#第三单元-加与减" class="headerlink" title="第三单元 加与减"></a>第三单元 加与减</h2><p>1.连续减出两个数等于减出这两个数的和。</p>
<h2 id="第五单元-周长"><a href="#第五单元-周长" class="headerlink" title="第五单元 周长"></a>第五单元 周长</h2><p>1.把一个长方形平均分成两个形状相同、大小相等的小长方形，小长方形的周长是原来长方形周长的一半．（×）</p>
<p>解析：如图：长方形平均分成两个小长方形后，周长比原来增加了两条原长方形的长或者是宽，所以小长方形的周长等于原来的长方形的周长的一半与一条长（或宽）的和，原题说法错误．<br><img src="/../img/%E4%B8%89%E5%B9%B4%E7%BA%A7%E6%95%B0%E5%AD%A6%E4%B8%8A%E5%86%8C%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/202111201424614.png"></p>
<h2 id="第七单元-年月日"><a href="#第七单元-年月日" class="headerlink" title="第七单元 年月日"></a>第七单元 年月日</h2><p>判断某一年是平年还是闰年</p>
<p>1.看年份后两位数能不能被4整除，能被4整除就是闰年，不能就是平年。</p>
<p>2.整百年份看年份前两位数能否被4整除。</p>
]]></content>
      <categories>
        <category>教学</category>
      </categories>
      <tags>
        <tag>三年级数学</tag>
      </tags>
  </entry>
  <entry>
    <title>二年级数学上册知识点总结</title>
    <url>/archives/2c061816/</url>
    <content><![CDATA[<h2 id="人民币计算"><a href="#人民币计算" class="headerlink" title="人民币计算"></a>人民币计算</h2><p>10元-2元6角&#x3D;7元4角</p>
<p>解析：将10元里拿出1元当作10角，也就是将10元看成9元10角。然后就元减元，角减角。</p>
<p>5元6角+3元7角&#x3D;9元3角</p>
<p>解析：满10角要进1元，直接写成竖式比较简单。</p>
<p>6元2角-2元6角&#x3D;3元6角</p>
<p>解析：写成竖式比较简单。</p>
<h2 id="画线段"><a href="#画线段" class="headerlink" title="画线段"></a>画线段</h2><p>问题：画线段，端点是用小圆点还是小竖线？</p>
<p>答：其实，画线段用小圆点和小竖线都可以。</p>
<h2 id="难题"><a href="#难题" class="headerlink" title="难题"></a>难题</h2><p>（1）一根铁丝绕瓶子一圈多12厘米，绕瓶子两圈多4厘米，这根铁丝有多长？</p>
<p>解析：绕一圈多12cm，绕两圈多4cm。<br>           则一圈长度为12-4&#x3D;8cm<br>           铁丝长度为8+12&#x3D;20cm<br>           或8x2+4&#x3D;20cm</p>
<p>（2）有一堆积木，比60多，比70少，如果这堆积木分给一些小朋友，每人分得的块数和小朋友的人数一样多。想一想，小朋友有多少人？积木有多少块？</p>
<p>解析：这道数学题先给出了一个数字范围，积木的数量在60与70之间，具体的数字呢，不知道，不 过，要注意后面一句话:如果把这堆积木分给一些小朋友，每人分得的块数和小朋友的人数一 样多。 </p>
<p>由这句条件，可以分析得出，有几个人，每个人就有相同的几块，假设现在要求积木的总数， 就可以把这个相同的数进行相加，而求几个相同的加数是几，可以运用乘法来计算，那么，有 哪个数和自己相乘，得出的积在60与70之间呢?</p>
<p> 聪明的小学生马上就会在脑海当中进行回顾和搜索，开始联想，七七四十九，八八六十四，九 九八十一，在这其中，只有八八六十四符合条件，得数在60与70之间!</p>
]]></content>
      <categories>
        <category>教学</category>
      </categories>
      <tags>
        <tag>二年级数学</tag>
      </tags>
  </entry>
  <entry>
    <title>二年级数学下册知识点总结</title>
    <url>/archives/fbe4984e/</url>
    <content><![CDATA[<h2 id="第一单元除法"><a href="#第一单元除法" class="headerlink" title="第一单元除法"></a>第一单元除法</h2><p>除法竖式四步：一商、二乘、三减、四比。</p>
<h2 id="第二单元方向与位置"><a href="#第二单元方向与位置" class="headerlink" title="第二单元方向与位置"></a>第二单元方向与位置</h2><p>1.早晨上学，迎着太阳走，你的前面是东，后面是西，左边是北，右边是南。</p>
<p>2.我们看到的红旗是迎风飘扬的，如果刮北风，红旗会向（南）面飘扬。</p>
<p>解析：北风是从背面吹来的风，国旗应该是向风的反方向飘扬。</p>
<p>3.旗杆的影子在西面，那么太阳在（东）面。</p>
<p>解析：影子的方向总是和太阳的方向相反。</p>
<p>4.树叶茂密的一面是南面,稀疏的一面是北面</p>
<h2 id="第三单元-生活中的大数"><a href="#第三单元-生活中的大数" class="headerlink" title="第三单元 生活中的大数"></a>第三单元 生活中的大数</h2><p>1.一箱苹果不到40个，5个5个地数还多3个，6个6个地数还多3个，这箱苹果有第三个？</p>
<p>解析：</p>
<p>方法1，5个5个数：8，13，18，23，28，33，38</p>
<p> 6个6个数：9，15，21，27，33，39</p>
<p>方法2，先不考虑多的3个，刚好数完。即是5的倍数又是6的倍数 6×5&#x3D;30，多3个：30+3&#x3D;33（个）</p>
<p>方法3，最小公倍数</p>
<h2 id="第六单元-认识图形"><a href="#第六单元-认识图形" class="headerlink" title="第六单元 认识图形"></a>第六单元 认识图形</h2><p>借助三角板画直角</p>
<p>（1）先画一个点作为顶点。</p>
<p>（2）再从顶点出发画一条直直的线。</p>
<p>（3）使三角板上的直角顶点与这个点重合，一条直角边与这条直直的线重合，再从这个点出发沿三角板上的另一条直角边画一条直直的线。</p>
<p>（4）最后标出直角符号。</p>
<h2 id="第七单元-时、分、秒"><a href="#第七单元-时、分、秒" class="headerlink" title="第七单元 时、分、秒"></a>第七单元 时、分、秒</h2><p>1.求经过多长时间</p>
<p>方法一：借助钟面数格子</p>
<p>方法二：画线段图分段计算</p>
<p>方法三：结束时刻—开始时刻（竖式：如果“分钟”不够减，就要向“时”借，借1小时变成60分钟再减。）</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://www.bilibili.com/video/av242932934/">易错题，5个为一组还余3个，6个为一组也余3个，共有几个苹果</a></p>
]]></content>
      <categories>
        <category>教学</category>
      </categories>
      <tags>
        <tag>二年级数学</tag>
      </tags>
  </entry>
  <entry>
    <title>二年级数学下册第五单元《小蝌蚪的成长》教学设计</title>
    <url>/archives/1cf58c3e/</url>
    <content><![CDATA[<p>一、 教学目标：</p>
<p>1．借助数线和计数器进一步探索并掌握三位数连续退位减法的计算方法，经历与他人交流计算方法的过程，理解多位数减法的计算道理，并能正确计算。</p>
<p>2．让学生在解决问题的过程中，能独立地进行简单的、有条理的思考，体验数学与日常生活的密切联系，增强应用数学的意识。</p>
<p>二、教学重点：掌握三位数减三位数连续退位减法的计算方法，初步形成一定的计算能力。</p>
<p>三、教学难点：经历探索三位数减三位数退位减法计算方法的过程，提高学生在自主探究过程中，解决实际问题的能力。</p>
<p>四、教学课时：1课时</p>
<p>五、教学手段：</p>
<p>六、教学过程：</p>
<p>（一）创设情境，导入新课</p>
<p>1.猜谜：大脑袋，长尾巴，儿时无腿水中游。</p>
<p>后腿伸，前腿到，游来游去找妈妈。     （答案：小蝌蚪）</p>
<p>2.你们听过“小蝌蚪找妈妈”的故事吗？那么你们猜一猜是不是所有的小蝌蚪都会变成青蛙？事实上在100只小蝌蚪中，只有20只能变成青蛙。所以希望大家今后遇到小蝌蚪，要爱护它。那么今天我们这节课就一起来学习有关小蝌蚪的成长中的数学知识。</p>
<p>（二）自主探究，学习新知</p>
<p>1.出示书上表格，提问：说一说你能从中得到那些数学信息。</p>
<p>2.提问：从这些数学信息中，你能提出哪些数学问题。</p>
<p>根据这些数学信息可以提出很多数学问题，今天我们就主要研究这两个数学问题：</p>
<p>（1）东池塘有多少只蝌蚪没有变成青蛙？</p>
<p>（2）西池塘有多少只蝌蚪没有变成青蛙？</p>
<p>3．东池塘有多少只蝌蚪没有变成青蛙？</p>
<p>（1）先独立列出算式；（412-89）</p>
<p>（2）尝试用自己喜欢的方法获得计算结果；（412-89&#x3D;323（只））</p>
<p>（3）交流计算方法；（数线、拨计数器、竖式等）</p>
<p>4.西池塘有多少只蝌蚪没有变成青蛙？</p>
<p>（1）先独立列出算式；（514-126）</p>
<p>（2）尝试用自己喜欢的方法获得计算结果；（514-126&#x3D;388（只）</p>
<p>（3）交流计算方法；（数线、拨计数器、竖式等）</p>
<p>5.他们做得对吗？和同伴说一说。（左边的题是数位没有对齐，右边题是忘了退位）</p>
<p>6..小结：竖式计算三位数连续退位减法时，要注意什么？（要注意相同数位对齐，从个位算起，哪一位不够减，要向前一位借1当10，计算前一位时不要忘记先减去被借走的1。）</p>
<p>（三）巩固应用</p>
<p>独立完成“练一练”的第1、2题。</p>
<p>（四）回顾整理</p>
<p>通过这节课的学习，你学到了什么？</p>
<p>七、板书设计</p>
<p>412-89&#x3D;323（只） 514-126&#x3D;298（只）</p>
<p> <img src="/../img/%E4%BA%8C%E5%B9%B4%E7%BA%A7%E6%95%B0%E5%AD%A6%E4%B8%8B%E5%86%8C%E7%AC%AC%E4%BA%94%E5%8D%95%E5%85%83%E3%80%8A%E5%B0%8F%E8%9D%8C%E8%9A%AA%E7%9A%84%E6%88%90%E9%95%BF%E3%80%8B%E6%95%99%E5%AD%A6%E8%AE%BE%E8%AE%A1/5.jpg"></p>
]]></content>
      <categories>
        <category>教学</category>
      </categories>
      <tags>
        <tag>教学设计</tag>
        <tag>二年级数学</tag>
      </tags>
  </entry>
  <entry>
    <title>二年级数学下册第五单元《小蝌蚪的成长》教学反思</title>
    <url>/archives/90a296ba/</url>
    <content><![CDATA[<p>这是本学期我第二次上公开课，本次公开课的课题是《小蝌蚪的成长》，这是一节计算教学课。首先我用猜谜语的方式来导入新课，吸引了学生的注意力，进而引导学生以后遇到小蝌蚪要保护它，树立了学生的环保意识。在探究三位数减三位数连续退位减法的计算方法时，我充分鼓励学生大胆表达自己的计算方法。在拨计数器这一块，为了解决传统计数器不能“借一当十”问题，我利用希沃白板的“克隆与拖拽”功能来形象地给学生演示了“借一当十”的过程及原理，帮助学生更好地理解算法。纵观本节公开课，我觉得存在以下问题：</p>
<ol>
<li><p>在总结算法的过程中，应该多鼓励学生自己说，而不是自己一味去说。</p>
</li>
<li><p>课堂活动组织不好，其实我一直想给他们分几个小组，从而在课堂上多开展分小组活动，但这个一直没有实施起来。</p>
</li>
<li><p>时间没有把握好，在前面有些地方所花的时间过多，导致后面缺乏练习，这个以后要改进。</p>
</li>
</ol>
]]></content>
      <categories>
        <category>教学</category>
      </categories>
      <tags>
        <tag>教学反思</tag>
        <tag>二年级数学</tag>
      </tags>
  </entry>
  <entry>
    <title>二年级数学下册第四单元《铅笔有多长》教学反思</title>
    <url>/archives/9d7a8c36/</url>
    <content><![CDATA[<p>本次公开课课题是《铅笔有多长》，上课开始我带领学生复习了我们已经学习过的长度单位，以及如何用尺子测量物体的长度，使学生能够快速地进入学习状态。之后我设计了三个活动：认识分米；认识毫米；米、分米、厘米、毫米之间的关系来展开今天的新课学习。在课上我充分利用希沃电子白板，通过希沃视频展台让学生上来亲自演示测量铅笔的过程，增强了学生的动手操作能力。此外由于缺乏米尺等教具，我充分利用多媒体视频，向学生形象直观展示了米尺有关的知识以及如何用尺子测量硬币和银行卡的过程。纵观本次公开课主要存在以下问题：</p>
<ol>
<li><p>练一练第2题，有学生测量结果是1厘米1毫米，而有学生测量结果是1厘米2毫米。我没有具体说明产生误差的原因。</p>
</li>
<li><p>课堂组织能力有些欠缺，有个别学生测量测量就玩起尺子了，我没有及时进行干预加以引导。</p>
</li>
<li><p>缺乏对后进生的关注，个别学生测量出现问题，没有能够及时加以指导。</p>
</li>
</ol>
]]></content>
      <categories>
        <category>教学</category>
      </categories>
      <tags>
        <tag>教学反思</tag>
        <tag>二年级数学</tag>
      </tags>
  </entry>
  <entry>
    <title>二年级数学下册第四单元《铅笔有多长》教学设计</title>
    <url>/archives/112d96b2/</url>
    <content><![CDATA[<p> 一、 教学目标：</p>
<p>1、通过测量铅笔的长度的活动知道1分米、1毫米有多长，发展学生空间观念和动手操作能力。</p>
<p>2、通过“估一估”、“量一量”等活动，发展学生的估测能力。</p>
<p>3、掌握米、分米、厘米和毫米之间的关系，能进行简单的单位换算。</p>
<p>二、教学重点：认识1分米和1毫米有多长，掌握米、分米、厘米和毫米之间的关系，能进行简单的单位换算。</p>
<p>三、教学难点：会用分米、毫米表示物体的长度</p>
<p>四、教学课时：1课时</p>
<p>五、教学手段：</p>
<p>六、教学过程：</p>
<p>（一）复习旧知</p>
<p>1.我们已经学习了哪两个长度单位？</p>
<p>2.怎样用尺子测量物体的长度吗？</p>
<p>3.在括号里填上合适的单位</p>
<p>（二）探究新知</p>
<p>活动一：认识分米</p>
<p>1、认识分米</p>
<p>师：请同学们先估计一下，这支铅笔有多长？</p>
<p>生：4cm、9cm、12cm ……</p>
<p>师：那么这支笔到底有多长呢？我们怎样才能知道呢？</p>
<p>生：用尺子量</p>
<p>师：测量时，需要注意什么呢？</p>
<p>生：不能把尺子斜着量；</p>
<p>铅笔的一端和0刻度对齐，看另一端和刻度几对齐，就读作几厘米。</p>
<p>师：真聪明，你手中绿色纸条的长度就是这支铅笔的长度，那同学们就赶快拿出尺量一量吧！</p>
<p>生：10cm </p>
<p>师：刚才我们量这支铅笔是10厘米，10厘米也可以用一个新的长度单位来表示，那就是1分米（板书），也就要说1分米&#x3D;10厘米，分米用字母dm表示，也就是1dm&#x3D;10cm（齐读）</p>
<p>2、找出生活中1分米的物品</p>
<p>一拃长约1分米；插座宽度约1分米；字典宽度约1分米</p>
<p>活动二：认识毫米</p>
<p>1、认识毫米</p>
<p>师：估计这支铅笔的长度？（4cm、5cm、6cm）你手中红色纸条的长度正好是这支铅笔的长度，请同学们量一量它有多长？</p>
<p>（生动手量）汇报：比6cm多2个小格。</p>
<p>师：用厘米做单位量物体的长度有时不是整厘米数，因而得不到准确的结果，就需要一个比厘米还要小的单位“毫米”那么1毫米有多长，它与厘米之间有什么关系？</p>
<p>2、厘米与毫米之间的关系</p>
<p>（1）尺子上1厘米有10个小格</p>
<p>（2）尺子上1个小格就是1毫米，毫米用字母mm表示。</p>
<p>（3）1厘米&#x3D;10毫米  1cm&#x3D;10mm</p>
<p>3、生活中哪些物体的厚度大约是1毫米？</p>
<p>硬币、银行卡</p>
<p>活动三：米、分米、厘米、毫米之间的关系</p>
<p>1、在尺子上找出1mm、1cm、1dm，填一填，想一想。</p>
<p>师：在尺子上找一找多少毫米是1厘米？多少厘米是1分米？多少分米是1米？</p>
<p>2、想一想、填一填。</p>
<p>师：让学生独立完成，再说是怎样想的？</p>
<p>（三）练习巩固</p>
<p>（四）课堂小结</p>
<p>今天我们学习了两个新的长度单位，分别是—分米和毫米，希望在日常生活中能灵活应用它们。</p>
<p>七、板书设计</p>
<p>铅笔有多长</p>
<p>1分米&#x3D;10厘米</p>
<p>1dm&#x3D;10cm</p>
<p>1厘米&#x3D;10毫米</p>
<p>1cm&#x3D;1mm</p>
]]></content>
      <categories>
        <category>教学</category>
      </categories>
      <tags>
        <tag>教学设计</tag>
        <tag>二年级数学</tag>
      </tags>
  </entry>
  <entry>
    <title>人声伴奏分离分离神器：Spleeter GUI_v2.5</title>
    <url>/archives/1a6c27e2/</url>
    <content><![CDATA[<p>使用方法：</p>
<p>1.首先安装<code>SpleeterGUI_v2.5.msi</code>，安装到任意位置即可。</p>
<p>2.然后进入<code>训练模型</code>目录，以管理员模式运行<code>安装SpleeterGUI之后右键管理员模式运行这个.bat</code>。最后相应文件夹会被拷贝到<code>C:\Users\Admin\AppData\Roaming</code>目录下，如果卸载该软件，也要手动删除此文件夹。</p>
<p>总结：此软件除了消音乐伴奏外，还可以去视频（例如MTV）里的人声。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>tips</tag>
      </tags>
  </entry>
  <entry>
    <title>信息技术支持下的小学数学创新教学</title>
    <url>/archives/6d771a20/</url>
    <content><![CDATA[<p><strong>摘要：</strong>在信息化教育的背景下，数学教师应当在推进小学数学创新教学的过程中，果断地应用信息技术，使其成为推进创新的有力助手，如可以使用微课教学，构建直播课堂，打开学习的新空间，并且能够运用多媒体加强线下的教学能力，这会有助于推进创新教学。</p>
<p><strong>关键词：</strong>信息技术；小学数学；创新</p>
<p><strong>引言：</strong></p>
<p>在创新教学的前提下，需要分别在教育方式与思维上进行创新，一方面可以整合信息技术，在方式上进行创新，另一方面可以吸收新课改等先进的教育思维，学会从生活中涉及教育，在引导中逐步渗透，这会更利于学生，使其能够慢慢地提升积极性，从而可以实现创新教学的目的。</p>
<p><strong>一、信息技术对小学数学创新教学的重要性分析</strong></p>
<p>（一）能够予以充足的工具支持</p>
<p>从当前信息技术应用在学科教育中的工具类型来看，根据需求和应用途径的不同，会分为若干种类，如视频类、图文类、辅助类等，每种工具都有独特的功能，因此若将信息技术应用在小学数学课程中，可以为创新教学予以充足的工具支持。</p>
<p>（二）能够予以充足的资源支持</p>
<p>信息技术工具除了自带某种功能外，还经常与互联网联系在一起，这就意味着使用者可以从互联网中搜集各种想要的资源，因此在推进创新教学中，可以充分运用互联网，结合信息技术工具，能够应用许多信息化的资源，从而有助于推进创新教学。</p>
<p><strong>二、在小学数学创新教学中存在的问题</strong></p>
<p>（一）教学手段受限制</p>
<p>若要做到创新的目的，多元化的教学手段是必要的选择，但是从目前情况来看，由于客观因素的限制，导致不少教师的教学手段受限制，不能在实质上突破传统教学工具的局限性，不能达到创新教学的目的。</p>
<p>（二）积极性不足</p>
<p>在创新教学的过程中，学生与课堂的契合度是考验创新成果的重要因素，使其能够适应新形式的课堂，但是目前情况来看，若干名学生具备的积极性不足，即使在课堂中应用新型的教学方式，依旧不能有效地改变现状，这就需要反思其中的缘由。</p>
<p><strong>三、信息技术支持下的小学数学创新教学策略分析</strong></p>
<p>（一）使用微课进行教学</p>
<p>微课是信息技术应用在学科教育中的重要表现，既具有多媒体的演示功能，又具有包容多种资源的功能，可以被用于若干部分的教学工作中，这会有助于推进创新教学。因此，在小学数学中，可以将微课融入各章节的教学过程中，既可以充当有效的引导工具，又可以加入新内容，这就能够达到创新的目的。例如，在教学《线与角》时，可以分别演示两段微课视频，第一段视频中会讲述线与线的位置关系，如平行、垂直等，并且会用虚线、实线、点表示画线的过程，在第二段视频中会讲述平角、周角，用图形的变化表示两种角的形成过程，同时会用量角器表示若干角。在课堂中，不仅可以演示微课视频，而且可以配合视频中的内容，同步指导学生，如在关于角的微课中，当在讲到用线段OA逆时针旋转时，可以提问说：“当这条线段旋转后，会变成什么？请你们猜一猜吧”，使学生对视频中的图文有所质疑，再继续播放，使其能够加深对周角的认识。另外，在课堂之外，可以运用微课视频充当补习、复习等方面的工具，如作为补习的工具时，教师会自行录制视频，会对课堂中未能充分说明的内容，或者对某些成绩较差的学生进行提点，协助其慢慢地弥补与其他同学的差距；作为复习的工具时，可以用于考试前的复习阶段，自行录制视频，简要地概括某单元的要点，令学生加紧考前的复习任务，或者会在教完某堂课后，让学生回家后借助微课复习当天的课程。</p>
<p>（二）构建直播课堂</p>
<p>当前，直播教学是基于现实意义的新型教学方式，通过某些直播类型的教育软件，可以实现远程的在线教育，既能解除教室空间的束缚，又能实现教育目的。因此，数学教师可以构建直播课堂，在适当的时间内与学生建立联系，进而可以展开教学。</p>
<p>例如，以希沃白板为例，该软件中拥有“云课堂”的功能，专门用于远程教育，若要保证师生能够面对面地交流，可以建立“直播课堂”，若仅通过讲话的方式交流，可以建立“语音课堂”，在创建后，会任意产生一张二维码图片，这是进入直播教室的钥匙，将其发送给班内的学生，令其用微信扫描图中的二维码，随即会弹出小程序的窗口，点击报名后即可进入课堂。在开课前，可以通过观察“学生”栏的姓名，统计进入教室的人数，同时进行点名，在确认所有人进入后，开始正式上课，此时可以像往常一样，利用多媒体课件逐部分地讲述，若要让某名学生说话，可以给其开放连麦权限，使其通过手机讲话，说完关闭权限，若要临时提问，可以利用答题板的功能，设计选择题或主观题，边说题，边让学生思考，选择相应的选项，或者自行写出答案，再拍照传送到课堂中，随后由教师阅览检查，对优秀的学生提出夸赞，同时可以利用“小奖杯”的功能，给其颁发奖章，随后继续讲解某部分的内容。</p>
<p>另外，在选择直播教学时间的时候，可以根据不同的需求开播，如在暑寒假的时候，若要提前对下学期的新内容预热，可以利用直播教学的手段，与学生建立教学关系，在直播课堂内讲述新内容；若因某些特殊因素无法正常开课时，可以利用直播教学的手段，提前制作课件，正常地展开教学。并且，在展开直播教学的过程中，需要家长的配合，令其督促学生按时上课，在过程中不乱跑，不会任意打开手机中的游戏玩耍，避免对直播教学造成影响。还有，直播教学应当与课堂评价有效地结合起来，每当提出某个问题后，需要对其进行中肯地评价，使学生能够听到褒奖的同时，可以了解不足的地方，这样才能充分运用直播教学的手段，逐步增强学习能力。</p>
<p>（三）运用多媒体进行教学</p>
<p>除了在网络中教学外，信息技术还可以应用在现实的课堂中，通过多媒体的形式展现出来，若用于数学学科，可以依据教学内容的变化，选择较为恰当的多媒体信息辅助，一方面有助于体现数学知识中的逻辑关系，另一方面有助于增强学生的积极性。</p>
<p>例如，在教学《变化的图形》时，从课题内容来看，平移、旋转等图形是要点，这就可以运用多媒体展示生活中存在的现象，如游乐园中旋转的摩天轮、在空中滑过的飞机等，在观看的过程中，会点拨学生，使其能够对生活现象产生疑问，再进入本小节的内容进行讲解；在教学《周长》时，从课题内容来看，计算简单图形的周长是要点，这就可以运用多媒体展示某些物体，如大货厢等，用线条画出物体的周边，指导学生产生质疑，再进行详细讲解。</p>
<p>另外，可以利用多媒体创建一些易于理解的数学模型，促使学生能够加深认识，如在教学《时、分、秒》时，从课题内容来看，钟表上的时刻是要点，可以借助希沃白板，加入关于钟表的数学模型，其中会有一个较大的钟表，表内的时、分、秒针会用不同的颜色表示，并且小时的刻度与分钟的刻度大小不一、颜色不一，易于学生区分，随后可以选择其中的某些选项，如选择“显示&#x2F;隐藏秒针”后，表盘中的秒针会自动隐藏，仅剩时针、分针，教师可以利用该功能，讲述三个表示时间的指针的用途，以及每根指针表示的时间，并且选择“练习认时刻”后，每点击一次表盘中的时间会变化一次，可以利用该功能，训练学生认识时间，同时可以选择“数字式”，在表盘下方会显示相应的数字时间，可以让学生边读边看，这就能够提高教学成果。</p>
<p><strong>四、结束语</strong></p>
<p>综上所述，信息技术是当前数学课程创新的重要动力，既会提供多种可用的教学工具，又会提供充足的教学资源，对改进课程的教学手段具有明显的帮助作用，因此需要数学教师牢牢地把握该项技术手段，能够推进课程创新。</p>
]]></content>
      <categories>
        <category>教学</category>
      </categories>
      <tags>
        <tag>论文</tag>
      </tags>
  </entry>
  <entry>
    <title>一年级数学比多比少类问题</title>
    <url>/archives/58a068bd/</url>
    <content><![CDATA[<p>一年级比多比少类问题，应该说是一个难点。部分同学看见“多”就用加法，看见“少”就用减法，这样是不对的，一般说来比多比少类问题有三种题型，现在做个简单的总结，具体如下（题目选自网上）：</p>
<ol>
<li><strong>求“多多少”、“少多少”都用减法</strong>。</li>
</ol>
<p>例如：小明有39张卡片，小华有23张，小华比小明少多少张卡片？（或者小明比小华多多少张卡片？）</p>
<ol start="2">
<li><strong>求“较大数”用加法</strong>。</li>
</ol>
<p>例如：小明有39张卡片，小华比小明多12张，小华有多少张卡片？</p>
<p>或者：小明有39张卡片，比小华少12张，小华有多少张卡片？</p>
<p>这两题其实是一样的，求的都是小华，求小华求的是较大数，所以用加法。</p>
<ol start="3">
<li><strong>求“较小数”用减法</strong>。</li>
</ol>
<p>例如：小明有39张卡片，小华比小明少12张，小华有多少张卡片？</p>
<p>或者：小明有39张卡片，比小华多12张，小华有多少张卡片？</p>
<p>这两题其实是一样的，求的都是小华，求小华求的是较小数，所以用减法。</p>
<hr>
<p>另外还有比多比少列式计算题，相关内容可查看：<a href="https://bore.vip/first-grade-math-lie-shi/">一年级数学下册列式计算(加数、被减数、比多比少)</a></p>
]]></content>
      <categories>
        <category>教学</category>
      </categories>
      <tags>
        <tag>一年级数学</tag>
      </tags>
  </entry>
  <entry>
    <title>利用Github Actions自动同步Fork</title>
    <url>/archives/12dd937c/</url>
    <content><![CDATA[<p>虽然Github自带一个Sync Fork的按钮，但是每次都自己点总是麻烦的，所以有人搞了个Github Action来做这件事，<a href="https://github.com/tgymnich/fork-sync">https://github.com/tgymnich/fork-sync</a></p>
<h2 id="创建workflow"><a href="#创建workflow" class="headerlink" title="创建workflow"></a>创建workflow</h2><p>创建新的workflow，在仓库右上角点<code>Add file</code>，先输入<code>workflows</code>文件夹名，再点击空白位置，自动进入下一目录，然后输入文件名<code>sync.yml</code>。接着</p>
<p>在<code>sync.yml</code>输入里面的内容：</p>
<p><strong>官方：</strong></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Sync</span> <span class="string">Fork</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">schedule:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">cron:</span> <span class="string">&#x27;*/30 * * * *&#x27;</span> <span class="comment"># every 30 minutes</span></span><br><span class="line">  <span class="attr">workflow_dispatch:</span> <span class="comment"># on button click</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">sync:</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">tgymnich/fork-sync@v2.0</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.PERSONAL_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">owner:</span> <span class="string">llvm</span></span><br><span class="line">          <span class="attr">base:</span> <span class="string">master</span></span><br><span class="line">          <span class="attr">head:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>

<p><strong>注释：</strong></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Sync</span> <span class="string">Fork</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span> <span class="comment"># push 时触发, 主要是为了测试配置有没有问题</span></span><br><span class="line">  <span class="attr">schedule:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">cron:</span> <span class="string">&#x27;* */24 * * *&#x27;</span> <span class="comment"># 每天一次</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">repo-sync:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">tgymnich/fork-sync@v2.0</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.TOKEN</span> <span class="string">&#125;&#125;</span> <span class="comment">#Github Token，记得加入secrets</span></span><br><span class="line">          <span class="attr">owner:</span> <span class="string">ngosang</span> <span class="comment"># fork 的上游仓库 user</span></span><br><span class="line">          <span class="attr">head:</span> <span class="string">master</span> <span class="comment"># fork 的上游仓库 branch</span></span><br><span class="line">          <span class="attr">base:</span> <span class="string">master</span> <span class="comment"># 本地仓库 branch</span></span><br></pre></td></tr></table></figure>

<p><strong>最终</strong><code>sync.yml</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Sync</span> <span class="string">Fork</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">schedule:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">cron:</span> <span class="string">&#x27;* */24 * * *&#x27;</span> <span class="comment"># 每天一次</span></span><br><span class="line">  <span class="attr">workflow_dispatch:</span> <span class="comment"># on button click</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">sync:</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">tgymnich/fork-sync@v2.0</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.PERSONAL_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">owner:</span> <span class="string">mack-a</span></span><br><span class="line">          <span class="attr">base:</span> <span class="string">master</span></span><br><span class="line">          <span class="attr">head:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>

<p><code>* */24 * * *</code>改成<code>* */48 * * *</code>每两天运行一次</p>
<blockquote>
<p>PS：ChatGPT有时给出的答案可能是错误的，需要验证：<a href="https://crontab.guru/">crontab guru</a></p>
</blockquote>
<h2 id="创建github访问token"><a href="#创建github访问token" class="headerlink" title="创建github访问token"></a>创建github访问token</h2><p>参考：<a href="https://docs.github.com/zh/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens">管理个人访问令牌</a></p>
<p>1.在任何页面的右上角，单击个人资料照片，然后单击“设置”。</p>
<p>2.在左侧边栏中，单击“ 开发人员设置”。<br>3.请在左侧边栏的“ Personal access token”下，单击“细粒度令牌” 。<br>4.单击“生成新令牌”。<br>5.在“令牌名称”下，输入令牌的名称。<br>6.在“过期时间”下，选择令牌的过期时间（永不过期）。</p>
<p>7.然后权限要开启<strong>repo</strong>和<strong>workflow</strong>的权限</p>
<p><img src="/../img/%E5%88%A9%E7%94%A8Github-Actions%E8%87%AA%E5%8A%A8%E5%90%8C%E6%AD%A5Fork/github.png"></p>
<p>8.创建完成后复制token内容</p>
<h2 id="添加环境变量secret"><a href="#添加环境变量secret" class="headerlink" title="添加环境变量secret"></a>添加环境变量secret</h2><p>在<code>settings/secrets(Secrets and variables)/actions</code>里把Github的Token设置上，比如workflow写的是secrets.PERSONAL_TOKEN，所以添加的时候Name填写PERSONAL_TOKEN，Secret里填写上一步创建Token内容。</p>
<p>如果部署完成之后，运行显示错误是：</p>
<blockquote>
<p>repo-sync<br>Failed to create or merge pull request: HttpError: Validation Failed: {“resource”:”PullRequest”,”code”:”custom”,”message”:”No commits between knight000:master and ngosang:master”}</p>
</blockquote>
<p>就证明初步成功了，因为你部署了workflow所以比原仓库新，等原仓库更新后点<code>Re-run jobs</code>就可以测试是否正确部署了。</p>
<h2 id="自动提交修改到Gitee-未测试"><a href="#自动提交修改到Gitee-未测试" class="headerlink" title="自动提交修改到Gitee(未测试)"></a>自动提交修改到Gitee(未测试)</h2><p>以下action文件来自<a href="https://juejin.cn/post/6894928345830522887">https://juejin.cn/post/6894928345830522887</a></p>
<p>把GITEE_PRIVATE_KEY、<a href="https://gitee.com/profile/personal_access_tokens">GITEE_TOKEN</a>、GITEE_USER都添加到secrets里，然后Gitee内<a href="https://gitee.com/projects/import/url">从URL导入仓库</a>，创建同名仓库即可同步。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 通过 Github actions， 在 Github 仓库的每一次 commit 后自动同步到 Gitee 上</span></span><br><span class="line"><span class="attr">name:</span> <span class="string">sync2gitee</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">master</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">repo-sync:</span></span><br><span class="line">    <span class="attr">env:</span></span><br><span class="line">      <span class="attr">dst_key:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITEE_PRIVATE_KEY</span> <span class="string">&#125;&#125;</span></span><br><span class="line">      <span class="attr">dst_token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITEE_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">      <span class="attr">gitee_user:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITEE_USER</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">persist-credentials:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">sync</span> <span class="string">github</span> <span class="string">-&gt;</span> <span class="string">gitee</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">Yikun/hub-mirror-action@master</span></span><br><span class="line">        <span class="attr">if:</span> <span class="string">env.dst_key</span> <span class="string">&amp;&amp;</span> <span class="string">env.dst_token</span> <span class="string">&amp;&amp;</span> <span class="string">env.gitee_user</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="comment"># 必选，需要同步的 Github 用户（源）</span></span><br><span class="line">          <span class="attr">src:</span> <span class="string">&#x27;github/$<span class="template-variable">&#123;&#123; github.repository_owner &#125;&#125;</span>&#x27;</span></span><br><span class="line">          <span class="comment"># 必选，需要同步到的 Gitee 用户（目的）</span></span><br><span class="line">          <span class="attr">dst:</span> <span class="string">&#x27;gitee/$<span class="template-variable">&#123;&#123; secrets.GITEE_USER &#125;&#125;</span>&#x27;</span></span><br><span class="line">          <span class="comment"># 必选，Gitee公钥对应的私钥，https://gitee.com/profile/sshkeys</span></span><br><span class="line">          <span class="attr">dst_key:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITEE_PRIVATE_KEY</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="comment"># 必选，Gitee对应的用于创建仓库的token，https://gitee.com/profile/personal_access_tokens</span></span><br><span class="line">          <span class="attr">dst_token:</span>  <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITEE_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="comment"># 如果是组织，指定组织即可，默认为用户 user</span></span><br><span class="line">          <span class="comment"># account_type: org</span></span><br><span class="line">          <span class="comment"># 直接取当前项目的仓库名</span></span><br><span class="line">          <span class="attr">static_list:</span> <span class="string">$&#123;&#123;</span> <span class="string">github.event.repository.name</span> <span class="string">&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<p>因为有<code>if: env.dst_key &amp;&amp; env.dst_token &amp;&amp; env.gitee_user</code>这一句所以信息不足的情况下是会跳过执行，显示执行成功而不是显示错误，请注意。</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://knight.abn-team.top/2023/03/29/GithunActionAutoSync2Gitee/">GithunActionAutoSync2Gitee</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/500768626">利用Github Actions自动同步Fork</a></li>
<li><a href="https://github.com/tgymnich/fork-sync">fork-sync</a></li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title>利用企业微信实现twikoo新消息提醒&amp;&amp;数据导出等</title>
    <url>/archives/9a366c6/</url>
    <content><![CDATA[<h2 id="注册企业微信"><a href="#注册企业微信" class="headerlink" title="注册企业微信"></a>注册企业微信</h2><p>1．搜索下载企业，并使用手机号进行企业微信注册</p>
<p>2．选择成立企业</p>
<p>3．输入企业名称等信息</p>
<p>4．完成后，在通讯录内添加成员</p>
<h2 id="企业微信创建一个应用"><a href="#企业微信创建一个应用" class="headerlink" title="企业微信创建一个应用"></a>企业微信创建一个应用</h2><p>在 “企业微信 —— 应用管理” 最底部的 “自建” 应用处，新建一个 “应用”。名称比如就叫消息通知，配置完成后记录下应用页面的 AgentId 和 Secret。注意，查看 Secret 需要安装一个企业微信，查看完可以卸载。</p>
<p>在 “企业微信 —— 我的企业” 底部，记录下 “企业 ID”。</p>
<p>至此，微信配置完成，开始配置提醒 API。</p>
<h2 id="创建-API-云函数"><a href="#创建-API-云函数" class="headerlink" title="创建 API 云函数"></a>创建 API 云函数</h2><p>首先参考 Heo 的教程，创建一个腾讯云或 vercel 版本的云函数。</p>
<h3 id="Vercel版本"><a href="#Vercel版本" class="headerlink" title="Vercel版本"></a>Vercel版本</h3><p>我之前使用vercel部署过twikoo，因此不需要再创建新的云函数。如果你不是使用vercel，<a href="https://blog.zhheo.com/p/1e9f35bc.html#%E4%BD%BF%E7%94%A8vercel%E5%BC%80%E5%8F%91%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B%EF%BC%88%E6%8E%A8%E8%8D%90%EF%BC%89">参考这里</a>。</p>
<h4 id="安装python"><a href="#安装python" class="headerlink" title="安装python"></a>安装python</h4><p>下载并安装python，安装时注意勾选<code>Add Python 3.10 to PATH</code></p>
<h4 id="安装pipenv"><a href="#安装pipenv" class="headerlink" title="安装pipenv"></a>安装pipenv</h4><p>找到你的twikoo github仓库，clone到本地，进入<code>api/</code>，执行以下命令：</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">pip install pipenv</span><br></pre></td></tr></table></figure>

<p>如果安装时报错：<code>ERROR: Exception: Traceback (most recent call last)</code>，就使用一下命令安装：</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">pip install pipenv <span class="literal">-i</span> http://pypi.douban.com/simple <span class="literal">--trusted-host</span> pypi.douban.com</span><br></pre></td></tr></table></figure>

<h4 id="下载requests"><a href="#下载requests" class="headerlink" title="下载requests"></a>下载requests</h4><p>继续在<code>api/</code>文件夹下执行以下命令：</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">pipenv install requests</span><br></pre></td></tr></table></figure>

<p>如果按照报错，请先关闭dl。</p>
<h4 id="新建python-py"><a href="#新建python-py" class="headerlink" title="新建python.py"></a>新建python.py</h4><p>然后在该目录创建一个<code>python.py</code>文件，内容如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> http.server <span class="keyword">import</span> BaseHTTPRequestHandler</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> parse_qs</span><br><span class="line"><span class="comment"># -*- coding: utf8 -*-</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">handler</span>(<span class="title class_ inherited__">BaseHTTPRequestHandler</span>):</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">do_GET</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">getTocken</span>(<span class="params"><span class="built_in">id</span>, secert, msg, agentId</span>):</span><br><span class="line">            url = <span class="string">&quot;https://qyapi.weixin.qq.com/cgi-bin/gettoken?corpid=&quot;</span> + \</span><br><span class="line">                <span class="built_in">id</span> + <span class="string">&quot;&amp;corpsecret=&quot;</span> + secert</span><br><span class="line"></span><br><span class="line">            r = requests.get(url)</span><br><span class="line">            tocken_json = json.loads(r.text)</span><br><span class="line">            <span class="comment"># print(tocken_json[&#x27;access_token&#x27;])</span></span><br><span class="line">            sendText(tocken=tocken_json[<span class="string">&#x27;access_token&#x27;</span>], agentId=agentId, msg=msg)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">sendText</span>(<span class="params">tocken, agentId, msg</span>):</span><br><span class="line">            sendUrl = <span class="string">&quot;https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token=&quot;</span> + tocken</span><br><span class="line">            <span class="comment"># print(sendUrl)</span></span><br><span class="line">            data = json.dumps(&#123;</span><br><span class="line">                <span class="string">&quot;safe&quot;</span>: <span class="number">0</span>,</span><br><span class="line">                <span class="string">&quot;touser&quot;</span>: <span class="string">&quot;@all&quot;</span>,</span><br><span class="line">                <span class="string">&quot;msgtype&quot;</span>: <span class="string">&quot;text&quot;</span>,</span><br><span class="line">                <span class="string">&quot;agentid&quot;</span>: agentId,</span><br><span class="line">                <span class="string">&quot;text&quot;</span>: &#123;</span><br><span class="line">                    <span class="string">&quot;content&quot;</span>: <span class="built_in">str</span>(msg)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            requests.post(sendUrl, data)</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            params = parse_qs(self.path[<span class="number">12</span>:])</span><br><span class="line">            apiid = params[<span class="string">&#x27;id&#x27;</span>][<span class="number">0</span>]</span><br><span class="line">            apisecert = params[<span class="string">&#x27;secert&#x27;</span>][<span class="number">0</span>]</span><br><span class="line">            apiagentId = params[<span class="string">&#x27;agentId&#x27;</span>][<span class="number">0</span>]</span><br><span class="line">            apimsg = params[<span class="string">&#x27;msg&#x27;</span>][<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            apimsg = self.path</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment">#try:</span></span><br><span class="line">            <span class="comment"># 执行主程序</span></span><br><span class="line">            getTocken(<span class="built_in">id</span>=apiid, secert=apisecert,</span><br><span class="line">                        msg=apimsg, agentId=apiagentId)</span><br><span class="line">            <span class="comment">#except:</span></span><br><span class="line">            <span class="comment">#    status = 1</span></span><br><span class="line">            <span class="comment">#    apimsg = &#x27;主程序运行时出现错误，请检查参数是否填写正确。详情可以参阅：https://blog.zhheo.com/p/1e9f35bc.html&#x27;</span></span><br><span class="line">            <span class="comment">#else:</span></span><br><span class="line">            <span class="comment">#    status = 0</span></span><br><span class="line">        <span class="comment"># print(event)</span></span><br><span class="line">        <span class="comment"># print(&quot;Received event: &quot; + json.dumps(event, indent = 2))</span></span><br><span class="line">        <span class="comment"># print(&quot;Received context: &quot; + str(context))</span></span><br><span class="line">        <span class="comment"># print(&quot;Hello world&quot;)</span></span><br><span class="line"></span><br><span class="line">        self.send_response(<span class="number">200</span>)</span><br><span class="line">        self.send_header(<span class="string">&#x27;Content-type&#x27;</span>, <span class="string">&#x27;text/plain&#x27;</span>)</span><br><span class="line">        self.end_headers()</span><br><span class="line">        self.wfile.write(apimsg)</span><br><span class="line">        <span class="keyword">return</span></span><br></pre></td></tr></table></figure>

<p>push当前的更改之后，当Vercel完成部署后，你可以使用下面这样的方式，拼接一个 URL，浏览器访问，看看手机微信能不能接收到消息。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://&lt; vercel_app_address&gt;/api/python?id=&lt;ww....&gt;&amp;secert=&lt;secret...&gt;&amp;agentId=&lt;agentId...&gt;&amp;msg=测试一下吧</span><br></pre></td></tr></table></figure>

<p>如果成功的话你的手机会接收到对应的推送（如果你的企业微信注册成功且所填信息正确）。</p>
<h4 id="在twikoo中配置"><a href="#在twikoo中配置" class="headerlink" title="在twikoo中配置"></a>在twikoo中配置</h4><p><del>在twikoo后台管理<code>WECOM_API_URL</code>中添加你拼接的url即可。注意<code>msg</code>后面不要有参数：</del></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://&lt;vercel_app_address&gt;/api/python?id=&lt;企业id&gt;&amp;secert=&lt;secret&gt;&amp;agentId=&lt;agentId&gt;&amp;msg=</span><br></pre></td></tr></table></figure>

<hr>
<p>2022.3.6 <a href="https://twikoo.js.org/">Twikoo</a> v1.5.0更新： 消息推送逻辑，从 1.5.0 之前的版本升级后，请在管理面板重新配置评论提醒的消息推送服务，增加了对 Bark、Telegram 等平台的支持</p>
<h5 id="企业微信-缩写-wecom"><a href="#企业微信-缩写-wecom" class="headerlink" title="企业微信 缩写: wecom"></a><a href="https://guole.fun/posts/626/">企业微信</a> 缩写: <code>wecom</code></h5><p>企业微信应用消息推送，免费，限制较少。</p>
<ol>
<li>用电脑打开 <a href="https://work.weixin.qq.com/%EF%BC%8C%E6%B3%A8%E5%86%8C%E4%B8%80%E4%B8%AA%E4%BC%81%E4%B8%9A">https://work.weixin.qq.com/，注册一个企业</a></li>
<li>注册成功后，点「管理企业」进入管理界面，选择「应用管理」 → 「自建」 → 「创建应用」</li>
<li>应用名称填入机器人的名称，应用 logo 选择机器人的头像，可见范围选择公司名</li>
<li>创建完成后进入应用详情页，可以得到应用ID( <code>agentid</code> )，应用Secret( <code>secret</code> )，复制<br>PS：获取应用Secret时，可能会将其推送到企业微信客户端，这时候微信里边是看不到的，需要在企业微信客户端里边才能看到</li>
<li>进入「<a href="https://work.weixin.qq.com/wework_admin/frame#profile">我的企业</a>」页面，拉到最下边，可以看到企业ID，复制</li>
<li>进入「我的企业」 → 「<a href="https://work.weixin.qq.com/wework_admin/frame#profile/wxPlugin">微信插件</a>」，拉到下边扫描二维码，关注以后即可收到推送的消息</li>
<li>将第 4 步和第 5 步取得的 <code>企业ID#应用Secret#应用ID</code> 拼到一起，中间用 “<code>#</code>” 号分隔，填入 pushoo 的 token 中</li>
</ol>
<p>示例 token：<code>ww97a01a*****1e5f1#xHapDXmgZtlBgRQQXMb4kfh3y75Ynoubl*****l9ytE#1000005</code></p>
<p>PS：如果出现接口请求正常，企业微信接受消息正常，个人微信无法收到消息的情况，请确认如下配置：</p>
<ul>
<li>进入「我的企业」 → 「微信插件」，拉到最下方，勾选「允许成员在微信插件中接收和回复聊天消息 」</li>
<li>在企业微信客户端 「我」 → 「设置」 → 「新消息通知」中关闭「仅在企业微信中接受消息」限制条件</li>
</ul>
<h4 id="在微信中接收企业微信消息"><a href="#在微信中接收企业微信消息" class="headerlink" title="在微信中接收企业微信消息"></a>在微信中接收企业微信消息</h4><p>在“企业微信——我的企业——微信插件”页面配置，<a href="https://work.weixin.qq.com/wework_admin/frame#profile/wxPlugin">点击这里查看</a>。</p>
<p>使用微信扫码，关注你的企业微信，并且在设置中打开<code>允许成员在微信插件中接收和回复聊天消息</code>选项。</p>
<h3 id="腾讯云版本"><a href="#腾讯云版本" class="headerlink" title="腾讯云版本"></a>腾讯云版本</h3><p>可以复用之前 Twikoo 那个云开发环境，直接创建一个新的云函数，名称自定义如 weixin-push，选择 helloworld 空白模板函数，Python3.6 环境， 128MB 就 OK 了。下一步粘贴下面的代码，点击创建：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf8 -*-</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getTocken</span>(<span class="params"><span class="built_in">id</span>,secert,msg,agentId</span>):</span><br><span class="line">    url = <span class="string">&quot;https://qyapi.weixin.qq.com/cgi-bin/gettoken?corpid=&quot;</span> + <span class="built_in">id</span> + <span class="string">&quot;&amp;corpsecret=&quot;</span> + secert</span><br><span class="line"></span><br><span class="line">    r =requests.get(url)</span><br><span class="line">    tocken_json = json.loads(r.text)</span><br><span class="line">    <span class="comment"># print(tocken_json[&#x27;access_token&#x27;])</span></span><br><span class="line">    sendText(tocken=tocken_json[<span class="string">&#x27;access_token&#x27;</span>],agentId=agentId,msg=msg)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sendText</span>(<span class="params">tocken,agentId,msg</span>):</span><br><span class="line">    sendUrl = <span class="string">&quot;https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token=&quot;</span> + tocken</span><br><span class="line">    <span class="comment"># print(sendUrl)</span></span><br><span class="line">    data = json.dumps(&#123;</span><br><span class="line">        <span class="string">&quot;safe&quot;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">&quot;touser&quot;</span> : <span class="string">&quot;@all&quot;</span>,</span><br><span class="line">        <span class="string">&quot;msgtype&quot;</span> : <span class="string">&quot;text&quot;</span>,</span><br><span class="line">        <span class="string">&quot;agentid&quot;</span> : agentId,</span><br><span class="line">        <span class="string">&quot;text&quot;</span> : &#123;</span><br><span class="line">            <span class="string">&quot;content&quot;</span> : msg</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    requests.post(sendUrl,data)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>(<span class="params">event, context</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        apiid=event[<span class="string">&#x27;queryStringParameters&#x27;</span>][<span class="string">&#x27;id&#x27;</span>]</span><br><span class="line">        apisecert=event[<span class="string">&#x27;queryStringParameters&#x27;</span>][<span class="string">&#x27;secert&#x27;</span>]</span><br><span class="line">        apiagentId = event[<span class="string">&#x27;queryStringParameters&#x27;</span>][<span class="string">&#x27;agentId&#x27;</span>]</span><br><span class="line">        apimsg = event[<span class="string">&#x27;queryStringParameters&#x27;</span>][<span class="string">&#x27;msg&#x27;</span>]</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        apimsg = <span class="string">&#x27;有必填参数没有填写，请检查是否填写正确和格式是否错误。详情可以参阅：https://blog.zhheo.com/p/1e9f35bc.html&#x27;</span></span><br><span class="line">        status = <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># 执行主程序</span></span><br><span class="line">            getTocken(<span class="built_in">id</span>=apiid,secert=apisecert,msg=apimsg,agentId=apiagentId)</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            status = <span class="number">1</span></span><br><span class="line">            apimsg = <span class="string">&#x27;主程序运行时出现错误，请检查参数是否填写正确。详情可以参阅：https://blog.zhheo.com/p/1e9f35bc.html&#x27;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            status = <span class="number">0</span></span><br><span class="line">    <span class="comment"># print(event)</span></span><br><span class="line">    <span class="comment"># print(&quot;Received event: &quot; + json.dumps(event, indent = 2)) </span></span><br><span class="line">    <span class="comment"># print(&quot;Received context: &quot; + str(context))</span></span><br><span class="line">    <span class="comment"># print(&quot;Hello world&quot;)</span></span><br><span class="line">    status_str = json.dumps(&#123;</span><br><span class="line">            <span class="string">&quot;status&quot;</span>:status,</span><br><span class="line">            <span class="string">&quot;msg&quot;</span>:apimsg</span><br><span class="line">        &#125;)</span><br><span class="line">    <span class="keyword">return</span>(status_str)</span><br></pre></td></tr></table></figure>

<p>配置好访问服务（如果第一次创建，参考 Twikoo 教程还需要配置安全域名等）：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">域名：*</span><br><span class="line">触发路径：/weixin-push           (自定义)</span><br><span class="line">关联资源：云函数   weixin-push    (上文创建的云函数)</span><br></pre></td></tr></table></figure>

<p><img src="/../img/%E5%88%A9%E7%94%A8%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E5%AE%9E%E7%8E%B0twikoo%E6%96%B0%E6%B6%88%E6%81%AF%E6%8F%90%E9%86%92/202202061010000.jpg"></p>
<p>至此，云函数创建完成。可以使用下面这样的方式，拼接一个 URL，浏览器访问，看看手机微信能不能接收到消息。</p>
<p>云函数的访问服务 URL + 触发路径 + ?id &#x3D; 你的企业微信 ID + secert &#x3D; 上文记录的 secert + Id &#x3D; 上文记录的 AgentId + &amp;msg &#x3D; 随便测试一下吧</p>
<p>如我下面这样的：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://blogpkly-13278c-1258453354.ap-shanghai.app.tcloudbase.com/weixin-push?id=ww*******&amp;secert=Ne******&amp;agentId=1000003&amp;msg=随便测试一下吧</span><br></pre></td></tr></table></figure>

<p>浏览器返回以下内容，说明配置完成 (msg 后的内容，是 Unicode 编码后的 “随便测试一下吧” 内容，点击这里可以转换 )。</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="attr">&quot;msg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;\u968f\u4fbf\u6d4b\u8bd5\u4e00\u4e0b\u5427&quot;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="Twikoo-配置"><a href="#Twikoo-配置" class="headerlink" title="Twikoo 配置"></a>Twikoo 配置</h4><p>在 Twikoo v1.4.5 及以上版本中，打开控制面板，在上述企业微信 API 搭建完成后，拼接成下述样式的 URL，填写在即时通知 ——WECOM_API_URL 中即可完成配置。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://blogpkly-13278c-1258453354.ap-shanghai.app.tcloudbase.com/weixin-push?id=企业微信获取&amp;secert=企业微信获取&amp;agentId=企业微信获取&amp;msg=</span><br></pre></td></tr></table></figure>

<p>微信关注自己的企业微信账号，然后用其他非博主邮箱在网站留言，试试即时通知吧！</p>
<h2 id="更换-CDN-镜像"><a href="#更换-CDN-镜像" class="headerlink" title="更换 CDN 镜像"></a>更换 CDN 镜像</h2><blockquote>
<p>如果遇到默认 CDN 加载速度缓慢，可更换其他 CDN 镜像。以下为可供选择的公共 CDN，其中一些 CDN 可能需要数天时间同步最新版本：</p>
<ul>
<li><code>https://cdn.staticfile.org/twikoo/1.6.4/twikoo.all.min.js</code></li>
<li><code>https://lib.baomitu.com/twikoo/1.6.4/twikoo.all.min.js</code></li>
<li><code>https://cdn.bootcdn.net/ajax/libs/twikoo/1.6.4/twikoo.all.min.js</code></li>
<li><code>https://cdn.jsdelivr.net/npm/twikoo@1.6.4/dist/twikoo.all.min.js</code></li>
</ul>
</blockquote>
<p>例如<a href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly主题 </a>：</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">  custom_format:</span><br><span class="line">  </span><br><span class="line">  option:</span><br><span class="line">    # main_css:</span><br><span class="line">    # main:</span><br><span class="line">    # utils:</span><br><span class="line">    # translate:</span><br><span class="line">    # local_search:</span><br><span class="line">    # algolia_js:</span><br><span class="line">    # algolia_search_v4:</span><br><span class="line">    # instantsearch_v4:</span><br><span class="line">    # pjax:</span><br><span class="line">    # gitalk:</span><br><span class="line">    # gitalk_css:</span><br><span class="line">    # blueimp_md5:</span><br><span class="line">    # valine:</span><br><span class="line">    # disqusjs:</span><br><span class="line">    # disqusjs_css:</span><br><span class="line"><span class="addition">+     twikoo: https://cdn.staticfile.org/twikoo/1.6.4/twikoo.all.min.js</span></span><br></pre></td></tr></table></figure>



<blockquote>
<p>以前记得只需更改后端版本号即可，不知什么时候开始还要更改前端CDN才行。也许主题前端没有更新到最新的版本号。这时只有自定义CDN了，还好</p>
<p><code>butterfly</code>主题很容易就能自定义CDN</p>
</blockquote>
<h2 id="更换表情CDN"><a href="#更换表情CDN" class="headerlink" title="更换表情CDN"></a>更换表情CDN</h2><p>仓库地址：<a href="https://github.com/zhheo">zhheo</a>&#x2F;<a href="https://github.com/zhheo/Sticker-Heo">Sticker-Heo</a></p>
<p>使用：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">https<span class="punctuation">:</span><span class="comment">//cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/twikoo.json</span></span><br><span class="line">https<span class="punctuation">:</span><span class="comment">//cdn1.tianli0.top/npm/sticker-heo@2022.7.5/twikoo.json</span></span><br></pre></td></tr></table></figure>

<h2 id="Twikoo-导出评论数据"><a href="#Twikoo-导出评论数据" class="headerlink" title="Twikoo 导出评论数据"></a>Twikoo 导出评论数据</h2><blockquote>
<p>Twikoo前端后台只有导入数据功能，没有导出，要想导出数据，看下面。</p>
</blockquote>
<h3 id="导出-Twikoo-在-Vercel-的数据"><a href="#导出-Twikoo-在-Vercel-的数据" class="headerlink" title="导出 Twikoo 在 Vercel 的数据"></a>导出 Twikoo 在 Vercel 的数据</h3><p>1.下载并安装 MongoDB 数据库工具，下载地址：<a href="https://www.mongodb.com/try/download/database-tools%EF%BC%9B">https://www.mongodb.com/try/download/database-tools；</a></p>
<p>&#96;</p>
<p>然后添加环境变量：<code>D:\Program Files\mongodb-database-tools-windows-x86_64-100.5.4\bin</code>到<code>Path</code></p>
<p>2.登录 <a href="https://vercel.com/">Vercel 管理后台</a>，点开 Twikoo 的环境，点击上方的 Settings，点击左侧的 Environment Variables，在页面下方找到 MONGODB_URI，点击对应的小眼睛图标，会出现数据库连接地址，点击以复制这串地址；</p>
<p>3.如果地址中包含参数，请先删去参数，参数即 “?” 和 “?” 后面的部分，例如 <code>?journal=true&amp;w=majority</code>；</p>
<p>4.打开一个命令行窗口，粘贴以下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mongoexport --uri 这里换成刚才复制的地址 --collection comment --type json --out twikoo-comments.json</span><br></pre></td></tr></table></figure>

<p>5.如果成功，你可以在当前目录下找到导出的 twikoo-comments.json 文件。</p>
<h3 id="导出-Twikoo-在腾讯云的数据"><a href="#导出-Twikoo-在腾讯云的数据" class="headerlink" title="导出 Twikoo 在腾讯云的数据"></a>导出 Twikoo 在腾讯云的数据</h3><p>1.登录 <a href="https://console.cloud.tencent.com/tcb">腾讯云</a>；</p>
<p>2.打开云开发 CloudBase；</p>
<p>3.选择要导出的环境；</p>
<p>4.点击左侧的数据库，点击 comment 集合，点击导出按钮；</p>
<p>5.导出格式选择 JSON（推荐，如果想用 Excel 等软件查看，可以选择 CSV），字段不填；</p>
<p>6.点击导出按钮，导出的数据会通过浏览器自动下载。</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://guole.fun/posts/626/">搭建微信通知 API 实现 Twikoo 新消息提醒</a></li>
<li><a href="https://www.cnblogs.com/yyyzyyyz/p/15542401.html#%E5%88%A9%E7%94%A8%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E5%AE%9E%E7%8E%B0twikoo%E6%96%B0%E6%B6%88%E6%81%AF%E6%8F%90%E9%86%92">利用企业微信实现twikoo新消息提醒(python.py错误)</a></li>
<li><a href="https://lucheng.xyz/2022/01/09/wechat-message-vercel/">微信通知Twikoo新消息提醒（Vercel版本）（python.py正确)</a></li>
<li><a href="https://pushoo.js.org/">twikoo即时消息推送</a></li>
<li><a href="https://www.codeleading.com/article/43653014515/">pip安装virtualenv报错：ERROR: Exception: Traceback (most recent call last)—有效解决方法</a></li>
<li><a href="https://blog.csdn.net/weixin_45252106/article/details/121973562">pipenv install 包名 报错问题解决</a></li>
<li><a href="https://www.imaegoo.com/2022/twikoo-data-export/">Twikoo 评论数据导出教程</a></li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>利用github Actions自动同步项目到gitee并自动部署Gitee Pages</title>
    <url>/archives/4e8cacb0/</url>
    <content><![CDATA[<p> 首先确保<code>gitee</code>账户已绑定邮箱，并且要关注<code>gitee</code>公众号，并绑定了自己的账号。</p>
<h2 id="安装GIt"><a href="#安装GIt" class="headerlink" title="安装GIt"></a>安装GIt</h2><p>本地需要安装 <a href="https://git-scm.com/">Git</a> ，安装过程略。安装完git后还要配置环境变量： 右键我的电脑 –&gt; 属性，然后点击高级系统设置 –&gt; 环境变量 –&gt; 选择用户变量或系统变量中的Path,点击编辑；找到Git安装目录,添加以下地址:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">D:\Program Files\Git\bin</span><br><span class="line">D:\Program Files\Git\mingw64\libexec\git-core</span><br><span class="line">D:\Program Files\Git\mingw64\bin</span><br></pre></td></tr></table></figure>

<h2 id="生成SSH-公钥"><a href="#生成SSH-公钥" class="headerlink" title="生成SSH 公钥"></a>生成SSH 公钥</h2><p>Windows 上安装 <a href="https://git-for-windows.github.io/">Git for Windows</a> 之后在开始菜单里打开 Git Bash 输入：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;你的用户名&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;你的电子邮箱&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line"><span class="built_in">mkdir</span> .ssh</span><br><span class="line"><span class="built_in">cd</span> .ssh</span><br><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>

<p>这样就在系统当前用户文件夹下生成了私钥 <code>id_rsa</code> 和公钥 <code>id_rsa.pub</code>。</p>
<h2 id="配置SSH-公钥"><a href="#配置SSH-公钥" class="headerlink" title="配置SSH 公钥"></a>配置SSH 公钥</h2><ul>
<li>在 GitHub 项目的「Settings -&gt; Secrets」路径下配置好命名为 <code>GITEE_RSA_PRIVATE_KEY</code> 和 <code>GITEE_PASSWORD</code> 的两个密钥。其中：<code>GITEE_RSA_PRIVATE_KEY</code> 存放 <code>id_rsa</code> 私钥；<code>GITEE_PASSWORD</code> 存放 <code>Gitee</code> 帐号的密码</li>
<li>在 GitHub 的个人设置页面「Settings -&gt; SSH and GPG keys」 配置 SSH 公钥（即：id_rsa.pub），命名随意</li>
<li>在 Gitee 的个人设置页面「安全设置 -&gt; SSH 公钥」 配置 SSH 公钥（即：id_rsa.pub），命名随意</li>
</ul>
<h2 id="配置GitHub-Actions"><a href="#配置GitHub-Actions" class="headerlink" title="配置GitHub Actions"></a>配置GitHub Actions</h2><p>新建文件<code>.github/workflows/Sync to Gitee.yml</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Sync</span> <span class="string">to</span> <span class="string">Gitee</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span> <span class="string">develop</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Sync</span> <span class="string">to</span> <span class="string">Gitee</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">wearerequired/git-mirror-action@master</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="comment"># 注意在 Settings-&gt;Secrets 配置 GITEE_RSA_PRIVATE_KEY</span></span><br><span class="line">          <span class="attr">SSH_PRIVATE_KEY:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITEE_RSA_PRIVATE_KEY</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="comment"># 注意替换为你的 GitHub 源仓库地址</span></span><br><span class="line">          <span class="attr">source-repo:</span> <span class="string">git@github.com:iwyang/iwyang.github.io.git</span></span><br><span class="line">          <span class="comment"># 注意替换为你的 Gitee 目标仓库地址</span></span><br><span class="line">          <span class="attr">destination-repo:</span> <span class="string">git@gitee.com:iwyang/iwyang.git</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">Gitee</span> <span class="string">Pages</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">yanglbme/gitee-pages-action@main</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="comment"># 注意替换为你的 Gitee 用户名</span></span><br><span class="line">          <span class="attr">gitee-username:</span> <span class="string">iwyang</span></span><br><span class="line">          <span class="comment"># 注意在 Settings-&gt;Secrets 配置 GITEE_PASSWORD</span></span><br><span class="line">          <span class="attr">gitee-password:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITEE_PASSWORD</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="comment"># 注意替换为你的 Gitee 仓库，仓库名严格区分大小写，请准确填写，否则会出错</span></span><br><span class="line">          <span class="attr">gitee-repo:</span> <span class="string">iwyang/iwyang</span></span><br><span class="line">          <span class="comment"># 要部署的分支，默认是 master，若是其他分支，则需要指定（指定的分支必须存在）</span></span><br><span class="line">          <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>

<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://wqdy.top/2023.html">使用 github actions 将 github 项目自动同步到 gitee 并自动部署 Gitee Pages</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title>北师大三年级数学上册优质课</title>
    <url>/archives/e6a5162e/</url>
    <content><![CDATA[<p>北师大三年级数学上册优质课，来源于一师一优课，基本上都是部级优课，<a href="https://www.bilibili.com/video/BV1cK4y1u7Dq/">点击前往bilibili</a>可选集观看。 </p>
<div align=center class="aspect-ratio">
    <iframe src="https://player.bilibili.com/player.html?aid=889100625&&page=1&as_wide=1&high_quality=1&danmaku=0" 
    scrolling="no" 
    border="0" 
    frameborder="no" 
    framespacing="0" 
    high_quality=1
    danmaku=1 
    allowfullscreen="true"> 
    </iframe>
</div>
]]></content>
      <categories>
        <category>教学</category>
      </categories>
      <tags>
        <tag>视频</tag>
        <tag>三年级数学</tag>
      </tags>
  </entry>
  <entry>
    <title>北师大三年级数学下册优质课</title>
    <url>/archives/3b33cfab/</url>
    <content><![CDATA[<p>北师大三年级数学下册优质课，来源于一师一优课，基本上都是部级优课，<a href="https://www.bilibili.com/video/BV1TP4y177xe/">点击前往bilibili</a>可选集观看。 </p>
<div align=center class="aspect-ratio">
    <iframe src="https://player.bilibili.com/player.html?aid=893246164&&page=1&as_wide=1&high_quality=1&danmaku=0" 
    scrolling="no" 
    border="0" 
    frameborder="no" 
    framespacing="0" 
    high_quality=1
    danmaku=1 
    allowfullscreen="true"> 
    </iframe>
</div>
1.原来一束鲜花152元。现在一线在鲜花买三束送一束。现在每数比原来便宜多少元？

<p>买三束送一束就是三束花的钱买到4束。所以用三束花的钱除以4得出现在每束花的价钱，再用原来一束的价钱减去现在一束花的价钱。</p>
]]></content>
      <categories>
        <category>教学</category>
      </categories>
      <tags>
        <tag>视频</tag>
        <tag>三年级数学</tag>
      </tags>
  </entry>
  <entry>
    <title>北师大二年级数学下册优质课</title>
    <url>/archives/fa5e748a/</url>
    <content><![CDATA[<p> 北师大二年级数学下册优质课，来源于一师一优课，基本上都是部级优课，点击<a href="https://www.bilibili.com/video/BV1MK4y1P7M1/">前往bilibili</a>可选集观看。</p>
<div align=center class="aspect-ratio">
    <iframe src="https://player.bilibili.com/player.html?aid=887622055&&page=1&as_wide=1&high_quality=1&danmaku=0" 
    scrolling="no" 
    border="0" 
    frameborder="no" 
    framespacing="0" 
    high_quality=1
    danmaku=1 
    allowfullscreen="true"> 
    </iframe>
</div>
]]></content>
      <categories>
        <category>教学</category>
      </categories>
      <tags>
        <tag>视频</tag>
        <tag>二年级数学</tag>
      </tags>
  </entry>
  <entry>
    <title>去掉试卷图片灰色背景的方法</title>
    <url>/archives/382714ef/</url>
    <content><![CDATA[<ol>
<li>使用qq浏览器等软件的<code>扫描文档</code>功能。</li>
<li>word中，右键依次选择<code>设置图片格式—图片—图片校正—调高对比度（100%）和清晰度</code>（100%）和亮度（50%）。</li>
<li>WPS中，依次点击<code>图片工具—调高对比度</code>。</li>
</ol>
<p>PS里的操作：</p>
<p>1.先按快捷键<code>Ctrl+Shift+U</code>去色。</p>
<p>2.<code>Ctrl+L</code>调出色阶，白色吸管点背景。如果对比不够，继续调整色阶的滑块。</p>
<p>3.<code>Ctrl+J</code>复制一个图层，点击<code>滤镜—其它—高反差保留</code>，设置为2个像素。</p>
<p>4.图层混合模式改成<code>线性光</code>（或者<code>柔光</code>）。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>word</tag>
      </tags>
  </entry>
  <entry>
    <title>在Centos服务器部署Halo</title>
    <url>/archives/119bcfe3/</url>
    <content><![CDATA[<p>  本教程以 <code>CentOS 7.x</code> 为例，配置并运行 <code>Halo</code>，其他 Linux 发行版大同小异。</p>
<h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><ol>
<li>具备一定的 Linux 基础。</li>
<li>如需域名绑定，请先保证已经正确解析 IP，以及确认服务器是否需要备案。</li>
<li>如需使用 IP 访问，请先确保 Halo 的运行端口已经打开，除非你使用 80 端口运行 Halo。</li>
<li>如 3 所述，如果你使用了类似 <code>宝塔面板</code> 之类的 Linux 管理面板，可能还需要在面板里设置端口。</li>
<li>不要想当然，请严格按照文档的流程操作。</li>
</ol>
<h2 id="Win10配置java环境变量"><a href="#Win10配置java环境变量" class="headerlink" title="Win10配置java环境变量"></a>Win10配置java环境变量</h2><h3 id="下载-amp-amp-安装JDK"><a href="#下载-amp-amp-安装JDK" class="headerlink" title="下载&amp;&amp; 安装JDK"></a>下载&amp;&amp; 安装JDK</h3><p>下载地址：<a href="https://www.oracle.com/java/technologies/downloads/">https://www.oracle.com/java/technologies/downloads/</a></p>
<p>2022.5.26 java18 本地不可用，java17 本地可用。（halo版本：1.5.3）</p>
<h3 id="环境变量配置"><a href="#环境变量配置" class="headerlink" title="环境变量配置"></a>环境变量配置</h3><ol>
<li><p>打开 环境变量窗口，右键 <strong>This PC(此电脑) -&gt; Properties（属性） -&gt; Advanced system settings（高级系统设置） -&gt; Environment Variables（环境变量）…</strong></p>
</li>
<li><p>新建JAVA_HOME 变量，点击 New（新建）… 按钮，输入:</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">变量名：JAVA_HOME</span><br><span class="line">变量值：电脑上JDK安装的绝对路径(例如：C:\Program Files\Java\jdk-17.0.2)</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>新建&#x2F;修改 CLASSPATH 变量，如果存在 <strong>CLASSPATH</strong> 变量，选中点击 **Edit(编辑)**。如果没有，点击 <strong>New（新建）…</strong> 新建。输入&#x2F;在已有的变量值后面添加：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">变量名：CLASSPATH</span><br><span class="line">变量值：.;%JAVA_HOME%\lib\dt.jar;%JAVA_HOME%\lib\tools.jar;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>修改Path 变量。由于 win10 的不同，当选中 <strong>Path</strong> 变量的时候，系统会很方便的把所有不同路径都分开了，不会像 win7 或者 win8 那样连在一起。新建两条路径：</li>
</ol>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">%JAVA_HOME%\bin</span><br><span class="line">%JAVA_HOME%\jre\bin</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>检查 打开 cmd，输入 <strong>java</strong>，出现一连串的指令提示，说明配置成功了。</li>
</ol>
<h2 id="环境要求"><a href="#环境要求" class="headerlink" title="环境要求"></a>环境要求</h2><p>为了在使用过程中不出现意外的事故，给出下列推荐的配置</p>
<ul>
<li>CentOS 7.x</li>
<li>512 MB 以上内存</li>
</ul>
<h2 id="服务器配置"><a href="#服务器配置" class="headerlink" title="服务器配置"></a>服务器配置</h2><h3 id="更新软件包"><a href="#更新软件包" class="headerlink" title="更新软件包"></a>更新软件包</h3><p>请确保服务器的软件包已经是最新的。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo yum update -y</span><br></pre></td></tr></table></figure>

<h3 id="装-Java-运行环境"><a href="#装-Java-运行环境" class="headerlink" title="装 Java 运行环境"></a>装 Java 运行环境</h3><blockquote>
<p>若已经存在 Java 运行环境的可略过这一步。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 安装 OpenJRE</span></span><br><span class="line">sudo yum install java-11-openjdk -y</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检测是否安装成功</span></span><br><span class="line">java -version</span><br></pre></td></tr></table></figure>

<p>当然，这只是其中一种比较简单的安装方式，你也可以用其他方式，并不是强制要求使用这种方式安装。</p>
<h2 id="创建-Halo-用户"><a href="#创建-Halo-用户" class="headerlink" title="创建 Halo 用户"></a>创建 Halo 用户</h2><p><del>我们推荐创建一个低权限的用户运行 <code>halo</code></del>：（这一步我没有进行，直接用root）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 创建 halo 用户</span></span><br><span class="line">sudo useradd -m halo</span><br><span class="line"><span class="comment"># 直接登录该用户</span></span><br><span class="line">sudo su halo</span><br></pre></td></tr></table></figure>

<h2 id="安装-Halo"><a href="#安装-Halo" class="headerlink" title="安装 Halo"></a>安装 Halo</h2><h3 id="创建存放运行包的目录"><a href="#创建存放运行包的目录" class="headerlink" title="创建存放运行包的目录"></a>创建存放运行包的目录</h3><p>创建存放 运行包 的目录，这里以 ~&#x2F;app 为例</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> ~/app &amp;&amp; <span class="built_in">cd</span> ~/app</span><br></pre></td></tr></table></figure>
<h3 id="下载运行包"><a href="#下载运行包" class="headerlink" title="下载运行包"></a>下载运行包</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget https://dl.halo.run/release/halo-1.5.3.jar -O halo.jar</span><br></pre></td></tr></table></figure>
<h3 id="创建工作目录"><a href="#创建工作目录" class="headerlink" title="创建工作目录"></a>创建工作目录</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> ~/.halo &amp;&amp; <span class="built_in">cd</span> ~/.halo</span><br></pre></td></tr></table></figure>
<h3 id="下载配置文件"><a href="#下载配置文件" class="headerlink" title="下载配置文件"></a>下载配置文件</h3><p>考虑到部分用户的需要，可能需要自定义比如端口等设置项，我们提供了公共的配置文件，并且该配置文件是完全独立于安装包的。当然，你也可以使用安装包内的默认配置文件，但是安装包内的配置文件是不可修改的。请注意：配置文件的路径为 <code>~/.halo/application.yaml</code>。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 下载配置文件到 ~/.halo 目录</span></span><br><span class="line">wget https://dl.halo.run/config/application-template.yaml -O ./application.yaml </span><br></pre></td></tr></table></figure>
<h3 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h3><p>完成上一步操作，我们就可以自己配置 <code>Halo</code> 的运行端口，以及数据库相关的配置了。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 使用 Vi 工具修改配置文件</span></span><br><span class="line">vi ~/.halo/application.yaml</span><br></pre></td></tr></table></figure>

<p>打开之后我们可以看到</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8090</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Response data gzip.</span></span><br><span class="line">  <span class="attr">compression:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="comment"># H2 database configuration.</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">org.h2.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:h2:file:~/.halo/db/halo</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">admin</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># MySQL database configuration.</span></span><br><span class="line">  <span class="comment">#    driver-class-name: com.mysql.cj.jdbc.Driver</span></span><br><span class="line">  <span class="comment">#    url: jdbc:mysql://127.0.0.1:3306/halodb?characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai&amp;allowPublicKeyRetrieval=true</span></span><br><span class="line">  <span class="comment">#    username: root</span></span><br><span class="line">  <span class="comment">#    password: 123456</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># H2 database console configuration.</span></span><br><span class="line">  <span class="attr">h2:</span></span><br><span class="line">    <span class="attr">console:</span></span><br><span class="line">      <span class="attr">settings:</span></span><br><span class="line">        <span class="attr">web-allow-others:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">path:</span> <span class="string">/h2-console</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="attr">halo:</span></span><br><span class="line">  <span class="comment"># Your admin client path is https://your-domain/&#123;admin-path&#125;</span></span><br><span class="line">  <span class="attr">admin-path:</span> <span class="string">admin</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># memory or level</span></span><br><span class="line">  <span class="attr">cache:</span> <span class="string">memory</span></span><br></pre></td></tr></table></figure>

<ol>
<li>如果需要自定义端口，修改 <code>server</code> 节点下的 <code>port</code> 即可。</li>
<li>默认使用的是 <code>H2 Database</code> 数据库，这是一种嵌入式的数据库，使用起来非常方便。需要注意的是，默认的用户名和密码为 <code>admin</code> 和 <code>123456</code>，这个是自定义的，最好将其修改，并妥善保存。</li>
<li>如果需要使用 <code>MySQL</code> 数据库，需要将 <code>H2 Database</code> 的所有相关配置都注释掉，并取消 <code>MySQL</code> 的相关配置。另外，<code>MySQL</code> 的默认数据库名为 <code>halodb</code>，请自行配置 <code>MySQL</code> 并创建数据库，以及修改配置文件中的用户名和密码。</li>
<li><code>h2</code> 节点为 <code>H2 Database</code> 的控制台配置，默认是关闭的，如需使用请将 <code>h2.console.settings.web-allow-others</code> 和 <code>h2.console.enabled</code> 设置为 <code>true</code>。控制台地址即为 <code>域名/h2-console</code>。注意：非紧急情况，不建议开启该配置。</li>
<li><code>server.compression.enabled</code> 为 <code>Gzip</code> 功能配置，如有需要请设置为 <code>true</code>，需要注意的是，如果你使用 <code>Nginx</code> 或者 <code>Caddy</code> 进行反向代理的话，默认是有开启 <code>Gzip</code> 的，所以这里可以保持默认。</li>
<li><code>halo.admin-path</code> 为后台管理的根路径，默认为 <code>admin</code>，如果你害怕别人猜出来默认的 <code>admin</code>（就算猜出来，对方什么都做不了），请自行设置。仅支持一级，且前后不带 <code>/</code>。</li>
<li><code>halo.cache</code> 为系统缓存形式的配置，可选 <code>memory</code> 和 <code>level</code>，默认为 <code>memory</code>，将数据缓存到内存，使用该方式的话，重启应用会导致缓存清空。如果选择 <code>level</code>，则会将数据缓存到磁盘，重启不会清空缓存。如不知道如何选择，建议默认。</li>
</ol>
<p>注意：使用 MySQL 之前，必须要先新建一个 <code>halodb</code> 数据库，MySQL 版本需 5.7 以上。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> database halodb <span class="type">character</span> <span class="keyword">set</span> utf8mb4 <span class="keyword">collate</span> utf8mb4_bin;</span><br></pre></td></tr></table></figure>
<p>注意：使用 MySQL 之前，必须要先新建一个 halodb 数据库，MySQL 版本需 5.7 以上。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">create database halodb character <span class="built_in">set</span> utf8mb4 collate utf8mb4_bin;</span><br></pre></td></tr></table></figure>
<h3 id="运行-Halo"><a href="#运行-Halo" class="headerlink" title="运行 Halo"></a>运行 Halo</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/app &amp;&amp; java -jar halo.jar</span><br></pre></td></tr></table></figure>

<p>如看到以下日志输出，则代表启动成功.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">run.halo.app.listener.StartedListener    : Halo started at         http://127.0.0.1:8090</span><br><span class="line">run.halo.app.listener.StartedListener    : Halo admin started at   http://127.0.0.1:8090/admin</span><br><span class="line">run.halo.app.listener.StartedListener    : Halo has started successfully!</span><br></pre></td></tr></table></figure>

<p>提示：以上的启动仅仅为测试 Halo 是否可以正常运行，如果我们关闭 ssh 连接，Halo 也将被关闭。要想一直处于运行状态，请继续看下面的教程。</p>
<h3 id="作为服务运行"><a href="#作为服务运行" class="headerlink" title="作为服务运行"></a>作为服务运行</h3><p>上面我们已经完成了 Halo 的整个配置和安装过程，接下来我们对其进行更完善的配置，比如：<code>需要开机自启？</code>，<code>更简单的启动方式？</code></p>
<p>实现以上功能我们只需要新增一个配置文件即可，也就是使用 <code>Systemd</code> 来完成这些工作。</p>
<p>1.退出 halo 账户，登录到 root 账户</p>
<blockquote>
<p>如果当前就是 root 账户，请略过此步骤。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
<p>2.下载 Halo 官方的 halo.service 模板</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget https://dl.halo.run/config/halo.service -O /etc/systemd/system/halo.service</span><br></pre></td></tr></table></figure>
<p>3.修改 halo.service</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/systemd/system/halo.service</span><br></pre></td></tr></table></figure>
<p>4.修改配置</p>
<h3 id="下载-Halo-官方的-halo-service-模板"><a href="#下载-Halo-官方的-halo-service-模板" class="headerlink" title="下载 Halo 官方的 halo.service 模板"></a>下载 Halo 官方的 halo.service 模板</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wget https://dl.halo.run/config/halo.service -O /etc/systemd/system/halo.service</span><br></pre></td></tr></table></figure>
<p>3.修改 halo.service<br>下载完成之后，我们还需要对其进行修改。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vi /etc/systemd/system/halo.service</span><br></pre></td></tr></table></figure>

<p>打开之后我们可以看到</p>
<ul>
<li><code>YOUR_JAR_PATH</code>：Halo 运行包的绝对路径，例如 <code>/root/app/halo.jar</code>，注意：此路径不支持 ~ 符号。</li>
<li><code>USER</code>：运行 Halo 的系统用户，如果有按照上方教程创建新的用户来运行 Halo，修改为你创建的用户名称即可。反之请删除 <strong>User&#x3D;USER</strong>。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Halo Service</span><br><span class="line">Documentation=https://halo.run</span><br><span class="line">After=network-online.target</span><br><span class="line">Wants=network-online.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">User=USER</span><br><span class="line">ExecStart=/usr/bin/java -server -Xms256m -Xmx256m -jar YOUR_JAR_PATH</span><br><span class="line">ExecStop=/bin/kill -s QUIT $MAINPID</span><br><span class="line">Restart=always</span><br><span class="line">StandOutput=syslog</span><br><span class="line"></span><br><span class="line">StandError=inherit</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<p>参数：</p>
<ul>
<li>-Xms256m：为 JVM 启动时分配的内存，请按照服务器的内存做适当调整，512 M 内存的服务器推荐设置为 128，1G 内存的服务器推荐设置为 256，默认为 256。</li>
<li>-Xmx256m：为 JVM 运行过程中分配的最大内存，配置同上。</li>
<li>YOUR_JAR_PATH：Halo 安装包的绝对路径，例如 <code>/www/wwwroot/halo-latest.jar</code>。</li>
</ul>
<p>提示：</p>
<ol>
<li>如果你不是按照上面的方法安装的 JDK，请确保 <code>/usr/bin/java</code> 是正确无误的。</li>
<li>systemd 中的所有路径均要写为绝对路径，另外，<code>~</code> 在 systemd 中也是无法被识别的，所以你不能写成类似 <code>~/halo-latest.jar</code> 这种路径。</li>
<li>如何检验是否修改正确：把 ExecStart 中的命令拿出来执行一遍。</li>
</ol>
<p>5.重新加载 systemd</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 修改 service 文件之后需要刷新 Systemd</span></span><br><span class="line">systemctl daemon-reload</span><br></pre></td></tr></table></figure>
<p>6.运行服务</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl start halo</span><br></pre></td></tr></table></figure>
<p>7.在系统启动时启动服务</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> halo</span><br></pre></td></tr></table></figure>
<p>您可以查看服务日志检查启动状态</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">journalctl -n 20 -u halo</span><br></pre></td></tr></table></figure>


<h2 id="配置域名访问"><a href="#配置域名访问" class="headerlink" title="配置域名访问"></a>配置域名访问</h2><ol>
<li>假设你已经成功配置并运行好了 Halo，且不是使用 80 端口运行。</li>
<li>请确保域名已经成功解析到服务器 IP，并确认服务器是否需要备案。</li>
<li>请检查服务器的 80 和 443 端口是否开放。</li>
<li>如 3 所述，如果你使用了类似 <code>宝塔面板</code> 之类的 Linux 管理面板，可能还需要在面板里设置端口。</li>
<li>并不一定要求按照下列教程操作，这里仅仅以供参考。</li>
<li>如 2 所述，你需要做的仅仅是反向代理 Halo 运行端口，并配置 SSL 证书而已，所以并不要求配置方式。</li>
</ol>
<h3 id="使用-Nginx-进行反向代理"><a href="#使用-Nginx-进行反向代理" class="headerlink" title="使用 Nginx 进行反向代理"></a>使用 Nginx 进行反向代理</h3><p>我使用的是这一种方法。</p>
<h4 id="安装-Nginx"><a href="#安装-Nginx" class="headerlink" title="安装 Nginx"></a>安装 Nginx</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 添加 Nginx 源</span></span><br><span class="line">sudo rpm -Uvh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装 Nginx</span></span><br><span class="line">sudo yum install -y nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动 Nginx</span></span><br><span class="line">sudo systemctl start nginx.service</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置开机自启 Nginx</span></span><br><span class="line">sudo systemctl <span class="built_in">enable</span> nginx.service</span><br></pre></td></tr></table></figure>

<h4 id="配置-Nginx"><a href="#配置-Nginx" class="headerlink" title="配置 Nginx"></a>配置 Nginx</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 下载 Halo 官方的 Nginx 配置模板</span></span><br><span class="line">curl -o /etc/nginx/conf.d/halo.conf --create-dirs https://dl.halo.run/config/nginx.conf</span><br></pre></td></tr></table></figure>

<p>下载完成之后，我们还需要对其进行修改</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 使用 vim 编辑 halo.conf</span></span><br><span class="line">vi /etc/nginx/conf.d/halo.conf</span><br></pre></td></tr></table></figure>

<p>打开之后我们可以看到</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">upstream</span> halo &#123;</span><br><span class="line">  <span class="attribute">server</span> <span class="number">127.0.0.1:8090</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">  <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">  <span class="attribute">listen</span> [::]:<span class="number">80</span>;</span><br><span class="line">  <span class="attribute">server_name</span> www.yourdomain.com;</span><br><span class="line">  <span class="attribute">client_max_body_size</span> <span class="number">1024m</span>;</span><br><span class="line">  <span class="section">location</span> / &#123;</span><br><span class="line">    <span class="attribute">proxy_pass</span> http://halo;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> HOST <span class="variable">$host</span>;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> X-Forwarded-Proto <span class="variable">$scheme</span>;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意：Nginx 默认的 client_max_body_size 配置大小为 1m，可能会导致你在 Halo 后台上传文件被 Nginx 限制，所以此示例配置文件加上了 client_max_body_size 1024m; 这行配置。当然，1024m 可根据你的需要自行修改。</p>
<p>修改完成之后</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 检查配置是否有误</span></span><br><span class="line">sudo nginx -t</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重载 Nginx 配置</span></span><br><span class="line">sudo nginx -s reload</span><br></pre></td></tr></table></figure>

<h3 id="配置阿里云免费证书SSL-证书"><a href="#配置阿里云免费证书SSL-证书" class="headerlink" title="配置阿里云免费证书SSL 证书"></a>配置阿里云免费证书SSL 证书</h3><p>目前使用的是Let’s Encrypt 免费证书。</p>
<p>1.在nginx根目录（默认为&#x2F;etc&#x2F;nginx）下创建目录cert。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd /etc/nginx</span><br><span class="line">mkdir cert</span><br></pre></td></tr></table></figure>
<p>2.把下载的证书两个文件.pem和.key上传到目录cert中。</p>
<p>3.修改nginx配置文件（目前使用的是下面的官方推荐配置）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/nginx/conf.d/halo.conf</span><br></pre></td></tr></table></figure>
<p><del>自定义配置</del>(不要用这个，用下面的官方配置）：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">server</span> &#123;</span><br><span class="line">    <span class="string">listen</span> <span class="number">80</span><span class="string">;</span></span><br><span class="line">    <span class="string">server_name</span> <span class="string">bore.vip</span> <span class="string">www.bore.vip;</span></span><br><span class="line">    <span class="string">rewrite</span> <span class="string">^(.*)$</span> <span class="string">https://$host$1</span> <span class="string">permanent;</span></span><br><span class="line"></span><br><span class="line">    <span class="string">client_max_body_size</span> <span class="string">1024m;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="string">server</span> &#123;</span><br><span class="line">    <span class="string">listen</span> <span class="number">443</span> <span class="string">ssl;</span></span><br><span class="line"></span><br><span class="line">    <span class="string">server_name</span> <span class="string">bore.vip;</span></span><br><span class="line"></span><br><span class="line">    <span class="string">ssl_certificate</span> <span class="string">/etc/nginx/cert/bore.vip.pem;</span></span><br><span class="line">    <span class="string">ssl_certificate_key</span> <span class="string">/etc/nginx/cert/bore.vip.key;</span></span><br><span class="line">    <span class="string">ssl_session_timeout</span> <span class="string">5m;</span></span><br><span class="line">    <span class="string">ssl_ciphers</span> <span class="string">ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span></span><br><span class="line">    <span class="string">ssl_protocols</span> <span class="string">TLSv1</span> <span class="string">TLSv1.1</span> <span class="string">TLSv1.2;</span></span><br><span class="line">    <span class="string">ssl_prefer_server_ciphers</span> <span class="string">on;</span></span><br><span class="line"></span><br><span class="line">    <span class="string">location</span> <span class="string">/</span> &#123;</span><br><span class="line">        <span class="string">proxy_set_header</span> <span class="string">HOST</span> <span class="string">$host;</span></span><br><span class="line">        <span class="string">proxy_set_header</span> <span class="string">X-Forwarded-Proto</span> <span class="string">$scheme;</span></span><br><span class="line">        <span class="string">proxy_set_header</span> <span class="string">X-Real-IP</span> <span class="string">$remote_addr;</span></span><br><span class="line">        <span class="string">proxy_set_header</span> <span class="string">X-Forwarded-For</span> <span class="string">$proxy_add_x_forwarded_for;</span></span><br><span class="line"></span><br><span class="line">        <span class="string">proxy_pass</span> <span class="string">http://127.0.0.1:8090/;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>官方推荐配置（用这个）：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">upstream</span> <span class="string">halo</span> &#123;</span><br><span class="line">  <span class="string">server</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:8090;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="string">server</span> &#123;</span><br><span class="line">  <span class="string">listen</span> <span class="number">80</span><span class="string">;</span></span><br><span class="line">  <span class="string">listen</span> [<span class="string">::</span>]<span class="string">:80;</span></span><br><span class="line">  <span class="string">listen</span> <span class="number">443</span> <span class="string">ssl</span> <span class="string">http2;</span></span><br><span class="line">  <span class="string">listen</span> [<span class="string">::</span>]<span class="string">:443</span> <span class="string">ssl</span> <span class="string">http2;</span></span><br><span class="line">  <span class="string">server_name</span> <span class="string">bore.vip</span> <span class="string">www.bore.vip;</span></span><br><span class="line">  <span class="string">if</span> <span class="string">($host</span> <span class="type">!=</span> <span class="string">&#x27;bore.vip&#x27;</span> <span class="string">)</span> &#123;</span><br><span class="line">      <span class="string">rewrite</span> <span class="string">^/(.*)$</span> <span class="string">https://bore.vip/$1</span> <span class="string">permanent;</span></span><br><span class="line">  &#125; </span><br><span class="line">  <span class="string">client_max_body_size</span> <span class="string">1024m;</span></span><br><span class="line">  <span class="string">ssl_certificate</span> <span class="string">/etc/nginx/cert/bore.vip.pem;</span></span><br><span class="line">  <span class="string">ssl_certificate_key</span> <span class="string">/etc/nginx/cert/bore.vip.key;</span></span><br><span class="line">  <span class="string">ssl_protocols</span> <span class="string">TLSv1</span> <span class="string">TLSv1.1</span> <span class="string">TLSv1.2</span> <span class="string">TLSv1.3;</span></span><br><span class="line">  <span class="string">ssl_ciphers</span> <span class="string">TLS13-AES-256-GCM-SHA384:TLS13-CHACHA20-POLY1305-SHA256:TLS13-AES-128-GCM-SHA256:TLS13-AES-128-CCM-8-SHA256:TLS13-AES-128-CCM-SHA256:EECDH+CHACHA20:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;</span></span><br><span class="line">  <span class="string">ssl_prefer_server_ciphers</span> <span class="string">on;</span></span><br><span class="line">  <span class="string">ssl_session_timeout</span> <span class="string">10m;</span></span><br><span class="line">  <span class="string">ssl_session_cache</span> <span class="string">builtin:1000</span> <span class="string">shared:SSL:10m;</span></span><br><span class="line">  <span class="string">ssl_buffer_size</span> <span class="number">1400</span><span class="string">;</span></span><br><span class="line">  <span class="string">add_header</span> <span class="string">Strict-Transport-Security</span> <span class="string">max-age=15768000;</span></span><br><span class="line">  <span class="string">ssl_stapling</span> <span class="string">on;</span></span><br><span class="line">  <span class="string">ssl_stapling_verify</span> <span class="string">on;</span></span><br><span class="line">  <span class="string">index</span> <span class="string">index.html</span> <span class="string">index.htm</span> <span class="string">index.php;</span></span><br><span class="line">  <span class="string">root</span> <span class="string">/data/wwwroot/bore.vip;</span></span><br><span class="line">  <span class="string">if</span> <span class="string">($ssl_protocol</span> <span class="string">=</span> <span class="string">&quot;&quot;</span><span class="string">)</span> &#123; <span class="string">return</span> <span class="number">301</span> <span class="string">https://$host$request_uri;</span> &#125;</span><br><span class="line">  <span class="comment">#error_page 404 /404.html;</span></span><br><span class="line">  <span class="comment">#error_page 502 /502.html;</span></span><br><span class="line">  <span class="string">location</span> <span class="string">~</span> <span class="string">.*\.(gif|jpg|jpeg|png|bmp|swf|flv|mp4|ico)$</span> &#123;</span><br><span class="line">    <span class="string">proxy_pass</span> <span class="string">http://halo;</span></span><br><span class="line">    <span class="string">expires</span> <span class="string">30d;</span></span><br><span class="line">    <span class="string">access_log</span> <span class="string">off;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="string">location</span> <span class="string">~</span> <span class="string">.*\.(js|css)?$</span> &#123;</span><br><span class="line">    <span class="string">proxy_pass</span> <span class="string">http://halo;</span></span><br><span class="line">    <span class="string">expires</span> <span class="string">7d;</span></span><br><span class="line">    <span class="string">access_log</span> <span class="string">off;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="string">location</span> <span class="string">~</span> <span class="string">/(\.user\.ini|\.ht|\.git|\.svn|\.project|LICENSE|README\.md)</span> &#123;</span><br><span class="line">    <span class="string">deny</span> <span class="string">all;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="string">location</span> <span class="string">/</span> &#123;</span><br><span class="line">    <span class="string">proxy_set_header</span> <span class="string">HOST</span> <span class="string">$host;</span></span><br><span class="line">    <span class="string">proxy_set_header</span> <span class="string">X-Forwarded-Proto</span> <span class="string">$scheme;</span></span><br><span class="line">    <span class="string">proxy_set_header</span> <span class="string">X-Real-IP</span> <span class="string">$remote_addr;</span></span><br><span class="line">    <span class="string">proxy_set_header</span> <span class="string">X-Forwarded-For</span> <span class="string">$proxy_add_x_forwarded_for;</span></span><br><span class="line">    <span class="string">proxy_pass</span> <span class="string">http://halo;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4.重启nginx服务。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl restart nginx</span><br></pre></td></tr></table></figure>
<h3 id="添加-Let’s-Encrypt-免费证书"><a href="#添加-Let’s-Encrypt-免费证书" class="headerlink" title="添加 Let’s Encrypt 免费证书"></a>添加 Let’s Encrypt 免费证书</h3><h4 id="Centos-8"><a href="#Centos-8" class="headerlink" title="Centos 8"></a><strong>Centos 8</strong></h4><ol>
<li>安装Certbot<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum install epel-release -y</span><br><span class="line">yum install certbot -y</span><br></pre></td></tr></table></figure></li>
<li>新建相应文件夹<br>由于配置了反向代理，为了顺利申请证书，需要新建文件夹：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /data/wwwroot/bore.vip</span><br><span class="line"><span class="built_in">mkdir</span> -p /data/wwwlogs</span><br></pre></td></tr></table></figure></li>
<li>配置Nginx http 80端口</li>
</ol>
<p>为了使下面申请证书时能访问<a href="http://bore.vip/.well-known/acme-challenge/.......%E8%BF%99%E4%B8%AA%E9%93%BE%E6%8E%A5%EF%BC%8C%E9%A6%96%E5%85%88%E9%85%8D%E7%BD%AE%E5%A5%BD">http://bore.vip/.well-known/acme-challenge/.......这个链接，首先配置好</a></p>
<p>Nginx 80端口，保证上述网址能顺利访问，从而顺利申请证书。</p>
<p>由于配置了反向代理，所以在验证的时候是无法直接访问到站点目录下的 .well-known 文件夹下的验证文</p>
<p>件的。所以在nginx配置的server节点下添加：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">location ^~ /.well-known/acme-challenge/ &#123;</span><br><span class="line">  default_type <span class="string">&quot;text/plain&quot;</span>;</span><br><span class="line">  allow all;</span><br><span class="line">  root /data/wwwroot/demo.halo.run/;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述代码如果不行，试下下面的：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">location ~ /.well-known &#123;</span><br><span class="line">    allow all;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>编辑<code>halo.conf</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/nginx/conf.d/halo.conf</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">upstream halo &#123;</span><br><span class="line">  server 127.0.0.1:8090;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  listen [::]:80;</span><br><span class="line">  server_name bore.vip;</span><br><span class="line">  client_max_body_size 1024m;</span><br><span class="line">  location / &#123;</span><br><span class="line">    proxy_pass http://halo;</span><br><span class="line">    proxy_set_header HOST <span class="variable">$host</span>;</span><br><span class="line">    proxy_set_header X-Forwarded-Proto <span class="variable">$scheme</span>;</span><br><span class="line">    proxy_set_header X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">    proxy_set_header X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  location ^~ /.well-known/acme-challenge/ &#123;</span><br><span class="line">    default_type <span class="string">&quot;text/plain&quot;</span>;</span><br><span class="line">    allow all;</span><br><span class="line">    root /data/wwwroot/bore.vip/;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>申请证书<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">certbot certonly --webroot -w /data/wwwroot/bore.vip -d bore.vip -m 455343442@qq.com --agree-tos</span><br></pre></td></tr></table></figure>
相关参数含义：</li>
</ol>
<ul>
<li>–webroot是运行模式</li>
<li>standalone模式：需要停止当前的 web server 服务，让出 80 端口，由客户端内置的 web server 启动与Let’ s Encrypt通信。</li>
</ul>
<ul>
<li>webroot模式：不需要停止当前 web server，但需要在域名根目录下创建一个临时目录，并要保证外网通过域名可以访问这个目录。</li>
</ul>
<ul>
<li>-w 指定网站所在目录</li>
<li>-d 指定网站域名</li>
<li>-m 指定联系邮箱，填写真实有效的，letsencrypt会在证书在过期以前发送预告的通知邮件</li>
<li>agree-tos 表示接受相关协议</li>
</ul>
<p>使用webroot模式，Certbot在验证服务器域名的时候，会生成一个随机文件，然后Certbot的服务器会通过HTTP访问你的这个文件，因此要确保你的 Nginx 配置好，以便可以访问到这个文件。否则会返回403错误，在nginx配置的server节点下添加：<br> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"> location ^~ /.well-known/acme-challenge/ &#123;</span><br><span class="line">  default_type <span class="string">&quot;text/plain&quot;</span>;</span><br><span class="line">  allow all;</span><br><span class="line">  root /data/wwwroot/demo.halo.run/;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>上述代码如果不行，试下下面的：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">location ~ /.well-known &#123;</span><br><span class="line">    allow all;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>配置Nginx</li>
</ol>
<p>编辑<code>halo.conf</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/nginx/conf.d/halo.conf</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">upstream halo &#123;</span><br><span class="line">  server 127.0.0.1:8090;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  listen [::]:80;</span><br><span class="line">  listen 443 ssl http2;</span><br><span class="line">  listen [::]:443 ssl http2;</span><br><span class="line">  server_name bore.vip www.bore.vip;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable">$host</span> != <span class="string">&#x27;bore.vip&#x27;</span> ) &#123;</span><br><span class="line">      rewrite ^/(.*)$ https://bore.vip/<span class="variable">$1</span> permanent;</span><br><span class="line">  &#125;</span><br><span class="line">  client_max_body_size 1024m;</span><br><span class="line">  ssl_certificate /etc/letsencrypt/live/bore.vip/fullchain.pem;</span><br><span class="line">  ssl_certificate_key /etc/letsencrypt/live/bore.vip/privkey.pem;</span><br><span class="line">  ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3;</span><br><span class="line">  ssl_ciphers TLS13-AES-256-GCM-SHA384:TLS13-CHACHA20-POLY1305-SHA256:TLS13-AES-128-GCM-SHA256:TLS13-AES-128-CCM-8-SHA256:TLS13-AES-128-CCM-SHA256:EECDH+CHACHA20:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;</span><br><span class="line">  ssl_prefer_server_ciphers on;</span><br><span class="line">  ssl_session_timeout 10m;</span><br><span class="line">  ssl_session_cache <span class="built_in">builtin</span>:1000 shared:SSL:10m;</span><br><span class="line">  ssl_buffer_size 1400;</span><br><span class="line">  add_header Strict-Transport-Security max-age=15768000;</span><br><span class="line">  ssl_stapling on;</span><br><span class="line">  ssl_stapling_verify on;</span><br><span class="line">  access_log /data/wwwlogs/bore.vip_nginx.log combined;</span><br><span class="line">  index index.html index.htm index.php;</span><br><span class="line">  root /data/wwwroot/bore.vip;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable">$ssl_protocol</span> = <span class="string">&quot;&quot;</span>) &#123; <span class="built_in">return</span> 301 https://$host<span class="variable">$request_uri</span>; &#125;</span><br><span class="line">  <span class="comment">#error_page 404 /404.html;</span></span><br><span class="line">  <span class="comment">#error_page 502 /502.html;</span></span><br><span class="line">  location ~ .*\.(gif|jpg|jpeg|png|bmp|swf|flv|mp4|ico)$ &#123;</span><br><span class="line">    proxy_pass http://halo;</span><br><span class="line">    expires 30d;</span><br><span class="line">    access_log off;</span><br><span class="line">  &#125;</span><br><span class="line">  location ~ .*\.(js|css)?$ &#123;</span><br><span class="line">    proxy_pass http://halo;</span><br><span class="line">    expires 7d;</span><br><span class="line">    access_log off;</span><br><span class="line">  &#125;</span><br><span class="line">  location ~ /(\.user\.ini|\.ht|\.git|\.svn|\.project|LICENSE|README\.md) &#123;</span><br><span class="line">    deny all;</span><br><span class="line">  &#125;</span><br><span class="line">  location / &#123;</span><br><span class="line">    proxy_set_header HOST <span class="variable">$host</span>;</span><br><span class="line">    proxy_set_header X-Forwarded-Proto <span class="variable">$scheme</span>;</span><br><span class="line">    proxy_set_header X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">    proxy_set_header X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">    proxy_pass http://halo;</span><br><span class="line">  &#125;</span><br><span class="line">  location ^~ /.well-known/acme-challenge/ &#123;</span><br><span class="line">    default_type <span class="string">&quot;text/plain&quot;</span>;</span><br><span class="line">    allow all;</span><br><span class="line">    root /data/wwwroot/bore.vip/;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试配置是否有问题：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nginx -t</span><br></pre></td></tr></table></figure>

<p>重启Nginx生效：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl restart nginx</span><br></pre></td></tr></table></figure>
<ol start="6">
<li>证书自动更新<br>由于这个证书的时效只有 90 天，我们需要设置自动更新的功能，帮我们自动更新证书的时效。首先先在命令行模拟证书更新：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">certbot renew --dry-run</span><br></pre></td></tr></table></figure>
模拟更新成功的效果如下：<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@special-beep-1 ~]# certbot renew --dry-run</span><br><span class="line">Saving debug log to /var/log/letsencrypt/letsencrypt.log</span><br><span class="line"></span><br><span class="line">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span><br><span class="line">Processing /etc/letsencrypt/renewal/blog.bore.vip.conf</span><br><span class="line">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span><br><span class="line">Simulating renewal of an existing certificate for blog.bore.vip</span><br><span class="line"></span><br><span class="line">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span><br><span class="line">Processing /etc/letsencrypt/renewal/bore.vip.conf</span><br><span class="line">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span><br><span class="line">Simulating renewal of an existing certificate for bore.vip</span><br><span class="line"></span><br><span class="line">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span><br><span class="line">Congratulations, all simulated renewals succeeded:</span><br><span class="line">  /etc/letsencrypt/live/blog.bore.vip/fullchain.pem (success)</span><br><span class="line">  /etc/letsencrypt/live/bore.vip/fullchain.pem (success)</span><br><span class="line">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span><br></pre></td></tr></table></figure>
在无法确认你的 nginx 配置是否正确时，一定要运行模拟更新命令，确保certbot和服务器通讯正常。使用 <code>crontab -e</code> 的命令来启用自动任务，命令行：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure>
添加配置：（每隔两个月凌晨2:30自动执行证书更新操作）后保存退出。<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">30 2 * */2 * /usr/bin/certbot renew --quiet &amp;&amp; /bin/systemctl restart nginx</span><br></pre></td></tr></table></figure>
查看证书有效期的命令：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">openssl x509 -noout -dates -<span class="keyword">in</span> /etc/letsencrypt/live/bore.vip/cert.pem</span><br></pre></td></tr></table></figure>
PS:如果失败，先申请阿里证书，再申请Let’s Encrypt SSL证书，记得要添加 acme.sh 续签验证路由，才能申请Let’s Encrypt SSL证书。</li>
</ol>
<h4 id="Debian10"><a href="#Debian10" class="headerlink" title="Debian10"></a>Debian10</h4><ol>
<li>安装 Certbot<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install letsencrypt</span><br></pre></td></tr></table></figure></li>
<li>新建相应文件夹</li>
</ol>
<p>由于配置了反向代理，为了顺利申请证书，需要新建文件夹：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /data/wwwroot/bore.vip</span><br><span class="line"><span class="built_in">mkdir</span> -p /data/wwwlogs</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>配置Nginx http 80端口</li>
</ol>
<p>为了使下面申请证书时能访问<a href="http://bore.vip/.well-known/acme-challenge/%E2%80%A6%E8%BF%99%E4%B8%AA%E9%93%BE%E6%8E%A5%EF%BC%8C%E9%A6%96%E5%85%88%E9%85%8D%E7%BD%AE%E5%A5%BD">http://bore.vip/.well-known/acme-challenge/…这个链接，首先配置好</a></p>
<p>Nginx 80端口，保证上述网址能顺利访问，从而顺利申请证书。所以在nginx配置的server节点下添加：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">location ^~ /.well-known/acme-challenge/ &#123;</span><br><span class="line">  default_type <span class="string">&quot;text/plain&quot;</span>;</span><br><span class="line">  allow all;</span><br><span class="line">  root /data/wwwroot/demo.halo.run/;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述代码如果不行，试下下面的：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">location ~ /.well-known &#123;</span><br><span class="line">    allow all;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>编辑<code>halo.conf</code><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/nginx/conf.d/halo.conf</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">upstream halo &#123;</span><br><span class="line">  server 127.0.0.1:8090;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  listen [::]:80;</span><br><span class="line">  server_name bore.vip;</span><br><span class="line">  client_max_body_size 1024m;</span><br><span class="line">  location / &#123;</span><br><span class="line">    proxy_pass http://halo;</span><br><span class="line">    proxy_set_header HOST <span class="variable">$host</span>;</span><br><span class="line">    proxy_set_header X-Forwarded-Proto <span class="variable">$scheme</span>;</span><br><span class="line">    proxy_set_header X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">    proxy_set_header X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  location ^~ /.well-known/acme-challenge/ &#123;</span><br><span class="line">    default_type <span class="string">&quot;text/plain&quot;</span>;</span><br><span class="line">    allow all;</span><br><span class="line">    root /data/wwwroot/bore.vip/;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
重启 Nginx 生效：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl restart nginx</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>使用 webroot 自动生成证书</li>
</ol>
<p>Certbot 支持多种不同的「插件」来获取证书，这里选择使用 webroot 插件，它可以在不停止 Web 服务器的前提下自动生成证书，使用 –webroot 参数指定网站的根目录。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">certbot certonly --webroot -w /data/wwwroot/bore.vip -d bore.vip -m 455343442@qq.com --agree-tos</span><br></pre></td></tr></table></figure>
<blockquote>
<p>PS：用上面的命令，不要用下面的命令。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">letsencrypt certonly --webroot -w /data/wwwroot/bore.vip -d bore.vip -m 455343442@qq.com --agree-tos</span><br></pre></td></tr></table></figure>
<p>这样，在 &#x2F;var&#x2F;www&#x2F;hexo 目录下创建临时文件 .well-known&#x2F;acme-challenge ，通过这个文件来证明对域名 iwyang.top 的控制权，然后 Let’s Encrypt 验证服务器发出 HTTP 请求，验证每个请求的域的 DNS 解析，验证成功即颁发证书。</p>
<p>生成的 pem 和 key 在 &#x2F;etc&#x2F;letsencrypt&#x2F;live&#x2F; 目录下</p>
<ol start="6">
<li>配置Nginx</li>
</ol>
<p>编辑<code>halo.conf</code>，未开启443端口复用：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/nginx/conf.d/halo.conf</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">upstream halo &#123;</span><br><span class="line">  server 127.0.0.1:8090;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  listen [::]:80;</span><br><span class="line">  listen 443 ssl http2;</span><br><span class="line">  listen [::]:443 ssl http2;</span><br><span class="line">  server_name bore.vip www.bore.vip;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable">$host</span> != <span class="string">&#x27;bore.vip&#x27;</span> ) &#123;</span><br><span class="line">      rewrite ^/(.*)$ https://bore.vip/<span class="variable">$1</span> permanent;</span><br><span class="line">  &#125;</span><br><span class="line">  client_max_body_size 1024m;</span><br><span class="line">  ssl_certificate /etc/letsencrypt/live/bore.vip/fullchain.pem;</span><br><span class="line">  ssl_certificate_key /etc/letsencrypt/live/bore.vip/privkey.pem;</span><br><span class="line">  ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3;</span><br><span class="line">  ssl_ciphers TLS13-AES-256-GCM-SHA384:TLS13-CHACHA20-POLY1305-SHA256:TLS13-AES-128-GCM-SHA256:TLS13-AES-128-CCM-8-SHA256:TLS13-AES-128-CCM-SHA256:EECDH+CHACHA20:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;</span><br><span class="line">  ssl_prefer_server_ciphers on;</span><br><span class="line">  ssl_session_timeout 10m;</span><br><span class="line">  ssl_session_cache <span class="built_in">builtin</span>:1000 shared:SSL:10m;</span><br><span class="line">  ssl_buffer_size 1400;</span><br><span class="line">  add_header Strict-Transport-Security max-age=15768000;</span><br><span class="line">  ssl_stapling on;</span><br><span class="line">  ssl_stapling_verify on;</span><br><span class="line">  access_log /data/wwwlogs/bore.vip_nginx.log combined;</span><br><span class="line">  index index.html index.htm index.php;</span><br><span class="line">  root /data/wwwroot/bore.vip;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable">$ssl_protocol</span> = <span class="string">&quot;&quot;</span>) &#123; <span class="built_in">return</span> 301 https://$host<span class="variable">$request_uri</span>; &#125;</span><br><span class="line">  <span class="comment">#error_page 404 /404.html;</span></span><br><span class="line">  <span class="comment">#error_page 502 /502.html;</span></span><br><span class="line">  location ~ .*\.(gif|jpg|jpeg|png|bmp|swf|flv|mp4|ico)$ &#123;</span><br><span class="line">    proxy_pass http://halo;</span><br><span class="line">    expires 30d;</span><br><span class="line">    access_log off;</span><br><span class="line">  &#125;</span><br><span class="line">  location ~ .*\.(js|css)?$ &#123;</span><br><span class="line">    proxy_pass http://halo;</span><br><span class="line">    expires 7d;</span><br><span class="line">    access_log off;</span><br><span class="line">  &#125;</span><br><span class="line">  location ~ /(\.user\.ini|\.ht|\.git|\.svn|\.project|LICENSE|README\.md) &#123;</span><br><span class="line">    deny all;</span><br><span class="line">  &#125;</span><br><span class="line">  location / &#123;</span><br><span class="line">    proxy_set_header HOST <span class="variable">$host</span>;</span><br><span class="line">    proxy_set_header X-Forwarded-Proto <span class="variable">$scheme</span>;</span><br><span class="line">    proxy_set_header X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">    proxy_set_header X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">    proxy_pass http://halo;</span><br><span class="line">  &#125;</span><br><span class="line">  location ^~ /.well-known/acme-challenge/ &#123;</span><br><span class="line">    default_type <span class="string">&quot;text/plain&quot;</span>;</span><br><span class="line">    allow all;</span><br><span class="line">    root /data/wwwroot/bore.vip/;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果开启443端口复用：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">upstream halo &#123;</span><br><span class="line">  server 127.0.0.1:8090;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  listen [::]:80;</span><br><span class="line">  listen 127.0.0.1:443 ssl http2 proxy_protocol;</span><br><span class="line">  listen [::]:443 ssl http2;</span><br><span class="line">  set_real_ip_from 127.0.0.1;</span><br><span class="line">  real_ip_header proxy_protocol;</span><br><span class="line">  server_name bore.vip www.bore.vip;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable">$host</span> != <span class="string">&#x27;bore.vip&#x27;</span> ) &#123;</span><br><span class="line">      rewrite ^/(.*)$ https://bore.vip/<span class="variable">$1</span> permanent;</span><br><span class="line">  &#125; </span><br><span class="line">  client_max_body_size 1024m;</span><br><span class="line">  ssl_certificate /etc/letsencrypt/live/bore.vip/fullchain.pem;</span><br><span class="line">  ssl_certificate_key /etc/letsencrypt/live/bore.vip/privkey.pem;</span><br><span class="line">  ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3;</span><br><span class="line">  ssl_ciphers TLS13-AES-256-GCM-SHA384:TLS13-CHACHA20-POLY1305-SHA256:TLS13-AES-128-GCM-SHA256:TLS13-AES-128-CCM-8-SHA256:TLS13-AES-128-CCM-SHA256:EECDH+CHACHA20:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;</span><br><span class="line">  ssl_prefer_server_ciphers on;</span><br><span class="line">  ssl_session_timeout 10m;</span><br><span class="line">  ssl_session_cache <span class="built_in">builtin</span>:1000 shared:SSL:10m;</span><br><span class="line">  ssl_buffer_size 1400;</span><br><span class="line">  add_header Strict-Transport-Security max-age=15768000;</span><br><span class="line">  ssl_stapling on;</span><br><span class="line">  ssl_stapling_verify on;</span><br><span class="line">  access_log /data/wwwlogs/bore.vip_nginx.log combined;</span><br><span class="line">  index index.html index.htm index.php;</span><br><span class="line">  root /data/wwwroot/bore.vip;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable">$ssl_protocol</span> = <span class="string">&quot;&quot;</span>) &#123; <span class="built_in">return</span> 301 https://$host<span class="variable">$request_uri</span>; &#125;</span><br><span class="line">  <span class="comment">#error_page 404 /404.html;</span></span><br><span class="line">  <span class="comment">#error_page 502 /502.html;</span></span><br><span class="line">  location ~ .*\.(gif|jpg|jpeg|png|bmp|swf|flv|mp4|ico)$ &#123;</span><br><span class="line">    proxy_pass http://halo;</span><br><span class="line">    expires 30d;</span><br><span class="line">    access_log off;</span><br><span class="line">  &#125;</span><br><span class="line">  location ~ .*\.(js|css)?$ &#123;</span><br><span class="line">    proxy_pass http://halo;</span><br><span class="line">    expires 7d;</span><br><span class="line">    access_log off;</span><br><span class="line">  &#125;</span><br><span class="line">  location ~ /(\.user\.ini|\.ht|\.git|\.svn|\.project|LICENSE|README\.md) &#123;</span><br><span class="line">    deny all;</span><br><span class="line">  &#125;</span><br><span class="line">  location / &#123;</span><br><span class="line">    proxy_set_header HOST <span class="variable">$host</span>;</span><br><span class="line">    proxy_set_header X-Forwarded-Proto <span class="variable">$scheme</span>;</span><br><span class="line">    proxy_set_header X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">    proxy_set_header X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">    proxy_pass http://halo;</span><br><span class="line">  &#125;</span><br><span class="line">  location ^~ /.well-known/acme-challenge/ &#123;</span><br><span class="line">    default_type <span class="string">&quot;text/plain&quot;</span>;</span><br><span class="line">    allow all;</span><br><span class="line">    root /data/wwwroot/bore.vip/;</span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试配置是否有问题：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nginx -t</span><br></pre></td></tr></table></figure>
<p>重启Nginx生效：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl restart nginx</span><br></pre></td></tr></table></figure>
<ol start="7">
<li>自动续期</li>
</ol>
<p>Let’s Encrypt 的证书有效期为 90 天，不过我们可以通过 crontab 定时运行命令更新证书。</p>
<p>先运行以下命令来测试证书的自动更新：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">certbot renew --dry-run</span><br></pre></td></tr></table></figure>
<blockquote>
<p>PS：用上面的命令，不要用下面的命令。</p>
</blockquote>
<p><code>letsencrypt renew --dry-run --agree-tos</code></p>
<p>如果一切正常，就可以编辑 crontab 定期运行以下命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">30 2 * */2 * /usr/bin/certbot renew --quiet &amp;&amp; /bin/systemctl restart nginx</span><br></pre></td></tr></table></figure>
<h2 id="halo更改评论模块"><a href="#halo更改评论模块" class="headerlink" title="halo更改评论模块"></a>halo更改评论模块</h2><p>首先进入后台，依次点击：<code>系统</code>—<code>博客设置</code>—<code>评论设置</code>，更改<code>评论模块JS</code>。系统默认（halo 1.3.2）<code>评论模块JS</code>为：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">//cdn.jsdelivr.net/npm/halo-comment@latest/dist/halo-comment.min.js</span><br></pre></td></tr></table></figure>

<p>更改为<a href="https://github.com/halo-dev/halo-comment-fly">halo-comment-fly</a>评论模块JS：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">https://cdn.jsdelivr.net/gh/hshanx/halo-comment-fly@latest/dist/halo-comment.min.js</span><br></pre></td></tr></table></figure>

<p>或者：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">https://cdn.jsdelivr.net/gh/hshanx/halo-comment-hshan@2.0.6/dist/halo-comment.min.js</span><br></pre></td></tr></table></figure>

<p>更多<code>评论模块JS</code>，可以在<code>github</code>中搜索<a href="https://github.com/search?q=halo+comment">halo comment</a>。</p>
<h2 id="定时删除halo日志"><a href="#定时删除halo日志" class="headerlink" title="定时删除halo日志"></a>定时删除halo日志</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">0 0 * * * <span class="built_in">rm</span> -rf /root/.halo/logs/*</span><br></pre></td></tr></table></figure>

<p>意思是每天删除日志文件。</p>
<h2 id="更改时区"><a href="#更改时区" class="headerlink" title="更改时区"></a>更改时区</h2><p>如果你不知道服务器当前时间，可以使用下面的命令，查看当前时间：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">date</span> -R</span><br></pre></td></tr></table></figure>

<p>修改当前时区为上海（为了避免日志发表时间出现错误）：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo timedatectl set-timezone Asia/Shanghai</span><br></pre></td></tr></table></figure>
<p>再次不带任何选项参数调用timedatectl命令，打印系统当前设置的时区即可：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">timedatectl</span><br></pre></td></tr></table></figure>
<h2 id="版本升级"><a href="#版本升级" class="headerlink" title="版本升级"></a>版本升级</h2><blockquote>
<p>我们假设你存放运行包的路径为 ~&#x2F;app，运行包的文件名为 halo.jar，且使用了 systemd 进行进程管理，如有不同，下列命令请按需修改。</p>
</blockquote>
<ol>
<li><p>停止正在运行的服务</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">service halo stop</span><br></pre></td></tr></table></figure></li>
<li><p>备份数据以及旧的运行包（重要）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cp</span> -r ~/.halo ~/.halo.archive</span><br><span class="line"><span class="built_in">mv</span> ~/app/halo.jar ~/app/halo.jar.archive</span><br></pre></td></tr></table></figure>
<blockquote>
<p>需要注意的是，.halo.archive 和 halo.jar.archive 文件名不一定要根据此文档命名，这里仅仅是个示例。</p>
</blockquote>
</li>
<li><p>清空 leveldb 缓存（如果有使用 leveldb 作为缓存策略）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">rm</span> -rf ~/.halo/.leveldb</span><br></pre></td></tr></table></figure></li>
<li><p>下载最新版本的运行包</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/app &amp;&amp; wget https://dl.halo.run/release/halo-1.5.3.jar -O halo.jar</span><br></pre></td></tr></table></figure></li>
<li><p>启动测试</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">java -jar halo.jar</span><br></pre></td></tr></table></figure>
<p><joe-message type="info" content="如测试启动正常，请继续下一步。使用 CTRL+C 停止运行测试进程。"></joe-message></p>
</li>
<li><p>重启服务</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">service halo start</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="备份迁移"><a href="#备份迁移" class="headerlink" title="备份迁移"></a>备份迁移</h2><p>目前 Halo 在后台的小工具中提供了数据导出的功能，此功能的作用为导出数据库的所有数据，格式为 JSON。通常可以作为切换数据库类型的时候使用。需要注意的是，此备份仅仅为备份数据，不包含其他诸如主题、附件等资料。如下图：</p>
<h3 id="整站备份"><a href="#整站备份" class="headerlink" title="整站备份"></a>整站备份</h3><p>通过 《写在前面》 的名词解释部分我们可以知道，Halo 的所有数据都是存放在当前用户目录的工作目录（.halo）下的（使用 MySQL 数据库除外，你还需要导出 MySQL 数据）。所以我们备份整站的数据仅需备份这个目录即可，不管你使用何种方式。不过，为了操作方便，我们也在后台的小工具中提供了备份整站数据的功能，和上面所说的数据备份一致，点击备份按钮即可打包工作目录文件夹。如下图：</p>
<h3 id="导入数据"><a href="#导入数据" class="headerlink" title="导入数据"></a>导入数据</h3><p>此功能为导入上面所说的数据备份产生的数据文件（JSON 格式），并非整站备份的工作目录文件。需要注意的是，此功能仅在站点初始化的时候支持。如下图：</p>
<h3 id="整站迁移"><a href="#整站迁移" class="headerlink" title="整站迁移"></a>整站迁移</h3><p>此操作通常用于迁移服务器，基于上面 整站备份 所说，Halo 的所有数据都是存放于当前用户目录的工作目录（.halo）下的。当然，这仅限于使用 H2 Database 的情况下，如果你使用的 MySQL，那么还需要手动导出 MySQL 数据。所以，我们迁移服务器仅仅需要需要将工作目录的备份文件上传到新服务器的用户目录下解压，然后按照 《安装指南》 重新安装即可。MySQL 用户还需要做的就是手动导出 MySQL 数据，并在新服务器上导入。</p>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><p>1.忘记了管理员密码，如何重置？</p>
<p>目前在登录页面含有隐藏的 找回密码 链接，点击即可进入找回密码页面，具体可参考以下步骤：</p>
<ol>
<li>在登录页面按下键盘快捷键（Windows &#x2F; Linux：Shift + Alt + H，macOS：Shift + Command + H）即可显示 找回密码 链接。</li>
<li>按照表单提示输入用户名和邮箱，点击 获取 按钮即可发送带有验证码的邮件。</li>
<li>按照表单填写验证码和新密码，点击重置密码即可。<blockquote>
<p>需要注意的是，第 2 步中的获取验证码需要事先配置了 SMTP 发信设置，否则无法发送验证码。但你可以登录服务器查看 Halo 运行日志，搜索 Got reset password code 关键字即可获取到验证码。</p>
</blockquote>
</li>
</ol>
<h2 id="附：修改-Nginx-配置文件"><a href="#附：修改-Nginx-配置文件" class="headerlink" title="附：修改 Nginx 配置文件"></a>附：修改 Nginx 配置文件</h2><ol>
<li>使用你熟悉的工具打开配置文件，此教程使用 vi。<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/nginx/conf.d/halo.conf</span><br></pre></td></tr></table></figure></li>
<li>添加 upstream 配置<br>在 <code>server</code> 的同级节点添加如下配置：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">upstream halo &#123;</span><br><span class="line">  server 127.0.0.1:8090;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>在 server 节点添加如下配置<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">  proxy_set_header HOST <span class="variable">$host</span>;</span><br><span class="line">  proxy_set_header X-Forwarded-Proto <span class="variable">$scheme</span>;</span><br><span class="line">  proxy_set_header X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">  proxy_set_header X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">  proxy_pass http://halo;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>修改 location ~ .*.(gif|jpg|jpeg|png|bmp|swf|flv|mp4|ico)$ 节点<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">location ~ .*\.(gif|jpg|jpeg|png|bmp|swf|flv|mp4|ico)$ &#123;</span><br><span class="line">  proxy_pass http://halo;</span><br><span class="line">  expires 30d;</span><br><span class="line">  access_log off;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>修改 location ~ .*.(js|css)?$ 节点<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">location ~ .*\.(js|css)?$ &#123;</span><br><span class="line">  proxy_pass http://halo;</span><br><span class="line">  expires 7d;</span><br><span class="line">  access_log off;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
如果不按照第 4，5 步操作，请求一些图片或者样式文件不会经过 Halo，所以请不要忽略此配置。</li>
</ol>
<p><del>6. 添加 acme.sh 续签验证路由</del></p>
<p><del>OneinStack 使用的 acme.sh 管理证书，如果你在创建 vhost 的时候选择了使用 Let’s Encrypt 申请证书，那么 OneinStack 会在系统内添加一个定时任务去自动续签证书，acme.sh 默认验证站点所有权的方式为在站点根目录生成一个文件（.well-known）来做验证，由于配置了反向代理，所以在验证的时候是无法直接访问到站点目录下的 .well-known 文件夹下的验证文件的。需要添加如下配置：</del></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">location ^~ /.well-known/acme-challenge/ &#123;</span><br><span class="line">  default_type <span class="string">&quot;text/plain&quot;</span>;</span><br><span class="line">  allow all;</span><br><span class="line">  root /data/wwwroot/demo.halo.run/;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果上述代码失效，可以试下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">location ~ /.well-known &#123;</span><br><span class="line">    allow all;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>至此，配置修改完毕，保存即可。最终你的配置文件可能如下面配置一样：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">upstream</span> <span class="string">halo</span> &#123;</span><br><span class="line">  <span class="string">server</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:8090;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="string">server</span> &#123;</span><br><span class="line">  <span class="string">listen</span> <span class="number">80</span><span class="string">;</span></span><br><span class="line">  <span class="string">listen</span> [<span class="string">::</span>]<span class="string">:80;</span></span><br><span class="line">  <span class="string">listen</span> <span class="number">443</span> <span class="string">ssl</span> <span class="string">http2;</span></span><br><span class="line">  <span class="string">listen</span> [<span class="string">::</span>]<span class="string">:443</span> <span class="string">ssl</span> <span class="string">http2;</span></span><br><span class="line">  <span class="string">ssl_certificate</span> <span class="string">/usr/local/nginx/conf/ssl/demo.halo.run.crt;</span></span><br><span class="line">  <span class="string">ssl_certificate_key</span> <span class="string">/usr/local/nginx/conf/ssl/demo.halo.run.key;</span></span><br><span class="line">  <span class="string">ssl_protocols</span> <span class="string">TLSv1</span> <span class="string">TLSv1.1</span> <span class="string">TLSv1.2</span> <span class="string">TLSv1.3;</span></span><br><span class="line">  <span class="string">ssl_ciphers</span> <span class="string">TLS13-AES-256-GCM-SHA384:TLS13-CHACHA20-POLY1305-SHA256:TLS13-AES-128-GCM-SHA256:TLS13-AES-128-CCM-8-SHA256:TLS13-AES-128-CCM-SHA256:EECDH+CHACHA20:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;</span></span><br><span class="line">  <span class="string">ssl_prefer_server_ciphers</span> <span class="string">on;</span></span><br><span class="line">  <span class="string">ssl_session_timeout</span> <span class="string">10m;</span></span><br><span class="line">  <span class="string">ssl_session_cache</span> <span class="string">builtin:1000</span> <span class="string">shared:SSL:10m;</span></span><br><span class="line">  <span class="string">ssl_buffer_size</span> <span class="number">1400</span><span class="string">;</span></span><br><span class="line">  <span class="string">add_header</span> <span class="string">Strict-Transport-Security</span> <span class="string">max-age=15768000;</span></span><br><span class="line">  <span class="string">ssl_stapling</span> <span class="string">on;</span></span><br><span class="line">  <span class="string">ssl_stapling_verify</span> <span class="string">on;</span></span><br><span class="line">  <span class="string">server_name</span> <span class="string">demo.halo.run;</span></span><br><span class="line">  <span class="string">access_log</span> <span class="string">/data/wwwlogs/demo.halo.run_nginx.log</span> <span class="string">combined;</span></span><br><span class="line">  <span class="string">index</span> <span class="string">index.html</span> <span class="string">index.htm</span> <span class="string">index.php;</span></span><br><span class="line">  <span class="string">root</span> <span class="string">/data/wwwroot/demo.halo.run;</span></span><br><span class="line">  <span class="string">if</span> <span class="string">($ssl_protocol</span> <span class="string">=</span> <span class="string">&quot;&quot;</span><span class="string">)</span> &#123; <span class="string">return</span> <span class="number">301</span> <span class="string">https://$host$request_uri;</span> &#125;</span><br><span class="line">  <span class="string">include</span> <span class="string">/usr/local/nginx/conf/rewrite/none.conf;</span></span><br><span class="line">  <span class="comment">#error_page 404 /404.html;</span></span><br><span class="line">  <span class="comment">#error_page 502 /502.html;</span></span><br><span class="line">  <span class="string">location</span> <span class="string">~</span> <span class="string">.*\.(gif|jpg|jpeg|png|bmp|swf|flv|mp4|ico)$</span> &#123;</span><br><span class="line">    <span class="string">proxy_pass</span> <span class="string">http://halo;</span></span><br><span class="line">    <span class="string">expires</span> <span class="string">30d;</span></span><br><span class="line">    <span class="string">access_log</span> <span class="string">off;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="string">location</span> <span class="string">~</span> <span class="string">.*\.(js|css)?$</span> &#123;</span><br><span class="line">    <span class="string">proxy_pass</span> <span class="string">http://halo;</span></span><br><span class="line">    <span class="string">expires</span> <span class="string">7d;</span></span><br><span class="line">    <span class="string">access_log</span> <span class="string">off;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="string">location</span> <span class="string">~</span> <span class="string">/(\.user\.ini|\.ht|\.git|\.svn|\.project|LICENSE|README\.md)</span> &#123;</span><br><span class="line">    <span class="string">deny</span> <span class="string">all;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="string">location</span> <span class="string">/</span> &#123;</span><br><span class="line">    <span class="string">proxy_set_header</span> <span class="string">HOST</span> <span class="string">$host;</span></span><br><span class="line">    <span class="string">proxy_set_header</span> <span class="string">X-Forwarded-Proto</span> <span class="string">$scheme;</span></span><br><span class="line">    <span class="string">proxy_set_header</span> <span class="string">X-Real-IP</span> <span class="string">$remote_addr;</span></span><br><span class="line">    <span class="string">proxy_set_header</span> <span class="string">X-Forwarded-For</span> <span class="string">$proxy_add_x_forwarded_for;</span></span><br><span class="line">    <span class="string">proxy_pass</span> <span class="string">http://halo;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="string">location</span> <span class="string">^~</span> <span class="string">/.well-known/acme-challenge/</span> &#123;</span><br><span class="line">    <span class="string">default_type</span> <span class="string">&quot;text/plain&quot;</span><span class="string">;</span></span><br><span class="line">    <span class="string">allow</span> <span class="string">all;</span></span><br><span class="line">    <span class="string">root</span> <span class="string">/data/wwwroot/demo.halo.run/;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="https-www跳转"><a href="#https-www跳转" class="headerlink" title="https www跳转"></a>https www跳转</h2><figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">upstream halo &#123;</span><br><span class="line">  server 127.0.0.1:8090;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  listen [::]:80;</span><br><span class="line">  listen 443 ssl http2;</span><br><span class="line">  listen [::]:443 ssl http2;</span><br><span class="line">  server_name bore.vip www.bore.vip;</span><br><span class="line"><span class="addition">+  if ($host != &#x27;bore.vip&#x27; ) &#123;</span></span><br><span class="line"><span class="addition">+      rewrite ^/(.*)$ https://bore.vip/$1 permanent;</span></span><br><span class="line"><span class="addition">+  &#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://docs.halo.run/getting-started/install/linux">1.在 Linux 服务器部署 Halo</a></li>
<li><a href="https://halo.run/archives/install-reverse-proxy.html">2.配置域名访问</a></li>
<li><a href="https://juejin.im/entry/5b59c3f26fb9a04fda4e2238">3.CentOS 7 Nginx配置Let’s Encrypt SSL证书</a></li>
<li><a href="https://www.jianshu.com/p/9fc41ea941aa">4.windows 10 配置Java 环境变量</a></li>
<li><a href="https://www.myfreax.com/how-to-set-or-change-timezone-on-centos-8/">5.如何设置或更改系统时区在CentOS 8</a></li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>服务器</tag>
        <tag>halo</tag>
      </tags>
  </entry>
  <entry>
    <title>希沃电子白板学习笔记</title>
    <url>/archives/538cd199/</url>
    <content><![CDATA[<h2 id="希沃白板5"><a href="#希沃白板5" class="headerlink" title="希沃白板5"></a>希沃白板5</h2><ol>
<li>播放PPT时，如果PPT大小与屏幕不兼容，长按“设置”键可快速调整使其适应屏幕大小。</li>
<li>翻页按钮位于左右下角，点击数字预览。</li>
<li>桌面两侧悬浮按钮（快速调出白板、笔、半屏等）</li>
<li>手背、手心快速调出板擦。</li>
<li>选择几何图形后，双击屏幕可快速画出图形。出现红点是正方形（正方体）。</li>
<li>蒙层的使用（刮刮乐）</li>
</ol>
<p><img src="/../img/%E5%B8%8C%E6%B2%83%E7%94%B5%E5%AD%90%E7%99%BD%E6%9D%BF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/20210418203212.jpg"></p>
<p>要实现以上效果，切记首先要画两个矩形，然后双击输入文字，将需要设置蒙层这一形状置于顶层。千万不要先输入两个文本框，这样无法形成遮挡效果。</p>
<ol start="7">
<li><p>二维码分享课件。</p>
</li>
<li><p>导入PPT按钮在“云课件”最低端，如果扩展名是.ppt仅以背景形式导入，所以.ppt格式要转化为.pptx再导入。</p>
</li>
<li><p>超链接可以快速调出授课工具、网盘存储常用的文件，超链接网页地址可以设为本地目录，超链接切换到公众号文章。</p>
</li>
<li><p>如果背景图片使文字显示不清，可添加一个白色圆角矩形的形状，将其置于底层，然后调整其透明度。</p>
</li>
<li><p>圆柱高矮的变化： 先画一个圆柱，再画一个能与圆柱底重合的椭圆，填充为白色，边框为黑色。再画一个填充和边框都是白色的长方形，接着将椭圆调整到合适位置后置顶层，最后将椭圆和长方形组合。</p>
</li>
<li><p>课堂活动（超级分类）隐藏文字：（1）文字透明度设置为100%（2）字号调为1</p>
</li>
<li><p>色差的应用：将文字颜色设置成背景相同的颜色，可起到“隐藏文字”的效果；拉到另外一色块即可呈现。（注意图层之间的顺序，色块应该置于底层）</p>
</li>
<li><p>希沃白板5的圆规可以自动生成半径，授课时只要拖拽出圆规，就可以给学生演示圆有无数条半径。</p>
</li>
<li><p>给思维导图节点添加<code>注释</code>后，展开<code>注释</code>可以拖动。</p>
</li>
<li><p>画角：先用几何工具<code>线段</code>画一条线，然后在属性工具栏点击<code>辅助线</code>，从线段的一个端点出发，画出另外一条线，最后鼠标移到角的顶点可标记角的度数。(在授课端可以选择角，然后调整角的度数。)</p>
</li>
</ol>
<h2 id="硬件相关"><a href="#硬件相关" class="headerlink" title="硬件相关"></a>硬件相关</h2><ol>
<li>视频展台对比讲评。（要先拍照）</li>
<li>希沃智能笔：现将笔头USB接头插入白板USB接口，然后依次点击“希沃管家—智能笔—智能笔配对”</li>
<li>重装系统：</li>
</ol>
<p>方法一（利用出厂备份的系统还原）：切换到安装系统—设备信息—连续点击Android版本，直到出现N图片—出现N图片后点击侧边的返回按钮—然后连续点击内核版本—然后在左上角可以看到一个电视复位，点击电视复位确认就可以了。（问“希沃”公众号）</p>
<p>方法二（PE）：开机连续按F7（遥控器上），出现菜单后选择U盘就可以了。</p>
<h2 id="希沃课堂助手"><a href="#希沃课堂助手" class="headerlink" title="希沃课堂助手"></a>希沃课堂助手</h2><p>如果使用PPT授课，使用<a href="https://www.seewo.com/index.php/Product/soft/cat_id/130/nid/408">希沃课堂助手</a>更加方便。</p>
<h2 id="希沃授课助手"><a href="#希沃授课助手" class="headerlink" title="希沃授课助手"></a>希沃授课助手</h2><ol>
<li><del>使用授课助手时，必须使平板和手机连接同一个局域网，如果教室没有wifi，则利用白板创建一个热点，手机再连接此wifi热点。</del></li>
</ol>
<p>(希沃白板5 APP已经可以完全取代授课助手了。)</p>
<h2 id="数学画板"><a href="#数学画板" class="headerlink" title="数学画板"></a>数学画板</h2><ol>
<li>备课端，依次打开<code>学科工具—数学画板—我的画板—自行创作</code>，可自己制作画板。（只有在备课端才可以制作画板，授课端是不行的）</li>
</ol>
<p><img src="/../img/%E5%B8%8C%E6%B2%83%E7%94%B5%E5%AD%90%E7%99%BD%E6%9D%BF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/sxhauban.jpg"></p>
<ol start="2">
<li><p>怎样标记角：选择<code>绘图|标注</code>工具，将<code>绘图|标注工具</code>移至角的顶点，鼠标后面会出现一个角的符号，按住鼠标左键可拖动角。右侧可改变标记的样式。（除了标记角，<code>绘图|标注</code>工具还可以标注线）</p>
</li>
<li><p>怎样测量角：接上一步先要标记角，然后选择角的符号，鼠标右键选择<code>测量—标注角</code>。</p>
</li>
<li><p><code>文本|命名</code>工具可以插入文本，选择此工具直接点击点或者线段即可给点或者线段命名。</p>
</li>
<li><p><code>智能画笔</code>工具：根据已知图形对象，智能绘制与已知图形相关图形功能（如交点，相等线段，平行，垂直等， 圆的切点、切线）</p>
</li>
</ol>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>tips</tag>
      </tags>
  </entry>
  <entry>
    <title>彻底卸载onedrive</title>
    <url>/archives/e0c4249b/</url>
    <content><![CDATA[<p>1、通过组策略编辑器来禁用OneDrive。点击任务栏上的Contana搜索框并输入“组策略”，在最佳匹配结果中选择“编辑组策略”控制面板项，进入到本地组策略编辑器环境，如图：</p>
<p>2、在组策略编辑器窗口左侧栏内，依次定位到“计算机配置→管理模板→Windows组件→OneDrive”，可看到右侧窗格内的5个相关选项，如图所示：</p>
<p>3、将右侧的5个选项并将它们设置为“已禁用”状态，如图：</p>
<p>4、右键单击任务栏空白处，调出任务管理器。切换到“启动”。在进程管理列表中找到OneDrive进程，右键单击并选择“禁用”。</p>
<p>随后，在Windows资源管理器中，点击“查看”功能面板，将“显示&#x2F;隐藏”分组中的“隐藏的项目”复选框选中。最后进入到当前Windows用户所在的“AppData→Local→Microsoft”文件夹，找到Onedrive子文件夹，将其删除即可。</p>
<p>若无法直接删除，可利用Unlocker工具或360右键强力删除命令进行删除。</p>
<p>参考：<a href="https://office.tqzw.net.cn/computer/computer/229566.html">教你彻底卸载OneDrive图文操作方法</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>win10</tag>
      </tags>
  </entry>
  <entry>
    <title>快手抖音视频中的背景音乐怎么提取下载</title>
    <url>/archives/3038d34c/</url>
    <content><![CDATA[<ul>
<li>1.下载抖音视频</li>
</ul>
<p>方法：前往 <a href="http://www.dy114.com/douyin">dy114短视频解析下载在线小工具</a>，输入你的小视频分享链接地址，下载视频</p>
<p>ps：该小工具支持解析下载目前主流的抖音、快手、微博、微视、皮皮虾、皮皮搞笑、火山小视频、最右、西瓜视频、今日头条、秒拍小视频，而且是无水印下载原版高清视频哦。值得大家收藏。</p>
<ul>
<li>2.下载视频音频提取工具</li>
</ul>
<p>方法：电脑上下载按照QQ音影软件，软件地址：<a href="https://player.qq.com/">https://player.qq.com/</a></p>
<ul>
<li>3.提取视频中的背景音乐与歌曲</li>
</ul>
<p>方法：用安装好的软件打开你下载好的抖音等短视频，点击右下角的“音影工具箱”，选择“转码压缩”，格式选择为“音频”，设置好提取的音频保存地址，即可提取获取视频的歌曲、背景音和独白。</p>
<p>操作截图提示如下：</p>
<p>（1）点击右下角的“音影工具箱”</p>
<p>（2）选择“转码压缩”</p>
<p>（3）设置格式，提取视频中的歌曲、背景音影、对白等音频。</p>
<hr>
<p>参考链接：<a href="http://www.dy114.com/1582.html">快手抖音视频中的背景音乐怎么提取下载</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>tips</tag>
      </tags>
  </entry>
  <entry>
    <title>怎样才能把A3文档打印到A4纸上</title>
    <url>/archives/415c867f/</url>
    <content><![CDATA[<p>今天才知道怎样才能把A3文档打印到A4纸上，真的是孤陋寡闻。 有必要记录一下。这里可以用Word提供的“复印机”缩放功能来打印，就是说可以通过“缩放”命令，让Word为文档设置格式，使其符合打印机的纸张尺寸。操作步骤如下：<br>点击“文件→打印”，系统弹出“打印”对话框，“缩放”，在“按纸型缩放”下拉列表框中，选择要使用的纸型，比如选择A4纸型。单击“确定”按钮。<br>这时，Word将调整文档的页面使其适合所选纸型，在此Word将原本需要打印在A3纸张上的文档，通过自动缩小字号和图形打印在A4幅面的纸上。这类似于复印机的“缩小／放大”功能。</p>
<p>参考链接：<a href="https://wap.zol.com.cn/ask/x_4496525.html">怎样设置才能把A3文档打印到A4纸上</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>excel</tag>
      </tags>
  </entry>
  <entry>
    <title>怎样提取PPT里的背景音乐</title>
    <url>/archives/fceaf4e8/</url>
    <content><![CDATA[<p>1.确保PPT扩展名为<code>.pptx</code></p>
<p>2.将PPT扩展名改为<code>.rar</code></p>
<p>3.用压缩软件打开，音乐文件在<code>/ppt/media</code>文件夹下。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>ppt</tag>
      </tags>
  </entry>
  <entry>
    <title>微课的教学设计与制作</title>
    <url>/archives/b33dfdc7/</url>
    <content><![CDATA[<h1 id="摘-要"><a href="#摘-要" class="headerlink" title="摘 要"></a>摘 要</h1><p>当今世界已进入信息时代，在高速发展的信息时代，信息日益成为社会各领域中最活跃、最具有决定意义的因素。信息时代给教育注入了新的生机和活力，也给教育提出了更高的要求。要适应信息时代，教育必须实现信息化。教育信息化要求在教育过程中较全面地运用以计算机、多媒体和网络通讯为基础的现代信息技术，促进教育改革。微课正是在这种背景下产生的。2012年11月，全国首届微课大赛在武汉启动，并已经在全国300多个城市陆续开展。参赛微课上传到云平台，教育资源全国共享，引爆了全国“微课热”。本文主要就微课的教学设计与制作这两个方面进行讨论，希望对微课的发展有一点启示作用。</p>
<p>【关键词】微课 教学设计 制作</p>
<p><strong>The instructional design and production of micro-lecture</strong></p>
<h1 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h1><p>Today, the world has entered the information age. In the rapid development of the information age, information is increasingly becoming the most active and decisive factor in kinds of areas of society. The information age has injected new vigor and vitality into the education. And the information age also gives a higher requirement to education. In order to adapt to the information age, education must achieve informatization. The educational information requires fully using the computers, multimedia and network communication which are based on modern information technology to promote the reform of education in the process of education. Micro-lecture is produced under this kind of background. In November 2012, the first national contest of micro-lecture started in Wuhan. And it has been carried out in more than 300 cities in the country. The entries have been uploaded to the cloud platform which makes educational resources shared in the whole nation. Micro-lecture has became a hot topic. This article will mainly discuss the instructional design and production of micro-lecture, hoping to give a little inspiration to the development of micro-lecture.</p>
<p><strong>【<strong><strong>key words</strong></strong>】</strong>Micro-lecture instructional design production </p>
<h1 id="1-绪论"><a href="#1-绪论" class="headerlink" title="1 绪论"></a>1 绪论</h1><h2 id="1-1-研究背景"><a href="#1-1-研究背景" class="headerlink" title="1.1 研究背景"></a>1.1 研究背景</h2><p>随着科技和信息技术的快速发展，人类的传播交流方式发生了巨大的改变。各种各样的“微”应运而生。例如，2009年微博的出现在我国迅速流行起来，2011年微信的出现改变了人们对传统聊天软件的看法。在教育领域，微课也是应运而生。在全国落实《国家中长期教育改革与发展规划纲要（2010-2020 年）》和实施《教育信息化十年发展规划（2011-2020 年）》的时候，在混合学习和移动学习日益盛行的趋势下，微课成为当前我国教育信息化资源建设的重点和研究热点[1]。教育信息化要求在教育过程中较全面地运用以计算机、多媒体和网络通讯为基础的现代信息技术，促进教育改革。而微课作为教育信息化的产物之一，可以说是对传统教学模式的一种补充与扩展，对传统教育的改革具有一定的促进作用。在2012年秋季，教育部正式面向全国中小学举行微课作品征集评选大赛。如此同时在2012 年11月，教育部全国高校教师网络培训中心正式下发通知，决定于2012年12月至2013年8月，举办首届全国高校微课教学比赛。这两项国家级的微课比赛可以说在在中国教育界掀起了一场“微课”热潮。</p>
<h2 id="1-2-国内外研究现状"><a href="#1-2-国内外研究现状" class="headerlink" title="1.2 国内外研究现状"></a>1.2 国内外研究现状</h2><h3 id="1-2-1-国外研究现状"><a href="#1-2-1-国外研究现状" class="headerlink" title="1.2.1 国外研究现状"></a>1.2.1 国外研究现状</h3><p>美国应该说无论是在经济还是在教育上都处在世界的领先地位。国外对微课的研究主要还是集中在美国。微课(Micro-lecture)最初是由美国新墨西哥州圣胡安学院的独立教学设计师和网络学习顾问戴维• 潘罗斯（David Penrose）教授提出的，他明确阐述了微课程的概念和创作过程。戴维•彭罗斯把微课称为“知识脉冲”（Knowledge Burst），他认为微课的效果可能超出任何一个资深教师的想象。而目前，在国外最具有代表性的是可汗学院和翻转课堂，可汗学院可以说在短短的时间内，在整个世界范围内引起了巨大大的轰动，也对当前的教育模式带来了很大的冲击，它的出现促使教育者对当前教育模式的思考和改革。可汗学院是由孟加拉裔美国人萨尔曼·可汗创立，是涵盖各学科的在线网络视频课程，每一节课程时长10分钟左右。视频短而精，内容深入浅出，吸引了各地的学生通过可汗学院进行学习。而翻转课堂最初起源于美国科罗拉多州落基山的一个山区学校，在翻转课堂下，教师打破了传统教学模式，让学生在家观看并学习录制好的课程讲解和PPT演示，这样就让节省下来的时间就可以在课堂上进行协同学习、研究性学习。2011年前后，翻转课堂这种新的教学模式在美国各地兴起，并引起了广泛关注。</p>
<p>综上所述，国外对微课的研究是一个从理论到实践的过程。国外有关微课的研究主要还是集中在中小学课堂教学中的应用研究。</p>
<h3 id="1-2-2-国内研究现状"><a href="#1-2-2-国内研究现状" class="headerlink" title="1.2.2 国内研究现状"></a>1.2.2 国内研究现状</h3><p>在国内率先对微课进行研究的是广东省佛山市教育局教育信息网络中心的胡铁生老师。他认为微课是以微型教学视频为主要载体，针对某个学科知识点或教学环节而设计开发的一种情境化、支持多种学习方式的新型网络课程资源。而内蒙古鄂尔多斯市东胜区教研中心副主任李玉平及其团队则是开发和推广微课的先行者。他带领其他教师成立了微学时代工作室,对微课程开展了深入的研究和探索,在他的博客中也展示了一系列与教育有关的样例,并设计了微课的开发设计指南、微课程设计模板等,对推动微课在教育领域的深入研究和探索起到了重要的引领作用。2010年11月,佛山教育局启动了首届中小学新课程优秀“微课”资源建设征集与应用活动,征集的微课的内容也涵盖了小学、初中和高中各学科的教学重点、难点和特色内容。2012年12月,中国华南师范大学携手香港凤凰卫视全球发布“凤凰微课”</p>
<p>综上所述，国内对于微课的应用研究越来越广泛,从佛山微课首次推出到如今席卷全国,微课逐渐成为了教育界关注的热点。同时我们还可以看出微课的研究是国内较为新鲜的一个研究课题。它的设计、开发与应用仍然需要在教学实践中不断地尝试与应用。</p>
<h2 id="1-3-研究的目的及意义"><a href="#1-3-研究的目的及意义" class="headerlink" title="1.3 研究的目的及意义"></a>1.3 研究的目的及意义</h2><h3 id="1-3-1-研究的目的"><a href="#1-3-1-研究的目的" class="headerlink" title="1.3.1 研究的目的"></a>1.3.1 研究的目的</h3><p>“微课”是一种全新的资源表现形式,其具有“情景真实、主题突出、资源多样、形式灵活、交互性强、动态生成、便于传播、应用简单”等优点[2]。虽然微课具有这么多的优点，但是微课在我国可以说仍然处于起步阶段。不少老师在制作微课时会遇到问题，或者在微课开发的思路或者说过程中会遇到这样那样的问题。所以笔者希望通过一定的分析研究，总结先前的经验和教训，通过对微课的教学设计和制作两个方面进行讨论，以此希望能够制作出一个符合微课大赛要求的优秀微课。</p>
<h3 id="1-3-2-研究的意义"><a href="#1-3-2-研究的意义" class="headerlink" title="1.3.2 研究的意义"></a>1.3.2 研究的意义</h3><p>研究微课的意义总的来说有两个方面。第一个方面微课是对传统教与学的支持与扩展，有助于提高教学效果。第二个方面是微课对教师专业化发展的支持。在国内率先倡导并且提出微课的胡铁生认为，“对学生而言，微课能更好地满足他们对不同学科知识点的个性化学习、按需选择学习的要求，是传统课堂学习的一种重要补充和拓展资源；对教师而言，微课将革新传统的教学与教研方式，突破教师传统的听评课模式，教师的电子备课、课堂教学和课后反思的资源应用将更具有针对性和实效性，基于微课资源库的校本研修、区域网络教研将大有作为，并成为教师专业成长的重要途径之一。笔者非常赞同胡铁生的看法，研究微课的意义在于提高学习效果以及促进教师的专业发展。</p>
<h1 id="2-相关概念分析"><a href="#2-相关概念分析" class="headerlink" title="2 相关概念分析"></a>2 相关概念分析</h1><h2 id="2-1-什么是微课"><a href="#2-1-什么是微课" class="headerlink" title="2.1 什么是微课"></a>2.1 什么是微课</h2><p>微课是个新生的事物，到目前为止对于这个问题还没有达到共识，不同的人具有不同的看法。胡铁生认为：微课又名“微课程”，是“微型视频网络课程”的简称，它是以微型教学视频为主要载体，针对某个学科知识点或教学环节而设计开发的一种情境化、支持多种学习方式的新型网络课程资源。黎加厚认为：微课是指时间在10分钟以内，有明确的教学目标，内容短小，集中说明一个问题的小课程[3]。当然还有官方的解释，首届中小学微课大赛官方文件认为：“微课”全称“微型视频课程”，它是以教学视频为主要呈现方式，围绕学科知识点、例题习题、疑难问题、实验操作等进行的教学过程及相关资源之有机结合体。而首届高校微课大赛官方文件认为：“微课”是指以视频为主要载体记录教师围绕某个知识点或教学环节开展的简短、完整的教学活动。</p>
<p>综上所述，我们可以看到对于微课不同的理解主要原因是侧重点不同。中小学一线教师更注重微课的表现形式与功能，而理论人员则注重微课的基本原理。</p>
<h2 id="2-2-微课的特点"><a href="#2-2-微课的特点" class="headerlink" title="2.2 微课的特点"></a>2.2 微课的特点</h2><p>微课作为一种新型教学资源建设和应用方式，总的来说具有以下四个特点。</p>
<p>第一，教学时间较短。根据心理学上的研究，中小学学生的注意力集中在10 分钟左右。所以对如中小学学生来说，微课的时长最好为5<del>8分钟，最长不要超过10分钟。而成人的注意力集中在15分钟，所以高校微课的时长一般为10</del>20 分钟。</p>
<p>第二，教学选题小而精。相对于时间较宽泛的传统课堂，微课课堂的主题更突出、内容更精简。可选取教学环节中某一知识点、专题、实验活动作为选题，针对教学中常见且具有代表性的问题或内容进行设计，有效解决教与学过程的疑点和难点问题。</p>
<p>第三，资源容量较小。微课的教学视频及配套的辅助扩展资料总容量一般在几十兆左右，视频采用支持网络在线播放的流媒体格式，师生可以流畅地在线观看视频、查阅教学设计和课件，也可方便地将其下载保存到移动终端上，从而实现移动学习的目的。</p>
<p>第四，资源组织模块化。微课将课程的重难点拆分成一个个主体鲜明、类型多样、结构紧凑的模块，即“主题单元资源包”，营造了一个真实的“微课堂教学环境”。广大师生在这种真实具体、典型案例化的教与学情景中，可以方便地实现知识和教学观念、风格和技能的模仿、迁移和提升，从而迅速地提升教师的课堂教学水平，促进教师的专业成长，提高学生的学业水平。</p>
<h2 id="2-3-微课与传统课的比较"><a href="#2-3-微课与传统课的比较" class="headerlink" title="2.3 微课与传统课的比较"></a>2.3 微课与传统课的比较</h2><p>从上面微课的特点我们能看到微课与传统课的一些差别。那么微课只是将传统的课程分单元剪短吗?严格地说，并非如此。一是传统课程中的一些风格技巧是用来保证课程的连贯性和学生学习兴趣的持久性，而微课是要瞬间抓住学生的眼球，在最短时间内将注意力集中在某个单一主题上；二是微课与传统教学相比，教师与学生的角色不同，要达到的目的不同，因此课件和教学过程的设计方式不同；三是微课就是一段短小视频，它向学生展示的是教学中某个单一的、具有严格定义的主题环节；四是微课向学生提供的是“自助式”教学模式，与传统的内容展示与讲解不同，微课采用的是自主学习与交流的方式；五是微课是由学生根据自己的意愿自主控制播放，可反复学习、多角度评价的一种教学方式。</p>
<h2 id="2-4-微课与传统教学视频的比较"><a href="#2-4-微课与传统教学视频的比较" class="headerlink" title="2.4 微课与传统教学视频的比较"></a>2.4 微课与传统教学视频的比较</h2><p>我们知道微课是以视频为主要载体，那么它与传统教学视频有什么不同之处了。“微课”这种新型的教学资源建设和应用模式可以说是传统教学视频在“微时代”下的衍变。“微课”有其与生俱来的特性，这些特性颠覆了传统教学视频的模式。微课与传统教学视频比较，有以下几点区别：（1）主题明确，针对性强；“微课”主要是为了解决课堂教学中某个学科知识点，特别是教学中的重点、难点等内容。而传统教学视频往往是一堂课的复制，包含多个知识点，含有复杂众多的教学内容，更注重教师的“教”。可以说，“微课”是传统教学视频精华的浓缩。（2）短小精悍，易传播“微课”容量小；一段“微课”视频时间通常控制在一般为5—8分钟左右，最长不宜超过10分钟。根据心理学上的研究，“微课”在时间上符合人类的认知特点。此外，“微课”的视频格式一般采用MP4、WMV、FLV等，视频加上教学课件、教案等总过也只有十几兆。因此“微课”容量小，容易在网络中传播和下载，用户可以在网络中流畅地在线观看“微课”视频，也可以方便地将其下载到各种数码设备上。而传统的教学视频往往要40~45分钟，时间长，容量大，在网络中传播和下载往往需要耗费较多的时间。（3）半结构化；可扩充开放“微课”具有半结构化特点，“微课”的资源要素可以随着教学需要不断地扩充、修改和完善。而传统教学视频资源结构紧密、固化封闭，难以扩充和修改。</p>
<h1 id="3-微课的教学设计"><a href="#3-微课的教学设计" class="headerlink" title="3 微课的教学设计"></a>3 微课的教学设计</h1><h2 id="3-1-微课教学设计的原则"><a href="#3-1-微课教学设计的原则" class="headerlink" title="3.1 微课教学设计的原则"></a>3.1 微课教学设计的原则</h2><p>要制作好一节微课，首先要做好教学设计，那么微课的教学设计要遵循哪些原则呢！在《首届全国高校微课教学比赛方案》中对教学设汁的要求是：</p>
<p> (1)围绕选题设计，突出重点，注重实效。</p>
<p> (2)教学目的明确，教学思路清晰，注重学生全面发展，并且要符合学生的认知规律。</p>
<p> (3)教学过程主线清晰、重点突出，逻辑性强，明了易懂。</p>
<p> (4)注重突出学生的主体性以及教与学活动有机结合[4]。</p>
<p>这些明确的评分标准就告诉我们，在微课的教学设计过程中要有所创新。充分体现通过微课的设计，充分运用各种教学媒体，选取适当的教学方法，较好地调动学生的积极主动性，在营造愉快轻松的课堂氛围的同时，寓教于乐，达到教与学的有机结合。我们不难从这些标准中看出，在微课的教学设计过程中要充分运用各种教学媒体，选取适当的教学方法，较好地调动学生的积极主动性，在营造愉快轻松的课堂氛围的同时，寓教于乐，达到教与学的有机结合。</p>
<h2 id="3-2-微课教学设计的具体步骤"><a href="#3-2-微课教学设计的具体步骤" class="headerlink" title="3.2 微课教学设计的具体步骤"></a>3.2 微课教学设计的具体步骤</h2><p>微课是一种新的资源形式，那么它的教学设计与传统课的教学设计有什么区别呢！为了弄清楚微课的教学设计与传统课的教学设计有什么异同，笔者仔细分析了全国中小学微课比赛获奖作品和首届全国高校微课教学比赛获奖作品。发现并不是所有的中小学微课获奖作品都有教学设计的附件，而高校微课获奖作品一般都有教学设计的附件。此外，并不是所有作品的教学设计步骤都是一样的。不过总的来说，微课与传统课的教学设计有相同点，也有差别。相同点在于两者的基本组成模块基本相同，不同点在于一些细节上。笔者认为两者最大区别在于教学过程设计上，由于微课时间的限制，教学过程设计就要求精确到每分钟。</p>
<h3 id="3-2-1-选题"><a href="#3-2-1-选题" class="headerlink" title="3.2.1 选题"></a>3.2.1 选题</h3><p>微课的选题要求新颖，尽量做到“小而精”，可以选取教学环节的某个知识点，并具备独立性、完整性、示范性、代表性，能够有效解决教与学过程中的重点、难点问题。俗话说，好的开始就是成功的一半，如何选好微课的题目是在进行微课创作过程中首先需要认真思考分析的问题。首届全国高校微课教学比赛对选题的要求是：选取教学环节中某一知识点、专题、实验活动作为选题，针对教学中的常见、典型、有代表性的问题或内容进行设计，类型包括但不限于：教授类、解题类、答疑类、实验类、活动类。选题尽量“小而精”，具备独立性、完整性、示范性、代表性，能够有效解决教与学过程中的重点、难点问题[5]。</p>
<h3 id="3-2-2-学习者特征分析"><a href="#3-2-2-学习者特征分析" class="headerlink" title="3.2.2 学习者特征分析"></a>3.2.2 学习者特征分析</h3><p>无论微课还是传统课，学习者分析都是教学设计过程中的一个重要步骤，教学设计的一切活动都是为了学习者的学，教学目标是否实现，要在学习者自己的认识和发展的学习活动中体现出来，而作为学习活动主体的学习者在学习过程中又是以自己的特点来进行学习的。因此，要取得教学设计的成功，必须重视对学习者的分析。微课的对象可以是中小学学生，也可以是大学生，也可以是其他学习者。如果微课的对象是小学生的话，他们的学习特点主要表现在以下几个方面：一是已经完全具备假设—演绎思维、抽象思维和系统思维的能力。二是好奇心强，小学生对好玩有趣的学习内容具有强烈的兴趣，所以课程设计时应尽量保持趣味性。三是缺乏学习主动性。小学生缺乏主动学习的能力，而微课针对的又是学生的零散时间，所以微课设计时必须要保证学习的效率[6]。</p>
<h3 id="3-2-3-教学目标的确定"><a href="#3-2-3-教学目标的确定" class="headerlink" title="3.2.3 教学目标的确定"></a>3.2.3 教学目标的确定</h3><p>   无论是微课还是传统课，教学目标都是教学活动的出发点和归宿，是教学的灵魂所在。</p>
<p>因为教学目标是教师选择教学内容、运用教学方法、教学策略、教学媒体以及调控教学环境的基本依据。教学目标规定着教学活动的方向、进程和预期结果，或者说，它具体指引着教学活动往哪里走，只有知道了往哪里走之后，才能选择适当的内容、方法来达成预期目标。如缺乏清晰的目标，教学将失去导向，只能盲目进行。此外，教学目标也是学习者自我激励、自我评估、自我调控的重要手段。由于教学目标能提供给学生一个明确的方向，使学生明确了通过学习要达到的具体目标，因而在学习过程中它可以有效激发学生学习的内部动力，增强学习的兴趣，帮助学生根据目标指引的方向不断调整学习方式，积极克服困难，为达成预定的学习目标而努力。一般说来，微课往往是选取某一知识点进行讲解的，它的教学目标往往是要求学习者掌握某一知识点。不过教学目标的确定还是要体现在三维目标上，知识与技能，过程与方法，情感态度与价值观。</p>
<h3 id="3-2-4-教学内容分析"><a href="#3-2-4-教学内容分析" class="headerlink" title="3.2.4 教学内容分析"></a>3.2.4 教学内容分析</h3><p>无论是微课还是传统课，教学内容分析都是必不可少的一步。教学内容是指为实现教学目标，要求学习者系统学习的知识、技能和行为经验的总和。分析教学内容是为了规定教学内容的范围、深度及教学内容各部分的联系，回答“学什么”的问题。对于教学内容的分析，应以教学目标为基础，明确规定教学内容的范围、深度和揭示教学内容各组成部分之间的联系以保证达到教学最优化的内容效度。教学内容的范围指的是学习者必须达到的知识和能力的广度，深度规定了学习者必须达到的知识深浅程度和能力的质量水平。微课所选取的知识点往往是重难点。所以在制作微课时，要认真思考怎样在短时间里将知识点讲清楚，这就要对教学内容进行认真的分析。</p>
<h3 id="3-2-5-教学过程结构设计"><a href="#3-2-5-教学过程结构设计" class="headerlink" title="3.2.5 教学过程结构设计"></a>3.2.5 教学过程结构设计</h3><p>微课的教学过程要简短而且完整，教学过程一般说来要包括问题的提出、教学活动的安排、总结收尾等环节[7]。微课的结构设计是教学设计的延续和具体反映。根据教学内容和教学目标，依照特定的教学思想、学习理论组织教学内容顺序以及教学控制策略，就是微课的结构设计的呈现。总的来说微课教学过程设计有以下几个要求。</p>
<p>   (1)快速切入课题</p>
<p>一般而言，微课的基本构成包括开头、主要内容、片尾3个部分。片头具体来说就是引题。通常来说由于微课的时间短，所以就要求开门见山进入课题，可以使用以下几种方法来引题。你可以通过设置一个问题来引出课题；或者你也可以通过总结上节课的教学内容来引入课题等。但是不管你采用的是哪种方法，切题一定要快速，尽量做到引题能够吸引人，使人产生兴趣，要知道一个好的开始就是成功的一半。</p>
<p>   (2)内容讲授条理上要清晰</p>
<p>由于微课时间短这个原因，所以要求在讲授微课时，要尽可能在一条线索上展开教学，在这条线索上突出重点内容。</p>
<p>   (3)总结收尾要简练</p>
<p>虽然微课时间短，但是小结是必不可少的，为什么这么说呢！因为一个好的总结可以对讲授的内容起到提纲挈领的作用，也可以使学生更加深刻地理解所学的内容，这样学生就能清楚地了解到这节课学到了什么。</p>
<p>综上所述，一般来说微课的教学设计应包括选题、学习者特征分析、教学目标确定、教学内容分析以及教学过程结构设计这几个方面。总的来说微课的教学设计与传统课的教学设计有相似点，也有不同点。笔者两者最大差别在于教学过程设计，由于微课的时间短，一般也就5~8分钟，所以整个教学过程必须安排得很充实，为了使教学效果达到最好，教学过程设计必须精确到分钟。下面就综合给出一个微课教学设计的模板，仅供大家参考。</p>
<p>表3.1 微课的教学设计</p>
<table>
<thead>
<tr>
<th>微课名称</th>
<th></th>
<th>视频长度</th>
<th></th>
<th>录制时间</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>知识点来源</td>
<td>学科：     年级：     教材版本：</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>学习者特征</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>教学目标</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>教学内容</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>教学过程设计</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>内 容</td>
<td>时间</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>一、片头</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>二、正文讲解</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>三、结尾</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id="3-3-微课教学设计案例"><a href="#3-3-微课教学设计案例" class="headerlink" title="3.3 微课教学设计案例"></a>3.3 微课教学设计案例</h2><p>为了更好的说明问题，笔者在这里选择一部优秀的微课作品进行分析。这部微课作品名为《讲解比喻句》[8]。如下表所示：</p>
<p>表3.2 微课教学设计案例</p>
<table>
<thead>
<tr>
<th>微课名称</th>
<th>讲解比喻句</th>
<th>视频长度</th>
<th>4分51秒</th>
<th>录制时间</th>
<th>2013年7月</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>知识点来源</td>
<td>学科：   语文    年级：三年级 教材版本： 人教版</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>学习者特征</td>
<td>此节微课的对象是三年级小学生，小学三年级学生对比喻句已经有一定的认识，基本能判断比喻句，但是他们对此缺乏比较系统的认识。</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>教学目标</td>
<td>(1)能从学过或未学的课文中，识别出运用比喻修辞手法的句子  (2)能根据比喻句的结构形式特点，仿写比喻句  (3)根据语言环境，分析比喻的基本表达效果</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>教学内容</td>
<td>比喻句的结构形式在实际运用中较灵活多样，比喻词也不只是常见的“好像”、“像”、“仿佛”，通过认识一些比喻词，加深学生对比喻句的认识。要想灵活运用所学知识去准确判断并运用比喻句，需通过实例多次反复学习。</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>教学过程设计</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>内 容</td>
<td>时间</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>三、片头</td>
<td>大家好，本节微课重点讲解比喻句的特点、作用，  能初步判断一句话是不是比喻句。</td>
<td>30秒以内</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>四、正文讲解</td>
<td>第一部分内容：  什么是比喻句？并举例  一种修辞方式。就是打比方，用浅显、具体、生动的事物来代替抽象、难理解的事物。</td>
<td>60秒</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>第二部分内容：  比喻句有什么作用？  1.比喻说理浅显易懂，使人容易接受。  2.比喻叙事能化抽象为具体，使事物更清楚明白。  3.比喻状物能使概括的东西形象化，给人深刻的印象。</td>
<td>50秒</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>第三部分内容：  哪些句子不是比喻句？并举例讲解。  （1）表示比较（2）表示举例（3）表示猜测（4）表示联想  （5）表示说明</td>
<td>150秒</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>四、结尾</td>
<td>授课完毕，谢谢聆听！</td>
<td>30秒以内</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h1 id="4-微课的制作"><a href="#4-微课的制作" class="headerlink" title="4 微课的制作"></a>4 微课的制作</h1><p>制作微课，首先除了做好教学设计之外，接下来就是微课件制作、微课录制以及微课后期制作了。下面就一一进行讲解。</p>
<h2 id="4-1-微课件制作"><a href="#4-1-微课件制作" class="headerlink" title="4.1 微课件制作"></a>4.1 微课件制作</h2><p>一般说来，微课的资源构成由教学设计（微教案）、素材课件（微课件）、微视频等构成[9]。做好教学设计之后，就要进行微教案的制作了。制作教案的工具有PPT、flash、authware等，但是对于微课的制作，用得最多的还是PPT。微课由于它自身的特殊性，所以需要注意的一些问题和设计原则。首先微课的PPT必须做到图文并茂、直观生动，这是PPT制作的最基本要求。此外，由于微课时间限制的原因，为了让学生快速地在有限的时间内找到视觉关注点，应该适宜地添加必要的视觉导航标识，如用颜色、箭头、闪烁、下划线等标出当前所讲内容在PPT中的位置，或用方形、圆形、等形状圈出所讲内容在图片中的区域等。这样就能很好地引起学生的注意。一个精心设计的PPT在微课中会给学生的注意力选择、维持及调整带来极大的促进作用。</p>
<h2 id="4-2-微课视频录制"><a href="#4-2-微课视频录制" class="headerlink" title="4.2 微课视频录制"></a>4.2 微课视频录制</h2><p>微课的载体是视频，所以微课视频的录制就显得尤为重要。通过对比全国中小学微课和高校微课大赛的参赛规则与制作要求，我们可以发现除了视频时长不同之外，最主要区别还是在于制作手段上。中小学微课的制作采用录屏软件(Camtasia Studio V6．02)+PPT。而高校微课大赛的微课制作更多采用的是摄像机摄像+PPT+后期制作。比较这两种方法，应该说各有各的优点。高校全国微课大赛的微课制作必须依靠专业人员摄像并进行后期制作，有片头片尾，除了投人时间和精力外，有一定的制作成本。而中小学全国微课大赛的微课制作则相对简单，每个教师自己就能独立完成，除了投入时间和精力外，制作成本很低。其实除了以上两种方法之外，微课视频录制还有其他的方法，下面就具体地来一一介绍一下。</p>
<h3 id="4-2-1-Camtasia-Studio-6-录屏软件"><a href="#4-2-1-Camtasia-Studio-6-录屏软件" class="headerlink" title="4.2.1 Camtasia Studio 6 录屏软件"></a>4.2.1 Camtasia Studio 6 录屏软件</h3><p>录屏软件有许多，在微课制作中，用得最多的还是Camtasia Studio 6。它也是中国微课网所推荐使用的录屏软件。下面就简单介绍一下这个软件怎样使用。</p>
<p>第一步：打开CS 6软件。在界面中找到“录制屏幕”按钮，点击“录制屏幕”按钮打开界面。</p>
<p>第二步：打开最小化在任务栏的PPT课件并播放，在弹出的界面中用“选择区”去调整录屏大小刚好为PPT课件显示大小。</p>
<p>第三步：点击软件上的“camera”按钮使摄像头处于打开状态，并调整屏幕中自己头像在画面的合适位置。</p>
<p>第四步：点击软件上的“Audio”按钮，测试声音是否正常，并调整音量滑块条到95%左右最佳，目的是降低录音时产生较大的噪音。</p>
<p>第五步：以上调整好后，点软件上“REC”开始录制按钮，当出现倒数数字3、2、1后便可开始录制了。</p>
<p>第六步：当微课讲解完毕后，快速按下快捷键“F10” 结束，在弹出的界面可以预览刚才录制好的微课。再点“Save”按键保存文件。方法二是先关闭PPT课件，然后按下软件界面上的“Stop”按键结束，再点“Save”按键保存文件。</p>
<h3 id="4-2-2智能手机拍摄"><a href="#4-2-2智能手机拍摄" class="headerlink" title="4.2.2智能手机拍摄"></a>4.2.2智能手机拍摄</h3><p>相对录屏软件，手机拍摄所需要的条件相对来说简单些。一般说来只需要一个手机，一支笔(也可选择不同颜色的笔)和一张纸。当然也可以用电脑对所拍摄视频进行后期编辑。另外手机拍摄应该要用到两个人。具体实施方案如下：用笔在纸上展现教学过程，边讲解边演算，可以用不同颜色的笔书写、画图、标记等行为，例如对重点内容可以用红笔勾出。此外要讲解时要做到尽量保证语音清晰，演算过程逻辑性强，教授或解答过程明了易懂。下面这张图片很清楚地展现手机拍摄微课的场景。</p>
<p><img src="/../img/%E5%BE%AE%E8%AF%BE%E7%9A%84%E6%95%99%E5%AD%A6%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%88%B6%E4%BD%9C/1.jpg" alt="img"></p>
<p>图4.1 手机拍摄微课</p>
<h3 id="4-2-3-数码摄像机拍摄"><a href="#4-2-3-数码摄像机拍摄" class="headerlink" title="4.2.3 数码摄像机拍摄"></a>4.2.3 数码摄像机拍摄</h3><p>用数码摄像机拍摄相对来说比较繁琐。一般说来高校里的微课比赛更多地是采用这种方式。它往往是利用PPT展开教学过程，用数码摄像机实时记录课堂教学过程中的教师、学生、多媒体教学信号等教学实景画面。相对于以上几种方法，这种方法制作成本相对来说要高些，往往需要比较专业的人员协助拍摄。此外，大多数人在摄像机前讲课还是会紧张的，怎样在20分钟左右时间里把课程的节奏控制得当，都需要下工夫，所以往往在拍摄前要准备脚本，必要时也需要排练预演。在拍摄时，摄像师应注意调整摄像机的机位、高度和仰俯，多采用中景、近景和特写等小景别画面，多使用固定镜头，以保证视频质量。另外，由于教师的形象要出现在屏幕上，因此教师要仪表端庄，衣着整洁得体，教态自然，举止得当。总的来说，这种方法比较传统，特别适合于讲授型、讲题类和答疑类的微课的拍摄。</p>
<h3 id="4-2-4-可汗学院微课录制方式"><a href="#4-2-4-可汗学院微课录制方式" class="headerlink" title="4.2.4 可汗学院微课录制方式"></a>4.2.4 可汗学院微课录制方式</h3><p>利用可汗学院模式也是中国微课网所推荐的一种方式，它的制作方法一般说来是通过手写板和画图工具对教学过程进行讲解演示，并使用屏幕录像软件录制[10]。具体步骤如下：第一步，安装手写板或交互白板及其配套的专用笔等工具，并使之与电脑连接；第二步，使用演示软件如PPT对教学过程进行演示；第三步，利用手写板或交互白板自带的摄录软件或专业录屏软件，录制教学过程。总的来说，）；这种方法制作比较简单，便捷，适合用于常用简笔画图示来讲解的课程，如数学、物理等课程的公式推导、美术课程等。下面的一张图片很清楚地展现了可汗学院录制方式。</p>
<p><img src="/../img/%E5%BE%AE%E8%AF%BE%E7%9A%84%E6%95%99%E5%AD%A6%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%88%B6%E4%BD%9C/2.jpg" alt="img"></p>
<p>图4.2 可汗学院录制方式</p>
<h3 id="4-2-5-其他方式"><a href="#4-2-5-其他方式" class="headerlink" title="4.2.5 其他方式"></a>4.2.5 其他方式</h3><p>其实制作微课并不一定说局限于以上几种方法，我们也是鼓励其他的一些方法。现在互联网高速发展，平板电脑也日益流行起来。我们也可以选择用平板电脑制作微课，在平板电脑上有几款应用可以用来制作微课，例如Show Me、Educreations、Ask3[11]。下面就来具体说一下Show Me这款应用吧。Show Me是一个非常好的移动学习平台。制作微课你也可以选择用它来做，制作方法也是比较简单的，只要你的平板电脑上安装了Show Me App，你就可以录制微课了，录制完成之后，你也可以将其并上传到Show Me学习平台上去。Show Me不仅是个分享平台，也是一个学习平台。如果你想学习一些知识，你可以选择在里面搜索到你想要学习的东西，你可选择在线学习，也可以下载下来自主学习。我们可以看到无论是制作微课，还是自主学习,Show Me这款软件使用起来都是非常简单的。</p>
<h2 id="4-3-微课视频后期处理"><a href="#4-3-微课视频后期处理" class="headerlink" title="4.3 微课视频后期处理"></a>4.3 微课视频后期处理</h2><p>微课视频录制之后，并不意味着整个微课完成了。要想使微课完美，后期处理是必须的。一般说来微课视频的编辑包括“画中画的编辑”、“视频的剪辑”、“声音的处理”、“批注的添加”、“视频的缩放”、“标题剪辑和转场”、“背景音乐的添加”等，当然你可以按照自己的需要有选择地进行视频的编辑。应该说视频处理软件有许多，比喻说会声会影、Premire等，在这些软件当中，最简单的软件笔者觉得还是会声会影。下面笔者就选择会声会影就微课视频进行处理，具体的步骤如下。</p>
<p>(1)添加片头：初学者可以在“快速模板”里选择合适的片头，拖放到第二个轨道前，模板中包含的素材可以在相应的轨道里修改，如选中文字轨道，在预览窗口双击有文字，就可修改成需要的文字。</p>
<p>(2)添加文字说明和特效：在需要添加文字位置分割视频，然后拖动后一段视频，使彼此之间有一段距离，在素材点击“文字”按钮，在预览窗口中双击，输入文字，调整文字图层长度，使其链接两段视频。</p>
<p>(3)添加字幕：添加字幕的方法与添加说明文字的方法一致，这里就不在重复说明了。</p>
<p>同样的，你也可以在微课里添加图像和背景音乐等素材。一般说来，在微课视频编辑过程中，要遵循线性思路，不能随意跳跃，避免视频轨道错位而引发的编辑错误。</p>
<h1 id="5-结论"><a href="#5-结论" class="headerlink" title="5 结论"></a>5 结论</h1><p>微课是高速发展的信息时代环境下对传统教学模式、学习方式以及教学资源表现形式等方面的一次变革,本文主要通过文献综述以及对全国高校微课比赛和全国中小学微课比赛作品的一些分析，综合提出了微课教学设计以及微课制作的方法。虽说未必有独创的特性，不过毕竟微课还是一个新鲜的事物，它还处在蓬勃发展时期，也许有关微课制作的方法和制作理念会随着时间的改变而改变。本文还是希望能够对微课的发展起到一点启示与促进作用。</p>
<p>**<br>**</p>
<h1 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p>[1] 胡铁生,黄明燕,李民.我国微课发展的三个阶段及其启示[J].远程教育杂志，2013(04).</p>
<p>[2] 胡铁生.“微课”:区域教育信息资源发展的新趋势[J].电化教育研究，2011(10).</p>
<p>[3] 黎加厚.微课的含义与发展[J].中小学信息技术教育，2013(04).</p>
<p>[4] 吴婵.关于微课对优化高校教学效果的思考[J].科教导刊(中旬刊)，2013(10).</p>
<p>[5] 首届全国高校微课教学比赛评审规则[EB&#x2F;OL]. <a href="http://weike.enetedu.com/bisai_guize.html">http://weike.enetedu.com/bisai_guize.html</a></p>
<p>[6] 张琛.微课程的设计与制作[J].中国职业技术教育，2013(35).</p>
<p>[7] 黄建军,郭绍青.论微课程的设计与开发[J].现代教育技术，2013(05).</p>
<p>[8] 教师专业发展与信息化[EB&#x2F;OL]. <a href="http://www.etkeylab.com/cop/wkupload/2013070958014033.doc">http://www.etkeylab.com/cop/wkupload/2013070958014033.doc</a></p>
<p>[9] 胡铁生.中小学微课建设与应用难点问题透析[J].中小学信息技术教育，2013(04).</p>
<p>[10] 中国微课[EB&#x2F;OL].<a href="http://dasai.cnweike.cn/?c=main&a=make&from=dasai">http://dasai.cnweike.cn/?c=main&amp;a=make&amp;from=dasai</a></p>
<p>[11] 焦建利.教师微课制作的简便方法:几款基于平板电脑的应用[J].中国远程教育，2013(06).</p>
<hr>
<p><strong>PS：Camtasia 2022更改中文语言</strong>：</p>
<p>参考：</p>
<p><a href="https://www.bilibili.com/video/BV1nZ4y1f74q/?vd_source=cb4a6ad8978ef3ac986f741316ee2cc3">https://www.bilibili.com/video/BV1nZ4y1f74q/?vd_source=cb4a6ad8978ef3ac986f741316ee2cc3</a></p>
<p>一、首先记得打开时用防火墙阻止程序联网及选项中取消自动检测更新</p>
<ol>
<li>在C:\windows\system32\drivers\etc\hosts的末尾中添加下面命令：</li>
</ol>
<p>127.0.0.1 <a href="http://www.techsmith.com/">www.techsmith.com</a></p>
<p>127.0.0.1 activation.cloud.techsmith.com</p>
<p>127.0.0.1 oscount.techsmith.com</p>
<p>127.0.0.1 updater.techsmith.com</p>
<p>127.0.0.1 camtasiatudi.techsmith.com</p>
<p>127.0.0.1 tsccloud.cloudapp.net</p>
<p>127.0.0.1 assets.cloud.techsmith.com</p>
<p>2.更改语言后在软件里取消自动检测更新。</p>
<p>二、更改中文语言</p>
<ol>
<li><p>开始—运行—regedit（注册表）</p>
</li>
<li><p>以此点开“计算机\HKEY_LOCAL_MACHINE\SOFTWARE\TechSmith\Camtasia Studio\22.0”（可直接粘贴上面地址到地址栏上按回车键，前提是版本是22.0）</p>
</li>
<li><p>找到<strong>InstallLang</strong>修改为<strong>CHS</strong></p>
</li>
</ol>
]]></content>
      <categories>
        <category>教学</category>
      </categories>
      <tags>
        <tag>论文</tag>
      </tags>
  </entry>
  <entry>
    <title>把一个正方形平分成四份</title>
    <url>/archives/5f8ae8ad/</url>
    <content><![CDATA[<p>  从学生的角度来讲，把一个正方形一部分成四份，应该有四种分法,如图所示：</p>
<p><img src="/../img/%E6%8A%8A%E4%B8%80%E4%B8%AA%E6%AD%A3%E6%96%B9%E5%BD%A2%E5%B9%B3%E5%88%86%E6%88%90%E5%9B%9B%E4%BB%BD/1.jpg"></p>
<p>但是，如果不是学生，有人突然问你这样的一个问题，你就可以这样回答：有无数种方法。如：</p>
<p><img src="/../img/%E6%8A%8A%E4%B8%80%E4%B8%AA%E6%AD%A3%E6%96%B9%E5%BD%A2%E5%B9%B3%E5%88%86%E6%88%90%E5%9B%9B%E4%BB%BD/2.jpg"></p>
<p>另外，我们还可以正方形的中心为交点画一个互相垂直的直线，然后沿此中心旋转，被分成的四个部分永远都是平均的四份。</p>
<p>参考链接：<a href="https://zhidao.baidu.com/question/1177400619988510499.html">把一个正方形平分成四份.有几种分法</a></p>
]]></content>
      <categories>
        <category>教学</category>
      </categories>
      <tags>
        <tag>一年级数学</tag>
      </tags>
  </entry>
  <entry>
    <title>提高搜索效率的7个小技巧</title>
    <url>/archives/92094531/</url>
    <content><![CDATA[<h2 id="排除关键词"><a href="#排除关键词" class="headerlink" title="排除关键词"></a>排除关键词</h2><p>方法是：减号+关键词</p>
<p>功能是：排除一些  不想要的关键词</p>
<p>例如：<code>锤子 -锤子手机</code></p>
<h2 id="精确搜索"><a href="#精确搜索" class="headerlink" title="精确搜索"></a>精确搜索</h2><p>方法是：给关键词加引号</p>
<p>功能是：只搜索引号里的字</p>
<h2 id="指定网站内搜索"><a href="#指定网站内搜索" class="headerlink" title="指定网站内搜索"></a>指定网站内搜索</h2><p>方法是：site:域名+关键词（此处加号代表空格）</p>
<p>功能是：在指定网站内搜索</p>
<h2 id="指定文件格式"><a href="#指定文件格式" class="headerlink" title="指定文件格式"></a>指定文件格式</h2><p>方法是：filetype:文件格式+关键词（此处加号代表关键词）</p>
<p>功能是：指定文件格式</p>
<h2 id="指定标题搜索"><a href="#指定标题搜索" class="headerlink" title="指定标题搜索"></a>指定标题搜索</h2><p>方法是：intitle:关键词</p>
<p>功能是：搜索结果必须在标题中</p>
<h2 id="两种指定范围搜索"><a href="#两种指定范围搜索" class="headerlink" title="两种指定范围搜索"></a>两种指定范围搜索</h2><p><code>锤子 intext:苹果</code>:要求搜索结果中有这个关键词。</p>
<p><code>allintext:认知心理学 发展心理学 积极心理学</code> ：要求三个关键词都包括在搜索结果中。</p>
<p><code>inurl:关键字</code>：要求在网页url中包含关键词。</p>
<h2 id="叠加使用"><a href="#叠加使用" class="headerlink" title="叠加使用"></a>叠加使用</h2><p><code>site:douban.com 亲密关系 intext:罗兰米勒</code></p>
<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ol>
<li><p>所有的冒号都是半角，也就是英文的冒号而不是中文的冒号。</p>
</li>
<li><p>空格很重要，关键词之间一定要有空格。</p>
</li>
<li><p>提取关键词很重要。</p>
</li>
</ol>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://www.bilibili.com/video/BV1YK4y1t7bg">搜索效率提升200%！8个小技巧助你快速查资料</a></li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>tips</tag>
      </tags>
  </entry>
  <entry>
    <title>查看Windows和Office激活状态的方法&amp;&amp;安装方法</title>
    <url>/archives/23a66736/</url>
    <content><![CDATA[<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>使用第三方工具Office Tool Plus，搜下载链即可，论坛上也有</p>
<h2 id="win10"><a href="#win10" class="headerlink" title="win10"></a>win10</h2><p>使用命令查看Windows 10激活状态：</p>
<p>当然，对于系统管理员来说，最传统的方式就是使用命令行的方式来查看系统激活状态。管理员只需按下 Windows + R 快捷键 — 输入并执行 CMD 打开命令提示符。</p>
<p>输入并执行如下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">slmgr /xpr</span><br></pre></td></tr></table></figure>

<h2 id="Office"><a href="#Office" class="headerlink" title="Office"></a>Office</h2><p>命令行查看office激活期限：</p>
<p> 1、首先找到office安装目录，我的是C:\Program Files\Microsoft Office\Office16<br> 2、打开终端：win+R<br><del>3、输入：cmd</del><br><del>4、输入：cd C:\Program Files\Microsoft Office\Office16</del><br> <del>5、按回车</del><br> <del>6、输入：<code>cscript ospp.vbs /dstatus</code></del></p>
<p>7、直接输入<code>cscript “C:\Program Files\Microsoft Office\Office16\ospp.vbs” /dstatus</code></p>
<p> 8、显示</p>
<p><img src="/img/%E6%9F%A5%E7%9C%8BWindows%E5%92%8COffice%E6%BF%80%E6%B4%BB%E7%8A%B6%E6%80%81%E7%9A%84%E6%96%B9%E6%B3%95/202203132026632.png"></p>
<p>可以看到还剩179天到期，到期可以再jh。</p>
<p>9.如果上面图片末尾未显示jh相关信息，复制图中的<code>SKU ID</code></p>
<p>10.然后输入<code>slmgr /xpr xxxxxxxxxxxxxxxxxxxxx(sku id)</code> ，回车。显示：</p>
<p><img src="/img/%E6%9F%A5%E7%9C%8BWindows%E5%92%8COffice%E6%BF%80%E6%B4%BB%E7%8A%B6%E6%80%81%E7%9A%84%E6%96%B9%E6%B3%95/jihuo.png"></p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><p><a href="https://www.office26.com/windows/check-windows-10-active-status.html">如何查看Windows 10激活状态的几种方式</a></p>
</li>
<li><p><a href="https://blog.csdn.net/qq_36659185/article/details/105184356?utm_medium=distribute.pc_aggpage_search_result.none-task-blog-2~aggregatepage~first_rank_ecpm_v1~rank_v31_ecpm-1-105184356.pc_agg_new_rank&utm_term=office%E6%BF%80%E6%B4%BB%E6%9F%A5%E7%9C%8B&spm=1000.2123.3001.4430">命令行查看office激活期限</a></p>
</li>
<li><p><a href="https://new.qq.com/rain/a/20220601A0CT4F00">office Windows永久激活状态查询方法</a></p>
</li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>win10</tag>
      </tags>
  </entry>
  <entry>
    <title>求阴影部分面积</title>
    <url>/archives/313793f1/</url>
    <content><![CDATA[<h2 id="题型一"><a href="#题型一" class="headerlink" title="题型一"></a>题型一</h2><p><img src="/../img/%E6%B1%82%E9%98%B4%E5%BD%B1%E9%83%A8%E5%88%86%E9%9D%A2%E7%A7%AF/1.jpg"></p>
<p>此题用相似三角形最简单，3&#x2F;a&#x3D;b&#x2F;8，ab&#x3D;24    但小学阶段就用上图方法为好。</p>
<hr>
<h2 id="题型二"><a href="#题型二" class="headerlink" title="题型二"></a>题型二</h2><p><img src="/../img/%E6%B1%82%E9%98%B4%E5%BD%B1%E9%83%A8%E5%88%86%E9%9D%A2%E7%A7%AF/1-16604674519182.jpg"></p>
<hr>
<h2 id="题型三"><a href="#题型三" class="headerlink" title="题型三"></a>题型三</h2><p><img src="/../img/%E6%B1%82%E9%98%B4%E5%BD%B1%E9%83%A8%E5%88%86%E9%9D%A2%E7%A7%AF/1-16604674769534.jpg"></p>
<p>如图将圆柱斜切一刀求体积。将圆柱补齐，所求图形的体积为高5cm圆柱体积的一半。</p>
<p>PS：可先用希沃白板画出图形，利用克隆等小工具展示拼接图形的过程。</p>
<p>参考：<a href="https://www.bilibili.com/video/BV1T94y1174i?spm_id_from=333.999.0.0&vd_source=cb4a6ad8978ef3ac986f741316ee2cc3">六年级：巧求阴影部分面积</a></p>
]]></content>
      <categories>
        <category>教学</category>
      </categories>
      <tags>
        <tag>练习题</tag>
        <tag>阴影面积</tag>
      </tags>
  </entry>
  <entry>
    <title>用PC Logo画五环</title>
    <url>/archives/1f16c2b4/</url>
    <content><![CDATA[<p> 记得这是一次青年教师什么考试的题目，当然没能够做出来，有必要记录一下，代码如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cs</span><br><span class="line">repeat 36+18[rt 5 fd 10 rt 5]</span><br><span class="line">repeat 36+18[lt 5 fd 10 lt 5]</span><br><span class="line">repeat 36[rt 5 fd 10 rt 5]</span><br><span class="line">repeat 36[rt 5 fd 10 rt 5]</span><br><span class="line">rt 90 repeat 36[rt 5 fd 10 rt 5]</span><br><span class="line">pu bk 115 pd</span><br><span class="line">repeat 36[rt 5 fd 10 rt 5]</span><br></pre></td></tr></table></figure>

<p>参考链接：<a href="https://zhidao.baidu.com/question/160053860.html">用嵌套repeat画奥运五环 是pc logo 里的</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>tips</tag>
      </tags>
  </entry>
  <entry>
    <title>用pr制作《2021年春季运动会》电子相册</title>
    <url>/archives/68e07e4a/</url>
    <content><![CDATA[<p>用pr做了一个电子相册，参考： <a href="https://www.bilibili.com/video/BV1Wx41177ps">使用 Premiere 把照片变成唯美动画效果。</a></p>
<div align=center class="aspect-ratio">
    <iframe src="https://player.bilibili.com/player.html?aid=502918992&&page=1&as_wide=1&high_quality=1&danmaku=0" 
    scrolling="no" 
    border="0" 
    frameborder="no" 
    framespacing="0" 
    high_quality=1
    danmaku=1 
    allowfullscreen="true"> 
    </iframe>
</div>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>pr</tag>
        <tag>电子相册</tag>
        <tag>视频</tag>
      </tags>
  </entry>
  <entry>
    <title>笔记本硬盘改移动硬盘&amp;分区安装PE</title>
    <url>/archives/53b6e946/</url>
    <content><![CDATA[<p> 笔记本换SSD后，原来机械硬盘没用了。这时可以将原来的硬盘改成移动硬盘。方法是买一个移动硬盘盒子。下面着重记一下在移动硬盘安装PE的方法。</p>
<p>1.用<code>DiskGenius</code>给移动硬盘分区：新建一个5G大小的<code>FAT32</code>格式的分区，用来安装PE；硬盘其他空间新建一个<code>NTFS</code>格式的分区，用来存放文件。</p>
<p>2.打开<a href="http://www.wepe.com.cn/download.html">微PE工具箱</a>，右下角选择<code>安装PE到移动硬盘</code>，第一主分区选择刚才建立的<code>FAT32</code>分区，然后点击<code>立即安装进移动硬盘</code>。</p>
<p>3.将操作系统等相关文件复制到<code>FAT32</code>分区里，便于安装系统使用。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>tips</tag>
      </tags>
  </entry>
  <entry>
    <title>观看IPTV的方法</title>
    <url>/archives/bf1a1de4/</url>
    <content><![CDATA[<p>1.搜索<code>2022 直播源</code>。</p>
<p>2.如果不支持txt格式的直播源，使用<code>TeleList</code>转换为<code>m3u</code>格式。</p>
<p>3.直播源检测：有的时候，部分直播源可能会失效，这个时候最好使用工具检测一下直播源的有效性，及时剔除失效的直播源，以免影响后续电视直播的观看！</p>
<p>我们要用到的检测工具名为<code>IPTV检查器</code>，导入直播源之后，点击左侧的“检查”开始检测，有效的直播源会标记为在线，失效的直播源标记为离线。最后以状态列出离线列表，然后通过快捷键<code>ctrl+a</code>全选并删除，最后保存有效直播源。</p>
<p>参考链接：</p>
<p><a href="https://www.toutiao.com/article/6858829883263418884/?wid=1649684170853">1.上千个境内外4K高清直播源，配合播放器，看电视贼爽</a></p>
<p><a href="https://www.haah.net/archives/5209.html">2.2022-2月最新稳定全球频道蓝光直播源，稳定播放</a></p>
<p><a href="https://tyson.cool/index.php/1215/">3.2022年IPTV最新有效直播源，上万频道（每天更新）</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>tips</tag>
      </tags>
  </entry>
  <entry>
    <title>联想笔记本电脑升级bios</title>
    <url>/archives/bb464c3c/</url>
    <content><![CDATA[<p> 2020.5.26　已升级安装最新bios版本：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">2018/9/3  版本：BIOS Version: E5CN63WW,EC Version:E5IT23WW</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>Fn+F2</code>进入bios，<code>Fn+F12</code>选择启动顺序。</p>
</blockquote>
<p>1.打开联想服务的驱动与下载网页：<a href="https://newsupport.lenovo.com.cn/driveDownloads_index.html">查找驱动程序及工具软件</a>，选择<code>在站内查找设备驱动</code>， 输入你的电脑主机编号（可以在电脑背面的标签上找到，也可以安装联想电脑管家，会自动检测你的主机编号），确定后进入驱动下载界面。联想小新700（主机编号：R90JZRF4）直接点击：<a href="https://newsupport.lenovo.com.cn/driveList.html?fromsource=driveList&selname=r90jzrf4">小新 700-15ISK</a></p>
<p>2.在驱动列表中找到bios驱动，下载安装即可，当然，这个界面的所有驱动你都可以下载安装。</p>
<p>总结：如果升级完bios，每回重启完电脑声音总是静音的话，下载<a href="https://www.160.com/">驱动人生</a>，重新安装声卡驱动。此外升级bios后，可解决小新700无故自动休眠问题。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>win10</tag>
      </tags>
  </entry>
  <entry>
    <title>解决Github Port 443以及Port 22问题</title>
    <url>/archives/2284a148/</url>
    <content><![CDATA[<h2 id="解决port-443问题"><a href="#解决port-443问题" class="headerlink" title="解决port 443问题"></a>解决port 443问题</h2><p>1.切换到全：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global http.proxy http://127.0.0.1:10809</span><br><span class="line"> </span><br><span class="line">git config --global https.proxy http://127.0.0.1:10808</span><br></pre></td></tr></table></figure>

<p>2.取消全：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global --<span class="built_in">unset</span> http.proxy</span><br><span class="line"> </span><br><span class="line">git config --global --<span class="built_in">unset</span> https.proxy</span><br></pre></td></tr></table></figure>

<p>3.再次切换到全：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global http.proxy http://127.0.0.1:10809</span><br><span class="line"> </span><br><span class="line">git config --global https.proxy http://127.0.0.1:10808</span><br></pre></td></tr></table></figure>

<p>这时会出现 <code>port 22: Connection refused</code>问题。</p>
<h2 id="解决port-22问题"><a href="#解决port-22问题" class="headerlink" title="解决port 22问题"></a>解决<code>port 22</code>问题</h2><p>1.进入.ssh的目录，使用命令<code>touch config</code>创建一个配置文件，并写入你github的配置信息。（<code>xxxxx@xx.com</code>是你github的注册邮箱）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Host github.com  </span><br><span class="line">User xxxxx@xx.com  </span><br><span class="line">Hostname ssh.github.com  </span><br><span class="line">PreferredAuthentications publickey  </span><br><span class="line">IdentityFile ~/.ssh/id_rsa  </span><br><span class="line">Port 443</span><br></pre></td></tr></table></figure>

<p>2.更改配置文件config的权限。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 600 config</span><br></pre></td></tr></table></figure>

<p>3.再尝试查看连接状态</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh git@github.com</span><br></pre></td></tr></table></figure>

<p><strong>Please make sure you have the correct access rights and the repository exist</strong></p>
<p>如果即使已经添加本地公钥到github，还提示以上错误，并且执行<code>ssh -T git@github.com</code>提示22端口关闭，解决方法见上。</p>
<h2 id="多-Git-仓库的-SSH-key-配置"><a href="#多-Git-仓库的-SSH-key-配置" class="headerlink" title="多 Git 仓库的 SSH-key 配置"></a>多 Git 仓库的 SSH-key 配置</h2><p><strong>PS:未测试</strong></p>
<h3 id="配置多-SSH-key"><a href="#配置多-SSH-key" class="headerlink" title="配置多 SSH key"></a>配置多 SSH key</h3><h4 id="1-添加-RSA-key"><a href="#1-添加-RSA-key" class="headerlink" title="1. 添加 RSA key"></a>1. 添加 RSA key</h4><p>仍然使用命令</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -c &quot;your@email.com&quot;</span><br></pre></td></tr></table></figure>

<p>生成 RSA 密钥对，但在接下来的选项中指定一个不同的文件名，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Enter file in which to save the key (/Users/userName/.ssh/id_rsa): /Users/userName/.ssh/new_rsa</span><br></pre></td></tr></table></figure>

<p>这样就在 <code>~/.ssh</code> 目录下生成了一对新的 RSA 密钥：<code>new_rsa</code> 和 <code>new_rsa.pub</code>.</p>
<h4 id="2-密钥配置"><a href="#2-密钥配置" class="headerlink" title="2. 密钥配置"></a>2. 密钥配置</h4><p>生成了新的密钥后，便可将新密钥成功添加到第二个 GitHub 账号. 但此时向第二个 Github 仓库推送更新仍然会显示无权限，因为若不经配置系统默认仍使用默认的密钥对 <code>id_rsa</code>.</p>
<p>需要如下配置：</p>
<p>在密钥目录 <code>~/.ssh/</code> 下编辑或新建配置文件 <code>config</code>，添加如下内容：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">Host</span> <span class="string">github.com</span></span><br><span class="line">  <span class="string">HostName</span> <span class="string">github.com</span></span><br><span class="line">  <span class="string">IdentityFile</span> <span class="string">~/.ssh/id_rsa</span></span><br><span class="line">  <span class="string">User</span> <span class="string">git</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">Host</span> <span class="string">alias</span></span><br><span class="line">  <span class="string">HostName</span> <span class="string">github.com</span></span><br><span class="line">  <span class="string">IdentityFile</span> <span class="string">~/.ssh/new_rsa</span></span><br><span class="line">  <span class="string">User</span> <span class="string">git</span></span><br></pre></td></tr></table></figure>

<p>理解其中配置项就可以灵活配置更多的 SSH key 了：</p>
<ul>
<li><code>Host</code> 是我们<strong>自己定义</strong>的一个别名，用来更方便地指代 <code>HostName</code>.</li>
<li><code>HostName</code> 是远程地址的域名，需要正确配置.</li>
<li><code>IdentityFile</code> 指定使用该配置项中的域名（或别名）时所使用的密钥文件.</li>
<li><code>User</code> 使用 SSH 时的用户名，对于远程 Git 仓库来说一般使用 <code>git</code>.</li>
</ul>
<p>以上第一个配置项，使域名为 <code>github.com</code> 的仓库默认使用 <code>id_rsa</code> 密钥对，第二个配置项为地址中使用了别名 <code>alias</code> 的仓库使用 <code>new_rsa</code> 密钥对</p>
<h4 id="3-使用别名配置仓库的远程地址"><a href="#3-使用别名配置仓库的远程地址" class="headerlink" title="3. 使用别名配置仓库的远程地址"></a>3. 使用别名配置仓库的远程地址</h4><p>配置完以上内容后，当我们使用 <code>alias</code> 作为登陆地址时会使用指定的 <code>new_rsa</code> 密钥，否则仍默认使用 <code>id_rsa</code> 密钥，因此我们需要对想要使用 <code>new_rsa</code> 密钥的仓库地址做修改. 例如：</p>
<p>对于仓库地址为</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git@github.com:user_name/repository_name.git</span><br></pre></td></tr></table></figure>

<p>的 GitHub 远程仓库，我们推送更新时系统仍默认使用 <code>id_rsa</code> 密钥，若想使用 <code>new_rsa</code> 密钥则需修改地址为：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git@alias:user_name/repository_name.git</span><br></pre></td></tr></table></figure>

<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li>对于 Windows 用户需要注意 <code>.ssh</code> 目录的路径</li>
<li>config 不生效的话检查语法或尝试重启终端或设备后重试</li>
<li>对于更多的密钥配置在 <code>~/.ssh/config</code> 文件中同理追加更多配置项即可</li>
</ul>
<p>参考链接：</p>
<p><a href="https://blog.csdn.net/Hodors/article/details/103226958">1.解决 Failed to connect to github.com port 443</a></p>
<p><a href="https://blog.csdn.net/MBuger/article/details/70226712">2.解决ssh: connect to host github.com port 22</a></p>
<p><a href="https://www.hozen.site/archives/43/">3.多 Git 仓库的 SSH-key 配置</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title>解决网页视频播放器进度条禁止拖动</title>
    <url>/archives/82f1bd2/</url>
    <content><![CDATA[<blockquote>
<p>本文转自：<a href="https://blog.csdn.net/weixin_46435234/article/details/114437203">https://blog.csdn.net/weixin_46435234/article/details/114437203</a></p>
</blockquote>
<p>1.点击键盘F12键，进入开发者模式</p>
<p>2.发现标志,html5播放器，属于原生支持最方便实现加速的</p>
<p>3.在开发者模式中找到Console 调式窗口，输入以下代码 可以设置视频播放速度</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/* play video twice as fast */</span><br><span class="line">document.</span><br><span class="line"></span><br><span class="line">querySelector(<span class="string">&#x27;video&#x27;</span>).defaultPlaybackRate = 1.0;//默认一倍速播放</span><br><span class="line">document.querySele</span><br><span class="line"></span><br><span class="line">ctor(<span class="string">&#x27;video&#x27;</span>).play();</span><br><span class="line"></span><br><span class="line">/* now play three <span class="built_in">times</span> as fast just <span class="keyword">for</span> the heck of it */</span><br><span class="line"></span><br><span class="line">document.querySelector(<span class="string">&#x27;video&#x27;</span>).playbackRate = 10.0;  //修改此值设置当前的播放倍数</span><br></pre></td></tr></table></figure>

<p>4.直接跳过视频：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">skip</span></span>() &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">let</span> video = document.getElementsByTagName(<span class="string">&#x27;video&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">let</span> i=0; i&lt;video.length; i++) &#123;</span><br><span class="line">    </span><br><span class="line">        video[i].currentTime = video[i].duration</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">setInterval(skip,200)</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>tips</tag>
      </tags>
  </entry>
  <entry>
    <title>让PS支持.ico&amp;webp格式</title>
    <url>/archives/c1a30035/</url>
    <content><![CDATA[<h3 id="ico插件"><a href="#ico插件" class="headerlink" title="ico插件"></a>ico插件</h3><ol>
<li>下载插件：官网下载地址：<a href="http://www.telegraphics.com.au/sw/">ICO (Windows Icon) Format </a>，找到ICO (Windows Icon) Format，然后根据系统选择相应版本，如Windows (64 bit)，进行下载。</li>
<li>复制下载的<code>ICOFormat64.8bi</code>，粘贴到<code>D:\Program Files\Adobe\Adobe Photoshop CC 2015\Required\Plug-Ins\File Formats</code></li>
<li>重新打开Photoshop点击打开会显示有.ico和.cur文件，也可以对文件进行操作，然后另存为.ico格式和.cur格式。</li>
</ol>
<p>参考链接：<a href="https://blog.csdn.net/weixin_44222492/article/details/101596183">使Photoshop支持ICO图片、CUR图片格式</a></p>
<h3 id="webp插件"><a href="#webp插件" class="headerlink" title="webp插件"></a>webp插件</h3><p>插件地址：<a href="https://github.com/webmproject/WebPShop">WebP file format plug-in for Photoshop</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>ps</tag>
      </tags>
  </entry>
  <entry>
    <title>配眼镜攻略</title>
    <url>/archives/c71649d1/</url>
    <content><![CDATA[<blockquote>
<p>注：本攻略来自网上</p>
</blockquote>
<p>整理的攻略：中国：明月 法国：依视路 德国：蔡司，罗敦司得 日本：豪雅，精工 韩国：凯米<br>网店：宝岛，（​宝岛眼​镜官方旗舰店）依视路（依视路旗舰店），蔡司（Zeiss 蔡司官方旗舰店）<br>国产总结：明月，万新，康耐特，新天鸿，优立，伟星，唯尊，鸿晨，schuman，洪旭<br>网上选择镜框尺寸：镜框宽度加一半的鼻梁宽 等于瞳距 或者公式瞳距 32 两只眼睛是 64 镜框宽 54 加鼻梁 16 的一半 8 等于 64 64 的一半是 32 刚好等于瞳距<br>公式二：📝用眼镜框的宽度 + 鼻梁宽度 - 瞳距再除以 2 最后得到的数尽量小于 3▶️举个例子：镜框宽度 48 + 鼻梁宽度 18&#x3D;66，用 66 - 瞳距 60&#x3D;6，再用 6 除以 2 最后等于 3，像这样的镜框就是比较适合的，小伙伴们可以自行去算一下当然越小越好最大也不要超过 5 或者 6。这样的话我们镜片的光学中心和镜框的光学中心能够尽可能的吻合，让我们配戴起来不会加深眼睛疲劳，尤其是青少年度数还不高</p>
<p>折射率：折射率越大 镜片越薄 但同时视觉效果有所下降 ，价格却直线飙升 度数低尽量别配高折射率镜片 白花钱<br>折射率参考：100 200-1.50 200-400 -1.56<br>300-600-1.60 400-800-1.67 800 以上 1.74<br>啊贝数：这个参数基本品牌差不多 但是同折射率同度数的镜片啊贝数低的就别选了。<br>球面 ：球面 非球面 双非球面 双非的价格品质最高 度数高 不差钱的不二选择<br>镀膜：镀膜的好处体现在透光率和耐磨度 但又不起决定作用 ，防辐射 防紫外线的镀膜确实有用 但是感受发黄有反光 不是 it 没必要选择 所以不是杂牌同度数同折射率一百两百和和上千基本没差距 还有抗疲劳和多焦点的 已成年没必要选择 其实没有完全证据证明这类镜片有效 ，酌情考虑，不要相信立等可取 那那么巧刚好有你参数基本符合的镜片 等几天吧 。<br>配镜：了解前面的品牌数据 就开始配镜了 验光很重要 去三甲医院或大型连锁眼镜店<br>推荐宝岛 因为他们会在公众号有你的数据档案 ， 后续不管 在网上配还是 线下配 数据都精确​。</p>
<p>（网友：我是去的线下同仁验光测的，然后买的京东京造。）</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>tips</tag>
      </tags>
  </entry>
  <entry>
    <title>分类</title>
    <url>/categories/index.html</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title></title>
    <url>/friend.json</url>
    <content><![CDATA[{"friends":[["Upptime","https://iwyang.github.io/check","/img/link-img/upptime.jpg"],["Takagi","https://lixingyong.com","/img/link-img/takagi.jpg"],["大大的小蜗牛","https://eallion.com/","/img/link-img/eallion.jpg"],["guole's Blog","https://guole.fun/","/img/link-img/guo.png"],["cywhat’s blog","https://cywhat.cn","/img/link-img/cywhat.jpg"],["Akilarの糖果屋","https://akilar.top","/img/link-img/akilar.jpg"],["小康博客","https://www.antmoe.com/","/img/link-img/xiaokang.jpg"],["张洪Heo","https://blog.zhheo.com/","/img/link-img/heo.jpg"],["Sianx's Blog","https://siax.cn","/img/link-img/sianx.jpg"],["Leonus","https://blog.leonus.cn/","/img/link-img/leonus.jpg"],["六月长河","https://charlie-king.github.io/","/img/link-img/kingpo.jpg"],["枫叶","https://blog.aqcoder.cn/","/img/link-img/aqcoder.jpg"],["lyshark","https://www.lyshark.com/","/img/link-img/lyshark.png"],["爱吃肉的猫","https://meuicat.com/","/img/link-img/mao.jpg"],["我不是咕咕鸽","https://blog.laoda.de/","/img/link-img/laoda.jpg"],["CWorld Site","https://cworld.top/","/img/link-img/cworld0.jpg"]]}]]></content>
  </entry>
  <entry>
    <title>关于</title>
    <url>/about/index.html</url>
    <content><![CDATA[<style>
.page-title {
    display: none;
  }
</style>
<h2 id="关于本站"><a href="#关于本站" class="headerlink" title="关于本站"></a>关于本站</h2><p>本站主要用来收集整理资料、记录笔记，方便自己查询使用。                 </p>
<h2 id="建站历史"><a href="#建站历史" class="headerlink" title="建站历史"></a>建站历史</h2><div class="timeline "><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2022-08-02</p>
</div></div><div class='timeline-item-content'><p>1.搭建小康<a href="/say">Speak</a></p>
<p><del>2.侧边栏加入微博热搜</del>（移除了，加载速度太慢了）</p>
<p>3.搭建了<a href="/fcircle/">友链朋友圈</a>。</p>
</div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2022-02-04</p>
</div></div><div class='timeline-item-content'><p>再次回到<code>hexo</code>，采用<code>butterfly</code>主题。</p>
<details class="toggle" ><summary class="toggle-button" style="">快照</summary><div class="toggle-content"><p><img src="/../img/%E5%BF%AB%E7%85%A7/6.jpg"></p>
</div></details>

</div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2021-08-17</p>
</div></div><div class='timeline-item-content'><p>在<a href="https://iamlm.com/">@老麦</a>的帮助下，成功搭建好<code>说说</code>页面。</p>
</div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2021-07-29</p>
</div></div><div class='timeline-item-content'><p>无意发现<code>hugo stack</code>这款主题，又开始使用<code>hugo</code>，期间短暂测试过<code>PaperMod</code>主题。</p>
<details class="toggle" ><summary class="toggle-button" style="">快照</summary><div class="toggle-content"><p><img src="/../img/%E5%BF%AB%E7%85%A7/5.jpg"></p>
<p><img src="/../img/%E5%BF%AB%E7%85%A7/4.jpg"></p>
</div></details>

</div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2020-07-24</p>
</div></div><div class='timeline-item-content'><p>短暂使用了<code>halo</code>，因为觉得动态博客太麻烦，于是又回到<code>hexo</code>。</p>
<details class="toggle" ><summary class="toggle-button" style="">快照</summary><div class="toggle-content"><p><img src="/../img/%E5%BF%AB%E7%85%A7/3.jpg"></p>
</div></details>

</div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2020-06-03</p>
</div></div><div class='timeline-item-content'><p>短暂转向<code>hugo</code>，尝试过<code>LoveIT</code>主题。之后又回到<code>hexo</code>。</p>
<details class="toggle" ><summary class="toggle-button" style="">快照</summary><div class="toggle-content"><p><img src="/../img/%E5%BF%AB%E7%85%A7/2.jpg"></p>
</div></details>

</div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2020-04-25</p>
</div></div><div class='timeline-item-content'><p>开始建站，采用<code>Hexo+Next</code>主题建站。</p>
<details class="toggle" ><summary class="toggle-button" style="">快照</summary><div class="toggle-content"><p><img src="/../img/%E5%BF%AB%E7%85%A7/1.jpg"></p>
</div></details>

</div></div></div>

<h2 id="关于我"><a href="#关于我" class="headerlink" title="关于我"></a>关于我</h2>]]></content>
  </entry>
  <entry>
    <title></title>
    <url>/css/custom.css</url>
    <content><![CDATA[/*哔哩哔哩视频适配*/
.aspect-ratio {position: relative;width: 100%;height: 0;padding-bottom: 75%;margin: 3% auto;text-align: center;}      
.aspect-ratio iframe {
    position: absolute;
    width: 100%;
    height: 100%;
    left: 0;
    top: 0;
}

/* 去掉侧边栏最新吐槽 */
.latestBB {
display: none;
}

/* 解决友链朋友圈页面显示异常 */
.img-alt.is-center {
    display: none;
}



]]></content>
  </entry>
  <entry>
    <title>友链朋友圈</title>
    <url>/fcircle/index.html</url>
    <content><![CDATA[<div id="friend-circle-lite-root"></div>
<script>
    if (typeof UserConfig === 'undefined') {
        var UserConfig = {
            // 填写你的fc Lite地址
            private_api_url: 'https://f.bore.vip/',
            // 点击加载更多时，一次最多加载几篇文章，默认20
            page_turning_number: 24,
            // 头像加载失败时，默认头像地址
            error_img: 'https://pic.imgdb.cn/item/6695daa4d9c307b7e953ee3d.jpg',
        }
    }
</script>
<link rel="stylesheet" href="https://fastly.jsdelivr.net/gh/willow-god/Friend-Circle-Lite/main/fclite.min.css">
<script src="https://fastly.jsdelivr.net/gh/willow-god/Friend-Circle-Lite/main/fclite.min.js"></script>
]]></content>
  </entry>
  <entry>
    <title>标签</title>
    <url>/tags/index.html</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>相册</title>
    <url>/gallery/index.html</url>
    <content><![CDATA[<style>
.page-title {
    display: none;
  }
</style>

<h2 id="壁纸"><a href="#壁纸" class="headerlink" title="壁纸"></a>壁纸</h2><div class="gallery-group-main">
<figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='/../../img/wallpaper/sea.jpg' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">电脑壁纸</div>
  <p>好看的电脑壁纸</p>
  <a href='/gallery/wallpaper'></a>
  </figcaption>
  </figure>
  
<figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='/../../img/phone/blue.jpg' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">手机壁纸</div>
  <p>好看的手机壁纸</p>
  <a href='/gallery/phone'></a>
  </figcaption>
  </figure>
  
</div>

<h2 id="骑行"><a href="#骑行" class="headerlink" title="骑行"></a>骑行</h2><div class="gallery-group-main">
<figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='/../img/huochezhan/1.jpg' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">火车站</div>
  <p>60KM（2022.4）</p>
  <a href='/gallery/huochezhan'></a>
  </figcaption>
  </figure>
  
<figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='/../img/%E8%8D%86%E5%B7%9E%E8%A1%8C/2.jpg' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">荆州行</div>
  <p>第一个100Km（2019.5）</p>
  <a href='/gallery/jing-zhou-ride'></a>
  </figcaption>
  </figure>
  
</div>



<h2 id="太和小学2019级"><a href="#太和小学2019级" class="headerlink" title="太和小学2019级"></a>太和小学2019级</h2><div class="gallery-group-main">
<figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='/../img/2024%E6%98%A5%E5%AD%A3%E8%B6%A3%E5%91%B3%E8%BF%90%E5%8A%A8%E4%BC%9A/1.jpg' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">2024春季趣味运动会</div>
  <p>那些精彩的瞬间</p>
  <a href='/gallery/sport2024spring'></a>
  </figcaption>
  </figure>
  
<figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='/../img/2022%E7%A7%8B%E5%AD%A3%E8%B6%A3%E5%91%B3%E8%BF%90%E5%8A%A8%E4%BC%9A/1.jpg' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">2022秋季趣味运动会</div>
  <p>那些精彩的瞬间</p>
  <a href='/gallery/sport2022autumn'></a>
  </figcaption>
  </figure>
  
<figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='/../img/2021%E7%A7%8B%E5%AD%A3%E8%B6%A3%E5%91%B3%E8%BF%90%E5%8A%A8%E4%BC%9A/1.jpg' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">2021秋季趣味运动会</div>
  <p>那些精彩的瞬间</p>
  <a href='/gallery/sport2021autumn'></a>
  </figcaption>
  </figure>
  
<figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='/../img/2021%E6%98%A5%E5%AD%A3%E8%B6%A3%E5%91%B3%E8%BF%90%E5%8A%A8%E4%BC%9A/3.jpg' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">2021春季趣味运动会</div>
  <p>那些精彩的瞬间</p>
  <a href='/gallery/sport2021spring'></a>
  </figcaption>
  </figure>
  
<figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='/../img/2019%E7%A7%8B%E5%AD%A3%E8%B6%A3%E5%91%B3%E8%BF%90%E5%8A%A8%E4%BC%9A/1.jpg' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">2019秋季趣味运动会</div>
  <p>那些精彩的瞬间</p>
  <a href='/gallery/sport2019autumn'></a>
  </figcaption>
  </figure>
  
</div>


<h2 id="湖大教技2010级"><a href="#湖大教技2010级" class="headerlink" title="湖大教技2010级"></a>湖大教技2010级</h2><div class="gallery-group-main">
<figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='/../img/%E9%82%A3%E4%BA%9B%E8%8A%B1%E5%84%BF/3.jpg' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">那些花儿</div>
  <p>那些人，那些事</p>
  <a href='/gallery/hubei-university'></a>
  </figcaption>
  </figure>
  
<figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='/../img/2012%E5%B9%B4%E6%9C%A8%E5%85%B0%E5%A4%A9%E6%B1%A0%E6%98%A5%E6%B8%B8/4.jpg' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">2012年木兰天池春游</div>
  <p>大学里的一次春游</p>
  <a href='/gallery/mulan-great-lake'></a>
  </figcaption>
  </figure>
  
</div>
]]></content>
  </entry>
  <entry>
    <title>链接</title>
    <url>/link/index.html</url>
    <content><![CDATA[<style>
.page-title {
    display: none;
  }
</style>
<h2 id="我的友链"><a href="#我的友链" class="headerlink" title="我的友链"></a>我的友链</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">name:  Bore&#x27;s Notes</span><br><span class="line">link:  https://bore.vip</span><br><span class="line">avatar:  https://bore.vip/img/avatar.jpg</span><br><span class="line">descr:  博观而约取，厚积而薄发。</span><br></pre></td></tr></table></figure>

]]></content>
  </entry>
  <entry>
    <title>说说</title>
    <url>/say/index.html</url>
    <content><![CDATA[<div class="js-pjax" id="tip" style="text-align:center;">ipseak加载中</div>
<div class="js-pjax" id="ispeak"></div>
<link
  rel="stylesheet"
  href="https://cdn.staticfile.org/highlight.js/10.6.0/styles/atom-one-dark.min.css"
/>
<link
  rel="stylesheet"
  href="/img/js/speak/style.css"
/>

<style>
  #article-container .D-avatar {
    margin: 0 10px 0 0;
  }
  .D-footer {
    display: none;
  }
</style>
<script src="https://cdn.staticfile.org/highlight.js/10.6.0/highlight.min.js"></script>
<script src="https://cdn.staticfile.org/marked/2.0.0/marked.min.js"></script>
<script src="/img/js/speak/ispeak.umd.js"></script>
<script>
  var head = document.getElementsByTagName('head')[0]
  var meta = document.createElement('meta')
  meta.name = 'referrer'
  meta.content = 'no-referrer'
  head.appendChild(meta)
  if (ispeak) {
    ispeak
      .init({
        el: '#ispeak',
        api: 'https://kkapi.bore.vip/',
        author: '62e664654423f520964e0d43',
        pageSize: 10,
        loading_img: '/img/loading.gif',
        speakPage: '/say',
        githubClientId: 'Iv1.c90b52a4e197df3c',
        hideComment: true,
      })
      .then(function () {
        console.log('ispeak 加载完成')
        document.getElementById('tip').style.display = 'none'
      })
  } else {
    document.getElementById('tip').innerHTML = 'ipseak依赖加载失败！'
  }
</script>]]></content>
  </entry>
  <entry>
    <title>那些花儿</title>
    <url>/gallery/hubei-university/index.html</url>
    <content><![CDATA[<style>
.page-title {
    display: none;
  }
</style>
<h2 id="那些花儿"><a href="#那些花儿" class="headerlink" title="那些花儿"></a>那些花儿</h2><div class="gallery-container" data-type="data" data-button="">
      <div class="gallery-data">[{"url":"../../img/那些花儿/1.jpg","alt":""},{"url":"../../img/那些花儿/2.jpg","alt":""},{"url":"../../img/那些花儿/3.jpg","alt":""},{"url":"../../img/那些花儿/4.jpg","alt":""}]</div>
      <div class="gallery-items">
      </div>
    </div>

]]></content>
  </entry>
  <entry>
    <title>火车站</title>
    <url>/gallery/huochezhan/index.html</url>
    <content><![CDATA[<style>
.page-title {
    display: none;
  }
</style>
<h2 id="火车站"><a href="#火车站" class="headerlink" title="火车站"></a>火车站</h2><div class="gallery-container" data-type="data" data-button="">
      <div class="gallery-data">[{"url":"../../img/huochezhan/1.jpg","alt":""},{"url":"../../img/huochezhan/2.jpg","alt":""},{"url":"../../img/huochezhan/3.jpg","alt":""}]</div>
      <div class="gallery-items">
      </div>
    </div>

]]></content>
  </entry>
  <entry>
    <title>荆州行</title>
    <url>/gallery/jing-zhou-ride/index.html</url>
    <content><![CDATA[<style>
.page-title {
    display: none;
  }
</style>
<h2 id="荆州行"><a href="#荆州行" class="headerlink" title="荆州行"></a>荆州行</h2><div class="gallery-container" data-type="data" data-button="">
      <div class="gallery-data">[{"url":"../../img/荆州行/1.jpg","alt":""},{"url":"../../img/荆州行/2.jpg","alt":""},{"url":"../../img/荆州行/3.jpg","alt":""}]</div>
      <div class="gallery-items">
      </div>
    </div>

]]></content>
  </entry>
  <entry>
    <title>手机壁纸</title>
    <url>/gallery/phone/index.html</url>
    <content><![CDATA[<style>
.page-title {
    display: none;
  }
</style>
<h2 id="手机壁纸"><a href="#手机壁纸" class="headerlink" title="手机壁纸"></a>手机壁纸</h2><div class="gallery-container" data-type="data" data-button="">
      <div class="gallery-data">[{"url":"../../img/phone/blue.jpg","alt":"snow"},{"url":"../../img/phone/galaxy.jpg","alt":"galaxy"},{"url":"../../img/phone/xingxing.jpg","alt":"xingxing"}]</div>
      <div class="gallery-items">
      </div>
    </div>

]]></content>
  </entry>
  <entry>
    <title>2012年木兰天池春游</title>
    <url>/gallery/mulan-great-lake/index.html</url>
    <content><![CDATA[<style>
.page-title {
    display: none;
  }
</style>
<h2 id="2012年木兰天池春游"><a href="#2012年木兰天池春游" class="headerlink" title="2012年木兰天池春游"></a>2012年木兰天池春游</h2><div class="gallery-container" data-type="data" data-button="">
      <div class="gallery-data">[{"url":"../../img/2012年木兰天池春游/1.jpg","alt":""},{"url":"../../img/2012年木兰天池春游/2.jpg","alt":""},{"url":"../../img/2012年木兰天池春游/3.jpg","alt":""},{"url":"../../img/2012年木兰天池春游/4.jpg","alt":""}]</div>
      <div class="gallery-items">
      </div>
    </div>

]]></content>
  </entry>
  <entry>
    <title>2019秋季趣味运动会</title>
    <url>/gallery/sport2019autumn/index.html</url>
    <content><![CDATA[<style>
.page-title {
    display: none;
  }
</style>
<h2 id="2019秋季趣味运动会"><a href="#2019秋季趣味运动会" class="headerlink" title="2019秋季趣味运动会"></a>2019秋季趣味运动会</h2><div class="gallery-container" data-type="data" data-button="">
      <div class="gallery-data">[{"url":"../../img/2019秋季趣味运动会/1.jpg","alt":""},{"url":"../../img/2019秋季趣味运动会/2.jpg","alt":""},{"url":"../../img/2019秋季趣味运动会/3.jpg","alt":""},{"url":"../../img/2019秋季趣味运动会/4.jpg","alt":""},{"url":"../../img/2019秋季趣味运动会/5.jpg","alt":""},{"url":"../../img/2019秋季趣味运动会/6.jpg","alt":""}]</div>
      <div class="gallery-items">
      </div>
    </div>

]]></content>
  </entry>
  <entry>
    <title>2021秋季趣味运动会</title>
    <url>/gallery/sport2021autumn/index.html</url>
    <content><![CDATA[<style>
.page-title {
    display: none;
  }
</style>
<h2 id="2021秋季趣味运动会"><a href="#2021秋季趣味运动会" class="headerlink" title="2021秋季趣味运动会"></a>2021秋季趣味运动会</h2><div class="gallery-container" data-type="data" data-button="">
      <div class="gallery-data">[{"url":"../../img/2021秋季趣味运动会/1.jpg","alt":""},{"url":"../../img/2021秋季趣味运动会/2.jpg","alt":""},{"url":"../../img/2021秋季趣味运动会/3.jpg","alt":""},{"url":"../../img/2021秋季趣味运动会/4.jpg","alt":""},{"url":"../../img/2021秋季趣味运动会/5.jpg","alt":""},{"url":"../../img/2021秋季趣味运动会/6.jpg","alt":""},{"url":"../../img/2021秋季趣味运动会/7.jpg","alt":""},{"url":"../../img/2021秋季趣味运动会/8.jpg","alt":""}]</div>
      <div class="gallery-items">
      </div>
    </div>

]]></content>
  </entry>
  <entry>
    <title>2022秋季趣味运动会</title>
    <url>/gallery/sport2022autumn/index.html</url>
    <content><![CDATA[<style>
.page-title {
    display: none;
  }
</style>
<h2 id="2022秋季趣味运动会"><a href="#2022秋季趣味运动会" class="headerlink" title="2022秋季趣味运动会"></a>2022秋季趣味运动会</h2><div class="gallery-container" data-type="data" data-button="">
      <div class="gallery-data">[{"url":"../../img/2022秋季趣味运动会/1.jpg","alt":""},{"url":"../../img/2022秋季趣味运动会/2.jpg","alt":""},{"url":"../../img/2022秋季趣味运动会/3.jpg","alt":""},{"url":"../../img/2022秋季趣味运动会/4.jpg","alt":""}]</div>
      <div class="gallery-items">
      </div>
    </div>

]]></content>
  </entry>
  <entry>
    <title>2021春季趣味运动会</title>
    <url>/gallery/sport2021spring/index.html</url>
    <content><![CDATA[<style>
.page-title {
    display: none;
  }
</style>
<h2 id="2021春季趣味运动会"><a href="#2021春季趣味运动会" class="headerlink" title="2021春季趣味运动会"></a>2021春季趣味运动会</h2><div class="gallery-container" data-type="data" data-button="">
      <div class="gallery-data">[{"url":"../../img/2021春季趣味运动会/1.jpg","alt":""},{"url":"../../img/2021春季趣味运动会/2.jpg","alt":""},{"url":"../../img/2021春季趣味运动会/3.jpg","alt":""},{"url":"../../img/2021春季趣味运动会/4.jpg","alt":""},{"url":"../../img/2021春季趣味运动会/5.jpg","alt":""},{"url":"../../img/2021春季趣味运动会/6.jpg","alt":""}]</div>
      <div class="gallery-items">
      </div>
    </div>

]]></content>
  </entry>
  <entry>
    <title>2024春季趣味运动会</title>
    <url>/gallery/sport2024spring/index.html</url>
    <content><![CDATA[<style>
.page-title {
    display: none;
  }
</style>
<h2 id="2024春季趣味运动会"><a href="#2024春季趣味运动会" class="headerlink" title="2024春季趣味运动会"></a>2024春季趣味运动会</h2><div class="gallery-container" data-type="data" data-button="">
      <div class="gallery-data">[{"url":"../../img/2024春季趣味运动会/1.jpg","alt":""},{"url":"../../img/2024春季趣味运动会/2.jpg","alt":""},{"url":"../../img/2024春季趣味运动会/3.jpg","alt":""}]</div>
      <div class="gallery-items">
      </div>
    </div>

]]></content>
  </entry>
  <entry>
    <title>电脑壁纸</title>
    <url>/gallery/wallpaper/index.html</url>
    <content><![CDATA[<style>
.page-title {
    display: none;
  }
</style>
<h2 id="电脑壁纸"><a href="#电脑壁纸" class="headerlink" title="电脑壁纸"></a>电脑壁纸</h2><div class="gallery-container" data-type="data" data-button="">
      <div class="gallery-data">[{"url":"../../img/wallpaper/faded.jpg","alt":"faded"},{"url":"../../img/wallpaper/tree.jpg","alt":"Boy Standing under Tree at Sunset"},{"url":"../../img/wallpaper/sunshine.jpg","alt":"sunshine"},{"url":"../../img/wallpaper/sea.jpg","alt":"sea"}]</div>
      <div class="gallery-items">
      </div>
    </div>

]]></content>
  </entry>
  <entry>
    <title></title>
    <url>/img/js/speak/atom-one-dark.min.css</url>
    <content><![CDATA[.hljs{display:block;overflow-x:auto;padding:.5em;color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}]]></content>
  </entry>
  <entry>
    <title></title>
    <url>/img/js/speak/marked.min.js</url>
    <content><![CDATA[!function(e,u){"object"==typeof exports&&"undefined"!=typeof module?module.exports=u():"function"==typeof define&&define.amd?define(u):(e="undefined"!=typeof globalThis?globalThis:e||self).marked=u()}(this,function(){"use strict";function r(e,u){for(var t=0;t<u.length;t++){var n=u[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,u){(null==u||u>e.length)&&(u=e.length);for(var t=0,n=new Array(u);t<u;t++)n[t]=e[t];return n}function o(e,u){var t;if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator])return(t=e[Symbol.iterator]()).next.bind(t);if(Array.isArray(e)||(t=function(e,u){if(e){if("string"==typeof e)return i(e,u);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,u):void 0}}(e))||u&&e&&"number"==typeof e.length){t&&(e=t);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function t(e){return D[e]}var e,u=(function(u){function e(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}u.exports={defaults:e(),getDefaults:e,changeDefaults:function(e){u.exports.defaults=e}}}(e={exports:{}}),e.exports),n=/[&<>"']/,s=/[&<>"']/g,l=/[<>"']|&(?!#?\w+;)/,a=/[<>"']|&(?!#?\w+;)/g,D={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};var c=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function h(e){return e.replace(c,function(e,u){return"colon"===(u=u.toLowerCase())?":":"#"===u.charAt(0)?"x"===u.charAt(1)?String.fromCharCode(parseInt(u.substring(2),16)):String.fromCharCode(+u.substring(1)):""})}var p=/(^|[^\[])\^/g;var g=/[^\w:]/g,f=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;var F={},A=/^[^:]+:\/*[^/]*$/,C=/^([^:]+:)[\s\S]*$/,d=/^([^:]+:\/*[^/]*)[\s\S]*$/;function E(e,u){F[" "+e]||(A.test(e)?F[" "+e]=e+"/":F[" "+e]=k(e,"/",!0));var t=-1===(e=F[" "+e]).indexOf(":");return"//"===u.substring(0,2)?t?u:e.replace(C,"$1")+u:"/"===u.charAt(0)?t?u:e.replace(d,"$1")+u:e+u}function k(e,u,t){var n=e.length;if(0===n)return"";for(var r=0;r<n;){var i=e.charAt(n-r-1);if(i!==u||t){if(i===u||!t)break;r++}else r++}return e.substr(0,n-r)}var m=function(e,u){if(u){if(n.test(e))return e.replace(s,t)}else if(l.test(e))return e.replace(a,t);return e},b=h,x=function(t,e){t=t.source||t,e=e||"";var n={replace:function(e,u){return u=(u=u.source||u).replace(p,"$1"),t=t.replace(e,u),n},getRegex:function(){return new RegExp(t,e)}};return n},B=function(e,u,t){if(e){var n;try{n=decodeURIComponent(h(t)).replace(g,"").toLowerCase()}catch(e){return null}if(0===n.indexOf("javascript:")||0===n.indexOf("vbscript:")||0===n.indexOf("data:"))return null}u&&!f.test(t)&&(t=E(u,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch(e){return null}return t},w={exec:function(){}},v=function(e){for(var u,t,n=1;n<arguments.length;n++)for(t in u=arguments[n])Object.prototype.hasOwnProperty.call(u,t)&&(e[t]=u[t]);return e},y=function(e,u){var t=e.replace(/\|/g,function(e,u,t){for(var n=!1,r=u;0<=--r&&"\\"===t[r];)n=!n;return n?"|":" |"}).split(/ \|/),n=0;if(t.length>u)t.splice(u);else for(;t.length<u;)t.push("");for(;n<t.length;n++)t[n]=t[n].trim().replace(/\\\|/g,"|");return t},_=function(e,u){if(-1===e.indexOf(u[1]))return-1;for(var t=e.length,n=0,r=0;r<t;r++)if("\\"===e[r])r++;else if(e[r]===u[0])n++;else if(e[r]===u[1]&&--n<0)return r;return-1},z=function(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")},$=function(e,u){if(u<1)return"";for(var t="";1<u;)1&u&&(t+=e),u>>=1,e+=e;return t+e},S=u.defaults,T=k,I=y,R=m,Z=_;function q(e,u,t){var n=u.href,r=u.title?R(u.title):null,u=e[1].replace(/\\([\[\]])/g,"$1");return"!"!==e[0].charAt(0)?{type:"link",raw:t,href:n,title:r,text:u}:{type:"image",raw:t,href:n,title:r,text:R(u)}}var O=function(){function e(e){this.options=e||S}var u=e.prototype;return u.space=function(e){e=this.rules.block.newline.exec(e);if(e)return 1<e[0].length?{type:"space",raw:e[0]}:{raw:"\n"}},u.code=function(e){var u=this.rules.block.code.exec(e);if(u){e=u[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:u[0],codeBlockStyle:"indented",text:this.options.pedantic?e:T(e,"\n")}}},u.fences=function(e){var u=this.rules.block.fences.exec(e);if(u){var t=u[0],e=function(e,u){if(null===(e=e.match(/^(\s+)(?:```)/)))return u;var t=e[1];return u.split("\n").map(function(e){var u=e.match(/^\s+/);return null!==u&&u[0].length>=t.length?e.slice(t.length):e}).join("\n")}(t,u[3]||"");return{type:"code",raw:t,lang:u[2]&&u[2].trim(),text:e}}},u.heading=function(e){var u=this.rules.block.heading.exec(e);if(u){var t=u[2].trim();return/#$/.test(t)&&(e=T(t,"#"),!this.options.pedantic&&e&&!/ $/.test(e)||(t=e.trim())),{type:"heading",raw:u[0],depth:u[1].length,text:t}}},u.nptable=function(e){e=this.rules.block.nptable.exec(e);if(e){var u={type:"table",header:I(e[1].replace(/^ *| *\| *$/g,"")),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:e[3]?e[3].replace(/\n$/,"").split("\n"):[],raw:e[0]};if(u.header.length===u.align.length){for(var t=u.align.length,n=0;n<t;n++)/^ *-+: *$/.test(u.align[n])?u.align[n]="right":/^ *:-+: *$/.test(u.align[n])?u.align[n]="center":/^ *:-+ *$/.test(u.align[n])?u.align[n]="left":u.align[n]=null;for(t=u.cells.length,n=0;n<t;n++)u.cells[n]=I(u.cells[n],u.header.length);return u}}},u.hr=function(e){e=this.rules.block.hr.exec(e);if(e)return{type:"hr",raw:e[0]}},u.blockquote=function(e){var u=this.rules.block.blockquote.exec(e);if(u){e=u[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:u[0],text:e}}},u.list=function(e){e=this.rules.block.list.exec(e);if(e){for(var u,t,n,r,i,s=e[0],l=e[2],a=1<l.length,D={type:"list",raw:s,ordered:a,start:a?+l.slice(0,-1):"",loose:!1,items:[]},o=e[0].match(this.rules.block.item),c=!1,h=o.length,p=this.rules.block.listItemStart.exec(o[0]),g=0;g<h;g++){if(s=u=o[g],g!==h-1){if(n=this.rules.block.listItemStart.exec(o[g+1]),this.options.pedantic?n[1].length>p[1].length:n[1].length>p[0].length||3<n[1].length){o.splice(g,2,o[g]+"\n"+o[g+1]),g--,h--;continue}(!this.options.pedantic||this.options.smartLists?n[2][n[2].length-1]!==l[l.length-1]:a==(1===n[2].length))&&(t=o.slice(g+1).join("\n"),D.raw=D.raw.substring(0,D.raw.length-t.length),g=h-1),p=n}n=u.length,~(u=u.replace(/^ *([*+-]|\d+[.)]) ?/,"")).indexOf("\n ")&&(n-=u.length,u=this.options.pedantic?u.replace(/^ {1,4}/gm,""):u.replace(new RegExp("^ {1,"+n+"}","gm"),"")),n=c||/\n\n(?!\s*$)/.test(u),g!==h-1&&(c="\n"===u.charAt(u.length-1),n=n||c),n&&(D.loose=!0),this.options.gfm&&(i=void 0,(r=/^\[[ xX]\] /.test(u))&&(i=" "!==u[1],u=u.replace(/^\[[ xX]\] +/,""))),D.items.push({type:"list_item",raw:s,task:r,checked:i,loose:n,text:u})}return D}},u.html=function(e){e=this.rules.block.html.exec(e);if(e)return{type:this.options.sanitize?"paragraph":"html",raw:e[0],pre:!this.options.sanitizer&&("pre"===e[1]||"script"===e[1]||"style"===e[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):R(e[0]):e[0]}},u.def=function(e){e=this.rules.block.def.exec(e);if(e)return e[3]&&(e[3]=e[3].substring(1,e[3].length-1)),{tag:e[1].toLowerCase().replace(/\s+/g," "),raw:e[0],href:e[2],title:e[3]}},u.table=function(e){e=this.rules.block.table.exec(e);if(e){var u={type:"table",header:I(e[1].replace(/^ *| *\| *$/g,"")),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:e[3]?e[3].replace(/\n$/,"").split("\n"):[]};if(u.header.length===u.align.length){u.raw=e[0];for(var t=u.align.length,n=0;n<t;n++)/^ *-+: *$/.test(u.align[n])?u.align[n]="right":/^ *:-+: *$/.test(u.align[n])?u.align[n]="center":/^ *:-+ *$/.test(u.align[n])?u.align[n]="left":u.align[n]=null;for(t=u.cells.length,n=0;n<t;n++)u.cells[n]=I(u.cells[n].replace(/^ *\| *| *\| *$/g,""),u.header.length);return u}}},u.lheading=function(e){e=this.rules.block.lheading.exec(e);if(e)return{type:"heading",raw:e[0],depth:"="===e[2].charAt(0)?1:2,text:e[1]}},u.paragraph=function(e){e=this.rules.block.paragraph.exec(e);if(e)return{type:"paragraph",raw:e[0],text:"\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1]}},u.text=function(e){e=this.rules.block.text.exec(e);if(e)return{type:"text",raw:e[0],text:e[0]}},u.escape=function(e){e=this.rules.inline.escape.exec(e);if(e)return{type:"escape",raw:e[0],text:R(e[1])}},u.tag=function(e,u,t){e=this.rules.inline.tag.exec(e);if(e)return!u&&/^<a /i.test(e[0])?u=!0:u&&/^<\/a>/i.test(e[0])&&(u=!1),!t&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?t=!0:t&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(t=!1),{type:this.options.sanitize?"text":"html",raw:e[0],inLink:u,inRawBlock:t,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):R(e[0]):e[0]}},u.link=function(e){var u=this.rules.inline.link.exec(e);if(u){var t=u[2].trim();if(!this.options.pedantic&&/^</.test(t)){if(!/>$/.test(t))return;e=T(t.slice(0,-1),"\\");if((t.length-e.length)%2==0)return}else{var n=Z(u[2],"()");-1<n&&(i=(0===u[0].indexOf("!")?5:4)+u[1].length+n,u[2]=u[2].substring(0,n),u[0]=u[0].substring(0,i).trim(),u[3]="")}var r,n=u[2],i="";return this.options.pedantic?(r=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n),r&&(n=r[1],i=r[3])):i=u[3]?u[3].slice(1,-1):"",n=n.trim(),/^</.test(n)&&(n=this.options.pedantic&&!/>$/.test(t)?n.slice(1):n.slice(1,-1)),q(u,{href:n&&n.replace(this.rules.inline._escapes,"$1"),title:i&&i.replace(this.rules.inline._escapes,"$1")},u[0])}},u.reflink=function(e,u){if((t=this.rules.inline.reflink.exec(e))||(t=this.rules.inline.nolink.exec(e))){e=(t[2]||t[1]).replace(/\s+/g," ");if((e=u[e.toLowerCase()])&&e.href)return q(t,e,t[0]);var t=t[0].charAt(0);return{type:"text",raw:t,text:t}}},u.emStrong=function(e,u,t){void 0===t&&(t="");var n=this.rules.inline.emStrong.lDelim.exec(e);if(n&&(!n[3]||!t.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var r=n[1]||n[2]||"";if(!r||r&&(""===t||this.rules.inline.punctuation.exec(t))){var i,s=n[0].length-1,l=s,a=0,D="*"===n[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(D.lastIndex=0,u=u.slice(-1*e.length+s);null!=(n=D.exec(u));)if(i=n[1]||n[2]||n[3]||n[4]||n[5]||n[6])if(i=i.length,n[3]||n[4])l+=i;else if(!((n[5]||n[6])&&s%3)||(s+i)%3){if(!(0<(l-=i))){if(l+a-i<=0&&!u.slice(D.lastIndex).match(D)&&(i=Math.min(i,i+l+a)),Math.min(s,i)%2)return{type:"em",raw:e.slice(0,s+n.index+i+1),text:e.slice(1,s+n.index+i)};if(Math.min(s,i)%2==0)return{type:"strong",raw:e.slice(0,s+n.index+i+1),text:e.slice(2,s+n.index+i-1)}}}else a+=i}}},u.codespan=function(e){var u=this.rules.inline.code.exec(e);if(u){var t=u[2].replace(/\n/g," "),n=/[^ ]/.test(t),e=/^ /.test(t)&&/ $/.test(t);return n&&e&&(t=t.substring(1,t.length-1)),t=R(t,!0),{type:"codespan",raw:u[0],text:t}}},u.br=function(e){e=this.rules.inline.br.exec(e);if(e)return{type:"br",raw:e[0]}},u.del=function(e){e=this.rules.inline.del.exec(e);if(e)return{type:"del",raw:e[0],text:e[2]}},u.autolink=function(e,u){e=this.rules.inline.autolink.exec(e);if(e){var t,u="@"===e[2]?"mailto:"+(t=R(this.options.mangle?u(e[1]):e[1])):t=R(e[1]);return{type:"link",raw:e[0],text:t,href:u,tokens:[{type:"text",raw:t,text:t}]}}},u.url=function(e,u){var t,n,r,i;if(t=this.rules.inline.url.exec(e)){if("@"===t[2])r="mailto:"+(n=R(this.options.mangle?u(t[0]):t[0]));else{for(;i=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])[0],i!==t[0];);n=R(t[0]),r="www."===t[1]?"http://"+n:n}return{type:"link",raw:t[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}},u.inlineText=function(e,u,t){e=this.rules.inline.text.exec(e);if(e){t=u?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):R(e[0]):e[0]:R(this.options.smartypants?t(e[0]):e[0]);return{type:"text",raw:e[0],text:t}}},e}(),y=w,_=x,w=v,x={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:y,table:y,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};x.def=_(x.def).replace("label",x._label).replace("title",x._title).getRegex(),x.bullet=/(?:[*+-]|\d{1,9}[.)])/,x.item=/^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/,x.item=_(x.item,"gm").replace(/bull/g,x.bullet).getRegex(),x.listItemStart=_(/^( *)(bull)/).replace("bull",x.bullet).getRegex(),x.list=_(x.list).replace(/bull/g,x.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+x.def.source+")").getRegex(),x._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",x._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,x.html=_(x.html,"i").replace("comment",x._comment).replace("tag",x._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),x.paragraph=_(x._paragraph).replace("hr",x.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",x._tag).getRegex(),x.blockquote=_(x.blockquote).replace("paragraph",x.paragraph).getRegex(),x.normal=w({},x),x.gfm=w({},x.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n {0,3}([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n {0,3}\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),x.gfm.nptable=_(x.gfm.nptable).replace("hr",x.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",x._tag).getRegex(),x.gfm.table=_(x.gfm.table).replace("hr",x.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",x._tag).getRegex(),x.pedantic=w({},x.normal,{html:_("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",x._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:y,paragraph:_(x.normal._paragraph).replace("hr",x.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",x.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});y={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:y,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_]*?\*[^_]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^*]*?\_[^*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:y,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};y.punctuation=_(y.punctuation).replace(/punctuation/g,y._punctuation).getRegex(),y.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,y.escapedEmSt=/\\\*|\\_/g,y._comment=_(x._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),y.emStrong.lDelim=_(y.emStrong.lDelim).replace(/punct/g,y._punctuation).getRegex(),y.emStrong.rDelimAst=_(y.emStrong.rDelimAst,"g").replace(/punct/g,y._punctuation).getRegex(),y.emStrong.rDelimUnd=_(y.emStrong.rDelimUnd,"g").replace(/punct/g,y._punctuation).getRegex(),y._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,y._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,y._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,y.autolink=_(y.autolink).replace("scheme",y._scheme).replace("email",y._email).getRegex(),y._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,y.tag=_(y.tag).replace("comment",y._comment).replace("attribute",y._attribute).getRegex(),y._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,y._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,y._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,y.link=_(y.link).replace("label",y._label).replace("href",y._href).replace("title",y._title).getRegex(),y.reflink=_(y.reflink).replace("label",y._label).getRegex(),y.reflinkSearch=_(y.reflinkSearch,"g").replace("reflink",y.reflink).replace("nolink",y.nolink).getRegex(),y.normal=w({},y),y.pedantic=w({},y.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:_(/^!?\[(label)\]\((.*?)\)/).replace("label",y._label).getRegex(),reflink:_(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",y._label).getRegex()}),y.gfm=w({},y.normal,{escape:_(y.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),y.gfm.url=_(y.gfm.url,"i").replace("email",y.gfm._extended_email).getRegex(),y.breaks=w({},y.gfm,{br:_(y.br).replace("{2,}","*").getRegex(),text:_(y.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var y={block:x,inline:y},j=u.defaults,U=y.block,P=y.inline,L=$;function M(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function N(e){for(var u,t="",n=e.length,r=0;r<n;r++)u=e.charCodeAt(r),.5<Math.random()&&(u="x"+u.toString(16)),t+="&#"+u+";";return t}var X=function(){function t(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||j,this.options.tokenizer=this.options.tokenizer||new O,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;e={block:U.normal,inline:P.normal};this.options.pedantic?(e.block=U.pedantic,e.inline=P.pedantic):this.options.gfm&&(e.block=U.gfm,this.options.breaks?e.inline=P.breaks:e.inline=P.gfm),this.tokenizer.rules=e}t.lex=function(e,u){return new t(u).lex(e)},t.lexInline=function(e,u){return new t(u).inlineTokens(e)};var e,u,n=t.prototype;return n.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens,!0),this.inline(this.tokens),this.tokens},n.blockTokens=function(e,u,t){var n,r,i,s;for(void 0===u&&(u=[]),void 0===t&&(t=!0),this.options.pedantic&&(e=e.replace(/^ +$/gm,""));e;)if(n=this.tokenizer.space(e))e=e.substring(n.raw.length),n.type&&u.push(n);else if(n=this.tokenizer.code(e))e=e.substring(n.raw.length),(s=u[u.length-1])&&"paragraph"===s.type?(s.raw+="\n"+n.raw,s.text+="\n"+n.text):u.push(n);else if(n=this.tokenizer.fences(e))e=e.substring(n.raw.length),u.push(n);else if(n=this.tokenizer.heading(e))e=e.substring(n.raw.length),u.push(n);else if(n=this.tokenizer.nptable(e))e=e.substring(n.raw.length),u.push(n);else if(n=this.tokenizer.hr(e))e=e.substring(n.raw.length),u.push(n);else if(n=this.tokenizer.blockquote(e))e=e.substring(n.raw.length),n.tokens=this.blockTokens(n.text,[],t),u.push(n);else if(n=this.tokenizer.list(e)){for(e=e.substring(n.raw.length),i=n.items.length,r=0;r<i;r++)n.items[r].tokens=this.blockTokens(n.items[r].text,[],!1);u.push(n)}else if(n=this.tokenizer.html(e))e=e.substring(n.raw.length),u.push(n);else if(t&&(n=this.tokenizer.def(e)))e=e.substring(n.raw.length),this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});else if(n=this.tokenizer.table(e))e=e.substring(n.raw.length),u.push(n);else if(n=this.tokenizer.lheading(e))e=e.substring(n.raw.length),u.push(n);else if(t&&(n=this.tokenizer.paragraph(e)))e=e.substring(n.raw.length),u.push(n);else if(n=this.tokenizer.text(e))e=e.substring(n.raw.length),(s=u[u.length-1])&&"text"===s.type?(s.raw+="\n"+n.raw,s.text+="\n"+n.text):u.push(n);else if(e){var l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}throw new Error(l)}return u},n.inline=function(e){for(var u,t,n,r,i,s=e.length,l=0;l<s;l++)switch((i=e[l]).type){case"paragraph":case"text":case"heading":i.tokens=[],this.inlineTokens(i.text,i.tokens);break;case"table":for(i.tokens={header:[],cells:[]},n=i.header.length,u=0;u<n;u++)i.tokens.header[u]=[],this.inlineTokens(i.header[u],i.tokens.header[u]);for(n=i.cells.length,u=0;u<n;u++)for(r=i.cells[u],i.tokens.cells[u]=[],t=0;t<r.length;t++)i.tokens.cells[u][t]=[],this.inlineTokens(r[t],i.tokens.cells[u][t]);break;case"blockquote":this.inline(i.tokens);break;case"list":for(n=i.items.length,u=0;u<n;u++)this.inline(i.items[u].tokens)}return e},n.inlineTokens=function(e,u,t,n){var r;void 0===u&&(u=[]),void 0===t&&(t=!1),void 0===n&&(n=!1);var i,s,l,a=e;if(this.tokens.links){var D=Object.keys(this.tokens.links);if(0<D.length)for(;null!=(i=this.tokenizer.rules.inline.reflinkSearch.exec(a));)D.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,i.index)+"["+L("a",i[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(i=this.tokenizer.rules.inline.blockSkip.exec(a));)a=a.slice(0,i.index)+"["+L("a",i[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(i=this.tokenizer.rules.inline.escapedEmSt.exec(a));)a=a.slice(0,i.index)+"++"+a.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(s||(l=""),s=!1,r=this.tokenizer.escape(e))e=e.substring(r.raw.length),u.push(r);else if(r=this.tokenizer.tag(e,t,n)){e=e.substring(r.raw.length),t=r.inLink,n=r.inRawBlock;var o=u[u.length-1];o&&"text"===r.type&&"text"===o.type?(o.raw+=r.raw,o.text+=r.text):u.push(r)}else if(r=this.tokenizer.link(e))e=e.substring(r.raw.length),"link"===r.type&&(r.tokens=this.inlineTokens(r.text,[],!0,n)),u.push(r);else if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length);o=u[u.length-1];"link"===r.type?(r.tokens=this.inlineTokens(r.text,[],!0,n),u.push(r)):o&&"text"===r.type&&"text"===o.type?(o.raw+=r.raw,o.text+=r.text):u.push(r)}else if(r=this.tokenizer.emStrong(e,a,l))e=e.substring(r.raw.length),r.tokens=this.inlineTokens(r.text,[],t,n),u.push(r);else if(r=this.tokenizer.codespan(e))e=e.substring(r.raw.length),u.push(r);else if(r=this.tokenizer.br(e))e=e.substring(r.raw.length),u.push(r);else if(r=this.tokenizer.del(e))e=e.substring(r.raw.length),r.tokens=this.inlineTokens(r.text,[],t,n),u.push(r);else if(r=this.tokenizer.autolink(e,N))e=e.substring(r.raw.length),u.push(r);else if(t||!(r=this.tokenizer.url(e,N))){if(r=this.tokenizer.inlineText(e,n,M))e=e.substring(r.raw.length),"_"!==r.raw.slice(-1)&&(l=r.raw.slice(-1)),s=!0,(c=u[u.length-1])&&"text"===c.type?(c.raw+=r.raw,c.text+=r.text):u.push(r);else if(e){var c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}throw new Error(c)}}else e=e.substring(r.raw.length),u.push(r);return u},e=t,u=[{key:"rules",get:function(){return{block:U,inline:P}}}],(n=null)&&r(e.prototype,n),u&&r(e,u),t}(),G=u.defaults,V=B,H=m,J=function(){function e(e){this.options=e||G}var u=e.prototype;return u.code=function(e,u,t){var n=(u||"").match(/\S*/)[0];return!this.options.highlight||null!=(u=this.options.highlight(e,n))&&u!==e&&(t=!0,e=u),e=e.replace(/\n$/,"")+"\n",n?'<pre><code class="'+this.options.langPrefix+H(n,!0)+'">'+(t?e:H(e,!0))+"</code></pre>\n":"<pre><code>"+(t?e:H(e,!0))+"</code></pre>\n"},u.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},u.html=function(e){return e},u.heading=function(e,u,t,n){return this.options.headerIds?"<h"+u+' id="'+this.options.headerPrefix+n.slug(t)+'">'+e+"</h"+u+">\n":"<h"+u+">"+e+"</h"+u+">\n"},u.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},u.list=function(e,u,t){var n=u?"ol":"ul";return"<"+n+(u&&1!==t?' start="'+t+'"':"")+">\n"+e+"</"+n+">\n"},u.listitem=function(e){return"<li>"+e+"</li>\n"},u.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},u.paragraph=function(e){return"<p>"+e+"</p>\n"},u.table=function(e,u){return"<table>\n<thead>\n"+e+"</thead>\n"+(u=u&&"<tbody>"+u+"</tbody>")+"</table>\n"},u.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},u.tablecell=function(e,u){var t=u.header?"th":"td";return(u.align?"<"+t+' align="'+u.align+'">':"<"+t+">")+e+"</"+t+">\n"},u.strong=function(e){return"<strong>"+e+"</strong>"},u.em=function(e){return"<em>"+e+"</em>"},u.codespan=function(e){return"<code>"+e+"</code>"},u.br=function(){return this.options.xhtml?"<br/>":"<br>"},u.del=function(e){return"<del>"+e+"</del>"},u.link=function(e,u,t){if(null===(e=V(this.options.sanitize,this.options.baseUrl,e)))return t;e='<a href="'+H(e)+'"';return u&&(e+=' title="'+u+'"'),e+=">"+t+"</a>"},u.image=function(e,u,t){if(null===(e=V(this.options.sanitize,this.options.baseUrl,e)))return t;t='<img src="'+e+'" alt="'+t+'"';return u&&(t+=' title="'+u+'"'),t+=this.options.xhtml?"/>":">"},u.text=function(e){return e},e}(),K=function(){function e(){}var u=e.prototype;return u.strong=function(e){return e},u.em=function(e){return e},u.codespan=function(e){return e},u.del=function(e){return e},u.html=function(e){return e},u.text=function(e){return e},u.link=function(e,u,t){return""+t},u.image=function(e,u,t){return""+t},u.br=function(){return""},e}(),Q=function(){function e(){this.seen={}}var u=e.prototype;return u.serialize=function(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},u.getNextSafeSlug=function(e,u){var t=e,n=0;if(this.seen.hasOwnProperty(t))for(n=this.seen[e];t=e+"-"+ ++n,this.seen.hasOwnProperty(t););return u||(this.seen[e]=n,this.seen[t]=0),t},u.slug=function(e,u){void 0===u&&(u={});var t=this.serialize(e);return this.getNextSafeSlug(t,u.dryrun)},e}(),W=u.defaults,Y=b,ee=function(){function t(e){this.options=e||W,this.options.renderer=this.options.renderer||new J,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new K,this.slugger=new Q}t.parse=function(e,u){return new t(u).parse(e)},t.parseInline=function(e,u){return new t(u).parseInline(e)};var e=t.prototype;return e.parse=function(e,u){void 0===u&&(u=!0);for(var t,n,r,i,s,l,a,D,o,c,h,p,g,f,F,A="",C=e.length,d=0;d<C;d++)switch((D=e[d]).type){case"space":continue;case"hr":A+=this.renderer.hr();continue;case"heading":A+=this.renderer.heading(this.parseInline(D.tokens),D.depth,Y(this.parseInline(D.tokens,this.textRenderer)),this.slugger);continue;case"code":A+=this.renderer.code(D.text,D.lang,D.escaped);continue;case"table":for(l=o="",r=D.header.length,t=0;t<r;t++)l+=this.renderer.tablecell(this.parseInline(D.tokens.header[t]),{header:!0,align:D.align[t]});for(o+=this.renderer.tablerow(l),a="",r=D.cells.length,t=0;t<r;t++){for(l="",i=(s=D.tokens.cells[t]).length,n=0;n<i;n++)l+=this.renderer.tablecell(this.parseInline(s[n]),{header:!1,align:D.align[n]});a+=this.renderer.tablerow(l)}A+=this.renderer.table(o,a);continue;case"blockquote":a=this.parse(D.tokens),A+=this.renderer.blockquote(a);continue;case"list":for(o=D.ordered,E=D.start,c=D.loose,r=D.items.length,a="",t=0;t<r;t++)g=(p=D.items[t]).checked,f=p.task,h="",p.task&&(F=this.renderer.checkbox(g),c?0<p.tokens.length&&"text"===p.tokens[0].type?(p.tokens[0].text=F+" "+p.tokens[0].text,p.tokens[0].tokens&&0<p.tokens[0].tokens.length&&"text"===p.tokens[0].tokens[0].type&&(p.tokens[0].tokens[0].text=F+" "+p.tokens[0].tokens[0].text)):p.tokens.unshift({type:"text",text:F}):h+=F),h+=this.parse(p.tokens,c),a+=this.renderer.listitem(h,f,g);A+=this.renderer.list(a,o,E);continue;case"html":A+=this.renderer.html(D.text);continue;case"paragraph":A+=this.renderer.paragraph(this.parseInline(D.tokens));continue;case"text":for(a=D.tokens?this.parseInline(D.tokens):D.text;d+1<C&&"text"===e[d+1].type;)a+="\n"+((D=e[++d]).tokens?this.parseInline(D.tokens):D.text);A+=u?this.renderer.paragraph(a):a;continue;default:var E='Token with "'+D.type+'" type was not found.';if(this.options.silent)return void console.error(E);throw new Error(E)}return A},e.parseInline=function(e,u){u=u||this.renderer;for(var t="",n=e.length,r=0;r<n;r++)switch((i=e[r]).type){case"escape":t+=u.text(i.text);break;case"html":t+=u.html(i.text);break;case"link":t+=u.link(i.href,i.title,this.parseInline(i.tokens,u));break;case"image":t+=u.image(i.href,i.title,i.text);break;case"strong":t+=u.strong(this.parseInline(i.tokens,u));break;case"em":t+=u.em(this.parseInline(i.tokens,u));break;case"codespan":t+=u.codespan(i.text);break;case"br":t+=u.br();break;case"del":t+=u.del(this.parseInline(i.tokens,u));break;case"text":t+=u.text(i.text);break;default:var i='Token with "'+i.type+'" type was not found.';if(this.options.silent)return void console.error(i);throw new Error(i)}return t},t}(),ue=v,te=z,ne=m,m=u.getDefaults,re=u.changeDefaults,u=u.defaults;function ie(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof t&&(n=t,t=null),t=ue({},ie.defaults,t||{}),te(t),n){var r,i=t.highlight;try{r=X.lex(e,t)}catch(e){return n(e)}var s=function(u){var e;if(!u)try{e=ee.parse(r,t)}catch(e){u=e}return t.highlight=i,u?n(u):n(null,e)};if(!i||i.length<3)return s();if(delete t.highlight,!r.length)return s();var l=0;return ie.walkTokens(r,function(t){"code"===t.type&&(l++,setTimeout(function(){i(t.text,t.lang,function(e,u){return e?s(e):(null!=u&&u!==t.text&&(t.text=u,t.escaped=!0),void(0===--l&&s()))})},0))}),void(0===l&&s())}try{var u=X.lex(e,t);return t.walkTokens&&ie.walkTokens(u,t.walkTokens),ee.parse(u,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+ne(e.message+"",!0)+"</pre>";throw e}}return ie.options=ie.setOptions=function(e){return ue(ie.defaults,e),re(ie.defaults),ie},ie.getDefaults=m,ie.defaults=u,ie.use=function(l){var u,t=ue({},l);l.renderer&&function(){var e,s=ie.defaults.renderer||new J;for(e in l.renderer)!function(r){var i=s[r];s[r]=function(){for(var e=arguments.length,u=new Array(e),t=0;t<e;t++)u[t]=arguments[t];var n=l.renderer[r].apply(s,u);return!1===n&&(n=i.apply(s,u)),n}}(e);t.renderer=s}(),l.tokenizer&&function(){var e,s=ie.defaults.tokenizer||new O;for(e in l.tokenizer)!function(r){var i=s[r];s[r]=function(){for(var e=arguments.length,u=new Array(e),t=0;t<e;t++)u[t]=arguments[t];var n=l.tokenizer[r].apply(s,u);return!1===n&&(n=i.apply(s,u)),n}}(e);t.tokenizer=s}(),l.walkTokens&&(u=ie.defaults.walkTokens,t.walkTokens=function(e){l.walkTokens(e),u&&u(e)}),ie.setOptions(t)},ie.walkTokens=function(e,u){for(var t=o(e);!(n=t()).done;){var n=n.value;switch(u(n),n.type){case"table":for(var r=o(n.tokens.header);!(i=r()).done;){var i=i.value;ie.walkTokens(i,u)}for(var s,l=o(n.tokens.cells);!(s=l()).done;)for(var a=o(s.value);!(D=a()).done;){var D=D.value;ie.walkTokens(D,u)}break;case"list":ie.walkTokens(n.items,u);break;default:n.tokens&&ie.walkTokens(n.tokens,u)}}},ie.parseInline=function(e,u){if(null==e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");u=ue({},ie.defaults,u||{}),te(u);try{var t=X.lexInline(e,u);return u.walkTokens&&ie.walkTokens(t,u.walkTokens),ee.parseInline(t,u)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",u.silent)return"<p>An error occurred:</p><pre>"+ne(e.message+"",!0)+"</pre>";throw e}},ie.Parser=ee,ie.parser=ee.parse,ie.Renderer=J,ie.TextRenderer=K,ie.Lexer=X,ie.lexer=X.lex,ie.Tokenizer=O,ie.Slugger=Q,ie.parse=ie});]]></content>
  </entry>
  <entry>
    <title></title>
    <url>/img/js/speak/style.css</url>
    <content><![CDATA[.speak-body-card[data-v-7eb119cc]{padding:10px 20px;border-radius:10px;background:rgba(255,255,255,.1);box-shadow:0 3px 8px 6px #07111b0f;overflow:hidden;margin-top:20px;transition:all .25s ease .2s,transform .5s cubic-bezier(.6,.2,.1,1) .2s,-webkit-transform .5s cubic-bezier(.6,.2,.1,1) .2s}.speak-body-card[data-v-7eb119cc]:hover{box-shadow:0 5px 10px 8px #07111b29;transform:translateY(-3px)}.speak-body-card .speak-body-card-time[data-v-7eb119cc]{font-size:12px;text-shadow:#d9d9d9 0 0 1px,#fffffb 0 0 1px,#fffffb 0 0 2px;margin-left:5px;white-space:nowrap}.speak-body-card .speak-body-card-header[data-v-7eb119cc]{display:flex;justify-content:space-between;align-items:center;user-select:none;flex-wrap:wrap}.speak-body-card .speak-body-card-header .speak-body-card-name[data-v-7eb119cc]{display:flex;align-items:center;margin-bottom:10px}.speak-body-card .speak-body-card-header .speak-body-card-name .avatar[data-v-7eb119cc]{width:32px;height:32px;border-radius:50%;margin-right:10px}.speak-body-card .speak-body-card-header .speak-body-card-name .avatar-img[data-v-7eb119cc]{width:100%;height:100%;border-radius:50%}.speak-body-card .speak-body-card-header .speak-body-card-name .name[data-v-7eb119cc]{font-weight:600;white-space:nowrap}.speak-body-card .speak-body-card-header .speak-body-card-name .is-badge[data-v-7eb119cc]{height:20px;width:20px;margin-left:5px}.speak-body-card .speak-body-card-content[data-v-7eb119cc]{padding:10px 0}.speak-body-card .speak-body-card-content[data-v-7eb119cc] img{width:100%}.speak-body-card .speak-body-card-label[data-v-7eb119cc]{padding:0 5px;font-weight:550;border-radius:3px;box-shadow:inset 0 -1px #1b1f231f;font-size:14px;cursor:pointer;user-select:none;height:25px;line-height:25px}.speak-body-card .speak-body-card-footer[data-v-7eb119cc]{display:flex;padding-bottom:10px;user-select:none}.speak-body-card .speak-body-card-footer .comments-btn[data-v-7eb119cc]{display:flex;align-items:center;cursor:pointer;user-select:none;color:#666;margin-left:10px}.speak-body-card .speak-body-card-back[data-v-7eb119cc]{display:flex;align-items:center;justify-content:center}.speak-body-card .speak-body-card-back .back-btn[data-v-7eb119cc]{text-align:center;display:flex;align-items:center;justify-content:center;width:100px;height:30px;border-radius:5px;margin:0 auto;cursor:pointer;user-select:none;transform:translateZ(0);box-shadow:0 0 1px #0000;color:#efd9a0;border:1px solid #efd9a0}.speak-body-card .speak-body-card-back .back-btn[data-v-7eb119cc]:hover{animation-name:wobble-horizontal;animation-duration:1s;animation-timing-function:ease-in-out;animation-iteration-count:1;transition:background 1s;background:#ff7242;color:#fff}@media screen and (min-width: 768px){.speak-body-card-content[data-v-7eb119cc] .fancybox,.speak-body-card-content[data-v-7eb119cc] video{display:inline-block;max-width:24%}}@media screen and (max-width: 768px){.speak-body-card-content[data-v-7eb119cc] .fancybox,.speak-body-card-content[data-v-7eb119cc] video{display:inline-block;max-width:49%}}[data-v-5812b69d] .D-footer{display:none}.fade-enter-active[data-v-5812b69d],.fade-leave-active[data-v-5812b69d]{transition:opacity .5s ease}.fade-enter-from[data-v-5812b69d],.fade-leave-to[data-v-5812b69d]{opacity:0}.loading-container{width:200px;height:200px;text-align:center;margin:0 auto}.loading-container img{height:100%;width:100%}.controller[data-v-8ef0915a]{text-align:center;margin:1em auto}.controller .next-btn[data-v-8ef0915a]{cursor:pointer;color:#fff;border:0;margin:20px auto;border-radius:.3125rem;display:block;padding:0 1rem;height:40px;font-weight:500;text-align:center;transition:all .5s ease-out;background:linear-gradient(-45deg,#ee7752,#e73c7e,#23a6d5,#23d5ab);background-size:1000% 1000%;animation:Gradient 90s linear infinite;outline:0}.fade-enter-active[data-v-8ef0915a],.fade-leave-active[data-v-8ef0915a]{transition:opacity .5s ease}.fade-enter-from[data-v-8ef0915a],.fade-leave-to[data-v-8ef0915a]{opacity:0}.speak-footer[data-v-dfa83a38]{width:100%;text-align:end;font-size:.75em;color:#999;margin-top:1em}@keyframes Gradient{0%{background-position:0 50%}50%{background-position:100% 50%}to{background-position:0 50%}}@keyframes wobble-horizontal{16.65%{transform:translate(8px)}33.3%{transform:translate(-6px)}49.95%{transform:translate(4px)}66.6%{transform:translate(-2px)}83.25%{transform:translate(1px)}to{transform:translate(0)}}
]]></content>
  </entry>
  <entry>
    <title></title>
    <url>/img/js/speak/butterfly-speak-swiper@1.1.0.min.js</url>
    <content><![CDATA[!function(){var e={899:function(e,t,a){"use strict";var i=a(645),r=a.n(i),s=a(990),n=r()((function(e){return e[1]}));n.i(s.Z),n.push([e.id,"@-webkit-keyframes passing {\n  0% {\n    -webkit-transform: translateX(-50%);\n    transform: translateX(-50%);\n    opacity: 0;\n  }\n  50% {\n    -webkit-transform: translateX(0);\n    transform: translateX(0);\n    opacity: 1;\n  }\n  100% {\n    -webkit-transform: translateX(50%);\n    transform: translateX(50%);\n    opacity: 0;\n  }\n}\n@keyframes passing {\n  0% {\n    -webkit-transform: translateX(-50%);\n    transform: translateX(-50%);\n    opacity: 0;\n  }\n  50% {\n    -webkit-transform: translateX(0);\n    transform: translateX(0);\n    opacity: 1;\n  }\n  100% {\n    -webkit-transform: translateX(50%);\n    transform: translateX(50%);\n    opacity: 0;\n  }\n}\nul,\nli {\n  list-style: none;\n  display: block;\n  margin: 0;\n}\n#bbTimeList {\n  background: var(--card-bg);\n  color: var(--fontcolor);\n  padding: 0.6rem 1rem 0.5rem 1rem;\n  border-radius: 12px;\n  cursor: pointer;\n  box-shadow: var(--card-box-shadow);\n  display: -webkit-flex;\n  display: flex;\n  -webkit-align-items: center;\n          align-items: center;\n  overflow: hidden;\n  transition: all 0.3s;\n}\n#bbTimeList:hover {\n  box-shadow: var(--card-hover-box-shadow);\n}\n#bbTimeList #bber-talk {\n  width: 100%;\n  height: 25px;\n  line-height: 25px;\n}\n#bbTimeList #bber-talk .li-style {\n  width: 100%;\n  height: 28px;\n  text-align: center;\n  -webkit-line-clamp: 1;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  transition: 0.3s;\n}\n#bbTimeList #bber-talk .li-style:hover {\n  color: #49b1f5;\n}\n#bbTimeList .bber-gotobb {\n  line-height: 25px;\n  margin-left: 8px;\n  transition: 0.3s;\n}\n#bbTimeList .bber-gotobb.pass {\n  -webkit-animation: 1s passing infinite;\n          animation: 1s passing infinite;\n}\n.aside-bbtalk {\n  -webkit-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.bb-btn {\n  text-align: center;\n  display: block;\n  line-height: 2.4;\n  margin-top: 0.7rem;\n  background-color: var(--btn-bg);\n  color: var(--btn-color);\n  -webkit-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.bb-btn:hover {\n  color: var(--btn-color);\n}\n",""]),t.Z=n},990:function(e,t,a){"use strict";var i=a(645),r=a.n(i)()((function(e){return e[1]}));r.push([e.id,"@font-face{font-family:swiper-icons;src:url('data:application/font-woff;charset=utf-8;base64, d09GRgABAAAAAAZgABAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAAGRAAAABoAAAAci6qHkUdERUYAAAWgAAAAIwAAACQAYABXR1BPUwAABhQAAAAuAAAANuAY7+xHU1VCAAAFxAAAAFAAAABm2fPczU9TLzIAAAHcAAAASgAAAGBP9V5RY21hcAAAAkQAAACIAAABYt6F0cBjdnQgAAACzAAAAAQAAAAEABEBRGdhc3AAAAWYAAAACAAAAAj//wADZ2x5ZgAAAywAAADMAAAD2MHtryVoZWFkAAABbAAAADAAAAA2E2+eoWhoZWEAAAGcAAAAHwAAACQC9gDzaG10eAAAAigAAAAZAAAArgJkABFsb2NhAAAC0AAAAFoAAABaFQAUGG1heHAAAAG8AAAAHwAAACAAcABAbmFtZQAAA/gAAAE5AAACXvFdBwlwb3N0AAAFNAAAAGIAAACE5s74hXjaY2BkYGAAYpf5Hu/j+W2+MnAzMYDAzaX6QjD6/4//Bxj5GA8AuRwMYGkAPywL13jaY2BkYGA88P8Agx4j+/8fQDYfA1AEBWgDAIB2BOoAeNpjYGRgYNBh4GdgYgABEMnIABJzYNADCQAACWgAsQB42mNgYfzCOIGBlYGB0YcxjYGBwR1Kf2WQZGhhYGBiYGVmgAFGBiQQkOaawtDAoMBQxXjg/wEGPcYDDA4wNUA2CCgwsAAAO4EL6gAAeNpj2M0gyAACqxgGNWBkZ2D4/wMA+xkDdgAAAHjaY2BgYGaAYBkGRgYQiAHyGMF8FgYHIM3DwMHABGQrMOgyWDLEM1T9/w8UBfEMgLzE////P/5//f/V/xv+r4eaAAeMbAxwIUYmIMHEgKYAYjUcsDAwsLKxc3BycfPw8jEQA/gZBASFhEVExcQlJKWkZWTl5BUUlZRVVNXUNTQZBgMAAMR+E+gAEQFEAAAAKgAqACoANAA+AEgAUgBcAGYAcAB6AIQAjgCYAKIArAC2AMAAygDUAN4A6ADyAPwBBgEQARoBJAEuATgBQgFMAVYBYAFqAXQBfgGIAZIBnAGmAbIBzgHsAAB42u2NMQ6CUAyGW568x9AneYYgm4MJbhKFaExIOAVX8ApewSt4Bic4AfeAid3VOBixDxfPYEza5O+Xfi04YADggiUIULCuEJK8VhO4bSvpdnktHI5QCYtdi2sl8ZnXaHlqUrNKzdKcT8cjlq+rwZSvIVczNiezsfnP/uznmfPFBNODM2K7MTQ45YEAZqGP81AmGGcF3iPqOop0r1SPTaTbVkfUe4HXj97wYE+yNwWYxwWu4v1ugWHgo3S1XdZEVqWM7ET0cfnLGxWfkgR42o2PvWrDMBSFj/IHLaF0zKjRgdiVMwScNRAoWUoH78Y2icB/yIY09An6AH2Bdu/UB+yxopYshQiEvnvu0dURgDt8QeC8PDw7Fpji3fEA4z/PEJ6YOB5hKh4dj3EvXhxPqH/SKUY3rJ7srZ4FZnh1PMAtPhwP6fl2PMJMPDgeQ4rY8YT6Gzao0eAEA409DuggmTnFnOcSCiEiLMgxCiTI6Cq5DZUd3Qmp10vO0LaLTd2cjN4fOumlc7lUYbSQcZFkutRG7g6JKZKy0RmdLY680CDnEJ+UMkpFFe1RN7nxdVpXrC4aTtnaurOnYercZg2YVmLN/d/gczfEimrE/fs/bOuq29Zmn8tloORaXgZgGa78yO9/cnXm2BpaGvq25Dv9S4E9+5SIc9PqupJKhYFSSl47+Qcr1mYNAAAAeNptw0cKwkAAAMDZJA8Q7OUJvkLsPfZ6zFVERPy8qHh2YER+3i/BP83vIBLLySsoKimrqKqpa2hp6+jq6RsYGhmbmJqZSy0sraxtbO3sHRydnEMU4uR6yx7JJXveP7WrDycAAAAAAAH//wACeNpjYGRgYOABYhkgZgJCZgZNBkYGLQZtIJsFLMYAAAw3ALgAeNolizEKgDAQBCchRbC2sFER0YD6qVQiBCv/H9ezGI6Z5XBAw8CBK/m5iQQVauVbXLnOrMZv2oLdKFa8Pjuru2hJzGabmOSLzNMzvutpB3N42mNgZGBg4GKQYzBhYMxJLMlj4GBgAYow/P/PAJJhLM6sSoWKfWCAAwDAjgbRAAB42mNgYGBkAIIbCZo5IPrmUn0hGA0AO8EFTQAA') format('woff');font-weight:400;font-style:normal}:root{--swiper-theme-color:#007aff}.swiper-container{margin-left:auto;margin-right:auto;position:relative;overflow:hidden;list-style:none;padding:0;z-index:1}.swiper-container-vertical>.swiper-wrapper{flex-direction:column}.swiper-wrapper{position:relative;width:100%;height:100%;z-index:1;display:flex;transition-property:transform;box-sizing:content-box}.swiper-container-android .swiper-slide,.swiper-wrapper{transform:translate3d(0px,0,0)}.swiper-container-multirow>.swiper-wrapper{flex-wrap:wrap}.swiper-container-multirow-column>.swiper-wrapper{flex-wrap:wrap;flex-direction:column}.swiper-container-free-mode>.swiper-wrapper{transition-timing-function:ease-out;margin:0 auto}.swiper-container-pointer-events{touch-action:pan-y}.swiper-container-pointer-events.swiper-container-vertical{touch-action:pan-x}.swiper-slide{flex-shrink:0;width:100%;height:100%;position:relative;transition-property:transform}.swiper-slide-invisible-blank{visibility:hidden}.swiper-container-autoheight,.swiper-container-autoheight .swiper-slide{height:auto}.swiper-container-autoheight .swiper-wrapper{align-items:flex-start;transition-property:transform,height}.swiper-container-3d{perspective:1200px}.swiper-container-3d .swiper-cube-shadow,.swiper-container-3d .swiper-slide,.swiper-container-3d .swiper-slide-shadow-bottom,.swiper-container-3d .swiper-slide-shadow-left,.swiper-container-3d .swiper-slide-shadow-right,.swiper-container-3d .swiper-slide-shadow-top,.swiper-container-3d .swiper-wrapper{transform-style:preserve-3d}.swiper-container-3d .swiper-slide-shadow-bottom,.swiper-container-3d .swiper-slide-shadow-left,.swiper-container-3d .swiper-slide-shadow-right,.swiper-container-3d .swiper-slide-shadow-top{position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:10}.swiper-container-3d .swiper-slide-shadow-left{background-image:linear-gradient(to left,rgba(0,0,0,.5),rgba(0,0,0,0))}.swiper-container-3d .swiper-slide-shadow-right{background-image:linear-gradient(to right,rgba(0,0,0,.5),rgba(0,0,0,0))}.swiper-container-3d .swiper-slide-shadow-top{background-image:linear-gradient(to top,rgba(0,0,0,.5),rgba(0,0,0,0))}.swiper-container-3d .swiper-slide-shadow-bottom{background-image:linear-gradient(to bottom,rgba(0,0,0,.5),rgba(0,0,0,0))}.swiper-container-css-mode>.swiper-wrapper{overflow:auto;scrollbar-width:none;-ms-overflow-style:none}.swiper-container-css-mode>.swiper-wrapper::-webkit-scrollbar{display:none}.swiper-container-css-mode>.swiper-wrapper>.swiper-slide{scroll-snap-align:start start}.swiper-container-horizontal.swiper-container-css-mode>.swiper-wrapper{scroll-snap-type:x mandatory}.swiper-container-vertical.swiper-container-css-mode>.swiper-wrapper{scroll-snap-type:y mandatory}:root{--swiper-navigation-size:44px}.swiper-button-next,.swiper-button-prev{position:absolute;top:50%;width:calc(var(--swiper-navigation-size)/ 44 * 27);height:var(--swiper-navigation-size);margin-top:calc(0 - (var(--swiper-navigation-size)/ 2));z-index:10;cursor:pointer;display:flex;align-items:center;justify-content:center;color:var(--swiper-navigation-color,var(--swiper-theme-color))}.swiper-button-next.swiper-button-disabled,.swiper-button-prev.swiper-button-disabled{opacity:.35;cursor:auto;pointer-events:none}.swiper-button-next:after,.swiper-button-prev:after{font-family:swiper-icons;font-size:var(--swiper-navigation-size);text-transform:none!important;letter-spacing:0;text-transform:none;font-variant:initial;line-height:1}.swiper-button-prev,.swiper-container-rtl .swiper-button-next{left:10px;right:auto}.swiper-button-prev:after,.swiper-container-rtl .swiper-button-next:after{content:'prev'}.swiper-button-next,.swiper-container-rtl .swiper-button-prev{right:10px;left:auto}.swiper-button-next:after,.swiper-container-rtl .swiper-button-prev:after{content:'next'}.swiper-button-next.swiper-button-white,.swiper-button-prev.swiper-button-white{--swiper-navigation-color:#ffffff}.swiper-button-next.swiper-button-black,.swiper-button-prev.swiper-button-black{--swiper-navigation-color:#000000}.swiper-button-lock{display:none}.swiper-pagination{position:absolute;text-align:center;transition:.3s opacity;transform:translate3d(0,0,0);z-index:10}.swiper-pagination.swiper-pagination-hidden{opacity:0}.swiper-container-horizontal>.swiper-pagination-bullets,.swiper-pagination-custom,.swiper-pagination-fraction{bottom:10px;left:0;width:100%}.swiper-pagination-bullets-dynamic{overflow:hidden;font-size:0}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transform:scale(.33);position:relative}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active{transform:scale(1)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-main{transform:scale(1)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev{transform:scale(.66)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev-prev{transform:scale(.33)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next{transform:scale(.66)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next-next{transform:scale(.33)}.swiper-pagination-bullet{width:8px;height:8px;display:inline-block;border-radius:50%;background:#000;opacity:.2}button.swiper-pagination-bullet{border:none;margin:0;padding:0;box-shadow:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}.swiper-pagination-clickable .swiper-pagination-bullet{cursor:pointer}.swiper-pagination-bullet-active{opacity:1;background:var(--swiper-pagination-color,var(--swiper-theme-color))}.swiper-container-vertical>.swiper-pagination-bullets{right:10px;top:50%;transform:translate3d(0px,-50%,0)}.swiper-container-vertical>.swiper-pagination-bullets .swiper-pagination-bullet{margin:6px 0;display:block}.swiper-container-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic{top:50%;transform:translateY(-50%);width:8px}.swiper-container-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{display:inline-block;transition:.2s transform,.2s top}.swiper-container-horizontal>.swiper-pagination-bullets .swiper-pagination-bullet{margin:0 4px}.swiper-container-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic{left:50%;transform:translateX(-50%);white-space:nowrap}.swiper-container-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transition:.2s transform,.2s left}.swiper-container-horizontal.swiper-container-rtl>.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transition:.2s transform,.2s right}.swiper-pagination-progressbar{background:rgba(0,0,0,.25);position:absolute}.swiper-pagination-progressbar .swiper-pagination-progressbar-fill{background:var(--swiper-pagination-color,var(--swiper-theme-color));position:absolute;left:0;top:0;width:100%;height:100%;transform:scale(0);transform-origin:left top}.swiper-container-rtl .swiper-pagination-progressbar .swiper-pagination-progressbar-fill{transform-origin:right top}.swiper-container-horizontal>.swiper-pagination-progressbar,.swiper-container-vertical>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite{width:100%;height:4px;left:0;top:0}.swiper-container-horizontal>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite,.swiper-container-vertical>.swiper-pagination-progressbar{width:4px;height:100%;left:0;top:0}.swiper-pagination-white{--swiper-pagination-color:#ffffff}.swiper-pagination-black{--swiper-pagination-color:#000000}.swiper-pagination-lock{display:none}.swiper-scrollbar{border-radius:10px;position:relative;-ms-touch-action:none;background:rgba(0,0,0,.1)}.swiper-container-horizontal>.swiper-scrollbar{position:absolute;left:1%;bottom:3px;z-index:50;height:5px;width:98%}.swiper-container-vertical>.swiper-scrollbar{position:absolute;right:3px;top:1%;z-index:50;width:5px;height:98%}.swiper-scrollbar-drag{height:100%;width:100%;position:relative;background:rgba(0,0,0,.5);border-radius:10px;left:0;top:0}.swiper-scrollbar-cursor-drag{cursor:move}.swiper-scrollbar-lock{display:none}.swiper-zoom-container{width:100%;height:100%;display:flex;justify-content:center;align-items:center;text-align:center}.swiper-zoom-container>canvas,.swiper-zoom-container>img,.swiper-zoom-container>svg{max-width:100%;max-height:100%;object-fit:contain}.swiper-slide-zoomed{cursor:move}.swiper-lazy-preloader{width:42px;height:42px;position:absolute;left:50%;top:50%;margin-left:-21px;margin-top:-21px;z-index:10;transform-origin:50%;animation:swiper-preloader-spin 1s infinite linear;box-sizing:border-box;border:4px solid var(--swiper-preloader-color,var(--swiper-theme-color));border-radius:50%;border-top-color:transparent}.swiper-lazy-preloader-white{--swiper-preloader-color:#fff}.swiper-lazy-preloader-black{--swiper-preloader-color:#000}@keyframes swiper-preloader-spin{100%{transform:rotate(360deg)}}.swiper-container .swiper-notification{position:absolute;left:0;top:0;pointer-events:none;opacity:0;z-index:-1000}.swiper-container-fade.swiper-container-free-mode .swiper-slide{transition-timing-function:ease-out}.swiper-container-fade .swiper-slide{pointer-events:none;transition-property:opacity}.swiper-container-fade .swiper-slide .swiper-slide{pointer-events:none}.swiper-container-fade .swiper-slide-active,.swiper-container-fade .swiper-slide-active .swiper-slide-active{pointer-events:auto}.swiper-container-cube{overflow:visible}.swiper-container-cube .swiper-slide{pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:1;visibility:hidden;transform-origin:0 0;width:100%;height:100%}.swiper-container-cube .swiper-slide .swiper-slide{pointer-events:none}.swiper-container-cube.swiper-container-rtl .swiper-slide{transform-origin:100% 0}.swiper-container-cube .swiper-slide-active,.swiper-container-cube .swiper-slide-active .swiper-slide-active{pointer-events:auto}.swiper-container-cube .swiper-slide-active,.swiper-container-cube .swiper-slide-next,.swiper-container-cube .swiper-slide-next+.swiper-slide,.swiper-container-cube .swiper-slide-prev{pointer-events:auto;visibility:visible}.swiper-container-cube .swiper-slide-shadow-bottom,.swiper-container-cube .swiper-slide-shadow-left,.swiper-container-cube .swiper-slide-shadow-right,.swiper-container-cube .swiper-slide-shadow-top{z-index:0;-webkit-backface-visibility:hidden;backface-visibility:hidden}.swiper-container-cube .swiper-cube-shadow{position:absolute;left:0;bottom:0px;width:100%;height:100%;opacity:.6;z-index:0}.swiper-container-cube .swiper-cube-shadow:before{content:'';background:#000;position:absolute;left:0;top:0;bottom:0;right:0;-webkit-filter:blur(50px);filter:blur(50px)}.swiper-container-flip{overflow:visible}.swiper-container-flip .swiper-slide{pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:1}.swiper-container-flip .swiper-slide .swiper-slide{pointer-events:none}.swiper-container-flip .swiper-slide-active,.swiper-container-flip .swiper-slide-active .swiper-slide-active{pointer-events:auto}.swiper-container-flip .swiper-slide-shadow-bottom,.swiper-container-flip .swiper-slide-shadow-left,.swiper-container-flip .swiper-slide-shadow-right,.swiper-container-flip .swiper-slide-shadow-top{z-index:0;-webkit-backface-visibility:hidden;backface-visibility:hidden}",""]),t.Z=r},645:function(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=e(t);return t[2]?"@media ".concat(t[2]," {").concat(a,"}"):a})).join("")},t.i=function(e,a,i){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(i)for(var s=0;s<this.length;s++){var n=this[s][0];null!=n&&(r[n]=!0)}for(var o=0;o<e.length;o++){var l=[].concat(e[o]);i&&r[l[0]]||(a&&(l[2]?l[2]="".concat(a," and ").concat(l[2]):l[2]=a),t.push(l))}},t}},110:function(e,t,a){"use strict";a.r(t);var i=a(379),r=a.n(i),s=a(899);r()(s.Z,{insert:"head",singleton:!1}),t.default=s.Z.locals||{}},379:function(e,t,a){"use strict";var i,r=function(){var e={};return function(t){if(void 0===e[t]){var a=document.querySelector(t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}e[t]=a}return e[t]}}(),s=[];function n(e){for(var t=-1,a=0;a<s.length;a++)if(s[a].identifier===e){t=a;break}return t}function o(e,t){for(var a={},i=[],r=0;r<e.length;r++){var o=e[r],l=t.base?o[0]+t.base:o[0],d=a[l]||0,p="".concat(l," ").concat(d);a[l]=d+1;var c=n(p),u={css:o[1],media:o[2],sourceMap:o[3]};-1!==c?(s[c].references++,s[c].updater(u)):s.push({identifier:p,updater:v(u,t),references:1}),i.push(p)}return i}function l(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var s=a.nc;s&&(i.nonce=s)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var n=r(e.insert||"head");if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(t)}return t}var d,p=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function c(e,t,a,i){var r=a?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=p(t,r);else{var s=document.createTextNode(r),n=e.childNodes;n[t]&&e.removeChild(n[t]),n.length?e.insertBefore(s,n[t]):e.appendChild(s)}}function u(e,t,a){var i=a.css,r=a.media,s=a.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var h=null,f=0;function v(e,t){var a,i,r;if(t.singleton){var s=f++;a=h||(h=l(t)),i=c.bind(null,a,s,!1),r=c.bind(null,a,s,!0)}else a=l(t),i=u.bind(null,a,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(a)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i));var a=o(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<a.length;i++){var r=n(a[i]);s[r].references--}for(var l=o(e,t),d=0;d<a.length;d++){var p=n(a[d]);0===s[p].references&&(s[p].updater(),s.splice(p,1))}a=l}}}},164:function(e){e.exports=e=>(e=(e=(e=e.replace(/<[^>]+>/gim,"")).replace(/\[(.*?)\]\((.*?)\)/gm,"[链接]")).replace(/\bhttps?:\/\/(?!\S+(?:jpe?g|png|bmp|gif|webp|gif|mp4))\S+/g,"[链接]")).replace(/!\[(.*?)\]\((.*?)\)/gm,"[图片]")},833:function(e){const{limit:t,api_url:a,author:i}=window.kkBBConfig;e.exports=async function(){let e=a,r=10;t&&(r=t),e=`${e}/api/ispeak?author=${i}&page=1&pageSize=${r}`;const s=window.localStorage.getItem("ispeak-token"),n={};s&&(n.Authorization="Bearer "+s);const o=await fetch(e,{headers:n});return(await o.json()).data}},283:function(){!function(){const e=document.createElement("div");e.id="bbTimeList",e.className="bbTimeList container",e.addEventListener("click",(function(){window.location.href=window.kkBBConfig.blog||"/speak/"})),e.innerHTML="<i class='bber-gotobb far fa-comment-alt'></i>\n  <div class=\"swiper-container\" id=\"bbtalk\">\n    <div class='swiper-wrapper' id='bber-talk'></div>\n  </div>\n  <i class=\"bber-gotobb fas fa-angle-double-right pass\"></i>\n  ";const t=document.getElementsByClassName("recent-post-item")[0];t&&t.parentElement.insertBefore(e,t)}()},957:function(e){e.exports=function(){"use strict";function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(){return(t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function a(e){return null!==e&&"object"==typeof e&&"constructor"in e&&e.constructor===Object}function i(e,t){void 0===e&&(e={}),void 0===t&&(t={}),Object.keys(t).forEach((function(r){void 0===e[r]?e[r]=t[r]:a(t[r])&&a(e[r])&&Object.keys(t[r]).length>0&&i(e[r],t[r])}))}var r={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function s(){var e="undefined"!=typeof document?document:{};return i(e,r),e}var n={document:r,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(e){return"undefined"==typeof setTimeout?(e(),null):setTimeout(e,0)},cancelAnimationFrame:function(e){"undefined"!=typeof setTimeout&&clearTimeout(e)}};function o(){var e="undefined"!=typeof window?window:{};return i(e,n),e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e,t,a){return(c=p()?Reflect.construct:function(e,t,a){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return a&&d(r,a.prototype),r}).apply(null,arguments)}function u(e){var t="function"==typeof Map?new Map:void 0;return(u=function(e){if(null===e||(a=e,-1===Function.toString.call(a).indexOf("[native code]")))return e;var a;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return c(e,arguments,l(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),d(i,e)})(e)}var h=function(e){var t,a;function i(t){var a,i,r;return i=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(a=e.call.apply(e,[this].concat(t))||this),r=i.__proto__,Object.defineProperty(i,"__proto__",{get:function(){return r},set:function(e){r.__proto__=e}}),a}return a=e,(t=i).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a,i}(u(Array));function f(e){void 0===e&&(e=[]);var t=[];return e.forEach((function(e){Array.isArray(e)?t.push.apply(t,f(e)):t.push(e)})),t}function v(e,t){return Array.prototype.filter.call(e,t)}function m(e,t){var a=o(),i=s(),r=[];if(!t&&e instanceof h)return e;if(!e)return new h(r);if("string"==typeof e){var n=e.trim();if(n.indexOf("<")>=0&&n.indexOf(">")>=0){var l="div";0===n.indexOf("<li")&&(l="ul"),0===n.indexOf("<tr")&&(l="tbody"),0!==n.indexOf("<td")&&0!==n.indexOf("<th")||(l="tr"),0===n.indexOf("<tbody")&&(l="table"),0===n.indexOf("<option")&&(l="select");var d=i.createElement(l);d.innerHTML=n;for(var p=0;p<d.childNodes.length;p+=1)r.push(d.childNodes[p])}else r=function(e,t){if("string"!=typeof e)return[e];for(var a=[],i=t.querySelectorAll(e),r=0;r<i.length;r+=1)a.push(i[r]);return a}(e.trim(),t||i)}else if(e.nodeType||e===a||e===i)r.push(e);else if(Array.isArray(e)){if(e instanceof h)return e;r=e}return new h(function(e){for(var t=[],a=0;a<e.length;a+=1)-1===t.indexOf(e[a])&&t.push(e[a]);return t}(r))}m.fn=h.prototype;var g,w,b,y={addClass:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var i=f(t.map((function(e){return e.split(" ")})));return this.forEach((function(e){var t;(t=e.classList).add.apply(t,i)})),this},removeClass:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var i=f(t.map((function(e){return e.split(" ")})));return this.forEach((function(e){var t;(t=e.classList).remove.apply(t,i)})),this},hasClass:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var i=f(t.map((function(e){return e.split(" ")})));return v(this,(function(e){return i.filter((function(t){return e.classList.contains(t)})).length>0})).length>0},toggleClass:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var i=f(t.map((function(e){return e.split(" ")})));this.forEach((function(e){i.forEach((function(t){e.classList.toggle(t)}))}))},attr:function(e,t){if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var a=0;a<this.length;a+=1)if(2===arguments.length)this[a].setAttribute(e,t);else for(var i in e)this[a][i]=e[i],this[a].setAttribute(i,e[i]);return this},removeAttr:function(e){for(var t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},transform:function(e){for(var t=0;t<this.length;t+=1)this[t].style.transform=e;return this},transition:function(e){for(var t=0;t<this.length;t+=1)this[t].style.transitionDuration="string"!=typeof e?e+"ms":e;return this},on:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var i=t[0],r=t[1],s=t[2],n=t[3];function o(e){var t=e.target;if(t){var a=e.target.dom7EventData||[];if(a.indexOf(e)<0&&a.unshift(e),m(t).is(r))s.apply(t,a);else for(var i=m(t).parents(),n=0;n<i.length;n+=1)m(i[n]).is(r)&&s.apply(i[n],a)}}function l(e){var t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),s.apply(this,t)}"function"==typeof t[1]&&(i=t[0],s=t[1],n=t[2],r=void 0),n||(n=!1);for(var d,p=i.split(" "),c=0;c<this.length;c+=1){var u=this[c];if(r)for(d=0;d<p.length;d+=1){var h=p[d];u.dom7LiveListeners||(u.dom7LiveListeners={}),u.dom7LiveListeners[h]||(u.dom7LiveListeners[h]=[]),u.dom7LiveListeners[h].push({listener:s,proxyListener:o}),u.addEventListener(h,o,n)}else for(d=0;d<p.length;d+=1){var f=p[d];u.dom7Listeners||(u.dom7Listeners={}),u.dom7Listeners[f]||(u.dom7Listeners[f]=[]),u.dom7Listeners[f].push({listener:s,proxyListener:l}),u.addEventListener(f,l,n)}}return this},off:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var i=t[0],r=t[1],s=t[2],n=t[3];"function"==typeof t[1]&&(i=t[0],s=t[1],n=t[2],r=void 0),n||(n=!1);for(var o=i.split(" "),l=0;l<o.length;l+=1)for(var d=o[l],p=0;p<this.length;p+=1){var c=this[p],u=void 0;if(!r&&c.dom7Listeners?u=c.dom7Listeners[d]:r&&c.dom7LiveListeners&&(u=c.dom7LiveListeners[d]),u&&u.length)for(var h=u.length-1;h>=0;h-=1){var f=u[h];s&&f.listener===s||s&&f.listener&&f.listener.dom7proxy&&f.listener.dom7proxy===s?(c.removeEventListener(d,f.proxyListener,n),u.splice(h,1)):s||(c.removeEventListener(d,f.proxyListener,n),u.splice(h,1))}}return this},trigger:function(){for(var e=o(),t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];for(var r=a[0].split(" "),s=a[1],n=0;n<r.length;n+=1)for(var l=r[n],d=0;d<this.length;d+=1){var p=this[d];if(e.CustomEvent){var c=new e.CustomEvent(l,{detail:s,bubbles:!0,cancelable:!0});p.dom7EventData=a.filter((function(e,t){return t>0})),p.dispatchEvent(c),p.dom7EventData=[],delete p.dom7EventData}}return this},transitionEnd:function(e){var t=this;return e&&t.on("transitionend",(function a(i){i.target===this&&(e.call(this,i),t.off("transitionend",a))})),this},outerWidth:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},styles:function(){var e=o();return this[0]?e.getComputedStyle(this[0],null):{}},offset:function(){if(this.length>0){var e=o(),t=s(),a=this[0],i=a.getBoundingClientRect(),r=t.body,n=a.clientTop||r.clientTop||0,l=a.clientLeft||r.clientLeft||0,d=a===e?e.scrollY:a.scrollTop,p=a===e?e.scrollX:a.scrollLeft;return{top:i.top+d-n,left:i.left+p-l}}return null},css:function(e,t){var a,i=o();if(1===arguments.length){if("string"!=typeof e){for(a=0;a<this.length;a+=1)for(var r in e)this[a].style[r]=e[r];return this}if(this[0])return i.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(a=0;a<this.length;a+=1)this[a].style[e]=t;return this}return this},each:function(e){return e?(this.forEach((function(t,a){e.apply(t,[t,a])})),this):this},html:function(e){if(void 0===e)return this[0]?this[0].innerHTML:null;for(var t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(e){var t,a,i=o(),r=s(),n=this[0];if(!n||void 0===e)return!1;if("string"==typeof e){if(n.matches)return n.matches(e);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(n.msMatchesSelector)return n.msMatchesSelector(e);for(t=m(e),a=0;a<t.length;a+=1)if(t[a]===n)return!0;return!1}if(e===r)return n===r;if(e===i)return n===i;if(e.nodeType||e instanceof h){for(t=e.nodeType?[e]:e,a=0;a<t.length;a+=1)if(t[a]===n)return!0;return!1}return!1},index:function(){var e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){if(void 0===e)return this;var t=this.length;if(e>t-1)return m([]);if(e<0){var a=t+e;return m(a<0?[]:[this[a]])}return m([this[e]])},append:function(){for(var e,t=s(),a=0;a<arguments.length;a+=1){e=a<0||arguments.length<=a?void 0:arguments[a];for(var i=0;i<this.length;i+=1)if("string"==typeof e){var r=t.createElement("div");for(r.innerHTML=e;r.firstChild;)this[i].appendChild(r.firstChild)}else if(e instanceof h)for(var n=0;n<e.length;n+=1)this[i].appendChild(e[n]);else this[i].appendChild(e)}return this},prepend:function(e){var t,a,i=s();for(t=0;t<this.length;t+=1)if("string"==typeof e){var r=i.createElement("div");for(r.innerHTML=e,a=r.childNodes.length-1;a>=0;a-=1)this[t].insertBefore(r.childNodes[a],this[t].childNodes[0])}else if(e instanceof h)for(a=0;a<e.length;a+=1)this[t].insertBefore(e[a],this[t].childNodes[0]);else this[t].insertBefore(e,this[t].childNodes[0]);return this},next:function(e){return this.length>0?e?this[0].nextElementSibling&&m(this[0].nextElementSibling).is(e)?m([this[0].nextElementSibling]):m([]):this[0].nextElementSibling?m([this[0].nextElementSibling]):m([]):m([])},nextAll:function(e){var t=[],a=this[0];if(!a)return m([]);for(;a.nextElementSibling;){var i=a.nextElementSibling;e?m(i).is(e)&&t.push(i):t.push(i),a=i}return m(t)},prev:function(e){if(this.length>0){var t=this[0];return e?t.previousElementSibling&&m(t.previousElementSibling).is(e)?m([t.previousElementSibling]):m([]):t.previousElementSibling?m([t.previousElementSibling]):m([])}return m([])},prevAll:function(e){var t=[],a=this[0];if(!a)return m([]);for(;a.previousElementSibling;){var i=a.previousElementSibling;e?m(i).is(e)&&t.push(i):t.push(i),a=i}return m(t)},parent:function(e){for(var t=[],a=0;a<this.length;a+=1)null!==this[a].parentNode&&(e?m(this[a].parentNode).is(e)&&t.push(this[a].parentNode):t.push(this[a].parentNode));return m(t)},parents:function(e){for(var t=[],a=0;a<this.length;a+=1)for(var i=this[a].parentNode;i;)e?m(i).is(e)&&t.push(i):t.push(i),i=i.parentNode;return m(t)},closest:function(e){var t=this;return void 0===e?m([]):(t.is(e)||(t=t.parents(e).eq(0)),t)},find:function(e){for(var t=[],a=0;a<this.length;a+=1)for(var i=this[a].querySelectorAll(e),r=0;r<i.length;r+=1)t.push(i[r]);return m(t)},children:function(e){for(var t=[],a=0;a<this.length;a+=1)for(var i=this[a].children,r=0;r<i.length;r+=1)e&&!m(i[r]).is(e)||t.push(i[r]);return m(t)},filter:function(e){return m(v(this,e))},remove:function(){for(var e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}};function x(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function E(){return Date.now()}function T(e,t){void 0===t&&(t="x");var a,i,r,s=o(),n=function(e){var t,a=o();return a.getComputedStyle&&(t=a.getComputedStyle(e,null)),!t&&e.currentStyle&&(t=e.currentStyle),t||(t=e.style),t}(e);return s.WebKitCSSMatrix?((i=n.transform||n.webkitTransform).split(",").length>6&&(i=i.split(", ").map((function(e){return e.replace(",",".")})).join(", ")),r=new s.WebKitCSSMatrix("none"===i?"":i)):a=(r=n.MozTransform||n.OTransform||n.MsTransform||n.msTransform||n.transform||n.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===t&&(i=s.WebKitCSSMatrix?r.m41:16===a.length?parseFloat(a[12]):parseFloat(a[4])),"y"===t&&(i=s.WebKitCSSMatrix?r.m42:16===a.length?parseFloat(a[13]):parseFloat(a[5])),i||0}function C(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function S(){for(var e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"],a=1;a<arguments.length;a+=1){var i=a<0||arguments.length<=a?void 0:arguments[a];if(null!=i)for(var r=Object.keys(Object(i)).filter((function(e){return t.indexOf(e)<0})),s=0,n=r.length;s<n;s+=1){var o=r[s],l=Object.getOwnPropertyDescriptor(i,o);void 0!==l&&l.enumerable&&(C(e[o])&&C(i[o])?i[o].__swiper__?e[o]=i[o]:S(e[o],i[o]):!C(e[o])&&C(i[o])?(e[o]={},i[o].__swiper__?e[o]=i[o]:S(e[o],i[o])):e[o]=i[o])}}return e}function A(e,t){Object.keys(t).forEach((function(a){C(t[a])&&Object.keys(t[a]).forEach((function(i){"function"==typeof t[a][i]&&(t[a][i]=t[a][i].bind(e))})),e[a]=t[a]}))}function M(){return g||(g=function(){var e=o(),t=s();return{touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),pointerEvents:!!e.PointerEvent&&"maxTouchPoints"in e.navigator&&e.navigator.maxTouchPoints>=0,observer:"MutationObserver"in e||"WebkitMutationObserver"in e,passiveListener:function(){var t=!1;try{var a=Object.defineProperty({},"passive",{get:function(){t=!0}});e.addEventListener("testPassiveListener",null,a)}catch(e){}return t}(),gestures:"ongesturestart"in e}}()),g}function z(e){return void 0===e&&(e={}),w||(w=function(e){var t=(void 0===e?{}:e).userAgent,a=M(),i=o(),r=i.navigator.platform,s=t||i.navigator.userAgent,n={ios:!1,android:!1},l=i.screen.width,d=i.screen.height,p=s.match(/(Android);?[\s\/]+([\d.]+)?/),c=s.match(/(iPad).*OS\s([\d_]+)/),u=s.match(/(iPod)(.*OS\s([\d_]+))?/),h=!c&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),f="Win32"===r,v="MacIntel"===r;return!c&&v&&a.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(l+"x"+d)>=0&&((c=s.match(/(Version)\/([\d.]+)/))||(c=[0,1,"13_0_0"]),v=!1),p&&!f&&(n.os="android",n.android=!0),(c||h||u)&&(n.os="ios",n.ios=!0),n}(e)),w}function k(){return b||(b=function(){var e,t=o();return{isEdge:!!t.navigator.userAgent.match(/Edge/g),isSafari:(e=t.navigator.userAgent.toLowerCase(),e.indexOf("safari")>=0&&e.indexOf("chrome")<0&&e.indexOf("android")<0),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)}}()),b}Object.keys(y).forEach((function(e){m.fn[e]=y[e]}));var P={name:"resize",create:function(){var e=this;S(e,{resize:{observer:null,createObserver:function(){e&&!e.destroyed&&e.initialized&&(e.resize.observer=new ResizeObserver((function(t){var a=e.width,i=e.height,r=a,s=i;t.forEach((function(t){var a=t.contentBoxSize,i=t.contentRect,n=t.target;n&&n!==e.el||(r=i?i.width:(a[0]||a).inlineSize,s=i?i.height:(a[0]||a).blockSize)})),r===a&&s===i||e.resize.resizeHandler()})),e.resize.observer.observe(e.el))},removeObserver:function(){e.resize.observer&&e.resize.observer.unobserve&&e.el&&(e.resize.observer.unobserve(e.el),e.resize.observer=null)},resizeHandler:function(){e&&!e.destroyed&&e.initialized&&(e.emit("beforeResize"),e.emit("resize"))},orientationChangeHandler:function(){e&&!e.destroyed&&e.initialized&&e.emit("orientationchange")}}})},on:{init:function(e){var t=o();e.params.resizeObserver&&void 0!==o().ResizeObserver?e.resize.createObserver():(t.addEventListener("resize",e.resize.resizeHandler),t.addEventListener("orientationchange",e.resize.orientationChangeHandler))},destroy:function(e){var t=o();e.resize.removeObserver(),t.removeEventListener("resize",e.resize.resizeHandler),t.removeEventListener("orientationchange",e.resize.orientationChangeHandler)}}},L={attach:function(e,t){void 0===t&&(t={});var a=o(),i=this,r=new(a.MutationObserver||a.WebkitMutationObserver)((function(e){if(1!==e.length){var t=function(){i.emit("observerUpdate",e[0])};a.requestAnimationFrame?a.requestAnimationFrame(t):a.setTimeout(t,0)}else i.emit("observerUpdate",e[0])}));r.observe(e,{attributes:void 0===t.attributes||t.attributes,childList:void 0===t.childList||t.childList,characterData:void 0===t.characterData||t.characterData}),i.observer.observers.push(r)},init:function(){var e=this;if(e.support.observer&&e.params.observer){if(e.params.observeParents)for(var t=e.$el.parents(),a=0;a<t.length;a+=1)e.observer.attach(t[a]);e.observer.attach(e.$el[0],{childList:e.params.observeSlideChildren}),e.observer.attach(e.$wrapperEl[0],{attributes:!1})}},destroy:function(){this.observer.observers.forEach((function(e){e.disconnect()})),this.observer.observers=[]}},$={name:"observer",params:{observer:!1,observeParents:!1,observeSlideChildren:!1},create:function(){A(this,{observer:t({},L,{observers:[]})})},on:{init:function(e){e.observer.init()},destroy:function(e){e.observer.destroy()}}};function I(e){var t=this,a=s(),i=o(),r=t.touchEventsData,n=t.params,l=t.touches;if(!t.animating||!n.preventInteractionOnTransition){var d=e;d.originalEvent&&(d=d.originalEvent);var p=m(d.target);if(("wrapper"!==n.touchEventsTarget||p.closest(t.wrapperEl).length)&&(r.isTouchEvent="touchstart"===d.type,(r.isTouchEvent||!("which"in d)||3!==d.which)&&!(!r.isTouchEvent&&"button"in d&&d.button>0||r.isTouched&&r.isMoved)))if(!!n.noSwipingClass&&""!==n.noSwipingClass&&d.target&&d.target.shadowRoot&&e.path&&e.path[0]&&(p=m(e.path[0])),n.noSwiping&&p.closest(n.noSwipingSelector?n.noSwipingSelector:"."+n.noSwipingClass)[0])t.allowClick=!0;else if(!n.swipeHandler||p.closest(n.swipeHandler)[0]){l.currentX="touchstart"===d.type?d.targetTouches[0].pageX:d.pageX,l.currentY="touchstart"===d.type?d.targetTouches[0].pageY:d.pageY;var c=l.currentX,u=l.currentY,h=n.edgeSwipeDetection||n.iOSEdgeSwipeDetection,f=n.edgeSwipeThreshold||n.iOSEdgeSwipeThreshold;if(h&&(c<=f||c>=i.innerWidth-f)){if("prevent"!==h)return;e.preventDefault()}if(S(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),l.startX=c,l.startY=u,r.touchStartTime=E(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,n.threshold>0&&(r.allowThresholdMove=!1),"touchstart"!==d.type){var v=!0;p.is(r.formElements)&&(v=!1),a.activeElement&&m(a.activeElement).is(r.formElements)&&a.activeElement!==p[0]&&a.activeElement.blur();var g=v&&t.allowTouchMove&&n.touchStartPreventDefault;!n.touchStartForcePreventDefault&&!g||p[0].isContentEditable||d.preventDefault()}t.emit("touchStart",d)}}}function O(e){var t=s(),a=this,i=a.touchEventsData,r=a.params,n=a.touches,o=a.rtlTranslate,l=e;if(l.originalEvent&&(l=l.originalEvent),i.isTouched){if(!i.isTouchEvent||"touchmove"===l.type){var d="touchmove"===l.type&&l.targetTouches&&(l.targetTouches[0]||l.changedTouches[0]),p="touchmove"===l.type?d.pageX:l.pageX,c="touchmove"===l.type?d.pageY:l.pageY;if(l.preventedByNestedSwiper)return n.startX=p,void(n.startY=c);if(!a.allowTouchMove)return a.allowClick=!1,void(i.isTouched&&(S(n,{startX:p,startY:c,currentX:p,currentY:c}),i.touchStartTime=E()));if(i.isTouchEvent&&r.touchReleaseOnEdges&&!r.loop)if(a.isVertical()){if(c<n.startY&&a.translate<=a.maxTranslate()||c>n.startY&&a.translate>=a.minTranslate())return i.isTouched=!1,void(i.isMoved=!1)}else if(p<n.startX&&a.translate<=a.maxTranslate()||p>n.startX&&a.translate>=a.minTranslate())return;if(i.isTouchEvent&&t.activeElement&&l.target===t.activeElement&&m(l.target).is(i.formElements))return i.isMoved=!0,void(a.allowClick=!1);if(i.allowTouchCallbacks&&a.emit("touchMove",l),!(l.targetTouches&&l.targetTouches.length>1)){n.currentX=p,n.currentY=c;var u,h=n.currentX-n.startX,f=n.currentY-n.startY;if(!(a.params.threshold&&Math.sqrt(Math.pow(h,2)+Math.pow(f,2))<a.params.threshold))if(void 0===i.isScrolling&&(a.isHorizontal()&&n.currentY===n.startY||a.isVertical()&&n.currentX===n.startX?i.isScrolling=!1:h*h+f*f>=25&&(u=180*Math.atan2(Math.abs(f),Math.abs(h))/Math.PI,i.isScrolling=a.isHorizontal()?u>r.touchAngle:90-u>r.touchAngle)),i.isScrolling&&a.emit("touchMoveOpposite",l),void 0===i.startMoving&&(n.currentX===n.startX&&n.currentY===n.startY||(i.startMoving=!0)),i.isScrolling)i.isTouched=!1;else if(i.startMoving){a.allowClick=!1,!r.cssMode&&l.cancelable&&l.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&l.stopPropagation(),i.isMoved||(r.loop&&a.loopFix(),i.startTranslate=a.getTranslate(),a.setTransition(0),a.animating&&a.$wrapperEl.trigger("webkitTransitionEnd transitionend"),i.allowMomentumBounce=!1,!r.grabCursor||!0!==a.allowSlideNext&&!0!==a.allowSlidePrev||a.setGrabCursor(!0),a.emit("sliderFirstMove",l)),a.emit("sliderMove",l),i.isMoved=!0;var v=a.isHorizontal()?h:f;n.diff=v,v*=r.touchRatio,o&&(v=-v),a.swipeDirection=v>0?"prev":"next",i.currentTranslate=v+i.startTranslate;var g=!0,w=r.resistanceRatio;if(r.touchReleaseOnEdges&&(w=0),v>0&&i.currentTranslate>a.minTranslate()?(g=!1,r.resistance&&(i.currentTranslate=a.minTranslate()-1+Math.pow(-a.minTranslate()+i.startTranslate+v,w))):v<0&&i.currentTranslate<a.maxTranslate()&&(g=!1,r.resistance&&(i.currentTranslate=a.maxTranslate()+1-Math.pow(a.maxTranslate()-i.startTranslate-v,w))),g&&(l.preventedByNestedSwiper=!0),!a.allowSlideNext&&"next"===a.swipeDirection&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!a.allowSlidePrev&&"prev"===a.swipeDirection&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),a.allowSlidePrev||a.allowSlideNext||(i.currentTranslate=i.startTranslate),r.threshold>0){if(!(Math.abs(v)>r.threshold||i.allowThresholdMove))return void(i.currentTranslate=i.startTranslate);if(!i.allowThresholdMove)return i.allowThresholdMove=!0,n.startX=n.currentX,n.startY=n.currentY,i.currentTranslate=i.startTranslate,void(n.diff=a.isHorizontal()?n.currentX-n.startX:n.currentY-n.startY)}r.followFinger&&!r.cssMode&&((r.freeMode||r.watchSlidesProgress||r.watchSlidesVisibility)&&(a.updateActiveIndex(),a.updateSlidesClasses()),r.freeMode&&(0===i.velocities.length&&i.velocities.push({position:n[a.isHorizontal()?"startX":"startY"],time:i.touchStartTime}),i.velocities.push({position:n[a.isHorizontal()?"currentX":"currentY"],time:E()})),a.updateProgress(i.currentTranslate),a.setTranslate(i.currentTranslate))}}}}else i.startMoving&&i.isScrolling&&a.emit("touchMoveOpposite",l)}function B(e){var t=this,a=t.touchEventsData,i=t.params,r=t.touches,s=t.rtlTranslate,n=t.$wrapperEl,o=t.slidesGrid,l=t.snapGrid,d=e;if(d.originalEvent&&(d=d.originalEvent),a.allowTouchCallbacks&&t.emit("touchEnd",d),a.allowTouchCallbacks=!1,!a.isTouched)return a.isMoved&&i.grabCursor&&t.setGrabCursor(!1),a.isMoved=!1,void(a.startMoving=!1);i.grabCursor&&a.isMoved&&a.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);var p,c=E(),u=c-a.touchStartTime;if(t.allowClick&&(t.updateClickedSlide(d),t.emit("tap click",d),u<300&&c-a.lastClickTime<300&&t.emit("doubleTap doubleClick",d)),a.lastClickTime=E(),x((function(){t.destroyed||(t.allowClick=!0)})),!a.isTouched||!a.isMoved||!t.swipeDirection||0===r.diff||a.currentTranslate===a.startTranslate)return a.isTouched=!1,a.isMoved=!1,void(a.startMoving=!1);if(a.isTouched=!1,a.isMoved=!1,a.startMoving=!1,p=i.followFinger?s?t.translate:-t.translate:-a.currentTranslate,!i.cssMode)if(i.freeMode){if(p<-t.minTranslate())return void t.slideTo(t.activeIndex);if(p>-t.maxTranslate())return void(t.slides.length<l.length?t.slideTo(l.length-1):t.slideTo(t.slides.length-1));if(i.freeModeMomentum){if(a.velocities.length>1){var h=a.velocities.pop(),f=a.velocities.pop(),v=h.position-f.position,m=h.time-f.time;t.velocity=v/m,t.velocity/=2,Math.abs(t.velocity)<i.freeModeMinimumVelocity&&(t.velocity=0),(m>150||E()-h.time>300)&&(t.velocity=0)}else t.velocity=0;t.velocity*=i.freeModeMomentumVelocityRatio,a.velocities.length=0;var g=1e3*i.freeModeMomentumRatio,w=t.velocity*g,b=t.translate+w;s&&(b=-b);var y,T,C=!1,S=20*Math.abs(t.velocity)*i.freeModeMomentumBounceRatio;if(b<t.maxTranslate())i.freeModeMomentumBounce?(b+t.maxTranslate()<-S&&(b=t.maxTranslate()-S),y=t.maxTranslate(),C=!0,a.allowMomentumBounce=!0):b=t.maxTranslate(),i.loop&&i.centeredSlides&&(T=!0);else if(b>t.minTranslate())i.freeModeMomentumBounce?(b-t.minTranslate()>S&&(b=t.minTranslate()+S),y=t.minTranslate(),C=!0,a.allowMomentumBounce=!0):b=t.minTranslate(),i.loop&&i.centeredSlides&&(T=!0);else if(i.freeModeSticky){for(var A,M=0;M<l.length;M+=1)if(l[M]>-b){A=M;break}b=-(b=Math.abs(l[A]-b)<Math.abs(l[A-1]-b)||"next"===t.swipeDirection?l[A]:l[A-1])}if(T&&t.once("transitionEnd",(function(){t.loopFix()})),0!==t.velocity){if(g=s?Math.abs((-b-t.translate)/t.velocity):Math.abs((b-t.translate)/t.velocity),i.freeModeSticky){var z=Math.abs((s?-b:b)-t.translate),k=t.slidesSizesGrid[t.activeIndex];g=z<k?i.speed:z<2*k?1.5*i.speed:2.5*i.speed}}else if(i.freeModeSticky)return void t.slideToClosest();i.freeModeMomentumBounce&&C?(t.updateProgress(y),t.setTransition(g),t.setTranslate(b),t.transitionStart(!0,t.swipeDirection),t.animating=!0,n.transitionEnd((function(){t&&!t.destroyed&&a.allowMomentumBounce&&(t.emit("momentumBounce"),t.setTransition(i.speed),setTimeout((function(){t.setTranslate(y),n.transitionEnd((function(){t&&!t.destroyed&&t.transitionEnd()}))}),0))}))):t.velocity?(t.updateProgress(b),t.setTransition(g),t.setTranslate(b),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,n.transitionEnd((function(){t&&!t.destroyed&&t.transitionEnd()})))):(t.emit("_freeModeNoMomentumRelease"),t.updateProgress(b)),t.updateActiveIndex(),t.updateSlidesClasses()}else{if(i.freeModeSticky)return void t.slideToClosest();i.freeMode&&t.emit("_freeModeNoMomentumRelease")}(!i.freeModeMomentum||u>=i.longSwipesMs)&&(t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses())}else{for(var P=0,L=t.slidesSizesGrid[0],$=0;$<o.length;$+=$<i.slidesPerGroupSkip?1:i.slidesPerGroup){var I=$<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;void 0!==o[$+I]?p>=o[$]&&p<o[$+I]&&(P=$,L=o[$+I]-o[$]):p>=o[$]&&(P=$,L=o[o.length-1]-o[o.length-2])}var O=(p-o[P])/L,B=P<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;if(u>i.longSwipesMs){if(!i.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(O>=i.longSwipesRatio?t.slideTo(P+B):t.slideTo(P)),"prev"===t.swipeDirection&&(O>1-i.longSwipesRatio?t.slideTo(P+B):t.slideTo(P))}else{if(!i.shortSwipes)return void t.slideTo(t.activeIndex);!t.navigation||d.target!==t.navigation.nextEl&&d.target!==t.navigation.prevEl?("next"===t.swipeDirection&&t.slideTo(P+B),"prev"===t.swipeDirection&&t.slideTo(P)):d.target===t.navigation.nextEl?t.slideTo(P+B):t.slideTo(P)}}}function D(){var e=this,t=e.params,a=e.el;if(!a||0!==a.offsetWidth){t.breakpoints&&e.setBreakpoint();var i=e.allowSlideNext,r=e.allowSlidePrev,s=e.snapGrid;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses(),("auto"===t.slidesPerView||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.run(),e.allowSlidePrev=r,e.allowSlideNext=i,e.params.watchOverflow&&s!==e.snapGrid&&e.checkOverflow()}}function G(e){var t=this;t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))}function N(){var e=this,t=e.wrapperEl,a=e.rtlTranslate;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=a?t.scrollWidth-t.offsetWidth-t.scrollLeft:-t.scrollLeft:e.translate=-t.scrollTop,-0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();var i=e.maxTranslate()-e.minTranslate();(0===i?0:(e.translate-e.minTranslate())/i)!==e.progress&&e.updateProgress(a?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}var Y=!1;function H(){}var X={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!1,nested:!1,width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,slidesPerGroupSkip:0,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1},R={modular:{useParams:function(e){var t=this;t.modules&&Object.keys(t.modules).forEach((function(a){var i=t.modules[a];i.params&&S(e,i.params)}))},useModules:function(e){void 0===e&&(e={});var t=this;t.modules&&Object.keys(t.modules).forEach((function(a){var i=t.modules[a],r=e[a]||{};i.on&&t.on&&Object.keys(i.on).forEach((function(e){t.on(e,i.on[e])})),i.create&&i.create.bind(t)(r)}))}},eventsEmitter:{on:function(e,t,a){var i=this;if("function"!=typeof t)return i;var r=a?"unshift":"push";return e.split(" ").forEach((function(e){i.eventsListeners[e]||(i.eventsListeners[e]=[]),i.eventsListeners[e][r](t)})),i},once:function(e,t,a){var i=this;if("function"!=typeof t)return i;function r(){i.off(e,r),r.__emitterProxy&&delete r.__emitterProxy;for(var a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];t.apply(i,s)}return r.__emitterProxy=t,i.on(e,r,a)},onAny:function(e,t){var a=this;if("function"!=typeof e)return a;var i=t?"unshift":"push";return a.eventsAnyListeners.indexOf(e)<0&&a.eventsAnyListeners[i](e),a},offAny:function(e){var t=this;if(!t.eventsAnyListeners)return t;var a=t.eventsAnyListeners.indexOf(e);return a>=0&&t.eventsAnyListeners.splice(a,1),t},off:function(e,t){var a=this;return a.eventsListeners?(e.split(" ").forEach((function(e){void 0===t?a.eventsListeners[e]=[]:a.eventsListeners[e]&&a.eventsListeners[e].forEach((function(i,r){(i===t||i.__emitterProxy&&i.__emitterProxy===t)&&a.eventsListeners[e].splice(r,1)}))})),a):a},emit:function(){var e,t,a,i=this;if(!i.eventsListeners)return i;for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return"string"==typeof s[0]||Array.isArray(s[0])?(e=s[0],t=s.slice(1,s.length),a=i):(e=s[0].events,t=s[0].data,a=s[0].context||i),t.unshift(a),(Array.isArray(e)?e:e.split(" ")).forEach((function(e){i.eventsAnyListeners&&i.eventsAnyListeners.length&&i.eventsAnyListeners.forEach((function(i){i.apply(a,[e].concat(t))})),i.eventsListeners&&i.eventsListeners[e]&&i.eventsListeners[e].forEach((function(e){e.apply(a,t)}))})),i}},update:{updateSize:function(){var e,t,a=this,i=a.$el;e=void 0!==a.params.width&&null!==a.params.width?a.params.width:i[0].clientWidth,t=void 0!==a.params.height&&null!==a.params.height?a.params.height:i[0].clientHeight,0===e&&a.isHorizontal()||0===t&&a.isVertical()||(e=e-parseInt(i.css("padding-left")||0,10)-parseInt(i.css("padding-right")||0,10),t=t-parseInt(i.css("padding-top")||0,10)-parseInt(i.css("padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),S(a,{width:e,height:t,size:a.isHorizontal()?e:t}))},updateSlides:function(){var e=this,t=function(t){return e.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]},a=function(e,a){return parseFloat(e.getPropertyValue(t(a))||0)},i=e.params,r=e.$wrapperEl,s=e.size,n=e.rtlTranslate,o=e.wrongRTL,l=e.virtual&&i.virtual.enabled,d=l?e.virtual.slides.length:e.slides.length,p=r.children("."+e.params.slideClass),c=l?e.virtual.slides.length:p.length,u=[],h=[],f=[],v=i.slidesOffsetBefore;"function"==typeof v&&(v=i.slidesOffsetBefore.call(e));var m=i.slidesOffsetAfter;"function"==typeof m&&(m=i.slidesOffsetAfter.call(e));var g=e.snapGrid.length,w=e.slidesGrid.length,b=i.spaceBetween,y=-v,x=0,E=0;if(void 0!==s){var T,C;"string"==typeof b&&b.indexOf("%")>=0&&(b=parseFloat(b.replace("%",""))/100*s),e.virtualSize=-b,n?p.css({marginLeft:"",marginTop:""}):p.css({marginRight:"",marginBottom:""}),i.slidesPerColumn>1&&(T=Math.floor(c/i.slidesPerColumn)===c/e.params.slidesPerColumn?c:Math.ceil(c/i.slidesPerColumn)*i.slidesPerColumn,"auto"!==i.slidesPerView&&"row"===i.slidesPerColumnFill&&(T=Math.max(T,i.slidesPerView*i.slidesPerColumn)));for(var A,M,z,k=i.slidesPerColumn,P=T/k,L=Math.floor(c/i.slidesPerColumn),$=0;$<c;$+=1){C=0;var I=p.eq($);if(i.slidesPerColumn>1){var O=void 0,B=void 0,D=void 0;if("row"===i.slidesPerColumnFill&&i.slidesPerGroup>1){var G=Math.floor($/(i.slidesPerGroup*i.slidesPerColumn)),N=$-i.slidesPerColumn*i.slidesPerGroup*G,Y=0===G?i.slidesPerGroup:Math.min(Math.ceil((c-G*k*i.slidesPerGroup)/k),i.slidesPerGroup);O=(B=N-(D=Math.floor(N/Y))*Y+G*i.slidesPerGroup)+D*T/k,I.css({"-webkit-box-ordinal-group":O,"-moz-box-ordinal-group":O,"-ms-flex-order":O,"-webkit-order":O,order:O})}else"column"===i.slidesPerColumnFill?(D=$-(B=Math.floor($/k))*k,(B>L||B===L&&D===k-1)&&(D+=1)>=k&&(D=0,B+=1)):B=$-(D=Math.floor($/P))*P;I.css(t("margin-top"),0!==D&&i.spaceBetween&&i.spaceBetween+"px")}if("none"!==I.css("display")){if("auto"===i.slidesPerView){var H=getComputedStyle(I[0]),X=I[0].style.transform,R=I[0].style.webkitTransform;if(X&&(I[0].style.transform="none"),R&&(I[0].style.webkitTransform="none"),i.roundLengths)C=e.isHorizontal()?I.outerWidth(!0):I.outerHeight(!0);else{var F=a(H,"width"),V=a(H,"padding-left"),W=a(H,"padding-right"),j=a(H,"margin-left"),q=a(H,"margin-right"),_=H.getPropertyValue("box-sizing");if(_&&"border-box"===_)C=F+j+q;else{var U=I[0],Z=U.clientWidth;C=F+V+W+j+q+(U.offsetWidth-Z)}}X&&(I[0].style.transform=X),R&&(I[0].style.webkitTransform=R),i.roundLengths&&(C=Math.floor(C))}else C=(s-(i.slidesPerView-1)*b)/i.slidesPerView,i.roundLengths&&(C=Math.floor(C)),p[$]&&(p[$].style[t("width")]=C+"px");p[$]&&(p[$].swiperSlideSize=C),f.push(C),i.centeredSlides?(y=y+C/2+x/2+b,0===x&&0!==$&&(y=y-s/2-b),0===$&&(y=y-s/2-b),Math.abs(y)<.001&&(y=0),i.roundLengths&&(y=Math.floor(y)),E%i.slidesPerGroup==0&&u.push(y),h.push(y)):(i.roundLengths&&(y=Math.floor(y)),(E-Math.min(e.params.slidesPerGroupSkip,E))%e.params.slidesPerGroup==0&&u.push(y),h.push(y),y=y+C+b),e.virtualSize+=C+b,x=C,E+=1}}if(e.virtualSize=Math.max(e.virtualSize,s)+m,n&&o&&("slide"===i.effect||"coverflow"===i.effect)&&r.css({width:e.virtualSize+i.spaceBetween+"px"}),i.setWrapperSize&&r.css(((M={})[t("width")]=e.virtualSize+i.spaceBetween+"px",M)),i.slidesPerColumn>1&&(e.virtualSize=(C+i.spaceBetween)*T,e.virtualSize=Math.ceil(e.virtualSize/i.slidesPerColumn)-i.spaceBetween,r.css(((z={})[t("width")]=e.virtualSize+i.spaceBetween+"px",z)),i.centeredSlides)){A=[];for(var Q=0;Q<u.length;Q+=1){var K=u[Q];i.roundLengths&&(K=Math.floor(K)),u[Q]<e.virtualSize+u[0]&&A.push(K)}u=A}if(!i.centeredSlides){A=[];for(var J=0;J<u.length;J+=1){var ee=u[J];i.roundLengths&&(ee=Math.floor(ee)),u[J]<=e.virtualSize-s&&A.push(ee)}u=A,Math.floor(e.virtualSize-s)-Math.floor(u[u.length-1])>1&&u.push(e.virtualSize-s)}if(0===u.length&&(u=[0]),0!==i.spaceBetween){var te,ae=e.isHorizontal()&&n?"marginLeft":t("marginRight");p.filter((function(e,t){return!i.cssMode||t!==p.length-1})).css(((te={})[ae]=b+"px",te))}if(i.centeredSlides&&i.centeredSlidesBounds){var ie=0;f.forEach((function(e){ie+=e+(i.spaceBetween?i.spaceBetween:0)}));var re=(ie-=i.spaceBetween)-s;u=u.map((function(e){return e<0?-v:e>re?re+m:e}))}if(i.centerInsufficientSlides){var se=0;if(f.forEach((function(e){se+=e+(i.spaceBetween?i.spaceBetween:0)})),(se-=i.spaceBetween)<s){var ne=(s-se)/2;u.forEach((function(e,t){u[t]=e-ne})),h.forEach((function(e,t){h[t]=e+ne}))}}S(e,{slides:p,snapGrid:u,slidesGrid:h,slidesSizesGrid:f}),c!==d&&e.emit("slidesLengthChange"),u.length!==g&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),h.length!==w&&e.emit("slidesGridLengthChange"),(i.watchSlidesProgress||i.watchSlidesVisibility)&&e.updateSlidesOffset()}},updateAutoHeight:function(e){var t,a=this,i=[],r=0;if("number"==typeof e?a.setTransition(e):!0===e&&a.setTransition(a.params.speed),"auto"!==a.params.slidesPerView&&a.params.slidesPerView>1)if(a.params.centeredSlides)a.visibleSlides.each((function(e){i.push(e)}));else for(t=0;t<Math.ceil(a.params.slidesPerView);t+=1){var s=a.activeIndex+t;if(s>a.slides.length)break;i.push(a.slides.eq(s)[0])}else i.push(a.slides.eq(a.activeIndex)[0]);for(t=0;t<i.length;t+=1)if(void 0!==i[t]){var n=i[t].offsetHeight;r=n>r?n:r}r&&a.$wrapperEl.css("height",r+"px")},updateSlidesOffset:function(){for(var e=this.slides,t=0;t<e.length;t+=1)e[t].swiperSlideOffset=this.isHorizontal()?e[t].offsetLeft:e[t].offsetTop},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);var t=this,a=t.params,i=t.slides,r=t.rtlTranslate;if(0!==i.length){void 0===i[0].swiperSlideOffset&&t.updateSlidesOffset();var s=-e;r&&(s=e),i.removeClass(a.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(var n=0;n<i.length;n+=1){var o=i[n],l=(s+(a.centeredSlides?t.minTranslate():0)-o.swiperSlideOffset)/(o.swiperSlideSize+a.spaceBetween);if(a.watchSlidesVisibility||a.centeredSlides&&a.autoHeight){var d=-(s-o.swiperSlideOffset),p=d+t.slidesSizesGrid[n];(d>=0&&d<t.size-1||p>1&&p<=t.size||d<=0&&p>=t.size)&&(t.visibleSlides.push(o),t.visibleSlidesIndexes.push(n),i.eq(n).addClass(a.slideVisibleClass))}o.progress=r?-l:l}t.visibleSlides=m(t.visibleSlides)}},updateProgress:function(e){var t=this;if(void 0===e){var a=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*a||0}var i=t.params,r=t.maxTranslate()-t.minTranslate(),s=t.progress,n=t.isBeginning,o=t.isEnd,l=n,d=o;0===r?(s=0,n=!0,o=!0):(n=(s=(e-t.minTranslate())/r)<=0,o=s>=1),S(t,{progress:s,isBeginning:n,isEnd:o}),(i.watchSlidesProgress||i.watchSlidesVisibility||i.centeredSlides&&i.autoHeight)&&t.updateSlidesProgress(e),n&&!l&&t.emit("reachBeginning toEdge"),o&&!d&&t.emit("reachEnd toEdge"),(l&&!n||d&&!o)&&t.emit("fromEdge"),t.emit("progress",s)},updateSlidesClasses:function(){var e,t=this,a=t.slides,i=t.params,r=t.$wrapperEl,s=t.activeIndex,n=t.realIndex,o=t.virtual&&i.virtual.enabled;a.removeClass(i.slideActiveClass+" "+i.slideNextClass+" "+i.slidePrevClass+" "+i.slideDuplicateActiveClass+" "+i.slideDuplicateNextClass+" "+i.slideDuplicatePrevClass),(e=o?t.$wrapperEl.find("."+i.slideClass+'[data-swiper-slide-index="'+s+'"]'):a.eq(s)).addClass(i.slideActiveClass),i.loop&&(e.hasClass(i.slideDuplicateClass)?r.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+n+'"]').addClass(i.slideDuplicateActiveClass):r.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+n+'"]').addClass(i.slideDuplicateActiveClass));var l=e.nextAll("."+i.slideClass).eq(0).addClass(i.slideNextClass);i.loop&&0===l.length&&(l=a.eq(0)).addClass(i.slideNextClass);var d=e.prevAll("."+i.slideClass).eq(0).addClass(i.slidePrevClass);i.loop&&0===d.length&&(d=a.eq(-1)).addClass(i.slidePrevClass),i.loop&&(l.hasClass(i.slideDuplicateClass)?r.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass):r.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass),d.hasClass(i.slideDuplicateClass)?r.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+d.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass):r.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+d.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass)),t.emitSlidesClasses()},updateActiveIndex:function(e){var t,a=this,i=a.rtlTranslate?a.translate:-a.translate,r=a.slidesGrid,s=a.snapGrid,n=a.params,o=a.activeIndex,l=a.realIndex,d=a.snapIndex,p=e;if(void 0===p){for(var c=0;c<r.length;c+=1)void 0!==r[c+1]?i>=r[c]&&i<r[c+1]-(r[c+1]-r[c])/2?p=c:i>=r[c]&&i<r[c+1]&&(p=c+1):i>=r[c]&&(p=c);n.normalizeSlideIndex&&(p<0||void 0===p)&&(p=0)}if(s.indexOf(i)>=0)t=s.indexOf(i);else{var u=Math.min(n.slidesPerGroupSkip,p);t=u+Math.floor((p-u)/n.slidesPerGroup)}if(t>=s.length&&(t=s.length-1),p!==o){var h=parseInt(a.slides.eq(p).attr("data-swiper-slide-index")||p,10);S(a,{snapIndex:t,realIndex:h,previousIndex:o,activeIndex:p}),a.emit("activeIndexChange"),a.emit("snapIndexChange"),l!==h&&a.emit("realIndexChange"),(a.initialized||a.params.runCallbacksOnInit)&&a.emit("slideChange")}else t!==d&&(a.snapIndex=t,a.emit("snapIndexChange"))},updateClickedSlide:function(e){var t,a=this,i=a.params,r=m(e.target).closest("."+i.slideClass)[0],s=!1;if(r)for(var n=0;n<a.slides.length;n+=1)if(a.slides[n]===r){s=!0,t=n;break}if(!r||!s)return a.clickedSlide=void 0,void(a.clickedIndex=void 0);a.clickedSlide=r,a.virtual&&a.params.virtual.enabled?a.clickedIndex=parseInt(m(r).attr("data-swiper-slide-index"),10):a.clickedIndex=t,i.slideToClickedSlide&&void 0!==a.clickedIndex&&a.clickedIndex!==a.activeIndex&&a.slideToClickedSlide()}},translate:{getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");var t=this,a=t.params,i=t.rtlTranslate,r=t.translate,s=t.$wrapperEl;if(a.virtualTranslate)return i?-r:r;if(a.cssMode)return r;var n=T(s[0],e);return i&&(n=-n),n||0},setTranslate:function(e,t){var a=this,i=a.rtlTranslate,r=a.params,s=a.$wrapperEl,n=a.wrapperEl,o=a.progress,l=0,d=0;a.isHorizontal()?l=i?-e:e:d=e,r.roundLengths&&(l=Math.floor(l),d=Math.floor(d)),r.cssMode?n[a.isHorizontal()?"scrollLeft":"scrollTop"]=a.isHorizontal()?-l:-d:r.virtualTranslate||s.transform("translate3d("+l+"px, "+d+"px, 0px)"),a.previousTranslate=a.translate,a.translate=a.isHorizontal()?l:d;var p=a.maxTranslate()-a.minTranslate();(0===p?0:(e-a.minTranslate())/p)!==o&&a.updateProgress(e),a.emit("setTranslate",a.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,a,i,r){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===a&&(a=!0),void 0===i&&(i=!0);var s=this,n=s.params,o=s.wrapperEl;if(s.animating&&n.preventInteractionOnTransition)return!1;var l,d=s.minTranslate(),p=s.maxTranslate();if(l=i&&e>d?d:i&&e<p?p:e,s.updateProgress(l),n.cssMode){var c,u=s.isHorizontal();return 0===t?o[u?"scrollLeft":"scrollTop"]=-l:o.scrollTo?o.scrollTo(((c={})[u?"left":"top"]=-l,c.behavior="smooth",c)):o[u?"scrollLeft":"scrollTop"]=-l,!0}return 0===t?(s.setTransition(0),s.setTranslate(l),a&&(s.emit("beforeTransitionStart",t,r),s.emit("transitionEnd"))):(s.setTransition(t),s.setTranslate(l),a&&(s.emit("beforeTransitionStart",t,r),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,a&&s.emit("transitionEnd"))}),s.$wrapperEl[0].addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onTranslateToWrapperTransitionEnd))),!0}},transition:{setTransition:function(e,t){var a=this;a.params.cssMode||a.$wrapperEl.transition(e),a.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);var a=this,i=a.activeIndex,r=a.params,s=a.previousIndex;if(!r.cssMode){r.autoHeight&&a.updateAutoHeight();var n=t;if(n||(n=i>s?"next":i<s?"prev":"reset"),a.emit("transitionStart"),e&&i!==s){if("reset"===n)return void a.emit("slideResetTransitionStart");a.emit("slideChangeTransitionStart"),"next"===n?a.emit("slideNextTransitionStart"):a.emit("slidePrevTransitionStart")}}},transitionEnd:function(e,t){void 0===e&&(e=!0);var a=this,i=a.activeIndex,r=a.previousIndex,s=a.params;if(a.animating=!1,!s.cssMode){a.setTransition(0);var n=t;if(n||(n=i>r?"next":i<r?"prev":"reset"),a.emit("transitionEnd"),e&&i!==r){if("reset"===n)return void a.emit("slideResetTransitionEnd");a.emit("slideChangeTransitionEnd"),"next"===n?a.emit("slideNextTransitionEnd"):a.emit("slidePrevTransitionEnd")}}}},slide:{slideTo:function(e,t,a,i){if(void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===a&&(a=!0),"number"!=typeof e&&"string"!=typeof e)throw new Error("The 'index' argument cannot have type other than 'number' or 'string'. ["+typeof e+"] given.");if("string"==typeof e){var r=parseInt(e,10);if(!isFinite(r))throw new Error("The passed-in 'index' (string) couldn't be converted to 'number'. ["+e+"] given.");e=r}var s=this,n=e;n<0&&(n=0);var o=s.params,l=s.snapGrid,d=s.slidesGrid,p=s.previousIndex,c=s.activeIndex,u=s.rtlTranslate,h=s.wrapperEl;if(s.animating&&o.preventInteractionOnTransition)return!1;var f=Math.min(s.params.slidesPerGroupSkip,n),v=f+Math.floor((n-f)/s.params.slidesPerGroup);v>=l.length&&(v=l.length-1),(c||o.initialSlide||0)===(p||0)&&a&&s.emit("beforeSlideChangeStart");var m,g=-l[v];if(s.updateProgress(g),o.normalizeSlideIndex)for(var w=0;w<d.length;w+=1){var b=-Math.floor(100*g),y=Math.floor(100*d[w]),x=Math.floor(100*d[w+1]);void 0!==d[w+1]?b>=y&&b<x-(x-y)/2?n=w:b>=y&&b<x&&(n=w+1):b>=y&&(n=w)}if(s.initialized&&n!==c){if(!s.allowSlideNext&&g<s.translate&&g<s.minTranslate())return!1;if(!s.allowSlidePrev&&g>s.translate&&g>s.maxTranslate()&&(c||0)!==n)return!1}if(m=n>c?"next":n<c?"prev":"reset",u&&-g===s.translate||!u&&g===s.translate)return s.updateActiveIndex(n),o.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),"slide"!==o.effect&&s.setTranslate(g),"reset"!==m&&(s.transitionStart(a,m),s.transitionEnd(a,m)),!1;if(o.cssMode){var E,T=s.isHorizontal(),C=-g;return u&&(C=h.scrollWidth-h.offsetWidth-C),0===t?h[T?"scrollLeft":"scrollTop"]=C:h.scrollTo?h.scrollTo(((E={})[T?"left":"top"]=C,E.behavior="smooth",E)):h[T?"scrollLeft":"scrollTop"]=C,!0}return 0===t?(s.setTransition(0),s.setTranslate(g),s.updateActiveIndex(n),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,i),s.transitionStart(a,m),s.transitionEnd(a,m)):(s.setTransition(t),s.setTranslate(g),s.updateActiveIndex(n),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,i),s.transitionStart(a,m),s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(a,m))}),s.$wrapperEl[0].addEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd))),!0},slideToLoop:function(e,t,a,i){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===a&&(a=!0);var r=this,s=e;return r.params.loop&&(s+=r.loopedSlides),r.slideTo(s,t,a,i)},slideNext:function(e,t,a){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var i=this,r=i.params,s=i.animating,n=i.activeIndex<r.slidesPerGroupSkip?1:r.slidesPerGroup;if(r.loop){if(s&&r.loopPreventsSlide)return!1;i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft}return i.slideTo(i.activeIndex+n,e,t,a)},slidePrev:function(e,t,a){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var i=this,r=i.params,s=i.animating,n=i.snapGrid,o=i.slidesGrid,l=i.rtlTranslate;if(r.loop){if(s&&r.loopPreventsSlide)return!1;i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft}function d(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}var p=d(l?i.translate:-i.translate),c=n.map((function(e){return d(e)}));n[c.indexOf(p)];var u,h=n[c.indexOf(p)-1];return void 0===h&&r.cssMode&&n.forEach((function(e){!h&&p>=e&&(h=e)})),void 0!==h&&(u=o.indexOf(h))<0&&(u=i.activeIndex-1),i.slideTo(u,e,t,a)},slideReset:function(e,t,a){return void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),this.slideTo(this.activeIndex,e,t,a)},slideToClosest:function(e,t,a,i){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),void 0===i&&(i=.5);var r=this,s=r.activeIndex,n=Math.min(r.params.slidesPerGroupSkip,s),o=n+Math.floor((s-n)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[o]){var d=r.snapGrid[o];l-d>(r.snapGrid[o+1]-d)*i&&(s+=r.params.slidesPerGroup)}else{var p=r.snapGrid[o-1];l-p<=(r.snapGrid[o]-p)*i&&(s-=r.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,r.slidesGrid.length-1),r.slideTo(s,e,t,a)},slideToClickedSlide:function(){var e,t=this,a=t.params,i=t.$wrapperEl,r="auto"===a.slidesPerView?t.slidesPerViewDynamic():a.slidesPerView,s=t.clickedIndex;if(a.loop){if(t.animating)return;e=parseInt(m(t.clickedSlide).attr("data-swiper-slide-index"),10),a.centeredSlides?s<t.loopedSlides-r/2||s>t.slides.length-t.loopedSlides+r/2?(t.loopFix(),s=i.children("."+a.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+a.slideDuplicateClass+")").eq(0).index(),x((function(){t.slideTo(s)}))):t.slideTo(s):s>t.slides.length-r?(t.loopFix(),s=i.children("."+a.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+a.slideDuplicateClass+")").eq(0).index(),x((function(){t.slideTo(s)}))):t.slideTo(s)}else t.slideTo(s)}},loop:{loopCreate:function(){var e=this,t=s(),a=e.params,i=e.$wrapperEl;i.children("."+a.slideClass+"."+a.slideDuplicateClass).remove();var r=i.children("."+a.slideClass);if(a.loopFillGroupWithBlank){var n=a.slidesPerGroup-r.length%a.slidesPerGroup;if(n!==a.slidesPerGroup){for(var o=0;o<n;o+=1){var l=m(t.createElement("div")).addClass(a.slideClass+" "+a.slideBlankClass);i.append(l)}r=i.children("."+a.slideClass)}}"auto"!==a.slidesPerView||a.loopedSlides||(a.loopedSlides=r.length),e.loopedSlides=Math.ceil(parseFloat(a.loopedSlides||a.slidesPerView,10)),e.loopedSlides+=a.loopAdditionalSlides,e.loopedSlides>r.length&&(e.loopedSlides=r.length);var d=[],p=[];r.each((function(t,a){var i=m(t);a<e.loopedSlides&&p.push(t),a<r.length&&a>=r.length-e.loopedSlides&&d.push(t),i.attr("data-swiper-slide-index",a)}));for(var c=0;c<p.length;c+=1)i.append(m(p[c].cloneNode(!0)).addClass(a.slideDuplicateClass));for(var u=d.length-1;u>=0;u-=1)i.prepend(m(d[u].cloneNode(!0)).addClass(a.slideDuplicateClass))},loopFix:function(){var e=this;e.emit("beforeLoopFix");var t,a=e.activeIndex,i=e.slides,r=e.loopedSlides,s=e.allowSlidePrev,n=e.allowSlideNext,o=e.snapGrid,l=e.rtlTranslate;e.allowSlidePrev=!0,e.allowSlideNext=!0;var d=-o[a]-e.getTranslate();a<r?(t=i.length-3*r+a,t+=r,e.slideTo(t,0,!1,!0)&&0!==d&&e.setTranslate((l?-e.translate:e.translate)-d)):a>=i.length-r&&(t=-i.length+a+r,t+=r,e.slideTo(t,0,!1,!0)&&0!==d&&e.setTranslate((l?-e.translate:e.translate)-d)),e.allowSlidePrev=s,e.allowSlideNext=n,e.emit("loopFix")},loopDestroy:function(){var e=this,t=e.$wrapperEl,a=e.params,i=e.slides;t.children("."+a.slideClass+"."+a.slideDuplicateClass+",."+a.slideClass+"."+a.slideBlankClass).remove(),i.removeAttr("data-swiper-slide-index")}},grabCursor:{setGrabCursor:function(e){var t=this;if(!(t.support.touch||!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)){var a=t.el;a.style.cursor="move",a.style.cursor=e?"-webkit-grabbing":"-webkit-grab",a.style.cursor=e?"-moz-grabbin":"-moz-grab",a.style.cursor=e?"grabbing":"grab"}},unsetGrabCursor:function(){var e=this;e.support.touch||e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.el.style.cursor="")}},manipulation:{appendSlide:function(e){var t=this,a=t.$wrapperEl,i=t.params;if(i.loop&&t.loopDestroy(),"object"==typeof e&&"length"in e)for(var r=0;r<e.length;r+=1)e[r]&&a.append(e[r]);else a.append(e);i.loop&&t.loopCreate(),i.observer&&t.support.observer||t.update()},prependSlide:function(e){var t=this,a=t.params,i=t.$wrapperEl,r=t.activeIndex;a.loop&&t.loopDestroy();var s=r+1;if("object"==typeof e&&"length"in e){for(var n=0;n<e.length;n+=1)e[n]&&i.prepend(e[n]);s=r+e.length}else i.prepend(e);a.loop&&t.loopCreate(),a.observer&&t.support.observer||t.update(),t.slideTo(s,0,!1)},addSlide:function(e,t){var a=this,i=a.$wrapperEl,r=a.params,s=a.activeIndex;r.loop&&(s-=a.loopedSlides,a.loopDestroy(),a.slides=i.children("."+r.slideClass));var n=a.slides.length;if(e<=0)a.prependSlide(t);else if(e>=n)a.appendSlide(t);else{for(var o=s>e?s+1:s,l=[],d=n-1;d>=e;d-=1){var p=a.slides.eq(d);p.remove(),l.unshift(p)}if("object"==typeof t&&"length"in t){for(var c=0;c<t.length;c+=1)t[c]&&i.append(t[c]);o=s>e?s+t.length:s}else i.append(t);for(var u=0;u<l.length;u+=1)i.append(l[u]);r.loop&&a.loopCreate(),r.observer&&a.support.observer||a.update(),r.loop?a.slideTo(o+a.loopedSlides,0,!1):a.slideTo(o,0,!1)}},removeSlide:function(e){var t=this,a=t.params,i=t.$wrapperEl,r=t.activeIndex;a.loop&&(r-=t.loopedSlides,t.loopDestroy(),t.slides=i.children("."+a.slideClass));var s,n=r;if("object"==typeof e&&"length"in e){for(var o=0;o<e.length;o+=1)s=e[o],t.slides[s]&&t.slides.eq(s).remove(),s<n&&(n-=1);n=Math.max(n,0)}else s=e,t.slides[s]&&t.slides.eq(s).remove(),s<n&&(n-=1),n=Math.max(n,0);a.loop&&t.loopCreate(),a.observer&&t.support.observer||t.update(),a.loop?t.slideTo(n+t.loopedSlides,0,!1):t.slideTo(n,0,!1)},removeAllSlides:function(){for(var e=[],t=0;t<this.slides.length;t+=1)e.push(t);this.removeSlide(e)}},events:{attachEvents:function(){var e=this,t=s(),a=e.params,i=e.touchEvents,r=e.el,n=e.wrapperEl,o=e.device,l=e.support;e.onTouchStart=I.bind(e),e.onTouchMove=O.bind(e),e.onTouchEnd=B.bind(e),a.cssMode&&(e.onScroll=N.bind(e)),e.onClick=G.bind(e);var d=!!a.nested;if(!l.touch&&l.pointerEvents)r.addEventListener(i.start,e.onTouchStart,!1),t.addEventListener(i.move,e.onTouchMove,d),t.addEventListener(i.end,e.onTouchEnd,!1);else{if(l.touch){var p=!("touchstart"!==i.start||!l.passiveListener||!a.passiveListeners)&&{passive:!0,capture:!1};r.addEventListener(i.start,e.onTouchStart,p),r.addEventListener(i.move,e.onTouchMove,l.passiveListener?{passive:!1,capture:d}:d),r.addEventListener(i.end,e.onTouchEnd,p),i.cancel&&r.addEventListener(i.cancel,e.onTouchEnd,p),Y||(t.addEventListener("touchstart",H),Y=!0)}(a.simulateTouch&&!o.ios&&!o.android||a.simulateTouch&&!l.touch&&o.ios)&&(r.addEventListener("mousedown",e.onTouchStart,!1),t.addEventListener("mousemove",e.onTouchMove,d),t.addEventListener("mouseup",e.onTouchEnd,!1))}(a.preventClicks||a.preventClicksPropagation)&&r.addEventListener("click",e.onClick,!0),a.cssMode&&n.addEventListener("scroll",e.onScroll),a.updateOnWindowResize?e.on(o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",D,!0):e.on("observerUpdate",D,!0)},detachEvents:function(){var e=this,t=s(),a=e.params,i=e.touchEvents,r=e.el,n=e.wrapperEl,o=e.device,l=e.support,d=!!a.nested;if(!l.touch&&l.pointerEvents)r.removeEventListener(i.start,e.onTouchStart,!1),t.removeEventListener(i.move,e.onTouchMove,d),t.removeEventListener(i.end,e.onTouchEnd,!1);else{if(l.touch){var p=!("onTouchStart"!==i.start||!l.passiveListener||!a.passiveListeners)&&{passive:!0,capture:!1};r.removeEventListener(i.start,e.onTouchStart,p),r.removeEventListener(i.move,e.onTouchMove,d),r.removeEventListener(i.end,e.onTouchEnd,p),i.cancel&&r.removeEventListener(i.cancel,e.onTouchEnd,p)}(a.simulateTouch&&!o.ios&&!o.android||a.simulateTouch&&!l.touch&&o.ios)&&(r.removeEventListener("mousedown",e.onTouchStart,!1),t.removeEventListener("mousemove",e.onTouchMove,d),t.removeEventListener("mouseup",e.onTouchEnd,!1))}(a.preventClicks||a.preventClicksPropagation)&&r.removeEventListener("click",e.onClick,!0),a.cssMode&&n.removeEventListener("scroll",e.onScroll),e.off(o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",D)}},breakpoints:{setBreakpoint:function(){var e=this,t=e.activeIndex,a=e.initialized,i=e.loopedSlides,r=void 0===i?0:i,s=e.params,n=e.$el,o=s.breakpoints;if(o&&(!o||0!==Object.keys(o).length)){var l=e.getBreakpoint(o,e.params.breakpointsBase,e.el);if(l&&e.currentBreakpoint!==l){var d=l in o?o[l]:void 0;d&&["slidesPerView","spaceBetween","slidesPerGroup","slidesPerGroupSkip","slidesPerColumn"].forEach((function(e){var t=d[e];void 0!==t&&(d[e]="slidesPerView"!==e||"AUTO"!==t&&"auto"!==t?"slidesPerView"===e?parseFloat(t):parseInt(t,10):"auto")}));var p=d||e.originalParams,c=s.slidesPerColumn>1,u=p.slidesPerColumn>1;c&&!u?(n.removeClass(s.containerModifierClass+"multirow "+s.containerModifierClass+"multirow-column"),e.emitContainerClasses()):!c&&u&&(n.addClass(s.containerModifierClass+"multirow"),"column"===p.slidesPerColumnFill&&n.addClass(s.containerModifierClass+"multirow-column"),e.emitContainerClasses());var h=p.direction&&p.direction!==s.direction,f=s.loop&&(p.slidesPerView!==s.slidesPerView||h);h&&a&&e.changeDirection(),S(e.params,p),S(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),e.currentBreakpoint=l,e.emit("_beforeBreakpoint",p),f&&a&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-r+e.loopedSlides,0,!1)),e.emit("breakpoint",p)}}},getBreakpoint:function(e,t,a){if(void 0===t&&(t="window"),e&&("container"!==t||a)){var i=!1,r=o(),s="window"===t?r.innerWidth:a.clientWidth,n="window"===t?r.innerHeight:a.clientHeight,l=Object.keys(e).map((function(e){if("string"==typeof e&&0===e.indexOf("@")){var t=parseFloat(e.substr(1));return{value:n*t,point:e}}return{value:e,point:e}}));l.sort((function(e,t){return parseInt(e.value,10)-parseInt(t.value,10)}));for(var d=0;d<l.length;d+=1){var p=l[d],c=p.point;p.value<=s&&(i=c)}return i||"max"}}},checkOverflow:{checkOverflow:function(){var e=this,t=e.params,a=e.isLocked,i=e.slides.length>0&&t.slidesOffsetBefore+t.spaceBetween*(e.slides.length-1)+e.slides[0].offsetWidth*e.slides.length;t.slidesOffsetBefore&&t.slidesOffsetAfter&&i?e.isLocked=i<=e.size:e.isLocked=1===e.snapGrid.length,e.allowSlideNext=!e.isLocked,e.allowSlidePrev=!e.isLocked,a!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock"),a&&a!==e.isLocked&&(e.isEnd=!1,e.navigation&&e.navigation.update())}},classes:{addClasses:function(){var e,t,a,i=this,r=i.classNames,s=i.params,n=i.rtl,o=i.$el,l=i.device,d=i.support,p=(e=["initialized",s.direction,{"pointer-events":d.pointerEvents&&!d.touch},{"free-mode":s.freeMode},{autoheight:s.autoHeight},{rtl:n},{multirow:s.slidesPerColumn>1},{"multirow-column":s.slidesPerColumn>1&&"column"===s.slidesPerColumnFill},{android:l.android},{ios:l.ios},{"css-mode":s.cssMode}],t=s.containerModifierClass,a=[],e.forEach((function(e){"object"==typeof e?Object.keys(e).forEach((function(i){e[i]&&a.push(t+i)})):"string"==typeof e&&a.push(t+e)})),a);r.push.apply(r,p),o.addClass([].concat(r).join(" ")),i.emitContainerClasses()},removeClasses:function(){var e=this,t=e.$el,a=e.classNames;t.removeClass(a.join(" ")),e.emitContainerClasses()}},images:{loadImage:function(e,t,a,i,r,s){var n,l=o();function d(){s&&s()}m(e).parent("picture")[0]||e.complete&&r?d():t?((n=new l.Image).onload=d,n.onerror=d,i&&(n.sizes=i),a&&(n.srcset=a),t&&(n.src=t)):d()},preloadImages:function(){var e=this;function t(){null!=e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(var a=0;a<e.imagesToLoad.length;a+=1){var i=e.imagesToLoad[a];e.loadImage(i,i.currentSrc||i.getAttribute("src"),i.srcset||i.getAttribute("srcset"),i.sizes||i.getAttribute("sizes"),!0,t)}}}},F={},V=function(){function t(){for(var e,a,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];if(1===r.length&&r[0].constructor&&"Object"===Object.prototype.toString.call(r[0]).slice(8,-1)?a=r[0]:(e=r[0],a=r[1]),a||(a={}),a=S({},a),e&&!a.el&&(a.el=e),a.el&&m(a.el).length>1){var n=[];return m(a.el).each((function(e){var i=S({},a,{el:e});n.push(new t(i))})),n}var o=this;o.__swiper__=!0,o.support=M(),o.device=z({userAgent:a.userAgent}),o.browser=k(),o.eventsListeners={},o.eventsAnyListeners=[],void 0===o.modules&&(o.modules={}),Object.keys(o.modules).forEach((function(e){var t=o.modules[e];if(t.params){var i=Object.keys(t.params)[0],r=t.params[i];if("object"!=typeof r||null===r)return;if(!(i in a)||!("enabled"in r))return;!0===a[i]&&(a[i]={enabled:!0}),"object"!=typeof a[i]||"enabled"in a[i]||(a[i].enabled=!0),a[i]||(a[i]={enabled:!1})}}));var l,d,p=S({},X);return o.useParams(p),o.params=S({},p,F,a),o.originalParams=S({},o.params),o.passedParams=S({},a),o.params&&o.params.on&&Object.keys(o.params.on).forEach((function(e){o.on(e,o.params.on[e])})),o.params&&o.params.onAny&&o.onAny(o.params.onAny),o.$=m,S(o,{el:e,classNames:[],slides:m(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===o.params.direction},isVertical:function(){return"vertical"===o.params.direction},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEvents:(l=["touchstart","touchmove","touchend","touchcancel"],d=["mousedown","mousemove","mouseup"],o.support.pointerEvents&&(d=["pointerdown","pointermove","pointerup"]),o.touchEventsTouch={start:l[0],move:l[1],end:l[2],cancel:l[3]},o.touchEventsDesktop={start:d[0],move:d[1],end:d[2]},o.support.touch||!o.params.simulateTouch?o.touchEventsTouch:o.touchEventsDesktop),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,formElements:"input, select, option, textarea, button, video, label",lastClickTime:E(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.useModules(),o.emit("_swiper"),o.params.init&&o.init(),o}var a,i,r=t.prototype;return r.emitContainerClasses=function(){var e=this;if(e.params._emitClasses&&e.el){var t=e.el.className.split(" ").filter((function(t){return 0===t.indexOf("swiper-container")||0===t.indexOf(e.params.containerModifierClass)}));e.emit("_containerClasses",t.join(" "))}},r.getSlideClasses=function(e){var t=this;return e.className.split(" ").filter((function(e){return 0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass)})).join(" ")},r.emitSlidesClasses=function(){var e=this;if(e.params._emitClasses&&e.el){var t=[];e.slides.each((function(a){var i=e.getSlideClasses(a);t.push({slideEl:a,classNames:i}),e.emit("_slideClass",a,i)})),e.emit("_slideClasses",t)}},r.slidesPerViewDynamic=function(){var e=this,t=e.params,a=e.slides,i=e.slidesGrid,r=e.size,s=e.activeIndex,n=1;if(t.centeredSlides){for(var o,l=a[s].swiperSlideSize,d=s+1;d<a.length;d+=1)a[d]&&!o&&(n+=1,(l+=a[d].swiperSlideSize)>r&&(o=!0));for(var p=s-1;p>=0;p-=1)a[p]&&!o&&(n+=1,(l+=a[p].swiperSlideSize)>r&&(o=!0))}else for(var c=s+1;c<a.length;c+=1)i[c]-i[s]<r&&(n+=1);return n},r.update=function(){var e=this;if(e&&!e.destroyed){var t=e.snapGrid,a=e.params;a.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode?(i(),e.params.autoHeight&&e.updateAutoHeight()):(("auto"===e.params.slidesPerView||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0))||i(),a.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}function i(){var t=e.rtlTranslate?-1*e.translate:e.translate,a=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(a),e.updateActiveIndex(),e.updateSlidesClasses()}},r.changeDirection=function(e,t){void 0===t&&(t=!0);var a=this,i=a.params.direction;return e||(e="horizontal"===i?"vertical":"horizontal"),e===i||"horizontal"!==e&&"vertical"!==e||(a.$el.removeClass(""+a.params.containerModifierClass+i).addClass(""+a.params.containerModifierClass+e),a.emitContainerClasses(),a.params.direction=e,a.slides.each((function(t){"vertical"===e?t.style.width="":t.style.height=""})),a.emit("changeDirection"),t&&a.update()),a},r.mount=function(e){var t=this;if(t.mounted)return!0;var a,i=m(e||t.params.el);return!!(e=i[0])&&(e.swiper=t,e&&e.shadowRoot&&e.shadowRoot.querySelector?(a=m(e.shadowRoot.querySelector("."+t.params.wrapperClass))).children=function(e){return i.children(e)}:a=i.children("."+t.params.wrapperClass),S(t,{$el:i,el:e,$wrapperEl:a,wrapperEl:a[0],mounted:!0,rtl:"rtl"===e.dir.toLowerCase()||"rtl"===i.css("direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===e.dir.toLowerCase()||"rtl"===i.css("direction")),wrongRTL:"-webkit-box"===a.css("display")}),!0)},r.init=function(e){var t=this;return t.initialized||!1===t.mount(e)||(t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.params.loop&&t.loopCreate(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.setGrabCursor(),t.params.preloadImages&&t.preloadImages(),t.params.loop?t.slideTo(t.params.initialSlide+t.loopedSlides,0,t.params.runCallbacksOnInit):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit),t.attachEvents(),t.initialized=!0,t.emit("init"),t.emit("afterInit")),t},r.destroy=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var a,i=this,r=i.params,s=i.$el,n=i.$wrapperEl,o=i.slides;return void 0===i.params||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),r.loop&&i.loopDestroy(),t&&(i.removeClasses(),s.removeAttr("style"),n.removeAttr("style"),o&&o.length&&o.removeClass([r.slideVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),i.emit("destroy"),Object.keys(i.eventsListeners).forEach((function(e){i.off(e)})),!1!==e&&(i.$el[0].swiper=null,a=i,Object.keys(a).forEach((function(e){try{a[e]=null}catch(e){}try{delete a[e]}catch(e){}}))),i.destroyed=!0),null},t.extendDefaults=function(e){S(F,e)},t.installModule=function(e){t.prototype.modules||(t.prototype.modules={});var a=e.name||Object.keys(t.prototype.modules).length+"_"+E();t.prototype.modules[a]=e},t.use=function(e){return Array.isArray(e)?(e.forEach((function(e){return t.installModule(e)})),t):(t.installModule(e),t)},a=t,i=[{key:"extendedDefaults",get:function(){return F}},{key:"defaults",get:function(){return X}}],null&&e(a.prototype,null),i&&e(a,i),t}();Object.keys(R).forEach((function(e){Object.keys(R[e]).forEach((function(t){V.prototype[t]=R[e][t]}))})),V.use([P,$]);var W={update:function(e){var t=this,a=t.params,i=a.slidesPerView,r=a.slidesPerGroup,s=a.centeredSlides,n=t.params.virtual,o=n.addSlidesBefore,l=n.addSlidesAfter,d=t.virtual,p=d.from,c=d.to,u=d.slides,h=d.slidesGrid,f=d.renderSlide,v=d.offset;t.updateActiveIndex();var m,g,w,b=t.activeIndex||0;m=t.rtlTranslate?"right":t.isHorizontal()?"left":"top",s?(g=Math.floor(i/2)+r+l,w=Math.floor(i/2)+r+o):(g=i+(r-1)+l,w=r+o);var y=Math.max((b||0)-w,0),x=Math.min((b||0)+g,u.length-1),E=(t.slidesGrid[y]||0)-(t.slidesGrid[0]||0);function T(){t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.lazy&&t.params.lazy.enabled&&t.lazy.load()}if(S(t.virtual,{from:y,to:x,offset:E,slidesGrid:t.slidesGrid}),p===y&&c===x&&!e)return t.slidesGrid!==h&&E!==v&&t.slides.css(m,E+"px"),void t.updateProgress();if(t.params.virtual.renderExternal)return t.params.virtual.renderExternal.call(t,{offset:E,from:y,to:x,slides:function(){for(var e=[],t=y;t<=x;t+=1)e.push(u[t]);return e}()}),void(t.params.virtual.renderExternalUpdate&&T());var C=[],A=[];if(e)t.$wrapperEl.find("."+t.params.slideClass).remove();else for(var M=p;M<=c;M+=1)(M<y||M>x)&&t.$wrapperEl.find("."+t.params.slideClass+'[data-swiper-slide-index="'+M+'"]').remove();for(var z=0;z<u.length;z+=1)z>=y&&z<=x&&(void 0===c||e?A.push(z):(z>c&&A.push(z),z<p&&C.push(z)));A.forEach((function(e){t.$wrapperEl.append(f(u[e],e))})),C.sort((function(e,t){return t-e})).forEach((function(e){t.$wrapperEl.prepend(f(u[e],e))})),t.$wrapperEl.children(".swiper-slide").css(m,E+"px"),T()},renderSlide:function(e,t){var a=this,i=a.params.virtual;if(i.cache&&a.virtual.cache[t])return a.virtual.cache[t];var r=i.renderSlide?m(i.renderSlide.call(a,e,t)):m('<div class="'+a.params.slideClass+'" data-swiper-slide-index="'+t+'">'+e+"</div>");return r.attr("data-swiper-slide-index")||r.attr("data-swiper-slide-index",t),i.cache&&(a.virtual.cache[t]=r),r},appendSlide:function(e){var t=this;if("object"==typeof e&&"length"in e)for(var a=0;a<e.length;a+=1)e[a]&&t.virtual.slides.push(e[a]);else t.virtual.slides.push(e);t.virtual.update(!0)},prependSlide:function(e){var t=this,a=t.activeIndex,i=a+1,r=1;if(Array.isArray(e)){for(var s=0;s<e.length;s+=1)e[s]&&t.virtual.slides.unshift(e[s]);i=a+e.length,r=e.length}else t.virtual.slides.unshift(e);if(t.params.virtual.cache){var n=t.virtual.cache,o={};Object.keys(n).forEach((function(e){var t=n[e],a=t.attr("data-swiper-slide-index");a&&t.attr("data-swiper-slide-index",parseInt(a,10)+1),o[parseInt(e,10)+r]=t})),t.virtual.cache=o}t.virtual.update(!0),t.slideTo(i,0)},removeSlide:function(e){var t=this;if(null!=e){var a=t.activeIndex;if(Array.isArray(e))for(var i=e.length-1;i>=0;i-=1)t.virtual.slides.splice(e[i],1),t.params.virtual.cache&&delete t.virtual.cache[e[i]],e[i]<a&&(a-=1),a=Math.max(a,0);else t.virtual.slides.splice(e,1),t.params.virtual.cache&&delete t.virtual.cache[e],e<a&&(a-=1),a=Math.max(a,0);t.virtual.update(!0),t.slideTo(a,0)}},removeAllSlides:function(){var e=this;e.virtual.slides=[],e.params.virtual.cache&&(e.virtual.cache={}),e.virtual.update(!0),e.slideTo(0,0)}},j={name:"virtual",params:{virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}},create:function(){A(this,{virtual:t({},W,{slides:this.params.virtual.slides,cache:{}})})},on:{beforeInit:function(e){if(e.params.virtual.enabled){e.classNames.push(e.params.containerModifierClass+"virtual");var t={watchSlidesProgress:!0};S(e.params,t),S(e.originalParams,t),e.params.initialSlide||e.virtual.update()}},setTranslate:function(e){e.params.virtual.enabled&&e.virtual.update()}}},q={handle:function(e){var t=this,a=o(),i=s(),r=t.rtlTranslate,n=e;n.originalEvent&&(n=n.originalEvent);var l=n.keyCode||n.charCode,d=t.params.keyboard.pageUpDown,p=d&&33===l,c=d&&34===l,u=37===l,h=39===l,f=38===l,v=40===l;if(!t.allowSlideNext&&(t.isHorizontal()&&h||t.isVertical()&&v||c))return!1;if(!t.allowSlidePrev&&(t.isHorizontal()&&u||t.isVertical()&&f||p))return!1;if(!(n.shiftKey||n.altKey||n.ctrlKey||n.metaKey||i.activeElement&&i.activeElement.nodeName&&("input"===i.activeElement.nodeName.toLowerCase()||"textarea"===i.activeElement.nodeName.toLowerCase()))){if(t.params.keyboard.onlyInViewport&&(p||c||u||h||f||v)){var m=!1;if(t.$el.parents("."+t.params.slideClass).length>0&&0===t.$el.parents("."+t.params.slideActiveClass).length)return;var g=t.$el,w=g[0].clientWidth,b=g[0].clientHeight,y=a.innerWidth,x=a.innerHeight,E=t.$el.offset();r&&(E.left-=t.$el[0].scrollLeft);for(var T=[[E.left,E.top],[E.left+w,E.top],[E.left,E.top+b],[E.left+w,E.top+b]],C=0;C<T.length;C+=1){var S=T[C];if(S[0]>=0&&S[0]<=y&&S[1]>=0&&S[1]<=x){if(0===S[0]&&0===S[1])continue;m=!0}}if(!m)return}t.isHorizontal()?((p||c||u||h)&&(n.preventDefault?n.preventDefault():n.returnValue=!1),((c||h)&&!r||(p||u)&&r)&&t.slideNext(),((p||u)&&!r||(c||h)&&r)&&t.slidePrev()):((p||c||f||v)&&(n.preventDefault?n.preventDefault():n.returnValue=!1),(c||v)&&t.slideNext(),(p||f)&&t.slidePrev()),t.emit("keyPress",l)}},enable:function(){var e=this,t=s();e.keyboard.enabled||(m(t).on("keydown",e.keyboard.handle),e.keyboard.enabled=!0)},disable:function(){var e=this,t=s();e.keyboard.enabled&&(m(t).off("keydown",e.keyboard.handle),e.keyboard.enabled=!1)}},_={name:"keyboard",params:{keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}},create:function(){A(this,{keyboard:t({enabled:!1},q)})},on:{init:function(e){e.params.keyboard.enabled&&e.keyboard.enable()},destroy:function(e){e.keyboard.enabled&&e.keyboard.disable()}}},U={lastScrollTime:E(),lastEventBeforeSnap:void 0,recentWheelEvents:[],event:function(){return o().navigator.userAgent.indexOf("firefox")>-1?"DOMMouseScroll":function(){var e=s(),t="onwheel",a=t in e;if(!a){var i=e.createElement("div");i.setAttribute(t,"return;"),a="function"==typeof i.onwheel}return!a&&e.implementation&&e.implementation.hasFeature&&!0!==e.implementation.hasFeature("","")&&(a=e.implementation.hasFeature("Events.wheel","3.0")),a}()?"wheel":"mousewheel"},normalize:function(e){var t=0,a=0,i=0,r=0;return"detail"in e&&(a=e.detail),"wheelDelta"in e&&(a=-e.wheelDelta/120),"wheelDeltaY"in e&&(a=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=a,a=0),i=10*t,r=10*a,"deltaY"in e&&(r=e.deltaY),"deltaX"in e&&(i=e.deltaX),e.shiftKey&&!i&&(i=r,r=0),(i||r)&&e.deltaMode&&(1===e.deltaMode?(i*=40,r*=40):(i*=800,r*=800)),i&&!t&&(t=i<1?-1:1),r&&!a&&(a=r<1?-1:1),{spinX:t,spinY:a,pixelX:i,pixelY:r}},handleMouseEnter:function(){this.mouseEntered=!0},handleMouseLeave:function(){this.mouseEntered=!1},handle:function(e){var t=e,a=this,i=a.params.mousewheel;a.params.cssMode&&t.preventDefault();var r=a.$el;if("container"!==a.params.mousewheel.eventsTarget&&(r=m(a.params.mousewheel.eventsTarget)),!a.mouseEntered&&!r[0].contains(t.target)&&!i.releaseOnEdges)return!0;t.originalEvent&&(t=t.originalEvent);var s=0,n=a.rtlTranslate?-1:1,o=U.normalize(t);if(i.forceToAxis)if(a.isHorizontal()){if(!(Math.abs(o.pixelX)>Math.abs(o.pixelY)))return!0;s=-o.pixelX*n}else{if(!(Math.abs(o.pixelY)>Math.abs(o.pixelX)))return!0;s=-o.pixelY}else s=Math.abs(o.pixelX)>Math.abs(o.pixelY)?-o.pixelX*n:-o.pixelY;if(0===s)return!0;i.invert&&(s=-s);var l=a.getTranslate()+s*i.sensitivity;if(l>=a.minTranslate()&&(l=a.minTranslate()),l<=a.maxTranslate()&&(l=a.maxTranslate()),(!!a.params.loop||!(l===a.minTranslate()||l===a.maxTranslate()))&&a.params.nested&&t.stopPropagation(),a.params.freeMode){var d={time:E(),delta:Math.abs(s),direction:Math.sign(s)},p=a.mousewheel.lastEventBeforeSnap,c=p&&d.time<p.time+500&&d.delta<=p.delta&&d.direction===p.direction;if(!c){a.mousewheel.lastEventBeforeSnap=void 0,a.params.loop&&a.loopFix();var u=a.getTranslate()+s*i.sensitivity,h=a.isBeginning,f=a.isEnd;if(u>=a.minTranslate()&&(u=a.minTranslate()),u<=a.maxTranslate()&&(u=a.maxTranslate()),a.setTransition(0),a.setTranslate(u),a.updateProgress(),a.updateActiveIndex(),a.updateSlidesClasses(),(!h&&a.isBeginning||!f&&a.isEnd)&&a.updateSlidesClasses(),a.params.freeModeSticky){clearTimeout(a.mousewheel.timeout),a.mousewheel.timeout=void 0;var v=a.mousewheel.recentWheelEvents;v.length>=15&&v.shift();var g=v.length?v[v.length-1]:void 0,w=v[0];if(v.push(d),g&&(d.delta>g.delta||d.direction!==g.direction))v.splice(0);else if(v.length>=15&&d.time-w.time<500&&w.delta-d.delta>=1&&d.delta<=6){var b=s>0?.8:.2;a.mousewheel.lastEventBeforeSnap=d,v.splice(0),a.mousewheel.timeout=x((function(){a.slideToClosest(a.params.speed,!0,void 0,b)}),0)}a.mousewheel.timeout||(a.mousewheel.timeout=x((function(){a.mousewheel.lastEventBeforeSnap=d,v.splice(0),a.slideToClosest(a.params.speed,!0,void 0,.5)}),500))}if(c||a.emit("scroll",t),a.params.autoplay&&a.params.autoplayDisableOnInteraction&&a.autoplay.stop(),u===a.minTranslate()||u===a.maxTranslate())return!0}}else{var y={time:E(),delta:Math.abs(s),direction:Math.sign(s),raw:e},T=a.mousewheel.recentWheelEvents;T.length>=2&&T.shift();var C=T.length?T[T.length-1]:void 0;if(T.push(y),C?(y.direction!==C.direction||y.delta>C.delta||y.time>C.time+150)&&a.mousewheel.animateSlider(y):a.mousewheel.animateSlider(y),a.mousewheel.releaseScroll(y))return!0}return t.preventDefault?t.preventDefault():t.returnValue=!1,!1},animateSlider:function(e){var t=this,a=o();return!(this.params.mousewheel.thresholdDelta&&e.delta<this.params.mousewheel.thresholdDelta||this.params.mousewheel.thresholdTime&&E()-t.mousewheel.lastScrollTime<this.params.mousewheel.thresholdTime||!(e.delta>=6&&E()-t.mousewheel.lastScrollTime<60)&&(e.direction<0?t.isEnd&&!t.params.loop||t.animating||(t.slideNext(),t.emit("scroll",e.raw)):t.isBeginning&&!t.params.loop||t.animating||(t.slidePrev(),t.emit("scroll",e.raw)),t.mousewheel.lastScrollTime=(new a.Date).getTime(),1))},releaseScroll:function(e){var t=this,a=t.params.mousewheel;if(e.direction<0){if(t.isEnd&&!t.params.loop&&a.releaseOnEdges)return!0}else if(t.isBeginning&&!t.params.loop&&a.releaseOnEdges)return!0;return!1},enable:function(){var e=this,t=U.event();if(e.params.cssMode)return e.wrapperEl.removeEventListener(t,e.mousewheel.handle),!0;if(!t)return!1;if(e.mousewheel.enabled)return!1;var a=e.$el;return"container"!==e.params.mousewheel.eventsTarget&&(a=m(e.params.mousewheel.eventsTarget)),a.on("mouseenter",e.mousewheel.handleMouseEnter),a.on("mouseleave",e.mousewheel.handleMouseLeave),a.on(t,e.mousewheel.handle),e.mousewheel.enabled=!0,!0},disable:function(){var e=this,t=U.event();if(e.params.cssMode)return e.wrapperEl.addEventListener(t,e.mousewheel.handle),!0;if(!t)return!1;if(!e.mousewheel.enabled)return!1;var a=e.$el;return"container"!==e.params.mousewheel.eventsTarget&&(a=m(e.params.mousewheel.eventsTarget)),a.off(t,e.mousewheel.handle),e.mousewheel.enabled=!1,!0}},Z={toggleEl:function(e,t){e[t?"addClass":"removeClass"](this.params.navigation.disabledClass),e[0]&&"BUTTON"===e[0].tagName&&(e[0].disabled=t)},update:function(){var e=this,t=e.params.navigation,a=e.navigation.toggleEl;if(!e.params.loop){var i=e.navigation,r=i.$nextEl,s=i.$prevEl;s&&s.length>0&&(e.isBeginning?a(s,!0):a(s,!1),s[e.params.watchOverflow&&e.isLocked?"addClass":"removeClass"](t.lockClass)),r&&r.length>0&&(e.isEnd?a(r,!0):a(r,!1),r[e.params.watchOverflow&&e.isLocked?"addClass":"removeClass"](t.lockClass))}},onPrevClick:function(e){var t=this;e.preventDefault(),t.isBeginning&&!t.params.loop||t.slidePrev()},onNextClick:function(e){var t=this;e.preventDefault(),t.isEnd&&!t.params.loop||t.slideNext()},init:function(){var e,t,a=this,i=a.params.navigation;(i.nextEl||i.prevEl)&&(i.nextEl&&(e=m(i.nextEl),a.params.uniqueNavElements&&"string"==typeof i.nextEl&&e.length>1&&1===a.$el.find(i.nextEl).length&&(e=a.$el.find(i.nextEl))),i.prevEl&&(t=m(i.prevEl),a.params.uniqueNavElements&&"string"==typeof i.prevEl&&t.length>1&&1===a.$el.find(i.prevEl).length&&(t=a.$el.find(i.prevEl))),e&&e.length>0&&e.on("click",a.navigation.onNextClick),t&&t.length>0&&t.on("click",a.navigation.onPrevClick),S(a.navigation,{$nextEl:e,nextEl:e&&e[0],$prevEl:t,prevEl:t&&t[0]}))},destroy:function(){var e=this,t=e.navigation,a=t.$nextEl,i=t.$prevEl;a&&a.length&&(a.off("click",e.navigation.onNextClick),a.removeClass(e.params.navigation.disabledClass)),i&&i.length&&(i.off("click",e.navigation.onPrevClick),i.removeClass(e.params.navigation.disabledClass))}},Q={update:function(){var e=this,t=e.rtl,a=e.params.pagination;if(a.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var i,r=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,s=e.pagination.$el,n=e.params.loop?Math.ceil((r-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?((i=Math.ceil((e.activeIndex-e.loopedSlides)/e.params.slidesPerGroup))>r-1-2*e.loopedSlides&&(i-=r-2*e.loopedSlides),i>n-1&&(i-=n),i<0&&"bullets"!==e.params.paginationType&&(i=n+i)):i=void 0!==e.snapIndex?e.snapIndex:e.activeIndex||0,"bullets"===a.type&&e.pagination.bullets&&e.pagination.bullets.length>0){var o,l,d,p=e.pagination.bullets;if(a.dynamicBullets&&(e.pagination.bulletSize=p.eq(0)[e.isHorizontal()?"outerWidth":"outerHeight"](!0),s.css(e.isHorizontal()?"width":"height",e.pagination.bulletSize*(a.dynamicMainBullets+4)+"px"),a.dynamicMainBullets>1&&void 0!==e.previousIndex&&(e.pagination.dynamicBulletIndex+=i-e.previousIndex,e.pagination.dynamicBulletIndex>a.dynamicMainBullets-1?e.pagination.dynamicBulletIndex=a.dynamicMainBullets-1:e.pagination.dynamicBulletIndex<0&&(e.pagination.dynamicBulletIndex=0)),o=i-e.pagination.dynamicBulletIndex,d=((l=o+(Math.min(p.length,a.dynamicMainBullets)-1))+o)/2),p.removeClass(a.bulletActiveClass+" "+a.bulletActiveClass+"-next "+a.bulletActiveClass+"-next-next "+a.bulletActiveClass+"-prev "+a.bulletActiveClass+"-prev-prev "+a.bulletActiveClass+"-main"),s.length>1)p.each((function(e){var t=m(e),r=t.index();r===i&&t.addClass(a.bulletActiveClass),a.dynamicBullets&&(r>=o&&r<=l&&t.addClass(a.bulletActiveClass+"-main"),r===o&&t.prev().addClass(a.bulletActiveClass+"-prev").prev().addClass(a.bulletActiveClass+"-prev-prev"),r===l&&t.next().addClass(a.bulletActiveClass+"-next").next().addClass(a.bulletActiveClass+"-next-next"))}));else{var c=p.eq(i),u=c.index();if(c.addClass(a.bulletActiveClass),a.dynamicBullets){for(var h=p.eq(o),f=p.eq(l),v=o;v<=l;v+=1)p.eq(v).addClass(a.bulletActiveClass+"-main");if(e.params.loop)if(u>=p.length-a.dynamicMainBullets){for(var g=a.dynamicMainBullets;g>=0;g-=1)p.eq(p.length-g).addClass(a.bulletActiveClass+"-main");p.eq(p.length-a.dynamicMainBullets-1).addClass(a.bulletActiveClass+"-prev")}else h.prev().addClass(a.bulletActiveClass+"-prev").prev().addClass(a.bulletActiveClass+"-prev-prev"),f.next().addClass(a.bulletActiveClass+"-next").next().addClass(a.bulletActiveClass+"-next-next");else h.prev().addClass(a.bulletActiveClass+"-prev").prev().addClass(a.bulletActiveClass+"-prev-prev"),f.next().addClass(a.bulletActiveClass+"-next").next().addClass(a.bulletActiveClass+"-next-next")}}if(a.dynamicBullets){var w=Math.min(p.length,a.dynamicMainBullets+4),b=(e.pagination.bulletSize*w-e.pagination.bulletSize)/2-d*e.pagination.bulletSize,y=t?"right":"left";p.css(e.isHorizontal()?y:"top",b+"px")}}if("fraction"===a.type&&(s.find("."+a.currentClass).text(a.formatFractionCurrent(i+1)),s.find("."+a.totalClass).text(a.formatFractionTotal(n))),"progressbar"===a.type){var x;x=a.progressbarOpposite?e.isHorizontal()?"vertical":"horizontal":e.isHorizontal()?"horizontal":"vertical";var E=(i+1)/n,T=1,C=1;"horizontal"===x?T=E:C=E,s.find("."+a.progressbarFillClass).transform("translate3d(0,0,0) scaleX("+T+") scaleY("+C+")").transition(e.params.speed)}"custom"===a.type&&a.renderCustom?(s.html(a.renderCustom(e,i+1,n)),e.emit("paginationRender",s[0])):e.emit("paginationUpdate",s[0]),s[e.params.watchOverflow&&e.isLocked?"addClass":"removeClass"](a.lockClass)}},render:function(){var e=this,t=e.params.pagination;if(t.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var a=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,i=e.pagination.$el,r="";if("bullets"===t.type){var s=e.params.loop?Math.ceil((a-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&!e.params.loop&&s>a&&(s=a);for(var n=0;n<s;n+=1)t.renderBullet?r+=t.renderBullet.call(e,n,t.bulletClass):r+="<"+t.bulletElement+' class="'+t.bulletClass+'"></'+t.bulletElement+">";i.html(r),e.pagination.bullets=i.find("."+t.bulletClass.replace(/ /g,"."))}"fraction"===t.type&&(r=t.renderFraction?t.renderFraction.call(e,t.currentClass,t.totalClass):'<span class="'+t.currentClass+'"></span> / <span class="'+t.totalClass+'"></span>',i.html(r)),"progressbar"===t.type&&(r=t.renderProgressbar?t.renderProgressbar.call(e,t.progressbarFillClass):'<span class="'+t.progressbarFillClass+'"></span>',i.html(r)),"custom"!==t.type&&e.emit("paginationRender",e.pagination.$el[0])}},init:function(){var e=this,t=e.params.pagination;if(t.el){var a=m(t.el);0!==a.length&&(e.params.uniqueNavElements&&"string"==typeof t.el&&a.length>1&&(a=e.$el.find(t.el)),"bullets"===t.type&&t.clickable&&a.addClass(t.clickableClass),a.addClass(t.modifierClass+t.type),"bullets"===t.type&&t.dynamicBullets&&(a.addClass(""+t.modifierClass+t.type+"-dynamic"),e.pagination.dynamicBulletIndex=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),"progressbar"===t.type&&t.progressbarOpposite&&a.addClass(t.progressbarOppositeClass),t.clickable&&a.on("click","."+t.bulletClass.replace(/ /g,"."),(function(t){t.preventDefault();var a=m(this).index()*e.params.slidesPerGroup;e.params.loop&&(a+=e.loopedSlides),e.slideTo(a)})),S(e.pagination,{$el:a,el:a[0]}))}},destroy:function(){var e=this,t=e.params.pagination;if(t.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var a=e.pagination.$el;a.removeClass(t.hiddenClass),a.removeClass(t.modifierClass+t.type),e.pagination.bullets&&e.pagination.bullets.removeClass(t.bulletActiveClass),t.clickable&&a.off("click","."+t.bulletClass.replace(/ /g,"."))}}},K={setTranslate:function(){var e=this;if(e.params.scrollbar.el&&e.scrollbar.el){var t=e.scrollbar,a=e.rtlTranslate,i=e.progress,r=t.dragSize,s=t.trackSize,n=t.$dragEl,o=t.$el,l=e.params.scrollbar,d=r,p=(s-r)*i;a?(p=-p)>0?(d=r-p,p=0):-p+r>s&&(d=s+p):p<0?(d=r+p,p=0):p+r>s&&(d=s-p),e.isHorizontal()?(n.transform("translate3d("+p+"px, 0, 0)"),n[0].style.width=d+"px"):(n.transform("translate3d(0px, "+p+"px, 0)"),n[0].style.height=d+"px"),l.hide&&(clearTimeout(e.scrollbar.timeout),o[0].style.opacity=1,e.scrollbar.timeout=setTimeout((function(){o[0].style.opacity=0,o.transition(400)}),1e3))}},setTransition:function(e){var t=this;t.params.scrollbar.el&&t.scrollbar.el&&t.scrollbar.$dragEl.transition(e)},updateSize:function(){var e=this;if(e.params.scrollbar.el&&e.scrollbar.el){var t=e.scrollbar,a=t.$dragEl,i=t.$el;a[0].style.width="",a[0].style.height="";var r,s=e.isHorizontal()?i[0].offsetWidth:i[0].offsetHeight,n=e.size/e.virtualSize,o=n*(s/e.size);r="auto"===e.params.scrollbar.dragSize?s*n:parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?a[0].style.width=r+"px":a[0].style.height=r+"px",i[0].style.display=n>=1?"none":"",e.params.scrollbar.hide&&(i[0].style.opacity=0),S(t,{trackSize:s,divider:n,moveDivider:o,dragSize:r}),t.$el[e.params.watchOverflow&&e.isLocked?"addClass":"removeClass"](e.params.scrollbar.lockClass)}},getPointerPosition:function(e){return this.isHorizontal()?"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].clientX:e.clientX:"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].clientY:e.clientY},setDragPosition:function(e){var t,a=this,i=a.scrollbar,r=a.rtlTranslate,s=i.$el,n=i.dragSize,o=i.trackSize,l=i.dragStartPos;t=(i.getPointerPosition(e)-s.offset()[a.isHorizontal()?"left":"top"]-(null!==l?l:n/2))/(o-n),t=Math.max(Math.min(t,1),0),r&&(t=1-t);var d=a.minTranslate()+(a.maxTranslate()-a.minTranslate())*t;a.updateProgress(d),a.setTranslate(d),a.updateActiveIndex(),a.updateSlidesClasses()},onDragStart:function(e){var t=this,a=t.params.scrollbar,i=t.scrollbar,r=t.$wrapperEl,s=i.$el,n=i.$dragEl;t.scrollbar.isTouched=!0,t.scrollbar.dragStartPos=e.target===n[0]||e.target===n?i.getPointerPosition(e)-e.target.getBoundingClientRect()[t.isHorizontal()?"left":"top"]:null,e.preventDefault(),e.stopPropagation(),r.transition(100),n.transition(100),i.setDragPosition(e),clearTimeout(t.scrollbar.dragTimeout),s.transition(0),a.hide&&s.css("opacity",1),t.params.cssMode&&t.$wrapperEl.css("scroll-snap-type","none"),t.emit("scrollbarDragStart",e)},onDragMove:function(e){var t=this,a=t.scrollbar,i=t.$wrapperEl,r=a.$el,s=a.$dragEl;t.scrollbar.isTouched&&(e.preventDefault?e.preventDefault():e.returnValue=!1,a.setDragPosition(e),i.transition(0),r.transition(0),s.transition(0),t.emit("scrollbarDragMove",e))},onDragEnd:function(e){var t=this,a=t.params.scrollbar,i=t.scrollbar,r=t.$wrapperEl,s=i.$el;t.scrollbar.isTouched&&(t.scrollbar.isTouched=!1,t.params.cssMode&&(t.$wrapperEl.css("scroll-snap-type",""),r.transition("")),a.hide&&(clearTimeout(t.scrollbar.dragTimeout),t.scrollbar.dragTimeout=x((function(){s.css("opacity",0),s.transition(400)}),1e3)),t.emit("scrollbarDragEnd",e),a.snapOnRelease&&t.slideToClosest())},enableDraggable:function(){var e=this;if(e.params.scrollbar.el){var t=s(),a=e.scrollbar,i=e.touchEventsTouch,r=e.touchEventsDesktop,n=e.params,o=e.support,l=a.$el[0],d=!(!o.passiveListener||!n.passiveListeners)&&{passive:!1,capture:!1},p=!(!o.passiveListener||!n.passiveListeners)&&{passive:!0,capture:!1};l&&(o.touch?(l.addEventListener(i.start,e.scrollbar.onDragStart,d),l.addEventListener(i.move,e.scrollbar.onDragMove,d),l.addEventListener(i.end,e.scrollbar.onDragEnd,p)):(l.addEventListener(r.start,e.scrollbar.onDragStart,d),t.addEventListener(r.move,e.scrollbar.onDragMove,d),t.addEventListener(r.end,e.scrollbar.onDragEnd,p)))}},disableDraggable:function(){var e=this;if(e.params.scrollbar.el){var t=s(),a=e.scrollbar,i=e.touchEventsTouch,r=e.touchEventsDesktop,n=e.params,o=e.support,l=a.$el[0],d=!(!o.passiveListener||!n.passiveListeners)&&{passive:!1,capture:!1},p=!(!o.passiveListener||!n.passiveListeners)&&{passive:!0,capture:!1};l&&(o.touch?(l.removeEventListener(i.start,e.scrollbar.onDragStart,d),l.removeEventListener(i.move,e.scrollbar.onDragMove,d),l.removeEventListener(i.end,e.scrollbar.onDragEnd,p)):(l.removeEventListener(r.start,e.scrollbar.onDragStart,d),t.removeEventListener(r.move,e.scrollbar.onDragMove,d),t.removeEventListener(r.end,e.scrollbar.onDragEnd,p)))}},init:function(){var e=this;if(e.params.scrollbar.el){var t=e.scrollbar,a=e.$el,i=e.params.scrollbar,r=m(i.el);e.params.uniqueNavElements&&"string"==typeof i.el&&r.length>1&&1===a.find(i.el).length&&(r=a.find(i.el));var s=r.find("."+e.params.scrollbar.dragClass);0===s.length&&(s=m('<div class="'+e.params.scrollbar.dragClass+'"></div>'),r.append(s)),S(t,{$el:r,el:r[0],$dragEl:s,dragEl:s[0]}),i.draggable&&t.enableDraggable()}},destroy:function(){this.scrollbar.disableDraggable()}},J={setTransform:function(e,t){var a=this.rtl,i=m(e),r=a?-1:1,s=i.attr("data-swiper-parallax")||"0",n=i.attr("data-swiper-parallax-x"),o=i.attr("data-swiper-parallax-y"),l=i.attr("data-swiper-parallax-scale"),d=i.attr("data-swiper-parallax-opacity");if(n||o?(n=n||"0",o=o||"0"):this.isHorizontal()?(n=s,o="0"):(o=s,n="0"),n=n.indexOf("%")>=0?parseInt(n,10)*t*r+"%":n*t*r+"px",o=o.indexOf("%")>=0?parseInt(o,10)*t+"%":o*t+"px",null!=d){var p=d-(d-1)*(1-Math.abs(t));i[0].style.opacity=p}if(null==l)i.transform("translate3d("+n+", "+o+", 0px)");else{var c=l-(l-1)*(1-Math.abs(t));i.transform("translate3d("+n+", "+o+", 0px) scale("+c+")")}},setTranslate:function(){var e=this,t=e.$el,a=e.slides,i=e.progress,r=e.snapGrid;t.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(t){e.parallax.setTransform(t,i)})),a.each((function(t,a){var s=t.progress;e.params.slidesPerGroup>1&&"auto"!==e.params.slidesPerView&&(s+=Math.ceil(a/2)-i*(r.length-1)),s=Math.min(Math.max(s,-1),1),m(t).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(t){e.parallax.setTransform(t,s)}))}))},setTransition:function(e){void 0===e&&(e=this.params.speed),this.$el.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(t){var a=m(t),i=parseInt(a.attr("data-swiper-parallax-duration"),10)||e;0===e&&(i=0),a.transition(i)}))}},ee={getDistanceBetweenTouches:function(e){if(e.targetTouches.length<2)return 1;var t=e.targetTouches[0].pageX,a=e.targetTouches[0].pageY,i=e.targetTouches[1].pageX,r=e.targetTouches[1].pageY;return Math.sqrt(Math.pow(i-t,2)+Math.pow(r-a,2))},onGestureStart:function(e){var t=this,a=t.support,i=t.params.zoom,r=t.zoom,s=r.gesture;if(r.fakeGestureTouched=!1,r.fakeGestureMoved=!1,!a.gestures){if("touchstart"!==e.type||"touchstart"===e.type&&e.targetTouches.length<2)return;r.fakeGestureTouched=!0,s.scaleStart=ee.getDistanceBetweenTouches(e)}s.$slideEl&&s.$slideEl.length||(s.$slideEl=m(e.target).closest("."+t.params.slideClass),0===s.$slideEl.length&&(s.$slideEl=t.slides.eq(t.activeIndex)),s.$imageEl=s.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),s.$imageWrapEl=s.$imageEl.parent("."+i.containerClass),s.maxRatio=s.$imageWrapEl.attr("data-swiper-zoom")||i.maxRatio,0!==s.$imageWrapEl.length)?(s.$imageEl&&s.$imageEl.transition(0),t.zoom.isScaling=!0):s.$imageEl=void 0},onGestureChange:function(e){var t=this,a=t.support,i=t.params.zoom,r=t.zoom,s=r.gesture;if(!a.gestures){if("touchmove"!==e.type||"touchmove"===e.type&&e.targetTouches.length<2)return;r.fakeGestureMoved=!0,s.scaleMove=ee.getDistanceBetweenTouches(e)}s.$imageEl&&0!==s.$imageEl.length?(a.gestures?r.scale=e.scale*r.currentScale:r.scale=s.scaleMove/s.scaleStart*r.currentScale,r.scale>s.maxRatio&&(r.scale=s.maxRatio-1+Math.pow(r.scale-s.maxRatio+1,.5)),r.scale<i.minRatio&&(r.scale=i.minRatio+1-Math.pow(i.minRatio-r.scale+1,.5)),s.$imageEl.transform("translate3d(0,0,0) scale("+r.scale+")")):"gesturechange"===e.type&&r.onGestureStart(e)},onGestureEnd:function(e){var t=this,a=t.device,i=t.support,r=t.params.zoom,s=t.zoom,n=s.gesture;if(!i.gestures){if(!s.fakeGestureTouched||!s.fakeGestureMoved)return;if("touchend"!==e.type||"touchend"===e.type&&e.changedTouches.length<2&&!a.android)return;s.fakeGestureTouched=!1,s.fakeGestureMoved=!1}n.$imageEl&&0!==n.$imageEl.length&&(s.scale=Math.max(Math.min(s.scale,n.maxRatio),r.minRatio),n.$imageEl.transition(t.params.speed).transform("translate3d(0,0,0) scale("+s.scale+")"),s.currentScale=s.scale,s.isScaling=!1,1===s.scale&&(n.$slideEl=void 0))},onTouchStart:function(e){var t=this.device,a=this.zoom,i=a.gesture,r=a.image;i.$imageEl&&0!==i.$imageEl.length&&(r.isTouched||(t.android&&e.cancelable&&e.preventDefault(),r.isTouched=!0,r.touchesStart.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,r.touchesStart.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY))},onTouchMove:function(e){var t=this,a=t.zoom,i=a.gesture,r=a.image,s=a.velocity;if(i.$imageEl&&0!==i.$imageEl.length&&(t.allowClick=!1,r.isTouched&&i.$slideEl)){r.isMoved||(r.width=i.$imageEl[0].offsetWidth,r.height=i.$imageEl[0].offsetHeight,r.startX=T(i.$imageWrapEl[0],"x")||0,r.startY=T(i.$imageWrapEl[0],"y")||0,i.slideWidth=i.$slideEl[0].offsetWidth,i.slideHeight=i.$slideEl[0].offsetHeight,i.$imageWrapEl.transition(0),t.rtl&&(r.startX=-r.startX,r.startY=-r.startY));var n=r.width*a.scale,o=r.height*a.scale;if(!(n<i.slideWidth&&o<i.slideHeight)){if(r.minX=Math.min(i.slideWidth/2-n/2,0),r.maxX=-r.minX,r.minY=Math.min(i.slideHeight/2-o/2,0),r.maxY=-r.minY,r.touchesCurrent.x="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,r.touchesCurrent.y="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,!r.isMoved&&!a.isScaling){if(t.isHorizontal()&&(Math.floor(r.minX)===Math.floor(r.startX)&&r.touchesCurrent.x<r.touchesStart.x||Math.floor(r.maxX)===Math.floor(r.startX)&&r.touchesCurrent.x>r.touchesStart.x))return void(r.isTouched=!1);if(!t.isHorizontal()&&(Math.floor(r.minY)===Math.floor(r.startY)&&r.touchesCurrent.y<r.touchesStart.y||Math.floor(r.maxY)===Math.floor(r.startY)&&r.touchesCurrent.y>r.touchesStart.y))return void(r.isTouched=!1)}e.cancelable&&e.preventDefault(),e.stopPropagation(),r.isMoved=!0,r.currentX=r.touchesCurrent.x-r.touchesStart.x+r.startX,r.currentY=r.touchesCurrent.y-r.touchesStart.y+r.startY,r.currentX<r.minX&&(r.currentX=r.minX+1-Math.pow(r.minX-r.currentX+1,.8)),r.currentX>r.maxX&&(r.currentX=r.maxX-1+Math.pow(r.currentX-r.maxX+1,.8)),r.currentY<r.minY&&(r.currentY=r.minY+1-Math.pow(r.minY-r.currentY+1,.8)),r.currentY>r.maxY&&(r.currentY=r.maxY-1+Math.pow(r.currentY-r.maxY+1,.8)),s.prevPositionX||(s.prevPositionX=r.touchesCurrent.x),s.prevPositionY||(s.prevPositionY=r.touchesCurrent.y),s.prevTime||(s.prevTime=Date.now()),s.x=(r.touchesCurrent.x-s.prevPositionX)/(Date.now()-s.prevTime)/2,s.y=(r.touchesCurrent.y-s.prevPositionY)/(Date.now()-s.prevTime)/2,Math.abs(r.touchesCurrent.x-s.prevPositionX)<2&&(s.x=0),Math.abs(r.touchesCurrent.y-s.prevPositionY)<2&&(s.y=0),s.prevPositionX=r.touchesCurrent.x,s.prevPositionY=r.touchesCurrent.y,s.prevTime=Date.now(),i.$imageWrapEl.transform("translate3d("+r.currentX+"px, "+r.currentY+"px,0)")}}},onTouchEnd:function(){var e=this.zoom,t=e.gesture,a=e.image,i=e.velocity;if(t.$imageEl&&0!==t.$imageEl.length){if(!a.isTouched||!a.isMoved)return a.isTouched=!1,void(a.isMoved=!1);a.isTouched=!1,a.isMoved=!1;var r=300,s=300,n=i.x*r,o=a.currentX+n,l=i.y*s,d=a.currentY+l;0!==i.x&&(r=Math.abs((o-a.currentX)/i.x)),0!==i.y&&(s=Math.abs((d-a.currentY)/i.y));var p=Math.max(r,s);a.currentX=o,a.currentY=d;var c=a.width*e.scale,u=a.height*e.scale;a.minX=Math.min(t.slideWidth/2-c/2,0),a.maxX=-a.minX,a.minY=Math.min(t.slideHeight/2-u/2,0),a.maxY=-a.minY,a.currentX=Math.max(Math.min(a.currentX,a.maxX),a.minX),a.currentY=Math.max(Math.min(a.currentY,a.maxY),a.minY),t.$imageWrapEl.transition(p).transform("translate3d("+a.currentX+"px, "+a.currentY+"px,0)")}},onTransitionEnd:function(){var e=this,t=e.zoom,a=t.gesture;a.$slideEl&&e.previousIndex!==e.activeIndex&&(a.$imageEl&&a.$imageEl.transform("translate3d(0,0,0) scale(1)"),a.$imageWrapEl&&a.$imageWrapEl.transform("translate3d(0,0,0)"),t.scale=1,t.currentScale=1,a.$slideEl=void 0,a.$imageEl=void 0,a.$imageWrapEl=void 0)},toggle:function(e){var t=this.zoom;t.scale&&1!==t.scale?t.out():t.in(e)},in:function(e){var t,a,i,r,s,n,l,d,p,c,u,h,f,v,m,g,w=this,b=o(),y=w.zoom,x=w.params.zoom,E=y.gesture,T=y.image;E.$slideEl||(w.params.virtual&&w.params.virtual.enabled&&w.virtual?E.$slideEl=w.$wrapperEl.children("."+w.params.slideActiveClass):E.$slideEl=w.slides.eq(w.activeIndex),E.$imageEl=E.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),E.$imageWrapEl=E.$imageEl.parent("."+x.containerClass)),E.$imageEl&&0!==E.$imageEl.length&&(E.$slideEl.addClass(""+x.zoomedSlideClass),void 0===T.touchesStart.x&&e?(t="touchend"===e.type?e.changedTouches[0].pageX:e.pageX,a="touchend"===e.type?e.changedTouches[0].pageY:e.pageY):(t=T.touchesStart.x,a=T.touchesStart.y),y.scale=E.$imageWrapEl.attr("data-swiper-zoom")||x.maxRatio,y.currentScale=E.$imageWrapEl.attr("data-swiper-zoom")||x.maxRatio,e?(m=E.$slideEl[0].offsetWidth,g=E.$slideEl[0].offsetHeight,i=E.$slideEl.offset().left+b.scrollX+m/2-t,r=E.$slideEl.offset().top+b.scrollY+g/2-a,l=E.$imageEl[0].offsetWidth,d=E.$imageEl[0].offsetHeight,p=l*y.scale,c=d*y.scale,f=-(u=Math.min(m/2-p/2,0)),v=-(h=Math.min(g/2-c/2,0)),(s=i*y.scale)<u&&(s=u),s>f&&(s=f),(n=r*y.scale)<h&&(n=h),n>v&&(n=v)):(s=0,n=0),E.$imageWrapEl.transition(300).transform("translate3d("+s+"px, "+n+"px,0)"),E.$imageEl.transition(300).transform("translate3d(0,0,0) scale("+y.scale+")"))},out:function(){var e=this,t=e.zoom,a=e.params.zoom,i=t.gesture;i.$slideEl||(e.params.virtual&&e.params.virtual.enabled&&e.virtual?i.$slideEl=e.$wrapperEl.children("."+e.params.slideActiveClass):i.$slideEl=e.slides.eq(e.activeIndex),i.$imageEl=i.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),i.$imageWrapEl=i.$imageEl.parent("."+a.containerClass)),i.$imageEl&&0!==i.$imageEl.length&&(t.scale=1,t.currentScale=1,i.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),i.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),i.$slideEl.removeClass(""+a.zoomedSlideClass),i.$slideEl=void 0)},toggleGestures:function(e){var t=this,a=t.zoom,i=a.slideSelector,r=a.passiveListener;t.$wrapperEl[e]("gesturestart",i,a.onGestureStart,r),t.$wrapperEl[e]("gesturechange",i,a.onGestureChange,r),t.$wrapperEl[e]("gestureend",i,a.onGestureEnd,r)},enableGestures:function(){this.zoom.gesturesEnabled||(this.zoom.gesturesEnabled=!0,this.zoom.toggleGestures("on"))},disableGestures:function(){this.zoom.gesturesEnabled&&(this.zoom.gesturesEnabled=!1,this.zoom.toggleGestures("off"))},enable:function(){var e=this,t=e.support,a=e.zoom;if(!a.enabled){a.enabled=!0;var i=!("touchstart"!==e.touchEvents.start||!t.passiveListener||!e.params.passiveListeners)&&{passive:!0,capture:!1},r=!t.passiveListener||{passive:!1,capture:!0},s="."+e.params.slideClass;e.zoom.passiveListener=i,e.zoom.slideSelector=s,t.gestures?(e.$wrapperEl.on(e.touchEvents.start,e.zoom.enableGestures,i),e.$wrapperEl.on(e.touchEvents.end,e.zoom.disableGestures,i)):"touchstart"===e.touchEvents.start&&(e.$wrapperEl.on(e.touchEvents.start,s,a.onGestureStart,i),e.$wrapperEl.on(e.touchEvents.move,s,a.onGestureChange,r),e.$wrapperEl.on(e.touchEvents.end,s,a.onGestureEnd,i),e.touchEvents.cancel&&e.$wrapperEl.on(e.touchEvents.cancel,s,a.onGestureEnd,i)),e.$wrapperEl.on(e.touchEvents.move,"."+e.params.zoom.containerClass,a.onTouchMove,r)}},disable:function(){var e=this,t=e.zoom;if(t.enabled){var a=e.support;e.zoom.enabled=!1;var i=!("touchstart"!==e.touchEvents.start||!a.passiveListener||!e.params.passiveListeners)&&{passive:!0,capture:!1},r=!a.passiveListener||{passive:!1,capture:!0},s="."+e.params.slideClass;a.gestures?(e.$wrapperEl.off(e.touchEvents.start,e.zoom.enableGestures,i),e.$wrapperEl.off(e.touchEvents.end,e.zoom.disableGestures,i)):"touchstart"===e.touchEvents.start&&(e.$wrapperEl.off(e.touchEvents.start,s,t.onGestureStart,i),e.$wrapperEl.off(e.touchEvents.move,s,t.onGestureChange,r),e.$wrapperEl.off(e.touchEvents.end,s,t.onGestureEnd,i),e.touchEvents.cancel&&e.$wrapperEl.off(e.touchEvents.cancel,s,t.onGestureEnd,i)),e.$wrapperEl.off(e.touchEvents.move,"."+e.params.zoom.containerClass,t.onTouchMove,r)}}},te={loadInSlide:function(e,t){void 0===t&&(t=!0);var a=this,i=a.params.lazy;if(void 0!==e&&0!==a.slides.length){var r=a.virtual&&a.params.virtual.enabled?a.$wrapperEl.children("."+a.params.slideClass+'[data-swiper-slide-index="'+e+'"]'):a.slides.eq(e),s=r.find("."+i.elementClass+":not(."+i.loadedClass+"):not(."+i.loadingClass+")");!r.hasClass(i.elementClass)||r.hasClass(i.loadedClass)||r.hasClass(i.loadingClass)||s.push(r[0]),0!==s.length&&s.each((function(e){var s=m(e);s.addClass(i.loadingClass);var n=s.attr("data-background"),o=s.attr("data-src"),l=s.attr("data-srcset"),d=s.attr("data-sizes"),p=s.parent("picture");a.loadImage(s[0],o||n,l,d,!1,(function(){if(null!=a&&a&&(!a||a.params)&&!a.destroyed){if(n?(s.css("background-image",'url("'+n+'")'),s.removeAttr("data-background")):(l&&(s.attr("srcset",l),s.removeAttr("data-srcset")),d&&(s.attr("sizes",d),s.removeAttr("data-sizes")),p.length&&p.children("source").each((function(e){var t=m(e);t.attr("data-srcset")&&(t.attr("srcset",t.attr("data-srcset")),t.removeAttr("data-srcset"))})),o&&(s.attr("src",o),s.removeAttr("data-src"))),s.addClass(i.loadedClass).removeClass(i.loadingClass),r.find("."+i.preloaderClass).remove(),a.params.loop&&t){var e=r.attr("data-swiper-slide-index");if(r.hasClass(a.params.slideDuplicateClass)){var c=a.$wrapperEl.children('[data-swiper-slide-index="'+e+'"]:not(.'+a.params.slideDuplicateClass+")");a.lazy.loadInSlide(c.index(),!1)}else{var u=a.$wrapperEl.children("."+a.params.slideDuplicateClass+'[data-swiper-slide-index="'+e+'"]');a.lazy.loadInSlide(u.index(),!1)}}a.emit("lazyImageReady",r[0],s[0]),a.params.autoHeight&&a.updateAutoHeight()}})),a.emit("lazyImageLoad",r[0],s[0])}))}},load:function(){var e=this,t=e.$wrapperEl,a=e.params,i=e.slides,r=e.activeIndex,s=e.virtual&&a.virtual.enabled,n=a.lazy,o=a.slidesPerView;function l(e){if(s){if(t.children("."+a.slideClass+'[data-swiper-slide-index="'+e+'"]').length)return!0}else if(i[e])return!0;return!1}function d(e){return s?m(e).attr("data-swiper-slide-index"):m(e).index()}if("auto"===o&&(o=0),e.lazy.initialImageLoaded||(e.lazy.initialImageLoaded=!0),e.params.watchSlidesVisibility)t.children("."+a.slideVisibleClass).each((function(t){var a=s?m(t).attr("data-swiper-slide-index"):m(t).index();e.lazy.loadInSlide(a)}));else if(o>1)for(var p=r;p<r+o;p+=1)l(p)&&e.lazy.loadInSlide(p);else e.lazy.loadInSlide(r);if(n.loadPrevNext)if(o>1||n.loadPrevNextAmount&&n.loadPrevNextAmount>1){for(var c=n.loadPrevNextAmount,u=o,h=Math.min(r+u+Math.max(c,u),i.length),f=Math.max(r-Math.max(u,c),0),v=r+o;v<h;v+=1)l(v)&&e.lazy.loadInSlide(v);for(var g=f;g<r;g+=1)l(g)&&e.lazy.loadInSlide(g)}else{var w=t.children("."+a.slideNextClass);w.length>0&&e.lazy.loadInSlide(d(w));var b=t.children("."+a.slidePrevClass);b.length>0&&e.lazy.loadInSlide(d(b))}},checkInViewOnLoad:function(){var e=o(),t=this;if(t&&!t.destroyed){var a=t.params.lazy.scrollingElement?m(t.params.lazy.scrollingElement):m(e),i=a[0]===e,r=i?e.innerWidth:a[0].offsetWidth,s=i?e.innerHeight:a[0].offsetHeight,n=t.$el.offset(),l=!1;t.rtlTranslate&&(n.left-=t.$el[0].scrollLeft);for(var d=[[n.left,n.top],[n.left+t.width,n.top],[n.left,n.top+t.height],[n.left+t.width,n.top+t.height]],p=0;p<d.length;p+=1){var c=d[p];if(c[0]>=0&&c[0]<=r&&c[1]>=0&&c[1]<=s){if(0===c[0]&&0===c[1])continue;l=!0}}l?(t.lazy.load(),a.off("scroll",t.lazy.checkInViewOnLoad)):t.lazy.scrollHandlerAttached||(t.lazy.scrollHandlerAttached=!0,a.on("scroll",t.lazy.checkInViewOnLoad))}}},ae={LinearSpline:function(e,t){var a,i,r,s,n;return this.x=e,this.y=t,this.lastIndex=e.length-1,this.interpolate=function(e){return e?(n=function(e,t){for(i=-1,a=e.length;a-i>1;)e[r=a+i>>1]<=t?i=r:a=r;return a}(this.x,e),s=n-1,(e-this.x[s])*(this.y[n]-this.y[s])/(this.x[n]-this.x[s])+this.y[s]):0},this},getInterpolateFunction:function(e){var t=this;t.controller.spline||(t.controller.spline=t.params.loop?new ae.LinearSpline(t.slidesGrid,e.slidesGrid):new ae.LinearSpline(t.snapGrid,e.snapGrid))},setTranslate:function(e,t){var a,i,r=this,s=r.controller.control,n=r.constructor;function o(e){var t=r.rtlTranslate?-r.translate:r.translate;"slide"===r.params.controller.by&&(r.controller.getInterpolateFunction(e),i=-r.controller.spline.interpolate(-t)),i&&"container"!==r.params.controller.by||(a=(e.maxTranslate()-e.minTranslate())/(r.maxTranslate()-r.minTranslate()),i=(t-r.minTranslate())*a+e.minTranslate()),r.params.controller.inverse&&(i=e.maxTranslate()-i),e.updateProgress(i),e.setTranslate(i,r),e.updateActiveIndex(),e.updateSlidesClasses()}if(Array.isArray(s))for(var l=0;l<s.length;l+=1)s[l]!==t&&s[l]instanceof n&&o(s[l]);else s instanceof n&&t!==s&&o(s)},setTransition:function(e,t){var a,i=this,r=i.constructor,s=i.controller.control;function n(t){t.setTransition(e,i),0!==e&&(t.transitionStart(),t.params.autoHeight&&x((function(){t.updateAutoHeight()})),t.$wrapperEl.transitionEnd((function(){s&&(t.params.loop&&"slide"===i.params.controller.by&&t.loopFix(),t.transitionEnd())})))}if(Array.isArray(s))for(a=0;a<s.length;a+=1)s[a]!==t&&s[a]instanceof r&&n(s[a]);else s instanceof r&&t!==s&&n(s)}},ie={getRandomNumber:function(e){return void 0===e&&(e=16),"x".repeat(e).replace(/x/g,(function(){return Math.round(16*Math.random()).toString(16)}))},makeElFocusable:function(e){return e.attr("tabIndex","0"),e},makeElNotFocusable:function(e){return e.attr("tabIndex","-1"),e},addElRole:function(e,t){return e.attr("role",t),e},addElRoleDescription:function(e,t){return e.attr("aria-roledescription",t),e},addElControls:function(e,t){return e.attr("aria-controls",t),e},addElLabel:function(e,t){return e.attr("aria-label",t),e},addElId:function(e,t){return e.attr("id",t),e},addElLive:function(e,t){return e.attr("aria-live",t),e},disableEl:function(e){return e.attr("aria-disabled",!0),e},enableEl:function(e){return e.attr("aria-disabled",!1),e},onEnterOrSpaceKey:function(e){if(13===e.keyCode||32===e.keyCode){var t=this,a=t.params.a11y,i=m(e.target);t.navigation&&t.navigation.$nextEl&&i.is(t.navigation.$nextEl)&&(t.isEnd&&!t.params.loop||t.slideNext(),t.isEnd?t.a11y.notify(a.lastSlideMessage):t.a11y.notify(a.nextSlideMessage)),t.navigation&&t.navigation.$prevEl&&i.is(t.navigation.$prevEl)&&(t.isBeginning&&!t.params.loop||t.slidePrev(),t.isBeginning?t.a11y.notify(a.firstSlideMessage):t.a11y.notify(a.prevSlideMessage)),t.pagination&&i.is("."+t.params.pagination.bulletClass.replace(/ /g,"."))&&i[0].click()}},notify:function(e){var t=this.a11y.liveRegion;0!==t.length&&(t.html(""),t.html(e))},updateNavigation:function(){var e=this;if(!e.params.loop&&e.navigation){var t=e.navigation,a=t.$nextEl,i=t.$prevEl;i&&i.length>0&&(e.isBeginning?(e.a11y.disableEl(i),e.a11y.makeElNotFocusable(i)):(e.a11y.enableEl(i),e.a11y.makeElFocusable(i))),a&&a.length>0&&(e.isEnd?(e.a11y.disableEl(a),e.a11y.makeElNotFocusable(a)):(e.a11y.enableEl(a),e.a11y.makeElFocusable(a)))}},updatePagination:function(){var e=this,t=e.params.a11y;e.pagination&&e.params.pagination.clickable&&e.pagination.bullets&&e.pagination.bullets.length&&e.pagination.bullets.each((function(a){var i=m(a);e.a11y.makeElFocusable(i),e.params.pagination.renderBullet||(e.a11y.addElRole(i,"button"),e.a11y.addElLabel(i,t.paginationBulletMessage.replace(/\{\{index\}\}/,i.index()+1)))}))},init:function(){var e=this,t=e.params.a11y;e.$el.append(e.a11y.liveRegion);var a=e.$el;t.containerRoleDescriptionMessage&&e.a11y.addElRoleDescription(a,t.containerRoleDescriptionMessage),t.containerMessage&&e.a11y.addElLabel(a,t.containerMessage);var i,r,s,n=e.$wrapperEl,o=n.attr("id")||"swiper-wrapper-"+e.a11y.getRandomNumber(16);e.a11y.addElId(n,o),i=e.params.autoplay&&e.params.autoplay.enabled?"off":"polite",e.a11y.addElLive(n,i),t.itemRoleDescriptionMessage&&e.a11y.addElRoleDescription(m(e.slides),t.itemRoleDescriptionMessage),e.a11y.addElRole(m(e.slides),"group"),e.slides.each((function(a){var i=m(a),r=t.slideLabelMessage.replace(/\{\{index\}\}/,i.index()+1).replace(/\{\{slidesLength\}\}/,e.slides.length);e.a11y.addElLabel(i,r)})),e.navigation&&e.navigation.$nextEl&&(r=e.navigation.$nextEl),e.navigation&&e.navigation.$prevEl&&(s=e.navigation.$prevEl),r&&r.length&&(e.a11y.makeElFocusable(r),"BUTTON"!==r[0].tagName&&(e.a11y.addElRole(r,"button"),r.on("keydown",e.a11y.onEnterOrSpaceKey)),e.a11y.addElLabel(r,t.nextSlideMessage),e.a11y.addElControls(r,o)),s&&s.length&&(e.a11y.makeElFocusable(s),"BUTTON"!==s[0].tagName&&(e.a11y.addElRole(s,"button"),s.on("keydown",e.a11y.onEnterOrSpaceKey)),e.a11y.addElLabel(s,t.prevSlideMessage),e.a11y.addElControls(s,o)),e.pagination&&e.params.pagination.clickable&&e.pagination.bullets&&e.pagination.bullets.length&&e.pagination.$el.on("keydown","."+e.params.pagination.bulletClass.replace(/ /g,"."),e.a11y.onEnterOrSpaceKey)},destroy:function(){var e,t,a=this;a.a11y.liveRegion&&a.a11y.liveRegion.length>0&&a.a11y.liveRegion.remove(),a.navigation&&a.navigation.$nextEl&&(e=a.navigation.$nextEl),a.navigation&&a.navigation.$prevEl&&(t=a.navigation.$prevEl),e&&e.off("keydown",a.a11y.onEnterOrSpaceKey),t&&t.off("keydown",a.a11y.onEnterOrSpaceKey),a.pagination&&a.params.pagination.clickable&&a.pagination.bullets&&a.pagination.bullets.length&&a.pagination.$el.off("keydown","."+a.params.pagination.bulletClass.replace(/ /g,"."),a.a11y.onEnterOrSpaceKey)}},re={init:function(){var e=this,t=o();if(e.params.history){if(!t.history||!t.history.pushState)return e.params.history.enabled=!1,void(e.params.hashNavigation.enabled=!0);var a=e.history;a.initialized=!0,a.paths=re.getPathValues(e.params.url),(a.paths.key||a.paths.value)&&(a.scrollToSlide(0,a.paths.value,e.params.runCallbacksOnInit),e.params.history.replaceState||t.addEventListener("popstate",e.history.setHistoryPopState))}},destroy:function(){var e=o();this.params.history.replaceState||e.removeEventListener("popstate",this.history.setHistoryPopState)},setHistoryPopState:function(){var e=this;e.history.paths=re.getPathValues(e.params.url),e.history.scrollToSlide(e.params.speed,e.history.paths.value,!1)},getPathValues:function(e){var t=o(),a=(e?new URL(e):t.location).pathname.slice(1).split("/").filter((function(e){return""!==e})),i=a.length;return{key:a[i-2],value:a[i-1]}},setHistory:function(e,t){var a=this,i=o();if(a.history.initialized&&a.params.history.enabled){var r;r=a.params.url?new URL(a.params.url):i.location;var s=a.slides.eq(t),n=re.slugify(s.attr("data-history"));r.pathname.includes(e)||(n=e+"/"+n);var l=i.history.state;l&&l.value===n||(a.params.history.replaceState?i.history.replaceState({value:n},null,n):i.history.pushState({value:n},null,n))}},slugify:function(e){return e.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},scrollToSlide:function(e,t,a){var i=this;if(t)for(var r=0,s=i.slides.length;r<s;r+=1){var n=i.slides.eq(r);if(re.slugify(n.attr("data-history"))===t&&!n.hasClass(i.params.slideDuplicateClass)){var o=n.index();i.slideTo(o,e,a)}}else i.slideTo(0,e,a)}},se={onHashCange:function(){var e=this,t=s();e.emit("hashChange");var a=t.location.hash.replace("#","");if(a!==e.slides.eq(e.activeIndex).attr("data-hash")){var i=e.$wrapperEl.children("."+e.params.slideClass+'[data-hash="'+a+'"]').index();if(void 0===i)return;e.slideTo(i)}},setHash:function(){var e=this,t=o(),a=s();if(e.hashNavigation.initialized&&e.params.hashNavigation.enabled)if(e.params.hashNavigation.replaceState&&t.history&&t.history.replaceState)t.history.replaceState(null,null,"#"+e.slides.eq(e.activeIndex).attr("data-hash")||0),e.emit("hashSet");else{var i=e.slides.eq(e.activeIndex),r=i.attr("data-hash")||i.attr("data-history");a.location.hash=r||"",e.emit("hashSet")}},init:function(){var e=this,t=s(),a=o();if(!(!e.params.hashNavigation.enabled||e.params.history&&e.params.history.enabled)){e.hashNavigation.initialized=!0;var i=t.location.hash.replace("#","");if(i)for(var r=0,n=e.slides.length;r<n;r+=1){var l=e.slides.eq(r);if((l.attr("data-hash")||l.attr("data-history"))===i&&!l.hasClass(e.params.slideDuplicateClass)){var d=l.index();e.slideTo(d,0,e.params.runCallbacksOnInit,!0)}}e.params.hashNavigation.watchState&&m(a).on("hashchange",e.hashNavigation.onHashCange)}},destroy:function(){var e=o();this.params.hashNavigation.watchState&&m(e).off("hashchange",this.hashNavigation.onHashCange)}},ne={run:function(){var e=this,t=e.slides.eq(e.activeIndex),a=e.params.autoplay.delay;t.attr("data-swiper-autoplay")&&(a=t.attr("data-swiper-autoplay")||e.params.autoplay.delay),clearTimeout(e.autoplay.timeout),e.autoplay.timeout=x((function(){var t;e.params.autoplay.reverseDirection?e.params.loop?(e.loopFix(),t=e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.isBeginning?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(t=e.slideTo(e.slides.length-1,e.params.speed,!0,!0),e.emit("autoplay")):(t=e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.params.loop?(e.loopFix(),t=e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")):e.isEnd?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(t=e.slideTo(0,e.params.speed,!0,!0),e.emit("autoplay")):(t=e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")),(e.params.cssMode&&e.autoplay.running||!1===t)&&e.autoplay.run()}),a)},start:function(){var e=this;return void 0===e.autoplay.timeout&&!e.autoplay.running&&(e.autoplay.running=!0,e.emit("autoplayStart"),e.autoplay.run(),!0)},stop:function(){var e=this;return!!e.autoplay.running&&void 0!==e.autoplay.timeout&&(e.autoplay.timeout&&(clearTimeout(e.autoplay.timeout),e.autoplay.timeout=void 0),e.autoplay.running=!1,e.emit("autoplayStop"),!0)},pause:function(e){var t=this;t.autoplay.running&&(t.autoplay.paused||(t.autoplay.timeout&&clearTimeout(t.autoplay.timeout),t.autoplay.paused=!0,0!==e&&t.params.autoplay.waitForTransition?(t.$wrapperEl[0].addEventListener("transitionend",t.autoplay.onTransitionEnd),t.$wrapperEl[0].addEventListener("webkitTransitionEnd",t.autoplay.onTransitionEnd)):(t.autoplay.paused=!1,t.autoplay.run())))},onVisibilityChange:function(){var e=this,t=s();"hidden"===t.visibilityState&&e.autoplay.running&&e.autoplay.pause(),"visible"===t.visibilityState&&e.autoplay.paused&&(e.autoplay.run(),e.autoplay.paused=!1)},onTransitionEnd:function(e){var t=this;t&&!t.destroyed&&t.$wrapperEl&&e.target===t.$wrapperEl[0]&&(t.$wrapperEl[0].removeEventListener("transitionend",t.autoplay.onTransitionEnd),t.$wrapperEl[0].removeEventListener("webkitTransitionEnd",t.autoplay.onTransitionEnd),t.autoplay.paused=!1,t.autoplay.running?t.autoplay.run():t.autoplay.stop())}},oe={setTranslate:function(){for(var e=this,t=e.slides,a=0;a<t.length;a+=1){var i=e.slides.eq(a),r=-i[0].swiperSlideOffset;e.params.virtualTranslate||(r-=e.translate);var s=0;e.isHorizontal()||(s=r,r=0);var n=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(i[0].progress),0):1+Math.min(Math.max(i[0].progress,-1),0);i.css({opacity:n}).transform("translate3d("+r+"px, "+s+"px, 0px)")}},setTransition:function(e){var t=this,a=t.slides,i=t.$wrapperEl;if(a.transition(e),t.params.virtualTranslate&&0!==e){var r=!1;a.transitionEnd((function(){if(!r&&t&&!t.destroyed){r=!0,t.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],a=0;a<e.length;a+=1)i.trigger(e[a])}}))}}},le={setTranslate:function(){var e,t=this,a=t.$el,i=t.$wrapperEl,r=t.slides,s=t.width,n=t.height,o=t.rtlTranslate,l=t.size,d=t.browser,p=t.params.cubeEffect,c=t.isHorizontal(),u=t.virtual&&t.params.virtual.enabled,h=0;p.shadow&&(c?(0===(e=i.find(".swiper-cube-shadow")).length&&(e=m('<div class="swiper-cube-shadow"></div>'),i.append(e)),e.css({height:s+"px"})):0===(e=a.find(".swiper-cube-shadow")).length&&(e=m('<div class="swiper-cube-shadow"></div>'),a.append(e)));for(var f=0;f<r.length;f+=1){var v=r.eq(f),g=f;u&&(g=parseInt(v.attr("data-swiper-slide-index"),10));var w=90*g,b=Math.floor(w/360);o&&(w=-w,b=Math.floor(-w/360));var y=Math.max(Math.min(v[0].progress,1),-1),x=0,E=0,T=0;g%4==0?(x=4*-b*l,T=0):(g-1)%4==0?(x=0,T=4*-b*l):(g-2)%4==0?(x=l+4*b*l,T=l):(g-3)%4==0&&(x=-l,T=3*l+4*l*b),o&&(x=-x),c||(E=x,x=0);var C="rotateX("+(c?0:-w)+"deg) rotateY("+(c?w:0)+"deg) translate3d("+x+"px, "+E+"px, "+T+"px)";if(y<=1&&y>-1&&(h=90*g+90*y,o&&(h=90*-g-90*y)),v.transform(C),p.slideShadows){var S=c?v.find(".swiper-slide-shadow-left"):v.find(".swiper-slide-shadow-top"),A=c?v.find(".swiper-slide-shadow-right"):v.find(".swiper-slide-shadow-bottom");0===S.length&&(S=m('<div class="swiper-slide-shadow-'+(c?"left":"top")+'"></div>'),v.append(S)),0===A.length&&(A=m('<div class="swiper-slide-shadow-'+(c?"right":"bottom")+'"></div>'),v.append(A)),S.length&&(S[0].style.opacity=Math.max(-y,0)),A.length&&(A[0].style.opacity=Math.max(y,0))}}if(i.css({"-webkit-transform-origin":"50% 50% -"+l/2+"px","-moz-transform-origin":"50% 50% -"+l/2+"px","-ms-transform-origin":"50% 50% -"+l/2+"px","transform-origin":"50% 50% -"+l/2+"px"}),p.shadow)if(c)e.transform("translate3d(0px, "+(s/2+p.shadowOffset)+"px, "+-s/2+"px) rotateX(90deg) rotateZ(0deg) scale("+p.shadowScale+")");else{var M=Math.abs(h)-90*Math.floor(Math.abs(h)/90),z=1.5-(Math.sin(2*M*Math.PI/360)/2+Math.cos(2*M*Math.PI/360)/2),k=p.shadowScale,P=p.shadowScale/z,L=p.shadowOffset;e.transform("scale3d("+k+", 1, "+P+") translate3d(0px, "+(n/2+L)+"px, "+-n/2/P+"px) rotateX(-90deg)")}var $=d.isSafari||d.isWebView?-l/2:0;i.transform("translate3d(0px,0,"+$+"px) rotateX("+(t.isHorizontal()?0:h)+"deg) rotateY("+(t.isHorizontal()?-h:0)+"deg)")},setTransition:function(e){var t=this,a=t.$el;t.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),t.params.cubeEffect.shadow&&!t.isHorizontal()&&a.find(".swiper-cube-shadow").transition(e)}},de={setTranslate:function(){for(var e=this,t=e.slides,a=e.rtlTranslate,i=0;i<t.length;i+=1){var r=t.eq(i),s=r[0].progress;e.params.flipEffect.limitRotation&&(s=Math.max(Math.min(r[0].progress,1),-1));var n=-180*s,o=0,l=-r[0].swiperSlideOffset,d=0;if(e.isHorizontal()?a&&(n=-n):(d=l,l=0,o=-n,n=0),r[0].style.zIndex=-Math.abs(Math.round(s))+t.length,e.params.flipEffect.slideShadows){var p=e.isHorizontal()?r.find(".swiper-slide-shadow-left"):r.find(".swiper-slide-shadow-top"),c=e.isHorizontal()?r.find(".swiper-slide-shadow-right"):r.find(".swiper-slide-shadow-bottom");0===p.length&&(p=m('<div class="swiper-slide-shadow-'+(e.isHorizontal()?"left":"top")+'"></div>'),r.append(p)),0===c.length&&(c=m('<div class="swiper-slide-shadow-'+(e.isHorizontal()?"right":"bottom")+'"></div>'),r.append(c)),p.length&&(p[0].style.opacity=Math.max(-s,0)),c.length&&(c[0].style.opacity=Math.max(s,0))}r.transform("translate3d("+l+"px, "+d+"px, 0px) rotateX("+o+"deg) rotateY("+n+"deg)")}},setTransition:function(e){var t=this,a=t.slides,i=t.activeIndex,r=t.$wrapperEl;if(a.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),t.params.virtualTranslate&&0!==e){var s=!1;a.eq(i).transitionEnd((function(){if(!s&&t&&!t.destroyed){s=!0,t.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],a=0;a<e.length;a+=1)r.trigger(e[a])}}))}}},pe={setTranslate:function(){for(var e=this,t=e.width,a=e.height,i=e.slides,r=e.slidesSizesGrid,s=e.params.coverflowEffect,n=e.isHorizontal(),o=e.translate,l=n?t/2-o:a/2-o,d=n?s.rotate:-s.rotate,p=s.depth,c=0,u=i.length;c<u;c+=1){var h=i.eq(c),f=r[c],v=(l-h[0].swiperSlideOffset-f/2)/f*s.modifier,g=n?d*v:0,w=n?0:d*v,b=-p*Math.abs(v),y=s.stretch;"string"==typeof y&&-1!==y.indexOf("%")&&(y=parseFloat(s.stretch)/100*f);var x=n?0:y*v,E=n?y*v:0,T=1-(1-s.scale)*Math.abs(v);Math.abs(E)<.001&&(E=0),Math.abs(x)<.001&&(x=0),Math.abs(b)<.001&&(b=0),Math.abs(g)<.001&&(g=0),Math.abs(w)<.001&&(w=0),Math.abs(T)<.001&&(T=0);var C="translate3d("+E+"px,"+x+"px,"+b+"px)  rotateX("+w+"deg) rotateY("+g+"deg) scale("+T+")";if(h.transform(C),h[0].style.zIndex=1-Math.abs(Math.round(v)),s.slideShadows){var S=n?h.find(".swiper-slide-shadow-left"):h.find(".swiper-slide-shadow-top"),A=n?h.find(".swiper-slide-shadow-right"):h.find(".swiper-slide-shadow-bottom");0===S.length&&(S=m('<div class="swiper-slide-shadow-'+(n?"left":"top")+'"></div>'),h.append(S)),0===A.length&&(A=m('<div class="swiper-slide-shadow-'+(n?"right":"bottom")+'"></div>'),h.append(A)),S.length&&(S[0].style.opacity=v>0?v:0),A.length&&(A[0].style.opacity=-v>0?-v:0)}}},setTransition:function(e){this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)}},ce={init:function(){var e=this,t=e.params.thumbs;if(e.thumbs.initialized)return!1;e.thumbs.initialized=!0;var a=e.constructor;return t.swiper instanceof a?(e.thumbs.swiper=t.swiper,S(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),S(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1})):C(t.swiper)&&(e.thumbs.swiper=new a(S({},t.swiper,{watchSlidesVisibility:!0,watchSlidesProgress:!0,slideToClickedSlide:!1})),e.thumbs.swiperCreated=!0),e.thumbs.swiper.$el.addClass(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",e.thumbs.onThumbClick),!0},onThumbClick:function(){var e=this,t=e.thumbs.swiper;if(t){var a=t.clickedIndex,i=t.clickedSlide;if(!(i&&m(i).hasClass(e.params.thumbs.slideThumbActiveClass)||null==a)){var r;if(r=t.params.loop?parseInt(m(t.clickedSlide).attr("data-swiper-slide-index"),10):a,e.params.loop){var s=e.activeIndex;e.slides.eq(s).hasClass(e.params.slideDuplicateClass)&&(e.loopFix(),e._clientLeft=e.$wrapperEl[0].clientLeft,s=e.activeIndex);var n=e.slides.eq(s).prevAll('[data-swiper-slide-index="'+r+'"]').eq(0).index(),o=e.slides.eq(s).nextAll('[data-swiper-slide-index="'+r+'"]').eq(0).index();r=void 0===n?o:void 0===o?n:o-s<s-n?o:n}e.slideTo(r)}}},update:function(e){var t=this,a=t.thumbs.swiper;if(a){var i="auto"===a.params.slidesPerView?a.slidesPerViewDynamic():a.params.slidesPerView,r=t.params.thumbs.autoScrollOffset,s=r&&!a.params.loop;if(t.realIndex!==a.realIndex||s){var n,o,l=a.activeIndex;if(a.params.loop){a.slides.eq(l).hasClass(a.params.slideDuplicateClass)&&(a.loopFix(),a._clientLeft=a.$wrapperEl[0].clientLeft,l=a.activeIndex);var d=a.slides.eq(l).prevAll('[data-swiper-slide-index="'+t.realIndex+'"]').eq(0).index(),p=a.slides.eq(l).nextAll('[data-swiper-slide-index="'+t.realIndex+'"]').eq(0).index();n=void 0===d?p:void 0===p?d:p-l==l-d?l:p-l<l-d?p:d,o=t.activeIndex>t.previousIndex?"next":"prev"}else o=(n=t.realIndex)>t.previousIndex?"next":"prev";s&&(n+="next"===o?r:-1*r),a.visibleSlidesIndexes&&a.visibleSlidesIndexes.indexOf(n)<0&&(a.params.centeredSlides?n=n>l?n-Math.floor(i/2)+1:n+Math.floor(i/2)-1:n>l&&(n=n-i+1),a.slideTo(n,e?0:void 0))}var c=1,u=t.params.thumbs.slideThumbActiveClass;if(t.params.slidesPerView>1&&!t.params.centeredSlides&&(c=t.params.slidesPerView),t.params.thumbs.multipleActiveThumbs||(c=1),c=Math.floor(c),a.slides.removeClass(u),a.params.loop||a.params.virtual&&a.params.virtual.enabled)for(var h=0;h<c;h+=1)a.$wrapperEl.children('[data-swiper-slide-index="'+(t.realIndex+h)+'"]').addClass(u);else for(var f=0;f<c;f+=1)a.slides.eq(t.realIndex+f).addClass(u)}}},ue=[j,_,{name:"mousewheel",params:{mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null}},create:function(){A(this,{mousewheel:{enabled:!1,lastScrollTime:E(),lastEventBeforeSnap:void 0,recentWheelEvents:[],enable:U.enable,disable:U.disable,handle:U.handle,handleMouseEnter:U.handleMouseEnter,handleMouseLeave:U.handleMouseLeave,animateSlider:U.animateSlider,releaseScroll:U.releaseScroll}})},on:{init:function(e){!e.params.mousewheel.enabled&&e.params.cssMode&&e.mousewheel.disable(),e.params.mousewheel.enabled&&e.mousewheel.enable()},destroy:function(e){e.params.cssMode&&e.mousewheel.enable(),e.mousewheel.enabled&&e.mousewheel.disable()}}},{name:"navigation",params:{navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}},create:function(){A(this,{navigation:t({},Z)})},on:{init:function(e){e.navigation.init(),e.navigation.update()},toEdge:function(e){e.navigation.update()},fromEdge:function(e){e.navigation.update()},destroy:function(e){e.navigation.destroy()},click:function(e,t){var a=e.navigation,i=a.$nextEl,r=a.$prevEl,s=t.target;if(e.params.navigation.hideOnClick&&!m(s).is(r)&&!m(s).is(i)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===s||e.pagination.el.contains(s)))return;var n;i?n=i.hasClass(e.params.navigation.hiddenClass):r&&(n=r.hasClass(e.params.navigation.hiddenClass)),!0===n?e.emit("navigationShow"):e.emit("navigationHide"),i&&i.toggleClass(e.params.navigation.hiddenClass),r&&r.toggleClass(e.params.navigation.hiddenClass)}}}},{name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(e){return e},formatFractionTotal:function(e){return e},bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",progressbarOppositeClass:"swiper-pagination-progressbar-opposite",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create:function(){A(this,{pagination:t({dynamicBulletIndex:0},Q)})},on:{init:function(e){e.pagination.init(),e.pagination.render(),e.pagination.update()},activeIndexChange:function(e){(e.params.loop||void 0===e.snapIndex)&&e.pagination.update()},snapIndexChange:function(e){e.params.loop||e.pagination.update()},slidesLengthChange:function(e){e.params.loop&&(e.pagination.render(),e.pagination.update())},snapGridLengthChange:function(e){e.params.loop||(e.pagination.render(),e.pagination.update())},destroy:function(e){e.pagination.destroy()},click:function(e,t){var a=t.target;if(e.params.pagination.el&&e.params.pagination.hideOnClick&&e.pagination.$el.length>0&&!m(a).hasClass(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&a===e.navigation.nextEl||e.navigation.prevEl&&a===e.navigation.prevEl))return;!0===e.pagination.$el.hasClass(e.params.pagination.hiddenClass)?e.emit("paginationShow"):e.emit("paginationHide"),e.pagination.$el.toggleClass(e.params.pagination.hiddenClass)}}}},{name:"scrollbar",params:{scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag"}},create:function(){A(this,{scrollbar:t({isTouched:!1,timeout:null,dragTimeout:null},K)})},on:{init:function(e){e.scrollbar.init(),e.scrollbar.updateSize(),e.scrollbar.setTranslate()},update:function(e){e.scrollbar.updateSize()},resize:function(e){e.scrollbar.updateSize()},observerUpdate:function(e){e.scrollbar.updateSize()},setTranslate:function(e){e.scrollbar.setTranslate()},setTransition:function(e,t){e.scrollbar.setTransition(t)},destroy:function(e){e.scrollbar.destroy()}}},{name:"parallax",params:{parallax:{enabled:!1}},create:function(){A(this,{parallax:t({},J)})},on:{beforeInit:function(e){e.params.parallax.enabled&&(e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)},init:function(e){e.params.parallax.enabled&&e.parallax.setTranslate()},setTranslate:function(e){e.params.parallax.enabled&&e.parallax.setTranslate()},setTransition:function(e,t){e.params.parallax.enabled&&e.parallax.setTransition(t)}}},{name:"zoom",params:{zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}},create:function(){var e=this;A(e,{zoom:t({enabled:!1,scale:1,currentScale:1,isScaling:!1,gesture:{$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},image:{isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},velocity:{x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0}},ee)});var a=1;Object.defineProperty(e.zoom,"scale",{get:function(){return a},set:function(t){if(a!==t){var i=e.zoom.gesture.$imageEl?e.zoom.gesture.$imageEl[0]:void 0,r=e.zoom.gesture.$slideEl?e.zoom.gesture.$slideEl[0]:void 0;e.emit("zoomChange",t,i,r)}a=t}})},on:{init:function(e){e.params.zoom.enabled&&e.zoom.enable()},destroy:function(e){e.zoom.disable()},touchStart:function(e,t){e.zoom.enabled&&e.zoom.onTouchStart(t)},touchEnd:function(e,t){e.zoom.enabled&&e.zoom.onTouchEnd(t)},doubleTap:function(e,t){!e.animating&&e.params.zoom.enabled&&e.zoom.enabled&&e.params.zoom.toggle&&e.zoom.toggle(t)},transitionEnd:function(e){e.zoom.enabled&&e.params.zoom.enabled&&e.zoom.onTransitionEnd()},slideChange:function(e){e.zoom.enabled&&e.params.zoom.enabled&&e.params.cssMode&&e.zoom.onTransitionEnd()}}},{name:"lazy",params:{lazy:{checkInView:!1,enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,scrollingElement:"",elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}},create:function(){A(this,{lazy:t({initialImageLoaded:!1},te)})},on:{beforeInit:function(e){e.params.lazy.enabled&&e.params.preloadImages&&(e.params.preloadImages=!1)},init:function(e){e.params.lazy.enabled&&!e.params.loop&&0===e.params.initialSlide&&(e.params.lazy.checkInView?e.lazy.checkInViewOnLoad():e.lazy.load())},scroll:function(e){e.params.freeMode&&!e.params.freeModeSticky&&e.lazy.load()},"scrollbarDragMove resize _freeModeNoMomentumRelease":function(e){e.params.lazy.enabled&&e.lazy.load()},transitionStart:function(e){e.params.lazy.enabled&&(e.params.lazy.loadOnTransitionStart||!e.params.lazy.loadOnTransitionStart&&!e.lazy.initialImageLoaded)&&e.lazy.load()},transitionEnd:function(e){e.params.lazy.enabled&&!e.params.lazy.loadOnTransitionStart&&e.lazy.load()},slideChange:function(e){e.params.lazy.enabled&&e.params.cssMode&&e.lazy.load()}}},{name:"controller",params:{controller:{control:void 0,inverse:!1,by:"slide"}},create:function(){A(this,{controller:t({control:this.params.controller.control},ae)})},on:{update:function(e){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)},resize:function(e){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)},observerUpdate:function(e){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)},setTranslate:function(e,t,a){e.controller.control&&e.controller.setTranslate(t,a)},setTransition:function(e,t,a){e.controller.control&&e.controller.setTransition(t,a)}}},{name:"a11y",params:{a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide ",slideLabelMessage:" / ",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null}},create:function(){A(this,{a11y:t({},ie,{liveRegion:m('<span class="'+this.params.a11y.notificationClass+'" aria-live="assertive" aria-atomic="true"></span>')})})},on:{afterInit:function(e){e.params.a11y.enabled&&(e.a11y.init(),e.a11y.updateNavigation())},toEdge:function(e){e.params.a11y.enabled&&e.a11y.updateNavigation()},fromEdge:function(e){e.params.a11y.enabled&&e.a11y.updateNavigation()},paginationUpdate:function(e){e.params.a11y.enabled&&e.a11y.updatePagination()},destroy:function(e){e.params.a11y.enabled&&e.a11y.destroy()}}},{name:"history",params:{history:{enabled:!1,replaceState:!1,key:"slides"}},create:function(){A(this,{history:t({},re)})},on:{init:function(e){e.params.history.enabled&&e.history.init()},destroy:function(e){e.params.history.enabled&&e.history.destroy()},transitionEnd:function(e){e.history.initialized&&e.history.setHistory(e.params.history.key,e.activeIndex)},slideChange:function(e){e.history.initialized&&e.params.cssMode&&e.history.setHistory(e.params.history.key,e.activeIndex)}}},{name:"hash-navigation",params:{hashNavigation:{enabled:!1,replaceState:!1,watchState:!1}},create:function(){A(this,{hashNavigation:t({initialized:!1},se)})},on:{init:function(e){e.params.hashNavigation.enabled&&e.hashNavigation.init()},destroy:function(e){e.params.hashNavigation.enabled&&e.hashNavigation.destroy()},transitionEnd:function(e){e.hashNavigation.initialized&&e.hashNavigation.setHash()},slideChange:function(e){e.hashNavigation.initialized&&e.params.cssMode&&e.hashNavigation.setHash()}}},{name:"autoplay",params:{autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1}},create:function(){A(this,{autoplay:t({},ne,{running:!1,paused:!1})})},on:{init:function(e){e.params.autoplay.enabled&&(e.autoplay.start(),s().addEventListener("visibilitychange",e.autoplay.onVisibilityChange))},beforeTransitionStart:function(e,t,a){e.autoplay.running&&(a||!e.params.autoplay.disableOnInteraction?e.autoplay.pause(t):e.autoplay.stop())},sliderFirstMove:function(e){e.autoplay.running&&(e.params.autoplay.disableOnInteraction?e.autoplay.stop():e.autoplay.pause())},touchEnd:function(e){e.params.cssMode&&e.autoplay.paused&&!e.params.autoplay.disableOnInteraction&&e.autoplay.run()},destroy:function(e){e.autoplay.running&&e.autoplay.stop(),s().removeEventListener("visibilitychange",e.autoplay.onVisibilityChange)}}},{name:"effect-fade",params:{fadeEffect:{crossFade:!1}},create:function(){A(this,{fadeEffect:t({},oe)})},on:{beforeInit:function(e){if("fade"===e.params.effect){e.classNames.push(e.params.containerModifierClass+"fade");var t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};S(e.params,t),S(e.originalParams,t)}},setTranslate:function(e){"fade"===e.params.effect&&e.fadeEffect.setTranslate()},setTransition:function(e,t){"fade"===e.params.effect&&e.fadeEffect.setTransition(t)}}},{name:"effect-cube",params:{cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}},create:function(){A(this,{cubeEffect:t({},le)})},on:{beforeInit:function(e){if("cube"===e.params.effect){e.classNames.push(e.params.containerModifierClass+"cube"),e.classNames.push(e.params.containerModifierClass+"3d");var t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0};S(e.params,t),S(e.originalParams,t)}},setTranslate:function(e){"cube"===e.params.effect&&e.cubeEffect.setTranslate()},setTransition:function(e,t){"cube"===e.params.effect&&e.cubeEffect.setTransition(t)}}},{name:"effect-flip",params:{flipEffect:{slideShadows:!0,limitRotation:!0}},create:function(){A(this,{flipEffect:t({},de)})},on:{beforeInit:function(e){if("flip"===e.params.effect){e.classNames.push(e.params.containerModifierClass+"flip"),e.classNames.push(e.params.containerModifierClass+"3d");var t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};S(e.params,t),S(e.originalParams,t)}},setTranslate:function(e){"flip"===e.params.effect&&e.flipEffect.setTranslate()},setTransition:function(e,t){"flip"===e.params.effect&&e.flipEffect.setTransition(t)}}},{name:"effect-coverflow",params:{coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}},create:function(){A(this,{coverflowEffect:t({},pe)})},on:{beforeInit:function(e){"coverflow"===e.params.effect&&(e.classNames.push(e.params.containerModifierClass+"coverflow"),e.classNames.push(e.params.containerModifierClass+"3d"),e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)},setTranslate:function(e){"coverflow"===e.params.effect&&e.coverflowEffect.setTranslate()},setTransition:function(e,t){"coverflow"===e.params.effect&&e.coverflowEffect.setTransition(t)}}},{name:"thumbs",params:{thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-container-thumbs"}},create:function(){A(this,{thumbs:t({swiper:null,initialized:!1},ce)})},on:{beforeInit:function(e){var t=e.params.thumbs;t&&t.swiper&&(e.thumbs.init(),e.thumbs.update(!0))},slideChange:function(e){e.thumbs.swiper&&e.thumbs.update()},update:function(e){e.thumbs.swiper&&e.thumbs.update()},resize:function(e){e.thumbs.swiper&&e.thumbs.update()},observerUpdate:function(e){e.thumbs.swiper&&e.thumbs.update()},setTransition:function(e,t){var a=e.thumbs.swiper;a&&a.setTransition(t)},beforeDestroy:function(e){var t=e.thumbs.swiper;t&&e.thumbs.swiperCreated&&t&&t.destroy()}}}];return V.use(ue),V}()}},t={};function a(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={id:i,exports:{}};return e[i].call(s.exports,s,s.exports,a),s.exports}a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){a(110),a(283);const e=a(957),t=a(833),i=a(164);(async()=>{let a="",r="";try{const e=await t(),s=document.querySelector("#bbTimeList #bber-talk"),n=document.querySelector(".swiper-weapper-aside");console.log(e);for(const t of e.items){const e=i(t.content);a+=`<div class='li-style swiper-slide'>${e}</div>`,r+=`<div class='swiper-slide aside-bbtalk'>${e}</div>`}s.innerHTML=a,n.innerHTML=r}catch(e){a+="<div class='li-style swiper-slide'>获取失败</div>",r+="<div class='swiper-slide aside-bbtalk'>获取失败</div>"}new e("#bbtalk",{direction:"vertical",loop:!0,autoplay:{delay:2500,disableOnInteraction:!1}}),new e(".swiper-container-aside",{loop:!0,autoHeight:!1,effect:"flip",autoplay:{delay:2500,disableOnInteraction:!0}})})()}()}();]]></content>
  </entry>
  <entry>
    <title></title>
    <url>/img/js/speak/ispeak.umd.js</url>
    <content><![CDATA[var Lc=Object.defineProperty,Nc=Object.defineProperties;var Rc=Object.getOwnPropertyDescriptors;var ur=Object.getOwnPropertySymbols;var Dc=Object.prototype.hasOwnProperty,Hc=Object.prototype.propertyIsEnumerable;var fr=(te,Z,Ce)=>Z in te?Lc(te,Z,{enumerable:!0,configurable:!0,writable:!0,value:Ce}):te[Z]=Ce,ut=(te,Z)=>{for(var Ce in Z||(Z={}))Dc.call(Z,Ce)&&fr(te,Ce,Z[Ce]);if(ur)for(var Ce of ur(Z))Hc.call(Z,Ce)&&fr(te,Ce,Z[Ce]);return te},hs=(te,Z)=>Nc(te,Rc(Z));(function(te,Z){typeof exports=="object"&&typeof module!="undefined"?Z(exports):typeof define=="function"&&define.amd?define(["exports"],Z):(te=typeof globalThis!="undefined"?globalThis:te||self,Z(te.ispeak={}))})(this,function(te){"use strict";function Z(e,t){const n=Object.create(null),s=e.split(",");for(let o=0;o<s.length;o++)n[s[o]]=!0;return t?o=>!!n[o.toLowerCase()]:o=>!!n[o]}const ar=Z("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function ps(e){return!!e||e===""}function Kt(e){if(A(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],o=se(s)?pr(s):Kt(s);if(o)for(const r in o)t[r]=o[r]}return t}else{if(se(e))return e;if(X(e))return e}}const dr=/;(?![^(]*\))/g,hr=/:(.+)/;function pr(e){const t={};return e.split(dr).forEach(n=>{if(n){const s=n.split(hr);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function bn(e){let t="";if(se(e))t=e;else if(A(e))for(let n=0;n<e.length;n++){const s=bn(e[n]);s&&(t+=s+" ")}else if(X(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const ft=e=>se(e)?e:e==null?"":A(e)||X(e)&&(e.toString===bs||!$(e.toString))?JSON.stringify(e,gs,2):String(e),gs=(e,t)=>t&&t.__v_isRef?gs(e,t.value):dt(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,o])=>(n[`${s} =>`]=o,n),{})}:ms(t)?{[`Set(${t.size})`]:[...t.values()]}:X(t)&&!A(t)&&!vs(t)?String(t):t,D={},at=[],we=()=>{},gr=()=>!1,mr=/^on[^a-z]/,zt=e=>mr.test(e),vn=e=>e.startsWith("onUpdate:"),ne=Object.assign,yn=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},_r=Object.prototype.hasOwnProperty,B=(e,t)=>_r.call(e,t),A=Array.isArray,dt=e=>Wt(e)==="[object Map]",ms=e=>Wt(e)==="[object Set]",$=e=>typeof e=="function",se=e=>typeof e=="string",Cn=e=>typeof e=="symbol",X=e=>e!==null&&typeof e=="object",_s=e=>X(e)&&$(e.then)&&$(e.catch),bs=Object.prototype.toString,Wt=e=>bs.call(e),br=e=>Wt(e).slice(8,-1),vs=e=>Wt(e)==="[object Object]",wn=e=>se(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,qt=Z(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Vt=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},vr=/-(\w)/g,ht=Vt(e=>e.replace(vr,(t,n)=>n?n.toUpperCase():"")),yr=/\B([A-Z])/g,pt=Vt(e=>e.replace(yr,"-$1").toLowerCase()),ys=Vt(e=>e.charAt(0).toUpperCase()+e.slice(1)),xn=Vt(e=>e?`on${ys(e)}`:""),kt=(e,t)=>!Object.is(e,t),En=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Yt=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Cs=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let ws;const Cr=()=>ws||(ws=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let Pe;class wr{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&Pe&&(this.parent=Pe,this.index=(Pe.scopes||(Pe.scopes=[])).push(this)-1)}run(t){if(this.active)try{return Pe=this,t()}finally{Pe=this.parent}}on(){Pe=this}off(){Pe=this.parent}stop(t){if(this.active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.active=!1}}}function xr(e,t=Pe){t&&t.active&&t.effects.push(e)}const Tn=e=>{const t=new Set(e);return t.w=0,t.n=0,t},xs=e=>(e.w&je)>0,Es=e=>(e.n&je)>0,Er=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=je},Tr=e=>{const{deps:t}=e;if(t.length){let n=0;for(let s=0;s<t.length;s++){const o=t[s];xs(o)&&!Es(o)?o.delete(e):t[n++]=o,o.w&=~je,o.n&=~je}t.length=n}},kn=new WeakMap;let It=0,je=1;const In=30;let Te;const Ze=Symbol(""),An=Symbol("");class Fn{constructor(t,n=null,s){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,xr(this,s)}run(){if(!this.active)return this.fn();let t=Te,n=Ue;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Te,Te=this,Ue=!0,je=1<<++It,It<=In?Er(this):Ts(this),this.fn()}finally{It<=In&&Tr(this),je=1<<--It,Te=this.parent,Ue=n,this.parent=void 0}}stop(){this.active&&(Ts(this),this.onStop&&this.onStop(),this.active=!1)}}function Ts(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let Ue=!0;const ks=[];function gt(){ks.push(Ue),Ue=!1}function mt(){const e=ks.pop();Ue=e===void 0?!0:e}function pe(e,t,n){if(Ue&&Te){let s=kn.get(e);s||kn.set(e,s=new Map);let o=s.get(n);o||s.set(n,o=Tn()),Is(o)}}function Is(e,t){let n=!1;It<=In?Es(e)||(e.n|=je,n=!xs(e)):n=!e.has(Te),n&&(e.add(Te),Te.deps.push(e))}function Oe(e,t,n,s,o,r){const i=kn.get(e);if(!i)return;let l=[];if(t==="clear")l=[...i.values()];else if(n==="length"&&A(e))i.forEach((u,a)=>{(a==="length"||a>=s)&&l.push(u)});else switch(n!==void 0&&l.push(i.get(n)),t){case"add":A(e)?wn(n)&&l.push(i.get("length")):(l.push(i.get(Ze)),dt(e)&&l.push(i.get(An)));break;case"delete":A(e)||(l.push(i.get(Ze)),dt(e)&&l.push(i.get(An)));break;case"set":dt(e)&&l.push(i.get(Ze));break}if(l.length===1)l[0]&&$n(l[0]);else{const u=[];for(const a of l)a&&u.push(...a);$n(Tn(u))}}function $n(e,t){for(const n of A(e)?e:[...e])(n!==Te||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const kr=Z("__proto__,__v_isRef,__isVue"),As=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(Cn)),Ir=Mn(),Ar=Mn(!1,!0),Fr=Mn(!0),Fs=$r();function $r(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const s=L(this);for(let r=0,i=this.length;r<i;r++)pe(s,"get",r+"");const o=s[t](...n);return o===-1||o===!1?s[t](...n.map(L)):o}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){gt();const s=L(this)[t].apply(this,n);return mt(),s}}),e}function Mn(e=!1,t=!1){return function(s,o,r){if(o==="__v_isReactive")return!e;if(o==="__v_isReadonly")return e;if(o==="__v_isShallow")return t;if(o==="__v_raw"&&r===(e?t?qr:Rs:t?Ns:Ls).get(s))return s;const i=A(s);if(!e&&i&&B(Fs,o))return Reflect.get(Fs,o,r);const l=Reflect.get(s,o,r);return(Cn(o)?As.has(o):kr(o))||(e||pe(s,"get",o),t)?l:oe(l)?!i||!wn(o)?l.value:l:X(l)?e?Ds(l):tn(l):l}}const Mr=$s(),Pr=$s(!0);function $s(e=!1){return function(n,s,o,r){let i=n[s];if(At(i)&&oe(i)&&!oe(o))return!1;if(!e&&!At(o)&&(Hs(o)||(o=L(o),i=L(i)),!A(n)&&oe(i)&&!oe(o)))return i.value=o,!0;const l=A(n)&&wn(s)?Number(s)<n.length:B(n,s),u=Reflect.set(n,s,o,r);return n===L(r)&&(l?kt(o,i)&&Oe(n,"set",s,o):Oe(n,"add",s,o)),u}}function Or(e,t){const n=B(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&n&&Oe(e,"delete",t,void 0),s}function Sr(e,t){const n=Reflect.has(e,t);return(!Cn(t)||!As.has(t))&&pe(e,"has",t),n}function Br(e){return pe(e,"iterate",A(e)?"length":Ze),Reflect.ownKeys(e)}const Ms={get:Ir,set:Mr,deleteProperty:Or,has:Sr,ownKeys:Br},Lr={get:Fr,set(e,t){return!0},deleteProperty(e,t){return!0}},Nr=ne({},Ms,{get:Ar,set:Pr}),Pn=e=>e,Jt=e=>Reflect.getPrototypeOf(e);function Zt(e,t,n=!1,s=!1){e=e.__v_raw;const o=L(e),r=L(t);t!==r&&!n&&pe(o,"get",t),!n&&pe(o,"get",r);const{has:i}=Jt(o),l=s?Pn:n?Bn:Ft;if(i.call(o,t))return l(e.get(t));if(i.call(o,r))return l(e.get(r));e!==o&&e.get(t)}function Xt(e,t=!1){const n=this.__v_raw,s=L(n),o=L(e);return e!==o&&!t&&pe(s,"has",e),!t&&pe(s,"has",o),e===o?n.has(e):n.has(e)||n.has(o)}function Qt(e,t=!1){return e=e.__v_raw,!t&&pe(L(e),"iterate",Ze),Reflect.get(e,"size",e)}function Ps(e){e=L(e);const t=L(this);return Jt(t).has.call(t,e)||(t.add(e),Oe(t,"add",e,e)),this}function Os(e,t){t=L(t);const n=L(this),{has:s,get:o}=Jt(n);let r=s.call(n,e);r||(e=L(e),r=s.call(n,e));const i=o.call(n,e);return n.set(e,t),r?kt(t,i)&&Oe(n,"set",e,t):Oe(n,"add",e,t),this}function Ss(e){const t=L(this),{has:n,get:s}=Jt(t);let o=n.call(t,e);o||(e=L(e),o=n.call(t,e)),s&&s.call(t,e);const r=t.delete(e);return o&&Oe(t,"delete",e,void 0),r}function Bs(){const e=L(this),t=e.size!==0,n=e.clear();return t&&Oe(e,"clear",void 0,void 0),n}function Gt(e,t){return function(s,o){const r=this,i=r.__v_raw,l=L(i),u=t?Pn:e?Bn:Ft;return!e&&pe(l,"iterate",Ze),i.forEach((a,h)=>s.call(o,u(a),u(h),r))}}function en(e,t,n){return function(...s){const o=this.__v_raw,r=L(o),i=dt(r),l=e==="entries"||e===Symbol.iterator&&i,u=e==="keys"&&i,a=o[e](...s),h=n?Pn:t?Bn:Ft;return!t&&pe(r,"iterate",u?An:Ze),{next(){const{value:b,done:_}=a.next();return _?{value:b,done:_}:{value:l?[h(b[0]),h(b[1])]:h(b),done:_}},[Symbol.iterator](){return this}}}}function Ke(e){return function(...t){return e==="delete"?!1:this}}function Rr(){const e={get(r){return Zt(this,r)},get size(){return Qt(this)},has:Xt,add:Ps,set:Os,delete:Ss,clear:Bs,forEach:Gt(!1,!1)},t={get(r){return Zt(this,r,!1,!0)},get size(){return Qt(this)},has:Xt,add:Ps,set:Os,delete:Ss,clear:Bs,forEach:Gt(!1,!0)},n={get(r){return Zt(this,r,!0)},get size(){return Qt(this,!0)},has(r){return Xt.call(this,r,!0)},add:Ke("add"),set:Ke("set"),delete:Ke("delete"),clear:Ke("clear"),forEach:Gt(!0,!1)},s={get(r){return Zt(this,r,!0,!0)},get size(){return Qt(this,!0)},has(r){return Xt.call(this,r,!0)},add:Ke("add"),set:Ke("set"),delete:Ke("delete"),clear:Ke("clear"),forEach:Gt(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{e[r]=en(r,!1,!1),n[r]=en(r,!0,!1),t[r]=en(r,!1,!0),s[r]=en(r,!0,!0)}),[e,n,t,s]}const[Dr,Hr,jr,Ur]=Rr();function On(e,t){const n=t?e?Ur:jr:e?Hr:Dr;return(s,o,r)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?s:Reflect.get(B(n,o)&&o in s?n:s,o,r)}const Kr={get:On(!1,!1)},zr={get:On(!1,!0)},Wr={get:On(!0,!1)},Ls=new WeakMap,Ns=new WeakMap,Rs=new WeakMap,qr=new WeakMap;function Vr(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Yr(e){return e.__v_skip||!Object.isExtensible(e)?0:Vr(br(e))}function tn(e){return At(e)?e:Sn(e,!1,Ms,Kr,Ls)}function Jr(e){return Sn(e,!1,Nr,zr,Ns)}function Ds(e){return Sn(e,!0,Lr,Wr,Rs)}function Sn(e,t,n,s,o){if(!X(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=o.get(e);if(r)return r;const i=Yr(e);if(i===0)return e;const l=new Proxy(e,i===2?s:n);return o.set(e,l),l}function _t(e){return At(e)?_t(e.__v_raw):!!(e&&e.__v_isReactive)}function At(e){return!!(e&&e.__v_isReadonly)}function Hs(e){return!!(e&&e.__v_isShallow)}function js(e){return _t(e)||At(e)}function L(e){const t=e&&e.__v_raw;return t?L(t):e}function Us(e){return Yt(e,"__v_skip",!0),e}const Ft=e=>X(e)?tn(e):e,Bn=e=>X(e)?Ds(e):e;function Ks(e){Ue&&Te&&(e=L(e),Is(e.dep||(e.dep=Tn())))}function zs(e,t){e=L(e),e.dep&&$n(e.dep)}function oe(e){return!!(e&&e.__v_isRef===!0)}function ze(e){return Zr(e,!1)}function Zr(e,t){return oe(e)?e:new Xr(e,t)}class Xr{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:L(t),this._value=n?t:Ft(t)}get value(){return Ks(this),this._value}set value(t){t=this.__v_isShallow?t:L(t),kt(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:Ft(t),zs(this))}}function _e(e){return oe(e)?e.value:e}const Qr={get:(e,t,n)=>_e(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const o=e[t];return oe(o)&&!oe(n)?(o.value=n,!0):Reflect.set(e,t,n,s)}};function Ws(e){return _t(e)?e:new Proxy(e,Qr)}class Gr{constructor(t,n,s,o){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new Fn(t,()=>{this._dirty||(this._dirty=!0,zs(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=s}get value(){const t=L(this);return Ks(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function ei(e,t,n=!1){let s,o;const r=$(e);return r?(s=e,o=we):(s=e.get,o=e.set),new Gr(s,o,r||!o,n)}Promise.resolve();function We(e,t,n,s){let o;try{o=s?e(...s):e()}catch(r){nn(r,t,n)}return o}function be(e,t,n,s){if($(e)){const r=We(e,t,n,s);return r&&_s(r)&&r.catch(i=>{nn(i,t,n)}),r}const o=[];for(let r=0;r<e.length;r++)o.push(be(e[r],t,n,s));return o}function nn(e,t,n,s=!0){const o=t?t.vnode:null;if(t){let r=t.parent;const i=t.proxy,l=n;for(;r;){const a=r.ec;if(a){for(let h=0;h<a.length;h++)if(a[h](e,i,l)===!1)return}r=r.parent}const u=t.appContext.config.errorHandler;if(u){We(u,null,10,[e,i,l]);return}}ti(e,n,o,s)}function ti(e,t,n,s=!0){console.error(e)}let sn=!1,Ln=!1;const ge=[];let Se=0;const $t=[];let Mt=null,bt=0;const Pt=[];let qe=null,vt=0;const qs=Promise.resolve();let Nn=null,Rn=null;function ni(e){const t=Nn||qs;return e?t.then(this?e.bind(this):e):t}function si(e){let t=Se+1,n=ge.length;for(;t<n;){const s=t+n>>>1;Ot(ge[s])<e?t=s+1:n=s}return t}function Vs(e){(!ge.length||!ge.includes(e,sn&&e.allowRecurse?Se+1:Se))&&e!==Rn&&(e.id==null?ge.push(e):ge.splice(si(e.id),0,e),Ys())}function Ys(){!sn&&!Ln&&(Ln=!0,Nn=qs.then(Xs))}function oi(e){const t=ge.indexOf(e);t>Se&&ge.splice(t,1)}function Js(e,t,n,s){A(e)?n.push(...e):(!t||!t.includes(e,e.allowRecurse?s+1:s))&&n.push(e),Ys()}function ri(e){Js(e,Mt,$t,bt)}function ii(e){Js(e,qe,Pt,vt)}function Dn(e,t=null){if($t.length){for(Rn=t,Mt=[...new Set($t)],$t.length=0,bt=0;bt<Mt.length;bt++)Mt[bt]();Mt=null,bt=0,Rn=null,Dn(e,t)}}function Zs(e){if(Pt.length){const t=[...new Set(Pt)];if(Pt.length=0,qe){qe.push(...t);return}for(qe=t,qe.sort((n,s)=>Ot(n)-Ot(s)),vt=0;vt<qe.length;vt++)qe[vt]();qe=null,vt=0}}const Ot=e=>e.id==null?1/0:e.id;function Xs(e){Ln=!1,sn=!0,Dn(e),ge.sort((n,s)=>Ot(n)-Ot(s));const t=we;try{for(Se=0;Se<ge.length;Se++){const n=ge[Se];n&&n.active!==!1&&We(n,null,14)}}finally{Se=0,ge.length=0,Zs(),sn=!1,Nn=null,(ge.length||$t.length||Pt.length)&&Xs(e)}}function li(e,t,...n){const s=e.vnode.props||D;let o=n;const r=t.startsWith("update:"),i=r&&t.slice(7);if(i&&i in s){const h=`${i==="modelValue"?"model":i}Modifiers`,{number:b,trim:_}=s[h]||D;_?o=n.map(E=>E.trim()):b&&(o=n.map(Cs))}let l,u=s[l=xn(t)]||s[l=xn(ht(t))];!u&&r&&(u=s[l=xn(pt(t))]),u&&be(u,e,6,o);const a=s[l+"Once"];if(a){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,be(a,e,6,o)}}function Qs(e,t,n=!1){const s=t.emitsCache,o=s.get(e);if(o!==void 0)return o;const r=e.emits;let i={},l=!1;if(!$(e)){const u=a=>{const h=Qs(a,t,!0);h&&(l=!0,ne(i,h))};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!r&&!l?(s.set(e,null),null):(A(r)?r.forEach(u=>i[u]=null):ne(i,r),s.set(e,i),i)}function Hn(e,t){return!e||!zt(t)?!1:(t=t.slice(2).replace(/Once$/,""),B(e,t[0].toLowerCase()+t.slice(1))||B(e,pt(t))||B(e,t))}let xe=null,on=null;function rn(e){const t=xe;return xe=e,on=e&&e.type.__scopeId||null,t}function ci(e){on=e}function ui(){on=null}function jn(e,t=xe,n){if(!t||e._n)return e;const s=(...o)=>{s._d&&Io(-1);const r=rn(t),i=e(...o);return rn(r),s._d&&Io(1),i};return s._n=!0,s._c=!0,s._d=!0,s}function jc(){}function Un(e){const{type:t,vnode:n,proxy:s,withProxy:o,props:r,propsOptions:[i],slots:l,attrs:u,emit:a,render:h,renderCache:b,data:_,setupState:E,ctx:P,inheritAttrs:N}=e;let M,O;const fe=rn(e);try{if(n.shapeFlag&4){const q=o||s;M=Ae(h.call(q,q,b,r,E,_,P)),O=u}else{const q=t;M=Ae(q.length>1?q(r,{attrs:u,slots:l,emit:a}):q(r,null)),O=t.props?u:fi(u)}}catch(q){Lt.length=0,nn(q,e,1),M=W(Ie)}let Q=M;if(O&&N!==!1){const q=Object.keys(O),{shapeFlag:ae}=Q;q.length&&ae&7&&(i&&q.some(vn)&&(O=ai(O,i)),Q=yt(Q,O))}return n.dirs&&(Q.dirs=Q.dirs?Q.dirs.concat(n.dirs):n.dirs),n.transition&&(Q.transition=n.transition),M=Q,rn(fe),M}const fi=e=>{let t;for(const n in e)(n==="class"||n==="style"||zt(n))&&((t||(t={}))[n]=e[n]);return t},ai=(e,t)=>{const n={};for(const s in e)(!vn(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function di(e,t,n){const{props:s,children:o,component:r}=e,{props:i,children:l,patchFlag:u}=t,a=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return s?Gs(s,i,a):!!i;if(u&8){const h=t.dynamicProps;for(let b=0;b<h.length;b++){const _=h[b];if(i[_]!==s[_]&&!Hn(a,_))return!0}}}else return(o||l)&&(!l||!l.$stable)?!0:s===i?!1:s?i?Gs(s,i,a):!0:!!i;return!1}function Gs(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let o=0;o<s.length;o++){const r=s[o];if(t[r]!==e[r]&&!Hn(n,r))return!0}return!1}function hi({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const pi=e=>e.__isSuspense;function gi(e,t){t&&t.pendingBranch?A(e)?t.effects.push(...e):t.effects.push(e):ii(e)}function mi(e,t){if(ie){let n=ie.provides;const s=ie.parent&&ie.parent.provides;s===n&&(n=ie.provides=Object.create(s)),n[e]=t}}function Be(e,t,n=!1){const s=ie||xe;if(s){const o=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(o&&e in o)return o[e];if(arguments.length>1)return n&&$(t)?t.call(s.proxy):t}}const eo={};function Kn(e,t,n){return to(e,t,n)}function to(e,t,{immediate:n,deep:s,flush:o,onTrack:r,onTrigger:i}=D){const l=ie;let u,a=!1,h=!1;if(oe(e)?(u=()=>e.value,a=Hs(e)):_t(e)?(u=()=>e,s=!0):A(e)?(h=!0,a=e.some(_t),u=()=>e.map(O=>{if(oe(O))return O.value;if(_t(O))return Xe(O);if($(O))return We(O,l,2)})):$(e)?t?u=()=>We(e,l,2):u=()=>{if(!(l&&l.isUnmounted))return b&&b(),be(e,l,3,[_])}:u=we,t&&s){const O=u;u=()=>Xe(O())}let b,_=O=>{b=M.onStop=()=>{We(O,l,4)}};if(Rt)return _=we,t?n&&be(t,l,3,[u(),h?[]:void 0,_]):u(),we;let E=h?[]:eo;const P=()=>{if(!!M.active)if(t){const O=M.run();(s||a||(h?O.some((fe,Q)=>kt(fe,E[Q])):kt(O,E)))&&(b&&b(),be(t,l,3,[O,E===eo?void 0:E,_]),E=O)}else M.run()};P.allowRecurse=!!t;let N;o==="sync"?N=P:o==="post"?N=()=>de(P,l&&l.suspense):N=()=>{!l||l.isMounted?ri(P):P()};const M=new Fn(u,N);return t?n?P():E=M.run():o==="post"?de(M.run.bind(M),l&&l.suspense):M.run(),()=>{M.stop(),l&&l.scope&&yn(l.scope.effects,M)}}function _i(e,t,n){const s=this.proxy,o=se(e)?e.includes(".")?no(s,e):()=>s[e]:e.bind(s,s);let r;$(t)?r=t:(r=t.handler,n=t);const i=ie;Ct(this);const l=to(o,r.bind(s),n);return i?Ct(i):rt(),l}function no(e,t){const n=t.split(".");return()=>{let s=e;for(let o=0;o<n.length&&s;o++)s=s[n[o]];return s}}function Xe(e,t){if(!X(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),oe(e))Xe(e.value,t);else if(A(e))for(let n=0;n<e.length;n++)Xe(e[n],t);else if(ms(e)||dt(e))e.forEach(n=>{Xe(n,t)});else if(vs(e))for(const n in e)Xe(e[n],t);return e}function so(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Qe(()=>{e.isMounted=!0}),uo(()=>{e.isUnmounting=!0}),e}const ve=[Function,Array],oo={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ve,onEnter:ve,onAfterEnter:ve,onEnterCancelled:ve,onBeforeLeave:ve,onLeave:ve,onAfterLeave:ve,onLeaveCancelled:ve,onBeforeAppear:ve,onAppear:ve,onAfterAppear:ve,onAppearCancelled:ve},setup(e,{slots:t}){const n=$o(),s=so();let o;return()=>{const r=t.default&&Wn(t.default(),!0);if(!r||!r.length)return;const i=L(e),{mode:l}=i,u=r[0];if(s.isLeaving)return zn(u);const a=io(u);if(!a)return zn(u);const h=St(a,i,s,n);Bt(a,h);const b=n.subTree,_=b&&io(b);let E=!1;const{getTransitionKey:P}=a.type;if(P){const N=P();o===void 0?o=N:N!==o&&(o=N,E=!0)}if(_&&_.type!==Ie&&(!st(a,_)||E)){const N=St(_,i,s,n);if(Bt(_,N),l==="out-in")return s.isLeaving=!0,N.afterLeave=()=>{s.isLeaving=!1,n.update()},zn(u);l==="in-out"&&a.type!==Ie&&(N.delayLeave=(M,O,fe)=>{const Q=ro(s,_);Q[String(_.key)]=_,M._leaveCb=()=>{O(),M._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=fe})}return u}}};function ro(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function St(e,t,n,s){const{appear:o,mode:r,persisted:i=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:a,onEnterCancelled:h,onBeforeLeave:b,onLeave:_,onAfterLeave:E,onLeaveCancelled:P,onBeforeAppear:N,onAppear:M,onAfterAppear:O,onAppearCancelled:fe}=t,Q=String(e.key),q=ro(n,e),ae=(R,ee)=>{R&&be(R,s,9,ee)},Re={mode:r,persisted:i,beforeEnter(R){let ee=l;if(!n.isMounted)if(o)ee=N||l;else return;R._leaveCb&&R._leaveCb(!0);const V=q[Q];V&&st(e,V)&&V.el._leaveCb&&V.el._leaveCb(),ae(ee,[R])},enter(R){let ee=u,V=a,he=h;if(!n.isMounted)if(o)ee=M||u,V=O||a,he=fe||h;else return;let ce=!1;const I=R._enterCb=G=>{ce||(ce=!0,G?ae(he,[R]):ae(V,[R]),Re.delayedLeave&&Re.delayedLeave(),R._enterCb=void 0)};ee?(ee(R,I),ee.length<=1&&I()):I()},leave(R,ee){const V=String(e.key);if(R._enterCb&&R._enterCb(!0),n.isUnmounting)return ee();ae(b,[R]);let he=!1;const ce=R._leaveCb=I=>{he||(he=!0,ee(),I?ae(P,[R]):ae(E,[R]),R._leaveCb=void 0,q[V]===e&&delete q[V])};q[V]=e,_?(_(R,ce),_.length<=1&&ce()):ce()},clone(R){return St(R,t,n,s)}};return Re}function zn(e){if(ln(e))return e=yt(e),e.children=null,e}function io(e){return ln(e)?e.children?e.children[0]:void 0:e}function Bt(e,t){e.shapeFlag&6&&e.component?Bt(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Wn(e,t=!1){let n=[],s=0;for(let o=0;o<e.length;o++){const r=e[o];r.type===ye?(r.patchFlag&128&&s++,n=n.concat(Wn(r.children,t))):(t||r.type!==Ie)&&n.push(r)}if(s>1)for(let o=0;o<n.length;o++)n[o].patchFlag=-2;return n}function ke(e){return $(e)?{setup:e,name:e.name}:e}const qn=e=>!!e.type.__asyncLoader,ln=e=>e.type.__isKeepAlive;function bi(e,t){lo(e,"a",t)}function vi(e,t){lo(e,"da",t)}function lo(e,t,n=ie){const s=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(cn(t,s,n),n){let o=n.parent;for(;o&&o.parent;)ln(o.parent.vnode)&&yi(s,t,n,o),o=o.parent}}function yi(e,t,n,s){const o=cn(t,e,s,!0);fo(()=>{yn(s[t],o)},n)}function cn(e,t,n=ie,s=!1){if(n){const o=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...i)=>{if(n.isUnmounted)return;gt(),Ct(n);const l=be(t,n,e,i);return rt(),mt(),l});return s?o.unshift(r):o.push(r),r}}const Le=e=>(t,n=ie)=>(!Rt||e==="sp")&&cn(e,t,n),Ci=Le("bm"),Qe=Le("m"),wi=Le("bu"),co=Le("u"),uo=Le("bum"),fo=Le("um"),xi=Le("sp"),Ei=Le("rtg"),Ti=Le("rtc");function ki(e,t=ie){cn("ec",e,t)}let Vn=!0;function Ii(e){const t=po(e),n=e.proxy,s=e.ctx;Vn=!1,t.beforeCreate&&ao(t.beforeCreate,e,"bc");const{data:o,computed:r,methods:i,watch:l,provide:u,inject:a,created:h,beforeMount:b,mounted:_,beforeUpdate:E,updated:P,activated:N,deactivated:M,beforeDestroy:O,beforeUnmount:fe,destroyed:Q,unmounted:q,render:ae,renderTracked:Re,renderTriggered:R,errorCaptured:ee,serverPrefetch:V,expose:he,inheritAttrs:ce,components:I,directives:G,filters:$e}=t;if(a&&Ai(a,s,null,e.appContext.config.unwrapInjectedRef),i)for(const Y in i){const U=i[Y];$(U)&&(s[Y]=U.bind(n))}if(o){const Y=o.call(n,n);X(Y)&&(e.data=tn(Y))}if(Vn=!0,r)for(const Y in r){const U=r[Y],De=$(U)?U.bind(n,n):$(U.get)?U.get.bind(n,n):we,fs=!$(U)&&$(U.set)?U.set.bind(n):we,jt=Bo({get:De,set:fs});Object.defineProperty(s,Y,{enumerable:!0,configurable:!0,get:()=>jt.value,set:xt=>jt.value=xt})}if(l)for(const Y in l)ho(l[Y],s,n,Y);if(u){const Y=$(u)?u.call(n):u;Reflect.ownKeys(Y).forEach(U=>{mi(U,Y[U])})}h&&ao(h,e,"c");function le(Y,U){A(U)?U.forEach(De=>Y(De.bind(n))):U&&Y(U.bind(n))}if(le(Ci,b),le(Qe,_),le(wi,E),le(co,P),le(bi,N),le(vi,M),le(ki,ee),le(Ti,Re),le(Ei,R),le(uo,fe),le(fo,q),le(xi,V),A(he))if(he.length){const Y=e.exposed||(e.exposed={});he.forEach(U=>{Object.defineProperty(Y,U,{get:()=>n[U],set:De=>n[U]=De})})}else e.exposed||(e.exposed={});ae&&e.render===we&&(e.render=ae),ce!=null&&(e.inheritAttrs=ce),I&&(e.components=I),G&&(e.directives=G)}function Ai(e,t,n=we,s=!1){A(e)&&(e=Yn(e));for(const o in e){const r=e[o];let i;X(r)?"default"in r?i=Be(r.from||o,r.default,!0):i=Be(r.from||o):i=Be(r),oe(i)&&s?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>i.value,set:l=>i.value=l}):t[o]=i}}function ao(e,t,n){be(A(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function ho(e,t,n,s){const o=s.includes(".")?no(n,s):()=>n[s];if(se(e)){const r=t[e];$(r)&&Kn(o,r)}else if($(e))Kn(o,e.bind(n));else if(X(e))if(A(e))e.forEach(r=>ho(r,t,n,s));else{const r=$(e.handler)?e.handler.bind(n):t[e.handler];$(r)&&Kn(o,r,e)}}function po(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:o,optionsCache:r,config:{optionMergeStrategies:i}}=e.appContext,l=r.get(t);let u;return l?u=l:!o.length&&!n&&!s?u=t:(u={},o.length&&o.forEach(a=>un(u,a,i,!0)),un(u,t,i)),r.set(t,u),u}function un(e,t,n,s=!1){const{mixins:o,extends:r}=t;r&&un(e,r,n,!0),o&&o.forEach(i=>un(e,i,n,!0));for(const i in t)if(!(s&&i==="expose")){const l=Fi[i]||n&&n[i];e[i]=l?l(e[i],t[i]):t[i]}return e}const Fi={data:go,props:Ge,emits:Ge,methods:Ge,computed:Ge,beforeCreate:ue,created:ue,beforeMount:ue,mounted:ue,beforeUpdate:ue,updated:ue,beforeDestroy:ue,beforeUnmount:ue,destroyed:ue,unmounted:ue,activated:ue,deactivated:ue,errorCaptured:ue,serverPrefetch:ue,components:Ge,directives:Ge,watch:Mi,provide:go,inject:$i};function go(e,t){return t?e?function(){return ne($(e)?e.call(this,this):e,$(t)?t.call(this,this):t)}:t:e}function $i(e,t){return Ge(Yn(e),Yn(t))}function Yn(e){if(A(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ue(e,t){return e?[...new Set([].concat(e,t))]:t}function Ge(e,t){return e?ne(ne(Object.create(null),e),t):t}function Mi(e,t){if(!e)return t;if(!t)return e;const n=ne(Object.create(null),e);for(const s in t)n[s]=ue(e[s],t[s]);return n}function Pi(e,t,n,s=!1){const o={},r={};Yt(r,dn,1),e.propsDefaults=Object.create(null),mo(e,t,o,r);for(const i in e.propsOptions[0])i in o||(o[i]=void 0);n?e.props=s?o:Jr(o):e.type.props?e.props=o:e.props=r,e.attrs=r}function Oi(e,t,n,s){const{props:o,attrs:r,vnode:{patchFlag:i}}=e,l=L(o),[u]=e.propsOptions;let a=!1;if((s||i>0)&&!(i&16)){if(i&8){const h=e.vnode.dynamicProps;for(let b=0;b<h.length;b++){let _=h[b];const E=t[_];if(u)if(B(r,_))E!==r[_]&&(r[_]=E,a=!0);else{const P=ht(_);o[P]=Jn(u,l,P,E,e,!1)}else E!==r[_]&&(r[_]=E,a=!0)}}}else{mo(e,t,o,r)&&(a=!0);let h;for(const b in l)(!t||!B(t,b)&&((h=pt(b))===b||!B(t,h)))&&(u?n&&(n[b]!==void 0||n[h]!==void 0)&&(o[b]=Jn(u,l,b,void 0,e,!0)):delete o[b]);if(r!==l)for(const b in r)(!t||!B(t,b)&&!0)&&(delete r[b],a=!0)}a&&Oe(e,"set","$attrs")}function mo(e,t,n,s){const[o,r]=e.propsOptions;let i=!1,l;if(t)for(let u in t){if(qt(u))continue;const a=t[u];let h;o&&B(o,h=ht(u))?!r||!r.includes(h)?n[h]=a:(l||(l={}))[h]=a:Hn(e.emitsOptions,u)||(!(u in s)||a!==s[u])&&(s[u]=a,i=!0)}if(r){const u=L(n),a=l||D;for(let h=0;h<r.length;h++){const b=r[h];n[b]=Jn(o,u,b,a[b],e,!B(a,b))}}return i}function Jn(e,t,n,s,o,r){const i=e[n];if(i!=null){const l=B(i,"default");if(l&&s===void 0){const u=i.default;if(i.type!==Function&&$(u)){const{propsDefaults:a}=o;n in a?s=a[n]:(Ct(o),s=a[n]=u.call(null,t),rt())}else s=u}i[0]&&(r&&!l?s=!1:i[1]&&(s===""||s===pt(n))&&(s=!0))}return s}function _o(e,t,n=!1){const s=t.propsCache,o=s.get(e);if(o)return o;const r=e.props,i={},l=[];let u=!1;if(!$(e)){const h=b=>{u=!0;const[_,E]=_o(b,t,!0);ne(i,_),E&&l.push(...E)};!n&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!r&&!u)return s.set(e,at),at;if(A(r))for(let h=0;h<r.length;h++){const b=ht(r[h]);bo(b)&&(i[b]=D)}else if(r)for(const h in r){const b=ht(h);if(bo(b)){const _=r[h],E=i[b]=A(_)||$(_)?{type:_}:_;if(E){const P=Co(Boolean,E.type),N=Co(String,E.type);E[0]=P>-1,E[1]=N<0||P<N,(P>-1||B(E,"default"))&&l.push(b)}}}const a=[i,l];return s.set(e,a),a}function bo(e){return e[0]!=="$"}function vo(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function yo(e,t){return vo(e)===vo(t)}function Co(e,t){return A(t)?t.findIndex(n=>yo(n,e)):$(t)&&yo(t,e)?0:-1}const wo=e=>e[0]==="_"||e==="$stable",Zn=e=>A(e)?e.map(Ae):[Ae(e)],Si=(e,t,n)=>{const s=jn((...o)=>Zn(t(...o)),n);return s._c=!1,s},xo=(e,t,n)=>{const s=e._ctx;for(const o in e){if(wo(o))continue;const r=e[o];if($(r))t[o]=Si(o,r,s);else if(r!=null){const i=Zn(r);t[o]=()=>i}}},Eo=(e,t)=>{const n=Zn(t);e.slots.default=()=>n},Bi=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=L(t),Yt(t,"_",n)):xo(t,e.slots={})}else e.slots={},t&&Eo(e,t);Yt(e.slots,dn,1)},Li=(e,t,n)=>{const{vnode:s,slots:o}=e;let r=!0,i=D;if(s.shapeFlag&32){const l=t._;l?n&&l===1?r=!1:(ne(o,t),!n&&l===1&&delete o._):(r=!t.$stable,xo(t,o)),i=t}else t&&(Eo(e,t),i={default:1});if(r)for(const l in o)!wo(l)&&!(l in i)&&delete o[l]};function Ni(e,t){const n=xe;if(n===null)return e;const s=n.proxy,o=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[i,l,u,a=D]=t[r];$(i)&&(i={mounted:i,updated:i}),i.deep&&Xe(l),o.push({dir:i,instance:s,value:l,oldValue:void 0,arg:u,modifiers:a})}return e}function et(e,t,n,s){const o=e.dirs,r=t&&t.dirs;for(let i=0;i<o.length;i++){const l=o[i];r&&(l.oldValue=r[i].value);let u=l.dir[s];u&&(gt(),be(u,n,8,[e.el,l,e,t]),mt())}}function To(){return{app:null,config:{isNativeTag:gr,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ri=0;function Di(e,t){return function(s,o=null){o!=null&&!X(o)&&(o=null);const r=To(),i=new Set;let l=!1;const u=r.app={_uid:Ri++,_component:s,_props:o,_container:null,_context:r,_instance:null,version:il,get config(){return r.config},set config(a){},use(a,...h){return i.has(a)||(a&&$(a.install)?(i.add(a),a.install(u,...h)):$(a)&&(i.add(a),a(u,...h))),u},mixin(a){return r.mixins.includes(a)||r.mixins.push(a),u},component(a,h){return h?(r.components[a]=h,u):r.components[a]},directive(a,h){return h?(r.directives[a]=h,u):r.directives[a]},mount(a,h,b){if(!l){const _=W(s,o);return _.appContext=r,h&&t?t(_,a):e(_,a,b),l=!0,u._container=a,a.__vue_app__=u,ss(_.component)||_.component.proxy}},unmount(){l&&(e(null,u._container),delete u._container.__vue_app__)},provide(a,h){return r.provides[a]=h,u}};return u}}function Xn(e,t,n,s,o=!1){if(A(e)){e.forEach((_,E)=>Xn(_,t&&(A(t)?t[E]:t),n,s,o));return}if(qn(s)&&!o)return;const r=s.shapeFlag&4?ss(s.component)||s.component.proxy:s.el,i=o?null:r,{i:l,r:u}=e,a=t&&t.r,h=l.refs===D?l.refs={}:l.refs,b=l.setupState;if(a!=null&&a!==u&&(se(a)?(h[a]=null,B(b,a)&&(b[a]=null)):oe(a)&&(a.value=null)),$(u))We(u,l,12,[i,h]);else{const _=se(u),E=oe(u);if(_||E){const P=()=>{if(e.f){const N=_?h[u]:u.value;o?A(N)&&yn(N,r):A(N)?N.includes(r)||N.push(r):_?h[u]=[r]:(u.value=[r],e.k&&(h[e.k]=u.value))}else _?(h[u]=i,B(b,u)&&(b[u]=i)):oe(u)&&(u.value=i,e.k&&(h[e.k]=i))};i?(P.id=-1,de(P,n)):P()}}}const de=gi;function Hi(e){return ji(e)}function ji(e,t){const n=Cr();n.__VUE__=!0;const{insert:s,remove:o,patchProp:r,createElement:i,createText:l,createComment:u,setText:a,setElementText:h,parentNode:b,nextSibling:_,setScopeId:E=we,cloneNode:P,insertStaticContent:N}=e,M=(c,f,d,g=null,p=null,y=null,w=!1,v=null,C=!!f.dynamicChildren)=>{if(c===f)return;c&&!st(c,f)&&(g=_n(c),Je(c,p,y,!0),c=null),f.patchFlag===-2&&(C=!1,f.dynamicChildren=null);const{type:m,ref:T,shapeFlag:x}=f;switch(m){case Qn:O(c,f,d,g);break;case Ie:fe(c,f,d,g);break;case Gn:c==null&&Q(f,d,g,w);break;case ye:G(c,f,d,g,p,y,w,v,C);break;default:x&1?Re(c,f,d,g,p,y,w,v,C):x&6?$e(c,f,d,g,p,y,w,v,C):(x&64||x&128)&&m.process(c,f,d,g,p,y,w,v,C,Et)}T!=null&&p&&Xn(T,c&&c.ref,y,f||c,!f)},O=(c,f,d,g)=>{if(c==null)s(f.el=l(f.children),d,g);else{const p=f.el=c.el;f.children!==c.children&&a(p,f.children)}},fe=(c,f,d,g)=>{c==null?s(f.el=u(f.children||""),d,g):f.el=c.el},Q=(c,f,d,g)=>{[c.el,c.anchor]=N(c.children,f,d,g,c.el,c.anchor)},q=({el:c,anchor:f},d,g)=>{let p;for(;c&&c!==f;)p=_(c),s(c,d,g),c=p;s(f,d,g)},ae=({el:c,anchor:f})=>{let d;for(;c&&c!==f;)d=_(c),o(c),c=d;o(f)},Re=(c,f,d,g,p,y,w,v,C)=>{w=w||f.type==="svg",c==null?R(f,d,g,p,y,w,v,C):he(c,f,p,y,w,v,C)},R=(c,f,d,g,p,y,w,v)=>{let C,m;const{type:T,props:x,shapeFlag:k,transition:F,patchFlag:S,dirs:z}=c;if(c.el&&P!==void 0&&S===-1)C=c.el=P(c.el);else{if(C=c.el=i(c.type,y,x&&x.is,x),k&8?h(C,c.children):k&16&&V(c.children,C,null,g,p,y&&T!=="foreignObject",w,v),z&&et(c,null,g,"created"),x){for(const K in x)K!=="value"&&!qt(K)&&r(C,K,null,x[K],y,c.children,g,p,He);"value"in x&&r(C,"value",null,x.value),(m=x.onVnodeBeforeMount)&&Fe(m,g,c)}ee(C,c,c.scopeId,w,g)}z&&et(c,null,g,"beforeMount");const H=(!p||p&&!p.pendingBranch)&&F&&!F.persisted;H&&F.beforeEnter(C),s(C,f,d),((m=x&&x.onVnodeMounted)||H||z)&&de(()=>{m&&Fe(m,g,c),H&&F.enter(C),z&&et(c,null,g,"mounted")},p)},ee=(c,f,d,g,p)=>{if(d&&E(c,d),g)for(let y=0;y<g.length;y++)E(c,g[y]);if(p){let y=p.subTree;if(f===y){const w=p.vnode;ee(c,w,w.scopeId,w.slotScopeIds,p.parent)}}},V=(c,f,d,g,p,y,w,v,C=0)=>{for(let m=C;m<c.length;m++){const T=c[m]=v?Ve(c[m]):Ae(c[m]);M(null,T,f,d,g,p,y,w,v)}},he=(c,f,d,g,p,y,w)=>{const v=f.el=c.el;let{patchFlag:C,dynamicChildren:m,dirs:T}=f;C|=c.patchFlag&16;const x=c.props||D,k=f.props||D;let F;d&&tt(d,!1),(F=k.onVnodeBeforeUpdate)&&Fe(F,d,f,c),T&&et(f,c,d,"beforeUpdate"),d&&tt(d,!0);const S=p&&f.type!=="foreignObject";if(m?ce(c.dynamicChildren,m,v,d,g,S,y):w||De(c,f,v,null,d,g,S,y,!1),C>0){if(C&16)I(v,f,x,k,d,g,p);else if(C&2&&x.class!==k.class&&r(v,"class",null,k.class,p),C&4&&r(v,"style",x.style,k.style,p),C&8){const z=f.dynamicProps;for(let H=0;H<z.length;H++){const K=z[H],Ee=x[K],Tt=k[K];(Tt!==Ee||K==="value")&&r(v,K,Ee,Tt,p,c.children,d,g,He)}}C&1&&c.children!==f.children&&h(v,f.children)}else!w&&m==null&&I(v,f,x,k,d,g,p);((F=k.onVnodeUpdated)||T)&&de(()=>{F&&Fe(F,d,f,c),T&&et(f,c,d,"updated")},g)},ce=(c,f,d,g,p,y,w)=>{for(let v=0;v<f.length;v++){const C=c[v],m=f[v],T=C.el&&(C.type===ye||!st(C,m)||C.shapeFlag&70)?b(C.el):d;M(C,m,T,null,g,p,y,w,!0)}},I=(c,f,d,g,p,y,w)=>{if(d!==g){for(const v in g){if(qt(v))continue;const C=g[v],m=d[v];C!==m&&v!=="value"&&r(c,v,m,C,w,f.children,p,y,He)}if(d!==D)for(const v in d)!qt(v)&&!(v in g)&&r(c,v,d[v],null,w,f.children,p,y,He);"value"in g&&r(c,"value",d.value,g.value)}},G=(c,f,d,g,p,y,w,v,C)=>{const m=f.el=c?c.el:l(""),T=f.anchor=c?c.anchor:l("");let{patchFlag:x,dynamicChildren:k,slotScopeIds:F}=f;F&&(v=v?v.concat(F):F),c==null?(s(m,d,g),s(T,d,g),V(f.children,d,T,p,y,w,v,C)):x>0&&x&64&&k&&c.dynamicChildren?(ce(c.dynamicChildren,k,d,p,y,w,v),(f.key!=null||p&&f===p.subTree)&&ko(c,f,!0)):De(c,f,d,T,p,y,w,v,C)},$e=(c,f,d,g,p,y,w,v,C)=>{f.slotScopeIds=v,c==null?f.shapeFlag&512?p.ctx.activate(f,d,g,w,C):wt(f,d,g,p,y,w,C):le(c,f,C)},wt=(c,f,d,g,p,y,w)=>{const v=c.component=Gi(c,g,p);if(ln(c)&&(v.ctx.renderer=Et),el(v),v.asyncDep){if(p&&p.registerDep(v,Y),!c.el){const C=v.subTree=W(Ie);fe(null,C,f,d)}return}Y(v,c,f,d,p,y,w)},le=(c,f,d)=>{const g=f.component=c.component;if(di(c,f,d))if(g.asyncDep&&!g.asyncResolved){U(g,f,d);return}else g.next=f,oi(g.update),g.update();else f.component=c.component,f.el=c.el,g.vnode=f},Y=(c,f,d,g,p,y,w)=>{const v=()=>{if(c.isMounted){let{next:T,bu:x,u:k,parent:F,vnode:S}=c,z=T,H;tt(c,!1),T?(T.el=S.el,U(c,T,w)):T=S,x&&En(x),(H=T.props&&T.props.onVnodeBeforeUpdate)&&Fe(H,F,T,S),tt(c,!0);const K=Un(c),Ee=c.subTree;c.subTree=K,M(Ee,K,b(Ee.el),_n(Ee),c,p,y),T.el=K.el,z===null&&hi(c,K.el),k&&de(k,p),(H=T.props&&T.props.onVnodeUpdated)&&de(()=>Fe(H,F,T,S),p)}else{let T;const{el:x,props:k}=f,{bm:F,m:S,parent:z}=c,H=qn(f);if(tt(c,!1),F&&En(F),!H&&(T=k&&k.onVnodeBeforeMount)&&Fe(T,z,f),tt(c,!0),x&&ds){const K=()=>{c.subTree=Un(c),ds(x,c.subTree,c,p,null)};H?f.type.__asyncLoader().then(()=>!c.isUnmounted&&K()):K()}else{const K=c.subTree=Un(c);M(null,K,d,g,c,p,y),f.el=K.el}if(S&&de(S,p),!H&&(T=k&&k.onVnodeMounted)){const K=f;de(()=>Fe(T,z,K),p)}f.shapeFlag&256&&c.a&&de(c.a,p),c.isMounted=!0,f=d=g=null}},C=c.effect=new Fn(v,()=>Vs(c.update),c.scope),m=c.update=C.run.bind(C);m.id=c.uid,tt(c,!0),m()},U=(c,f,d)=>{f.component=c;const g=c.vnode.props;c.vnode=f,c.next=null,Oi(c,f.props,g,d),Li(c,f.children,d),gt(),Dn(void 0,c.update),mt()},De=(c,f,d,g,p,y,w,v,C=!1)=>{const m=c&&c.children,T=c?c.shapeFlag:0,x=f.children,{patchFlag:k,shapeFlag:F}=f;if(k>0){if(k&128){jt(m,x,d,g,p,y,w,v,C);return}else if(k&256){fs(m,x,d,g,p,y,w,v,C);return}}F&8?(T&16&&He(m,p,y),x!==m&&h(d,x)):T&16?F&16?jt(m,x,d,g,p,y,w,v,C):He(m,p,y,!0):(T&8&&h(d,""),F&16&&V(x,d,g,p,y,w,v,C))},fs=(c,f,d,g,p,y,w,v,C)=>{c=c||at,f=f||at;const m=c.length,T=f.length,x=Math.min(m,T);let k;for(k=0;k<x;k++){const F=f[k]=C?Ve(f[k]):Ae(f[k]);M(c[k],F,d,null,p,y,w,v,C)}m>T?He(c,p,y,!0,!1,x):V(f,d,g,p,y,w,v,C,x)},jt=(c,f,d,g,p,y,w,v,C)=>{let m=0;const T=f.length;let x=c.length-1,k=T-1;for(;m<=x&&m<=k;){const F=c[m],S=f[m]=C?Ve(f[m]):Ae(f[m]);if(st(F,S))M(F,S,d,null,p,y,w,v,C);else break;m++}for(;m<=x&&m<=k;){const F=c[x],S=f[k]=C?Ve(f[k]):Ae(f[k]);if(st(F,S))M(F,S,d,null,p,y,w,v,C);else break;x--,k--}if(m>x){if(m<=k){const F=k+1,S=F<T?f[F].el:g;for(;m<=k;)M(null,f[m]=C?Ve(f[m]):Ae(f[m]),d,S,p,y,w,v,C),m++}}else if(m>k)for(;m<=x;)Je(c[m],p,y,!0),m++;else{const F=m,S=m,z=new Map;for(m=S;m<=k;m++){const me=f[m]=C?Ve(f[m]):Ae(f[m]);me.key!=null&&z.set(me.key,m)}let H,K=0;const Ee=k-S+1;let Tt=!1,ir=0;const Ut=new Array(Ee);for(m=0;m<Ee;m++)Ut[m]=0;for(m=F;m<=x;m++){const me=c[m];if(K>=Ee){Je(me,p,y,!0);continue}let Me;if(me.key!=null)Me=z.get(me.key);else for(H=S;H<=k;H++)if(Ut[H-S]===0&&st(me,f[H])){Me=H;break}Me===void 0?Je(me,p,y,!0):(Ut[Me-S]=m+1,Me>=ir?ir=Me:Tt=!0,M(me,f[Me],d,null,p,y,w,v,C),K++)}const lr=Tt?Ui(Ut):at;for(H=lr.length-1,m=Ee-1;m>=0;m--){const me=S+m,Me=f[me],cr=me+1<T?f[me+1].el:g;Ut[m]===0?M(null,Me,d,cr,p,y,w,v,C):Tt&&(H<0||m!==lr[H]?xt(Me,d,cr,2):H--)}}},xt=(c,f,d,g,p=null)=>{const{el:y,type:w,transition:v,children:C,shapeFlag:m}=c;if(m&6){xt(c.component.subTree,f,d,g);return}if(m&128){c.suspense.move(f,d,g);return}if(m&64){w.move(c,f,d,Et);return}if(w===ye){s(y,f,d);for(let x=0;x<C.length;x++)xt(C[x],f,d,g);s(c.anchor,f,d);return}if(w===Gn){q(c,f,d);return}if(g!==2&&m&1&&v)if(g===0)v.beforeEnter(y),s(y,f,d),de(()=>v.enter(y),p);else{const{leave:x,delayLeave:k,afterLeave:F}=v,S=()=>s(y,f,d),z=()=>{x(y,()=>{S(),F&&F()})};k?k(y,S,z):z()}else s(y,f,d)},Je=(c,f,d,g=!1,p=!1)=>{const{type:y,props:w,ref:v,children:C,dynamicChildren:m,shapeFlag:T,patchFlag:x,dirs:k}=c;if(v!=null&&Xn(v,null,d,c,!0),T&256){f.ctx.deactivate(c);return}const F=T&1&&k,S=!qn(c);let z;if(S&&(z=w&&w.onVnodeBeforeUnmount)&&Fe(z,f,c),T&6)Bc(c.component,d,g);else{if(T&128){c.suspense.unmount(d,g);return}F&&et(c,null,f,"beforeUnmount"),T&64?c.type.remove(c,f,d,p,Et,g):m&&(y!==ye||x>0&&x&64)?He(m,f,d,!1,!0):(y===ye&&x&384||!p&&T&16)&&He(C,f,d),g&&or(c)}(S&&(z=w&&w.onVnodeUnmounted)||F)&&de(()=>{z&&Fe(z,f,c),F&&et(c,null,f,"unmounted")},d)},or=c=>{const{type:f,el:d,anchor:g,transition:p}=c;if(f===ye){Sc(d,g);return}if(f===Gn){ae(c);return}const y=()=>{o(d),p&&!p.persisted&&p.afterLeave&&p.afterLeave()};if(c.shapeFlag&1&&p&&!p.persisted){const{leave:w,delayLeave:v}=p,C=()=>w(d,y);v?v(c.el,y,C):C()}else y()},Sc=(c,f)=>{let d;for(;c!==f;)d=_(c),o(c),c=d;o(f)},Bc=(c,f,d)=>{const{bum:g,scope:p,update:y,subTree:w,um:v}=c;g&&En(g),p.stop(),y&&(y.active=!1,Je(w,c,f,d)),v&&de(v,f),de(()=>{c.isUnmounted=!0},f),f&&f.pendingBranch&&!f.isUnmounted&&c.asyncDep&&!c.asyncResolved&&c.suspenseId===f.pendingId&&(f.deps--,f.deps===0&&f.resolve())},He=(c,f,d,g=!1,p=!1,y=0)=>{for(let w=y;w<c.length;w++)Je(c[w],f,d,g,p)},_n=c=>c.shapeFlag&6?_n(c.component.subTree):c.shapeFlag&128?c.suspense.next():_(c.anchor||c.el),rr=(c,f,d)=>{c==null?f._vnode&&Je(f._vnode,null,null,!0):M(f._vnode||null,c,f,null,null,null,d),Zs(),f._vnode=c},Et={p:M,um:Je,m:xt,r:or,mt:wt,mc:V,pc:De,pbc:ce,n:_n,o:e};let as,ds;return t&&([as,ds]=t(Et)),{render:rr,hydrate:as,createApp:Di(rr,as)}}function tt({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function ko(e,t,n=!1){const s=e.children,o=t.children;if(A(s)&&A(o))for(let r=0;r<s.length;r++){const i=s[r];let l=o[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=o[r]=Ve(o[r]),l.el=i.el),n||ko(i,l))}}function Ui(e){const t=e.slice(),n=[0];let s,o,r,i,l;const u=e.length;for(s=0;s<u;s++){const a=e[s];if(a!==0){if(o=n[n.length-1],e[o]<a){t[s]=o,n.push(s);continue}for(r=0,i=n.length-1;r<i;)l=r+i>>1,e[n[l]]<a?r=l+1:i=l;a<e[n[r]]&&(r>0&&(t[s]=n[r-1]),n[r]=s)}}for(r=n.length,i=n[r-1];r-- >0;)n[r]=i,i=t[i];return n}const Ki=e=>e.__isTeleport,zi=Symbol(),ye=Symbol(void 0),Qn=Symbol(void 0),Ie=Symbol(void 0),Gn=Symbol(void 0),Lt=[];let nt=null;function J(e=!1){Lt.push(nt=e?null:[])}function Wi(){Lt.pop(),nt=Lt[Lt.length-1]||null}let fn=1;function Io(e){fn+=e}function Ao(e){return e.dynamicChildren=fn>0?nt||at:null,Wi(),fn>0&&nt&&nt.push(e),e}function re(e,t,n,s,o,r){return Ao(j(e,t,n,s,o,r,!0))}function an(e,t,n,s,o){return Ao(W(e,t,n,s,o,!0))}function es(e){return e?e.__v_isVNode===!0:!1}function st(e,t){return e.type===t.type&&e.key===t.key}const dn="__vInternal",Fo=({key:e})=>e!=null?e:null,hn=({ref:e,ref_key:t,ref_for:n})=>e!=null?se(e)||oe(e)||$(e)?{i:xe,r:e,k:t,f:!!n}:e:null;function j(e,t=null,n=null,s=0,o=null,r=e===ye?0:1,i=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Fo(t),ref:t&&hn(t),scopeId:on,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null};return l?(ts(u,n),r&128&&e.normalize(u)):n&&(u.shapeFlag|=se(n)?8:16),fn>0&&!i&&nt&&(u.patchFlag>0||r&6)&&u.patchFlag!==32&&nt.push(u),u}const W=qi;function qi(e,t=null,n=null,s=0,o=null,r=!1){if((!e||e===zi)&&(e=Ie),es(e)){const l=yt(e,t,!0);return n&&ts(l,n),l}if(ol(e)&&(e=e.__vccOpts),t){t=Vi(t);let{class:l,style:u}=t;l&&!se(l)&&(t.class=bn(l)),X(u)&&(js(u)&&!A(u)&&(u=ne({},u)),t.style=Kt(u))}const i=se(e)?1:pi(e)?128:Ki(e)?64:X(e)?4:$(e)?2:0;return j(e,t,n,s,o,i,r,!0)}function Vi(e){return e?js(e)||dn in e?ne({},e):e:null}function yt(e,t,n=!1){const{props:s,ref:o,patchFlag:r,children:i}=e,l=t?Yi(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&Fo(l),ref:t&&t.ref?n&&o?A(o)?o.concat(hn(t)):[o,hn(t)]:hn(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ye?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&yt(e.ssContent),ssFallback:e.ssFallback&&yt(e.ssFallback),el:e.el,anchor:e.anchor}}function ot(e=" ",t=0){return W(Qn,null,e,t)}function Nt(e="",t=!1){return t?(J(),an(Ie,null,e)):W(Ie,null,e)}function Ae(e){return e==null||typeof e=="boolean"?W(Ie):A(e)?W(ye,null,e.slice()):typeof e=="object"?Ve(e):W(Qn,null,String(e))}function Ve(e){return e.el===null||e.memo?e:yt(e)}function ts(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(A(t))n=16;else if(typeof t=="object")if(s&65){const o=t.default;o&&(o._c&&(o._d=!1),ts(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!(dn in t)?t._ctx=xe:o===3&&xe&&(xe.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else $(t)?(t={default:t,_ctx:xe},n=32):(t=String(t),s&64?(n=16,t=[ot(t)]):n=8);e.children=t,e.shapeFlag|=n}function Yi(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const o in s)if(o==="class")t.class!==s.class&&(t.class=bn([t.class,s.class]));else if(o==="style")t.style=Kt([t.style,s.style]);else if(zt(o)){const r=t[o],i=s[o];i&&r!==i&&!(A(r)&&r.includes(i))&&(t[o]=r?[].concat(r,i):i)}else o!==""&&(t[o]=s[o])}return t}function Fe(e,t,n,s=null){be(e,t,7,[n,s])}function Ji(e,t,n,s){let o;const r=n&&n[s];if(A(e)||se(e)){o=new Array(e.length);for(let i=0,l=e.length;i<l;i++)o[i]=t(e[i],i,void 0,r&&r[i])}else if(typeof e=="number"){o=new Array(e);for(let i=0;i<e;i++)o[i]=t(i+1,i,void 0,r&&r[i])}else if(X(e))if(e[Symbol.iterator])o=Array.from(e,(i,l)=>t(i,l,void 0,r&&r[l]));else{const i=Object.keys(e);o=new Array(i.length);for(let l=0,u=i.length;l<u;l++){const a=i[l];o[l]=t(e[a],a,l,r&&r[l])}}else o=[];return n&&(n[s]=o),o}const ns=e=>e?Mo(e)?ss(e)||e.proxy:ns(e.parent):null,pn=ne(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ns(e.parent),$root:e=>ns(e.root),$emit:e=>e.emit,$options:e=>po(e),$forceUpdate:e=>()=>Vs(e.update),$nextTick:e=>ni.bind(e.proxy),$watch:e=>_i.bind(e)}),Zi={get({_:e},t){const{ctx:n,setupState:s,data:o,props:r,accessCache:i,type:l,appContext:u}=e;let a;if(t[0]!=="$"){const E=i[t];if(E!==void 0)switch(E){case 1:return s[t];case 2:return o[t];case 4:return n[t];case 3:return r[t]}else{if(s!==D&&B(s,t))return i[t]=1,s[t];if(o!==D&&B(o,t))return i[t]=2,o[t];if((a=e.propsOptions[0])&&B(a,t))return i[t]=3,r[t];if(n!==D&&B(n,t))return i[t]=4,n[t];Vn&&(i[t]=0)}}const h=pn[t];let b,_;if(h)return t==="$attrs"&&pe(e,"get",t),h(e);if((b=l.__cssModules)&&(b=b[t]))return b;if(n!==D&&B(n,t))return i[t]=4,n[t];if(_=u.config.globalProperties,B(_,t))return _[t]},set({_:e},t,n){const{data:s,setupState:o,ctx:r}=e;return o!==D&&B(o,t)?(o[t]=n,!0):s!==D&&B(s,t)?(s[t]=n,!0):B(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:o,propsOptions:r}},i){let l;return!!n[i]||e!==D&&B(e,i)||t!==D&&B(t,i)||(l=r[0])&&B(l,i)||B(s,i)||B(pn,i)||B(o.config.globalProperties,i)},defineProperty(e,t,n){return n.get!=null?this.set(e,t,n.get(),null):n.value!=null&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}},Xi=To();let Qi=0;function Gi(e,t,n){const s=e.type,o=(t?t.appContext:e.appContext)||Xi,r={uid:Qi++,vnode:e,type:s,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new wr(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:_o(s,o),emitsOptions:Qs(s,o),emit:null,emitted:null,propsDefaults:D,inheritAttrs:s.inheritAttrs,ctx:D,data:D,props:D,attrs:D,slots:D,refs:D,setupState:D,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=li.bind(null,r),e.ce&&e.ce(r),r}let ie=null;const $o=()=>ie||xe,Ct=e=>{ie=e,e.scope.on()},rt=()=>{ie&&ie.scope.off(),ie=null};function Mo(e){return e.vnode.shapeFlag&4}let Rt=!1;function el(e,t=!1){Rt=t;const{props:n,children:s}=e.vnode,o=Mo(e);Pi(e,n,o,t),Bi(e,s);const r=o?tl(e,t):void 0;return Rt=!1,r}function tl(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Us(new Proxy(e.ctx,Zi));const{setup:s}=n;if(s){const o=e.setupContext=s.length>1?sl(e):null;Ct(e),gt();const r=We(s,e,0,[e.props,o]);if(mt(),rt(),_s(r)){if(r.then(rt,rt),t)return r.then(i=>{Po(e,i,t)}).catch(i=>{nn(i,e,0)});e.asyncDep=r}else Po(e,r,t)}else So(e,t)}function Po(e,t,n){$(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:X(t)&&(e.setupState=Ws(t)),So(e,n)}let Oo;function So(e,t,n){const s=e.type;if(!e.render){if(!t&&Oo&&!s.render){const o=s.template;if(o){const{isCustomElement:r,compilerOptions:i}=e.appContext.config,{delimiters:l,compilerOptions:u}=s,a=ne(ne({isCustomElement:r,delimiters:l},i),u);s.render=Oo(o,a)}}e.render=s.render||we}Ct(e),gt(),Ii(e),mt(),rt()}function nl(e){return new Proxy(e.attrs,{get(t,n){return pe(e,"get","$attrs"),t[n]}})}function sl(e){const t=s=>{e.exposed=s||{}};let n;return{get attrs(){return n||(n=nl(e))},slots:e.slots,emit:e.emit,expose:t}}function ss(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Ws(Us(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in pn)return pn[n](e)}}))}function ol(e){return $(e)&&"__vccOpts"in e}const Bo=(e,t)=>ei(e,t,Rt);function rl(e,t,n){const s=arguments.length;return s===2?X(t)&&!A(t)?es(t)?W(e,null,[t]):W(e,t):W(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&es(n)&&(n=[n]),W(e,t,n))}const il="3.2.31",ll="http://www.w3.org/2000/svg",it=typeof document!="undefined"?document:null,Lo=it&&it.createElement("template"),cl={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const o=t?it.createElementNS(ll,e):it.createElement(e,n?{is:n}:void 0);return e==="select"&&s&&s.multiple!=null&&o.setAttribute("multiple",s.multiple),o},createText:e=>it.createTextNode(e),createComment:e=>it.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>it.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,s,o,r){const i=n?n.previousSibling:t.lastChild;if(o&&(o===r||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===r||!(o=o.nextSibling)););else{Lo.innerHTML=s?`<svg>${e}</svg>`:e;const l=Lo.content;if(s){const u=l.firstChild;for(;u.firstChild;)l.appendChild(u.firstChild);l.removeChild(u)}t.insertBefore(l,n)}return[i?i.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function ul(e,t,n){const s=e._vtc;s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function fl(e,t,n){const s=e.style,o=se(n);if(n&&!o){for(const r in n)os(s,r,n[r]);if(t&&!se(t))for(const r in t)n[r]==null&&os(s,r,"")}else{const r=s.display;o?t!==n&&(s.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(s.display=r)}}const No=/\s*!important$/;function os(e,t,n){if(A(n))n.forEach(s=>os(e,t,s));else if(t.startsWith("--"))e.setProperty(t,n);else{const s=al(e,t);No.test(n)?e.setProperty(pt(s),n.replace(No,""),"important"):e[s]=n}}const Ro=["Webkit","Moz","ms"],rs={};function al(e,t){const n=rs[t];if(n)return n;let s=ht(t);if(s!=="filter"&&s in e)return rs[t]=s;s=ys(s);for(let o=0;o<Ro.length;o++){const r=Ro[o]+s;if(r in e)return rs[t]=r}return t}const Do="http://www.w3.org/1999/xlink";function dl(e,t,n,s,o){if(s&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(Do,t.slice(6,t.length)):e.setAttributeNS(Do,t,n);else{const r=ar(t);n==null||r&&!ps(n)?e.removeAttribute(t):e.setAttribute(t,r?"":n)}}function hl(e,t,n,s,o,r,i){if(t==="innerHTML"||t==="textContent"){s&&i(s,o,r),e[t]=n==null?"":n;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const l=n==null?"":n;(e.value!==l||e.tagName==="OPTION")&&(e.value=l),n==null&&e.removeAttribute(t);return}if(n===""||n==null){const l=typeof e[t];if(l==="boolean"){e[t]=ps(n);return}else if(n==null&&l==="string"){e[t]="",e.removeAttribute(t);return}else if(l==="number"){try{e[t]=0}catch{}e.removeAttribute(t);return}}try{e[t]=n}catch{}}let gn=Date.now,Ho=!1;if(typeof window!="undefined"){gn()>document.createEvent("Event").timeStamp&&(gn=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);Ho=!!(e&&Number(e[1])<=53)}let is=0;const pl=Promise.resolve(),gl=()=>{is=0},ml=()=>is||(pl.then(gl),is=gn());function _l(e,t,n,s){e.addEventListener(t,n,s)}function bl(e,t,n,s){e.removeEventListener(t,n,s)}function vl(e,t,n,s,o=null){const r=e._vei||(e._vei={}),i=r[t];if(s&&i)i.value=s;else{const[l,u]=yl(t);if(s){const a=r[t]=Cl(s,o);_l(e,l,a,u)}else i&&(bl(e,l,i,u),r[t]=void 0)}}const jo=/(?:Once|Passive|Capture)$/;function yl(e){let t;if(jo.test(e)){t={};let n;for(;n=e.match(jo);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[pt(e.slice(2)),t]}function Cl(e,t){const n=s=>{const o=s.timeStamp||gn();(Ho||o>=n.attached-1)&&be(wl(s,n.value),t,5,[s])};return n.value=e,n.attached=ml(),n}function wl(e,t){if(A(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>o=>!o._stopped&&s&&s(o))}else return t}const Uo=/^on[a-z]/,xl=(e,t,n,s,o=!1,r,i,l,u)=>{t==="class"?ul(e,s,o):t==="style"?fl(e,n,s):zt(t)?vn(t)||vl(e,t,n,s,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):El(e,t,s,o))?hl(e,t,s,r,i,l,u):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),dl(e,t,s,o))};function El(e,t,n,s){return s?!!(t==="innerHTML"||t==="textContent"||t in e&&Uo.test(t)&&$(n)):t==="spellcheck"||t==="draggable"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||Uo.test(t)&&se(n)?!1:t in e}const Ye="transition",Dt="animation",ls=(e,{slots:t})=>rl(oo,Wo(e),t);ls.displayName="Transition";const Ko={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Tl=ls.props=ne({},oo.props,Ko),lt=(e,t=[])=>{A(e)?e.forEach(n=>n(...t)):e&&e(...t)},zo=e=>e?A(e)?e.some(t=>t.length>1):e.length>1:!1;function Wo(e){const t={};for(const I in e)I in Ko||(t[I]=e[I]);if(e.css===!1)return t;const{name:n="v",type:s,duration:o,enterFromClass:r=`${n}-enter-from`,enterActiveClass:i=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:u=r,appearActiveClass:a=i,appearToClass:h=l,leaveFromClass:b=`${n}-leave-from`,leaveActiveClass:_=`${n}-leave-active`,leaveToClass:E=`${n}-leave-to`}=e,P=kl(o),N=P&&P[0],M=P&&P[1],{onBeforeEnter:O,onEnter:fe,onEnterCancelled:Q,onLeave:q,onLeaveCancelled:ae,onBeforeAppear:Re=O,onAppear:R=fe,onAppearCancelled:ee=Q}=t,V=(I,G,$e)=>{ct(I,G?h:l),ct(I,G?a:i),$e&&$e()},he=(I,G)=>{ct(I,E),ct(I,_),G&&G()},ce=I=>(G,$e)=>{const wt=I?R:fe,le=()=>V(G,I,$e);lt(wt,[G,le]),qo(()=>{ct(G,I?u:r),Ne(G,I?h:l),zo(wt)||Vo(G,s,N,le)})};return ne(t,{onBeforeEnter(I){lt(O,[I]),Ne(I,r),Ne(I,i)},onBeforeAppear(I){lt(Re,[I]),Ne(I,u),Ne(I,a)},onEnter:ce(!1),onAppear:ce(!0),onLeave(I,G){const $e=()=>he(I,G);Ne(I,b),Xo(),Ne(I,_),qo(()=>{ct(I,b),Ne(I,E),zo(q)||Vo(I,s,M,$e)}),lt(q,[I,$e])},onEnterCancelled(I){V(I,!1),lt(Q,[I])},onAppearCancelled(I){V(I,!0),lt(ee,[I])},onLeaveCancelled(I){he(I),lt(ae,[I])}})}function kl(e){if(e==null)return null;if(X(e))return[cs(e.enter),cs(e.leave)];{const t=cs(e);return[t,t]}}function cs(e){return Cs(e)}function Ne(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e._vtc||(e._vtc=new Set)).add(t)}function ct(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function qo(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Il=0;function Vo(e,t,n,s){const o=e._endId=++Il,r=()=>{o===e._endId&&s()};if(n)return setTimeout(r,n);const{type:i,timeout:l,propCount:u}=Yo(e,t);if(!i)return s();const a=i+"end";let h=0;const b=()=>{e.removeEventListener(a,_),r()},_=E=>{E.target===e&&++h>=u&&b()};setTimeout(()=>{h<u&&b()},l+1),e.addEventListener(a,_)}function Yo(e,t){const n=window.getComputedStyle(e),s=P=>(n[P]||"").split(", "),o=s(Ye+"Delay"),r=s(Ye+"Duration"),i=Jo(o,r),l=s(Dt+"Delay"),u=s(Dt+"Duration"),a=Jo(l,u);let h=null,b=0,_=0;t===Ye?i>0&&(h=Ye,b=i,_=r.length):t===Dt?a>0&&(h=Dt,b=a,_=u.length):(b=Math.max(i,a),h=b>0?i>a?Ye:Dt:null,_=h?h===Ye?r.length:u.length:0);const E=h===Ye&&/\b(transform|all)(,|$)/.test(n[Ye+"Property"]);return{type:h,timeout:b,propCount:_,hasTransform:E}}function Jo(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>Zo(n)+Zo(e[s])))}function Zo(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function Xo(){return document.body.offsetHeight}const Qo=new WeakMap,Go=new WeakMap,Al={name:"TransitionGroup",props:ne({},Tl,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=$o(),s=so();let o,r;return co(()=>{if(!o.length)return;const i=e.moveClass||`${e.name||"v"}-move`;if(!Pl(o[0].el,n.vnode.el,i))return;o.forEach(Fl),o.forEach($l);const l=o.filter(Ml);Xo(),l.forEach(u=>{const a=u.el,h=a.style;Ne(a,i),h.transform=h.webkitTransform=h.transitionDuration="";const b=a._moveCb=_=>{_&&_.target!==a||(!_||/transform$/.test(_.propertyName))&&(a.removeEventListener("transitionend",b),a._moveCb=null,ct(a,i))};a.addEventListener("transitionend",b)})}),()=>{const i=L(e),l=Wo(i);let u=i.tag||ye;o=r,r=t.default?Wn(t.default()):[];for(let a=0;a<r.length;a++){const h=r[a];h.key!=null&&Bt(h,St(h,l,s,n))}if(o)for(let a=0;a<o.length;a++){const h=o[a];Bt(h,St(h,l,s,n)),Qo.set(h,h.el.getBoundingClientRect())}return W(u,null,r)}}};function Fl(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function $l(e){Go.set(e,e.el.getBoundingClientRect())}function Ml(e){const t=Qo.get(e),n=Go.get(e),s=t.left-n.left,o=t.top-n.top;if(s||o){const r=e.el.style;return r.transform=r.webkitTransform=`translate(${s}px,${o}px)`,r.transitionDuration="0s",e}}function Pl(e,t,n){const s=e.cloneNode();e._vtc&&e._vtc.forEach(i=>{i.split(/\s+/).forEach(l=>l&&s.classList.remove(l))}),n.split(/\s+/).forEach(i=>i&&s.classList.add(i)),s.style.display="none";const o=t.nodeType===1?t:t.parentNode;o.appendChild(s);const{hasTransform:r}=Yo(s);return o.removeChild(s),r}const Ol={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Ht(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:s}){!t!=!n&&(s?t?(s.beforeEnter(e),Ht(e,!0),s.enter(e)):s.leave(e,()=>{Ht(e,!1)}):Ht(e,t))},beforeUnmount(e,{value:t}){Ht(e,t)}};function Ht(e,t){e.style.display=t?e._vod:"none"}const Sl=ne({patchProp:xl},cl);let er;function Bl(){return er||(er=Hi(Sl))}const Ll=(...e)=>{const t=Bl().createApp(...e),{mount:n}=t;return t.mount=s=>{const o=Nl(s);if(!o)return;const r=t._component;!$(r)&&!r.render&&!r.template&&(r.template=o.innerHTML),o.innerHTML="";const i=n(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),i},t};function Nl(e){return se(e)?document.querySelector(e):e}const Rl=["width","height"],Dl=[j("path",{d:"M572.27 118H97.15C78.92 118 64 132.91 64 151.13v472.04c0 18.22 14.92 33.13 33.15 33.13h95.28c9.3 0 18.16 3.9 24.44 10.75l66.94 100.14c6.57 7.17 17.87 7.17 24.44 0l116.67-100.14a33.162 33.162 0 0 1 24.44-10.75h343.9c18.23 0 33.15-14.91 33.15-33.13V151.13c0-18.22-14.92-33.13-33.15-33.13h-74.58M258.75 440.97c-27.46 0-49.72-22.25-49.72-49.69 0-27.44 22.26-49.69 49.72-49.69s49.72 22.25 49.72 49.69c0 27.45-22.26 49.69-49.72 49.69z m186.46 0c-27.46 0-49.72-22.25-49.72-49.69 0-27.44 22.26-49.69 49.72-49.69 27.46 0 49.72 22.25 49.72 49.69 0 27.45-22.26 49.69-49.72 49.69z m186.46 0c-27.46 0-49.72-22.25-49.72-49.69 0-27.44 22.26-49.69 49.72-49.69 27.46 0 49.72 22.25 49.72 49.69 0 27.45-22.26 49.69-49.72 49.69z",fill:"#FFBB88","p-id":"4834"},null,-1),j("path",{d:"M926.85 251.45h-49.72V673.8c0 18.22-14.92 33.13-33.15 33.13H483.51c-9.29 0-18.16 3.9-24.44 10.75l-83.96 72.06h199.52c9.29 0 18.16 3.9 24.44 10.75l116.67 100.14c6.57 7.17 17.87 7.17 24.44 0l66.94-100.14a33.162 33.162 0 0 1 24.44-10.75h95.28c18.23 0 33.15-14.91 33.15-33.13V284.58c0.01-18.22-14.91-33.13-33.14-33.13z",fill:"#FF9852","p-id":"4835"},null,-1)],Hl=ke({props:{height:{type:Number,default:25},width:{type:Number,default:25}},setup(e){const t=e;return(n,s)=>(J(),re("svg",{t:"1645242166845",class:"svg-comment-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4833",width:t.width,height:t.height},Dl,8,Rl))}}),jl=["width","height"],Ul=[j("path",{d:"m512 268c0 17.9-4.3 34.5-12.9 49.7s-20.1 27.1-34.6 35.4c.4 2.7.6 6.9.6 12.6 0 27.1-9.1 50.1-27.1 69.1-18.1 19.1-39.9 28.6-65.4 28.6-11.4 0-22.3-2.1-32.6-6.3-8 16.4-19.5 29.6-34.6 39.7-15 10.2-31.5 15.2-49.4 15.2-18.3 0-34.9-4.9-49.7-14.9-14.9-9.9-26.3-23.2-34.3-40-10.3 4.2-21.1 6.3-32.6 6.3-25.5 0-47.4-9.5-65.7-28.6-18.3-19-27.4-42.1-27.4-69.1 0-3 .4-7.2 1.1-12.6-14.5-8.4-26-20.2-34.6-35.4-8.5-15.2-12.8-31.8-12.8-49.7 0-19 4.8-36.5 14.3-52.3s22.3-27.5 38.3-35.1c-4.2-11.4-6.3-22.9-6.3-34.3 0-27 9.1-50.1 27.4-69.1s40.2-28.6 65.7-28.6c11.4 0 22.3 2.1 32.6 6.3 8-16.4 19.5-29.6 34.6-39.7 15-10.1 31.5-15.2 49.4-15.2s34.4 5.1 49.4 15.1c15 10.1 26.6 23.3 34.6 39.7 10.3-4.2 21.1-6.3 32.6-6.3 25.5 0 47.3 9.5 65.4 28.6s27.1 42.1 27.1 69.1c0 12.6-1.9 24-5.7 34.3 16 7.6 28.8 19.3 38.3 35.1 9.5 15.9 14.3 33.4 14.3 52.4zm-266.9 77.1 105.7-158.3c2.7-4.2 3.5-8.8 2.6-13.7-1-4.9-3.5-8.8-7.7-11.4-4.2-2.7-8.8-3.6-13.7-2.9-5 .8-9 3.2-12 7.4l-93.1 140-42.9-42.8c-3.8-3.8-8.2-5.6-13.1-5.4-5 .2-9.3 2-13.1 5.4-3.4 3.4-5.1 7.7-5.1 12.9 0 5.1 1.7 9.4 5.1 12.9l58.9 58.9 2.9 2.3c3.4 2.3 6.9 3.4 10.3 3.4 6.7-.1 11.8-2.9 15.2-8.7z",fill:"#1da1f2"},null,-1)],Kl=ke({props:{height:{type:Number,default:25},width:{type:Number,default:25}},setup(e){const t=e;return(n,s)=>(J(),re("svg",{class:"svg-badge-icon",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",width:t.width,height:t.height},Ul,8,jl))}}),zl=["width","height"],Wl=[j("path",{d:"M478.104276 337.595469V184.66079L114.48369 442.197642l363.620586 257.597261V548.220967c145.529941 0.060409 280.456525 7.405763 394.534756 210.864063 0.001024-129.244021-21.321388-417.874222-394.534756-421.489561z",fill:"#98C4D8","p-id":"15464"},null,-1),j("path",{d:"M447.778841 307.270034V154.334331L84.158254 411.871182 447.778841 669.468444V517.894508c145.529941 0.060409 280.456525 7.405763 394.534756 210.864063 0-129.244021-21.322412-417.874222-394.534756-421.488537z",fill:"#EFD9A0","p-id":"15465"},null,-1),j("path",{d:"M283.00269 350.410162a27.283472 57.977507 55.515 1 0 95.578754-65.652623 27.283472 57.977507 55.515 1 0-95.578754 65.652623Z",fill:"#FEFEFE","p-id":"15466"},null,-1),j("path",{d:"M224.416795 445.822358a18.189323 31.830547 55.515 1 0 52.474213-36.044304 18.189323 31.830547 55.515 1 0-52.474213 36.044304Z",fill:"#FEFEFE","p-id":"15467"},null,-1)],ql=ke({props:{height:{type:Number,default:25},width:{type:Number,default:25}},setup(e){const t=e;return(n,s)=>(J(),re("svg",{t:"1645239919789",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"15463",width:t.width,height:t.height},Wl,8,zl))}}),Vl=e=>{const t=us(e.getDate(),2),n=us(e.getMonth()+1,2);return`${us(e.getFullYear(),2)}-${n}-${t}`};function Yl(e){return e instanceof Date&&!isNaN(e.getTime())}const us=(e,t)=>{let n=e.toString();for(;n.length<t;)n="0"+n;return n},Jl=e=>{var t=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;String.prototype.colorRgb=function(){var r=this.toLowerCase();if(r&&t.test(r)){if(r.length===4){for(var i="#",l=1;l<4;l+=1)i+=r.slice(l,l+1).concat(r.slice(l,l+1));r=i}for(var u=[],l=1;l<7;l+=2)u.push(parseInt("0x"+r.slice(l,l+2)));return"RGB("+u.join(",")+")"}else return r};var n="white",s=e.colorRgb();s=s.replace("RGB(",""),s=s.replace(")","");var o=s.split(",");return parseInt(o[0])+parseInt(o[1])+parseInt(o[2])>450&&(n="black"),n},Zl=e=>{if(e=new Date(e||""),Yl(e))try{const t=e.getTime(),s=Date.now()-t,o=Math.floor(s/(24*3600*1e3));if(o===0){const r=s%864e5,i=Math.floor(r/(3600*1e3));if(i===0){const l=r%36e5,u=Math.floor(l/(60*1e3));if(u===0){const a=l%6e4;return Math.round(a/1e3)+" \u79D2\u524D"}return u+" \u5206\u524D"}return i+" \u5C0F\u65F6\u524D"}return o<0?"\u521A\u521A":o<8?o+" \u5929\u524D":Vl(e)}catch(t){console.error("timeAgo \u9519\u8BEF",t)}else return""},Xl=(e,t)=>{const n={image(s,o,r){return`<a href="${s}" target="_blank" data-fancybox="group" class="fancybox">
           <img speak-src="${s}" src=${t} alt='${r}'>
          </a>`}};return marked.setOptions({renderer:new marked.Renderer,highlight:function(s){return hljs.highlightAuto(s).value},pedantic:!1,gfm:!0,tables:!0,breaks:!0,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!1}),marked.use({renderer:n}),marked(e)},tr=(e="img[speak-src]:not([loaded])",t="speak-src")=>{document.querySelectorAll(e).forEach(s=>{new IntersectionObserver((r,i)=>{r.forEach(l=>{if(l.isIntersecting){const u=l.target,a=u.getAttribute(t);u.setAttribute("src",a||""),u.setAttribute("loaded","loaded"),i.disconnect()}})}).observe(s)})};var Xc="",mn=(e,t)=>{const n=e.__vccOpts||e;for(const[s,o]of t)n[s]=o;return n};const Ql=["id"],Gl={class:"speak-body-card-header"},ec={class:"speak-body-card-name"},tc={class:"avatar"},nc=["speak-src","src"],sc={class:"name"},oc={class:"speak-body-card-time"},rc=["innerHTML"],ic={class:"speak-body-card-footer"},lc=ot(" \u8BC4\u8BBA "),cc={key:0,class:"speak-body-card-back"},uc=ot(" \u8FD4\u56DE ");var nr=mn(ke({props:{speak:{type:Object,required:!0},showBackBtn:{type:Boolean,default:!1}},emits:["showComment","closeComment"],setup(e,{emit:t}){const n=e,s=Be("option"),o=()=>{t("showComment",ut({},n.speak))},r=()=>{t("closeComment",ut({},n.speak))};return Qe(()=>{tr()}),(i,l)=>{var u;return J(),re("div",{class:"speak-body-card",id:n.speak._id},[j("div",Gl,[j("div",ec,[j("div",tc,[j("img",{class:"avatar-img","speak-src":n.speak.author.avatar,src:_e(s).loading_img,alt:"avatar"},null,8,nc)]),j("div",sc,ft(n.speak.author.nickName),1),W(Kl,{style:{"margin-left":"10px"},height:20,width:20}),j("div",oc,ft(_e(Zl)(n.speak.createdAt)),1)]),n.speak.tag?(J(),re("div",{key:0,style:Kt({background:n.speak.tag.bgColor,color:_e(Jl)(n.speak.tag.bgColor)}),class:"speak-body-card-label"},ft(n.speak.tag.name),5)):Nt("",!0)]),j("div",{class:"speak-body-card-content",innerHTML:_e(Xl)(n.speak.content,_e(s).loading_img)},null,8,rc),j("div",ic,[((u=n.speak)==null?void 0:u.showComment)==="1"&&!_e(s).hideComment?(J(),re("div",{key:0,onClick:o,class:"comments-btn"},[W(Hl),lc])):Nt("",!0)]),n.showBackBtn?(J(),re("div",cc,[j("div",{class:"back-btn",onClick:r},[W(ql),uc])])):Nt("",!0)],8,Ql)}}}),[["__scopeId","data-v-7eb119cc"]]),Gc="";const fc=e=>(ci("data-v-5812b69d"),e=e(),ui(),e),ac={class:"speak-comments"},dc=fc(()=>j("div",{class:"comment-container"},[j("div",{class:"comment",id:"comment-one-container"}),j("div",{class:"comment",id:"comment-two-container"})],-1));var hc=mn(ke({props:{speak:{type:Object,required:!0}},emits:["closeComment"],setup(e,{emit:t}){const n=e,s=Be("option");Qe(()=>{setTimeout(()=>{var r,i;(r=document.getElementById(n.speak._id))==null||r.scrollIntoView({behavior:"smooth",block:"center"}),s.initCommentName&&((i=window[s.initCommentName])==null||i.init(hs(ut({},s.initCommentOptions),{el:"#comment-one-container",path:"#"+n.speak._id}))),s.globalCommentName&&window[s.globalCommentName](hs(ut({},s.globalCommentOptions),{el:"#comment-two-container",path:"#"+n.speak._id}))})});const o=r=>{t("closeComment",r)};return(r,i)=>(J(),re("div",ac,[W(nr,{speak:n.speak,"show-back-btn":"","show-comment":!1,onCloseComment:o},null,8,["speak"]),dc]))}}),[["__scopeId","data-v-5812b69d"]]),tu="";const pc={class:"loading-container"},gc=["src"],mc=ke({setup(e){const t=Be("option");return(n,s)=>(J(),re("div",pc,[j("img",{src:_e(t).loading_img},null,8,gc)]))}});var nu="";const _c={class:"speak-body"},bc={key:1,class:"speak-content"},vc={class:"controller"};var yc=mn(ke({props:{speakList:{type:Array,required:!0},message:{type:String},btnClickFlag:{type:Boolean},loading:{type:Boolean}},emits:["nextSpeak"],setup(e,{emit:t}){const n=e,s=ze(null),o=l=>{s.value=l},r=l=>{s.value=null,setTimeout(()=>{var u;(u=document.getElementById(l._id))==null||u.scrollIntoView({behavior:"smooth",block:"center"})})},i=()=>{t("nextSpeak")};return Qe(()=>{tr()}),(l,u)=>(J(),re("div",_c,[s.value!==null?(J(),an(ls,{key:0,name:"fade"},{default:jn(()=>[W(hc,{speak:s.value,onCloseComment:r},null,8,["speak"])]),_:1})):(J(),re("div",bc,[W(Al,{name:"fade"},{default:jn(()=>[(J(!0),re(ye,null,Ji(n.speakList,a=>(J(),an(nr,{key:a._id,speak:a,onShowComment:o},null,8,["speak"]))),128))]),_:1}),Ni(W(mc,null,null,512),[[Ol,e.loading]]),j("div",vc,[ot(ft(e.message)+" ",1),e.btnClickFlag&&!e.loading?(J(),re("button",{key:0,class:"next-btn",onClick:i}," \u4E0B\u4E00\u9875 ")):Nt("",!0)])]))]))}}),[["__scopeId","data-v-8ef0915a"]]);const Cc="4.3.3",wc="https://www.antmoe.com/speak/",xc={key:0},Ec={key:1},Tc=ke({props:{visitorId:{type:String,default:null}},setup(e){const t=e,n=Be("option");function s(){const r=decodeURIComponent(window.location.href);window.location.href=`https://github.com/login/oauth/authorize?client_id=${n.githubClientId}&type=github&redirect_uri=`+r}function o(){window.localStorage.removeItem("ispeak-token"),window.location.href=n.speakPage||"/speak"}return(r,i)=>t.visitorId?(J(),re("div",xc,[ot(" \u6B22\u8FCE\u60A8\uFF0C"+ft(t.visitorId===_e(n).author?"\u535A\u4E3B":"GitHub\u7528\u6237")+" ",1),j("a",{onClick:o,class:"logoutBtn"},"\u9000\u51FA")])):(J(),re("div",Ec,[j("a",{class:"login",onClick:s},"Github\u6388\u6743")]))}});var ou="";const kc={class:"speak-footer"},Ic=ot(" Powered by "),Ac=["href"];var Fc=mn(ke({props:{visitorId:{type:String,default:null}},setup(e){const t=e,n=Be("option");function s(o){var r=new RegExp("(^|&)"+o+"=([^&]*)(&|$)"),i=decodeURIComponent(window.location.search).substring(1).match(r);return i!=null?decodeURIComponent(i[2]):null}return Qe(async()=>{var r;const o=s("code");if(o){const i=await(await fetch(n.api+"api/user/oauth/github?code="+o)).json();((r=i.data)==null?void 0:r.token)&&window.localStorage.setItem("ispeak-token",i.data.token),location.href=n.speakPage||"/speak"}}),(o,r)=>(J(),re("div",kc,[Ic,j("a",{href:_e(wc),target:"_blank"},"iSpeak",8,Ac),ot(" v"+ft(_e(Cc))+" ",1),_e(n).githubClientId?(J(),an(Tc,{key:0,visitorId:t.visitorId},null,8,["visitorId"])):Nt("",!0)]))}}),[["__scopeId","data-v-dfa83a38"]]);const $c={class:"xk-speak-container",id:"xk-speak-container"},Mc=ke({setup(e){const t=Be("option"),n=ze(!1),s=ze(!0),o=tn({author:t.author,page:1,pageSize:t.pageSize}),r=ze([]),i=ze([]),l=ze(0),u=ze(""),a=ze(null),h=Bo(()=>{const _=window.localStorage.getItem("ispeak-token");return _?{Authorization:"Bearer "+_}:{Authorization:""}}),b=async()=>{const _=t.api;try{n.value=!0;const E=await(await fetch(`${_}api/ispeak?author=${o.author}&page=${o.page}&pageSize=${o.pageSize}`,{headers:h.value})).json();n.value=!1,E.data.isLogin&&(a.value=E.data.isLogin),l.value=E.data.total,o.page=o.page+1,i.value.push(...E.data.items),i.value.length>=l.value&&(u.value="\u5DF2\u7ECF\u5230\u6CA1\u6709\u66F4\u591A\u4E86\uFF01",s.value=!1);const{data:P}=await(await fetch(_+"api/ispeak/tag/list?userId="+o.author)).json();r.value=P.data}catch(E){s.value=!1,u.value=E}};return Qe(async()=>{await b()}),(_,E)=>(J(),re("div",$c,[W(yc,{speakList:i.value,onNextSpeak:b,"btn-click-flag":s.value,loading:n.value,message:u.value},null,8,["speakList","btn-click-flag","loading","message"]),W(Fc,{visitorId:a.value},null,8,["visitorId"])]))}});var iu="";const Pc={api:"",author:"",pageSize:10,loading_img:"https://7.dusays.com/2021/03/04/d2d5e983e2961.gif",speakPage:"/speak"},Oc=e=>{const t=Ll(Mc);return t.provide("option",e),t.mount(e.el||"#ispeak")};async function sr(e){return Oc(ut(ut({},Pc),e))}te.default=sr,te.init=sr,Object.defineProperty(te,"__esModule",{value:!0}),te[Symbol.toStringTag]="Module"});
]]></content>
  </entry>
  <entry>
    <title></title>
    <url>/img/js/speak/highlight.min.js</url>
    <content><![CDATA[/*
  Highlight.js 10.6.0 (eb122d3b)
  License: BSD-3-Clause
  Copyright (c) 2006-2020, Ivan Sagalaev
*/
var hljs=function(){"use strict";function e(t){
return t instanceof Map?t.clear=t.delete=t.set=()=>{
throw Error("map is read-only")}:t instanceof Set&&(t.add=t.clear=t.delete=()=>{
throw Error("set is read-only")
}),Object.freeze(t),Object.getOwnPropertyNames(t).forEach((n=>{var s=t[n]
;"object"!=typeof s||Object.isFrozen(s)||e(s)})),t}var t=e,n=e;t.default=n
;class s{constructor(e){void 0===e.data&&(e.data={}),this.data=e.data}
ignoreMatch(){this.ignore=!0}}function r(e){
return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")
}function a(e,...t){const n=Object.create(null);for(const t in e)n[t]=e[t]
;return t.forEach((e=>{for(const t in e)n[t]=e[t]})),n}const i=e=>!!e.kind
;class o{constructor(e,t){
this.buffer="",this.classPrefix=t.classPrefix,e.walk(this)}addText(e){
this.buffer+=r(e)}openNode(e){if(!i(e))return;let t=e.kind
;e.sublanguage||(t=`${this.classPrefix}${t}`),this.span(t)}closeNode(e){
i(e)&&(this.buffer+="</span>")}value(){return this.buffer}span(e){
this.buffer+=`<span class="${e}">`}}class l{constructor(){this.rootNode={
children:[]},this.stack=[this.rootNode]}get top(){
return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){
this.top.children.push(e)}openNode(e){const t={kind:e,children:[]}
;this.add(t),this.stack.push(t)}closeNode(){
if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){
for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}
walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,t){
return"string"==typeof t?e.addText(t):t.children&&(e.openNode(t),
t.children.forEach((t=>this._walk(e,t))),e.closeNode(t)),e}static _collapse(e){
"string"!=typeof e&&e.children&&(e.children.every((e=>"string"==typeof e))?e.children=[e.children.join("")]:e.children.forEach((e=>{
l._collapse(e)})))}}class c extends l{constructor(e){super(),this.options=e}
addKeyword(e,t){""!==e&&(this.openNode(t),this.addText(e),this.closeNode())}
addText(e){""!==e&&this.add(e)}addSublanguage(e,t){const n=e.root
;n.kind=t,n.sublanguage=!0,this.add(n)}toHTML(){
return new o(this,this.options).value()}finalize(){return!0}}function u(e){
return e?"string"==typeof e?e:e.source:null}
const g="[a-zA-Z]\\w*",d="[a-zA-Z_]\\w*",h="\\b\\d+(\\.\\d+)?",f="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",p="\\b(0b[01]+)",m={
begin:"\\\\[\\s\\S]",relevance:0},b={className:"string",begin:"'",end:"'",
illegal:"\\n",contains:[m]},x={className:"string",begin:'"',end:'"',
illegal:"\\n",contains:[m]},E={
begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/
},v=(e,t,n={})=>{const s=a({className:"comment",begin:e,end:t,contains:[]},n)
;return s.contains.push(E),s.contains.push({className:"doctag",
begin:"(?:TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):",relevance:0}),s
},w=v("//","$"),N=v("/\\*","\\*/"),y=v("#","$");var R=Object.freeze({
__proto__:null,MATCH_NOTHING_RE:/\b\B/,IDENT_RE:g,UNDERSCORE_IDENT_RE:d,
NUMBER_RE:h,C_NUMBER_RE:f,BINARY_NUMBER_RE:p,
RE_STARTERS_RE:"!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",
SHEBANG:(e={})=>{const t=/^#![ ]*\//
;return e.binary&&(e.begin=((...e)=>e.map((e=>u(e))).join(""))(t,/.*\b/,e.binary,/\b.*/)),
a({className:"meta",begin:t,end:/$/,relevance:0,"on:begin":(e,t)=>{
0!==e.index&&t.ignoreMatch()}},e)},BACKSLASH_ESCAPE:m,APOS_STRING_MODE:b,
QUOTE_STRING_MODE:x,PHRASAL_WORDS_MODE:E,COMMENT:v,C_LINE_COMMENT_MODE:w,
C_BLOCK_COMMENT_MODE:N,HASH_COMMENT_MODE:y,NUMBER_MODE:{className:"number",
begin:h,relevance:0},C_NUMBER_MODE:{className:"number",begin:f,relevance:0},
BINARY_NUMBER_MODE:{className:"number",begin:p,relevance:0},CSS_NUMBER_MODE:{
className:"number",
begin:h+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",
relevance:0},REGEXP_MODE:{begin:/(?=\/[^/\n]*\/)/,contains:[{className:"regexp",
begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[m,{begin:/\[/,end:/\]/,
relevance:0,contains:[m]}]}]},TITLE_MODE:{className:"title",begin:g,relevance:0
},UNDERSCORE_TITLE_MODE:{className:"title",begin:d,relevance:0},METHOD_GUARD:{
begin:"\\.\\s*[a-zA-Z_]\\w*",relevance:0},END_SAME_AS_BEGIN:e=>Object.assign(e,{
"on:begin":(e,t)=>{t.data._beginMatch=e[1]},"on:end":(e,t)=>{
t.data._beginMatch!==e[1]&&t.ignoreMatch()}})});function _(e,t){
"."===e.input[e.index-1]&&t.ignoreMatch()}function k(e,t){
t&&e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",
e.__beforeBegin=_,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,
void 0===e.relevance&&(e.relevance=0))}function O(e,t){
Array.isArray(e.illegal)&&(e.illegal=((...e)=>"("+e.map((e=>u(e))).join("|")+")")(...e.illegal))
}function M(e,t){if(e.match){
if(e.begin||e.end)throw Error("begin & end are not supported with match")
;e.begin=e.match,delete e.match}}function A(e,t){
void 0===e.relevance&&(e.relevance=1)}
const L=["of","and","for","in","not","or","if","then","parent","list","value"]
;function B(e,t,n="keyword"){const s={}
;return"string"==typeof e?r(n,e.split(" ")):Array.isArray(e)?r(n,e):Object.keys(e).forEach((n=>{
Object.assign(s,B(e[n],t,n))})),s;function r(e,n){
t&&(n=n.map((e=>e.toLowerCase()))),n.forEach((t=>{const n=t.split("|")
;s[n[0]]=[e,I(n[0],n[1])]}))}}function I(e,t){
return t?Number(t):(e=>L.includes(e.toLowerCase()))(e)?0:1}
function T(e,{plugins:t}){function n(t,n){
return RegExp(u(t),"m"+(e.case_insensitive?"i":"")+(n?"g":""))}class s{
constructor(){
this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}
addRule(e,t){
t.position=this.position++,this.matchIndexes[this.matchAt]=t,this.regexes.push([t,e]),
this.matchAt+=(e=>RegExp(e.toString()+"|").exec("").length-1)(e)+1}compile(){
0===this.regexes.length&&(this.exec=()=>null)
;const e=this.regexes.map((e=>e[1]));this.matcherRe=n(((e,t="|")=>{
const n=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;let s=0,r=""
;for(let a=0;a<e.length;a++){s+=1;const i=s;let o=u(e[a])
;for(a>0&&(r+=t),r+="(";o.length>0;){const e=n.exec(o);if(null==e){r+=o;break}
r+=o.substring(0,e.index),
o=o.substring(e.index+e[0].length),"\\"===e[0][0]&&e[1]?r+="\\"+(Number(e[1])+i):(r+=e[0],
"("===e[0]&&s++)}r+=")"}return r})(e),!0),this.lastIndex=0}exec(e){
this.matcherRe.lastIndex=this.lastIndex;const t=this.matcherRe.exec(e)
;if(!t)return null
;const n=t.findIndex(((e,t)=>t>0&&void 0!==e)),s=this.matchIndexes[n]
;return t.splice(0,n),Object.assign(t,s)}}class r{constructor(){
this.rules=[],this.multiRegexes=[],
this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(e){
if(this.multiRegexes[e])return this.multiRegexes[e];const t=new s
;return this.rules.slice(e).forEach((([e,n])=>t.addRule(e,n))),
t.compile(),this.multiRegexes[e]=t,t}resumingScanAtSamePosition(){
return 0!==this.regexIndex}considerAll(){this.regexIndex=0}addRule(e,t){
this.rules.push([e,t]),"begin"===t.type&&this.count++}exec(e){
const t=this.getMatcher(this.regexIndex);t.lastIndex=this.lastIndex
;let n=t.exec(e)
;if(this.resumingScanAtSamePosition())if(n&&n.index===this.lastIndex);else{
const t=this.getMatcher(0);t.lastIndex=this.lastIndex+1,n=t.exec(e)}
return n&&(this.regexIndex+=n.position+1,
this.regexIndex===this.count&&this.considerAll()),n}}
if(e.compilerExtensions||(e.compilerExtensions=[]),
e.contains&&e.contains.includes("self"))throw Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.")
;return e.classNameAliases=a(e.classNameAliases||{}),function t(s,i){const o=s
;if(s.compiled)return o
;[M].forEach((e=>e(s,i))),e.compilerExtensions.forEach((e=>e(s,i))),
s.__beforeBegin=null,[k,O,A].forEach((e=>e(s,i))),s.compiled=!0;let l=null
;if("object"==typeof s.keywords&&(l=s.keywords.$pattern,
delete s.keywords.$pattern),
s.keywords&&(s.keywords=B(s.keywords,e.case_insensitive)),
s.lexemes&&l)throw Error("ERR: Prefer `keywords.$pattern` to `mode.lexemes`, BOTH are not allowed. (see mode reference) ")
;return l=l||s.lexemes||/\w+/,
o.keywordPatternRe=n(l,!0),i&&(s.begin||(s.begin=/\B|\b/),
o.beginRe=n(s.begin),s.endSameAsBegin&&(s.end=s.begin),
s.end||s.endsWithParent||(s.end=/\B|\b/),
s.end&&(o.endRe=n(s.end)),o.terminatorEnd=u(s.end)||"",
s.endsWithParent&&i.terminatorEnd&&(o.terminatorEnd+=(s.end?"|":"")+i.terminatorEnd)),
s.illegal&&(o.illegalRe=n(s.illegal)),
s.contains||(s.contains=[]),s.contains=[].concat(...s.contains.map((e=>(e=>(e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map((t=>a(e,{
variants:null},t)))),e.cachedVariants?e.cachedVariants:j(e)?a(e,{
starts:e.starts?a(e.starts):null
}):Object.isFrozen(e)?a(e):e))("self"===e?s:e)))),s.contains.forEach((e=>{t(e,o)
})),s.starts&&t(s.starts,i),o.matcher=(e=>{const t=new r
;return e.contains.forEach((e=>t.addRule(e.begin,{rule:e,type:"begin"
}))),e.terminatorEnd&&t.addRule(e.terminatorEnd,{type:"end"
}),e.illegal&&t.addRule(e.illegal,{type:"illegal"}),t})(o),o}(e)}function j(e){
return!!e&&(e.endsWithParent||j(e.starts))}function S(e){const t={
props:["language","code","autodetect"],data:()=>({detectedLanguage:"",
unknownLanguage:!1}),computed:{className(){
return this.unknownLanguage?"":"hljs "+this.detectedLanguage},highlighted(){
if(!this.autoDetect&&!e.getLanguage(this.language))return console.warn(`The language "${this.language}" you specified could not be found.`),
this.unknownLanguage=!0,r(this.code);let t={}
;return this.autoDetect?(t=e.highlightAuto(this.code),
this.detectedLanguage=t.language):(t=e.highlight(this.language,this.code,this.ignoreIllegals),
this.detectedLanguage=this.language),t.value},autoDetect(){
return!(this.language&&(e=this.autodetect,!e&&""!==e));var e},
ignoreIllegals:()=>!0},render(e){return e("pre",{},[e("code",{
class:this.className,domProps:{innerHTML:this.highlighted}})])}};return{
Component:t,VuePlugin:{install(e){e.component("highlightjs",t)}}}}const P={
"after:highlightBlock":({block:e,result:t,text:n})=>{const s=C(e)
;if(!s.length)return;const a=document.createElement("div")
;a.innerHTML=t.value,t.value=((e,t,n)=>{let s=0,a="";const i=[];function o(){
return e.length&&t.length?e[0].offset!==t[0].offset?e[0].offset<t[0].offset?e:t:"start"===t[0].event?e:t:e.length?e:t
}function l(e){a+="<"+D(e)+[].map.call(e.attributes,(function(e){
return" "+e.nodeName+'="'+r(e.value)+'"'})).join("")+">"}function c(e){
a+="</"+D(e)+">"}function u(e){("start"===e.event?l:c)(e.node)}
for(;e.length||t.length;){let t=o()
;if(a+=r(n.substring(s,t[0].offset)),s=t[0].offset,t===e){i.reverse().forEach(c)
;do{u(t.splice(0,1)[0]),t=o()}while(t===e&&t.length&&t[0].offset===s)
;i.reverse().forEach(l)
}else"start"===t[0].event?i.push(t[0].node):i.pop(),u(t.splice(0,1)[0])}
return a+r(n.substr(s))})(s,C(a),n)}};function D(e){
return e.nodeName.toLowerCase()}function C(e){const t=[];return function e(n,s){
for(let r=n.firstChild;r;r=r.nextSibling)3===r.nodeType?s+=r.nodeValue.length:1===r.nodeType&&(t.push({
event:"start",offset:s,node:r}),s=e(r,s),D(r).match(/br|hr|img|input/)||t.push({
event:"stop",offset:s,node:r}));return s}(e,0),t}const H=e=>{console.error(e)
},U=(e,...t)=>{console.log("WARN: "+e,...t)},$=(e,t)=>{
console.log(`Deprecated as of ${e}. ${t}`)},z=r,K=a,G=Symbol("nomatch")
;return(e=>{const n=Object.create(null),r=Object.create(null),a=[];let i=!0
;const o=/(^(<[^>]+>|\t|)+|\n)/gm,l="Could not find the language '{}', did you forget to load/include a language module?",u={
disableAutodetect:!0,name:"Plain text",contains:[]};let g={
noHighlightRe:/^(no-?highlight)$/i,
languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",
tabReplace:null,useBR:!1,languages:null,__emitter:c};function d(e){
return g.noHighlightRe.test(e)}function h(e,t,n,s){const r={code:t,language:e}
;M("before:highlight",r);const a=r.result?r.result:f(r.language,r.code,n,s)
;return a.code=r.code,M("after:highlight",a),a}function f(e,t,r,o){const c=t
;function u(e,t){const n=w.case_insensitive?t[0].toLowerCase():t[0]
;return Object.prototype.hasOwnProperty.call(e.keywords,n)&&e.keywords[n]}
function d(){null!=R.subLanguage?(()=>{if(""===M)return;let e=null
;if("string"==typeof R.subLanguage){
if(!n[R.subLanguage])return void O.addText(M)
;e=f(R.subLanguage,M,!0,k[R.subLanguage]),k[R.subLanguage]=e.top
}else e=p(M,R.subLanguage.length?R.subLanguage:null)
;R.relevance>0&&(A+=e.relevance),O.addSublanguage(e.emitter,e.language)
})():(()=>{if(!R.keywords)return void O.addText(M);let e=0
;R.keywordPatternRe.lastIndex=0;let t=R.keywordPatternRe.exec(M),n="";for(;t;){
n+=M.substring(e,t.index);const s=u(R,t);if(s){const[e,r]=s
;O.addText(n),n="",A+=r;const a=w.classNameAliases[e]||e;O.addKeyword(t[0],a)
}else n+=t[0];e=R.keywordPatternRe.lastIndex,t=R.keywordPatternRe.exec(M)}
n+=M.substr(e),O.addText(n)})(),M=""}function h(e){
return e.className&&O.openNode(w.classNameAliases[e.className]||e.className),
R=Object.create(e,{parent:{value:R}}),R}function m(e,t,n){let r=((e,t)=>{
const n=e&&e.exec(t);return n&&0===n.index})(e.endRe,n);if(r){if(e["on:end"]){
const n=new s(e);e["on:end"](t,n),n.ignore&&(r=!1)}if(r){
for(;e.endsParent&&e.parent;)e=e.parent;return e}}
if(e.endsWithParent)return m(e.parent,t,n)}function b(e){
return 0===R.matcher.regexIndex?(M+=e[0],1):(I=!0,0)}function x(e){
const t=e[0],n=c.substr(e.index),s=m(R,e,n);if(!s)return G;const r=R
;r.skip?M+=t:(r.returnEnd||r.excludeEnd||(M+=t),d(),r.excludeEnd&&(M=t));do{
R.className&&O.closeNode(),R.skip||R.subLanguage||(A+=R.relevance),R=R.parent
}while(R!==s.parent)
;return s.starts&&(s.endSameAsBegin&&(s.starts.endRe=s.endRe),
h(s.starts)),r.returnEnd?0:t.length}let E={};function v(t,n){const a=n&&n[0]
;if(M+=t,null==a)return d(),0
;if("begin"===E.type&&"end"===n.type&&E.index===n.index&&""===a){
if(M+=c.slice(n.index,n.index+1),!i){const t=Error("0 width match regex")
;throw t.languageName=e,t.badRule=E.rule,t}return 1}
if(E=n,"begin"===n.type)return function(e){
const t=e[0],n=e.rule,r=new s(n),a=[n.__beforeBegin,n["on:begin"]]
;for(const n of a)if(n&&(n(e,r),r.ignore))return b(t)
;return n&&n.endSameAsBegin&&(n.endRe=RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")),
n.skip?M+=t:(n.excludeBegin&&(M+=t),
d(),n.returnBegin||n.excludeBegin||(M=t)),h(n),n.returnBegin?0:t.length}(n)
;if("illegal"===n.type&&!r){
const e=Error('Illegal lexeme "'+a+'" for mode "'+(R.className||"<unnamed>")+'"')
;throw e.mode=R,e}if("end"===n.type){const e=x(n);if(e!==G)return e}
if("illegal"===n.type&&""===a)return 1
;if(B>1e5&&B>3*n.index)throw Error("potential infinite loop, way more iterations than matches")
;return M+=a,a.length}const w=_(e)
;if(!w)throw H(l.replace("{}",e)),Error('Unknown language: "'+e+'"')
;const N=T(w,{plugins:a});let y="",R=o||N;const k={},O=new g.__emitter(g);(()=>{
const e=[];for(let t=R;t!==w;t=t.parent)t.className&&e.unshift(t.className)
;e.forEach((e=>O.openNode(e)))})();let M="",A=0,L=0,B=0,I=!1;try{
for(R.matcher.considerAll();;){
B++,I?I=!1:R.matcher.considerAll(),R.matcher.lastIndex=L
;const e=R.matcher.exec(c);if(!e)break;const t=v(c.substring(L,e.index),e)
;L=e.index+t}return v(c.substr(L)),O.closeAllNodes(),O.finalize(),y=O.toHTML(),{
relevance:Math.floor(A),value:y,language:e,illegal:!1,emitter:O,top:R}}catch(t){
if(t.message&&t.message.includes("Illegal"))return{illegal:!0,illegalBy:{
msg:t.message,context:c.slice(L-100,L+100),mode:t.mode},sofar:y,relevance:0,
value:z(c),emitter:O};if(i)return{illegal:!1,relevance:0,value:z(c),emitter:O,
language:e,top:R,errorRaised:t};throw t}}function p(e,t){
t=t||g.languages||Object.keys(n);const s=(e=>{const t={relevance:0,
emitter:new g.__emitter(g),value:z(e),illegal:!1,top:u}
;return t.emitter.addText(e),t})(e),r=t.filter(_).filter(O).map((t=>f(t,e,!1)))
;r.unshift(s);const a=r.sort(((e,t)=>{
if(e.relevance!==t.relevance)return t.relevance-e.relevance
;if(e.language&&t.language){if(_(e.language).supersetOf===t.language)return 1
;if(_(t.language).supersetOf===e.language)return-1}return 0})),[i,o]=a,l=i
;return l.second_best=o,l}const m={"before:highlightBlock":({block:e})=>{
g.useBR&&(e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/<br[ /]*>/g,"\n"))
},"after:highlightBlock":({result:e})=>{
g.useBR&&(e.value=e.value.replace(/\n/g,"<br>"))}},b=/^(<[^>]+>|\t)+/gm,x={
"after:highlightBlock":({result:e})=>{
g.tabReplace&&(e.value=e.value.replace(b,(e=>e.replace(/\t/g,g.tabReplace))))}}
;function E(e){let t=null;const n=(e=>{let t=e.className+" "
;t+=e.parentNode?e.parentNode.className:"";const n=g.languageDetectRe.exec(t)
;if(n){const t=_(n[1])
;return t||(U(l.replace("{}",n[1])),U("Falling back to no-highlight mode for this block.",e)),
t?n[1]:"no-highlight"}return t.split(/\s+/).find((e=>d(e)||_(e)))})(e)
;if(d(n))return;M("before:highlightBlock",{block:e,language:n}),t=e
;const s=t.textContent,a=n?h(n,s,!0):p(s);M("after:highlightBlock",{block:e,
result:a,text:s}),e.innerHTML=a.value,((e,t,n)=>{const s=t?r[t]:n
;e.classList.add("hljs"),s&&e.classList.add(s)})(e,n,a.language),e.result={
language:a.language,re:a.relevance,relavance:a.relevance
},a.second_best&&(e.second_best={language:a.second_best.language,
re:a.second_best.relevance,relavance:a.second_best.relevance})}const v=()=>{
v.called||(v.called=!0,
$("10.6.0","initHighlighting() is deprecated.  Use highlightAll() instead."),
document.querySelectorAll("pre code").forEach(E))};let w=!1,N=!1;function y(){
N?document.querySelectorAll("pre code").forEach(E):w=!0}function _(e){
return e=(e||"").toLowerCase(),n[e]||n[r[e]]}function k(e,{languageName:t}){
"string"==typeof e&&(e=[e]),e.forEach((e=>{r[e]=t}))}function O(e){const t=_(e)
;return t&&!t.disableAutodetect}function M(e,t){const n=e;a.forEach((e=>{
e[n]&&e[n](t)}))}
"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("DOMContentLoaded",(()=>{
N=!0,w&&y()}),!1),Object.assign(e,{highlight:h,highlightAuto:p,highlightAll:y,
fixMarkup:e=>{
return $("10.2.0","fixMarkup will be removed entirely in v11.0"),$("10.2.0","Please see https://github.com/highlightjs/highlight.js/issues/2534"),
t=e,
g.tabReplace||g.useBR?t.replace(o,(e=>"\n"===e?g.useBR?"<br>":e:g.tabReplace?e.replace(/\t/g,g.tabReplace):e)):t
;var t},highlightBlock:E,configure:e=>{
e.useBR&&($("10.3.0","'useBR' will be removed entirely in v11.0"),
$("10.3.0","Please see https://github.com/highlightjs/highlight.js/issues/2559")),
g=K(g,e)},initHighlighting:v,initHighlightingOnLoad:()=>{
$("10.6.0","initHighlightingOnLoad() is deprecated.  Use highlightAll() instead."),
w=!0},registerLanguage:(t,s)=>{let r=null;try{r=s(e)}catch(e){
if(H("Language definition for '{}' could not be registered.".replace("{}",t)),
!i)throw e;H(e),r=u}
r.name||(r.name=t),n[t]=r,r.rawDefinition=s.bind(null,e),r.aliases&&k(r.aliases,{
languageName:t})},listLanguages:()=>Object.keys(n),getLanguage:_,
registerAliases:k,requireLanguage:e=>{
$("10.4.0","requireLanguage will be removed entirely in v11."),
$("10.4.0","Please see https://github.com/highlightjs/highlight.js/pull/2844")
;const t=_(e);if(t)return t
;throw Error("The '{}' language is required, but not loaded.".replace("{}",e))},
autoDetection:O,inherit:K,addPlugin:e=>{a.push(e)},vuePlugin:S(e).VuePlugin
}),e.debugMode=()=>{i=!1},e.safeMode=()=>{i=!0},e.versionString="10.6.0"
;for(const e in R)"object"==typeof R[e]&&t(R[e])
;return Object.assign(e,R),e.addPlugin(m),e.addPlugin(P),e.addPlugin(x),e})({})
}();"object"==typeof exports&&"undefined"!=typeof module&&(module.exports=hljs);
hljs.registerLanguage("apache",(()=>{"use strict";return e=>{const n={
className:"number",begin:/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}(:\d{1,5})?/}
;return{name:"Apache config",aliases:["apacheconf"],case_insensitive:!0,
contains:[e.HASH_COMMENT_MODE,{className:"section",begin:/<\/?/,end:/>/,
contains:[n,{className:"number",begin:/:\d{1,5}/
},e.inherit(e.QUOTE_STRING_MODE,{relevance:0})]},{className:"attribute",
begin:/\w+/,relevance:0,keywords:{
nomarkup:"order deny allow setenv rewriterule rewriteengine rewritecond documentroot sethandler errordocument loadmodule options header listen serverroot servername"
},starts:{end:/$/,relevance:0,keywords:{literal:"on off all deny allow"},
contains:[{className:"meta",begin:/\s\[/,end:/\]$/},{className:"variable",
begin:/[\$%]\{/,end:/\}/,contains:["self",{className:"number",begin:/[$%]\d+/}]
},n,{className:"number",begin:/\d+/},e.QUOTE_STRING_MODE]}}],illegal:/\S/}}
})());
hljs.registerLanguage("bash",(()=>{"use strict";function e(...e){
return e.map((e=>{return(s=e)?"string"==typeof s?s:s.source:null;var s
})).join("")}return s=>{const n={},t={begin:/\$\{/,end:/\}/,contains:["self",{
begin:/:-/,contains:[n]}]};Object.assign(n,{className:"variable",variants:[{
begin:e(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},t]});const a={
className:"subst",begin:/\$\(/,end:/\)/,contains:[s.BACKSLASH_ESCAPE]},i={
begin:/<<-?\s*(?=\w+)/,starts:{contains:[s.END_SAME_AS_BEGIN({begin:/(\w+)/,
end:/(\w+)/,className:"string"})]}},c={className:"string",begin:/"/,end:/"/,
contains:[s.BACKSLASH_ESCAPE,n,a]};a.contains.push(c);const o={begin:/\$\(\(/,
end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},s.NUMBER_MODE,n]
},r=s.SHEBANG({binary:"(fish|bash|zsh|sh|csh|ksh|tcsh|dash|scsh)",relevance:10
}),l={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,
contains:[s.inherit(s.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0};return{
name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z._-]+\b/,
keyword:"if then else elif fi for while in do done case esac function",
literal:"true false",
built_in:"break cd continue eval exec exit export getopts hash pwd readonly return shift test times trap umask unset alias bind builtin caller command declare echo enable help let local logout mapfile printf read readarray source type typeset ulimit unalias set shopt autoload bg bindkey bye cap chdir clone comparguments compcall compctl compdescribe compfiles compgroups compquote comptags comptry compvalues dirs disable disown echotc echoti emulate fc fg float functions getcap getln history integer jobs kill limit log noglob popd print pushd pushln rehash sched setcap setopt stat suspend ttyctl unfunction unhash unlimit unsetopt vared wait whence where which zcompile zformat zftp zle zmodload zparseopts zprof zpty zregexparse zsocket zstyle ztcp"
},contains:[r,s.SHEBANG(),l,o,s.HASH_COMMENT_MODE,i,c,{className:"",begin:/\\"/
},{className:"string",begin:/'/,end:/'/},n]}}})());
hljs.registerLanguage("c",(()=>{"use strict";function e(e){
return((...e)=>e.map((e=>(e=>e?"string"==typeof e?e:e.source:null)(e))).join(""))("(",e,")?")
}return t=>{const n=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]
}),r="[a-zA-Z_]\\w*::",a="(decltype\\(auto\\)|"+e(r)+"[a-zA-Z_]\\w*"+e("<[^<>]+>")+")",i={
className:"keyword",begin:"\\b[a-z\\d_]*_t\\b"},s={className:"string",
variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",
contains:[t.BACKSLASH_ESCAPE]},{
begin:"(u8?|U|L)?'(\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)|.)",
end:"'",illegal:"."},t.END_SAME_AS_BEGIN({
begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},o={
className:"number",variants:[{begin:"\\b(0b[01']+)"},{
begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)"
},{
begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"
}],relevance:0},c={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{
"meta-keyword":"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"
},contains:[{begin:/\\\n/,relevance:0},t.inherit(s,{className:"meta-string"}),{
className:"meta-string",begin:/<.*?>/,end:/$/,illegal:"\\n"
},n,t.C_BLOCK_COMMENT_MODE]},l={className:"title",begin:e(r)+t.IDENT_RE,
relevance:0},d=e(r)+t.IDENT_RE+"\\s*\\(",u={
keyword:"int float while private char char8_t char16_t char32_t catch import module export virtual operator sizeof dynamic_cast|10 typedef const_cast|10 const for static_cast|10 union namespace unsigned long volatile static protected bool template mutable if public friend do goto auto void enum else break extern using asm case typeid wchar_t short reinterpret_cast|10 default double register explicit signed typename try this switch continue inline delete alignas alignof constexpr consteval constinit decltype concept co_await co_return co_yield requires noexcept static_assert thread_local restrict final override atomic_bool atomic_char atomic_schar atomic_uchar atomic_short atomic_ushort atomic_int atomic_uint atomic_long atomic_ulong atomic_llong atomic_ullong new throw return and and_eq bitand bitor compl not not_eq or or_eq xor xor_eq",
built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr _Bool complex _Complex imaginary _Imaginary",
literal:"true false nullptr NULL"},m=[c,i,n,t.C_BLOCK_COMMENT_MODE,o,s],p={
variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{
beginKeywords:"new throw return else",end:/;/}],keywords:u,contains:m.concat([{
begin:/\(/,end:/\)/,keywords:u,contains:m.concat(["self"]),relevance:0}]),
relevance:0},_={className:"function",begin:"("+a+"[\\*&\\s]+)+"+d,
returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:u,illegal:/[^\w\s\*&:<>.]/,
contains:[{begin:"decltype\\(auto\\)",keywords:u,relevance:0},{begin:d,
returnBegin:!0,contains:[l],relevance:0},{className:"params",begin:/\(/,
end:/\)/,keywords:u,relevance:0,contains:[n,t.C_BLOCK_COMMENT_MODE,s,o,i,{
begin:/\(/,end:/\)/,keywords:u,relevance:0,
contains:["self",n,t.C_BLOCK_COMMENT_MODE,s,o,i]}]
},i,n,t.C_BLOCK_COMMENT_MODE,c]};return{name:"C",aliases:["c","h"],keywords:u,
disableAutodetect:!0,illegal:"</",contains:[].concat(p,_,m,[c,{
begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",
end:">",keywords:u,contains:["self",i]},{begin:t.IDENT_RE+"::",keywords:u},{
className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,
contains:[{beginKeywords:"final class struct"},t.TITLE_MODE]}]),exports:{
preprocessor:c,strings:s,keywords:u}}}})());
hljs.registerLanguage("coffeescript",(()=>{"use strict"
;const e=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],n=["true","false","null","undefined","NaN","Infinity"],a=[].concat(["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],["arguments","this","super","console","window","document","localStorage","module","global"],["Intl","DataView","Number","Math","Date","String","RegExp","Object","Function","Boolean","Error","Symbol","Set","Map","WeakSet","WeakMap","Proxy","Reflect","JSON","Promise","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Float32Array","Array","Uint8Array","Uint8ClampedArray","ArrayBuffer"],["EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"])
;return r=>{const t={
keyword:e.concat(["then","unless","until","loop","by","when","and","or","is","isnt","not"]).filter((i=["var","const","let","function","static"],
e=>!i.includes(e))),literal:n.concat(["yes","no","on","off"]),
built_in:a.concat(["npm","print"])};var i;const s="[A-Za-z$_][0-9A-Za-z$_]*",o={
className:"subst",begin:/#\{/,end:/\}/,keywords:t
},c=[r.BINARY_NUMBER_MODE,r.inherit(r.C_NUMBER_MODE,{starts:{end:"(\\s*/)?",
relevance:0}}),{className:"string",variants:[{begin:/'''/,end:/'''/,
contains:[r.BACKSLASH_ESCAPE]},{begin:/'/,end:/'/,contains:[r.BACKSLASH_ESCAPE]
},{begin:/"""/,end:/"""/,contains:[r.BACKSLASH_ESCAPE,o]},{begin:/"/,end:/"/,
contains:[r.BACKSLASH_ESCAPE,o]}]},{className:"regexp",variants:[{begin:"///",
end:"///",contains:[o,r.HASH_COMMENT_MODE]},{begin:"//[gim]{0,3}(?=\\W)",
relevance:0},{begin:/\/(?![ *]).*?(?![\\]).\/[gim]{0,3}(?=\W)/}]},{begin:"@"+s
},{subLanguage:"javascript",excludeBegin:!0,excludeEnd:!0,variants:[{
begin:"```",end:"```"},{begin:"`",end:"`"}]}];o.contains=c
;const l=r.inherit(r.TITLE_MODE,{begin:s}),d="(\\(.*\\)\\s*)?\\B[-=]>",g={
className:"params",begin:"\\([^\\(]",returnBegin:!0,contains:[{begin:/\(/,
end:/\)/,keywords:t,contains:["self"].concat(c)}]};return{name:"CoffeeScript",
aliases:["coffee","cson","iced"],keywords:t,illegal:/\/\*/,
contains:c.concat([r.COMMENT("###","###"),r.HASH_COMMENT_MODE,{
className:"function",begin:"^\\s*"+s+"\\s*=\\s*"+d,end:"[-=]>",returnBegin:!0,
contains:[l,g]},{begin:/[:\(,=]\s*/,relevance:0,contains:[{className:"function",
begin:d,end:"[-=]>",returnBegin:!0,contains:[g]}]},{className:"class",
beginKeywords:"class",end:"$",illegal:/[:="\[\]]/,contains:[{
beginKeywords:"extends",endsWithParent:!0,illegal:/[:="\[\]]/,contains:[l]},l]
},{begin:s+":",end:":",returnBegin:!0,returnEnd:!0,relevance:0}])}}})());
hljs.registerLanguage("cpp",(()=>{"use strict";function e(e){
return((...e)=>e.map((e=>(e=>e?"string"==typeof e?e:e.source:null)(e))).join(""))("(",e,")?")
}return t=>{const n=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]
}),r="[a-zA-Z_]\\w*::",a="(decltype\\(auto\\)|"+e(r)+"[a-zA-Z_]\\w*"+e("<[^<>]+>")+")",i={
className:"keyword",begin:"\\b[a-z\\d_]*_t\\b"},s={className:"string",
variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",
contains:[t.BACKSLASH_ESCAPE]},{
begin:"(u8?|U|L)?'(\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)|.)",
end:"'",illegal:"."},t.END_SAME_AS_BEGIN({
begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},o={
className:"number",variants:[{begin:"\\b(0b[01']+)"},{
begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)"
},{
begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"
}],relevance:0},c={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{
"meta-keyword":"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"
},contains:[{begin:/\\\n/,relevance:0},t.inherit(s,{className:"meta-string"}),{
className:"meta-string",begin:/<.*?>/,end:/$/,illegal:"\\n"
},n,t.C_BLOCK_COMMENT_MODE]},l={className:"title",begin:e(r)+t.IDENT_RE,
relevance:0},d=e(r)+t.IDENT_RE+"\\s*\\(",u={
keyword:"int float while private char char8_t char16_t char32_t catch import module export virtual operator sizeof dynamic_cast|10 typedef const_cast|10 const for static_cast|10 union namespace unsigned long volatile static protected bool template mutable if public friend do goto auto void enum else break extern using asm case typeid wchar_t short reinterpret_cast|10 default double register explicit signed typename try this switch continue inline delete alignas alignof constexpr consteval constinit decltype concept co_await co_return co_yield requires noexcept static_assert thread_local restrict final override atomic_bool atomic_char atomic_schar atomic_uchar atomic_short atomic_ushort atomic_int atomic_uint atomic_long atomic_ulong atomic_llong atomic_ullong new throw return and and_eq bitand bitor compl not not_eq or or_eq xor xor_eq",
built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr _Bool complex _Complex imaginary _Imaginary",
literal:"true false nullptr NULL"},m=[c,i,n,t.C_BLOCK_COMMENT_MODE,o,s],p={
variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{
beginKeywords:"new throw return else",end:/;/}],keywords:u,contains:m.concat([{
begin:/\(/,end:/\)/,keywords:u,contains:m.concat(["self"]),relevance:0}]),
relevance:0},_={className:"function",begin:"("+a+"[\\*&\\s]+)+"+d,
returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:u,illegal:/[^\w\s\*&:<>.]/,
contains:[{begin:"decltype\\(auto\\)",keywords:u,relevance:0},{begin:d,
returnBegin:!0,contains:[l],relevance:0},{className:"params",begin:/\(/,
end:/\)/,keywords:u,relevance:0,contains:[n,t.C_BLOCK_COMMENT_MODE,s,o,i,{
begin:/\(/,end:/\)/,keywords:u,relevance:0,
contains:["self",n,t.C_BLOCK_COMMENT_MODE,s,o,i]}]
},i,n,t.C_BLOCK_COMMENT_MODE,c]};return{name:"C++",
aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:u,illegal:"</",
contains:[].concat(p,_,m,[c,{
begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",
end:">",keywords:u,contains:["self",i]},{begin:t.IDENT_RE+"::",keywords:u},{
className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,
contains:[{beginKeywords:"final class struct"},t.TITLE_MODE]}]),exports:{
preprocessor:c,strings:s,keywords:u}}}})());
hljs.registerLanguage("csharp",(()=>{"use strict";return e=>{var n={
keyword:["abstract","as","base","break","case","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"].concat(["add","alias","and","ascending","async","await","by","descending","equals","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","remove","select","set","unmanaged","value|0","var","when","where","with","yield"]),
built_in:["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","unit","ushort"],
literal:["default","false","null","true"]},a=e.inherit(e.TITLE_MODE,{
begin:"[a-zA-Z](\\.?\\w)*"}),i={className:"number",variants:[{
begin:"\\b(0b[01']+)"},{
begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{
begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"
}],relevance:0},s={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]
},t=e.inherit(s,{illegal:/\n/}),r={className:"subst",begin:/\{/,end:/\}/,
keywords:n},l=e.inherit(r,{illegal:/\n/}),c={className:"string",begin:/\$"/,
end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/
},e.BACKSLASH_ESCAPE,l]},o={className:"string",begin:/\$@"/,end:'"',contains:[{
begin:/\{\{/},{begin:/\}\}/},{begin:'""'},r]},d=e.inherit(o,{illegal:/\n/,
contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},l]})
;r.contains=[o,c,s,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,i,e.C_BLOCK_COMMENT_MODE],
l.contains=[d,c,t,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,i,e.inherit(e.C_BLOCK_COMMENT_MODE,{
illegal:/\n/})];var g={variants:[o,c,s,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]
},E={begin:"<",end:">",contains:[{beginKeywords:"in out"},a]
},_=e.IDENT_RE+"(<"+e.IDENT_RE+"(\\s*,\\s*"+e.IDENT_RE+")*>)?(\\[\\])?",b={
begin:"@"+e.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],
keywords:n,illegal:/::/,contains:[e.COMMENT("///","$",{returnBegin:!0,
contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{
begin:"\x3c!--|--\x3e"},{begin:"</?",end:">"}]}]
}),e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",
end:"$",keywords:{
"meta-keyword":"if else elif endif define undef warning error line region endregion pragma checksum"
}},g,i,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,
illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"
},a,E,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",
relevance:0,end:/[{;=]/,illegal:/[^\s:]/,
contains:[a,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{
beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,
contains:[a,E,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"meta",
begin:"^\\s*\\[",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{
className:"meta-string",begin:/"/,end:/"/}]},{
beginKeywords:"new return throw await else",relevance:0},{className:"function",
begin:"("+_+"\\s+)+"+e.IDENT_RE+"\\s*(<.+>\\s*)?\\(",returnBegin:!0,
end:/\s*[{;=]/,excludeEnd:!0,keywords:n,contains:[{
beginKeywords:"public private protected static internal protected abstract async extern override unsafe virtual new sealed partial",
relevance:0},{begin:e.IDENT_RE+"\\s*(<.+>\\s*)?\\(",returnBegin:!0,
contains:[e.TITLE_MODE,E],relevance:0},{className:"params",begin:/\(/,end:/\)/,
excludeBegin:!0,excludeEnd:!0,keywords:n,relevance:0,
contains:[g,i,e.C_BLOCK_COMMENT_MODE]
},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},b]}}})());
hljs.registerLanguage("css",(()=>{"use strict"
;const e=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],t=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],i=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],o=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],r=["align-content","align-items","align-self","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","auto","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","clip-path","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-variant-ligatures","font-variation-settings","font-weight","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inherit","initial","justify-content","left","letter-spacing","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","mask","max-height","max-width","min-height","min-width","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","perspective","perspective-origin","pointer-events","position","quotes","resize","right","src","tab-size","table-layout","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-indent","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","white-space","widows","width","word-break","word-spacing","word-wrap","z-index"].reverse()
;return n=>{const a=(e=>({IMPORTANT:{className:"meta",begin:"!important"},
HEXCOLOR:{className:"number",begin:"#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})"},
ATTRIBUTE_SELECTOR_MODE:{className:"selector-attr",begin:/\[/,end:/\]/,
illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]}
}))(n),l=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE];return{name:"CSS",
case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},
classNameAliases:{keyframePosition:"selector-tag"},
contains:[n.C_BLOCK_COMMENT_MODE,{begin:/-(webkit|moz|ms|o)-(?=[a-z])/
},n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0
},{className:"selector-class",begin:"\\.[a-zA-Z-][a-zA-Z0-9_-]*",relevance:0
},a.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{
begin:":("+i.join("|")+")"},{begin:"::("+o.join("|")+")"}]},{
className:"attribute",begin:"\\b("+r.join("|")+")\\b"},{begin:":",end:"[;}]",
contains:[a.HEXCOLOR,a.IMPORTANT,n.CSS_NUMBER_MODE,...l,{
begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"
},contains:[{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]
},{className:"built_in",begin:/[\w-]+(?=\()/}]},{
begin:(s=/@/,((...e)=>e.map((e=>(e=>e?"string"==typeof e?e:e.source:null)(e))).join(""))("(?=",s,")")),
end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",
begin:/@-?\w[\w]*(-\w+)*/},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,
relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:"and or not only",
attribute:t.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"
},...l,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",
begin:"\\b("+e.join("|")+")\\b"}]};var s}})());
hljs.registerLanguage("diff",(()=>{"use strict";return e=>({name:"Diff",
aliases:["patch"],contains:[{className:"meta",relevance:10,variants:[{
begin:/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/},{begin:/^\*\*\* +\d+,\d+ +\*\*\*\*$/},{
begin:/^--- +\d+,\d+ +----$/}]},{className:"comment",variants:[{begin:/Index: /,
end:/$/},{begin:/^index/,end:/$/},{begin:/={3,}/,end:/$/},{begin:/^-{3}/,end:/$/
},{begin:/^\*{3} /,end:/$/},{begin:/^\+{3}/,end:/$/},{begin:/^\*{15}$/},{
begin:/^diff --git/,end:/$/}]},{className:"addition",begin:/^\+/,end:/$/},{
className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,
end:/$/}]})})());
hljs.registerLanguage("go",(()=>{"use strict";return e=>{const n={
keyword:"break default func interface select case map struct chan else goto package switch const fallthrough if range type continue for import return var go defer bool byte complex64 complex128 float32 float64 int8 int16 int32 int64 string uint8 uint16 uint32 uint64 int uint uintptr rune",
literal:"true false iota nil",
built_in:"append cap close complex copy imag len make new panic print println real recover delete"
};return{name:"Go",aliases:["golang"],keywords:n,illegal:"</",
contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"string",
variants:[e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{begin:"`",end:"`"}]},{
className:"number",variants:[{begin:e.C_NUMBER_RE+"[i]",relevance:1
},e.C_NUMBER_MODE]},{begin:/:=/},{className:"function",beginKeywords:"func",
end:"\\s*(\\{|$)",excludeEnd:!0,contains:[e.TITLE_MODE,{className:"params",
begin:/\(/,end:/\)/,keywords:n,illegal:/["']/}]}]}}})());
hljs.registerLanguage("http",(()=>{"use strict";function e(...e){
return e.map((e=>{return(n=e)?"string"==typeof n?n:n.source:null;var n
})).join("")}return n=>{const a="HTTP/(2|1\\.[01])",s=[{className:"attribute",
begin:e("^",/[A-Za-z][A-Za-z0-9-]*/,"(?=\\:\\s)"),starts:{contains:[{
className:"punctuation",begin:/: /,relevance:0,starts:{end:"$",relevance:0}}]}
},{begin:"\\n\\n",starts:{subLanguage:[],endsWithParent:!0}}];return{
name:"HTTP",aliases:["https"],illegal:/\S/,contains:[{begin:"^(?="+a+" \\d{3})",
end:/$/,contains:[{className:"meta",begin:a},{className:"number",
begin:"\\b\\d{3}\\b"}],starts:{end:/\b\B/,illegal:/\S/,contains:s}},{
begin:"(?=^[A-Z]+ (.*?) "+a+"$)",end:/$/,contains:[{className:"string",
begin:" ",end:" ",excludeBegin:!0,excludeEnd:!0},{className:"meta",begin:a},{
className:"keyword",begin:"[A-Z]+"}],starts:{end:/\b\B/,illegal:/\S/,contains:s}
}]}}})());
hljs.registerLanguage("ini",(()=>{"use strict";function e(e){
return e?"string"==typeof e?e:e.source:null}function n(...n){
return n.map((n=>e(n))).join("")}return s=>{const a={className:"number",
relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:s.NUMBER_RE}]
},i=s.COMMENT();i.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const t={
className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/
}]},r={className:"literal",begin:/\bon|off|true|false|yes|no\b/},l={
className:"string",contains:[s.BACKSLASH_ESCAPE],variants:[{begin:"'''",
end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'
},{begin:"'",end:"'"}]},c={begin:/\[/,end:/\]/,contains:[i,r,t,l,a,"self"],
relevance:0
},g="("+[/[A-Za-z0-9_-]+/,/"(\\"|[^"])*"/,/'[^']*'/].map((n=>e(n))).join("|")+")"
;return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,
contains:[i,{className:"section",begin:/\[+/,end:/\]+/},{
begin:n(g,"(\\s*\\.\\s*",g,")*",n("(?=",/\s*=\s*[^#\s]/,")")),className:"attr",
starts:{end:/$/,contains:[i,c,r,t,l,a]}}]}}})());
hljs.registerLanguage("java",(()=>{"use strict"
;var e="\\.([0-9](_*[0-9])*)",n="[0-9a-fA-F](_*[0-9a-fA-F])*",a={
className:"number",variants:[{
begin:`(\\b([0-9](_*[0-9])*)((${e})|\\.)?|(${e}))[eE][+-]?([0-9](_*[0-9])*)[fFdD]?\\b`
},{begin:`\\b([0-9](_*[0-9])*)((${e})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{
begin:`(${e})[fFdD]?\\b`},{begin:"\\b([0-9](_*[0-9])*)[fFdD]\\b"},{
begin:`\\b0[xX]((${n})\\.?|(${n})?\\.(${n}))[pP][+-]?([0-9](_*[0-9])*)[fFdD]?\\b`
},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${n})[lL]?\\b`},{
begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],
relevance:0};return e=>{
var n="false synchronized int abstract float private char boolean var static null if const for true while long strictfp finally protected import native final void enum else break transient catch instanceof byte super volatile case assert short package default double public try this switch continue throws protected public private module requires exports do",s={
className:"meta",begin:"@[\xc0-\u02b8a-zA-Z_$][\xc0-\u02b8a-zA-Z_$0-9]*",
contains:[{begin:/\(/,end:/\)/,contains:["self"]}]};const r=a;return{
name:"Java",aliases:["jsp"],keywords:n,illegal:/<\/|#/,
contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,
relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{
begin:/import java\.[a-z]+\./,keywords:"import",relevance:2
},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{
className:"class",beginKeywords:"class interface enum",end:/[{;=]/,
excludeEnd:!0,relevance:1,keywords:"class interface enum",illegal:/[:"\[\]]/,
contains:[{beginKeywords:"extends implements"},e.UNDERSCORE_TITLE_MODE]},{
beginKeywords:"new throw return else",relevance:0},{className:"class",
begin:"record\\s+"+e.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,excludeEnd:!0,
end:/[{;=]/,keywords:n,contains:[{beginKeywords:"record"},{
begin:e.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,
contains:[e.UNDERSCORE_TITLE_MODE]},{className:"params",begin:/\(/,end:/\)/,
keywords:n,relevance:0,contains:[e.C_BLOCK_COMMENT_MODE]
},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"function",
begin:"([\xc0-\u02b8a-zA-Z_$][\xc0-\u02b8a-zA-Z_$0-9]*(<[\xc0-\u02b8a-zA-Z_$][\xc0-\u02b8a-zA-Z_$0-9]*(\\s*,\\s*[\xc0-\u02b8a-zA-Z_$][\xc0-\u02b8a-zA-Z_$0-9]*)*>)?\\s+)+"+e.UNDERSCORE_IDENT_RE+"\\s*\\(",
returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:n,contains:[{
begin:e.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,
contains:[e.UNDERSCORE_TITLE_MODE]},{className:"params",begin:/\(/,end:/\)/,
keywords:n,relevance:0,
contains:[s,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,r,e.C_BLOCK_COMMENT_MODE]
},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},r,s]}}})());
hljs.registerLanguage("javascript",(()=>{"use strict"
;const e="[A-Za-z$_][0-9A-Za-z$_]*",n=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],a=["true","false","null","undefined","NaN","Infinity"],s=[].concat(["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],["arguments","this","super","console","window","document","localStorage","module","global"],["Intl","DataView","Number","Math","Date","String","RegExp","Object","Function","Boolean","Error","Symbol","Set","Map","WeakSet","WeakMap","Proxy","Reflect","JSON","Promise","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Float32Array","Array","Uint8Array","Uint8ClampedArray","ArrayBuffer"],["EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"])
;function r(e){return t("(?=",e,")")}function t(...e){return e.map((e=>{
return(n=e)?"string"==typeof n?n:n.source:null;var n})).join("")}return i=>{
const c=e,o={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,
isTrulyOpeningTag:(e,n)=>{const a=e[0].length+e.index,s=e.input[a]
;"<"!==s?">"===s&&(((e,{after:n})=>{const a="</"+e[0].slice(1)
;return-1!==e.input.indexOf(a,n)})(e,{after:a
})||n.ignoreMatch()):n.ignoreMatch()}},l={$pattern:e,keyword:n,literal:a,
built_in:s},b="\\.([0-9](_?[0-9])*)",g="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",d={
className:"number",variants:[{
begin:`(\\b(${g})((${b})|\\.)?|(${b}))[eE][+-]?([0-9](_?[0-9])*)\\b`},{
begin:`\\b(${g})\\b((${b})\\b|\\.)?|(${b})\\b`},{
begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{
begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{
begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{
begin:"\\b0[0-7]+n?\\b"}],relevance:0},E={className:"subst",begin:"\\$\\{",
end:"\\}",keywords:l,contains:[]},u={begin:"html`",end:"",starts:{end:"`",
returnEnd:!1,contains:[i.BACKSLASH_ESCAPE,E],subLanguage:"xml"}},_={
begin:"css`",end:"",starts:{end:"`",returnEnd:!1,
contains:[i.BACKSLASH_ESCAPE,E],subLanguage:"css"}},m={className:"string",
begin:"`",end:"`",contains:[i.BACKSLASH_ESCAPE,E]},N={className:"comment",
variants:[i.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{
className:"doctag",begin:"@[A-Za-z]+",contains:[{className:"type",begin:"\\{",
end:"\\}",relevance:0},{className:"variable",begin:c+"(?=\\s*(-)|$)",
endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]
}),i.C_BLOCK_COMMENT_MODE,i.C_LINE_COMMENT_MODE]
},y=[i.APOS_STRING_MODE,i.QUOTE_STRING_MODE,u,_,m,d,i.REGEXP_MODE]
;E.contains=y.concat({begin:/\{/,end:/\}/,keywords:l,contains:["self"].concat(y)
});const f=[].concat(N,E.contains),A=f.concat([{begin:/\(/,end:/\)/,keywords:l,
contains:["self"].concat(f)}]),p={className:"params",begin:/\(/,end:/\)/,
excludeBegin:!0,excludeEnd:!0,keywords:l,contains:A};return{name:"Javascript",
aliases:["js","jsx","mjs","cjs"],keywords:l,exports:{PARAMS_CONTAINS:A},
illegal:/#(?![$_A-z])/,contains:[i.SHEBANG({label:"shebang",binary:"node",
relevance:5}),{label:"use_strict",className:"meta",relevance:10,
begin:/^\s*['"]use (strict|asm)['"]/
},i.APOS_STRING_MODE,i.QUOTE_STRING_MODE,u,_,m,N,d,{
begin:t(/[{,\n]\s*/,r(t(/(((\/\/.*$)|(\/\*(\*[^/]|[^*])*\*\/))\s*)*/,c+"\\s*:"))),
relevance:0,contains:[{className:"attr",begin:c+r("\\s*:"),relevance:0}]},{
begin:"("+i.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",
keywords:"return throw case",contains:[N,i.REGEXP_MODE,{className:"function",
begin:"(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+i.UNDERSCORE_IDENT_RE+")\\s*=>",
returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{
begin:i.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0
},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:A}]}]
},{begin:/,/,relevance:0},{className:"",begin:/\s/,end:/\s*/,skip:!0},{
variants:[{begin:"<>",end:"</>"},{begin:o.begin,"on:begin":o.isTrulyOpeningTag,
end:o.end}],subLanguage:"xml",contains:[{begin:o.begin,end:o.end,skip:!0,
contains:["self"]}]}],relevance:0},{className:"function",
beginKeywords:"function",end:/[{;]/,excludeEnd:!0,keywords:l,
contains:["self",i.inherit(i.TITLE_MODE,{begin:c}),p],illegal:/%/},{
beginKeywords:"while if switch catch for"},{className:"function",
begin:i.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",
returnBegin:!0,contains:[p,i.inherit(i.TITLE_MODE,{begin:c})]},{variants:[{
begin:"\\."+c},{begin:"\\$"+c}],relevance:0},{className:"class",
beginKeywords:"class",end:/[{;=]/,excludeEnd:!0,illegal:/[:"[\]]/,contains:[{
beginKeywords:"extends"},i.UNDERSCORE_TITLE_MODE]},{begin:/\b(?=constructor)/,
end:/[{;]/,excludeEnd:!0,contains:[i.inherit(i.TITLE_MODE,{begin:c}),"self",p]
},{begin:"(get|set)\\s+(?="+c+"\\()",end:/\{/,keywords:"get set",
contains:[i.inherit(i.TITLE_MODE,{begin:c}),{begin:/\(\)/},p]},{begin:/\$[(.]/}]
}}})());
hljs.registerLanguage("json",(()=>{"use strict";return n=>{const e={
literal:"true false null"
},i=[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE],a=[n.QUOTE_STRING_MODE,n.C_NUMBER_MODE],l={
end:",",endsWithParent:!0,excludeEnd:!0,contains:a,keywords:e},t={begin:/\{/,
end:/\}/,contains:[{className:"attr",begin:/"/,end:/"/,
contains:[n.BACKSLASH_ESCAPE],illegal:"\\n"},n.inherit(l,{begin:/:/
})].concat(i),illegal:"\\S"},s={begin:"\\[",end:"\\]",contains:[n.inherit(l)],
illegal:"\\S"};return a.push(t,s),i.forEach((n=>{a.push(n)})),{name:"JSON",
contains:a,keywords:e,illegal:"\\S"}}})());
hljs.registerLanguage("kotlin",(()=>{"use strict"
;var e="\\.([0-9](_*[0-9])*)",n="[0-9a-fA-F](_*[0-9a-fA-F])*",a={
className:"number",variants:[{
begin:`(\\b([0-9](_*[0-9])*)((${e})|\\.)?|(${e}))[eE][+-]?([0-9](_*[0-9])*)[fFdD]?\\b`
},{begin:`\\b([0-9](_*[0-9])*)((${e})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{
begin:`(${e})[fFdD]?\\b`},{begin:"\\b([0-9](_*[0-9])*)[fFdD]\\b"},{
begin:`\\b0[xX]((${n})\\.?|(${n})?\\.(${n}))[pP][+-]?([0-9](_*[0-9])*)[fFdD]?\\b`
},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${n})[lL]?\\b`},{
begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],
relevance:0};return e=>{const n={
keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",
built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",
literal:"true false null"},i={className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"@"
},s={className:"subst",begin:/\$\{/,end:/\}/,contains:[e.C_NUMBER_MODE]},t={
className:"variable",begin:"\\$"+e.UNDERSCORE_IDENT_RE},r={className:"string",
variants:[{begin:'"""',end:'"""(?=[^"])',contains:[t,s]},{begin:"'",end:"'",
illegal:/\n/,contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,
contains:[e.BACKSLASH_ESCAPE,t,s]}]};s.contains.push(r);const l={
className:"meta",
begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+e.UNDERSCORE_IDENT_RE+")?"
},c={className:"meta",begin:"@"+e.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,
end:/\)/,contains:[e.inherit(r,{className:"meta-string"})]}]
},o=a,b=e.COMMENT("/\\*","\\*/",{contains:[e.C_BLOCK_COMMENT_MODE]}),E={
variants:[{className:"type",begin:e.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,
contains:[]}]},d=E;return d.variants[1].contains=[E],E.variants[1].contains=[d],
{name:"Kotlin",aliases:["kt"],keywords:n,contains:[e.COMMENT("/\\*\\*","\\*/",{
relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]
}),e.C_LINE_COMMENT_MODE,b,{className:"keyword",
begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",
begin:/@\w+/}]}},i,l,c,{className:"function",beginKeywords:"fun",end:"[(]|$",
returnBegin:!0,excludeEnd:!0,keywords:n,relevance:5,contains:[{
begin:e.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,
contains:[e.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,
keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,
endsParent:!0,keywords:n,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,
endsWithParent:!0,contains:[E,e.C_LINE_COMMENT_MODE,b],relevance:0
},e.C_LINE_COMMENT_MODE,b,l,c,r,e.C_NUMBER_MODE]},b]},{className:"class",
beginKeywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,
illegal:"extends implements",contains:[{
beginKeywords:"public protected internal private constructor"
},e.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,
excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,]|$/,
excludeBegin:!0,returnEnd:!0},l,c]},r,{className:"meta",begin:"^#!/usr/bin/env",
end:"$",illegal:"\n"},o]}}})());
hljs.registerLanguage("less",(()=>{"use strict"
;const e=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],t=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],i=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],o=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],n=["align-content","align-items","align-self","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","auto","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","clip-path","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-variant-ligatures","font-variation-settings","font-weight","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inherit","initial","justify-content","left","letter-spacing","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","mask","max-height","max-width","min-height","min-width","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","perspective","perspective-origin","pointer-events","position","quotes","resize","right","src","tab-size","table-layout","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-indent","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","white-space","widows","width","word-break","word-spacing","word-wrap","z-index"].reverse(),r=i.concat(o)
;return a=>{const s=(e=>({IMPORTANT:{className:"meta",begin:"!important"},
HEXCOLOR:{className:"number",begin:"#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})"},
ATTRIBUTE_SELECTOR_MODE:{className:"selector-attr",begin:/\[/,end:/\]/,
illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]}
}))(a),l=r,d="([\\w-]+|@\\{[\\w-]+\\})",c=[],g=[],b=e=>({className:"string",
begin:"~?"+e+".*?"+e}),m=(e,t,i)=>({className:e,begin:t,relevance:i}),u={
$pattern:/[a-z-]+/,keyword:"and or not only",attribute:t.join(" ")},p={
begin:"\\(",end:"\\)",contains:g,keywords:u,relevance:0}
;g.push(a.C_LINE_COMMENT_MODE,a.C_BLOCK_COMMENT_MODE,b("'"),b('"'),a.CSS_NUMBER_MODE,{
begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",
excludeEnd:!0}
},s.HEXCOLOR,p,m("variable","@@?[\\w-]+",10),m("variable","@\\{[\\w-]+\\}"),m("built_in","~?`[^`]*?`"),{
className:"attribute",begin:"[\\w-]+\\s*:",end:":",returnBegin:!0,excludeEnd:!0
},s.IMPORTANT);const f=g.concat({begin:/\{/,end:/\}/,contains:c}),h={
beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"
}].concat(g)},w={begin:d+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,
contains:[{begin:/-(webkit|moz|ms|o)-/},{className:"attribute",
begin:"\\b("+n.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,
illegal:"[<=$]",relevance:0,contains:g}}]},v={className:"keyword",
begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",
starts:{end:"[;{}]",keywords:u,returnEnd:!0,contains:g,relevance:0}},y={
className:"variable",variants:[{begin:"@[\\w-]+\\s*:",relevance:15},{
begin:"@[\\w-]+"}],starts:{end:"[;}]",returnEnd:!0,contains:f}},k={variants:[{
begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:d,end:/\{/}],returnBegin:!0,
returnEnd:!0,illegal:"[<='$\"]",relevance:0,
contains:[a.C_LINE_COMMENT_MODE,a.C_BLOCK_COMMENT_MODE,h,m("keyword","all\\b"),m("variable","@\\{[\\w-]+\\}"),{
begin:"\\b("+e.join("|")+")\\b",className:"selector-tag"
},m("selector-tag",d+"%?",0),m("selector-id","#"+d),m("selector-class","\\."+d,0),m("selector-tag","&",0),s.ATTRIBUTE_SELECTOR_MODE,{
className:"selector-pseudo",begin:":("+i.join("|")+")"},{
className:"selector-pseudo",begin:"::("+o.join("|")+")"},{begin:"\\(",end:"\\)",
contains:f},{begin:"!important"}]},E={begin:`[\\w-]+:(:)?(${l.join("|")})`,
returnBegin:!0,contains:[k]}
;return c.push(a.C_LINE_COMMENT_MODE,a.C_BLOCK_COMMENT_MODE,v,y,E,w,k),{
name:"Less",case_insensitive:!0,illegal:"[=>'/<($\"]",contains:c}}})());
hljs.registerLanguage("lua",(()=>{"use strict";return e=>{
const t="\\[=*\\[",a="\\]=*\\]",n={begin:t,end:a,contains:["self"]
},o=[e.COMMENT("--(?!\\[=*\\[)","$"),e.COMMENT("--\\[=*\\[",a,{contains:[n],
relevance:10})];return{name:"Lua",keywords:{$pattern:e.UNDERSCORE_IDENT_RE,
literal:"true false nil",
keyword:"and break do else elseif end for goto if in local not or repeat return then until while",
built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"
},contains:o.concat([{className:"function",beginKeywords:"function",end:"\\)",
contains:[e.inherit(e.TITLE_MODE,{
begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",
begin:"\\(",endsWithParent:!0,contains:o}].concat(o)
},e.C_NUMBER_MODE,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{className:"string",
begin:t,end:a,contains:[n],relevance:5}])}}})());
hljs.registerLanguage("makefile",(()=>{"use strict";return e=>{const i={
className:"variable",variants:[{begin:"\\$\\("+e.UNDERSCORE_IDENT_RE+"\\)",
contains:[e.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},a={className:"string",
begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,i]},n={className:"variable",
begin:/\$\([\w-]+\s/,end:/\)/,keywords:{
built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"
},contains:[i]},s={begin:"^"+e.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},r={
className:"section",begin:/^[^\s]+:/,end:/$/,contains:[i]};return{
name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,
keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"
},contains:[e.HASH_COMMENT_MODE,i,a,n,s,{className:"meta",begin:/^\.PHONY:/,
end:/$/,keywords:{$pattern:/[\.\w]+/,"meta-keyword":".PHONY"}},r]}}})());
hljs.registerLanguage("xml",(()=>{"use strict";function e(e){
return e?"string"==typeof e?e:e.source:null}function n(e){return a("(?=",e,")")}
function a(...n){return n.map((n=>e(n))).join("")}function s(...n){
return"("+n.map((n=>e(n))).join("|")+")"}return e=>{
const t=a(/[A-Z_]/,a("(",/[A-Z0-9_.-]*:/,")?"),/[A-Z0-9_.-]*/),i={
className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},r={begin:/\s/,
contains:[{className:"meta-keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]
},c=e.inherit(r,{begin:/\(/,end:/\)/}),l=e.inherit(e.APOS_STRING_MODE,{
className:"meta-string"}),g=e.inherit(e.QUOTE_STRING_MODE,{
className:"meta-string"}),m={endsWithParent:!0,illegal:/</,relevance:0,
contains:[{className:"attr",begin:/[A-Za-z0-9._:-]+/,relevance:0},{begin:/=\s*/,
relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,
end:/"/,contains:[i]},{begin:/'/,end:/'/,contains:[i]},{begin:/[^\s"'=<>`]+/}]}]
}]};return{name:"HTML, XML",
aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],
case_insensitive:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,
relevance:10,contains:[r,g,l,c,{begin:/\[/,end:/\]/,contains:[{className:"meta",
begin:/<![a-z]/,end:/>/,contains:[r,c,g,l]}]}]},e.COMMENT(/<!--/,/-->/,{
relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},i,{
className:"meta",begin:/<\?xml/,end:/\?>/,relevance:10},{className:"tag",
begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[m],starts:{
end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",
begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[m],starts:{
end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{
className:"tag",begin:/<>|<\/>/},{className:"tag",
begin:a(/</,n(a(t,s(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",
begin:t,relevance:0,starts:m}]},{className:"tag",begin:a(/<\//,n(a(t,/>/))),
contains:[{className:"name",begin:t,relevance:0},{begin:/>/,relevance:0}]}]}}
})());
hljs.registerLanguage("markdown",(()=>{"use strict";function n(...n){
return n.map((n=>{return(e=n)?"string"==typeof e?e:e.source:null;var e
})).join("")}return e=>{const a={begin:/<\/?[A-Za-z_]/,end:">",
subLanguage:"xml",relevance:0},i={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0
},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,
relevance:2},{begin:n(/\[.+?\]\(/,/[A-Za-z][A-Za-z0-9+.-]*/,/:\/\/.*?\)/),
relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{
begin:/\[.+?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{
className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,
returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",
excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",
end:"\\]",excludeBegin:!0,excludeEnd:!0}]},s={className:"strong",contains:[],
variants:[{begin:/_{2}/,end:/_{2}/},{begin:/\*{2}/,end:/\*{2}/}]},c={
className:"emphasis",contains:[],variants:[{begin:/\*(?!\*)/,end:/\*/},{
begin:/_(?!_)/,end:/_/,relevance:0}]};s.contains.push(c),c.contains.push(s)
;let t=[a,i]
;return s.contains=s.contains.concat(t),c.contains=c.contains.concat(t),
t=t.concat(s,c),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{
className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:t},{
begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",
contains:t}]}]},a,{className:"bullet",begin:"^[ \t]*([*+-]|(\\d+\\.))(?=\\s+)",
end:"\\s+",excludeEnd:!0},s,c,{className:"quote",begin:"^>\\s+",contains:t,
end:"$"},{className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{
begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{
begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",
contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},{
begin:"^[-\\*]{3,}",end:"$"},i,{begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{
className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{
className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]}]}}})());
hljs.registerLanguage("nginx",(()=>{"use strict";return e=>{const n={
className:"variable",variants:[{begin:/\$\d+/},{begin:/\$\{/,end:/\}/},{
begin:/[$@]/+e.UNDERSCORE_IDENT_RE}]},a={endsWithParent:!0,keywords:{
$pattern:"[a-z/_]+",
literal:"on off yes no true false none blocked debug info notice warn error crit select break last permanent redirect kqueue rtsig epoll poll /dev/poll"
},relevance:0,illegal:"=>",contains:[e.HASH_COMMENT_MODE,{className:"string",
contains:[e.BACKSLASH_ESCAPE,n],variants:[{begin:/"/,end:/"/},{begin:/'/,end:/'/
}]},{begin:"([a-z]+):/",end:"\\s",endsWithParent:!0,excludeEnd:!0,contains:[n]
},{className:"regexp",contains:[e.BACKSLASH_ESCAPE,n],variants:[{begin:"\\s\\^",
end:"\\s|\\{|;",returnEnd:!0},{begin:"~\\*?\\s+",end:"\\s|\\{|;",returnEnd:!0},{
begin:"\\*(\\.[a-z\\-]+)+"},{begin:"([a-z\\-]+\\.)+\\*"}]},{className:"number",
begin:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{
className:"number",begin:"\\b\\d+[kKmMgGdshdwy]*\\b",relevance:0},n]};return{
name:"Nginx config",aliases:["nginxconf"],contains:[e.HASH_COMMENT_MODE,{
begin:e.UNDERSCORE_IDENT_RE+"\\s+\\{",returnBegin:!0,end:/\{/,contains:[{
className:"section",begin:e.UNDERSCORE_IDENT_RE}],relevance:0},{
begin:e.UNDERSCORE_IDENT_RE+"\\s",end:";|\\{",returnBegin:!0,contains:[{
className:"attribute",begin:e.UNDERSCORE_IDENT_RE,starts:a}],relevance:0}],
illegal:"[^\\s\\}]"}}})());
hljs.registerLanguage("objectivec",(()=>{"use strict";return e=>{
const n=/[a-zA-Z@][a-zA-Z0-9_]*/,_={$pattern:n,
keyword:"@interface @class @protocol @implementation"};return{
name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],
keywords:{$pattern:n,
keyword:"int float while char export sizeof typedef const struct for union unsigned long volatile static bool mutable if do return goto void enum else break extern asm case short default double register explicit signed typename this switch continue wchar_t inline readonly assign readwrite self @synchronized id typeof nonatomic super unichar IBOutlet IBAction strong weak copy in out inout bycopy byref oneway __strong __weak __block __autoreleasing @private @protected @public @try @property @end @throw @catch @finally @autoreleasepool @synthesize @dynamic @selector @optional @required @encode @package @import @defs @compatibility_alias __bridge __bridge_transfer __bridge_retained __bridge_retain __covariant __contravariant __kindof _Nonnull _Nullable _Null_unspecified __FUNCTION__ __PRETTY_FUNCTION__ __attribute__ getter setter retain unsafe_unretained nonnull nullable null_unspecified null_resettable class instancetype NS_DESIGNATED_INITIALIZER NS_UNAVAILABLE NS_REQUIRES_SUPER NS_RETURNS_INNER_POINTER NS_INLINE NS_AVAILABLE NS_DEPRECATED NS_ENUM NS_OPTIONS NS_SWIFT_UNAVAILABLE NS_ASSUME_NONNULL_BEGIN NS_ASSUME_NONNULL_END NS_REFINED_FOR_SWIFT NS_SWIFT_NAME NS_SWIFT_NOTHROW NS_DURING NS_HANDLER NS_ENDHANDLER NS_VALUERETURN NS_VOIDRETURN",
literal:"false true FALSE TRUE nil YES NO NULL",
built_in:"BOOL dispatch_once_t dispatch_queue_t dispatch_sync dispatch_async dispatch_once"
},illegal:"</",contains:[{className:"built_in",
begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"
},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.C_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{
className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",
contains:[e.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,
keywords:{
"meta-keyword":"if else elif endif define undef warning error line pragma ifdef ifndef include"
},contains:[{begin:/\\\n/,relevance:0},e.inherit(e.QUOTE_STRING_MODE,{
className:"meta-string"}),{className:"meta-string",begin:/<.*?>/,end:/$/,
illegal:"\\n"},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{
className:"class",begin:"("+_.keyword.split(" ").join("|")+")\\b",end:/(\{|$)/,
excludeEnd:!0,keywords:_,contains:[e.UNDERSCORE_TITLE_MODE]},{
begin:"\\."+e.UNDERSCORE_IDENT_RE,relevance:0}]}}})());
hljs.registerLanguage("perl",(()=>{"use strict";function e(e){
return e?"string"==typeof e?e:e.source:null}function n(...n){
return n.map((n=>e(n))).join("")}function t(...n){
return"("+n.map((n=>e(n))).join("|")+")"}return e=>{
const r=/[dualxmsipngr]{0,12}/,s={$pattern:/[\w.]+/,
keyword:"abs accept alarm and atan2 bind binmode bless break caller chdir chmod chomp chop chown chr chroot close closedir connect continue cos crypt dbmclose dbmopen defined delete die do dump each else elsif endgrent endhostent endnetent endprotoent endpwent endservent eof eval exec exists exit exp fcntl fileno flock for foreach fork format formline getc getgrent getgrgid getgrnam gethostbyaddr gethostbyname gethostent getlogin getnetbyaddr getnetbyname getnetent getpeername getpgrp getpriority getprotobyname getprotobynumber getprotoent getpwent getpwnam getpwuid getservbyname getservbyport getservent getsockname getsockopt given glob gmtime goto grep gt hex if index int ioctl join keys kill last lc lcfirst length link listen local localtime log lstat lt ma map mkdir msgctl msgget msgrcv msgsnd my ne next no not oct open opendir or ord our pack package pipe pop pos print printf prototype push q|0 qq quotemeta qw qx rand read readdir readline readlink readpipe recv redo ref rename require reset return reverse rewinddir rindex rmdir say scalar seek seekdir select semctl semget semop send setgrent sethostent setnetent setpgrp setpriority setprotoent setpwent setservent setsockopt shift shmctl shmget shmread shmwrite shutdown sin sleep socket socketpair sort splice split sprintf sqrt srand stat state study sub substr symlink syscall sysopen sysread sysseek system syswrite tell telldir tie tied time times tr truncate uc ucfirst umask undef unless unlink unpack unshift untie until use utime values vec wait waitpid wantarray warn when while write x|0 xor y|0"
},i={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:s},a={begin:/->\{/,
end:/\}/},o={variants:[{begin:/\$\d/},{
begin:n(/[$%@](\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")
},{begin:/[$%@][^\s\w{]/,relevance:0}]
},c=[e.BACKSLASH_ESCAPE,i,o],g=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],l=(e,t,s="\\1")=>{
const i="\\1"===s?s:n(s,t)
;return n(n("(?:",e,")"),t,/(?:\\.|[^\\\/])*?/,i,/(?:\\.|[^\\\/])*?/,s,r)
},d=(e,t,s)=>n(n("(?:",e,")"),t,/(?:\\.|[^\\\/])*?/,s,r),p=[o,e.HASH_COMMENT_MODE,e.COMMENT(/^=\w/,/=cut/,{
endsWithParent:!0}),a,{className:"string",contains:c,variants:[{
begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",
end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{
begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",
relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",
contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",
contains:[e.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{
begin:"-?\\w+\\s*=>",relevance:0}]},{className:"number",
begin:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",
relevance:0},{
begin:"(\\/\\/|"+e.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",
keywords:"split return print reverse grep",relevance:0,
contains:[e.HASH_COMMENT_MODE,{className:"regexp",variants:[{
begin:l("s|tr|y",t(...g))},{begin:l("s|tr|y","\\(","\\)")},{
begin:l("s|tr|y","\\[","\\]")},{begin:l("s|tr|y","\\{","\\}")}],relevance:2},{
className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{
begin:d("(?:m|qr)?",/\//,/\//)},{begin:d("m|qr",t(...g),/\1/)},{
begin:d("m|qr",/\(/,/\)/)},{begin:d("m|qr",/\[/,/\]/)},{
begin:d("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub",
end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE]},{
begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",
subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]
}];return i.contains=p,a.contains=p,{name:"Perl",aliases:["pl","pm"],keywords:s,
contains:p}}})());
hljs.registerLanguage("php",(()=>{"use strict";return e=>{const r={
className:"variable",
begin:"\\$+[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*(?![A-Za-z0-9])(?![$])"},t={
className:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?[=]?/},{
begin:/\?>/}]},a={className:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,
end:/\}/}]},n=e.inherit(e.APOS_STRING_MODE,{illegal:null
}),i=e.inherit(e.QUOTE_STRING_MODE,{illegal:null,
contains:e.QUOTE_STRING_MODE.contains.concat(a)}),o=e.END_SAME_AS_BEGIN({
begin:/<<<[ \t]*(\w+)\n/,end:/[ \t]*(\w+)\b/,
contains:e.QUOTE_STRING_MODE.contains.concat(a)}),l={className:"string",
contains:[e.BACKSLASH_ESCAPE,t],variants:[e.inherit(n,{begin:"b'",end:"'"
}),e.inherit(i,{begin:'b"',end:'"'}),i,n,o]},c={
variants:[e.BINARY_NUMBER_MODE,e.C_NUMBER_MODE]},s={
keyword:"__CLASS__ __DIR__ __FILE__ __FUNCTION__ __LINE__ __METHOD__ __NAMESPACE__ __TRAIT__ die echo exit include include_once print require require_once array abstract and as binary bool boolean break callable case catch class clone const continue declare default do double else elseif empty enddeclare endfor endforeach endif endswitch endwhile eval extends final finally float for foreach from global goto if implements instanceof insteadof int integer interface isset iterable list match|0 new object or private protected public real return string switch throw trait try unset use var void while xor yield",
literal:"false null true",
built_in:"Error|0 AppendIterator ArgumentCountError ArithmeticError ArrayIterator ArrayObject AssertionError BadFunctionCallException BadMethodCallException CachingIterator CallbackFilterIterator CompileError Countable DirectoryIterator DivisionByZeroError DomainException EmptyIterator ErrorException Exception FilesystemIterator FilterIterator GlobIterator InfiniteIterator InvalidArgumentException IteratorIterator LengthException LimitIterator LogicException MultipleIterator NoRewindIterator OutOfBoundsException OutOfRangeException OuterIterator OverflowException ParentIterator ParseError RangeException RecursiveArrayIterator RecursiveCachingIterator RecursiveCallbackFilterIterator RecursiveDirectoryIterator RecursiveFilterIterator RecursiveIterator RecursiveIteratorIterator RecursiveRegexIterator RecursiveTreeIterator RegexIterator RuntimeException SeekableIterator SplDoublyLinkedList SplFileInfo SplFileObject SplFixedArray SplHeap SplMaxHeap SplMinHeap SplObjectStorage SplObserver SplObserver SplPriorityQueue SplQueue SplStack SplSubject SplSubject SplTempFileObject TypeError UnderflowException UnexpectedValueException ArrayAccess Closure Generator Iterator IteratorAggregate Serializable Throwable Traversable WeakReference Directory __PHP_Incomplete_Class parent php_user_filter self static stdClass"
};return{aliases:["php","php3","php4","php5","php6","php7","php8"],
case_insensitive:!0,keywords:s,
contains:[e.HASH_COMMENT_MODE,e.COMMENT("//","$",{contains:[t]
}),e.COMMENT("/\\*","\\*/",{contains:[{className:"doctag",begin:"@[A-Za-z]+"}]
}),e.COMMENT("__halt_compiler.+?;",!1,{endsWithParent:!0,
keywords:"__halt_compiler"}),t,{className:"keyword",begin:/\$this\b/},r,{
begin:/(::|->)+[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/},{className:"function",
relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,
illegal:"[$%\\[]",contains:[e.UNDERSCORE_TITLE_MODE,{begin:"=>"},{
className:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,
keywords:s,contains:["self",r,e.C_BLOCK_COMMENT_MODE,l,c]}]},{className:"class",
beginKeywords:"class interface",relevance:0,end:/\{/,excludeEnd:!0,
illegal:/[:($"]/,contains:[{beginKeywords:"extends implements"
},e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",
illegal:/[.']/,contains:[e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"use",
relevance:0,end:";",contains:[e.UNDERSCORE_TITLE_MODE]},l,c]}}})());
hljs.registerLanguage("php-template",(()=>{"use strict";return n=>({
name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,
subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',
end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},n.inherit(n.APOS_STRING_MODE,{
illegal:null,className:null,contains:null,skip:!0
}),n.inherit(n.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,
skip:!0})]}]})})());
hljs.registerLanguage("plaintext",(()=>{"use strict";return t=>({
name:"Plain text",aliases:["text","txt"],disableAutodetect:!0})})());
hljs.registerLanguage("properties",(()=>{"use strict";return e=>{
var n="[ \\t\\f]*",a=n+"[:=]"+n,t="("+a+"|[ \\t\\f]+)",r="([^\\\\\\W:= \\t\\f\\n]|\\\\.)+",s="([^\\\\:= \\t\\f\\n]|\\\\.)+",i={
end:t,relevance:0,starts:{className:"string",end:/$/,relevance:0,contains:[{
begin:"\\\\\\\\"},{begin:"\\\\\\n"}]}};return{name:".properties",
case_insensitive:!0,illegal:/\S/,contains:[e.COMMENT("^\\s*[!#]","$"),{
returnBegin:!0,variants:[{begin:r+a,relevance:1},{begin:r+"[ \\t\\f]+",
relevance:0}],contains:[{className:"attr",begin:r,endsParent:!0,relevance:0}],
starts:i},{begin:s+t,returnBegin:!0,relevance:0,contains:[{className:"meta",
begin:s,endsParent:!0,relevance:0}],starts:i},{className:"attr",relevance:0,
begin:s+n+"$"}]}}})());
hljs.registerLanguage("python",(()=>{"use strict";return e=>{const n={
keyword:["and","as","assert","async","await","break","class","continue","def","del","elif","else","except","finally","for","","from","global","if","import","in","is","lambda","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],
built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],
literal:["__debug__","Ellipsis","False","None","NotImplemented","True"]},a={
className:"meta",begin:/^(>>>|\.\.\.) /},s={className:"subst",begin:/\{/,
end:/\}/,keywords:n,illegal:/#/},i={begin:/\{\{/,relevance:0},r={
className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{
begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,
contains:[e.BACKSLASH_ESCAPE,a],relevance:10},{
begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,
contains:[e.BACKSLASH_ESCAPE,a],relevance:10},{
begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,
contains:[e.BACKSLASH_ESCAPE,a,i,s]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,
end:/"""/,contains:[e.BACKSLASH_ESCAPE,a,i,s]},{begin:/([uU]|[rR])'/,end:/'/,
relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{
begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,
end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,
contains:[e.BACKSLASH_ESCAPE,i,s]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,
contains:[e.BACKSLASH_ESCAPE,i,s]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]
},t="[0-9](_?[0-9])*",l=`(\\b(${t}))?\\.(${t})|\\b(${t})\\.`,b={
className:"number",relevance:0,variants:[{
begin:`(\\b(${t})|(${l}))[eE][+-]?(${t})[jJ]?\\b`},{begin:`(${l})[jJ]?`},{
begin:"\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?\\b"},{
begin:"\\b0[bB](_?[01])+[lL]?\\b"},{begin:"\\b0[oO](_?[0-7])+[lL]?\\b"},{
begin:"\\b0[xX](_?[0-9a-fA-F])+[lL]?\\b"},{begin:`\\b(${t})[jJ]\\b`}]},o={
className:"params",variants:[{begin:/\(\s*\)/,skip:!0,className:null},{
begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:n,
contains:["self",a,b,r,e.HASH_COMMENT_MODE]}]};return s.contains=[r,b,a],{
name:"Python",aliases:["py","gyp","ipython"],keywords:n,
illegal:/(<\/|->|\?)|=>/,contains:[a,b,{begin:/\bself\b/},{beginKeywords:"if",
relevance:0},r,e.HASH_COMMENT_MODE,{variants:[{className:"function",
beginKeywords:"def"},{className:"class",beginKeywords:"class"}],end:/:/,
illegal:/[${=;\n,]/,contains:[e.UNDERSCORE_TITLE_MODE,o,{begin:/->/,
endsWithParent:!0,keywords:"None"}]},{className:"meta",begin:/^[\t ]*@/,
end:/(?=#)|$/,contains:[b,o,r]},{begin:/\b(print|exec)\(/}]}}})());
hljs.registerLanguage("python-repl",(()=>{"use strict";return s=>({
aliases:["pycon"],contains:[{className:"meta",starts:{end:/ |$/,starts:{end:"$",
subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{
begin:/^\.\.\.(?=[ ]|$)/}]}]})})());
hljs.registerLanguage("r",(()=>{"use strict";function e(...e){return e.map((e=>{
return(a=e)?"string"==typeof a?a:a.source:null;var a})).join("")}return a=>{
const n=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/;return{name:"R",
illegal:/->/,keywords:{$pattern:n,
keyword:"function if in break next repeat else for while",
literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",
built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"
},compilerExtensions:[(a,n)=>{if(!a.beforeMatch)return
;if(a.starts)throw Error("beforeMatch cannot be used with starts")
;const i=Object.assign({},a);Object.keys(a).forEach((e=>{delete a[e]
})),a.begin=e(i.beforeMatch,e("(?=",i.begin,")")),a.starts={relevance:0,
contains:[Object.assign(i,{endsParent:!0})]},a.relevance=0,delete i.beforeMatch
}],contains:[a.COMMENT(/#'/,/$/,{contains:[{className:"doctag",
begin:"@examples",starts:{contains:[{begin:/\n/},{begin:/#'\s*(?=@[a-zA-Z]+)/,
endsParent:!0},{begin:/#'/,end:/$/,excludeBegin:!0}]}},{className:"doctag",
begin:"@param",end:/$/,contains:[{className:"variable",variants:[{begin:n},{
begin:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{className:"doctag",
begin:/@[a-zA-Z]+/},{className:"meta-keyword",begin:/\\[a-zA-Z]+/}]
}),a.HASH_COMMENT_MODE,{className:"string",contains:[a.BACKSLASH_ESCAPE],
variants:[a.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/
}),a.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/
}),a.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/
}),a.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/
}),a.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/
}),a.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',
relevance:0},{begin:"'",end:"'",relevance:0}]},{className:"number",relevance:0,
beforeMatch:/([^a-zA-Z0-9._])/,variants:[{
match:/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/},{
match:/0[xX][0-9a-fA-F]+([pP][+-]?\d+)?[Li]?/},{
match:/(\d+(\.\d*)?|\.\d+)([eE][+-]?\d+)?[Li]?/}]},{begin:"%",end:"%"},{
begin:e(/[a-zA-Z][a-zA-Z_0-9]*/,"\\s+<-\\s+")},{begin:"`",end:"`",contains:[{
begin:/\\./}]}]}}})());
hljs.registerLanguage("ruby",(()=>{"use strict";function e(...e){
return e.map((e=>{return(n=e)?"string"==typeof n?n:n.source:null;var n
})).join("")}return n=>{
const a="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",i={
keyword:"and then defined module in return redo if BEGIN retry end for self when next until do begin unless END rescue else break undef not super class case require yield alias while ensure elsif or include attr_reader attr_writer attr_accessor __FILE__",
built_in:"proc lambda",literal:"true false nil"},s={className:"doctag",
begin:"@[A-Za-z]+"},r={begin:"#<",end:">"},b=[n.COMMENT("#","$",{contains:[s]
}),n.COMMENT("^=begin","^=end",{contains:[s],relevance:10
}),n.COMMENT("^__END__","\\n$")],c={className:"subst",begin:/#\{/,end:/\}/,
keywords:i},t={className:"string",contains:[n.BACKSLASH_ESCAPE,c],variants:[{
begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,
end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{
begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,
end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{
begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{
begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{
begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{
begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{
begin:/<<[-~]?'?(\w+)\n(?:[^\n]*\n)*?\s*\1\b/,returnBegin:!0,contains:[{
begin:/<<[-~]?'?/},n.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,
contains:[n.BACKSLASH_ESCAPE,c]})]}]},g="[0-9](_?[0-9])*",d={className:"number",
relevance:0,variants:[{
begin:`\\b([1-9](_?[0-9])*|0)(\\.(${g}))?([eE][+-]?(${g})|r)?i?\\b`},{
begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"
},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{
begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{
begin:"\\b0(_?[0-7])+r?i?\\b"}]},l={className:"params",begin:"\\(",end:"\\)",
endsParent:!0,keywords:i},o=[t,{className:"class",beginKeywords:"class module",
end:"$|;",illegal:/=/,contains:[n.inherit(n.TITLE_MODE,{
begin:"[A-Za-z_]\\w*(::\\w+)*(\\?|!)?"}),{begin:"<\\s*",contains:[{
begin:"("+n.IDENT_RE+"::)?"+n.IDENT_RE,relevance:0}]}].concat(b)},{
className:"function",begin:e(/def\s*/,(_=a+"\\s*(\\(|;|$)",e("(?=",_,")"))),
relevance:0,keywords:"def",end:"$|;",contains:[n.inherit(n.TITLE_MODE,{begin:a
}),l].concat(b)},{begin:n.IDENT_RE+"::"},{className:"symbol",
begin:n.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",
begin:":(?!\\s)",contains:[t,{begin:a}],relevance:0},d,{className:"variable",
begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{
className:"params",begin:/\|/,end:/\|/,relevance:0,keywords:i},{
begin:"("+n.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{
className:"regexp",contains:[n.BACKSLASH_ESCAPE,c],illegal:/\n/,variants:[{
begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",
end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]
}].concat(r,b),relevance:0}].concat(r,b);var _;c.contains=o,l.contains=o
;const E=[{begin:/^\s*=>/,starts:{end:"$",contains:o}},{className:"meta",
begin:"^([>?]>|[\\w#]+\\(\\w+\\):\\d+:\\d+>|(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>)(?=[ ])",
starts:{end:"$",contains:o}}];return b.unshift(r),{name:"Ruby",
aliases:["rb","gemspec","podspec","thor","irb"],keywords:i,illegal:/\/\*/,
contains:[n.SHEBANG({binary:"ruby"})].concat(E).concat(b).concat(o)}}})());
hljs.registerLanguage("rust",(()=>{"use strict";return e=>{
const n="([ui](8|16|32|64|128|size)|f(32|64))?",t="drop i8 i16 i32 i64 i128 isize u8 u16 u32 u64 u128 usize f32 f64 str char bool Box Option Result String Vec Copy Send Sized Sync Drop Fn FnMut FnOnce ToOwned Clone Debug PartialEq PartialOrd Eq Ord AsRef AsMut Into From Default Iterator Extend IntoIterator DoubleEndedIterator ExactSizeIterator SliceConcatExt ToString assert! assert_eq! bitflags! bytes! cfg! col! concat! concat_idents! debug_assert! debug_assert_eq! env! panic! file! format! format_args! include_bin! include_str! line! local_data_key! module_path! option_env! print! println! select! stringify! try! unimplemented! unreachable! vec! write! writeln! macro_rules! assert_ne! debug_assert_ne!"
;return{name:"Rust",aliases:["rs"],keywords:{$pattern:e.IDENT_RE+"!?",
keyword:"abstract as async await become box break const continue crate do dyn else enum extern false final fn for if impl in let loop macro match mod move mut override priv pub ref return self Self static struct super trait true try type typeof unsafe unsized use virtual where while yield",
literal:"true false Some None Ok Err",built_in:t},illegal:"</",
contains:[e.C_LINE_COMMENT_MODE,e.COMMENT("/\\*","\\*/",{contains:["self"]
}),e.inherit(e.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{
className:"string",variants:[{begin:/r(#*)"(.|\n)*?"\1(?!#)/},{
begin:/b?'\\?(x\w{2}|u\w{4}|U\w{8}|.)'/}]},{className:"symbol",
begin:/'[a-zA-Z_][a-zA-Z0-9_]*/},{className:"number",variants:[{
begin:"\\b0b([01_]+)"+n},{begin:"\\b0o([0-7_]+)"+n},{
begin:"\\b0x([A-Fa-f0-9_]+)"+n},{
begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+n}],relevance:0},{
className:"function",beginKeywords:"fn",end:"(\\(|<)",excludeEnd:!0,
contains:[e.UNDERSCORE_TITLE_MODE]},{className:"meta",begin:"#!?\\[",end:"\\]",
contains:[{className:"meta-string",begin:/"/,end:/"/}]},{className:"class",
beginKeywords:"type",end:";",contains:[e.inherit(e.UNDERSCORE_TITLE_MODE,{
endsParent:!0})],illegal:"\\S"},{className:"class",
beginKeywords:"trait enum struct union",end:/\{/,
contains:[e.inherit(e.UNDERSCORE_TITLE_MODE,{endsParent:!0})],illegal:"[\\w\\d]"
},{begin:e.IDENT_RE+"::",keywords:{built_in:t}},{begin:"->"}]}}})());
hljs.registerLanguage("scss",(()=>{"use strict"
;const e=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],t=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],i=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],r=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],o=["align-content","align-items","align-self","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","auto","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","clip-path","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-variant-ligatures","font-variation-settings","font-weight","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inherit","initial","justify-content","left","letter-spacing","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","mask","max-height","max-width","min-height","min-width","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","perspective","perspective-origin","pointer-events","position","quotes","resize","right","src","tab-size","table-layout","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-indent","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","white-space","widows","width","word-break","word-spacing","word-wrap","z-index"].reverse()
;return a=>{const n=(e=>({IMPORTANT:{className:"meta",begin:"!important"},
HEXCOLOR:{className:"number",begin:"#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})"},
ATTRIBUTE_SELECTOR_MODE:{className:"selector-attr",begin:/\[/,end:/\]/,
illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]}
}))(a),l=r,s=i,d="@[a-z-]+",c={className:"variable",
begin:"(\\$[a-zA-Z-][a-zA-Z0-9_-]*)\\b"};return{name:"SCSS",case_insensitive:!0,
illegal:"[=/|']",contains:[a.C_LINE_COMMENT_MODE,a.C_BLOCK_COMMENT_MODE,{
className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{
className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0
},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",
begin:"\\b("+e.join("|")+")\\b",relevance:0},{className:"selector-pseudo",
begin:":("+s.join("|")+")"},{className:"selector-pseudo",
begin:"::("+l.join("|")+")"},c,{begin:/\(/,end:/\)/,contains:[a.CSS_NUMBER_MODE]
},{className:"attribute",begin:"\\b("+o.join("|")+")\\b"},{
begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"
},{begin:":",end:";",
contains:[c,n.HEXCOLOR,a.CSS_NUMBER_MODE,a.QUOTE_STRING_MODE,a.APOS_STRING_MODE,n.IMPORTANT]
},{begin:"@(page|font-face)",lexemes:d,keywords:"@page @font-face"},{begin:"@",
end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,
keyword:"and or not only",attribute:t.join(" ")},contains:[{begin:d,
className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"
},c,a.QUOTE_STRING_MODE,a.APOS_STRING_MODE,n.HEXCOLOR,a.CSS_NUMBER_MODE]}]}}
})());
hljs.registerLanguage("shell",(()=>{"use strict";return s=>({
name:"Shell Session",aliases:["console"],contains:[{className:"meta",
begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#]/,starts:{end:/[^\\](?=\s*$)/,
subLanguage:"bash"}}]})})());
hljs.registerLanguage("sql",(()=>{"use strict";function e(e){
return e?"string"==typeof e?e:e.source:null}function r(...r){
return r.map((r=>e(r))).join("")}function t(...r){
return"("+r.map((r=>e(r))).join("|")+")"}return e=>{
const n=e.COMMENT("--","$"),a=["true","false","unknown"],i=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],s=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],o=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],c=s,l=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update   ","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year","add","asc","collation","desc","final","first","last","view"].filter((e=>!s.includes(e))),u={
begin:r(/\b/,t(...c),/\s*\(/),keywords:{built_in:c}};return{name:"SQL",
case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,
keyword:((e,{exceptions:r,when:t}={})=>{const n=t
;return r=r||[],e.map((e=>e.match(/\|\d+$/)||r.includes(e)?e:n(e)?e+"|0":e))
})(l,{when:e=>e.length<3}),literal:a,type:i,
built_in:["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"]
},contains:[{begin:t(...o),keywords:{$pattern:/[\w\.]+/,keyword:l.concat(o),
literal:a,type:i}},{className:"type",
begin:t("double precision","large object","with timezone","without timezone")
},u,{className:"variable",begin:/@[a-z0-9]+/},{className:"string",variants:[{
begin:/'/,end:/'/,contains:[{begin:/''/}]}]},{begin:/"/,end:/"/,contains:[{
begin:/""/}]},e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE,n,{className:"operator",
begin:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0}]}}})());
hljs.registerLanguage("swift",(()=>{"use strict";function e(e){
return e?"string"==typeof e?e:e.source:null}function n(e){return a("(?=",e,")")}
function a(...n){return n.map((n=>e(n))).join("")}function t(...n){
return"("+n.map((n=>e(n))).join("|")+")"}
const i=e=>a(/\b/,e,/\w$/.test(e)?/\b/:/\B/),s=["Protocol","Type"].map(i),u=["init","self"].map(i),c=["Any","Self"],r=["associatedtype",/as\?/,/as!/,"as","break","case","catch","class","continue","convenience","default","defer","deinit","didSet","do","dynamic","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","lazy","let","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],o=["false","nil","true"],l=["assignment","associativity","higherThan","left","lowerThan","none","right"],m=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warn_unqualified_access","#warning"],d=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],p=t(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),F=t(p,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),b=a(p,F,"*"),h=t(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),f=t(h,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),w=a(h,f,"*"),y=a(/[A-Z]/,f,"*"),g=["autoclosure",a(/convention\(/,t("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",a(/objc\(/,w,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","testable","UIApplicationMain","unknown","usableFromInline"],E=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"]
;return e=>{const p={match:/\s+/,relevance:0},h=e.COMMENT("/\\*","\\*/",{
contains:["self"]}),v=[e.C_LINE_COMMENT_MODE,h],N={className:"keyword",
begin:a(/\./,n(t(...s,...u))),end:t(...s,...u),excludeBegin:!0},A={
match:a(/\./,t(...r)),relevance:0
},C=r.filter((e=>"string"==typeof e)).concat(["_|0"]),_={variants:[{
className:"keyword",
match:t(...r.filter((e=>"string"!=typeof e)).concat(c).map(i),...u)}]},D={
$pattern:t(/\b\w+/,/#\w+/),keyword:C.concat(m),literal:o},B=[N,A,_],k=[{
match:a(/\./,t(...d)),relevance:0},{className:"built_in",
match:a(/\b/,t(...d),/(?=\()/)}],M={match:/->/,relevance:0},S=[M,{
className:"operator",relevance:0,variants:[{match:b},{match:`\\.(\\.|${F})+`}]
}],x="([0-9a-fA-F]_*)+",I={className:"number",relevance:0,variants:[{
match:"\\b(([0-9]_*)+)(\\.(([0-9]_*)+))?([eE][+-]?(([0-9]_*)+))?\\b"},{
match:`\\b0x(${x})(\\.(${x}))?([pP][+-]?(([0-9]_*)+))?\\b`},{
match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},O=(e="")=>({
className:"subst",variants:[{match:a(/\\/,e,/[0\\tnr"']/)},{
match:a(/\\/,e,/u\{[0-9a-fA-F]{1,8}\}/)}]}),T=(e="")=>({className:"subst",
match:a(/\\/,e,/[\t ]*(?:[\r\n]|\r\n)/)}),L=(e="")=>({className:"subst",
label:"interpol",begin:a(/\\/,e,/\(/),end:/\)/}),P=(e="")=>({begin:a(e,/"""/),
end:a(/"""/,e),contains:[O(e),T(e),L(e)]}),$=(e="")=>({begin:a(e,/"/),
end:a(/"/,e),contains:[O(e),L(e)]}),K={className:"string",
variants:[P(),P("#"),P("##"),P("###"),$(),$("#"),$("##"),$("###")]},j={
match:a(/`/,w,/`/)},z=[j,{className:"variable",match:/\$\d+/},{
className:"variable",match:`\\$${f}+`}],q=[{match:/(@|#)available/,
className:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:E,
contains:[...S,I,K]}]}},{className:"keyword",match:a(/@/,t(...g))},{
className:"meta",match:a(/@/,w)}],U={match:n(/\b[A-Z]/),relevance:0,contains:[{
className:"type",
match:a(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,f,"+")
},{className:"type",match:y,relevance:0},{match:/[?!]+/,relevance:0},{
match:/\.\.\./,relevance:0},{match:a(/\s+&\s+/,n(y)),relevance:0}]},Z={
begin:/</,end:/>/,keywords:D,contains:[...v,...B,...q,M,U]};U.contains.push(Z)
;const G={begin:/\(/,end:/\)/,relevance:0,keywords:D,contains:["self",{
match:a(w,/\s*:/),keywords:"_|0",relevance:0
},...v,...B,...k,...S,I,K,...z,...q,U]},H={beginKeywords:"func",contains:[{
className:"title",match:t(j.match,w,b),endsParent:!0,relevance:0},p]},R={
begin:/</,end:/>/,contains:[...v,U]},V={begin:/\(/,end:/\)/,keywords:D,
contains:[{begin:t(n(a(w,/\s*:/)),n(a(w,/\s+/,w,/\s*:/))),end:/:/,relevance:0,
contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:w}]
},...v,...B,...S,I,K,...q,U,G],endsParent:!0,illegal:/["']/},W={
className:"function",match:n(/\bfunc\b/),contains:[H,R,V,p],illegal:[/\[/,/%/]
},X={className:"function",match:/\b(subscript|init[?!]?)\s*(?=[<(])/,keywords:{
keyword:"subscript init init? init!",$pattern:/\w+[?!]?/},contains:[R,V,p],
illegal:/\[|%/},J={beginKeywords:"operator",end:e.MATCH_NOTHING_RE,contains:[{
className:"title",match:b,endsParent:!0,relevance:0}]},Q={
beginKeywords:"precedencegroup",end:e.MATCH_NOTHING_RE,contains:[{
className:"title",match:y,relevance:0},{begin:/{/,end:/}/,relevance:0,
endsParent:!0,keywords:[...l,...o],contains:[U]}]};for(const e of K.variants){
const n=e.contains.find((e=>"interpol"===e.label));n.keywords=D
;const a=[...B,...k,...S,I,K,...z];n.contains=[...a,{begin:/\(/,end:/\)/,
contains:["self",...a]}]}return{name:"Swift",keywords:D,contains:[...v,W,X,{
className:"class",beginKeywords:"struct protocol class extension enum",
end:"\\{",excludeEnd:!0,keywords:D,contains:[e.inherit(e.TITLE_MODE,{
begin:/[A-Za-z$_][\u00C0-\u02B80-9A-Za-z$_]*/}),...B]},J,Q,{
beginKeywords:"import",end:/$/,contains:[...v],relevance:0
},...B,...k,...S,I,K,...z,...q,U,G]}}})());
hljs.registerLanguage("typescript",(()=>{"use strict"
;const e="[A-Za-z$_][0-9A-Za-z$_]*",n=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],a=["true","false","null","undefined","NaN","Infinity"],s=[].concat(["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],["arguments","this","super","console","window","document","localStorage","module","global"],["Intl","DataView","Number","Math","Date","String","RegExp","Object","Function","Boolean","Error","Symbol","Set","Map","WeakSet","WeakMap","Proxy","Reflect","JSON","Promise","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Float32Array","Array","Uint8Array","Uint8ClampedArray","ArrayBuffer"],["EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"])
;function t(e){return r("(?=",e,")")}function r(...e){return e.map((e=>{
return(n=e)?"string"==typeof n?n:n.source:null;var n})).join("")}return i=>{
const c={$pattern:e,
keyword:n.concat(["type","namespace","typedef","interface","public","private","protected","implements","declare","abstract","readonly"]),
literal:a,
built_in:s.concat(["any","void","number","boolean","string","object","never","enum"])
},o={className:"meta",begin:"@[A-Za-z$_][0-9A-Za-z$_]*"},l=(e,n,a)=>{
const s=e.contains.findIndex((e=>e.label===n))
;if(-1===s)throw Error("can not find mode to replace");e.contains.splice(s,1,a)
},b=(i=>{const c=e,o={begin:/<[A-Za-z0-9\\._:-]+/,
end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(e,n)=>{
const a=e[0].length+e.index,s=e.input[a];"<"!==s?">"===s&&(((e,{after:n})=>{
const a="</"+e[0].slice(1);return-1!==e.input.indexOf(a,n)})(e,{after:a
})||n.ignoreMatch()):n.ignoreMatch()}},l={$pattern:e,keyword:n,literal:a,
built_in:s},b="\\.([0-9](_?[0-9])*)",d="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",g={
className:"number",variants:[{
begin:`(\\b(${d})((${b})|\\.)?|(${b}))[eE][+-]?([0-9](_?[0-9])*)\\b`},{
begin:`\\b(${d})\\b((${b})\\b|\\.)?|(${b})\\b`},{
begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{
begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{
begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{
begin:"\\b0[0-7]+n?\\b"}],relevance:0},u={className:"subst",begin:"\\$\\{",
end:"\\}",keywords:l,contains:[]},E={begin:"html`",end:"",starts:{end:"`",
returnEnd:!1,contains:[i.BACKSLASH_ESCAPE,u],subLanguage:"xml"}},m={
begin:"css`",end:"",starts:{end:"`",returnEnd:!1,
contains:[i.BACKSLASH_ESCAPE,u],subLanguage:"css"}},_={className:"string",
begin:"`",end:"`",contains:[i.BACKSLASH_ESCAPE,u]},y={className:"comment",
variants:[i.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{
className:"doctag",begin:"@[A-Za-z]+",contains:[{className:"type",begin:"\\{",
end:"\\}",relevance:0},{className:"variable",begin:c+"(?=\\s*(-)|$)",
endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]
}),i.C_BLOCK_COMMENT_MODE,i.C_LINE_COMMENT_MODE]
},p=[i.APOS_STRING_MODE,i.QUOTE_STRING_MODE,E,m,_,g,i.REGEXP_MODE]
;u.contains=p.concat({begin:/\{/,end:/\}/,keywords:l,contains:["self"].concat(p)
});const N=[].concat(y,u.contains),f=N.concat([{begin:/\(/,end:/\)/,keywords:l,
contains:["self"].concat(N)}]),A={className:"params",begin:/\(/,end:/\)/,
excludeBegin:!0,excludeEnd:!0,keywords:l,contains:f};return{name:"Javascript",
aliases:["js","jsx","mjs","cjs"],keywords:l,exports:{PARAMS_CONTAINS:f},
illegal:/#(?![$_A-z])/,contains:[i.SHEBANG({label:"shebang",binary:"node",
relevance:5}),{label:"use_strict",className:"meta",relevance:10,
begin:/^\s*['"]use (strict|asm)['"]/
},i.APOS_STRING_MODE,i.QUOTE_STRING_MODE,E,m,_,y,g,{
begin:r(/[{,\n]\s*/,t(r(/(((\/\/.*$)|(\/\*(\*[^/]|[^*])*\*\/))\s*)*/,c+"\\s*:"))),
relevance:0,contains:[{className:"attr",begin:c+t("\\s*:"),relevance:0}]},{
begin:"("+i.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",
keywords:"return throw case",contains:[y,i.REGEXP_MODE,{className:"function",
begin:"(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+i.UNDERSCORE_IDENT_RE+")\\s*=>",
returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{
begin:i.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0
},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:f}]}]
},{begin:/,/,relevance:0},{className:"",begin:/\s/,end:/\s*/,skip:!0},{
variants:[{begin:"<>",end:"</>"},{begin:o.begin,"on:begin":o.isTrulyOpeningTag,
end:o.end}],subLanguage:"xml",contains:[{begin:o.begin,end:o.end,skip:!0,
contains:["self"]}]}],relevance:0},{className:"function",
beginKeywords:"function",end:/[{;]/,excludeEnd:!0,keywords:l,
contains:["self",i.inherit(i.TITLE_MODE,{begin:c}),A],illegal:/%/},{
beginKeywords:"while if switch catch for"},{className:"function",
begin:i.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",
returnBegin:!0,contains:[A,i.inherit(i.TITLE_MODE,{begin:c})]},{variants:[{
begin:"\\."+c},{begin:"\\$"+c}],relevance:0},{className:"class",
beginKeywords:"class",end:/[{;=]/,excludeEnd:!0,illegal:/[:"[\]]/,contains:[{
beginKeywords:"extends"},i.UNDERSCORE_TITLE_MODE]},{begin:/\b(?=constructor)/,
end:/[{;]/,excludeEnd:!0,contains:[i.inherit(i.TITLE_MODE,{begin:c}),"self",A]
},{begin:"(get|set)\\s+(?="+c+"\\()",end:/\{/,keywords:"get set",
contains:[i.inherit(i.TITLE_MODE,{begin:c}),{begin:/\(\)/},A]},{begin:/\$[(.]/}]
}})(i)
;return Object.assign(b.keywords,c),b.exports.PARAMS_CONTAINS.push(o),b.contains=b.contains.concat([o,{
beginKeywords:"namespace",end:/\{/,excludeEnd:!0},{beginKeywords:"interface",
end:/\{/,excludeEnd:!0,keywords:"interface extends"
}]),l(b,"shebang",i.SHEBANG()),l(b,"use_strict",{className:"meta",relevance:10,
begin:/^\s*['"]use strict['"]/
}),b.contains.find((e=>"function"===e.className)).relevance=0,Object.assign(b,{
name:"TypeScript",aliases:["ts"]}),b}})());
hljs.registerLanguage("vbnet",(()=>{"use strict";function e(e){
return e?"string"==typeof e?e:e.source:null}function n(...n){
return n.map((n=>e(n))).join("")}function t(...n){
return"("+n.map((n=>e(n))).join("|")+")"}return e=>{
const a=/\d{1,2}\/\d{1,2}\/\d{4}/,i=/\d{4}-\d{1,2}-\d{1,2}/,s=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,r=/\d{1,2}(:\d{1,2}){1,2}/,o={
className:"literal",variants:[{begin:n(/# */,t(i,a),/ *#/)},{
begin:n(/# */,r,/ *#/)},{begin:n(/# */,s,/ *#/)},{
begin:n(/# */,t(i,a),/ +/,t(s,r),/ *#/)}]},l=e.COMMENT(/'''/,/$/,{contains:[{
className:"doctag",begin:/<\/?/,end:/>/}]}),c=e.COMMENT(null,/$/,{variants:[{
begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",
aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{
keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",
built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",
type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",
literal:"true false nothing"},
illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[{
className:"string",begin:/"(""|[^/n])"C\b/},{className:"string",begin:/"/,
end:/"/,illegal:/\n/,contains:[{begin:/""/}]},o,{className:"number",relevance:0,
variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/
},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{
begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},{
className:"label",begin:/^\w+:/},l,c,{className:"meta",
begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,
end:/$/,keywords:{
"meta-keyword":"const disable else elseif enable end externalsource if region then"
},contains:[c]}]}}})());
hljs.registerLanguage("yaml",(()=>{"use strict";return e=>{
var n="true false yes no null",a="[\\w#;/?:@&=+$,.~*'()[\\]]+",s={
className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/
},{begin:/\S+/}],contains:[e.BACKSLASH_ESCAPE,{className:"template-variable",
variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]}]},i=e.inherit(s,{
variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),l={
end:",",endsWithParent:!0,excludeEnd:!0,keywords:n,relevance:0},t={begin:/\{/,
end:/\}/,contains:[l],illegal:"\\n",relevance:0},g={begin:"\\[",end:"\\]",
contains:[l],illegal:"\\n",relevance:0},b=[{className:"attr",variants:[{
begin:"\\w[\\w :\\/.-]*:(?=[ \t]|$)"},{begin:'"\\w[\\w :\\/.-]*":(?=[ \t]|$)'},{
begin:"'\\w[\\w :\\/.-]*':(?=[ \t]|$)"}]},{className:"meta",begin:"^---\\s*$",
relevance:10},{className:"string",
begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{
begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,
relevance:0},{className:"type",begin:"!\\w+!"+a},{className:"type",
begin:"!<"+a+">"},{className:"type",begin:"!"+a},{className:"type",begin:"!!"+a
},{className:"meta",begin:"&"+e.UNDERSCORE_IDENT_RE+"$"},{className:"meta",
begin:"\\*"+e.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",
relevance:0},e.HASH_COMMENT_MODE,{beginKeywords:n,keywords:{literal:n}},{
className:"number",
begin:"\\b[0-9]{4}(-[0-9][0-9]){0,2}([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?(\\.[0-9]*)?([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?\\b"
},{className:"number",begin:e.C_NUMBER_RE+"\\b",relevance:0},t,g,s],r=[...b]
;return r.pop(),r.push(i),l.contains=r,{name:"YAML",case_insensitive:!0,
aliases:["yml","YAML"],contains:b}}})());]]></content>
  </entry>
</search>
