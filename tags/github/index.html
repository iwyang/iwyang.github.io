<!doctype html><html lang=zh-CN dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="åšè§‚è€Œçº¦å–ï¼Œåšç§¯è€Œè–„å‘"><title>Github</title><link rel=canonical href=https://bore.vip/tags/github/><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap"><link rel=stylesheet href=/scss/style.min.e0ca62bfdf40e4f4a995690d2a23469b3b89812fad1113b54d41fbfbd567c077.css><meta property='og:title' content="Github"><meta property='og:description' content="åšè§‚è€Œçº¦å–ï¼Œåšç§¯è€Œè–„å‘"><meta property='og:url' content='https://bore.vip/tags/github/'><meta property='og:site_name' content="Bore's Notes"><meta property='og:type' content='website'><meta property='og:updated_time' content=' 2026-02-21T11:56:46+08:00 '><meta name=twitter:title content="Github"><meta name=twitter:description content="åšè§‚è€Œçº¦å–ï¼Œåšç§¯è€Œè–„å‘"><link rel=alternate type=application/rss+xml href=https://bore.vip/tags/github/index.xml><link rel="shortcut icon" href=/img/avatar.png><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap" rel=stylesheet></head><body><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar.png width=170 height=170 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸ¥</span></figure><div class=site-meta><h1 class=site-name><a href=/>Bore's Notes</a></h1><h2 class=site-description>åšè§‚è€Œçº¦å–ï¼Œåšç§¯è€Œè–„å‘</h2></div></header><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>ä¸»é¡µ</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>å…³äº</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>å½’æ¡£</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>æœç´¢</span></a></li><li><a href=/link/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>é“¾æ¥</span></a></li><li><a href=/shuoshuo/><svg class="icon icon-tabler icon-tabler-message-circle" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 20l1.3-3.9A9 8 0 117.7 19L3 20"/><line x1="12" y1="12" x2="12" y2="12.01"/><line x1="8" y1="12" x2="8" y2="12.01"/><line x1="16" y1="12" x2="16" y2="12.01"/></svg>
<span>è¯´è¯´</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span></li></ol></li></ol></aside><main class="main full-width"><main class="main list-container"><style>.shuoshuo-tags-nav{display:flex;flex-wrap:wrap;gap:12px;margin-top:10px;margin-bottom:30px}.shuoshuo-tags-nav a{display:inline-flex;align-items:center;padding:6px 16px;border-radius:20px;background:var(--card-background);color:var(--card-text-color-secondary);font-size:14px;text-decoration:none;transition:all .3s ease;box-shadow:0 2px 4px rgba(0,0,0,4%);border:1px solid transparent}.shuoshuo-tags-nav a:hover{color:#1e90ff;border-color:#1e90ff}.shuoshuo-tags-nav a.active{background:#1e90ff;color:#fff!important;border-color:#1e90ff;box-shadow:0 4px 8px rgba(30,144,255,.3)}.shuoshuo-tags-nav a .tag-count{margin-left:4px;font-size:12px;opacity:.9}.meta-wrapper{display:flex!important;align-items:center!important;flex-wrap:wrap!important;line-height:1!important;gap:20px!important}.meta-item,.shuoshuo-edit-link a,.shuoshuo-time,.shuoshuo-updated-time{display:flex!important;align-items:center!important;gap:8px!important;font-size:14px!important;line-height:1!important;text-decoration:none;margin:0!important;padding:0!important;border:0!important;background:0 0!important;color:var(--card-text-color-secondary)!important;opacity:1!important;-webkit-tap-highlight-color:transparent!important;outline:none!important}.shuoshuo-meta svg,.shuoshuo-edit-link svg,.shuoshuo-time svg,.shuoshuo-updated-time svg{width:14px!important;height:14px!important;min-width:14px!important;display:block!important;margin:0!important;padding:0!important;position:static!important;transform:none!important;opacity:1!important;color:inherit!important}.meta-item span,.meta-item time,.shuoshuo-updated-time span,.shuoshuo-edit-link span{display:block!important;margin:0!important;padding:0!important;line-height:1!important;font-size:14px!important;font-family:inherit;font-weight:400!important;color:inherit!important}.shuoshuo-edit-link a,.shuoshuo-edit-link .git-hash-text{color:#1e90ff!important;transition:opacity .3s ease}.shuoshuo-edit-link .separator{color:#1e90ff!important;opacity:1!important}.shuoshuo-edit-link a:hover{opacity:.7!important;text-decoration:underline}.shuoshuo-tag{transition:color .3s ease,opacity .3s ease}.shuoshuo-tag:hover{color:#1e90ff!important;opacity:.8!important}</style><div class=shuoshuo-tags-nav><a href=/shuoshuo/>ğŸ·ï¸ å…¨éƒ¨
</a><a href=/tags/%E6%97%A5%E5%B8%B8/>#æ—¥å¸¸ <span class=tag-count>11</span>
</a><a href=/tags/%E6%8A%98%E8%85%BE/>#æŠ˜è…¾ <span class=tag-count>5</span>
</a><a href=/tags/%E8%BF%BD%E7%95%AA/>#è¿½ç•ª <span class=tag-count>4</span></a></div><div class=shuoshuo-list id=masonry-container style="opacity:0;transition:opacity .4s ease"><div class=waterfall-column id=waterfall-left><article class=shuoshuo-card><div class=shuoshuo-header><div class="shuoshuo-meta meta-wrapper"><time class="shuoshuo-time meta-item" datetime=2023-07-13T18:02:15Z><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
<span>2023-07-13</span>
</time><span class="shuoshuo-updated-time meta-item" datetime=2026-02-13T19:09:47+08:00><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4A2 2 0 002 6v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121.0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
<span>2026-02-13</span></span></div></div><div class="shuoshuo-content style-cs-content article-post"><h2 id=è‡ªåŠ¨åŒæ­¥forkç°åœ¨ç”¨çš„>è‡ªåŠ¨åŒæ­¥Forkï¼ˆç°åœ¨ç”¨çš„ï¼‰</h2><p><strong>å‚è€ƒchatgpt</strong>:</p><p>åœ¨ä½ çš„ fork ä»“åº“ä¸­æ–°å»ºï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=l>.github/workflows/sync.yml</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>å†…å®¹å¦‚ä¸‹ï¼ˆå¯ç›´æ¥å¤åˆ¶ï¼‰ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Sync Upstream</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>schedule</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>cron</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;0 0 * * *&#39;</span><span class=w>   </span><span class=c># æ¯å¤©è‡ªåŠ¨åŒæ­¥ä¸€æ¬¡</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>workflow_dispatch</span><span class=p>:</span><span class=w>       </span><span class=c># æ‰‹åŠ¨è§¦å‘æŒ‰é’®  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>watch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>types</span><span class=p>:</span><span class=w> </span><span class=l>started</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>sync</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Checkout</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>fetch-depth</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Add upstream</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          git remote add upstream https://github.com/ä¸Šæ¸¸ç”¨æˆ·å/ä¸Šæ¸¸ä»“åº“.git
</span></span></span><span class=line><span class=cl><span class=sd>          git fetch upstream</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Configure Git</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          git config user.name &#34;github-actions[bot]&#34;
</span></span></span><span class=line><span class=cl><span class=sd>          git config user.email &#34;github-actions[bot]@users.noreply.github.com&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Merge upstream</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          git merge upstream/main --allow-unrelated-histories || true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Push</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          git push origin main</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>ä½ éœ€è¦ä¿®æ”¹ä¸¤å¤„:</p><p>1.æŠŠï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>https://github.com/ä¸Šæ¸¸ç”¨æˆ·å/ä¸Šæ¸¸ä»“åº“.git
</span></span></code></pre></td></tr></table></div></div><p>æ›¿æ¢æˆä½ è¦åŒæ­¥çš„ä¸Šæ¸¸ä»“åº“åœ°å€ã€‚</p><p>2.å¦‚æœä¸Šæ¸¸ä¸»åˆ†æ”¯ä¸æ˜¯ <code>main</code>ï¼ˆä¾‹å¦‚æ˜¯ <code>master</code>ï¼‰ï¼Œä½ è¦æ”¹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>upstream/main
</span></span></code></pre></td></tr></table></div></div><p>ä¸ºï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>upstream/master
</span></span></code></pre></td></tr></table></div></div><p>æœ€ç»ˆä¸ºï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Sync Upstream</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>schedule</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>cron</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;0 0 * * *&#39;</span><span class=w>   </span><span class=c># æ¯å¤©è‡ªåŠ¨åŒæ­¥ä¸€æ¬¡</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>workflow_dispatch</span><span class=p>:</span><span class=w>       </span><span class=c># æ‰‹åŠ¨è§¦å‘æŒ‰é’®  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>watch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>types</span><span class=p>:</span><span class=w> </span><span class=l>started</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>sync</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Checkout</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>fetch-depth</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Add upstream</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          git remote add upstream https://github.com/ä¸Šæ¸¸ç”¨æˆ·å/ä¸Šæ¸¸ä»“åº“.git
</span></span></span><span class=line><span class=cl><span class=sd>          git fetch upstream</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Configure Git</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          git config user.name &#34;github-actions[bot]&#34;
</span></span></span><span class=line><span class=cl><span class=sd>          git config user.email &#34;github-actions[bot]@users.noreply.github.com&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Merge upstream</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          git merge upstream/master --allow-unrelated-histories || true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Push</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          git push origin master</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>å®Œæˆåï¼š</p><ul><li>æ¯å¤©å‡Œæ™¨è‡ªåŠ¨åŒæ­¥ä¸Šæ¸¸æ›´æ–°</li><li>ä½ ä¹Ÿå¯ä»¥åœ¨ Actions é¡µé¢æ‰‹åŠ¨ç‚¹å‡»â€œRun workflowâ€</li><li>ä¸éœ€è¦æ‰‹åŠ¨å¤„ç†å†²çªï¼ˆè„šæœ¬é‡Œ <code>|| true</code> è‡ªåŠ¨è·³è¿‡é”™è¯¯ï¼‰</li></ul><h2 id=è‡ªåŠ¨åŒæ­¥forkä»¥å‰ç”¨çš„>è‡ªåŠ¨åŒæ­¥Forkï¼ˆä»¥å‰ç”¨çš„ï¼‰</h2><p>åˆ›å»ºæ–°çš„workflowï¼Œåœ¨ä»“åº“å³ä¸Šè§’ç‚¹<code>Add file</code>ï¼Œå…ˆè¾“å…¥<code>workflows</code>æ–‡ä»¶å¤¹åï¼Œå†ç‚¹å‡»ç©ºç™½ä½ç½®ï¼Œè‡ªåŠ¨è¿›å…¥ä¸‹ä¸€ç›®å½•ï¼Œç„¶åè¾“å…¥æ–‡ä»¶å<code>sync.yml</code>ã€‚æ¥ç€</p><p>åœ¨<code>sync.yml</code>è¾“å…¥é‡Œé¢çš„å†…å®¹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Upstream Sync</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>permissions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>contents</span><span class=p>:</span><span class=w> </span><span class=l>write</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>schedule</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>cron</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;0 0 * * *&#34;</span><span class=w> </span><span class=c># every day</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>workflow_dispatch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>sync_latest_from_upstream</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Sync latest commits from upstream repo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>if</span><span class=p>:</span><span class=w> </span><span class=l>${{ github.event.repository.fork }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Step 1: run a standard checkout action</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Checkout target repo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Step 2: run the sync action</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Sync upstream changes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>sync</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>aormsby/Fork-Sync-With-Upstream-action@v3.4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>upstream_sync_repo</span><span class=p>:</span><span class=w> </span><span class=l>ChatGPTNextWeb/ChatGPT-Next-Web</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>upstream_sync_branch</span><span class=p>:</span><span class=w> </span><span class=l>main</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>target_sync_branch</span><span class=p>:</span><span class=w> </span><span class=l>main</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>target_repo_token</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITHUB_TOKEN }}</span><span class=w> </span><span class=c># automatically generated, no need to set</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># Set test_mode true to run tests instead of the true action!!</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>test_mode</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Sync check</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>if</span><span class=p>:</span><span class=w> </span><span class=l>failure()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          echo &#34;[Error] ç”±äºä¸Šæ¸¸ä»“åº“çš„ workflow æ–‡ä»¶å˜æ›´ï¼Œå¯¼è‡´ GitHub è‡ªåŠ¨æš‚åœäº†æœ¬æ¬¡è‡ªåŠ¨æ›´æ–°ï¼Œä½ éœ€è¦æ‰‹åŠ¨ Sync Fork ä¸€æ¬¡ï¼Œè¯¦ç»†æ•™ç¨‹è¯·æŸ¥çœ‹ï¼šhttps://github.com/Yidadaa/ChatGPT-Next-Web/blob/main/README_CN.md#%E6%89%93%E5%BC%80%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0&#34;
</span></span></span><span class=line><span class=cl><span class=sd>          echo &#34;[Error] Due to a change in the workflow file of the upstream repository, GitHub has automatically suspended the scheduled automatic update. You need to manually sync your fork. Please refer to the detailed tutorial for instructions: https://github.com/Yidadaa/ChatGPT-Next-Web#enable-automatic-updates&#34;
</span></span></span><span class=line><span class=cl><span class=sd>          exit 1</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=è‡ªåŠ¨åŒæ­¥forkä»¥ä»¥å‰ç”¨çš„>è‡ªåŠ¨åŒæ­¥Forkï¼ˆä»¥ä»¥å‰ç”¨çš„ï¼‰</h2><p>è™½ç„¶Githubè‡ªå¸¦ä¸€ä¸ªSync Forkçš„æŒ‰é’®ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½è‡ªå·±ç‚¹æ€»æ˜¯éº»çƒ¦çš„ï¼Œæ‰€ä»¥æœ‰äººæäº†ä¸ªGithub Actionæ¥åšè¿™ä»¶äº‹ï¼Œhttps://github.com/tgymnich/fork-sync</p><h3 id=åˆ›å»ºworkflow>åˆ›å»ºworkflow</h3><p>åˆ›å»ºæ–°çš„workflowï¼Œåœ¨ä»“åº“å³ä¸Šè§’ç‚¹<code>Add file</code>ï¼Œå…ˆè¾“å…¥<code>workflows</code>æ–‡ä»¶å¤¹åï¼Œå†ç‚¹å‡»ç©ºç™½ä½ç½®ï¼Œè‡ªåŠ¨è¿›å…¥ä¸‹ä¸€ç›®å½•ï¼Œç„¶åè¾“å…¥æ–‡ä»¶å<code>sync.yml</code>ã€‚æ¥ç€</p><p>åœ¨<code>sync.yml</code>è¾“å…¥é‡Œé¢çš„å†…å®¹ï¼š</p><p><strong>å®˜æ–¹ï¼š</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Sync Fork</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>schedule</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>cron</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;*/30 * * * *&#39;</span><span class=w> </span><span class=c># every 30 minutes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>workflow_dispatch</span><span class=p>:</span><span class=w> </span><span class=c># on button click</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>sync</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>tgymnich/fork-sync@v2.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>token</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.PERSONAL_TOKEN }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>owner</span><span class=p>:</span><span class=w> </span><span class=l>llvm</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>base</span><span class=p>:</span><span class=w> </span><span class=l>master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>head</span><span class=p>:</span><span class=w> </span><span class=l>master</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>æ³¨é‡Šï¼š</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Sync Fork</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w> </span><span class=c># push æ—¶è§¦å‘, ä¸»è¦æ˜¯ä¸ºäº†æµ‹è¯•é…ç½®æœ‰æ²¡æœ‰é—®é¢˜</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>schedule</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>cron</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;* */24 * * *&#39;</span><span class=w> </span><span class=c># æ¯å¤©ä¸€æ¬¡</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>repo-sync</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>tgymnich/fork-sync@v2.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>token</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.TOKEN }}</span><span class=w> </span><span class=c>#Github Tokenï¼Œè®°å¾—åŠ å…¥secrets</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>owner</span><span class=p>:</span><span class=w> </span><span class=l>ngosang</span><span class=w> </span><span class=c># fork çš„ä¸Šæ¸¸ä»“åº“ user</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>head</span><span class=p>:</span><span class=w> </span><span class=l>master</span><span class=w> </span><span class=c># fork çš„ä¸Šæ¸¸ä»“åº“ branch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>base</span><span class=p>:</span><span class=w> </span><span class=l>master</span><span class=w> </span><span class=c># æœ¬åœ°ä»“åº“ branch</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>æœ€ç»ˆ</strong><code>sync.yml</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Sync Fork</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>schedule</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>cron</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;* */24 * * *&#39;</span><span class=w> </span><span class=c># æ¯å¤©ä¸€æ¬¡</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>workflow_dispatch</span><span class=p>:</span><span class=w> </span><span class=c># on button click</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>sync</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>tgymnich/fork-sync@v2.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>token</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.PERSONAL_TOKEN }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>owner</span><span class=p>:</span><span class=w> </span><span class=l>mack-a</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>base</span><span class=p>:</span><span class=w> </span><span class=l>master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>head</span><span class=p>:</span><span class=w> </span><span class=l>master</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><code>* */24 * * *</code>æ”¹æˆ<code>* */48 * * *</code>æ¯ä¸¤å¤©è¿è¡Œä¸€æ¬¡</p><blockquote><p>PSï¼šChatGPTæœ‰æ—¶ç»™å‡ºçš„ç­”æ¡ˆå¯èƒ½æ˜¯é”™è¯¯çš„ï¼Œéœ€è¦éªŒè¯ï¼š<a class=link href=https://crontab.guru/ target=_blank rel=noopener>crontab guru</a></p></blockquote><h3 id=åˆ›å»ºgithubè®¿é—®token>åˆ›å»ºgithubè®¿é—®token</h3><p>å‚è€ƒï¼š<a class=link href=https://docs.github.com/zh/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens target=_blank rel=noopener>ç®¡ç†ä¸ªäººè®¿é—®ä»¤ç‰Œ</a></p><p>1.åœ¨ä»»ä½•é¡µé¢çš„å³ä¸Šè§’ï¼Œå•å‡»ä¸ªäººèµ„æ–™ç…§ç‰‡ï¼Œç„¶åå•å‡»â€œè®¾ç½®â€ã€‚</p><p>2.åœ¨å·¦ä¾§è¾¹æ ä¸­ï¼Œå•å‡»â€œ å¼€å‘äººå‘˜è®¾ç½®â€ã€‚
3.è¯·åœ¨å·¦ä¾§è¾¹æ çš„â€œ Personal access tokenâ€ä¸‹ï¼Œå•å‡»â€œç»†ç²’åº¦ä»¤ç‰Œâ€ ã€‚
4.å•å‡»â€œç”Ÿæˆæ–°ä»¤ç‰Œâ€ã€‚
5.åœ¨â€œä»¤ç‰Œåç§°â€ä¸‹ï¼Œè¾“å…¥ä»¤ç‰Œçš„åç§°ã€‚
6.åœ¨â€œè¿‡æœŸæ—¶é—´â€ä¸‹ï¼Œé€‰æ‹©ä»¤ç‰Œçš„è¿‡æœŸæ—¶é—´ï¼ˆæ°¸ä¸è¿‡æœŸï¼‰ã€‚</p><p>7.ç„¶åæƒé™è¦å¼€å¯<strong>repo</strong>å’Œ<strong>workflow</strong>çš„æƒé™</p><p><img src=/archives/12dd937c/github.png width=843 height=337 loading=lazy class=gallery-image data-flex-grow=250 data-flex-basis=600px></p><p>8.åˆ›å»ºå®Œæˆåå¤åˆ¶tokenå†…å®¹</p><h3 id=æ·»åŠ ç¯å¢ƒå˜é‡secret>æ·»åŠ ç¯å¢ƒå˜é‡secret</h3><p>åœ¨<code>settings/secrets(Secrets and variables)/actions</code>é‡ŒæŠŠGithubçš„Tokenè®¾ç½®ä¸Šï¼Œæ¯”å¦‚workflowå†™çš„æ˜¯secrets.PERSONAL_TOKENï¼Œæ‰€ä»¥æ·»åŠ çš„æ—¶å€™Nameå¡«å†™PERSONAL_TOKENï¼ŒSecreté‡Œå¡«å†™ä¸Šä¸€æ­¥åˆ›å»ºTokenå†…å®¹ã€‚</p><p>å¦‚æœéƒ¨ç½²å®Œæˆä¹‹åï¼Œè¿è¡Œæ˜¾ç¤ºé”™è¯¯æ˜¯ï¼š</p><blockquote><p>repo-sync
Failed to create or merge pull request: HttpError: Validation Failed: {â€œresourceâ€:â€PullRequestâ€,â€codeâ€:â€customâ€,â€messageâ€:â€No commits between knight000:master and ngosang:masterâ€}</p></blockquote><p>å°±è¯æ˜åˆæ­¥æˆåŠŸäº†ï¼Œå› ä¸ºä½ éƒ¨ç½²äº†workflowæ‰€ä»¥æ¯”åŸä»“åº“æ–°ï¼Œç­‰åŸä»“åº“æ›´æ–°åç‚¹<code>Re-run jobs</code>å°±å¯ä»¥æµ‹è¯•æ˜¯å¦æ­£ç¡®éƒ¨ç½²äº†ã€‚</p><h3 id=è‡ªåŠ¨æäº¤ä¿®æ”¹åˆ°giteeæœªæµ‹è¯•>è‡ªåŠ¨æäº¤ä¿®æ”¹åˆ°Gitee(æœªæµ‹è¯•)</h3><p>ä»¥ä¸‹actionæ–‡ä»¶æ¥è‡ªhttps://juejin.cn/post/6894928345830522887</p><p>æŠŠGITEE_PRIVATE_KEYã€<a class=link href=https://gitee.com/profile/personal_access_tokens target=_blank rel=noopener>GITEE_TOKEN</a>ã€GITEE_USERéƒ½æ·»åŠ åˆ°secretsé‡Œï¼Œç„¶åGiteeå†…<a class=link href=https://gitee.com/projects/import/url target=_blank rel=noopener>ä»URLå¯¼å…¥ä»“åº“</a>ï¼Œåˆ›å»ºåŒåä»“åº“å³å¯åŒæ­¥ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># é€šè¿‡ Github actionsï¼Œ åœ¨ Github ä»“åº“çš„æ¯ä¸€æ¬¡ commit åè‡ªåŠ¨åŒæ­¥åˆ° Gitee ä¸Š</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>sync2gitee</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>repo-sync</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>dst_key</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITEE_PRIVATE_KEY }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>dst_token</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITEE_TOKEN }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>gitee_user</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITEE_USER }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>persist-credentials</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>sync github -&gt; gitee</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>Yikun/hub-mirror-action@master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>if</span><span class=p>:</span><span class=w> </span><span class=l>env.dst_key &amp;&amp; env.dst_token &amp;&amp; env.gitee_user</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># å¿…é€‰ï¼Œéœ€è¦åŒæ­¥çš„ Github ç”¨æˆ·ï¼ˆæºï¼‰</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>src</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;github/${{ github.repository_owner }}&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># å¿…é€‰ï¼Œéœ€è¦åŒæ­¥åˆ°çš„ Gitee ç”¨æˆ·ï¼ˆç›®çš„ï¼‰</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>dst</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;gitee/${{ secrets.GITEE_USER }}&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># å¿…é€‰ï¼ŒGiteeå…¬é’¥å¯¹åº”çš„ç§é’¥ï¼Œhttps://gitee.com/profile/sshkeys</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>dst_key</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITEE_PRIVATE_KEY }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># å¿…é€‰ï¼ŒGiteeå¯¹åº”çš„ç”¨äºåˆ›å»ºä»“åº“çš„tokenï¼Œhttps://gitee.com/profile/personal_access_tokens</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>dst_token</span><span class=p>:</span><span class=w>  </span><span class=l>${{ secrets.GITEE_TOKEN }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># å¦‚æœæ˜¯ç»„ç»‡ï¼ŒæŒ‡å®šç»„ç»‡å³å¯ï¼Œé»˜è®¤ä¸ºç”¨æˆ· user</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># account_type: org</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># ç›´æ¥å–å½“å‰é¡¹ç›®çš„ä»“åº“å</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>static_list</span><span class=p>:</span><span class=w> </span><span class=l>${{ github.event.repository.name }}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>å› ä¸ºæœ‰<code>if: env.dst_key && env.dst_token && env.gitee_user</code>è¿™ä¸€å¥æ‰€ä»¥ä¿¡æ¯ä¸è¶³çš„æƒ…å†µä¸‹æ˜¯ä¼šè·³è¿‡æ‰§è¡Œï¼Œæ˜¾ç¤ºæ‰§è¡ŒæˆåŠŸè€Œä¸æ˜¯æ˜¾ç¤ºé”™è¯¯ï¼Œè¯·æ³¨æ„ã€‚</p><h2 id=è‡ªåŠ¨åŒæ­¥releases>è‡ªåŠ¨åŒæ­¥Releases</h2><p>1.åˆ›å»ºæ–°çš„workflowï¼Œåœ¨ä»“åº“å³ä¸Šè§’ç‚¹<code>Add file</code>ï¼Œå…ˆè¾“å…¥<code>workflows</code>æ–‡ä»¶å¤¹åï¼Œå†ç‚¹å‡»ç©ºç™½ä½ç½®ï¼Œè‡ªåŠ¨è¿›å…¥ä¸‹ä¸€ç›®å½•ï¼Œç„¶åè¾“å…¥æ–‡ä»¶å<code>Sync Upstream Releases.yaml</code>ã€‚æ¥ç€</p><p>åœ¨<code>Sync Upstream Releases.yaml</code>è¾“å…¥é‡Œé¢çš„å†…å®¹ï¼š<strong>(æ³¨æ„ä¿®æ”¹<code>UPSTREAM_OWNER</code>å’Œ<code>UPSTREAM_REPO</code>,ä¸Šæ¸¸ä»“åº“æ‹¥æœ‰è€…å’Œä»“åº“åç§°)</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># åŒæ­¥ä¸Šæ¸¸ä»“åº“å…¨éƒ¨ releaseï¼ˆåŒ…æ‹¬æœ€æ–°ç‰ˆï¼‰</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c># è¯´æ˜ï¼š</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c># - ä¼šåˆ†é¡µè·å–ä¸Šæ¸¸ä»“åº“çš„æ‰€æœ‰ releasesï¼ˆper_page=100ï¼‰ï¼Œé€ä¸ªæ£€æŸ¥æœ¬ä»“åº“æ˜¯å¦å·²æœ‰ç›¸åŒ tagã€‚</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c># - è‹¥æœ¬ä»“åº“ä¸å­˜åœ¨è¯¥ tag çš„ releaseï¼Œåˆ™ä¼šï¼š</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c>#     1) ä¸‹è½½ä¸Šæ¸¸ release çš„æ‰€æœ‰ assetsï¼ˆæ”¾åˆ° upstream-assets/&lt;tag&gt;/ï¼‰</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c>#     2) é€šè¿‡ GitHub Releases API åœ¨å½“å‰ä»“åº“åˆ›å»ºåŒå releaseï¼ˆä¿ç•™ nameã€bodyã€draftã€prereleaseï¼‰</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c>#     3) ä¸Šä¼ å¯¹åº”çš„ assets åˆ°æ–°åˆ›å»ºçš„ release</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c># - å®šæ—¶ä¸æ‰‹åŠ¨è§¦å‘å‡æ”¯æŒã€‚è¯·ç¡®ä¿æœ¬ä»“åº“çš„ secrets.GITHUB_TOKEN æœ‰æƒé™åˆ›å»º release ä¸ä¸Šä¼ èµ„äº§ã€‚</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Sync Upstream Releases</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>workflow_dispatch</span><span class=p>:</span><span class=w> </span>{}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>schedule</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>cron</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;0 0 * * *&#34;</span><span class=w> </span><span class=c># every day</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>concurrency</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=l>sync-upstream-releases</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>cancel-in-progress</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>sync-releases</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>UPSTREAM_OWNER</span><span class=p>:</span><span class=w> </span><span class=l>Decohererk</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>UPSTREAM_REPO</span><span class=p>:</span><span class=w> </span><span class=l>DecoTV</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>PER_PAGE</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;100&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Checkout repo (needed for GitHub context)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Install dependencies</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          sudo apt-get update -y
</span></span></span><span class=line><span class=cl><span class=sd>          sudo apt-get install -y jq</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Sync all upstream releases to this repo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>GH_TOKEN</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITHUB_TOKEN }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>GITHUB_REPOSITORY</span><span class=p>:</span><span class=w> </span><span class=l>${{ github.repository }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          set -euo pipefail
</span></span></span><span class=line><span class=cl><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          UPSTREAM=&#34;${UPSTREAM_OWNER}/${UPSTREAM_REPO}&#34;
</span></span></span><span class=line><span class=cl><span class=sd>          echo &#34;Syncing releases from $UPSTREAM into ${GITHUB_REPOSITORY}&#34;
</span></span></span><span class=line><span class=cl><span class=sd>          mkdir -p upstream-assets
</span></span></span><span class=line><span class=cl><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          page=1
</span></span></span><span class=line><span class=cl><span class=sd>          while true; do
</span></span></span><span class=line><span class=cl><span class=sd>            echo &#34;Fetching releases page $page&#34;
</span></span></span><span class=line><span class=cl><span class=sd>            releases=$(curl -s -H &#34;Authorization: token $GH_TOKEN&#34; \
</span></span></span><span class=line><span class=cl><span class=sd>              &#34;https://api.github.com/repos/${UPSTREAM_OWNER}/${UPSTREAM_REPO}/releases?per_page=${PER_PAGE}&amp;page=${page}&#34;)
</span></span></span><span class=line><span class=cl><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>            # å¦‚æœæœ¬é¡µæ²¡æœ‰æ¡ç›®åˆ™ç»“æŸ
</span></span></span><span class=line><span class=cl><span class=sd>            count=$(echo &#34;$releases&#34; | jq &#39;length&#39;)
</span></span></span><span class=line><span class=cl><span class=sd>            if [ &#34;$count&#34; -eq 0 ]; then
</span></span></span><span class=line><span class=cl><span class=sd>              echo &#34;No more releases (page $page empty).&#34;
</span></span></span><span class=line><span class=cl><span class=sd>              break
</span></span></span><span class=line><span class=cl><span class=sd>            fi
</span></span></span><span class=line><span class=cl><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>            echo &#34;Processing $count releases from page $page&#34;
</span></span></span><span class=line><span class=cl><span class=sd>            echo &#34;$releases&#34; | jq -c &#39;.[]&#39; | while read -r rel; do
</span></span></span><span class=line><span class=cl><span class=sd>              tag_name=$(echo &#34;$rel&#34; | jq -r &#39;.tag_name&#39;)
</span></span></span><span class=line><span class=cl><span class=sd>              # é˜²æ­¢ç©º tag
</span></span></span><span class=line><span class=cl><span class=sd>              if [ -z &#34;$tag_name&#34; ] || [ &#34;$tag_name&#34; = &#34;null&#34; ]; then
</span></span></span><span class=line><span class=cl><span class=sd>                echo &#34;Skipping release with empty tag&#34;
</span></span></span><span class=line><span class=cl><span class=sd>                continue
</span></span></span><span class=line><span class=cl><span class=sd>              fi
</span></span></span><span class=line><span class=cl><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>              release_name=$(echo &#34;$rel&#34; | jq -r &#39;.name // &#34;&#34;&#39;)
</span></span></span><span class=line><span class=cl><span class=sd>              release_body=$(echo &#34;$rel&#34; | jq -r &#39;.body // &#34;&#34;&#39;)
</span></span></span><span class=line><span class=cl><span class=sd>              draft=$(echo &#34;$rel&#34; | jq -r &#39;.draft&#39;)
</span></span></span><span class=line><span class=cl><span class=sd>              prerelease=$(echo &#34;$rel&#34; | jq -r &#39;.prerelease&#39;)
</span></span></span><span class=line><span class=cl><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>              echo &#34;Checking tag $tag_name...&#34;
</span></span></span><span class=line><span class=cl><span class=sd>              status_code=$(curl -s -o /dev/null -w &#34;%{http_code}&#34; -H &#34;Authorization: token $GH_TOKEN&#34; \
</span></span></span><span class=line><span class=cl><span class=sd>                &#34;https://api.github.com/repos/${GITHUB_REPOSITORY}/releases/tags/${tag_name}&#34;)
</span></span></span><span class=line><span class=cl><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>              if [ &#34;$status_code&#34; -eq 200 ]; then
</span></span></span><span class=line><span class=cl><span class=sd>                echo &#34;Release with tag $tag_name already exists in ${GITHUB_REPOSITORY}, skipping.&#34;
</span></span></span><span class=line><span class=cl><span class=sd>                continue
</span></span></span><span class=line><span class=cl><span class=sd>              fi
</span></span></span><span class=line><span class=cl><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>              echo &#34;Downloading assets for $tag_name (if any)...&#34;
</span></span></span><span class=line><span class=cl><span class=sd>              safe_dir=&#34;upstream-assets/$(echo &#34;$tag_name&#34; | sed &#39;s/[^A-Za-z0-9._-]/_/g&#39;)&#34;
</span></span></span><span class=line><span class=cl><span class=sd>              mkdir -p &#34;$safe_dir&#34;
</span></span></span><span class=line><span class=cl><span class=sd>              echo &#34;$rel&#34; | jq -r &#39;.assets[]?.browser_download_url&#39; | while read -r asset_url; do
</span></span></span><span class=line><span class=cl><span class=sd>                if [ -z &#34;$asset_url&#34; ] || [ &#34;$asset_url&#34; = &#34;null&#34; ]; then
</span></span></span><span class=line><span class=cl><span class=sd>                  continue
</span></span></span><span class=line><span class=cl><span class=sd>                fi
</span></span></span><span class=line><span class=cl><span class=sd>                fname=$(basename &#34;$asset_url&#34;)
</span></span></span><span class=line><span class=cl><span class=sd>                echo &#34;  - Downloading $fname&#34;
</span></span></span><span class=line><span class=cl><span class=sd>                # ä½¿ç”¨ -L è·Ÿéšé‡å®šå‘
</span></span></span><span class=line><span class=cl><span class=sd>                curl -sL -H &#34;Authorization: token $GH_TOKEN&#34; &#34;$asset_url&#34; -o &#34;${safe_dir}/${fname}&#34;
</span></span></span><span class=line><span class=cl><span class=sd>              done
</span></span></span><span class=line><span class=cl><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>              echo &#34;Creating release $tag_name in ${GITHUB_REPOSITORY}...&#34;
</span></span></span><span class=line><span class=cl><span class=sd>              # æ„é€  payloadï¼ˆä¿ç•™ draft &amp; prereleaseï¼‰
</span></span></span><span class=line><span class=cl><span class=sd>              payload=$(jq -nc --arg tag &#34;$tag_name&#34; --arg name &#34;$release_name&#34; --arg body &#34;$release_body&#34; \
</span></span></span><span class=line><span class=cl><span class=sd>                --argjson draft &#34;$draft&#34; --argjson prerelease &#34;$prerelease&#34; \
</span></span></span><span class=line><span class=cl><span class=sd>                &#39;{ tag_name: $tag, name: $name, body: $body, draft: $draft, prerelease: $prerelease }&#39;)
</span></span></span><span class=line><span class=cl><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>              create_resp=$(curl -s -H &#34;Authorization: token $GH_TOKEN&#34; -H &#34;Accept: application/vnd.github.v3+json&#34; \
</span></span></span><span class=line><span class=cl><span class=sd>                -d &#34;$payload&#34; &#34;https://api.github.com/repos/${GITHUB_REPOSITORY}/releases&#34;)
</span></span></span><span class=line><span class=cl><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>              upload_url=$(echo &#34;$create_resp&#34; | jq -r &#39;.upload_url // empty&#39;)
</span></span></span><span class=line><span class=cl><span class=sd>              message=$(echo &#34;$create_resp&#34; | jq -r &#39;.message // empty&#39;)
</span></span></span><span class=line><span class=cl><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>              if [ -z &#34;$upload_url&#34; ]; then
</span></span></span><span class=line><span class=cl><span class=sd>                echo &#34;Failed to create release for $tag_name: $message&#34;
</span></span></span><span class=line><span class=cl><span class=sd>                # ç»§ç»­å¤„ç†ä¸‹ä¸€ä¸ª releaseï¼Œè€Œä¸æ˜¯é€€å‡ºæ•´ä¸ªæµç¨‹
</span></span></span><span class=line><span class=cl><span class=sd>                continue
</span></span></span><span class=line><span class=cl><span class=sd>              fi
</span></span></span><span class=line><span class=cl><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>              echo &#34;Upload URL obtained. Uploading assets for $tag_name...&#34;
</span></span></span><span class=line><span class=cl><span class=sd>              if compgen -G &#34;${safe_dir}/*&#34; &gt; /dev/null; then
</span></span></span><span class=line><span class=cl><span class=sd>                for f in &#34;${safe_dir}&#34;/*; do
</span></span></span><span class=line><span class=cl><span class=sd>                  [ -f &#34;$f&#34; ] || continue
</span></span></span><span class=line><span class=cl><span class=sd>                  fname=$(basename &#34;$f&#34;)
</span></span></span><span class=line><span class=cl><span class=sd>                  echo &#34;  - Uploading $fname ...&#34;
</span></span></span><span class=line><span class=cl><span class=sd>                  # upload_url åŒ…å« &#34;{?name,label}&#34;ï¼Œå»æ‰æ‹¬å·éƒ¨åˆ†å¹¶é™„åŠ  ?name=...
</span></span></span><span class=line><span class=cl><span class=sd>                  upload_endpoint=&#34;${upload_url%\{*}?name=${fname}&#34;
</span></span></span><span class=line><span class=cl><span class=sd>                  curl -s --fail -X POST -H &#34;Authorization: token $GH_TOKEN&#34; \
</span></span></span><span class=line><span class=cl><span class=sd>                    -H &#34;Content-Type: application/octet-stream&#34; --data-binary @&#34;$f&#34; &#34;$upload_endpoint&#34; \
</span></span></span><span class=line><span class=cl><span class=sd>                    || echo &#34;    Warning: failed to upload asset $fname for $tag_name&#34;
</span></span></span><span class=line><span class=cl><span class=sd>                done
</span></span></span><span class=line><span class=cl><span class=sd>              else
</span></span></span><span class=line><span class=cl><span class=sd>                echo &#34;  - No assets to upload for $tag_name.&#34;
</span></span></span><span class=line><span class=cl><span class=sd>              fi
</span></span></span><span class=line><span class=cl><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>              echo &#34;Release $tag_name created successfully (if no errors above).&#34;
</span></span></span><span class=line><span class=cl><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>            done
</span></span></span><span class=line><span class=cl><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>            page=$((page + 1))
</span></span></span><span class=line><span class=cl><span class=sd>          done
</span></span></span><span class=line><span class=cl><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          echo &#34;All pages processed.&#34;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>2.æ‰‹åŠ¨è¿è¡Œ<code>Action</code>é‡Œé¢çš„<code>Sync Upstream Releases</code></p><h2 id=æ–°å»ºä¸€ä»“åº“ä¸“é—¨å¤‡ä»½releases>æ–°å»ºä¸€ä»“åº“ä¸“é—¨å¤‡ä»½Releases</h2><p>1.æ–°å»ºä»“åº“ï¼šhttps://github.com/iwyang/backup</p><p>2.æœ¬åœ°ä»»æ„ä¸€æ–‡ä»¶å¤¹æ–°å»ºè„šæœ¬ï¼š<code>setup_backup.sh</code>ï¼ŒåŒå‡»è¿è¡Œï¼Œå®ƒä¼šå¸®ä½ è‡ªåŠ¨åˆ›å»ºWorkflow æ–‡ä»¶ï¼Œå¹¶å°†æºç ä¸Šä¼ åˆ°æŒ‡å®šä»“åº“ã€‚</p><p><strong>PSï¼šåŒå‡»ç¬¬ä¸€æ¬¡ä¼šé—ªé€€ï¼Œè¦åŒå‡»ç¬¬äºŒæ¬¡</strong>ï¼Œç¬¬ä¸€æ¬¡ä¸Šä¼ éƒ¨ç½²æˆåŠŸåï¼Œä»¥ååªç”¨åœ¨ç½‘é¡µä¿®æ”¹<code>release-sync.yml</code>ï¼Œå¢åŠ å¤‡ä»½ä»“åº“ä¿¡æ¯å³å¯ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat <span class=s>&lt;&lt; &#39;EOF&#39; &gt; setup_backup.sh
</span></span></span><span class=line><span class=cl><span class=s>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s># --- å®šä¹‰é”™è¯¯å¤„ç†å‡½æ•° ---
</span></span></span><span class=line><span class=cl><span class=s>die() {
</span></span></span><span class=line><span class=cl><span class=s>    echo &#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s>    echo &#34;âŒ é”™è¯¯: $1&#34;
</span></span></span><span class=line><span class=cl><span class=s>    echo &#34;---------------------------------------&#34;
</span></span></span><span class=line><span class=cl><span class=s>    read -p &#34;ğŸ”´ è„šæœ¬è¿è¡Œå¤±è´¥ã€‚è¯·æŒ‰å›è½¦é”®å…³é—­çª—å£...&#34;
</span></span></span><span class=line><span class=cl><span class=s>    exit 1
</span></span></span><span class=line><span class=cl><span class=s>}
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>echo &#34;ğŸš€ åˆå§‹åŒ–ç¨‹åºå¯åŠ¨...&#34;
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s># 1. æ£€æŸ¥ Git
</span></span></span><span class=line><span class=cl><span class=s>if ! git --version &gt; /dev/null 2&gt;&amp;1; then
</span></span></span><span class=line><span class=cl><span class=s>    die &#34;æœªæ£€æµ‹åˆ° Gitï¼Œè¯·å…ˆå®‰è£… Git for Windowsã€‚&#34;
</span></span></span><span class=line><span class=cl><span class=s>fi
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s># 2. è·å–ç”¨æˆ·è¾“å…¥
</span></span></span><span class=line><span class=cl><span class=s>DEFAULT_MSG=&#34;æ›´æ–°é…ç½®ï¼š$(date &#39;+%Y-%m-%d %H:%M:%S&#39;)&#34;
</span></span></span><span class=line><span class=cl><span class=s>echo &#34;---------------------------------------&#34;
</span></span></span><span class=line><span class=cl><span class=s>echo &#34;ğŸ“… å½“å‰æ—¶é—´: $(date &#39;+%Y-%m-%d %H:%M:%S&#39;)&#34;
</span></span></span><span class=line><span class=cl><span class=s>read -p &#34;è¯·è¾“å…¥æäº¤ä¿¡æ¯ (ç›´æ¥å›è½¦é»˜è®¤: $DEFAULT_MSG): &#34; USER_INPUT
</span></span></span><span class=line><span class=cl><span class=s>COMMIT_MSG=${USER_INPUT:-$DEFAULT_MSG}
</span></span></span><span class=line><span class=cl><span class=s>echo &#34;ç¡®è®¤ä¿¡æ¯: $COMMIT_MSG&#34;
</span></span></span><span class=line><span class=cl><span class=s>echo &#34;---------------------------------------&#34;
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s># 3. ç”Ÿæˆ Workflow æ–‡ä»¶
</span></span></span><span class=line><span class=cl><span class=s>echo &#34;ğŸ“‚ æ­£åœ¨ç”Ÿæˆ GitHub Actions é…ç½®æ–‡ä»¶...&#34;
</span></span></span><span class=line><span class=cl><span class=s>mkdir -p .github/workflows/
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>cat &lt;&lt; &#39;INNER_EOF</span><span class=s1>&#39; &gt; .github/workflows/release-sync.yml
</span></span></span><span class=line><span class=cl><span class=s1>name: Release Sync
</span></span></span><span class=line><span class=cl><span class=s1>permissions:
</span></span></span><span class=line><span class=cl><span class=s1>  contents: write
</span></span></span><span class=line><span class=cl><span class=s1>
</span></span></span><span class=line><span class=cl><span class=s1>on:
</span></span></span><span class=line><span class=cl><span class=s1>  # --- æ–°å¢ï¼šä»£ç æ¨é€æ—¶è‡ªåŠ¨è§¦å‘ ---
</span></span></span><span class=line><span class=cl><span class=s1>  push:
</span></span></span><span class=line><span class=cl><span class=s1>    branches: 
</span></span></span><span class=line><span class=cl><span class=s1>      - main
</span></span></span><span class=line><span class=cl><span class=s1>  # ---------------------------
</span></span></span><span class=line><span class=cl><span class=s1>  workflow_dispatch:
</span></span></span><span class=line><span class=cl><span class=s1>  schedule:
</span></span></span><span class=line><span class=cl><span class=s1>    - cron: &#39;</span><span class=m>0</span> <span class=m>3</span> * * *<span class=s1>&#39;
</span></span></span><span class=line><span class=cl><span class=s1>
</span></span></span><span class=line><span class=cl><span class=s1>jobs:
</span></span></span><span class=line><span class=cl><span class=s1>  sync-job:
</span></span></span><span class=line><span class=cl><span class=s1>    runs-on: ubuntu-latest
</span></span></span><span class=line><span class=cl><span class=s1>    strategy:
</span></span></span><span class=line><span class=cl><span class=s1>      fail-fast: false
</span></span></span><span class=line><span class=cl><span class=s1>      matrix:
</span></span></span><span class=line><span class=cl><span class=s1>        include:
</span></span></span><span class=line><span class=cl><span class=s1>          - source: &#34;2dust/v2rayN&#34;
</span></span></span><span class=line><span class=cl><span class=s1>            alias: &#34;v2rayN&#34;
</span></span></span><span class=line><span class=cl><span class=s1>          - source: &#34;2dust/v2rayNG&#34;
</span></span></span><span class=line><span class=cl><span class=s1>            alias: &#34;v2rayNG&#34;
</span></span></span><span class=line><span class=cl><span class=s1>          - source: &#34;orion-lib/OrionTV&#34;
</span></span></span><span class=line><span class=cl><span class=s1>            alias: &#34;OrionTV&#34;
</span></span></span><span class=line><span class=cl><span class=s1>          - source: &#34;MoonTechLab/Selene&#34;
</span></span></span><span class=line><span class=cl><span class=s1>            alias: &#34;Selene&#34;
</span></span></span><span class=line><span class=cl><span class=s1>          - source: &#34;zbezj/HEU_KMS_Activator&#34;
</span></span></span><span class=line><span class=cl><span class=s1>            alias: &#34;HEU_KMS&#34;
</span></span></span><span class=line><span class=cl><span class=s1>
</span></span></span><span class=line><span class=cl><span class=s1>    steps:
</span></span></span><span class=line><span class=cl><span class=s1>      - name: Checkout
</span></span></span><span class=line><span class=cl><span class=s1>        uses: actions/checkout@v4
</span></span></span><span class=line><span class=cl><span class=s1>
</span></span></span><span class=line><span class=cl><span class=s1>      - name: Sync Release
</span></span></span><span class=line><span class=cl><span class=s1>        env:
</span></span></span><span class=line><span class=cl><span class=s1>          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
</span></span></span><span class=line><span class=cl><span class=s1>          SOURCE_REPO: ${{ matrix.source }}
</span></span></span><span class=line><span class=cl><span class=s1>          ALIAS: ${{ matrix.alias }}
</span></span></span><span class=line><span class=cl><span class=s1>        run: |
</span></span></span><span class=line><span class=cl><span class=s1>          ORIGINAL_TAG=$(gh release view --repo $SOURCE_REPO --json tagName --jq .tagName)
</span></span></span><span class=line><span class=cl><span class=s1>          NEW_TAG=&#34;${ALIAS}-${ORIGINAL_TAG}&#34;
</span></span></span><span class=line><span class=cl><span class=s1>          
</span></span></span><span class=line><span class=cl><span class=s1>          echo &#34;Checking $SOURCE_REPO latest: $ORIGINAL_TAG&#34;
</span></span></span><span class=line><span class=cl><span class=s1>
</span></span></span><span class=line><span class=cl><span class=s1>          if gh release view $NEW_TAG &gt; /dev/null 2&gt;&amp;1; then
</span></span></span><span class=line><span class=cl><span class=s1>            echo &#34;Version $NEW_TAG already exists, skipping.&#34;
</span></span></span><span class=line><span class=cl><span class=s1>            exit 0
</span></span></span><span class=line><span class=cl><span class=s1>          fi
</span></span></span><span class=line><span class=cl><span class=s1>
</span></span></span><span class=line><span class=cl><span class=s1>          OLD_TAGS=$(gh release list --limit 100 --json tagName --jq &#34;.[].tagName&#34; | grep &#34;^${ALIAS}-&#34; || true)
</span></span></span><span class=line><span class=cl><span class=s1>          for tag in $OLD_TAGS; do
</span></span></span><span class=line><span class=cl><span class=s1>            echo &#34;Deleting old backup: $tag&#34;
</span></span></span><span class=line><span class=cl><span class=s1>            gh release delete $tag --yes --cleanup-tag
</span></span></span><span class=line><span class=cl><span class=s1>          done
</span></span></span><span class=line><span class=cl><span class=s1>
</span></span></span><span class=line><span class=cl><span class=s1>          mkdir -p ./temp_assets
</span></span></span><span class=line><span class=cl><span class=s1>          gh release download $ORIGINAL_TAG --repo $SOURCE_REPO --pattern &#34;*&#34; --dir ./temp_assets
</span></span></span><span class=line><span class=cl><span class=s1>
</span></span></span><span class=line><span class=cl><span class=s1>          TITLE=$(gh release view $ORIGINAL_TAG --repo $SOURCE_REPO --json name --jq .name)
</span></span></span><span class=line><span class=cl><span class=s1>          [ -z &#34;$TITLE&#34; ] &amp;&amp; TITLE=$ORIGINAL_TAG
</span></span></span><span class=line><span class=cl><span class=s1>          
</span></span></span><span class=line><span class=cl><span class=s1>          gh release create $NEW_TAG ./temp_assets/* \
</span></span></span><span class=line><span class=cl><span class=s1>            --title &#34;[$ALIAS] $TITLE&#34; \
</span></span></span><span class=line><span class=cl><span class=s1>            --notes &#34;Sync Date: $(date &#39;</span>+%Y-%m-%d %H:%M:%S<span class=err>&#39;</span><span class=o>)</span> <span class=p>|</span> Source: https://github.com/<span class=nv>$SOURCE_REPO</span><span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>          
</span></span></span><span class=line><span class=cl><span class=s2>          echo &#34;</span>Project <span class=nv>$ALIAS</span> sync complete!<span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>INNER_EOF
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2># 4. Git æäº¤ä¸æ¨é€
</span></span></span><span class=line><span class=cl><span class=s2>echo &#34;</span>ğŸ“¦ æ‰§è¡Œ Git ä»“åº“æ“ä½œ...<span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>git init &gt; /dev/null 2&gt;&amp;1
</span></span></span><span class=line><span class=cl><span class=s2>git remote remove origin &gt; /dev/null 2&gt;&amp;1
</span></span></span><span class=line><span class=cl><span class=s2>git remote add origin https://github.com/iwyang/backup || die &#34;</span>æ— æ³•æ·»åŠ è¿œç¨‹ä»“åº“<span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>git branch -M main
</span></span></span><span class=line><span class=cl><span class=s2>git add .
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>if ! git diff-index --quiet HEAD --; then
</span></span></span><span class=line><span class=cl><span class=s2>    echo &#34;</span>ğŸ“ æäº¤æ›´æ”¹: <span class=nv>$COMMIT_MSG</span><span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    git commit -m &#34;</span><span class=nv>$COMMIT_MSG</span><span class=s2>&#34; || die &#34;</span>Git æäº¤å¤±è´¥<span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>else
</span></span></span><span class=line><span class=cl><span class=s2>    echo &#34;</span>â„¹ï¸ æ–‡ä»¶æ— å˜åŒ–ï¼Œè·³è¿‡æäº¤æ­¥éª¤ã€‚<span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>fi
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>echo &#34;</span>â˜ï¸ æ­£åœ¨æ¨é€åˆ° GitHub...<span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>if git push -u origin main --force; then
</span></span></span><span class=line><span class=cl><span class=s2>    echo &#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    echo &#34;</span><span class=o>=======================================</span><span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    echo &#34;</span>âœ… æ¨é€æˆåŠŸï¼Actions å°†ç«‹å³å¼€å§‹è¿è¡Œã€‚<span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    echo &#34;</span>âœ¨ çª—å£å°†åœ¨ <span class=m>2</span> ç§’åè‡ªåŠ¨å…³é—­...<span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    echo &#34;</span><span class=o>=======================================</span><span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    sleep 2
</span></span></span><span class=line><span class=cl><span class=s2>    exit 0
</span></span></span><span class=line><span class=cl><span class=s2>else
</span></span></span><span class=line><span class=cl><span class=s2>    die &#34;</span>æ¨é€å¤±è´¥ï¼è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ– GitHub æƒé™ã€‚<span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>fi
</span></span></span><span class=line><span class=cl><span class=s2>EOF
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>chmod +x setup_backup.sh
</span></span></span><span class=line><span class=cl><span class=s2>echo &#34;</span>âœ… è„šæœ¬å·²æ›´æ–°ã€‚è¯·å†æ¬¡è¿è¡Œã€åŒå‡»è¿è¡Œ.batã€‘<span class=s2>&#34;
</span></span></span></code></pre></td></tr></table></div></div><h2 id=å‚è€ƒé“¾æ¥>å‚è€ƒé“¾æ¥</h2><ul><li><a class=link href=https://knight.abn-team.top/2023/03/29/GithunActionAutoSync2Gitee/ target=_blank rel=noopener>GithunActionAutoSync2Gitee</a></li><li><a class=link href=https://zhuanlan.zhihu.com/p/500768626 target=_blank rel=noopener>åˆ©ç”¨Github Actionsè‡ªåŠ¨åŒæ­¥Fork</a></li><li><a class=link href=https://github.com/tgymnich/fork-sync target=_blank rel=noopener>fork-sync</a></li></ul></div><div class="shuoshuo-tags meta-wrapper" style=margin-top:15px!important;margin-bottom:5px!important;gap:10px!important><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:14px;height:14px;color:var(--card-text-color-secondary)"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
<a href=/tags/github/ class="meta-item shuoshuo-tag" title="æŸ¥çœ‹æ ‡ç­¾: github"><span>#github</span></a></div><div class=shuoshuo-footer-info><div class="shuoshuo-edit-link meta-wrapper" style=gap:15px!important><a href=https://github.com/iwyang/iwyang.github.io/edit/develop/content/post/%e5%88%a9%e7%94%a8Github-Actions%e8%87%aa%e5%8a%a8%e5%90%8c%e6%ad%a5Fork/index.md target=_blank rel="noopener noreferrer" class=meta-item title="å‰å¾€ GitHub ç¼–è¾‘æ­¤é¡µ"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
<span>ç¼–è¾‘æ­¤é¡µ</span>
</a><span class=separator>|</span>
<a class="meta-item git-hash-text" href=https://github.com/iwyang/iwyang.github.io/commit/d52b079a165689f2bc59fb4a4d0cea61b8f7618f target=_blank rel="noopener noreferrer" title="Commit Hash: d52b079">#d52b079</a></div></div></article><article class=shuoshuo-card><div class=shuoshuo-header><div class="shuoshuo-meta meta-wrapper"><time class="shuoshuo-time meta-item" datetime=2021-08-18T03:56:29Z><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
<span>2021-08-18</span>
</time><span class="shuoshuo-updated-time meta-item" datetime=2026-02-20T12:17:50+08:00><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4A2 2 0 002 6v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121.0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
<span>2026-02-20</span></span></div></div><div class="shuoshuo-content style-cs-content article-post"><h2 id=è§£å†³port-443é—®é¢˜>è§£å†³port 443é—®é¢˜</h2><p>1.åˆ‡æ¢åˆ°å…¨ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git config --global http.proxy http://127.0.0.1:10808
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl>git config --global https.proxy http://127.0.0.1:10808
</span></span></code></pre></td></tr></table></div></div><p>2.å–æ¶ˆå…¨ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git config --global --unset http.proxy
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl>git config --global --unset https.proxy
</span></span></code></pre></td></tr></table></div></div><p>3.å†æ¬¡åˆ‡æ¢åˆ°å…¨ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git config --global http.proxy http://127.0.0.1:10808
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl>git config --global https.proxy http://127.0.0.1:10808
</span></span></code></pre></td></tr></table></div></div><p>è¿™æ—¶ä¼šå‡ºç° <code>port 22: Connection refused</code>é—®é¢˜ã€‚</p><p>4.æµ‹è¯•</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>git clone https://github.com/iwyang/DecoTV.git
</span></span></code></pre></td></tr></table></div></div><p><strong>ç”¨httpså…‹éš†ï¼Œä¸è¦ç”¨sshåè®®å…‹éš†ï¼Œå¦åˆ™å³ä½¿dailiäº†é€Ÿåº¦è¿˜æ˜¯å¾ˆæ…¢ã€‚</strong></p><p>ä¿®æ”¹åæäº¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>git add .
</span></span><span class=line><span class=cl>git commit -m &#34;ä½ çš„æäº¤ä¿¡æ¯&#34;
</span></span><span class=line><span class=cl>git push origin main
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>cd /root/docker/tv
</span></span><span class=line><span class=cl>docker-compose pull
</span></span><span class=line><span class=cl>docker-compose up -d
</span></span><span class=line><span class=cl>docker image prune
</span></span></code></pre></td></tr></table></div></div><h2 id=è§£å†³port-22é—®é¢˜>è§£å†³<code>port 22</code>é—®é¢˜</h2><p>1.è¿›å…¥.sshçš„ç›®å½•ï¼Œä½¿ç”¨å‘½ä»¤<code>touch config</code>åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä½ githubçš„é…ç½®ä¿¡æ¯ã€‚ï¼ˆ<code>xxxxx@xx.com</code>æ˜¯ä½ githubçš„æ³¨å†Œé‚®ç®±ï¼‰</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Host github.com  
</span></span><span class=line><span class=cl>User xxxxx@xx.com  
</span></span><span class=line><span class=cl>Hostname ssh.github.com  
</span></span><span class=line><span class=cl>PreferredAuthentications publickey  
</span></span><span class=line><span class=cl>IdentityFile ~/.ssh/id_rsa  
</span></span><span class=line><span class=cl>Port <span class=m>443</span>
</span></span></code></pre></td></tr></table></div></div><p>2.æ›´æ”¹é…ç½®æ–‡ä»¶configçš„æƒé™ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>chmod <span class=m>600</span> config
</span></span></code></pre></td></tr></table></div></div><p>3.å†å°è¯•æŸ¥çœ‹è¿æ¥çŠ¶æ€</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh git@github.com
</span></span></code></pre></td></tr></table></div></div><p><strong>Please make sure you have the correct access rights and the repository exist</strong></p><p>å¦‚æœå³ä½¿å·²ç»æ·»åŠ æœ¬åœ°å…¬é’¥åˆ°githubï¼Œè¿˜æç¤ºä»¥ä¸Šé”™è¯¯ï¼Œå¹¶ä¸”æ‰§è¡Œ<code>ssh -T git@github.com</code>æç¤º22ç«¯å£å…³é—­ï¼Œè§£å†³æ–¹æ³•è§ä¸Šã€‚</p><h2 id=è§£å†³åˆå¹¶å†²çªé—®é¢˜>è§£å†³åˆå¹¶å†²çªé—®é¢˜</h2><p>å‚è€ƒï¼š<a class=link href=https://docs.github.com/cn/enterprise-server@2.21/github/collaborating-with-pull-requests/addressing-merge-conflicts/resolving-a-merge-conflict-on-github target=_blank rel=noopener>åœ¨ GitHub ä¸Šè§£å†³åˆå¹¶å†²çª</a></p><p>1.åœ¨ä»“åº“åç§°ä¸‹ï¼Œå•å‡» <strong>æ‹‰å–è¯·æ±‚</strong>ã€‚</p><p>2.åœ¨â€œPull Requestsï¼ˆæ‹‰å–è¯·æ±‚ï¼‰â€åˆ—è¡¨ä¸­ï¼Œå•å‡»å«æœ‰æ‚¨æƒ³è¦è§£å†³çš„åˆå¹¶å†²çªçš„æ‹‰å–è¯·æ±‚ã€‚</p><p>3.åœ¨æ‹‰å–è¯·æ±‚åº•éƒ¨é™„è¿‘ï¼Œå•å‡» <strong>Resolve conflictsï¼ˆè§£å†³å†²çªï¼‰</strong>ã€‚</p><p>**æç¤ºï¼š**å¦‚æœåœç”¨ **Resolve conflictsï¼ˆè§£å†³å†²çªï¼‰**æŒ‰é’®ï¼Œåˆ™æ‹‰å–è¯·æ±‚çš„åˆå¹¶å†²çªè¿‡äºå¤æ‚è€Œæ— æ³•åœ¨ GitHub Enterprise Server ä¸Šè§£å†³ï¼Œæˆ–ç«™ç‚¹ç®¡ç†å‘˜å·²ç¦ç”¨ä»“åº“ä¹‹é—´æ‹‰å–è¯·æ±‚çš„å†²çªç¼–è¾‘å™¨ã€‚ å¿…é¡»ä½¿ç”¨å¤‡ç”¨ Git å®¢æˆ·ç«¯æˆ–åœ¨å‘½ä»¤è¡Œä¸Šä½¿ç”¨ Git è§£å†³åˆå¹¶å†²çªã€‚ æ›´å¤šä¿¡æ¯è¯·å‚é˜…â€œ<a class=link href=https://docs.github.com/cn/enterprise-server@2.21/articles/resolving-a-merge-conflict-using-the-command-line target=_blank rel=noopener>ä½¿ç”¨å‘½ä»¤è¡Œè§£å†³åˆå¹¶å†²çª</a>â€ã€‚</p><p>4.å†³å®šæ‚¨æ˜¯å¦æƒ³åªä¿æŒåˆ†æ”¯çš„æ›´æ”¹ã€åªä¿æŒå…¶ä»–åˆ†æ”¯çš„æ›´æ”¹ï¼Œè¿˜æ˜¯è¿›è¡Œå…¨æ–°çš„æ›´æ”¹ï¼ˆå¯èƒ½åŒ…å«ä¸¤ä¸ªåˆ†æ”¯çš„æ›´æ”¹ï¼‰ã€‚ åˆ é™¤å†²çªæ ‡è®° <code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code>, <code>=======</code>, <code>>>>>>>></code> å¹¶åœ¨æœ€ç»ˆåˆå¹¶ä¸­è¿›è¡Œæ‰€éœ€çš„æ›´æ”¹ï¼ˆ<strong>è®©AIå¸®ä½ è§£å†³å†²çª</strong>ï¼‰ã€‚</p><p>5.å¦‚æœæ–‡ä»¶ä¸­æœ‰å¤šä¸ªåˆå¹¶å†²çªï¼Œè¯·å‘ä¸‹æ»šåŠ¨åˆ°ä¸‹ä¸€ç»„å†²çªæ ‡è®°ï¼Œç„¶åé‡å¤æ­¥éª¤ 4 å’Œæ­¥éª¤ 5 ä»¥è§£å†³åˆå¹¶å†²çªã€‚</p><p>6.è§£å†³æ–‡ä»¶ä¸­çš„æ‰€æœ‰å†²çªåï¼ˆ<strong>è®©AIå¸®ä½ è§£å†³å†²çª</strong>ï¼‰ï¼Œå•å‡» <strong>Mark as resolvedï¼ˆæ ‡è®°ä¸ºå·²è§£å†³ï¼‰</strong>ã€‚</p><p>7.å¦‚æœæ‚¨æœ‰å¤šä¸ªå†²çªæ–‡ä»¶ï¼Œè¯·åœ¨â€œå†²çªæ–‡ä»¶â€ä¸‹çš„é¡µé¢å·¦ä¾§é€‰æ‹©æ‚¨è¦ç¼–è¾‘çš„ä¸‹ä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶é‡å¤æ­¥éª¤ 4 åˆ° 7ï¼Œç›´åˆ°æ‚¨è§£å†³æ‰€æœ‰æ‹‰å–è¯·æ±‚çš„åˆå¹¶å†²çªã€‚</p><p>8.è§£å†³æ‰€æœ‰åˆå¹¶å†²çªåï¼Œå•å‡» <strong>Commit mergeï¼ˆæäº¤åˆå¹¶ï¼‰</strong>ã€‚ è¿™ä¼šå°†æ•´ä¸ªåŸºæœ¬åˆ†æ”¯åˆå¹¶åˆ°å¤´éƒ¨åˆ†æ”¯ã€‚</p><p>9.å¦‚æœå‡ºç°æç¤ºï¼Œè¯·å®¡æŸ¥æ‚¨è¦æäº¤çš„åˆ†æ”¯ã€‚ å¦‚æœè¦æäº¤åˆ°æ­¤åˆ†æ”¯ï¼Œè¯·å•å‡» <strong>I understand, update *BRANCH*ï¼ˆæˆ‘å·²äº†è§£ï¼Œè¯·æ›´æ–° BRANCHï¼‰</strong>ã€‚</p><p>10.è¦åˆå¹¶æ‹‰å–è¯·æ±‚ï¼Œè¯·å•å‡» <strong>Merge pull requestï¼ˆåˆå¹¶æ‹‰å–è¯·æ±‚ï¼‰</strong>ã€‚ æœ‰å…³å…¶ä»–æ‹‰å–è¯·æ±‚åˆå¹¶é€‰é¡¹çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…â€œ<a class=link href=https://docs.github.com/cn/enterprise-server@2.21/articles/merging-a-pull-request target=_blank rel=noopener>åˆå¹¶æ‹‰å–è¯·æ±‚</a>â€ã€‚</p><h2 id=forkågithub-action-è‡ªåŠ¨æ‹‰å–æ›´æ–°å½“æŒ‡å®šæ–‡ä»¶å†²çªæ—¶ä¿æŒå½“å‰åˆ†æ”¯ç‰ˆæœ¬>forkåï¼ŒGitHub action è‡ªåŠ¨æ‹‰å–æ›´æ–°ï¼Œå½“æŒ‡å®šæ–‡ä»¶å†²çªæ—¶ï¼Œä¿æŒå½“å‰åˆ†æ”¯ç‰ˆæœ¬</h2><p>ä¸Šä¼  <code>Fork-sync.yml</code> ï¼Œé—® <a class=link href=https://gemini.google.com/app target=_blank rel=noopener>gemini</a>ï¼šforkåï¼ŒGitHub action è‡ªåŠ¨æ‹‰å–æ›´æ–°ï¼Œå½“æŒ‡å®šæ–‡ä»¶å†²çªæ—¶ï¼Œä¿æŒå½“å‰åˆ†æ”¯ç‰ˆæœ¬</p><p>æ—¢ç„¶ä½ å¸Œæœ›åœ¨åŒæ­¥ Fork æ—¶ï¼Œé’ˆå¯¹æŒ‡å®šæ–‡ä»¶<strong>æ°¸è¿œä¿æŒä½ è‡ªå·±çš„ç‰ˆæœ¬ï¼ˆOursï¼‰</strong>ï¼Œæˆ‘ä»¬éœ€è¦å°†ä¹‹å‰çš„â€œä»¥æ¥æºä¸ºå‡†â€é€»è¾‘åè¿‡æ¥ã€‚</p><p>ä»¥ä¸‹æ˜¯é’ˆå¯¹ <code>LunaTV-config</code> ä»“åº“å®ç°â€œ<strong>å…¨è‡ªåŠ¨åŒæ­¥ä¸”ä¿æŠ¤æœ¬åœ°é…ç½®</strong>â€çš„ä»å¤´åˆ°å°¾å®Œæ•´æ•™ç¨‹ã€‚</p><hr><h3 id=ç¬¬ä¸€é˜¶æ®µæœ¬åœ°ç¯å¢ƒå‡†å¤‡>ç¬¬ä¸€é˜¶æ®µï¼šæœ¬åœ°ç¯å¢ƒå‡†å¤‡</h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨æœ¬åœ°å’Œäº‘ç«¯å®šä¹‰ä¸€ä¸ªâ€œä¿æŒæˆ‘æ–¹ç‰ˆæœ¬â€çš„åˆå¹¶é©±åŠ¨ã€‚</p><ol><li><p><strong>å®šä¹‰â€œä¿ä½è‡ªå·±â€çš„åˆå¹¶é©±åŠ¨ï¼š</strong></p><p>æ‰“å¼€ç»ˆç«¯ï¼ˆGit Bashï¼‰ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git config --global merge.ours.driver <span class=nb>true</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p><strong>åŸç†ï¼š</strong> <code>true</code> æ˜¯ä¸€ä¸ªæ°¸è¿œè¿”å›æˆåŠŸçš„å‘½ä»¤ã€‚å½“ Git é‡åˆ°å†²çªå¹¶è°ƒç”¨è¿™ä¸ªé©±åŠ¨æ—¶ï¼Œå®ƒä¼šè®¤ä¸ºâ€œå·²ç»å¤„ç†å¥½äº†â€ï¼Œä»è€Œä¿ç•™ä½ æœ¬åœ°å½“å‰åˆ†æ”¯çš„æ–‡ä»¶å†…å®¹ã€‚</p></blockquote></li></ol><hr><h3 id=ç¬¬äºŒé˜¶æ®µåœ¨é¡¹ç›®ä¸­æŒ‡å®šä¿æŠ¤åå•>ç¬¬äºŒé˜¶æ®µï¼šåœ¨é¡¹ç›®ä¸­æŒ‡å®šä¿æŠ¤åå•</h3><p>ä½ éœ€è¦å‘Šè¯‰ Git å“ªäº›æ–‡ä»¶æ˜¯â€œç¥åœ£ä¸å¯ä¾µçŠ¯â€çš„ï¼Œå³åŒæ­¥æ—¶å¿½ç•¥ä¸Šæ¸¸çš„ä¿®æ”¹ã€‚</p><ol><li><p><strong>åˆ›å»º/ç¼–è¾‘ <code>.gitattributes</code>ï¼š</strong></p><p>åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>touch .gitattributes
</span></span></code></pre></td></tr></table></div></div></li><li><p><strong>å†™å…¥ä¿æŠ¤è§„åˆ™ï¼š</strong></p><p>ä½¿ç”¨ç¼–è¾‘å™¨æ‰“å¼€ <code>.gitattributes</code>ï¼Œè¾“å…¥ä½ æƒ³ä¿æŠ¤çš„æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># æ°¸è¿œä¿ç•™æˆ‘è‡ªå·±çš„é…ç½®æ–‡ä»¶ï¼Œä¸è¢«ä¸Šæ¸¸è¦†ç›–</span>
</span></span><span class=line><span class=cl>README.md <span class=nv>merge</span><span class=o>=</span>ours
</span></span><span class=line><span class=cl>report.md <span class=nv>merge</span><span class=o>=</span>ours
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># # å¦‚æœä½ æƒ³ä¿æŠ¤æ•´ä¸ªç›®å½•</span>
</span></span><span class=line><span class=cl><span class=c1># my_private_configs/** merge=ours</span>
</span></span></code></pre></td></tr></table></div></div></li></ol><hr><h3 id=ç¬¬ä¸‰é˜¶æ®µé…ç½®-github-action-è‡ªåŠ¨åŒ–>ç¬¬ä¸‰é˜¶æ®µï¼šé…ç½® GitHub Action è‡ªåŠ¨åŒ–</h3><p>ä¸ºäº†è®© GitHub çš„æœåŠ¡å™¨åœ¨è‡ªåŠ¨åŒæ­¥æ—¶ä¹Ÿéµå®ˆè¿™ä¸ªè§„åˆ™ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ä½ çš„ <code>Fork-sync.yml</code>ã€‚</p><ol><li>æ‰“å¼€å¹¶ç¼–è¾‘ <code>.github/workflows/Fork-sync.yml</code>ï¼Œå°†å†…å®¹æ›¿æ¢ä¸ºï¼ˆå¦‚æœæœ‰å¤šä¸ªè„šæœ¬ï¼Œæ³¨æ„è„šæœ¬æ‰§è¡Œå…ˆåé¡ºåºï¼‰ï¼š</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>name: Fork-sync
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>permissions:
</span></span><span class=line><span class=cl>  contents: write
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>on:
</span></span><span class=line><span class=cl>  schedule:
</span></span><span class=line><span class=cl>    - cron: &#34;0 19 * * *&#34;  # æ¯å¤©åŒ—äº¬æ—¶é—´å‡Œæ™¨3ç‚¹è¿è¡Œ
</span></span><span class=line><span class=cl>  workflow_dispatch:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>jobs:
</span></span><span class=line><span class=cl>  sync_latest_from_upstream:
</span></span><span class=line><span class=cl>    name: Sync and Protect Local Configs
</span></span><span class=line><span class=cl>    runs-on: ubuntu-latest
</span></span><span class=line><span class=cl>    if: ${{ github.event.repository.fork }}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    steps:
</span></span><span class=line><span class=cl>      - name: Checkout target repo
</span></span><span class=line><span class=cl>        uses: actions/checkout@v4
</span></span><span class=line><span class=cl>        with:
</span></span><span class=line><span class=cl>          fetch-depth: 0
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      - name: Configure Git &amp; Ours Driver
</span></span><span class=line><span class=cl>        run: |
</span></span><span class=line><span class=cl>          git config user.name &#34;github-actions[bot]&#34;
</span></span><span class=line><span class=cl>          git config user.email &#34;github-actions[bot]@users.noreply.github.com&#34;
</span></span><span class=line><span class=cl>          # å…³é”®ï¼šåœ¨ Action æœåŠ¡å™¨ä¸Šæ¿€æ´» ours é©±åŠ¨
</span></span><span class=line><span class=cl>          git config merge.ours.driver true
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      - name: Sync upstream changes
</span></span><span class=line><span class=cl>        run: |
</span></span><span class=line><span class=cl>          # æ·»åŠ ä¸Šæ¸¸
</span></span><span class=line><span class=cl>          git remote add upstream https://github.com/hafrey1/LunaTV-config.git
</span></span><span class=line><span class=cl>          git fetch upstream main
</span></span><span class=line><span class=cl>          
</span></span><span class=line><span class=cl>          # æ‰§è¡Œåˆå¹¶ã€‚æ­¤æ—¶ .gitattributes é‡Œæ ‡è®°ä¸º merge=ours çš„æ–‡ä»¶ä¼šæ— è§†ä¸Šæ¸¸ä¿®æ”¹
</span></span><span class=line><span class=cl>          git merge upstream/main --no-edit || (echo &#34;æ£€æµ‹åˆ°éå—ä¿æŠ¤æ–‡ä»¶çš„æ ¸å¿ƒå†²çªï¼Œéœ€æ‰‹åŠ¨å¤„ç†&#34; &amp;&amp; exit 1)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      - name: Push to origin
</span></span><span class=line><span class=cl>        run: |
</span></span><span class=line><span class=cl>          git push origin main
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      - name: Delete workflow runs
</span></span><span class=line><span class=cl>        uses: Mattraks/delete-workflow-runs@main
</span></span><span class=line><span class=cl>        with:
</span></span><span class=line><span class=cl>          retain_days: 0
</span></span><span class=line><span class=cl>          keep_minimum_runs: 5
</span></span></code></pre></td></tr></table></div></div><hr><ol start=2><li><strong>æäº¤å¹¶æ¨é€ï¼š</strong></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git add .
</span></span><span class=line><span class=cl>git commit -m <span class=s2>&#34;chore: é…ç½®åŒæ­¥æ—¶ä¿æŠ¤æœ¬åœ°ç‰¹å®šæ–‡ä»¶ä¸è¢«è¦†ç›–&#34;</span>
</span></span><span class=line><span class=cl>git push origin main
</span></span></code></pre></td></tr></table></div></div><h3 id=ç¬¬å››é˜¶æ®µéªŒè¯ç»“æœ>ç¬¬å››é˜¶æ®µï¼šéªŒè¯ç»“æœ</h3><ol><li><strong>æ‰‹åŠ¨æµ‹è¯•ï¼š</strong> åœ¨ GitHub ä»“åº“çš„ <strong>Actions</strong> é¡µé¢ï¼Œæ‰‹åŠ¨è§¦å‘ <strong>Fork-sync</strong>ã€‚</li><li><strong>æ£€æŸ¥ï¼š</strong> è§‚å¯Ÿæ—¥å¿—ä¸­çš„ <code>Sync upstream changes</code> æ­¥éª¤ã€‚<ul><li>å¦‚æœä¸Šæ¸¸ä¿®æ”¹äº†ä½  <code>.gitattributes</code> ä¸­ä¿æŠ¤çš„æ–‡ä»¶ï¼ŒAction ä¼šæ˜¾ç¤ºåˆå¹¶æˆåŠŸï¼Œä½†ä½ æ£€æŸ¥è¯¥æ–‡ä»¶ä¼šå‘ç°<strong>å†…å®¹ä¾ç„¶æ˜¯ä½ è‡ªå·±çš„</strong>ã€‚</li><li>è¿™æ ·ä½ å°±å®ç°äº†â€œæ—¢èƒ½æ‹¿åˆ°ä¸Šæ¸¸çš„æ–°åŠŸèƒ½æ›´æ–°ï¼Œåˆä¸ä¼šå¼„ä¹±è‡ªå·±çš„ç§æœ‰é…ç½®â€ã€‚</li></ul></li></ol><h3 id=æ ¸å¿ƒæ£€æŸ¥ç‚¹>æ ¸å¿ƒæ£€æŸ¥ç‚¹</h3><ul><li><strong>é©±åŠ¨åç§°ä¸€è‡´æ€§</strong>ï¼š<code>.gitattributes</code> é‡Œçš„ <code>merge=ours</code> å¿…é¡»å¯¹åº” <code>git config</code> é‡Œçš„ <code>merge.ours.driver</code>ã€‚</li><li><strong>æ–‡ä»¶è·¯å¾„</strong>ï¼šç¡®ä¿ <code>.gitattributes</code> ä¸­çš„æ–‡ä»¶è·¯å¾„ä¹¦å†™æ­£ç¡®ï¼ˆå»ºè®®ä½¿ç”¨ <code>**/æ–‡ä»¶å</code> æ¥åŒ¹é…æ‰€æœ‰å±‚çº§çš„åŒåæ–‡ä»¶ï¼‰ã€‚</li></ul><p><strong>ä½ ä¼šæŸ¥çœ‹ <code>.gitattributes</code> æ˜¯å¦ç”Ÿæ•ˆäº†å—ï¼Ÿ</strong> å¦‚æœä¸ç¡®å®šï¼Œå¯ä»¥è¿è¡Œ <code>git check-attr -a &lt;æ–‡ä»¶å></code> æ¥æ ¸å®ã€‚</p><h2 id=github-ç½‘é¡µç¼–è¾‘å™¨>GitHub ç½‘é¡µç¼–è¾‘å™¨</h2><p>1.æ‰“å¼€æ–¹å¼ï¼šä»“åº“é¡µé¢æŒ‰è‹±æ–‡å¥å·ï¼Œæˆ–è€…å°†<code>https://github.com/iwyang/iwyang.github.io</code>æ”¹æˆ<code>https://github.dev/iwyang/iwyang.github.io</code></p><p>2.æ–°å»ºä»£ç ç‰‡æ®µï¼šå·¦ä¸‹è§’é½¿è½®â€”ä»£ç ç‰‡æ®µâ€”æœç´¢å¹¶é€‰æ‹© <code>markdown.json</code></p><p>3.ç²˜è´´ä»¥ä¸‹é…ç½®ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;Hugo Front Matter&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;prefix&#34;</span><span class=p>:</span> <span class=s2>&#34;sj&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;body&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;---&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;title: \&#34;$1\&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;date: \&#34;${CURRENT_YEAR}-${CURRENT_MONTH}-${CURRENT_DATE}T${CURRENT_HOUR}:${CURRENT_MINUTE}:${CURRENT_SECOND}+08:00\&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;slug: \&#34;$2\&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;description: \&#34;$3\&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;lastmod: \&#34;${CURRENT_YEAR}-${CURRENT_MONTH}-${CURRENT_DATE}T${CURRENT_HOUR}:${CURRENT_MINUTE}:${CURRENT_SECOND}+08:00\&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;draft: false&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;toc: true&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;weight: false&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;image: \&#34;$4\&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;categories: [\&#34;$5\&#34;]&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;tags: [\&#34;$6\&#34;]&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;---&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;$0&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;ç”Ÿæˆå®Œæ•´çš„ Hugo Stack æ ‡å‡† Front Matter&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>4.<strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š<del>åœ¨æ–°æ–‡ä»¶ä¸­è¾“å…¥ <code>sj</code> ç„¶åæŒ‰ <code>Tab</code> é”®ï¼Œå®ƒä¼šè‡ªåŠ¨ç”Ÿæˆç”Ÿæˆå®Œæ•´çš„ Hugo Stack æ ‡å‡† Front Matterï¼ˆåŒ…å«æ—¶åŒºçš„æ ‡å‡†æ—¥æœŸï¼‰</del>ã€‚<del>PSï¼šè°ƒä¸å‡ºï¼Œç”¨ä¸‹é¢<strong>å¼ºåˆ¶è°ƒç”¨</strong></del></p><p>**å¼ºåˆ¶è°ƒç”¨ï¼š**å·¦ä¸‹è§’é½¿è½®â€”å‘½ä»¤é¢æ¿ï¼ˆCtrl+shirt+pï¼‰â€”æœç´¢<code>Insert Snippet</code>â€”é€‰æ‹©<code>ä»£ç ç‰‡æ®µï¼šæ’å…¥ç‰‡æ®µ</code>â€”é€‰æ‹©<code>sj</code></p><p>5.åŒæ­¥è®¾ç½®ï¼šå·¦ä¸‹è§’é½¿è½®â€”è®¾ç½®åŒæ­¥å·²æ‰“å¼€</p><h2 id=github-codespacesäº‘ç«¯-vs-code><strong>GitHub codespaces</strong>(äº‘ç«¯ VS Code)</h2><h3 id=æ–°å»ºcodespaces>æ–°å»ºcodespaces</h3><p>GitHub æä¾›å…è´¹çš„ <strong>Codespaces</strong>ï¼ˆäº‘ç«¯ VS Codeï¼‰ã€‚</p><ol><li>åœ¨ä½ çš„ GitHub ä»“åº“é¡µé¢ï¼Œç‚¹å‡»ç»¿è‰²çš„ <code>&lt;> Code</code> æŒ‰é’®ã€‚</li><li>é€‰æ‹© <strong>Codespaces</strong> æ ‡ç­¾é¡µ -> <strong>Create codespace on main</strong>ã€‚</li><li>å®ƒä¼šç›´æ¥åœ¨æµè§ˆå™¨é‡Œæ‰“å¼€ä¸€ä¸ªå®Œæ•´çš„ VS Code ç¼–è¾‘å™¨ï¼Œç»ˆç«¯ã€æ’ä»¶ä¸€åº”ä¿±å…¨ã€‚</li><li>ä½ å¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ç»ˆç«¯é‡Œæ•² <code>hugo server</code>ï¼Œå®ƒç”šè‡³ä¼šç»™ä½ ç”Ÿæˆä¸€ä¸ªé¢„è§ˆé“¾æ¥ï¼</li></ol><p><strong>æ³¨æ„ï¼šç”¨å®Œå…³é—­ç½‘é¡µå¹¶æ²¡æœ‰å…³é—­codespacesï¼Œè¦æ‰‹åŠ¨å…³é—­ï¼Œé¿å…è¿‡å¤šæ¶ˆè€—å…è´¹é¢åº¦ã€‚</strong></p><h3 id=ä¿®æ”¹codespacesä¼‘çœ æ—¶é—´>ä¿®æ”¹codespacesä¼‘çœ æ—¶é—´</h3><p>ä¸ºäº†é˜²æ­¢ä»¥åç»å¸¸å¿˜è®°å…³è€Œæµªè´¹é¢åº¦ï¼Œä½ å¯ä»¥æŠŠè¿™ä¸ªé»˜è®¤çš„ 30 åˆ†é’Ÿæ”¹æˆ <strong>5 åˆ†é’Ÿ</strong> ç”šè‡³æ›´çŸ­ã€‚</p><p>ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤åœ¨ GitHub çš„ä¸ªäººè®¾ç½®é‡Œå…¨å±€ä¿®æ”¹å®ƒï¼š</p><ol><li>ç‚¹å‡» GitHub å³ä¸Šè§’çš„å¤´åƒï¼Œé€‰æ‹© <strong>Settings</strong>ï¼ˆè®¾ç½®ï¼‰ã€‚</li><li>åœ¨å·¦ä¾§è¾¹æ æœ€åº•éƒ¨çš„ &ldquo;Code, planning, and automation&rdquo; åŒºåŸŸï¼Œç‚¹å‡» <strong>Codespaces</strong>ã€‚</li><li>æ‰¾åˆ° <strong>Default idle timeout</strong>ï¼ˆé»˜è®¤ç©ºé—²è¶…æ—¶ï¼‰é€‰é¡¹ã€‚</li><li>åœ¨è¾“å…¥æ¡†é‡Œå¡«å…¥ä½ æƒ³è¦çš„æ—¶é—´ï¼Œæ¯”å¦‚è¾“å…¥ <strong><code>5</code></strong>ï¼ˆä»£è¡¨ 5 åˆ†é’Ÿï¼‰ã€‚</li><li>ç‚¹å‡» <strong>Save</strong>ï¼ˆä¿å­˜ï¼‰ã€‚</li></ol><h3 id=å‹¾é€‰-auto-delete-codespace>å‹¾é€‰ â€œAuto-delete codespaceâ€</h3><p>ç‚¹å‡»å³è¾¹ä¸‰ä¸ªç‚¹ï¼Œé€‰æ‹©<code>manage codespaces</code>ï¼Œå†ç‚¹å‡»å³è¾¹ä¸‰ä¸ªç‚¹ï¼Œå‹¾é€‰ã€‚</p><p>å‹¾é€‰ <strong>â€œAuto-delete codespaceâ€ï¼ˆè‡ªåŠ¨åˆ é™¤ Codespaceï¼‰</strong> æ„å‘³ç€ï¼šå½“ä½ åœæ­¢ï¼ˆShutdownï¼‰ä½¿ç”¨è¿™ä¸ªäº‘ç«¯å¼€å‘ç¯å¢ƒåï¼Œå¦‚æœè¿ç»­å¾ˆé•¿ä¸€æ®µæ—¶é—´ä¸å»æ‰“å¼€å®ƒï¼ŒGitHub ä¼š<strong>è‡ªåŠ¨å¸®ä½ æŠŠè¿™ä¸ªç¯å¢ƒå½»åº•åˆ é™¤</strong>ã€‚</p><h3 id=ä¿®æ”¹-codespaces-æ—¶åŒºè‡ªåŠ¨æ‹‰å–æ›´æ–°>ä¿®æ”¹ Codespaces æ—¶åŒº&&è‡ªåŠ¨æ‹‰å–æ›´æ–°</h3><p>é¿å…åœ¨codespacesé‡Œé¢è‡ªåŠ¨æ„å»ºhugoï¼Œå‡ºç°æ—¶é—´æ˜¾ç¤ºä¸æ­£å¸¸é—®é¢˜ã€‚</p><p>æ²¡é—®é¢˜ï¼Œè¿™å°±ä¸ºä½ æä¾›æœ€ç¨³å¦¥ã€æœ€è¯¦ç»†çš„å›¾æ–‡çº§æ“ä½œæŒ‡å—ã€‚</p><p>å› ä¸º GitHub Codespaces æœ¬è´¨ä¸Šæ˜¯ä¸€å°è¿è¡Œåœ¨äº‘ç«¯çš„ Linux è™šæ‹Ÿæœºï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ä¸€ä¸ªé…ç½®æ–‡ä»¶æ¥å‘Šè¯‰è¿™å°æœºå™¨ï¼šâ€œè¯·æŠŠç³»ç»Ÿæ—¶åŒºè®¾ä¸ºåŒ—äº¬æ—¶é—´â€ã€‚</p><p>ä»¥ä¸‹æ˜¯å…·ä½“æ­¥éª¤ï¼š</p><h4 id=ç¬¬ä¸€æ­¥æ‰¾åˆ°æˆ–ç”Ÿæˆ-devcontainer-é…ç½®>ç¬¬ä¸€æ­¥ï¼šæ‰¾åˆ°æˆ–ç”Ÿæˆ <code>.devcontainer</code> é…ç½®</h4><p>æˆ‘ä»¬éœ€è¦åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª <code>.devcontainer</code> æ–‡ä»¶å¤¹ã€‚å¦‚æœä½ çš„é¡¹ç›®é‡Œå·²ç»æœ‰è¿™ä¸ªæ–‡ä»¶å¤¹å’Œé‡Œé¢çš„ <code>devcontainer.json</code> æ–‡ä»¶ï¼Œè¯·ç›´æ¥è·³åˆ°ç¬¬äºŒæ­¥ã€‚</p><p><strong>å¦‚æœæ²¡æœ‰ï¼Œè¯·è®© Codespace è‡ªåŠ¨å¸®ä½ ç”Ÿæˆï¼š</strong></p><ol><li>åœ¨ç½‘é¡µç‰ˆ Codespace ç•Œé¢ï¼ŒæŒ‰ä¸‹å¿«æ·é”® <strong><code>Ctrl + Shift + P</code></strong>ï¼ˆMac ç”¨æˆ·æŒ‰ <code>Cmd + Shift + P</code>ï¼‰ï¼Œè¿™ä¼šè°ƒå‡ºé¡¶éƒ¨çš„å‘½ä»¤é¢æ¿ã€‚</li><li>åœ¨è¾“å…¥æ¡†é‡Œæœç´¢å¹¶é€‰æ‹©ï¼š<strong><code>Codespaces: Add Dev Container Configuration Files...</code></strong> (æ·»åŠ å¼€å‘å®¹å™¨é…ç½®æ–‡ä»¶)ã€‚</li><li>è¯·é€‰æ‹©ç¬¬äºŒä¸ªï¼š<strong>&ldquo;Create a new configuration&mldr;&rdquo;</strong>ï¼ˆåˆ›å»ºä¸€ä¸ªæ–°é…ç½®ï¼‰ã€‚</li><li>æ¥ç€é€‰æ‹©ï¼š<code>Debian devcontainers</code></li><li>æ¥ç€é€‰æ‹©ï¼šç¬¬ä¸€ä¸ª <code>trixie (default)</code>å³å¯ã€‚</li><li>åœ¨å½“å‰çš„ <strong>&ldquo;Select Features&rdquo;</strong> ç•Œé¢ï¼Œä½ <strong>ä¸éœ€è¦å‹¾é€‰ä»»ä½•é¡¹ç›®</strong>ã€‚</li></ol><ul><li><p><strong>ç›´æ¥ç‚¹å‡»å³ä¸Šè§’çš„è“è‰²â€œç¡®å®šâ€æŒ‰é’®</strong>ï¼ˆæˆ–è€…ç›´æ¥æŒ‰å›è½¦é”®ï¼‰ã€‚</p></li><li><p>ç‚¹å‡»åï¼ŒVS Code ä¼šè‡ªåŠ¨åœ¨ä½ çš„é¡¹ç›®å·¦ä¾§ç”Ÿæˆä¸€ä¸ª <strong><code>.devcontainer</code></strong> æ–‡ä»¶å¤¹ã€‚</p></li><li><p>æ–‡ä»¶å¤¹é‡Œä¼šæœ‰ä¸€ä¸ª <strong><code>devcontainer.json</code></strong> æ–‡ä»¶ï¼Œå®ƒä¼šè‡ªåŠ¨æ‰“å¼€ã€‚</p></li></ul><p>æ¥ä¸‹æ¥å¦‚ä½•ä¿®æ”¹ä»£ç ï¼ˆé‡ç‚¹ï¼‰ï¼š</p><p>æ‰“å¼€é‚£ä¸ª <code>devcontainer.json</code> æ–‡ä»¶åï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„ä»£ç ã€‚è¯·æ‰¾åˆ°åˆé€‚çš„ä½ç½®æ’å…¥æ—¶åŒºé…ç½® <code>remoteEnv</code>ã€‚</p><p><strong>ä½ å¯ä»¥ç›´æ¥æŠŠæ–‡ä»¶é‡Œçš„å…¨éƒ¨å†…å®¹æ›¿æ¢æˆä¸‹é¢è¿™æ®µä»£ç ï¼š</strong></p><hr><h4 id=ç¬¬äºŒæ­¥ä¿®æ”¹-devcontainerjson-å†™å…¥æ—¶åŒº>ç¬¬äºŒæ­¥ï¼šä¿®æ”¹ <code>devcontainer.json</code> å†™å…¥æ—¶åŒº</h4><p>ç‚¹å‡»æ‰“å¼€ <code>.devcontainer/devcontainer.json</code> æ–‡ä»¶ã€‚æˆ‘ä»¬éœ€è¦åœ¨é‡Œé¢åŠ ä¸Š <code>remoteEnv</code> å‚æ•°ã€‚</p><p>å‡è®¾ä½ åˆšç”Ÿæˆçš„æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼Œè¯·åœ¨æœ€åé¢<strong>åŠ ä¸€ä¸ªè‹±æ–‡é€—å· <code>,</code></strong>ï¼Œç„¶åè¡¥ä¸Š <code>remoteEnv</code> è¿™ä¸‰è¡Œä»£ç ï¼ˆä¸¥æ ¼æ³¨æ„ JSON æ ¼å¼ï¼‰ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;Debian&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;image&#34;</span><span class=p>:</span> <span class=s2>&#34;mcr.microsoft.com/devcontainers/base:debian&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 1. è®¾ç½®ç¯å¢ƒå˜é‡ï¼šé”å®šåŒ—äº¬æ—¶é—´
</span></span></span><span class=line><span class=cl>    <span class=nt>&#34;remoteEnv&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;TZ&#34;</span><span class=p>:</span> <span class=s2>&#34;Asia/Shanghai&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 2. å®‰è£…åŠŸèƒ½ï¼šè‡ªåŠ¨å®‰è£… Git LFS (ä¿®å¤æ¨é€å¤§æ–‡ä»¶æŠ¥é”™)
</span></span></span><span class=line><span class=cl>    <span class=nt>&#34;features&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;ghcr.io/devcontainers/features/git-lfs:1&#34;</span><span class=p>:</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 3. æ ¸å¿ƒè®¾ç½®ï¼šæ¯æ¬¡æ‰“å¼€æˆ–å”¤é†’ Codespace æ—¶ï¼Œè‡ªåŠ¨æ‹‰å–æœ€æ–°ä»£ç 
</span></span></span><span class=line><span class=cl>    <span class=nt>&#34;postStartCommand&#34;</span><span class=p>:</span> <span class=s2>&#34;git pull origin develop&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p><em>âš ï¸ æ³¨æ„ï¼šå¦‚æœä½ çš„å¤§æ‹¬å·é‡ŒåŸæœ¬å°±æœ‰å…¶ä»–é…ç½®ï¼ˆæ¯”å¦‚ <code>features</code> æˆ– <code>customizations</code>ï¼‰ï¼Œè®°å¾—åœ¨ä¸Šä¸€é¡¹çš„ç»“å°¾åŠ ä¸Šè‹±æ–‡é€—å· <code>,</code>ï¼Œå¦åˆ™ JSON ä¼šæŠ¥é”™ã€‚</em></p><hr><h4 id=ç¬¬ä¸‰æ­¥é‡å»ºå®¹å™¨è®©é…ç½®ç”Ÿæ•ˆæœ€å…³é”®ä¸€æ­¥>ç¬¬ä¸‰æ­¥ï¼šé‡å»ºå®¹å™¨è®©é…ç½®ç”Ÿæ•ˆï¼ˆæœ€å…³é”®ä¸€æ­¥ï¼‰</h4><p>ä»£ç å†™å¥½äº†ï¼Œä½†äº‘ç«¯ç”µè„‘éœ€è¦â€œé‡å¯â€æ‰èƒ½è¯»å–è¿™ä¸ªæ–°é…ç½®ã€‚</p><ol><li>å†æ¬¡æŒ‰ä¸‹å¿«æ·é”® <strong><code>Ctrl + Shift + P</code></strong> (Mac ä¸º <code>Cmd + Shift + P</code>)ã€‚</li><li>åœ¨è¾“å…¥æ¡†é‡Œæœç´¢å¹¶é€‰æ‹©ï¼š<strong><code>Codespaces: Rebuild Container</code></strong> (é‡å»ºå®¹å™¨)ã€‚</li><li>æ­¤æ—¶ç½‘é¡µå³ä¸‹è§’ä¼šæç¤ºæ­£åœ¨ Rebuildï¼Œçª—å£å¯èƒ½ä¼šåˆ·æ–°ä¸€ä¸‹ã€‚<strong>åˆ«æ‹…å¿ƒï¼Œè¿™ä¸ä¼šåˆ é™¤ä½ å†™çš„æ–‡ç« æˆ–ä»£ç </strong>ï¼Œå®ƒåªæ˜¯åœ¨åå°é‡ç½®ç³»ç»Ÿç¯å¢ƒã€‚</li><li>ç­‰å¾…ä¸€ä¸¤åˆ†é’Ÿï¼Œå³ä¸‹è§’æç¤ºå‡†å¤‡å°±ç»ªå³å¯ã€‚</li></ol><p><strong>å¦‚æœæ²¡æœ‰è‡ªåŠ¨å¼¹å‡º &ldquo;Rebuild Now&rdquo; æç¤ºæ¡†ï¼Œåˆ«æ‹…å¿ƒï¼Œè¿™æ˜¯å› ä¸º VS Code æœ‰æ—¶å€™ååº”æ¯”è¾ƒæ…¢ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰‹åŠ¨æŒ‡ä»¤æ¥å¼ºåˆ¶å®ƒé‡æ–°æ„å»ºã€‚</strong></p><p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š</p><h4 id=1-ç¡®è®¤æ–‡ä»¶å·²ä¿å­˜>1. ç¡®è®¤æ–‡ä»¶å·²ä¿å­˜</h4><p>é¦–å…ˆç¡®ä¿ä½ çš„ <code>.devcontainer/devcontainer.json</code> å·²ç»ä¿å­˜ï¼ˆæ–‡ä»¶åä¸Šçš„ç™½è‰²å°åœ†ç‚¹æ¶ˆå¤±äº†ï¼Œæˆ–è€…æŒ‰ä¸‹ <code>Ctrl + S</code>ï¼‰ã€‚</p><h4 id=2-æ‰‹åŠ¨æ‰§è¡Œé‡å»ºå‘½ä»¤>2. æ‰‹åŠ¨æ‰§è¡Œé‡å»ºå‘½ä»¤</h4><ol><li>æŒ‰ä¸‹å¿«æ·é”® <strong><code>Ctrl + Shift + P</code></strong> (Mac ç”¨æˆ·æ˜¯ <code>Cmd + Shift + P</code>)ã€‚</li><li>åœ¨å¼¹å‡ºçš„è¾“å…¥æ¡†é‡Œï¼Œè¾“å…¥å•è¯ï¼š<strong><code>rebuild</code></strong>ã€‚</li><li>åœ¨æœç´¢ç»“æœä¸­ç‚¹å‡»è¿™ä¸€é¡¹ï¼š<strong><code>Codespaces: Rebuild Container</code></strong>ã€‚</li></ol><h4 id=3-ç­‰å¾…è¿‡ç¨‹å®Œæˆ>3. ç­‰å¾…è¿‡ç¨‹å®Œæˆ</h4><ul><li>ç‚¹å‡»åï¼ŒCodespace ä¼šå¼€å§‹è½¬åœˆï¼Œé¡µé¢å¯èƒ½ä¼šæç¤ºâ€œæ­£åœ¨é‡æ–°è¿æ¥â€ã€‚</li><li>è¿™ä¸ªè¿‡ç¨‹å¤§çº¦éœ€è¦ 1-2 åˆ†é’Ÿï¼Œå› ä¸ºå®ƒæ­£åœ¨æŒ‰ç…§ä½ æ–°å†™çš„â€œåŒ—äº¬æ—¶é—´â€è§„åˆ™é‡æ–°é…ç½®è¿™å°äº‘ç«¯ç”µè„‘ã€‚</li></ul><hr><h4 id=éªŒè¯æ˜¯å¦æˆåŠŸ>éªŒè¯æ˜¯å¦æˆåŠŸ</h4><p>ç­‰å®ƒé‡æ–°åŠ è½½è¿›å…¥ç•Œé¢åï¼Œç›´æ¥åœ¨æœ€ä¸‹æ–¹çš„ <strong>Terminalï¼ˆç»ˆç«¯ï¼‰</strong> é‡Œè¾“å…¥ï¼š <code>date</code> ç„¶åå›è½¦ã€‚</p><ul><li><strong>å¦‚æœæ˜¾ç¤ºï¼š</strong> <code>... CST 2026</code>ï¼ˆä¸”å°æ—¶æ•°å’Œä½ æ‰‹æœºå¯¹å¾—ä¸Šï¼‰ï¼Œè¯´æ˜<strong>å¤§åŠŸå‘Šæˆ</strong>ï¼</li><li><strong>å¦‚æœè¿˜æ˜¯æ˜¾ç¤ºï¼š</strong> <code>... UTC 2026</code>ï¼Œè¯´æ˜ä»£ç æ²¡å†™å¯¹ï¼Œè¯·æŠŠä½ çš„ <code>devcontainer.json</code> æ–‡ä»¶å†…å®¹æˆªå›¾å‘ç»™æˆ‘ï¼Œæˆ‘å¸®ä½ æ£€æŸ¥ã€‚</li></ul><hr><h4 id=ç¬¬å››æ­¥éªŒè¯æ—¶é—´å¹¶åˆ·æ–°-hugo>ç¬¬å››æ­¥ï¼šéªŒè¯æ—¶é—´å¹¶åˆ·æ–° Hugo</h4><p>é‡å»ºå®Œæˆåï¼Œæˆ‘ä»¬éœ€è¦éªŒè¯ä¸€ä¸‹å¹¶ä¸”æ›´æ–°æ–‡ç« çš„ Git è®°å½•ï¼š</p><ol><li><strong>éªŒè¯ç³»ç»Ÿæ—¶é—´ï¼š</strong> åœ¨ä¸‹æ–¹ç»ˆç«¯ (Terminal) é‡Œè¾“å…¥ <code>date</code> ç„¶åå›è½¦ã€‚å¦‚æœè¾“å‡ºçš„æ—¶é—´ç±»ä¼¼äº <code>Wed Feb 11 07:38:xx CST 2026</code>ï¼ˆæ˜¾ç¤º CST æˆ–è€…ä¸ä½ å½“å‰æ—¶é—´ä¸€è‡´ï¼‰ï¼Œå°±è¯´æ˜æ—¶åŒºä¿®æ”¹æˆåŠŸäº†ï¼</li><li><strong>æ›´æ–°ä½ çš„è¯´è¯´ï¼š</strong> å› ä¸ºä½ çš„ Hugo Stack ä¸»é¢˜æ˜¯è¯»å– <strong>Git Commit çš„æ—¶é—´</strong> ä½œä¸ºâ€œæ›´æ–°äºâ€çš„æ—¶é—´çš„ã€‚ä½ ä¹‹å‰çš„é‚£ä¸ª Commit å·²ç»æ˜¯ UTC æ—¶é—´äº†ã€‚<ul><li>ä½ åªéœ€è¦å»é‚£ç¯‡â€œç¢ç¢å¿µâ€çš„æ–‡ç« é‡Œï¼Œéšä¾¿æ•²ä¸€ä¸ªç©ºæ ¼ï¼Œç„¶åä¿å­˜ã€‚</li><li>é‡æ–°æ‰§è¡Œ <code>git add .</code> å’Œ <code>git commit -m "update time"</code>ã€‚</li><li>è¿™æ¬¡çš„æ–° Commit å°±ä¼šå¸¦ä¸Šæ­£ç¡®çš„åŒ—äº¬æ—¶é—´æˆ³äº†ã€‚</li></ul></li></ol><p><strong>ä½ çš„é¡¹ç›®ä¸­ç°åœ¨æœ‰ <code>.devcontainer</code> æ–‡ä»¶å¤¹å—ï¼Ÿå¦‚æœæ²¡æœ‰ï¼Œè¦ä¸è¦æˆ‘ä¸€æ­¥æ­¥é™ªä½ è°ƒå‡ºå‘½ä»¤é¢æ¿ç”Ÿæˆå®ƒï¼Ÿ</strong></p><h3 id=æ–°å»ºä»£ç ç‰‡æ®µ>æ–°å»ºä»£ç ç‰‡æ®µ</h3><p>1.å·¦ä¸‹è§’é½¿è½®â€”ä»£ç ç‰‡æ®µâ€”æœç´¢å¹¶é€‰æ‹© <code>markdown.json</code></p><p>2.ç²˜è´´ä»¥ä¸‹é…ç½®ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;Hugo Front Matter&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;prefix&#34;</span><span class=p>:</span> <span class=s2>&#34;sj&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;body&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;---&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;title: \&#34;$1\&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;date: \&#34;${CURRENT_YEAR}-${CURRENT_MONTH}-${CURRENT_DATE}T${CURRENT_HOUR}:${CURRENT_MINUTE}:${CURRENT_SECOND}+08:00\&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;slug: \&#34;$2\&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;description: \&#34;$3\&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;lastmod: \&#34;${CURRENT_YEAR}-${CURRENT_MONTH}-${CURRENT_DATE}T${CURRENT_HOUR}:${CURRENT_MINUTE}:${CURRENT_SECOND}+08:00\&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;draft: false&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;toc: true&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;weight: false&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;image: \&#34;$4\&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;categories: [\&#34;$5\&#34;]&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;tags: [\&#34;$6\&#34;]&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;---&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;$0&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;ç”Ÿæˆå®Œæ•´çš„ Hugo Stack æ ‡å‡† Front Matter&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>3.<strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š<del>åœ¨æ–°æ–‡ä»¶ä¸­è¾“å…¥ <code>sj</code> ç„¶åæŒ‰ <code>Tab</code> é”®ï¼Œå®ƒä¼šè‡ªåŠ¨ç”Ÿæˆç”Ÿæˆå®Œæ•´çš„ Hugo Stack æ ‡å‡† Front Matterï¼ˆåŒ…å«æ—¶åŒºçš„æ ‡å‡†æ—¥æœŸï¼‰</del>ã€‚<del>PSï¼šè°ƒä¸å‡ºï¼Œç”¨ä¸‹é¢<strong>å¼ºåˆ¶è°ƒç”¨</strong></del></p><p>**å¼ºåˆ¶è°ƒç”¨ï¼š**å·¦ä¸‹è§’é½¿è½®â€”å‘½ä»¤é¢æ¿ï¼ˆCtrl+shirt+pï¼‰â€”æœç´¢<code>Insert Snippet</code>â€”é€‰æ‹©<code>ä»£ç ç‰‡æ®µï¼šæ’å…¥ç‰‡æ®µ</code>â€”é€‰æ‹©<code>sj</code></p><p>4.åŒæ­¥è®¾ç½®ï¼šå·¦ä¸‹è§’é½¿è½®â€”è®¾ç½®åŒæ­¥å·²æ‰“å¼€</p><h2 id=forkågithub-action-è‡ªåŠ¨æ‹‰å–æ›´æ–°å½“æŒ‡å®šæ–‡ä»¶å†²çªæ—¶ä½¿ç”¨æ¥æºåˆ†æ”¯ç‰ˆæœ¬>forkåï¼ŒGitHub action è‡ªåŠ¨æ‹‰å–æ›´æ–°ï¼Œå½“æŒ‡å®šæ–‡ä»¶å†²çªæ—¶ï¼Œä½¿ç”¨æ¥æºåˆ†æ”¯ç‰ˆæœ¬</h2><p>æ—¢ç„¶ä½ å¸Œæœ›åœ¨ GitHub Action è‡ªåŠ¨åŒæ­¥ Fork æ—¶ï¼Œé‡åˆ°å†²çªç›´æ¥**ä½¿ç”¨æ¥æºåˆ†æ”¯ï¼ˆä¸Šæ¸¸/å¯¹æ–¹ï¼‰**çš„ç‰ˆæœ¬ï¼Œæˆ‘ä»¬éœ€è¦é…ç½® <code>theirs</code> ç­–ç•¥ã€‚è¿™é€šå¸¸ç”¨äºä½ å¸Œæœ›æŸäº›æ–‡ä»¶ï¼ˆå¦‚ <code>nodes</code> æˆ– <code>configs</code>ï¼‰å§‹ç»ˆç´§è·Ÿä¸Šæ¸¸æ›´æ–°ï¼Œè€Œä¸ä¿ç•™ä½ æœ¬åœ°çš„ä¿®æ”¹ã€‚</p><p>ä»¥ä¸‹æ˜¯é’ˆå¯¹ <code>LunaTV-config</code> ä»“åº“å®ç°â€œ<strong>å…¨è‡ªåŠ¨åŒæ­¥ä¸”å†²çªæ—¶ä»¥æ¥æºä¸ºå‡†</strong>â€çš„ä»å¤´åˆ°å°¾å®Œæ•´æŒ‡å—ã€‚</p><hr><h3 id=ç¬¬ä¸€é˜¶æ®µæœ¬åœ°ç¯å¢ƒé…ç½®>ç¬¬ä¸€é˜¶æ®µï¼šæœ¬åœ°ç¯å¢ƒé…ç½®</h3><p>ç”±äº Git é»˜è®¤æ²¡æœ‰å†…ç½®åä¸º <code>theirs</code> çš„è‡ªåŠ¨åˆå¹¶é©±åŠ¨ï¼Œæˆ‘ä»¬å¿…é¡»æ‰‹åŠ¨å®šä¹‰ä¸€ä¸ªã€‚</p><ol><li><p><strong>å®šä¹‰â€œä»¥æ¥æºä¸ºå‡†â€çš„åˆå¹¶é©±åŠ¨ï¼š</strong></p><p>æ‰“å¼€ç»ˆç«¯ï¼ˆGit Bashï¼‰ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git config --global merge.keep_theirs.driver <span class=s2>&#34;cat %B &gt; %A&#34;</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p><strong>åŸç†ï¼š</strong> <code>%B</code> ä»£è¡¨æ¥æºï¼ˆä¸Šæ¸¸ï¼‰æ–‡ä»¶ï¼Œ<code>%A</code> ä»£è¡¨æœ¬åœ°æ–‡ä»¶ã€‚è¯¥å‘½ä»¤ä¼šå°†ä¸Šæ¸¸å†…å®¹ç›´æ¥è¦†ç›–åˆ°æœ¬åœ°ã€‚</p></blockquote></li></ol><hr><h3 id=ç¬¬äºŒé˜¶æ®µåœ¨é¡¹ç›®ä¸­æŒ‡å®šè‡ªåŠ¨è¦†ç›–åå•>ç¬¬äºŒé˜¶æ®µï¼šåœ¨é¡¹ç›®ä¸­æŒ‡å®šè‡ªåŠ¨è¦†ç›–åå•</h3><p>ä½ éœ€è¦é€šè¿‡ <code>.gitattributes</code> æ–‡ä»¶å‘Šè¯‰ Git å“ªäº›æ–‡ä»¶åœ¨å†²çªæ—¶åº”è¯¥è§¦å‘è¿™ä¸ªé©±åŠ¨ã€‚</p><ol><li><p><strong>åˆ›å»ºå±æ€§æ–‡ä»¶ï¼š</strong></p><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>touch .gitattributes
</span></span></code></pre></td></tr></table></div></div></li><li><p><strong>å†™å…¥åŒ¹é…è§„åˆ™ï¼š</strong></p><p>æ‰“å¼€ <code>.gitattributes</code>ï¼Œæ ¹æ®ä½ çš„éœ€æ±‚ï¼ˆä¾‹å¦‚å§‹ç»ˆåŒæ­¥ <code>nodes</code> æ–‡ä»¶å¤¹ï¼‰è¾“å…¥ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># é’ˆå¯¹ç‰¹å®šç›®å½•æˆ–æ–‡ä»¶ï¼Œå†²çªæ—¶æ°¸è¿œé‡‡ç”¨å¯¹æ–¹çš„ç‰ˆæœ¬</span>
</span></span><span class=line><span class=cl>nodes/** <span class=nv>merge</span><span class=o>=</span>keep_theirs
</span></span><span class=line><span class=cl>configs/** <span class=nv>merge</span><span class=o>=</span>keep_theirs
</span></span><span class=line><span class=cl>*.json <span class=nv>merge</span><span class=o>=</span>keep_theirs
</span></span></code></pre></td></tr></table></div></div></li></ol><hr><h3 id=ç¬¬ä¸‰é˜¶æ®µé…ç½®-github-actions-è‡ªåŠ¨åŒ–>ç¬¬ä¸‰é˜¶æ®µï¼šé…ç½® GitHub Actions è‡ªåŠ¨åŒ–</h3><p>è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚ç”±äº GitHub Action è¿è¡Œç¯å¢ƒæ˜¯ä¸´æ—¶çš„ï¼Œå®ƒä¸çŸ¥é“ä½ æœ¬åœ°çš„ <code>git config</code>ã€‚æˆ‘ä»¬å¿…é¡»åœ¨è„šæœ¬ä¸­æ³¨å…¥é©±åŠ¨å®šä¹‰ã€‚</p><ol><li><p>ä¿®æ”¹ <code>.github/workflows/Fork-sync.yml</code>ï¼š</p><p>å°†ä½ ä¹‹å‰ä¸Šä¼ çš„æ–‡ä»¶å†…å®¹æ›¿æ¢ä¸ºä»¥ä¸‹åŸç”Ÿ Git é€»è¾‘ï¼š</p></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Fork-sync</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>permissions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>contents</span><span class=p>:</span><span class=w> </span><span class=l>write</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>schedule</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>cron</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;0 17 * * *&#34;</span><span class=w>  </span><span class=c># æ¯å¤©åŒ—äº¬æ—¶é—´å‡Œæ™¨1ç‚¹è¿è¡Œ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>workflow_dispatch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>sync_latest_from_upstream</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Sync latest commits from upstream repo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>if</span><span class=p>:</span><span class=w> </span><span class=l>${{ github.event.repository.fork }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Checkout target repo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>fetch-depth</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w> </span><span class=c># è·å–å®Œæ•´å†å²ä»¥æ”¯æŒåˆå¹¶</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Configure Git &amp; Merge Driver</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          git config user.name &#34;github-actions[bot]&#34;
</span></span></span><span class=line><span class=cl><span class=sd>          git config user.email &#34;github-actions[bot]@users.noreply.github.com&#34;
</span></span></span><span class=line><span class=cl><span class=sd>          # å…³é”®ï¼šåœ¨äº‘ç«¯æœåŠ¡å™¨æ³¨å…¥ keep_theirs é©±åŠ¨å®šä¹‰
</span></span></span><span class=line><span class=cl><span class=sd>          git config merge.keep_theirs.driver &#34;cat %B &gt; %A&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Sync upstream changes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          # æ·»åŠ  LunaTV åŸå§‹ä»“åº“ä½œä¸ºä¸Šæ¸¸
</span></span></span><span class=line><span class=cl><span class=sd>          git remote add upstream https://github.com/hafrey1/LunaTV-config.git
</span></span></span><span class=line><span class=cl><span class=sd>          git fetch upstream main
</span></span></span><span class=line><span class=cl><span class=sd>          
</span></span></span><span class=line><span class=cl><span class=sd>          # æ‰§è¡Œåˆå¹¶ã€‚Git ä¼šè¯»å– .gitattributes å¹¶åœ¨å†²çªæ—¶è°ƒç”¨ keep_theirs é©±åŠ¨
</span></span></span><span class=line><span class=cl><span class=sd>          git merge upstream/main --no-edit || (echo &#34;æ£€æµ‹åˆ°éè§„åˆ™å†…çš„æ ¸å¿ƒå†²çªï¼Œéœ€æ‰‹åŠ¨å¹²é¢„&#34; &amp;&amp; exit 1)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Push to origin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          # å°†åˆå¹¶åçš„æœ€æ–°ç‰ˆæœ¬æ¨é€åˆ°ä½ è‡ªå·±çš„ä»“åº“
</span></span></span><span class=line><span class=cl><span class=sd>          git push origin main</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Delete workflow runs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>Mattraks/delete-workflow-runs@main</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>retain_days</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>keep_minimum_runs</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><hr><ol start=2><li><strong>æäº¤å¹¶æ¨é€ï¼š</strong></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git add .
</span></span><span class=line><span class=cl>git commit -m <span class=s2>&#34;chore: é…ç½®å†²çªæ—¶è‡ªåŠ¨ä»¥æ¥æºåˆ†æ”¯ä¸ºå‡†&#34;</span>
</span></span><span class=line><span class=cl>git push origin main
</span></span></code></pre></td></tr></table></div></div><h3 id=ç¬¬å››é˜¶æ®µè§£å†³æ¨é€æ‹’ç»non-fast-forward>ç¬¬å››é˜¶æ®µï¼šè§£å†³æ¨é€æ‹’ç»ï¼ˆnon-fast-forwardï¼‰</h3><p><strong>å¦‚æœ</strong>ä½ åœ¨æ¨é€æ—¶é‡åˆ° <code>[rejected] main -> main (non-fast-forward)</code> é”™è¯¯ï¼Œè¯´æ˜ä½ æœ¬åœ°å’Œè¿œç¨‹çš„æäº¤å†å²ä¸ä¸€è‡´ã€‚</p><p><strong>è§£å†³æ–¹æ³•ï¼š</strong></p><ol><li><p><strong>å¼ºåˆ¶åŒæ­¥è¿œç¨‹æ”¹åŠ¨ï¼š</strong></p><p>Bash</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>git fetch origin
</span></span><span class=line><span class=cl>git merge origin/main -X ours  # è¿™é‡Œçš„ -X ours æ˜¯ä¸ºäº†ç¡®ä¿åœ¨åˆå¹¶è¿œç¨‹æ—¶å…ˆä¿ä½ä½ åˆšå†™çš„ .gitattributes
</span></span></code></pre></td></tr></table></div></div></li><li><p><strong>é‡æ–°æ¨é€ï¼š</strong></p><p>Bash</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>git push origin main
</span></span></code></pre></td></tr></table></div></div></li></ol><hr><h3 id=æ€»ç»“ä¸éªŒè¯>æ€»ç»“ä¸éªŒè¯</h3><ul><li><strong>éªŒè¯é©±åŠ¨ï¼š</strong> è¿è¡Œ <code>git check-attr -a package-lock.json</code>ï¼ˆæˆ–ä»»æ„ä½ è§„åˆ™é‡Œçš„æ–‡ä»¶ï¼‰ï¼Œå¦‚æœè¾“å‡ºåŒ…å« <code>merge: keep_theirs</code>ï¼Œè¯´æ˜è§„åˆ™å·²è¯†åˆ«ã€‚</li><li><strong>æ‰‹åŠ¨æµ‹è¯•ï¼š</strong> åœ¨ GitHub ä»“åº“çš„ <strong>Actions</strong> é¡µé¢æ‰‹åŠ¨ç‚¹å‡» <strong>Run workflow</strong>ã€‚å¦‚æœè¿è¡ŒæˆåŠŸä¸”æ—¥å¿—æ˜¾ç¤º <code>Merge made by the 'recursive' strategy</code>ï¼Œåˆ™è¯´æ˜è‡ªåŠ¨åŒ–å¿½ç•¥å†²çªå·²ç”Ÿæ•ˆã€‚</li></ul><p><strong>ä½ ä¼šæ“ä½œäº†å—ï¼Ÿ</strong> å¦‚æœè¿è¡Œ Action æ—¶å‡ºç°çº¢è‰²æŠ¥é”™ï¼Œè¯·æŠŠæŠ¥é”™æ—¥å¿—å‘ç»™æˆ‘ï¼Œæˆ‘æ¥å¸®ä½ åˆ†æã€‚</p><h2 id=å¤š-git-ä»“åº“çš„-ssh-key-é…ç½®>å¤š Git ä»“åº“çš„ SSH-key é…ç½®</h2><p><strong>PS:æœªæµ‹è¯•</strong></p><h3 id=é…ç½®å¤š-ssh-key>é…ç½®å¤š SSH key</h3><h4 id=1-æ·»åŠ -rsa-key>1. æ·»åŠ  RSA key</h4><p>ä»ç„¶ä½¿ç”¨å‘½ä»¤</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>ssh-keygen -t rsa -c &#34;your@email.com&#34;
</span></span></code></pre></td></tr></table></div></div><p>ç”Ÿæˆ RSA å¯†é’¥å¯¹ï¼Œä½†åœ¨æ¥ä¸‹æ¥çš„é€‰é¡¹ä¸­æŒ‡å®šä¸€ä¸ªä¸åŒçš„æ–‡ä»¶åï¼Œä¾‹å¦‚ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Enter file in which to save the key (/Users/userName/.ssh/id_rsa): /Users/userName/.ssh/new_rsa
</span></span></code></pre></td></tr></table></div></div><p>è¿™æ ·å°±åœ¨ <code>~/.ssh</code> ç›®å½•ä¸‹ç”Ÿæˆäº†ä¸€å¯¹æ–°çš„ RSA å¯†é’¥ï¼š<code>new_rsa</code> å’Œ <code>new_rsa.pub</code>.</p><h4 id=2-å¯†é’¥é…ç½®>2. å¯†é’¥é…ç½®</h4><p>ç”Ÿæˆäº†æ–°çš„å¯†é’¥åï¼Œä¾¿å¯å°†æ–°å¯†é’¥æˆåŠŸæ·»åŠ åˆ°ç¬¬äºŒä¸ª GitHub è´¦å·. ä½†æ­¤æ—¶å‘ç¬¬äºŒä¸ª Github ä»“åº“æ¨é€æ›´æ–°ä»ç„¶ä¼šæ˜¾ç¤ºæ— æƒé™ï¼Œå› ä¸ºè‹¥ä¸ç»é…ç½®ç³»ç»Ÿé»˜è®¤ä»ä½¿ç”¨é»˜è®¤çš„å¯†é’¥å¯¹ <code>id_rsa</code>.</p><p>éœ€è¦å¦‚ä¸‹é…ç½®ï¼š</p><p>åœ¨å¯†é’¥ç›®å½• <code>~/.ssh/</code> ä¸‹ç¼–è¾‘æˆ–æ–°å»ºé…ç½®æ–‡ä»¶ <code>config</code>ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=l>Host github.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>HostName github.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>IdentityFile ~/.ssh/id_rsa</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>User git</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=l>Host alias</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>HostName github.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>IdentityFile ~/.ssh/new_rsa</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>User git</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>ç†è§£å…¶ä¸­é…ç½®é¡¹å°±å¯ä»¥çµæ´»é…ç½®æ›´å¤šçš„ SSH key äº†ï¼š</p><ul><li><code>Host</code> æ˜¯æˆ‘ä»¬<strong>è‡ªå·±å®šä¹‰</strong>çš„ä¸€ä¸ªåˆ«åï¼Œç”¨æ¥æ›´æ–¹ä¾¿åœ°æŒ‡ä»£ <code>HostName</code>.</li><li><code>HostName</code> æ˜¯è¿œç¨‹åœ°å€çš„åŸŸåï¼Œéœ€è¦æ­£ç¡®é…ç½®.</li><li><code>IdentityFile</code> æŒ‡å®šä½¿ç”¨è¯¥é…ç½®é¡¹ä¸­çš„åŸŸåï¼ˆæˆ–åˆ«åï¼‰æ—¶æ‰€ä½¿ç”¨çš„å¯†é’¥æ–‡ä»¶.</li><li><code>User</code> ä½¿ç”¨ SSH æ—¶çš„ç”¨æˆ·åï¼Œå¯¹äºè¿œç¨‹ Git ä»“åº“æ¥è¯´ä¸€èˆ¬ä½¿ç”¨ <code>git</code>.</li></ul><p>ä»¥ä¸Šç¬¬ä¸€ä¸ªé…ç½®é¡¹ï¼Œä½¿åŸŸåä¸º <code>github.com</code> çš„ä»“åº“é»˜è®¤ä½¿ç”¨ <code>id_rsa</code> å¯†é’¥å¯¹ï¼Œç¬¬äºŒä¸ªé…ç½®é¡¹ä¸ºåœ°å€ä¸­ä½¿ç”¨äº†åˆ«å <code>alias</code> çš„ä»“åº“ä½¿ç”¨ <code>new_rsa</code> å¯†é’¥å¯¹</p><h4 id=3-ä½¿ç”¨åˆ«åé…ç½®ä»“åº“çš„è¿œç¨‹åœ°å€>3. ä½¿ç”¨åˆ«åé…ç½®ä»“åº“çš„è¿œç¨‹åœ°å€</h4><p>é…ç½®å®Œä»¥ä¸Šå†…å®¹åï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ <code>alias</code> ä½œä¸ºç™»é™†åœ°å€æ—¶ä¼šä½¿ç”¨æŒ‡å®šçš„ <code>new_rsa</code> å¯†é’¥ï¼Œå¦åˆ™ä»é»˜è®¤ä½¿ç”¨ <code>id_rsa</code> å¯†é’¥ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å¯¹æƒ³è¦ä½¿ç”¨ <code>new_rsa</code> å¯†é’¥çš„ä»“åº“åœ°å€åšä¿®æ”¹. ä¾‹å¦‚ï¼š</p><p>å¯¹äºä»“åº“åœ°å€ä¸º</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>git@github.com:user_name/repository_name.git
</span></span></code></pre></td></tr></table></div></div><p>çš„ GitHub è¿œç¨‹ä»“åº“ï¼Œæˆ‘ä»¬æ¨é€æ›´æ–°æ—¶ç³»ç»Ÿä»é»˜è®¤ä½¿ç”¨ <code>id_rsa</code> å¯†é’¥ï¼Œè‹¥æƒ³ä½¿ç”¨ <code>new_rsa</code> å¯†é’¥åˆ™éœ€ä¿®æ”¹åœ°å€ä¸ºï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>git@alias:user_name/repository_name.git
</span></span></code></pre></td></tr></table></div></div><h3 id=å…¶ä»–>å…¶ä»–</h3><ul><li>å¯¹äº Windows ç”¨æˆ·éœ€è¦æ³¨æ„ <code>.ssh</code> ç›®å½•çš„è·¯å¾„</li><li>config ä¸ç”Ÿæ•ˆçš„è¯æ£€æŸ¥è¯­æ³•æˆ–å°è¯•é‡å¯ç»ˆç«¯æˆ–è®¾å¤‡åé‡è¯•</li><li>å¯¹äºæ›´å¤šçš„å¯†é’¥é…ç½®åœ¨ <code>~/.ssh/config</code> æ–‡ä»¶ä¸­åŒç†è¿½åŠ æ›´å¤šé…ç½®é¡¹å³å¯</li></ul><p>å‚è€ƒé“¾æ¥ï¼š</p><p><a class=link href=https://blog.csdn.net/Hodors/article/details/103226958 target=_blank rel=noopener>1.è§£å†³ Failed to connect to github.com port 443</a></p><p><a class=link href=https://blog.csdn.net/MBuger/article/details/70226712 target=_blank rel=noopener>2.è§£å†³ssh: connect to host github.com port 22</a></p><p><a class=link href=https://www.hozen.site/archives/43/ target=_blank rel=noopener>3.å¤š Git ä»“åº“çš„ SSH-key é…ç½®</a></p></div><div class="shuoshuo-tags meta-wrapper" style=margin-top:15px!important;margin-bottom:5px!important;gap:10px!important><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:14px;height:14px;color:var(--card-text-color-secondary)"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
<a href=/tags/github/ class="meta-item shuoshuo-tag" title="æŸ¥çœ‹æ ‡ç­¾: github"><span>#github</span></a></div><div class=shuoshuo-footer-info><div class="shuoshuo-edit-link meta-wrapper" style=gap:15px!important><a href=https://github.com/iwyang/iwyang.github.io/edit/develop/content/post/%e8%a7%a3%e5%86%b3Github-port-443%e4%bb%a5%e5%8f%8aport-22%e9%97%ae%e9%a2%98&&%e5%90%88%e5%b9%b6%e5%86%b2%e7%aa%81%e9%97%ae%e9%a2%98&&amp;codespaces/index.md target=_blank rel="noopener noreferrer" class=meta-item title="å‰å¾€ GitHub ç¼–è¾‘æ­¤é¡µ"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
<span>ç¼–è¾‘æ­¤é¡µ</span>
</a><span class=separator>|</span>
<a class="meta-item git-hash-text" href=https://github.com/iwyang/iwyang.github.io/commit/43a0b1c420984403b33a37175bab7f9a43ea714a target=_blank rel="noopener noreferrer" title="Commit Hash: 43a0b1c">#43a0b1c</a></div></div></article><article class=shuoshuo-card><div class=shuoshuo-header><div class="shuoshuo-meta meta-wrapper"><time class="shuoshuo-time meta-item" datetime=2021-08-17T04:06:13Z><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
<span>2021-08-17</span>
</time><span class="shuoshuo-updated-time meta-item" datetime=2026-02-18T15:52:01+08:00><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4A2 2 0 002 6v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121.0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
<span>2026-02-18</span></span></div></div><div class="shuoshuo-content style-cs-content article-post"><p>é¦–å…ˆç¡®ä¿<code>gitee</code>è´¦æˆ·å·²ç»‘å®šé‚®ç®±ï¼Œå¹¶ä¸”è¦å…³æ³¨<code>gitee</code>å…¬ä¼—å·ï¼Œå¹¶ç»‘å®šäº†è‡ªå·±çš„è´¦å·ã€‚</p><h2 id=å®‰è£…git>å®‰è£…GIt</h2><p>æœ¬åœ°éœ€è¦å®‰è£… <a class=link href=https://git-scm.com/ target=_blank rel=noopener>Git</a> ï¼Œå®‰è£…è¿‡ç¨‹ç•¥ã€‚å®‰è£…å®Œgitåè¿˜è¦é…ç½®ç¯å¢ƒå˜é‡ï¼š å³é”®æˆ‘çš„ç”µè„‘ â€“> å±æ€§ï¼Œç„¶åç‚¹å‡»é«˜çº§ç³»ç»Ÿè®¾ç½® â€“> ç¯å¢ƒå˜é‡ â€“> é€‰æ‹©ç”¨æˆ·å˜é‡æˆ–ç³»ç»Ÿå˜é‡ä¸­çš„Path,ç‚¹å‡»ç¼–è¾‘ï¼›æ‰¾åˆ°Gitå®‰è£…ç›®å½•,æ·»åŠ ä»¥ä¸‹åœ°å€:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>D:<span class=se>\P</span>rogram Files<span class=se>\G</span>it<span class=se>\b</span>in
</span></span><span class=line><span class=cl>D:<span class=se>\P</span>rogram Files<span class=se>\G</span>it<span class=se>\m</span>ingw64<span class=se>\l</span>ibexec<span class=se>\g</span>it-core
</span></span><span class=line><span class=cl>D:<span class=se>\P</span>rogram Files<span class=se>\G</span>it<span class=se>\m</span>ingw64<span class=se>\b</span>in
</span></span></code></pre></td></tr></table></div></div><h2 id=ç”Ÿæˆssh-å…¬é’¥>ç”ŸæˆSSH å…¬é’¥</h2><p>Windows ä¸Šå®‰è£… <a class=link href=https://git-for-windows.github.io/ target=_blank rel=noopener>Git for Windows</a> ä¹‹ååœ¨å¼€å§‹èœå•é‡Œæ‰“å¼€ Git Bash è¾“å…¥ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git config --global user.name <span class=s2>&#34;ä½ çš„ç”¨æˆ·å&#34;</span>
</span></span><span class=line><span class=cl>git config --global user.email <span class=s2>&#34;ä½ çš„ç”µå­é‚®ç®±&#34;</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~
</span></span><span class=line><span class=cl>mkdir .ssh
</span></span><span class=line><span class=cl><span class=nb>cd</span> .ssh
</span></span><span class=line><span class=cl>ssh-keygen -t rsa
</span></span></code></pre></td></tr></table></div></div><p>è¿™æ ·å°±åœ¨ç³»ç»Ÿå½“å‰ç”¨æˆ·æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆäº†ç§é’¥ <code>id_rsa</code> å’Œå…¬é’¥ <code>id_rsa.pub</code>ã€‚</p><h2 id=é…ç½®ssh-å…¬é’¥>é…ç½®SSH å…¬é’¥</h2><ul><li>åœ¨ GitHub é¡¹ç›®çš„ã€ŒSettings -> Secretsã€è·¯å¾„ä¸‹é…ç½®å¥½å‘½åä¸º <code>GITEE_RSA_PRIVATE_KEY</code> å’Œ <code>GITEE_PASSWORD</code> çš„ä¸¤ä¸ªå¯†é’¥ã€‚å…¶ä¸­ï¼š<code>GITEE_RSA_PRIVATE_KEY</code> å­˜æ”¾ <code>id_rsa</code> ç§é’¥ï¼›<code>GITEE_PASSWORD</code> å­˜æ”¾ <code>Gitee</code> å¸å·çš„å¯†ç </li><li>åœ¨ GitHub çš„ä¸ªäººè®¾ç½®é¡µé¢ã€ŒSettings -> SSH and GPG keysã€ é…ç½® SSH å…¬é’¥ï¼ˆå³ï¼šid_rsa.pubï¼‰ï¼Œå‘½åéšæ„</li><li>åœ¨ Gitee çš„ä¸ªäººè®¾ç½®é¡µé¢ã€Œå®‰å…¨è®¾ç½® -> SSH å…¬é’¥ã€ é…ç½® SSH å…¬é’¥ï¼ˆå³ï¼šid_rsa.pubï¼‰ï¼Œå‘½åéšæ„</li></ul><h2 id=é…ç½®github-actions>é…ç½®GitHub Actions</h2><p>æ–°å»ºæ–‡ä»¶<code>.github/workflows/Sync to Gitee.yml</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Sync to Gitee</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w> </span><span class=l>develop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>build</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Sync to Gitee</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>wearerequired/git-mirror-action@master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># æ³¨æ„åœ¨ Settings-&gt;Secrets é…ç½® GITEE_RSA_PRIVATE_KEY</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>SSH_PRIVATE_KEY</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITEE_RSA_PRIVATE_KEY }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ GitHub æºä»“åº“åœ°å€</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>source-repo</span><span class=p>:</span><span class=w> </span><span class=l>git@github.com:iwyang/iwyang.github.io.git</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ Gitee ç›®æ ‡ä»“åº“åœ°å€</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>destination-repo</span><span class=p>:</span><span class=w> </span><span class=l>git@gitee.com:iwyang/iwyang.git</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Build Gitee Pages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>yanglbme/gitee-pages-action@main</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ Gitee ç”¨æˆ·å</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>gitee-username</span><span class=p>:</span><span class=w> </span><span class=l>iwyang</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># æ³¨æ„åœ¨ Settings-&gt;Secrets é…ç½® GITEE_PASSWORD</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>gitee-password</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITEE_PASSWORD }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ Gitee ä»“åº“ï¼Œä»“åº“åä¸¥æ ¼åŒºåˆ†å¤§å°å†™ï¼Œè¯·å‡†ç¡®å¡«å†™ï¼Œå¦åˆ™ä¼šå‡ºé”™</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>gitee-repo</span><span class=p>:</span><span class=w> </span><span class=l>iwyang/iwyang</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># è¦éƒ¨ç½²çš„åˆ†æ”¯ï¼Œé»˜è®¤æ˜¯ masterï¼Œè‹¥æ˜¯å…¶ä»–åˆ†æ”¯ï¼Œåˆ™éœ€è¦æŒ‡å®šï¼ˆæŒ‡å®šçš„åˆ†æ”¯å¿…é¡»å­˜åœ¨ï¼‰</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>branch</span><span class=p>:</span><span class=w> </span><span class=l>master</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=å‚è€ƒé“¾æ¥>å‚è€ƒé“¾æ¥</h2><p><a class=link href=https://wqdy.top/2023.html target=_blank rel=noopener>ä½¿ç”¨ github actions å°† github é¡¹ç›®è‡ªåŠ¨åŒæ­¥åˆ° gitee å¹¶è‡ªåŠ¨éƒ¨ç½² Gitee Pages</a></p></div><div class="shuoshuo-tags meta-wrapper" style=margin-top:15px!important;margin-bottom:5px!important;gap:10px!important><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:14px;height:14px;color:var(--card-text-color-secondary)"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
<a href=/tags/github/ class="meta-item shuoshuo-tag" title="æŸ¥çœ‹æ ‡ç­¾: github"><span>#github</span></a></div><div class=shuoshuo-footer-info><div class="shuoshuo-edit-link meta-wrapper" style=gap:15px!important><a href=https://github.com/iwyang/iwyang.github.io/edit/develop/content/post/%e5%88%a9%e7%94%a8github-actions%e8%87%aa%e5%8a%a8%e5%90%8c%e6%ad%a5%e9%a1%b9%e7%9b%ae%e5%88%b0gitee%e5%b9%b6%e8%87%aa%e5%8a%a8%e9%83%a8%e7%bd%b2Gitee-Pages/index.md target=_blank rel="noopener noreferrer" class=meta-item title="å‰å¾€ GitHub ç¼–è¾‘æ­¤é¡µ"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
<span>ç¼–è¾‘æ­¤é¡µ</span>
</a><span class=separator>|</span>
<a class="meta-item git-hash-text" href=https://github.com/iwyang/iwyang.github.io/commit/26a215ebb8fca78d98f384856b8ab5e0e2056333 target=_blank rel="noopener noreferrer" title="Commit Hash: 26a215e">#26a215e</a></div></div></article><article class=shuoshuo-card><div class=shuoshuo-header><div class="shuoshuo-meta meta-wrapper"><time class="shuoshuo-time meta-item" datetime=2021-08-15T08:39:34Z><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
<span>2021-08-15</span>
</time><span class="shuoshuo-updated-time meta-item" datetime=2026-02-18T15:52:01+08:00><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4A2 2 0 002 6v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121.0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
<span>2026-02-18</span></span></div></div><div class="shuoshuo-content style-cs-content article-post"><h2 id=rsyncåŒæ­¥>rsyncåŒæ­¥</h2><p>è¿™æ˜¯ä¸€ä»½<strong>æ²¡æœ‰ä»»ä½•é—æ¼ã€ä»é›¶å¼€å§‹</strong>çš„ç»ˆæéƒ¨ç½²æŒ‡å—ã€‚ä¸ºäº†å½»åº•è§£å†³ä½ ä¹‹å‰é‡åˆ°çš„æƒé™ï¼ˆPermission deniedï¼‰å’Œå‘½ä»¤ç¼ºå¤±ï¼ˆrsync not foundï¼‰é—®é¢˜ï¼Œè¯·ä¸¥æ ¼æŒ‰ç…§è¿™ 5 ä¸ªé˜¶æ®µæ“ä½œã€‚</p><p>æˆ‘ä»¬é‡‡ç”¨**â€œé‡ç½®ä¸€åˆ‡â€**çš„ç­–ç•¥ï¼Œç¡®ä¿ç¯å¢ƒç»å¯¹å¹²å‡€ã€‚</p><hr><h3 id=é˜¶æ®µä¸€æœåŠ¡å™¨-vps-å‡†å¤‡>é˜¶æ®µä¸€ï¼šæœåŠ¡å™¨ (VPS) å‡†å¤‡</h3><p><strong>åœºæ™¯</strong>ï¼šä½ åœ¨ VPS çš„ç»ˆç«¯é‡Œæ“ä½œã€‚
<strong>ç›®æ ‡</strong>ï¼šå®‰è£…å¿…è¦è½¯ä»¶ï¼Œå»ºç«‹ç½‘ç«™ç›®å½•ï¼Œæ¸…ç†æ—§çš„ SSH é…ç½®ã€‚</p><ol><li><strong>ç™»å½•æœåŠ¡å™¨</strong>ï¼š
ä½¿ç”¨ä½ ç°æœ‰çš„æ–¹å¼ï¼ˆå¯†ç æˆ–æ§åˆ¶å°ï¼‰ç™»å½•åˆ° <code>142.171.177.173</code>ã€‚</li><li><strong>å®‰è£… Rsync (ä¿®å¤ code 12 æŠ¥é”™)</strong>ï¼š
è¿™æ˜¯ä¹‹å‰æŠ¥é”™çš„æ ¸å¿ƒåŸå› ï¼Œå¿…é¡»å®‰è£…ã€‚</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># å¦‚æœæ˜¯ Debian/Ubuntu:</span>
</span></span><span class=line><span class=cl>sudo apt-get update <span class=o>&amp;&amp;</span> sudo apt-get install rsync -y
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å¦‚æœæ˜¯ CentOS/RHEL:</span>
</span></span><span class=line><span class=cl>sudo yum install rsync -y
</span></span></code></pre></td></tr></table></div></div><p><em>éªŒè¯</em>ï¼šè¾“å…¥ <code>rsync --version</code>ï¼Œçœ‹åˆ°ç‰ˆæœ¬å·å³æˆåŠŸã€‚
3. <strong>åˆ›å»ºç½‘ç«™å­˜æ”¾ç›®å½•</strong>ï¼š
ç¡®ä¿ GitHub æœºå™¨äººæœ‰åœ°æ–¹æ”¾æ–‡ä»¶ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># åˆ›å»ºç›®å½•</span>
</span></span><span class=line><span class=cl>sudo mkdir -p /var/www/blog
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å°†ç›®å½•æ‰€æœ‰æƒäº¤ç»™ admin ç”¨æˆ· (è‡³å…³é‡è¦ï¼)</span>
</span></span><span class=line><span class=cl>sudo chown -R admin:admin /var/www/blog
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># è®¾ç½®ç›®å½•æƒé™</span>
</span></span><span class=line><span class=cl>sudo chmod -R <span class=m>755</span> /var/www/blog
</span></span></code></pre></td></tr></table></div></div><ol start=4><li><strong>åˆå§‹åŒ– SSH ç›®å½• (ä¿®å¤æƒé™æŠ¥é”™)</strong>ï¼š
å³ä½¿ç›®å½•å·²å­˜åœ¨ï¼Œä¹Ÿè¯·è¿è¡Œä¸€éä»¥ä¿®æ­£æƒé™ã€‚</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># ç¡®ä¿åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> /home/admin
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åˆ›å»º .ssh ç›®å½•</span>
</span></span><span class=line><span class=cl>mkdir -p .ssh
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># é”æ­»ç›®å½•æƒé™ (åªæœ‰ admin èƒ½è¿›)</span>
</span></span><span class=line><span class=cl>chmod <span class=m>700</span> .ssh
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç¡®ä¿æ‰€æœ‰æƒæ­£ç¡®</span>
</span></span><span class=line><span class=cl>sudo chown -R admin:admin .ssh
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=é˜¶æ®µäºŒç”Ÿæˆä¸“ç”¨é’¥åŒ™-æœ¬åœ°ç”µè„‘>é˜¶æ®µäºŒï¼šç”Ÿæˆâ€œä¸“ç”¨é’¥åŒ™â€ (æœ¬åœ°ç”µè„‘)</h3><p><strong>åœºæ™¯</strong>ï¼šåœ¨ä½ è‡ªå·±çš„ç”µè„‘ç»ˆç«¯ï¼ˆGit Bash / Terminalï¼‰é‡Œæ“ä½œã€‚
<strong>ç›®æ ‡</strong>ï¼šåˆ¶ä½œä¸€å¯¹å…¨æ–°çš„é’¥åŒ™ï¼Œä¸€æŠŠç»™ GitHubï¼Œä¸€æŠŠç»™ VPSã€‚</p><ol><li><strong>ç”Ÿæˆå¯†é’¥</strong>ï¼š</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># ä¸è¦è®¾ç½®å¯†ç ï¼Œä¸€è·¯å›è½¦</span>
</span></span><span class=line><span class=cl>ssh-keygen -t ed25519 -C <span class=s2>&#34;github-actions-deploy&#34;</span> -f deploy_key
</span></span></code></pre></td></tr></table></div></div><ol start=2><li><strong>æŸ¥çœ‹å¹¶å¤åˆ¶å…¬é’¥ (ç»™ VPS ç”¨)</strong>ï¼š</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat deploy_key.pub
</span></span></code></pre></td></tr></table></div></div><p>ğŸ‘‰ <strong>åŠ¨ä½œ</strong>ï¼šå¤åˆ¶è¾“å‡ºçš„é‚£ä¸€æ•´è¡Œå†…å®¹ï¼ˆä»¥ <code>ssh-ed25519</code> å¼€å¤´ï¼‰ã€‚
3. <strong>æŸ¥çœ‹å¹¶å¤åˆ¶ç§é’¥ (ç»™ GitHub ç”¨)</strong>ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat deploy_key
</span></span></code></pre></td></tr></table></div></div><p>ğŸ‘‰ <strong>åŠ¨ä½œ</strong>ï¼šå¤åˆ¶<strong>å…¨éƒ¨å†…å®¹</strong>ï¼ŒåŒ…æ‹¬ <code>-----BEGIN...</code> å’Œ <code>-----END...</code>ã€‚</p><hr><h3 id=é˜¶æ®µä¸‰å®‰è£…é”-vps>é˜¶æ®µä¸‰ï¼šå®‰è£…â€œé”â€ (VPS)</h3><p><strong>åœºæ™¯</strong>ï¼šå›åˆ° VPS çš„ç»ˆç«¯é‡Œæ“ä½œã€‚
<strong>ç›®æ ‡</strong>ï¼šæŠŠé˜¶æ®µäºŒé‡Œå¤åˆ¶çš„<strong>å…¬é’¥</strong>ï¼Œå†™å…¥æœåŠ¡å™¨ç™½åå•ã€‚</p><ol><li><strong>å†™å…¥å…¬é’¥</strong>ï¼š
è¯·å°†ä¸‹é¢çš„ <code>ä½ çš„å…¬é’¥å†…å®¹</code> æ›¿æ¢ä¸ºä½ åˆšæ‰å¤åˆ¶çš„é‚£ä¸€é•¿ä¸²å­—ç¬¦ã€‚</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;ä½ çš„å…¬é’¥å†…å®¹&#34;</span> &gt; /home/admin/.ssh/authorized_keys
</span></span></code></pre></td></tr></table></div></div><p><em>ä¾‹å¦‚ï¼š</em> <code>echo "ssh-ed25519 AAAAC3Nz... github-actions-deploy" > /home/admin/.ssh/authorized_keys</code>
2. <strong>è®¾ç½®æ–‡ä»¶æƒé™ (è‡³å…³é‡è¦)</strong>ï¼š
SSH è§„å®šï¼Œå¦‚æœè¿™ä¸ªæ–‡ä»¶æƒé™å¤ªå¼€æ”¾ï¼Œå®ƒä¼šæ‹’ç»ç™»å½•ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># åªèƒ½ä½ è‡ªå·±è¯»å†™</span>
</span></span><span class=line><span class=cl>chmod <span class=m>600</span> /home/admin/.ssh/authorized_keys
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å†æ¬¡ç¡®è®¤æ‰€æœ‰æƒ</span>
</span></span><span class=line><span class=cl>sudo chown admin:admin /home/admin/.ssh/authorized_keys
</span></span></code></pre></td></tr></table></div></div><ol start=3><li><strong>æœ€ç»ˆæ£€æŸ¥</strong>ï¼š</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat /home/admin/.ssh/authorized_keys
</span></span></code></pre></td></tr></table></div></div><p><em>ç¡®è®¤çœ‹åˆ°çš„æ˜¯ä½ çš„æ–°å…¬é’¥ã€‚</em></p><hr><h3 id=é˜¶æ®µå››é…ç½®æŒé’¥äºº-github>é˜¶æ®µå››ï¼šé…ç½®â€œæŒé’¥äººâ€ (GitHub)</h3><p><strong>åœºæ™¯</strong>ï¼šåœ¨ GitHub ç½‘é¡µä¸Šæ“ä½œã€‚
<strong>ç›®æ ‡</strong>ï¼šæŠŠé˜¶æ®µäºŒé‡Œå¤åˆ¶çš„<strong>ç§é’¥</strong>ï¼Œäº¤ç»™ GitHub æœºå™¨äººã€‚</p><ol><li>æ‰“å¼€ä½ çš„ GitHub ä»“åº“é¡µé¢ã€‚</li><li>ç‚¹å‡» <strong>Settings</strong> -> <strong>Secrets and variables</strong> -> <strong>Actions</strong>ã€‚</li><li>æ‰¾åˆ° <code>SERVER_SSH_KEY</code> (å¦‚æœæœ‰æ—§çš„ï¼Œç›´æ¥åˆ é™¤æ–°å»ºï¼Œæˆ–è€…ç‚¹å‡» Update)ã€‚</li><li><strong>ç²˜è´´é˜¶æ®µäºŒé‡Œå¤åˆ¶çš„ç§é’¥å†…å®¹</strong>ã€‚</li><li>ç‚¹å‡» <strong>Add secret</strong>ã€‚</li></ol><hr><h3 id=é˜¶æ®µäº”é…ç½®è‡ªåŠ¨åŒ–è„šæœ¬-æœ¬åœ°ä»£ç >é˜¶æ®µäº”ï¼šé…ç½®è‡ªåŠ¨åŒ–è„šæœ¬ (æœ¬åœ°ä»£ç )</h3><p><strong>åœºæ™¯</strong>ï¼šåœ¨ VS Code æˆ–æœ¬åœ°ç¼–è¾‘å™¨é‡Œæ“ä½œã€‚
<strong>ç›®æ ‡</strong>ï¼šå‘Šè¯‰ GitHub æ€ä¹ˆç”¨è¿™æŠŠé’¥åŒ™ã€‚</p><ol><li>æ‰“å¼€é¡¹ç›®ä¸­çš„ <code>.github/workflows/gh_pages.yml</code> æ–‡ä»¶ã€‚</li><li><strong>å®Œå…¨è¦†ç›–</strong>ä¸ºä»¥ä¸‹å†…å®¹ï¼ˆç¡®ä¿æ²¡æœ‰ä»»ä½•ç¼©è¿›é”™è¯¯ï¼‰ï¼š</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>GitHub Page Deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>develop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># ã€ä¼˜åŒ–1ã€‘æ–°å¢æ‰‹åŠ¨è§¦å‘æŒ‰é’®</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># å…è®¸ä½ åœ¨ä¸ä¿®æ”¹ä»£ç çš„æƒ…å†µä¸‹ï¼Œåœ¨ GitHub Actions ç•Œé¢æ‰‹åŠ¨ç‚¹å‡»é‡æ–°éƒ¨ç½²</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>workflow_dispatch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>TZ</span><span class=p>:</span><span class=w> </span><span class=l>Asia/Shanghai</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>build-deploy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Checkout develop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>submodules</span><span class=p>:</span><span class=w> </span><span class=l>recursive</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>fetch-depth</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Git Configuration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>git config --global core.quotePath false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Setup Hugo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>peaceiris/actions-hugo@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>hugo-version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;latest&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>extended</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Cache Hugo resources</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/cache@v4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>            ~/.cache/hugo_cache
</span></span></span><span class=line><span class=cl><span class=sd>            resources</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># ã€ä¼˜åŒ–2ã€‘æ›´æ™ºèƒ½çš„ç¼“å­˜ Key</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># å¦‚æœ go.sum ä¸å­˜åœ¨ï¼ˆæœ‰äº›ç®€å•é¡¹ç›®æ²¡æœ‰ï¼‰ï¼Œåˆ™ä½¿ç”¨ hugo é…ç½®æ–‡ä»¶åšå“ˆå¸Œï¼Œé˜²æ­¢ç¼“å­˜å¤±æ•ˆ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>${{ runner.os }}-hugo-${{ hashFiles(&#39;go.sum&#39;) || hashFiles(&#39;hugo.*&#39;) }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>restore-keys</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>            ${{ runner.os }}-hugo-</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Build Hugo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>hugo --gc --minify --logLevel info</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy to GitHub Pages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>peaceiris/actions-gh-pages@v4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>github_token</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITHUB_TOKEN }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>publish_branch</span><span class=p>:</span><span class=w> </span><span class=l>master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>publish_dir</span><span class=p>:</span><span class=w> </span><span class=l>./public</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>commit_message</span><span class=p>:</span><span class=w> </span><span class=l>${{ github.event.head_commit.message }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy to Server (Rsync)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># ã€ä¼˜åŒ–3ã€‘é”å®šæ’ä»¶ç‰ˆæœ¬</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># å»ºè®®ä½¿ç”¨å…·ä½“çš„ç‰ˆæœ¬å· (v5.1.0) è€Œä¸æ˜¯ @main</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># @main æ˜¯å¼€å‘ç‰ˆï¼Œå¯èƒ½ä¼šçªç„¶å¼•å…¥ Bug å¯¼è‡´ä½ éƒ¨ç½²å¤±è´¥</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>easingthemes/ssh-deploy@v5.1.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>SSH_PRIVATE_KEY</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.SERVER_SSH_KEY }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>ARGS</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;-avzr --delete&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>SOURCE</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;public/&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>REMOTE_HOST</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;142.171.177.173&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>REMOTE_USER</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;admin&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>TARGET</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;/var/www/blog/&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>EXCLUDE</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;/.git/, /.github/&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># ã€ä¼˜åŒ–4ã€‘è·³è¿‡ Host Key æ£€æŸ¥</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># é˜²æ­¢ VPS é‡è£…æˆ– IP å˜åŠ¨åï¼ŒGitHub æŠ¥é”™ &#34;Host key verification failed&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>SSH_CMD_ARGS</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;-o StrictHostKeyChecking=no&#34;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ol start=3><li><strong>æ¨é€ä»£ç ï¼Œè§¦å‘éƒ¨ç½²</strong>ï¼š</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git add .
</span></span><span class=line><span class=cl>git commit -m <span class=s2>&#34;Fix: Final deployment configuration&#34;</span>
</span></span><span class=line><span class=cl>git push origin develop
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=é¢„æœŸç»“æœ>é¢„æœŸç»“æœ</h3><p>åªè¦ä½ ä¸¥æ ¼æ‰§è¡Œäº†ï¼š</p><ol><li><strong>VPS ä¸Šè£…äº† rsync</strong>ã€‚</li><li><strong>VPS ä¸Š <code>.ssh</code> ç›®å½•æƒé™æ˜¯ 700ï¼Œ<code>authorized_keys</code> æ˜¯ 600</strong>ã€‚</li><li><strong>GitHub Secret é‡Œå¡«çš„æ˜¯ç§é’¥</strong>ã€‚</li><li><strong>VPS æ–‡ä»¶é‡Œå¡«çš„æ˜¯å…¬é’¥</strong>ã€‚</li></ol><p>è¿™ä¸€æ¬¡ï¼ŒGitHub Actions <strong>ä¸€å®šä¼šå˜ç»¿</strong>ã€‚ç°åœ¨å¼€å§‹æ“ä½œå§ï¼</p><h2 id=rsync-vs-ftp>rsync vs FTP</h2><p>ç›¸æ¯”äºä¼ ç»Ÿçš„ FTP æˆ–ç®€å•çš„æ–‡ä»¶æ‹·è´ï¼Œ<strong>rsync (Remote Sync)</strong> åœ¨ç½‘ç«™éƒ¨ç½²å’Œæ–‡ä»¶åŒæ­¥ä¸­å…·æœ‰å‹å€’æ€§çš„ä¼˜åŠ¿ã€‚å¯¹äºç»´æŠ¤åƒ <strong>bore.vip</strong> è¿™æ ·åŸºäº Hugo çš„é™æ€åšå®¢ï¼Œrsync æ˜¯ç›®å‰å…¬è®¤çš„æœ€ä¼˜é€‰æ–¹æ¡ˆã€‚</p><p>ä»¥ä¸‹æ˜¯ rsync çš„æ ¸å¿ƒä¼˜åŠ¿ï¼š</p><hr><h3 id=æé€Ÿçš„å¢é‡ä¼ è¾“-delta-transfer-algorithm>æé€Ÿçš„å¢é‡ä¼ è¾“ (Delta-transfer Algorithm)</h3><p>è¿™æ˜¯ rsync çš„æ€æ‰‹é”ã€‚</p><ul><li><strong>æŒ‰éœ€æ›´æ–°</strong>ï¼šå®ƒåªåŒæ­¥æºæ–‡ä»¶å’Œç›®æ ‡æ–‡ä»¶ä¹‹é—´æœ‰å·®å¼‚çš„éƒ¨åˆ†ã€‚å¦‚æœä½ åªæ˜¯ä¿®æ”¹äº†åšå®¢çš„ä¸€è¡Œå­—ï¼Œå®ƒåªä¼šä¼ è¾“é‚£å‡ ä¸ªå­—èŠ‚ï¼Œè€Œä¸æ˜¯é‡ä¼ æ•´ä¸ª HTML æ–‡ä»¶ã€‚</li><li><strong>èŠ‚çœå¸¦å®½</strong>ï¼šç”±äºåªä¼ å·®å¼‚æ•°æ®ï¼Œéƒ¨ç½²æ—¶é—´é€šå¸¸èƒ½ä»åˆ†é’Ÿçº§ç¼©çŸ­åˆ°ç§’çº§ï¼Œç‰¹åˆ«é€‚åˆæ–‡ä»¶ä¼—å¤šçš„é™æ€ç½‘ç«™ã€‚</li></ul><h3 id=é•œåƒä¸€è‡´æ€§ä¸è‡ªåŠ¨æ¸…ç†>é•œåƒä¸€è‡´æ€§ä¸è‡ªåŠ¨æ¸…ç†</h3><p>é€šè¿‡ <code>--delete</code> å‚æ•°ï¼Œrsync å¯ä»¥ç¡®ä¿ç›®æ ‡æ–‡ä»¶å¤¹ï¼ˆVPSï¼‰ä¸æºæ–‡ä»¶å¤¹ï¼ˆGitHub å…¬å…±ç›®å½•ï¼‰å®Œå…¨ä¸€è‡´ã€‚</p><ul><li><strong>è‡ªåŠ¨åˆ é™¤æ®‹ç•™</strong>ï¼šå¦‚æœä½ åœ¨ Hugo ä¸­åˆ é™¤äº†ä¸€ç¯‡æ–‡ç« æˆ–ä¿®æ”¹äº† URLï¼Œrsync ä¼šè‡ªåŠ¨åˆ é™¤æœåŠ¡å™¨ä¸Šè¿‡æ—¶çš„æ—§æ–‡ä»¶ã€‚</li><li><strong>é˜²æ­¢å†—ä½™</strong>ï¼šè¿™é¿å…äº†æœåŠ¡å™¨å­˜å‚¨ç©ºé—´è¢«ä¸å†ä½¿ç”¨çš„æ—§é™æ€èµ„æºå¡«æ»¡ã€‚</li></ul><h3 id=çµæ´»çš„æ–‡ä»¶å±æ€§ä¿ç•™>çµæ´»çš„æ–‡ä»¶å±æ€§ä¿ç•™</h3><p>åœ¨è¿ç§»æˆ–åŒæ­¥æ—¶ï¼Œrsync å¯ä»¥ç²¾å‡†ä¿ç•™æ–‡ä»¶çš„å…ƒæ•°æ®ã€‚</p><ul><li><strong>æƒé™ä¸æ—¶é—´æˆ³</strong>ï¼šä½¿ç”¨ <code>-a</code> (Archive) å‚æ•°ï¼Œå¯ä»¥ä¸€é”®ä¿ç•™æ–‡ä»¶çš„æƒé™ï¼ˆPermissionsï¼‰ã€æ‰€æœ‰è€…ï¼ˆOwnerï¼‰å’Œä¿®æ”¹æ—¶é—´ï¼ˆTimestampsï¼‰ã€‚</li><li><strong>è½¯é“¾æ¥å¤„ç†</strong>ï¼šå®ƒèƒ½æ­£ç¡®å¤„ç†ç¬¦å·é“¾æ¥ï¼Œè€Œ FTP å¾€å¾€ä¼šåœ¨è¿™æ–¹é¢å‡ºé”™ã€‚</li></ul><h3 id=é«˜å®‰å…¨æ€§ä¸åŠ å¯†ä¼ è¾“>é«˜å®‰å…¨æ€§ä¸åŠ å¯†ä¼ è¾“</h3><p>rsync é€šå¸¸è¿è¡Œåœ¨ SSH åè®®ä¹‹ä¸Šï¼ˆå³ <strong>rsync over SSH</strong>ï¼‰ã€‚</p><ul><li><strong>åŠ å¯†é€šé“</strong>ï¼šæ‰€æœ‰çš„æ–‡ä»¶ä¼ è¾“å’Œè®¤è¯è¿‡ç¨‹éƒ½ç»è¿‡ SSH åŠ å¯†ï¼Œé˜²æ­¢å¯†ç æˆ–æ•°æ®åœ¨å…¬ç½‘è¢«çªƒå¬ã€‚</li><li><strong>å…å¯†éƒ¨ç½²</strong>ï¼šé…åˆ SSH Keyï¼ˆå¦‚ <code>SERVER_SSH_KEY</code>ï¼‰ï¼Œå¯ä»¥å®ç° GitHub Actions åˆ° VPS çš„å…¨è‡ªåŠ¨å®‰å…¨ç™»å½•ï¼Œæ— éœ€åœ¨ä»£ç ä¸­æ˜æ–‡æš´éœ²å¯†ç ã€‚</li></ul><hr><h3 id=rsync-vs-ftp-ä¼˜åŠ¿å¯¹æ¯”è¡¨>rsync vs FTP ä¼˜åŠ¿å¯¹æ¯”è¡¨</h3><table><thead><tr><th>ç‰¹æ€§</th><th>rsync (æ¨è)</th><th>FTP (ä¸æ¨è)</th></tr></thead><tbody><tr><td><strong>ä¼ è¾“æ–¹å¼</strong></td><td><strong>å¢é‡åŒæ­¥</strong>ï¼Œåªä¼ å˜åŠ¨éƒ¨åˆ†</td><td><strong>å…¨é‡ä¼ è¾“</strong>ï¼Œæ¯æ¬¡éƒ½è¦é‡ä¼ æ•´ä¸ªæ–‡ä»¶</td></tr><tr><td><strong>é€Ÿåº¦</strong></td><td><strong>æå¿«</strong>ï¼Œå°¤å…¶æ˜¯æ–‡ä»¶å¤šã€æ”¹åŠ¨å°‘æ—¶</td><td><strong>è¾ƒæ…¢</strong>ï¼Œä¸”å»ºç«‹è¿æ¥å¼€é”€å¤§</td></tr><tr><td><strong>å®‰å…¨æ€§</strong></td><td><strong>é«˜</strong>ï¼ŒåŸºäº SSH åŠ å¯†</td><td><strong>ä½</strong>ï¼Œé€šå¸¸æ˜¯æ˜æ–‡ä¼ è¾“ï¼Œä¸å®‰å…¨</td></tr><tr><td><strong>ä¸€è‡´æ€§</strong></td><td>å®Œç¾ä¿æŒé•œåƒï¼Œæ”¯æŒ<strong>è‡ªåŠ¨åˆ é™¤</strong>æ—§æ–‡ä»¶</td><td>éœ€æ‰‹åŠ¨åˆ é™¤æœåŠ¡å™¨ä¸Šçš„è¿‡æ—¶æ–‡ä»¶</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>è‡ªåŠ¨åŒ–éƒ¨ç½²ã€æœåŠ¡å™¨å¤‡ä»½</td><td>é›¶æ˜Ÿçš„å•æ–‡ä»¶ä¸Šä¼ </td></tr></tbody></table><hr><h3 id=æ‚¨ç°åœ¨çš„éƒ¨ç½²çŠ¶æ€>æ‚¨ç°åœ¨çš„éƒ¨ç½²çŠ¶æ€</h3><p>æ‚¨å·²ç»æˆåŠŸä¿®å¤äº†æœåŠ¡å™¨ä¸Šçš„æƒé™é—®é¢˜å¹¶å®‰è£…äº† rsync è½¯ä»¶ã€‚ç°åœ¨æ‚¨çš„ <strong>gh_pages.yml</strong> å·¥ä½œæµå·²ç»åˆ©ç”¨äº† rsync çš„è¿™äº›ä¼˜åŠ¿ï¼šé€šè¿‡åŠ å¯†çš„ <code>SERVER_SSH_KEY</code> å®ç°äº†ç§’çº§çš„å¢é‡åŒæ­¥ï¼Œå¹¶èƒ½è‡ªåŠ¨æ¸…ç†æ—§æ–‡ç« äº§ç”Ÿçš„å†—ä½™æ–‡ä»¶ã€‚</p><p><strong>æ—¢ç„¶ rsync å·²ç»é€šäº†ï¼Œæ‚¨æƒ³äº†è§£å¦‚ä½•åˆ©ç”¨ rsync é…åˆè„šæœ¬å®ç°åšå®¢çš„â€œä¸€é”®å¤‡ä»½â€åˆ°æœ¬åœ°ç”µè„‘å—ï¼Ÿ</strong></p><h2 id=æœ¬åœ°æ“ä½œ>æœ¬åœ°æ“ä½œ</h2><p>éƒ¨ç½²hugoåˆ°æœåŠ¡å™¨ï¼Œç½‘ä¸Šä¸€èˆ¬æ–¹æ³•æ˜¯åˆ©ç”¨<code>git hook</code>ã€‚è¿™é‡Œè®°å½•ä¸€ç§æ–°çš„æ–¹æ³•ï¼šåˆ©ç”¨FTP Deploy GitHub Actionsè‡ªåŠ¨éƒ¨ç½²hugoåˆ°Centos8æœåŠ¡å™¨ã€‚ä»Šååªè¦æäº¤æºç åˆ°<code>github</code>ä»“åº“ï¼Œå‰©ä¸‹çš„äº‹å°±äº¤ç»™<code>GitHub Actions</code>äº†ã€‚</p><p>å‚è€ƒï¼š<a class=link href=/archives/hugo-install-on-coding-and-gitee/#%e6%9c%ac%e5%9c%b0%e6%93%8d%e4%bd%9c>hugoéƒ¨ç½²åˆ°coding&amp;gitee&å¤‡ä»½æºç -æœ¬åœ°æ“ä½œ</a></p><h2 id=æœåŠ¡å™¨æ“ä½œ>æœåŠ¡å™¨æ“ä½œ</h2><h3 id=å®‰è£…-nginx>å®‰è£… Nginx</h3><p>å‡†å¤‡å·¥ä½œï¼šå¦‚æœæœåŠ¡å™¨ç«¯å£ä¸æ˜¯22ï¼Œå…ˆè¦æ›´æ”¹SSHç«¯å£ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /etc/ssh/sshd_config
</span></span><span class=line><span class=cl>port <span class=m>22</span>
</span></span></code></pre></td></tr></table></div></div><p>ç„¶åé‡å¯ç”Ÿæ•ˆã€‚</p><p>é¦–å…ˆï¼Œåœ¨æœåŠ¡å™¨ä¸Šå®‰è£…<code>nginx</code>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>yum update -y
</span></span><span class=line><span class=cl>yum install nginx -y
</span></span></code></pre></td></tr></table></div></div><p>å¦‚æœæ˜¯centos 7ï¼Œå…ˆè¦å®‰è£…å®‰è£…epelï¼š<code>yum install epel-release</code>ï¼Œæ‰èƒ½å®‰è£…nginxã€‚</p><h3 id=å¯åŠ¨-nginx>å¯åŠ¨ Nginx</h3><p>Nginx å®‰è£…å®Œæˆåéœ€è¦æ‰‹åŠ¨å¯åŠ¨ï¼Œå¯åŠ¨Nginxå¹¶è®¾ç½®å¼€æœºè‡ªå¯ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>systemctl start nginx
</span></span><span class=line><span class=cl>systemctl <span class=nb>enable</span> nginx
</span></span></code></pre></td></tr></table></div></div><p>å…³é—­é˜²ç«å¢™ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>systemctl stop firewalld.service
</span></span><span class=line><span class=cl>systemctl disable firewalld.service 
</span></span></code></pre></td></tr></table></div></div><p>é…ç½®å®Œæˆåï¼Œè®¿é—®ä½¿ç”¨æµè§ˆå™¨æœåŠ¡å™¨ ip ï¼Œå¦‚æœèƒ½çœ‹åˆ°ä»¥ä¸‹ç•Œé¢ï¼Œè¡¨ç¤ºè¿è¡ŒæˆåŠŸã€‚</p><h3 id=åˆ›å»ºæ–°çš„ç½‘ç«™ç›®å½•>åˆ›å»ºæ–°çš„ç½‘ç«™ç›®å½•</h3><p><strong>ä¸ºäº†å›¾æ–¹ä¾¿ï¼Œå¯ä»¥ç›´æ¥å°†ç½‘ç«™ç›®å½•æ”¹ä¸ºFTPå®¶ç›®å½•ã€‚</strong></p><p>ä¸ºäº†æ–¹ä¾¿æœŸé—´ï¼Œæˆ‘ä»¬åœ¨ <code>/var/www/</code> ç›®å½•ä¸‹ä¸ºæ¯ä¸ªç«™ç‚¹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo mkdir -p /var/www/blog
</span></span><span class=line><span class=cl>sudo chown -R <span class=nv>$USER</span>:<span class=nv>$USER</span> /var/www/blog
</span></span><span class=line><span class=cl>sudo chmod -R <span class=m>755</span> /var/www
</span></span></code></pre></td></tr></table></div></div><ul><li>è§£å†³Nginxå‡ºç°403 forbidden</li></ul><p>å¦‚æœåé¢åˆ©ç”¨FTPä¸Šä¼ ç½‘é¡µåï¼Œå‡ºç°<code>403 Forbidden</code>ï¼Œè§£å†³æ–¹æ³•ï¼š</p><p>å‡è®¾ç½‘ç«™æ ¹ç›®å½•åœ¨<code>/var/www/blog/</code>ï¼Œåˆ™æ‰§è¡Œï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>chmod -R <span class=m>777</span> /var/www
</span></span></code></pre></td></tr></table></div></div><h3 id=é…ç½®-nginx>é…ç½® nginx</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /etc/nginx/conf.d/blog.conf
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>server <span class=o>{</span>
</span></span><span class=line><span class=cl>  listen  <span class=m>80</span> <span class=p>;</span>
</span></span><span class=line><span class=cl>  listen <span class=o>[</span>::<span class=o>]</span>:80<span class=p>;</span>
</span></span><span class=line><span class=cl>  root /var/www/blog<span class=p>;</span>
</span></span><span class=line><span class=cl>  server_name bore.vip www.bore.vip<span class=p>;</span>
</span></span><span class=line><span class=cl>  access_log  /var/log/nginx/hexo_access.log<span class=p>;</span>
</span></span><span class=line><span class=cl>  error_log   /var/log/nginx/hexo_error.log<span class=p>;</span>
</span></span><span class=line><span class=cl>  error_page <span class=nv>404</span> <span class=o>=</span>  /404.html<span class=p>;</span>
</span></span><span class=line><span class=cl>  location ~* ^.+<span class=se>\.</span><span class=o>(</span>ico<span class=p>|</span>gif<span class=p>|</span>jpg<span class=p>|</span>jpeg<span class=p>|</span>png<span class=o>)</span>$ <span class=o>{</span>
</span></span><span class=line><span class=cl>    root /var/www/blog<span class=p>;</span>
</span></span><span class=line><span class=cl>    access_log   off<span class=p>;</span>
</span></span><span class=line><span class=cl>    expires      1d<span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  location ~* ^.+<span class=se>\.</span><span class=o>(</span>css<span class=p>|</span>js<span class=p>|</span>txt<span class=p>|</span>xml<span class=p>|</span>swf<span class=p>|</span>wav<span class=o>)</span>$ <span class=o>{</span>
</span></span><span class=line><span class=cl>    root /var/www/blog<span class=p>;</span>
</span></span><span class=line><span class=cl>    access_log   off<span class=p>;</span>
</span></span><span class=line><span class=cl>    expires      10m<span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  location / <span class=o>{</span>
</span></span><span class=line><span class=cl>    root /var/www/blog<span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>(</span>-f <span class=nv>$request_filename</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    rewrite ^/<span class=o>(</span>.*<span class=o>)</span>$  /<span class=nv>$1</span> break<span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  location /nginx_status <span class=o>{</span>
</span></span><span class=line><span class=cl>    stub_status on<span class=p>;</span>
</span></span><span class=line><span class=cl>    access_log off<span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>é‡å¯ Nginx æœåŠ¡å™¨ï¼Œä½¿æœåŠ¡å™¨è®¾å®šç”Ÿæ•ˆï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl restart nginx
</span></span></code></pre></td></tr></table></div></div><h3 id=é…ç½®sslè¯ä¹¦>é…ç½®sslè¯ä¹¦</h3><blockquote><p>æ›´å¤šæŸ¥çœ‹ï¼š<a class=link href=/archives/58fed3fc/>Nginx é…ç½® ssl è¯ä¹¦</a></p></blockquote><p>è¿™é‡Œè®°ä¸‹æ€æ ·æ·»åŠ  Letâ€™s Encrypt å…è´¹è¯ä¹¦ã€‚ï¼ˆè²Œä¼¼åªæœ‰ä¸Šä¼ äº†æ–‡ä»¶åˆ°ç½‘ç«™ç›®å½•ï¼Œæ‰èƒ½ç”³è¯·è¯ä¹¦æˆåŠŸã€‚ï¼‰å¦‚æœæƒ³å¯ç”¨é˜¿é‡Œè¯ä¹¦ï¼Œå¯æŸ¥çœ‹ï¼š<a class=link href=/archives/enable-ssl-on-nginx/#%e5%90%af%e7%94%a8%e9%98%bf%e9%87%8c%e5%85%8d%e8%b4%b9%e8%af%81%e4%b9%a6>å¯ç”¨é˜¿é‡Œå…è´¹è¯ä¹¦</a></p><h4 id=å®‰è£…certbot>å®‰è£…Certbot</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>yum install epel-release -y
</span></span><span class=line><span class=cl>yum install certbot -y
</span></span></code></pre></td></tr></table></div></div><p>ç„¶åæ‰§è¡Œï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>certbot certonly --webroot -w /var/www/blog -d bore.vip -m 455343442@qq.com --agree-tos
</span></span></code></pre></td></tr></table></div></div><h4 id=é…ç½®nginx>é…ç½®Nginx</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /etc/nginx/conf.d/blog.conf
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>server <span class=o>{</span>
</span></span><span class=line><span class=cl>    listen 80<span class=p>;</span>
</span></span><span class=line><span class=cl>    server_name bore.vip www.bore.vip<span class=p>;</span>
</span></span><span class=line><span class=cl>    rewrite ^<span class=o>(</span>.*<span class=o>)</span>$ https://<span class=nv>$server_name$1</span> permanent<span class=p>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>server <span class=o>{</span>
</span></span><span class=line><span class=cl>  listen 443<span class=p>;</span>
</span></span><span class=line><span class=cl>  root /var/www/blog<span class=p>;</span>
</span></span><span class=line><span class=cl>  server_name bore.vip www.bore.vip<span class=p>;</span>
</span></span><span class=line><span class=cl>  ssl on<span class=p>;</span>
</span></span><span class=line><span class=cl>  ssl_certificate /etc/letsencrypt/live/bore.vip/fullchain.pem<span class=p>;</span>
</span></span><span class=line><span class=cl>  ssl_certificate_key /etc/letsencrypt/live/bore.vip/privkey.pem<span class=p>;</span>
</span></span><span class=line><span class=cl>  ssl_session_timeout 5m<span class=p>;</span>
</span></span><span class=line><span class=cl>  ssl_protocols TLSv1 TLSv1.1 TLSv1.2<span class=p>;</span>
</span></span><span class=line><span class=cl>  ssl_ciphers ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP<span class=p>;</span>
</span></span><span class=line><span class=cl>  ssl_prefer_server_ciphers on<span class=p>;</span>
</span></span><span class=line><span class=cl>  access_log  /var/log/nginx/hexo_access.log<span class=p>;</span>
</span></span><span class=line><span class=cl>  error_log   /var/log/nginx/hexo_error.log<span class=p>;</span>
</span></span><span class=line><span class=cl>  error_page <span class=nv>404</span> <span class=o>=</span>  /404.html<span class=p>;</span>
</span></span><span class=line><span class=cl>  location ~* ^.+<span class=se>\.</span><span class=o>(</span>ico<span class=p>|</span>gif<span class=p>|</span>jpg<span class=p>|</span>jpeg<span class=p>|</span>png<span class=o>)</span>$ <span class=o>{</span>
</span></span><span class=line><span class=cl>    root /var/www/blog<span class=p>;</span>
</span></span><span class=line><span class=cl>    access_log   off<span class=p>;</span>
</span></span><span class=line><span class=cl>    expires      1d<span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  location ~* ^.+<span class=se>\.</span><span class=o>(</span>css<span class=p>|</span>js<span class=p>|</span>txt<span class=p>|</span>xml<span class=p>|</span>swf<span class=p>|</span>wav<span class=o>)</span>$ <span class=o>{</span>
</span></span><span class=line><span class=cl>    root /var/www/blog<span class=p>;</span>
</span></span><span class=line><span class=cl>    access_log   off<span class=p>;</span>
</span></span><span class=line><span class=cl>    expires      10m<span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  location / <span class=o>{</span>
</span></span><span class=line><span class=cl>    root /var/www/blog<span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>(</span>-f <span class=nv>$request_filename</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    rewrite ^/<span class=o>(</span>.*<span class=o>)</span>$  /<span class=nv>$1</span> break<span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  location /nginx_status <span class=o>{</span>
</span></span><span class=line><span class=cl>    stub_status on<span class=p>;</span>
</span></span><span class=line><span class=cl>    access_log off<span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>é‡å¯Nginxç”Ÿæ•ˆï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>systemctl restart nginx
</span></span></code></pre></td></tr></table></div></div><h4 id=è¯ä¹¦è‡ªåŠ¨æ›´æ–°>è¯ä¹¦è‡ªåŠ¨æ›´æ–°</h4><p>ç”±äºè¿™ä¸ªè¯ä¹¦çš„æ—¶æ•ˆåªæœ‰ 90 å¤©ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®è‡ªåŠ¨æ›´æ–°çš„åŠŸèƒ½ï¼Œå¸®æˆ‘ä»¬è‡ªåŠ¨æ›´æ–°è¯ä¹¦çš„æ—¶æ•ˆã€‚é¦–å…ˆå…ˆåœ¨å‘½ä»¤è¡Œæ¨¡æ‹Ÿè¯ä¹¦æ›´æ–°ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>certbot renew --dry-run
</span></span></code></pre></td></tr></table></div></div><p>æ¨¡æ‹Ÿæ›´æ–°æˆåŠŸçš„æ•ˆæœå¦‚ä¸‹(ç•¥)</p><p>åœ¨æ— æ³•ç¡®è®¤ä½ çš„ nginx é…ç½®æ˜¯å¦æ­£ç¡®æ—¶ï¼Œä¸€å®šè¦è¿è¡Œæ¨¡æ‹Ÿæ›´æ–°å‘½ä»¤ï¼Œç¡®ä¿certbotå’ŒæœåŠ¡å™¨é€šè®¯æ­£å¸¸ã€‚ä½¿ç”¨ crontab -e çš„å‘½ä»¤æ¥å¯ç”¨è‡ªåŠ¨ä»»åŠ¡ï¼Œå‘½ä»¤è¡Œï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>crontab -e
</span></span></code></pre></td></tr></table></div></div><p>æ·»åŠ é…ç½®ï¼šï¼ˆæ¯éš”ä¸¤ä¸ªæœˆå‡Œæ™¨2:30è‡ªåŠ¨æ‰§è¡Œè¯ä¹¦æ›´æ–°æ“ä½œï¼‰åä¿å­˜é€€å‡ºã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=m>30</span> <span class=m>2</span> * */2 * /usr/bin/certbot renew --quiet <span class=o>&amp;&amp;</span> /bin/systemctl restart nginx
</span></span></code></pre></td></tr></table></div></div><p>æŸ¥çœ‹è¯ä¹¦æœ‰æ•ˆæœŸçš„å‘½ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>openssl x509 -noout -dates -in /etc/letsencrypt/live/bore.vip/cert.pem
</span></span></code></pre></td></tr></table></div></div><h3 id=å®‰è£…vsftpd>å®‰è£…vsftpd</h3><p>DebianæŸ¥çœ‹ï¼š<a class=link href=/archives/9eb70758/#Debian%e5%ae%89%e8%a3%85vsftpd>Debianå®‰è£…vsftpd</a>ï¼ŒCentoså‚è€ƒä¸‹é¢çš„ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo yum install vsftpd -y
</span></span></code></pre></td></tr></table></div></div><p>å®‰è£…è½¯ä»¶åŒ…åï¼Œå¯åŠ¨vsftpdï¼Œå¹¶ä½¿å…¶èƒ½å¤Ÿåœ¨å¼•å¯¼æ—¶è‡ªåŠ¨å¯åŠ¨ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl start vsftpd
</span></span><span class=line><span class=cl>sudo systemctl <span class=nb>enable</span> vsftpd
</span></span></code></pre></td></tr></table></div></div><h3 id=é…ç½®vsftpd>é…ç½®vsftpd</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /etc/vsftpd/vsftpd.conf
</span></span></code></pre></td></tr></table></div></div><p>åœ¨<code>userlist_enable=YES</code>ä¸‹é¢ï¼ŒåŠ ä¸Šï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>userlist_file</span><span class=o>=</span>/etc/vsftpd/user_list
</span></span><span class=line><span class=cl><span class=nv>userlist_deny</span><span class=o>=</span>NO
</span></span></code></pre></td></tr></table></div></div><h3 id=åˆ›å»ºftpç”¨æˆ·>åˆ›å»ºFTPç”¨æˆ·</h3><p>åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·ï¼Œåä¸ºadmin:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo adduser admin
</span></span><span class=line><span class=cl>sudo passwd admin
</span></span></code></pre></td></tr></table></div></div><p>å°†ç”¨æˆ·æ·»åŠ åˆ°å…è®¸çš„FTPç”¨æˆ·åˆ—è¡¨ä¸­ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;admin&#34;</span> <span class=p>|</span> sudo tee -a /etc/vsftpd/user_list
</span></span></code></pre></td></tr></table></div></div><p>è®¾ç½®æ­£ç¡®çš„æƒé™ï¼ˆä½¿ftpç”¨æˆ·å¯ä»¥ä¸Šä¼ ç½‘ç«™æ–‡ä»¶åˆ°ç›¸åº”ç›®å½•ï¼‰ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo chmod <span class=m>755</span> /var/www/blog
</span></span><span class=line><span class=cl>sudo chown -R admin: /var/www/blog
</span></span></code></pre></td></tr></table></div></div><h3 id=å…³é—­é˜²ç«å¢™>å…³é—­é˜²ç«å¢™</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>systemctl stop firewalld.service
</span></span><span class=line><span class=cl>systemctl disable firewalld.service 
</span></span></code></pre></td></tr></table></div></div><h3 id=é‡å¯vsftpdæœåŠ¡>é‡å¯vsftpdæœåŠ¡</h3><p>ä¿å­˜æ–‡ä»¶å¹¶é‡æ–°å¯åŠ¨vsftpdæœåŠ¡ï¼Œä»¥ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl restart vsftpd
</span></span></code></pre></td></tr></table></div></div><p>æ›´å¤šæœ‰å…³ftpéƒ¨åˆ†å¯æŸ¥çœ‹ï¼š<a class=link href=/archives/centos8-enable-ftp/>centos8æ­å»ºftpæœåŠ¡å™¨</a></p><h2 id=å…è®¸rootç™»å½•ftp>å…è®¸rootç™»å½•FTP</h2><ol><li>å°†<code>root</code>æ·»åŠ åˆ°å…è®¸çš„FTPç”¨æˆ·åˆ—è¡¨ä¸­ï¼š</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;root&#34;</span> <span class=p>|</span> sudo tee -a /etc/vsftpd/user_list
</span></span></code></pre></td></tr></table></div></div><ol start=2><li>ä¿®æ”¹/etc/vsftpd/user_listå’Œ/etc/vsftpd/ftpusersä¸¤ä¸ªè®¾ç½®æ–‡ä»¶è„šæœ¬ï¼Œå°†rootè´¦æˆ·å‰åŠ ä¸Š#å·å˜ä¸ºæ³¨é‡Šï¼ˆä½¿</li></ol><p>rootè´¦æˆ·ä»ç¦æ­¢ç™»å½•çš„ç”¨æˆ·åˆ—è¡¨ä¸­æ’é™¤ï¼‰ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /etc/vsftpd/user_list
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /etc/vsftpd/ftpusers
</span></span></code></pre></td></tr></table></div></div><ol start=3><li>é‡å¯vsftpdæœåŠ¡</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl restart vsftpd
</span></span></code></pre></td></tr></table></div></div><h2 id=githubæ“ä½œ>Githubæ“ä½œ</h2><h3 id=é…ç½®ftp_mirror_password>é…ç½®<code>FTP_MIRROR_PASSWORD</code></h3><p>ç‚¹å‡»åšå®¢ä»“åº“çš„Settings->Secrets->Add a new secretï¼ŒNameå¡«å†™<code>FTP_MIRROR_PASSWORD</code>ï¼ŒValueå¡«å†™ç”¨æˆ·å¯†ç ã€‚</p><h3 id=é…ç½®-github-actions>é…ç½® Github actions</h3><p>åœ¨åšå®¢æ ¹ç›®å½•æ–°å»º<code>.github/workflows/gh_pages.yml</code>æ–‡ä»¶ã€‚ä»£ç ï¼ˆ<strong>ä¸æ·»åŠ ç¼“å­˜</strong>ï¼‰å¦‚ä¸‹ï¼šæœ€å¥½ä½¿ç”¨ä¸‹é¢æ·»åŠ äº†ç¼“å­˜çš„ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>name: GitHub Page Deploy
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>on:
</span></span><span class=line><span class=cl>  push:
</span></span><span class=line><span class=cl>    branches:
</span></span><span class=line><span class=cl>      - develop
</span></span><span class=line><span class=cl>jobs:
</span></span><span class=line><span class=cl>  build-deploy:
</span></span><span class=line><span class=cl>    runs-on: ubuntu-latest
</span></span><span class=line><span class=cl>    steps:
</span></span><span class=line><span class=cl>      - name: Checkout master
</span></span><span class=line><span class=cl>        uses: actions/checkout@v2.3.4
</span></span><span class=line><span class=cl>        with:
</span></span><span class=line><span class=cl>          submodules: <span class=nb>true</span>  <span class=c1># Fetch Hugo themes (true OR recursive)</span>
</span></span><span class=line><span class=cl>          fetch-depth: <span class=m>0</span>    <span class=c1># Fetch all history for .GitInfo and .Lastmod</span>
</span></span><span class=line><span class=cl>      - name: Setup Hugo
</span></span><span class=line><span class=cl>        uses: peaceiris/actions-hugo@v2.5.0
</span></span><span class=line><span class=cl>        with:
</span></span><span class=line><span class=cl>          hugo-version: <span class=s1>&#39;latest&#39;</span>
</span></span><span class=line><span class=cl>          extended: <span class=nb>true</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      - name: Build Hugo
</span></span><span class=line><span class=cl>        run: hugo --minify
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      - name: Deploy Hugo to gh-pages
</span></span><span class=line><span class=cl>        uses: peaceiris/actions-gh-pages@v3.8.0
</span></span><span class=line><span class=cl>        with:
</span></span><span class=line><span class=cl>          github_token: <span class=si>${</span><span class=p>{ secrets.GITHUB_TOKEN </span><span class=si>}</span><span class=o>}</span>
</span></span><span class=line><span class=cl>          PUBLISH_BRANCH: master
</span></span><span class=line><span class=cl>          PUBLISH_DIR: ./public
</span></span><span class=line><span class=cl>        <span class=c1># cname:</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>      - name: Deploy Hugo to Server
</span></span><span class=line><span class=cl>        uses: SamKirkland/FTP-Deploy-Action@4.2.0
</span></span><span class=line><span class=cl>        with:
</span></span><span class=line><span class=cl>          server: 104.224.191.88
</span></span><span class=line><span class=cl>          username: admin
</span></span><span class=line><span class=cl>          password: <span class=si>${</span><span class=p>{ secrets.FTP_MIRROR_PASSWORD </span><span class=si>}</span><span class=o>}</span>
</span></span><span class=line><span class=cl>          local-dir: ./public/
</span></span><span class=line><span class=cl>          server-dir: /var/www/blog/
</span></span></code></pre></td></tr></table></div></div><p><strong>æ·»åŠ ç¼“å­˜ï¼š</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>GitHub Page Deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>develop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>build-deploy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Checkout master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v2.3.4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>submodules</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>  </span><span class=c># Fetch Hugo themes (true OR recursive)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>fetch-depth</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>    </span><span class=c># Fetch all history for .GitInfo and .Lastmod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Setup Hugo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>peaceiris/actions-hugo@v2.5.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>hugo-version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;latest&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>extended</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Cache resources</span><span class=w> </span><span class=c># ç¼“å­˜ resource æ–‡ä»¶åŠ å¿«ç”Ÿæˆé€Ÿåº¦</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/cache@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>resources</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=c># æ£€æŸ¥ç…§ç‰‡æ–‡ä»¶å˜åŒ–</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>${{ runner.os }}-hugocache-${{ hashFiles(&#39;content/**/*&#39;) }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>restore-keys</span><span class=p>:</span><span class=w> </span><span class=l>${{ runner.os }}-hugocache-          </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Build Hugo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>hugo --minify --gc</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy Hugo to gh-pages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>peaceiris/actions-gh-pages@v3.8.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>github_token</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITHUB_TOKEN }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>PUBLISH_BRANCH</span><span class=p>:</span><span class=w> </span><span class=l>master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>PUBLISH_DIR</span><span class=p>:</span><span class=w> </span><span class=l>./public</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># cname:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy Hugo to Server</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>SamKirkland/FTP-Deploy-Action@4.3.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>server</span><span class=p>:</span><span class=w> </span><span class=m>104.224.191.88</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>username</span><span class=p>:</span><span class=w> </span><span class=l>root</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>password</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.FTP_MIRROR_PASSWORD }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>local-dir</span><span class=p>:</span><span class=w> </span><span class=l>./public/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>server-dir</span><span class=p>:</span><span class=w> </span><span class=l>/usr/share/nginx/html/</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>ç¬¬ä¸‰æ–¹ï¼š</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>name: GitHub Page
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>on:
</span></span><span class=line><span class=cl>    push:
</span></span><span class=line><span class=cl>        branches:
</span></span><span class=line><span class=cl>            - master <span class=c1># master æ›´æ–°è§¦å‘</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>jobs:
</span></span><span class=line><span class=cl>    deploy:
</span></span><span class=line><span class=cl>        runs-on: ubuntu-18.04
</span></span><span class=line><span class=cl>        steps:
</span></span><span class=line><span class=cl>            - uses: actions/checkout@v2
</span></span><span class=line><span class=cl>              with:
</span></span><span class=line><span class=cl>                  submodules: <span class=nb>true</span> <span class=c1># clone submodules</span>
</span></span><span class=line><span class=cl>                  fetch-depth: <span class=m>0</span> <span class=c1># å…‹éš†æ‰€æœ‰å†å²ä¿¡æ¯</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            - name: Setup Hugo
</span></span><span class=line><span class=cl>              uses: peaceiris/actions-hugo@v2
</span></span><span class=line><span class=cl>              with:
</span></span><span class=line><span class=cl>                  hugo-version: <span class=s2>&#34;0.87.0&#34;</span> <span class=c1># Hugo ç‰ˆæœ¬</span>
</span></span><span class=line><span class=cl>                  extended: <span class=nb>true</span> <span class=c1># hugoæ’ä»¶ç‰ˆ Stackä¸»é¢˜ å¿…é¡»å¯ç”¨</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            - name: Cache resources <span class=c1># ç¼“å­˜ resource æ–‡ä»¶åŠ å¿«ç”Ÿæˆé€Ÿåº¦</span>
</span></span><span class=line><span class=cl>              uses: actions/cache@v2
</span></span><span class=line><span class=cl>              with:
</span></span><span class=line><span class=cl>                  path: resources
</span></span><span class=line><span class=cl>                  <span class=c1># æ£€æŸ¥ç…§ç‰‡æ–‡ä»¶å˜åŒ–</span>
</span></span><span class=line><span class=cl>                  key: <span class=si>${</span><span class=p>{ runner.os </span><span class=si>}</span><span class=o>}</span>-hugocache-<span class=si>${</span><span class=p>{ hashFiles(</span><span class=s1>&#39;content/**/*&#39;</span><span class=p>) </span><span class=si>}</span><span class=o>}</span>
</span></span><span class=line><span class=cl>                  restore-keys: <span class=si>${</span><span class=p>{ runner.os </span><span class=si>}</span><span class=o>}</span>-hugocache-
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            - name: Build <span class=c1># ç”Ÿæˆç½‘é¡µ åˆ é™¤æ— ç”¨ resource æ–‡ä»¶ å‰Šå‡ç©ºè¡Œ</span>
</span></span><span class=line><span class=cl>              run: hugo --minify --gc
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            - name: Deploy <span class=c1># éƒ¨ç½²åˆ° GitHub Page</span>
</span></span><span class=line><span class=cl>              uses: peaceiris/actions-gh-pages@v3
</span></span><span class=line><span class=cl>              with:
</span></span><span class=line><span class=cl>                  <span class=c1># å¦‚æœåœ¨åŒä¸€ä¸ªä»“åº“ä¸‹ä½¿ç”¨è¯·ä½¿ç”¨ github_token å¹¶æ³¨é‡Š deploy_key</span>
</span></span><span class=line><span class=cl>                  <span class=c1># github_token: ${{ secrets.GITHUB_TOKEN }}</span>
</span></span><span class=line><span class=cl>                  deploy_key: <span class=si>${</span><span class=p>{ secrets.ACTIONS_DEPLOY_KEY </span><span class=si>}</span><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                  <span class=c1># å¦‚æœåœ¨åŒä¸€ä¸ªä»“åº“è¯·æ³¨é‡Š</span>
</span></span><span class=line><span class=cl>                  external_repository: <span class=c1># ä½ çš„ GitHub page ä»“åº“ example/example.github.io</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                  publish_dir: ./public
</span></span><span class=line><span class=cl>                  user_name: <span class=s2>&#34;github-actions[bot]&#34;</span>
</span></span><span class=line><span class=cl>                  user_email: <span class=s2>&#34;github-actions[bot]@users.noreply.github.com&#34;</span>
</span></span><span class=line><span class=cl>                  full_commit_message: Deploy from <span class=si>${</span><span class=p>{ github.repository </span><span class=si>}</span><span class=o>}</span>@<span class=si>${</span><span class=p>{ github.sha </span><span class=si>}</span><span class=o>}</span> ğŸš€
</span></span></code></pre></td></tr></table></div></div><h2 id=æäº¤æºç >æäº¤æºç </h2><p>åˆå§‹åŒ–gitï¼Œæ–°å»ºå¹¶åˆ‡æ¢åˆ°<code>develop</code>åˆ†æ”¯ï¼Œå°†æºç æäº¤åˆ°<code>develop</code>åˆ†æ”¯ã€‚ç¨ç­‰ç‰‡åˆ»ï¼Œgithub actionä¼šè‡ªåŠ¨éƒ¨ç½²blogåˆ°<code>master</code>åˆ†æ”¯å’ŒæœåŠ¡å™¨ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git init
</span></span><span class=line><span class=cl>git checkout -b develop
</span></span><span class=line><span class=cl>git remote add origin git@github.com:iwyang/iwyang.github.io.git
</span></span><span class=line><span class=cl>git add .
</span></span><span class=line><span class=cl>git commit -m <span class=s2>&#34;å¤‡ä»½æºç &#34;</span>
</span></span><span class=line><span class=cl>git push --force origin develop
</span></span></code></pre></td></tr></table></div></div><p>æœ€ç»ˆéƒ¨ç½²è„šæœ¬ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> -e <span class=s2>&#34;\033[0;32mDeploying updates to gitee...\033[0m&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># backup</span>
</span></span><span class=line><span class=cl>git config --global core.autocrlf <span class=nb>false</span>
</span></span><span class=line><span class=cl>git add .
</span></span><span class=line><span class=cl>git commit -m <span class=s2>&#34;site backup&#34;</span>
</span></span><span class=line><span class=cl>git push origin develop --force
</span></span></code></pre></td></tr></table></div></div><h2 id=å…‹éš†æºç åˆ°æœ¬åœ°>å…‹éš†æºç åˆ°æœ¬åœ°</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git clone -b develop git@github.com:iwyang/iwyang.github.io.git blog --recursive
</span></span></code></pre></td></tr></table></div></div><p>å› ä¸ºä½¿ç”¨<code>Submodule</code>ç®¡ç†ä¸»é¢˜ï¼Œæ‰€ä»¥æœ€åè¦åŠ ä¸Š <code>--recursive</code>ï¼Œå› ä¸ºä½¿ç”¨ git clone å‘½ä»¤é»˜è®¤ä¸ä¼šæ‹‰å–é¡¹ç›®ä¸­çš„å­æ¨¡å—ï¼Œä½ ä¼šå‘ç°ä¸»é¢˜æ–‡ä»¶æ˜¯ç©ºçš„ã€‚ï¼ˆå¦å¤–ä¸€ç§æ–¹æ³•ï¼š<code>git submodule init && git submodule update</code>ï¼‰</p><h3 id=åŒæ­¥æ›´æ–°æºæ–‡ä»¶>åŒæ­¥æ›´æ–°æºæ–‡ä»¶</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git pull origin develop
</span></span></code></pre></td></tr></table></div></div><h3 id=åŒæ­¥ä¸»é¢˜æ–‡ä»¶>åŒæ­¥ä¸»é¢˜æ–‡ä»¶</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git submodule update --remote
</span></span></code></pre></td></tr></table></div></div><p>è¿è¡Œæ­¤å‘½ä»¤åï¼Œ Git å°†ä¼šè‡ªåŠ¨è¿›å…¥å­æ¨¡å—ç„¶åæŠ“å–å¹¶æ›´æ–°ï¼Œæ›´æ–°åé‡æ–°æäº¤ä¸€éï¼Œå­æ¨¡å—æ–°çš„è·Ÿè¸ªä¿¡æ¯ä¾¿ä¹Ÿä¼šè®°å½•åˆ°ä»“åº“ä¸­ã€‚è¿™æ ·å°±ä¿è¯ä»“åº“ä¸»é¢˜æ˜¯æœ€æ–°çš„ã€‚</p><h2 id=githubgiteeæœåŠ¡å™¨ä¸‰çº¿éƒ¨ç½²hexo>githubã€giteeã€æœåŠ¡å™¨ä¸‰çº¿éƒ¨ç½²hexo</h2><p>å°†hexoä¸‰çº¿éƒ¨ç½²ï¼ˆç”±äºéƒ¨ç½²hexoè¾ƒæ…¢ï¼Œå¦‚æœå•ç‹¬ä¸º<code>gitee</code>å»ºç«‹ä¸€ä¸ª<code>workflows</code>ï¼Œgiteeä¼šå…ˆéƒ¨ç½²å®Œæˆï¼Œè¿™æ ·æ— æ³•åŒæ­¥ï¼›hugoå¯ä»¥å•ç‹¬ä¸º<code>gitee</code>å»ºç«‹ä¸€ä¸ª<code>workflows</code>ï¼Œå› ä¸º<code>hugo</code>éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¼šå…ˆäºéƒ¨ç½²åˆ°<code>gitee</code>ï¼‰ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Hexo Deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=c># åªç›‘å¬ source åˆ†æ”¯çš„æ”¹åŠ¨</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>develop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=c># è‡ªå®šä¹‰ç¯å¢ƒå˜é‡</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>POST_ASSET_IMAGE_CDN</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>build-and-deploy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># è·å–åšå®¢æºç å’Œä¸»é¢˜</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Checkout</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v2.3.4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Checkout theme repo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v2.3.4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>repository</span><span class=p>:</span><span class=w> </span><span class=l>jerryc127/hexo-theme-butterfly</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>ref</span><span class=p>:</span><span class=w> </span><span class=l>master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>themes/butterfly</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># è¿™é‡Œç”¨çš„æ˜¯ Node.js 14.x</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Set up Node.js</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/setup-node@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>node-version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;14&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># è®¾ç½® yarn ç¼“å­˜ï¼Œnpm çš„è¯å¯ä»¥çœ‹ actions/cache@v2 çš„æ–‡æ¡£ç¤ºä¾‹</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Get yarn cache directory path</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>yarn-cache-dir-path</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>echo &#34;::set-output name=dir::$(yarn cache dir)&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Use yarn cache</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/cache@v2.1.6</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>yarn-cache</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>${{ steps.yarn-cache-dir-path.outputs.dir }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>${{ runner.os }}-yarn-${{ hashFiles(&#39;**/yarn.lock&#39;) }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>restore-keys</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>            ${{ runner.os }}-yarn-</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># å®‰è£…ä¾èµ–</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Install dependencies</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          yarn install --prefer-offline --frozen-lockfile</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># ä»ä¹‹å‰è®¾ç½®çš„ secret è·å–éƒ¨ç½²ç§é’¥</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Set up environment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>DEPLOY_KEY</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.DEPLOY_KEY }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          sudo timedatectl set-timezone &#34;Asia/Shanghai&#34;
</span></span></span><span class=line><span class=cl><span class=sd>          mkdir -p ~/.ssh
</span></span></span><span class=line><span class=cl><span class=sd>          echo &#34;$DEPLOY_KEY&#34; &gt; ~/.ssh/id_rsa
</span></span></span><span class=line><span class=cl><span class=sd>          chmod 600 ~/.ssh/id_rsa
</span></span></span><span class=line><span class=cl><span class=sd>          ssh-keyscan github.com &gt;&gt; ~/.ssh/known_hosts</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># ç”Ÿæˆå¹¶éƒ¨ç½²</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          npx hexo deploy --generate
</span></span></span><span class=line><span class=cl><span class=sd>          </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy Hexo to Server</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>SamKirkland/FTP-Deploy-Action@4.1.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>server</span><span class=p>:</span><span class=w> </span><span class=m>104.224.191.88</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>username</span><span class=p>:</span><span class=w> </span><span class=l>admin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>password</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.FTP_MIRROR_PASSWORD }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>local-dir</span><span class=p>:</span><span class=w> </span><span class=l>./public/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>server-dir</span><span class=p>:</span><span class=w> </span><span class=l>/var/www/blog/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Sync to Gitee</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>wearerequired/git-mirror-action@master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># æ³¨æ„åœ¨ Settings-&gt;Secrets é…ç½® GITEE_RSA_PRIVATE_KEY</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>SSH_PRIVATE_KEY</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITEE_RSA_PRIVATE_KEY }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ GitHub æºä»“åº“åœ°å€</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>source-repo</span><span class=p>:</span><span class=w> </span><span class=l>git@github.com:iwyang/iwyang.github.io.git</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ Gitee ç›®æ ‡ä»“åº“åœ°å€</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>destination-repo</span><span class=p>:</span><span class=w> </span><span class=l>git@gitee.com:iwyang/iwyang.git</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Build Gitee Pages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>yanglbme/gitee-pages-action@main</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ Gitee ç”¨æˆ·å</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>gitee-username</span><span class=p>:</span><span class=w> </span><span class=l>iwyang</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># æ³¨æ„åœ¨ Settings-&gt;Secrets é…ç½® GITEE_PASSWORD</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>gitee-password</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITEE_PASSWORD }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ Gitee ä»“åº“ï¼Œä»“åº“åä¸¥æ ¼åŒºåˆ†å¤§å°å†™ï¼Œè¯·å‡†ç¡®å¡«å†™ï¼Œå¦åˆ™ä¼šå‡ºé”™</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>gitee-repo</span><span class=p>:</span><span class=w> </span><span class=l>iwyang/iwyang</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># è¦éƒ¨ç½²çš„åˆ†æ”¯ï¼Œé»˜è®¤æ˜¯ masterï¼Œè‹¥æ˜¯å…¶ä»–åˆ†æ”¯ï¼Œåˆ™éœ€è¦æŒ‡å®šï¼ˆæŒ‡å®šçš„åˆ†æ”¯å¿…é¡»å­˜åœ¨ï¼‰</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>branch</span><span class=p>:</span><span class=w> </span><span class=l>master</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=githubgiteeæœåŠ¡å™¨ä¸‰çº¿éƒ¨ç½²hugo>githubã€giteeã€æœåŠ¡å™¨ä¸‰çº¿éƒ¨ç½²hugo</h2><p>ç”±äºéƒ¨ç½²åˆ°<code>github</code>å’ŒæœåŠ¡å™¨å…ˆäº<code>gitee</code>ï¼Œæ‰€æœ‰å¯ä»¥å»ºç«‹ä¸¤ä¸ª<code>workflows</code>ã€‚</p><ol><li>æ ¹ç›®å½•æ–°å»º<code>.github/workflows/deploy.yml</code>ï¼ˆç”¨äºéƒ¨ç½²åˆ°<code>github</code>å’ŒæœåŠ¡å™¨ï¼‰</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>name: GitHub Page Deploy
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>on:
</span></span><span class=line><span class=cl>  push:
</span></span><span class=line><span class=cl>    branches:
</span></span><span class=line><span class=cl>      - develop
</span></span><span class=line><span class=cl>jobs:
</span></span><span class=line><span class=cl>  build-deploy:
</span></span><span class=line><span class=cl>    runs-on: ubuntu-latest
</span></span><span class=line><span class=cl>    steps:
</span></span><span class=line><span class=cl>      - name: Checkout master
</span></span><span class=line><span class=cl>        uses: actions/checkout@v2.3.4
</span></span><span class=line><span class=cl>        with:
</span></span><span class=line><span class=cl>          submodules: <span class=nb>true</span>  <span class=c1># Fetch Hugo themes (true OR recursive)</span>
</span></span><span class=line><span class=cl>          fetch-depth: <span class=m>0</span>    <span class=c1># Fetch all history for .GitInfo and .Lastmod</span>
</span></span><span class=line><span class=cl>      - name: Setup Hugo
</span></span><span class=line><span class=cl>        uses: peaceiris/actions-hugo@v2.5.0
</span></span><span class=line><span class=cl>        with:
</span></span><span class=line><span class=cl>          hugo-version: <span class=s1>&#39;latest&#39;</span>
</span></span><span class=line><span class=cl>          extended: <span class=nb>true</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      - name: Build Hugo
</span></span><span class=line><span class=cl>        run: hugo --minify
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      - name: Deploy Hugo to gh-pages
</span></span><span class=line><span class=cl>        uses: peaceiris/actions-gh-pages@v3.8.0
</span></span><span class=line><span class=cl>        with:
</span></span><span class=line><span class=cl>          github_token: <span class=si>${</span><span class=p>{ secrets.GITHUB_TOKEN </span><span class=si>}</span><span class=o>}</span>
</span></span><span class=line><span class=cl>          PUBLISH_BRANCH: master
</span></span><span class=line><span class=cl>          PUBLISH_DIR: ./public
</span></span><span class=line><span class=cl>        <span class=c1># cname:</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>      - name: Deploy Hugo to Server
</span></span><span class=line><span class=cl>        uses: SamKirkland/FTP-Deploy-Action@4.1.0
</span></span><span class=line><span class=cl>        with:
</span></span><span class=line><span class=cl>          server: 104.224.191.88
</span></span><span class=line><span class=cl>          username: admin
</span></span><span class=line><span class=cl>          password: <span class=si>${</span><span class=p>{ secrets.FTP_MIRROR_PASSWORD </span><span class=si>}</span><span class=o>}</span>
</span></span><span class=line><span class=cl>          local-dir: ./public/
</span></span><span class=line><span class=cl>          server-dir: /var/www/blog/
</span></span></code></pre></td></tr></table></div></div><ol start=2><li>æ ¹ç›®å½•æ–°å»º<code>.github/workflows/Sync to Gitee.yml</code>ï¼ˆç”¨äºéƒ¨ç½²åˆ°<code>gitee</code>ï¼‰</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Sync to Gitee</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w> </span><span class=l>develop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>build</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Sync to Gitee</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>wearerequired/git-mirror-action@master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># æ³¨æ„åœ¨ Settings-&gt;Secrets é…ç½® GITEE_RSA_PRIVATE_KEY</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>SSH_PRIVATE_KEY</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITEE_RSA_PRIVATE_KEY }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ GitHub æºä»“åº“åœ°å€</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>source-repo</span><span class=p>:</span><span class=w> </span><span class=l>git@github.com:iwyang/iwyang.github.io.git</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ Gitee ç›®æ ‡ä»“åº“åœ°å€</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>destination-repo</span><span class=p>:</span><span class=w> </span><span class=l>git@gitee.com:iwyang/iwyang.git</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Build Gitee Pages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>yanglbme/gitee-pages-action@main</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ Gitee ç”¨æˆ·å</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>gitee-username</span><span class=p>:</span><span class=w> </span><span class=l>iwyang</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># æ³¨æ„åœ¨ Settings-&gt;Secrets é…ç½® GITEE_PASSWORD</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>gitee-password</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITEE_PASSWORD }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ Gitee ä»“åº“ï¼Œä»“åº“åä¸¥æ ¼åŒºåˆ†å¤§å°å†™ï¼Œè¯·å‡†ç¡®å¡«å†™ï¼Œå¦åˆ™ä¼šå‡ºé”™</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>gitee-repo</span><span class=p>:</span><span class=w> </span><span class=l>iwyang/iwyang</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># è¦éƒ¨ç½²çš„åˆ†æ”¯ï¼Œé»˜è®¤æ˜¯ masterï¼Œè‹¥æ˜¯å…¶ä»–åˆ†æ”¯ï¼Œåˆ™éœ€è¦æŒ‡å®šï¼ˆæŒ‡å®šçš„åˆ†æ”¯å¿…é¡»å­˜åœ¨ï¼‰</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>branch</span><span class=p>:</span><span class=w> </span><span class=l>master</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=è§£å†³é—®é¢˜>è§£å†³é—®é¢˜</h2><p>1.<strong>Error: FTPError: 550 Remove directory operation failed</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=l>rm -rf /var/www/blog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=l>sudo mkdir -p /var/www/blog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=l>sudo chown -R $USER:$USER /var/www/blog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=l>sudo chmod -R 755 /var/www</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=l>sudo chmod 755 /var/www/blog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>sudo chown -R admin</span><span class=p>:</span><span class=w> </span><span class=l>/var/www/blog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=l>sudo systemctl restart vsftpd</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=å‚è€ƒé“¾æ¥>å‚è€ƒé“¾æ¥</h2><p><a class=link href=https://eliyar.biz/how_to_build_hexo_blog/ target=_blank rel=noopener>1.ä» 0 å¼€å§‹æ­å»º hexo åšå®¢</a></p><p><a class=link href=https://blog.yizhilee.com/post/letsencrypt-certificate/ target=_blank rel=noopener>2.ä¸ºåšå®¢æ·»åŠ  Letâ€™s Encrypt å…è´¹è¯ä¹¦</a></p><p><a class=link href=https://github.com/SamKirkland target=_blank rel=noopener>3.SamKirkland</a>/<a class=link href=https://github.com/SamKirkland/FTP-Deploy-Action target=_blank rel=noopener>FTP-Deploy-Action</a></p><p><a class=link href=https://blog.csdn.net/weixin_43782998/article/details/109163384 target=_blank rel=noopener>4.vsftpdå‚æ•°è®¾ç½®ï¼Œå¹¶å…è®¸rootè´¦æˆ·ç™»å½•ftp</a></p><p><a class=link href=https://blog.zhixuan.dev/posts/ce103e3b/ target=_blank rel=noopener>5.Stackä¸»é¢˜ + GitHub Action</a></p></div><div class="shuoshuo-tags meta-wrapper" style=margin-top:15px!important;margin-bottom:5px!important;gap:10px!important><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:14px;height:14px;color:var(--card-text-color-secondary)"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
<a href=/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/ class="meta-item shuoshuo-tag" title="æŸ¥çœ‹æ ‡ç­¾: æœåŠ¡å™¨"><span>#æœåŠ¡å™¨</span>
</a><a href=/tags/hugo/ class="meta-item shuoshuo-tag" title="æŸ¥çœ‹æ ‡ç­¾: hugo"><span>#hugo</span>
</a><a href=/tags/hexo/ class="meta-item shuoshuo-tag" title="æŸ¥çœ‹æ ‡ç­¾: hexo"><span>#hexo</span>
</a><a href=/tags/github/ class="meta-item shuoshuo-tag" title="æŸ¥çœ‹æ ‡ç­¾: github"><span>#github</span></a></div><div class=shuoshuo-footer-info><div class="shuoshuo-edit-link meta-wrapper" style=gap:15px!important><a href=https://github.com/iwyang/iwyang.github.io/edit/develop/content/post/GitHub%20Actions%e5%88%a9%e7%94%a8FTP&&amp;rsync%e8%87%aa%e5%8a%a8%e9%83%a8%e7%bd%b2hugo-hexo%e5%88%b0Centos%208/index.md target=_blank rel="noopener noreferrer" class=meta-item title="å‰å¾€ GitHub ç¼–è¾‘æ­¤é¡µ"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
<span>ç¼–è¾‘æ­¤é¡µ</span>
</a><span class=separator>|</span>
<a class="meta-item git-hash-text" href=https://github.com/iwyang/iwyang.github.io/commit/26a215ebb8fca78d98f384856b8ab5e0e2056333 target=_blank rel="noopener noreferrer" title="Commit Hash: 26a215e">#26a215e</a></div></div></article><article class=shuoshuo-card><div class=shuoshuo-header><div class="shuoshuo-meta meta-wrapper"><time class="shuoshuo-time meta-item" datetime=2021-08-02T00:05:13Z><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
<span>2021-08-02</span>
</time><span class="shuoshuo-updated-time meta-item" datetime=2026-02-09T22:08:24+08:00><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4A2 2 0 002 6v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121.0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
<span>2026-02-09</span></span></div></div><div class="shuoshuo-content style-cs-content article-post"><h2 id=åˆ›å»º-upptime-æº>åˆ›å»º upptime æº</h2><ol><li>è¿›å…¥ <a class=link href=https://github.com/upptime/upptime target=_blank rel=noopener>upptime â€“ GitHub</a> ï¼Œç‚¹å‡» Use this templateã€‚</li><li>Create a new repository from upptimeï¼Œæ³¨æ„å‹¾é€‰<code>Include all branches</code>ã€‚</li><li>è¿›å…¥æºè®¾ç½®ï¼Œä¸‹æ‹‰åˆ° GitHub Pages é€‰é¡¹ï¼Œç¡®è®¤ Source å·²ç»è®¾ç½®ä¸º gh-pages åˆ†æ”¯ã€‚</li></ol><h2 id=è®¾ç½®-pat>è®¾ç½® PAT</h2><ol><li>æ–°å»º <code>Personal access token</code>ã€‚</li></ol><ul><li>è¿›å…¥ GitHub è´¦æˆ· Setttings â€“ Developer settings â€“ Personal access tokenï¼Œç‚¹å‡» Generate new token</li><li>æ–°å»º tokenï¼Œæƒé™å‹¾é€‰ repo å’Œ workflow</li><li>å®Œæˆåå¤åˆ¶ token</li></ul><ol start=2><li>è¿›å…¥æºçš„è®¾ç½®é¡µé¢ï¼Œé€‰æ‹© Secretsï¼Œæ–°å»º Secretã€‚</li></ol><ul><li>å°†åç§°è®¾ç½®ä¸º <code>GH_PAT</code> å¹¶å¡«å…¥ tokenï¼Œä¿å­˜</li></ul><h2 id=é…ç½®å¹¶è¿è¡Œ-upptime>é…ç½®å¹¶è¿è¡Œ upptime</h2><ol><li>é…ç½® upptime</li></ol><ul><li>æ‰“å¼€æºæ ¹ç›®å½•ä¸‹çš„ .upptimerc.ymlï¼Œç¼–è¾‘ä»¥ä¸‹å†…å®¹ï¼š</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># Change these first</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>owner</span><span class=p>:</span><span class=w> </span><span class=l>iwyang</span><span class=w> </span><span class=c># Your GitHub organization or username, where this repository lives</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class=l>check</span><span class=w> </span><span class=c># The name of this repository</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>sites</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>01Bore&#39;s Notes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>https://bore.vip</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>05Takagi</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>https://lixingyong.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>10å¤§å¤§çš„å°èœ—ç‰›</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>https://eallion.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>11guole&#39;s Blog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>https://guole.fun</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>12cywhatâ€™s blog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>https://cywhat.cn</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>13Akilarã®ç³–æœå±‹</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>https://akilar.top</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>17å¼ æ´ªHeo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>https://blog.zhheo.com/ </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>19Sianx&#39;s Blog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>https://siax.cn</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>20Leonus</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>https://blog.leonus.cn/    </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>22å…­æœˆé•¿æ²³</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>https://kingpo.vercel.app/    </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>23æ«å¶</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>https://blog.aqcoder.cn/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>27lyshark</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>https://www.lyshark.com/    </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>28mao</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>https://meuicat.com/ </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>30æˆ‘ä¸æ˜¯å’•å’•é¸½</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>https://blog.laoda.de/   </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>31CWorld Site</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>https://cworld.top/  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       
</span></span></span><span class=line><span class=cl><span class=nt>status-website</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Add your custom domain name, or remove the `cname` line if you don&#39;t have a domain</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Uncomment the `baseUrl` line if you don&#39;t have a custom domain and add your repo name there</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># cname: demo.upptime.js.org</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>baseUrl</span><span class=p>:</span><span class=w> </span><span class=l>/check</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>logoUrl</span><span class=p>:</span><span class=w> </span><span class=l>https://raw.githubusercontent.com/upptime/upptime.js.org/master/static/img/icon.svg</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Upptime</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>introTitle</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;**Upptime** is the open-source uptime monitor and status page, powered entirely by GitHub.&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>introMessage</span><span class=p>:</span><span class=w> </span><span class=l>This is a sample status page which uses **real-time** data from our [GitHub repository](https://github.com/upptime/upptime). No server required â€” just GitHub Actions, Issues, and Pages. [**Get your own for free**](https://github.com/upptime/upptime)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>navbar</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>title</span><span class=p>:</span><span class=w> </span><span class=l>Status</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>href</span><span class=p>:</span><span class=w> </span><span class=l>/check</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>title</span><span class=p>:</span><span class=w> </span><span class=l>GitHub</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>href</span><span class=p>:</span><span class=w> </span><span class=l>https://github.com/$OWNER/$REPO</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=c># Upptime also supports notifications, assigning issues, and more</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c># See https://upptime.js.org/docs/configuration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>workflowSchedule</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>graphs</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;0 0 * * 0&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>response-time</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;0 0 * * 0&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>site</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;0 0 * * 0&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>summary</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;0 0 * * 0&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>update-template</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;0 0 * * 0&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>updates</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;0 0 * * 0&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>uptime</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;0 0 * * 0&#34;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><img src=/archives/b32c2189/20210802091341.jpg width=808 height=408 loading=lazy class=gallery-image data-flex-grow=198 data-flex-basis=475px></p><ul><li>ç¼–è¾‘å GItHub Actions ä¼šè‡ªåŠ¨æ›´æ–° upptime é…ç½®ä¿¡æ¯</li></ul><ol start=2><li>å¦‚æœ upptime æ²¡æœ‰æˆåŠŸè¿è¡Œï¼Œå¯ä»¥æ‰‹åŠ¨æ‰§è¡Œ GitHub Actions ä¸­çš„ Setup å·¥ä½œæµã€‚</li></ol><h2 id=æ•ˆæœ>æ•ˆæœ</h2><ul><li><p><a class=link href=https://iwyang.github.io/check target=_blank rel=noopener>https://iwyang.github.io/check</a></p></li><li><p><a class=link href=https://github.com/iwyang/check target=_blank rel=noopener>https://github.com/iwyang/check</a></p></li></ul><h2 id=å‚è€ƒé“¾æ¥>å‚è€ƒé“¾æ¥</h2><ul><li><p><a class=link href=https://azhuge233.com/upptime-%E5%88%A9%E7%94%A8-github-actions-%E7%9B%91%E6%8E%A7%E7%BD%91%E7%AB%99%E8%BF%90%E8%A1%8C%E7%8A%B6%E6%80%81/ target=_blank rel=noopener>upptime â€“ åˆ©ç”¨ Github Actions æŸ¥çœ‹ç½‘ç«™è¿è¡ŒçŠ¶æ€</a></p></li><li><p><a class=link href=https://github.com/upptime/upptime target=_blank rel=noopener>upptime â€“ GitHub</a></p></li><li><p><a class=link href=https://upptime.js.org/docs/get-started target=_blank rel=noopener>Getting started</a></p></li></ul></div><div class="shuoshuo-tags meta-wrapper" style=margin-top:15px!important;margin-bottom:5px!important;gap:10px!important><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:14px;height:14px;color:var(--card-text-color-secondary)"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
<a href=/tags/github/ class="meta-item shuoshuo-tag" title="æŸ¥çœ‹æ ‡ç­¾: github"><span>#github</span></a></div><div class=shuoshuo-footer-info><div class="shuoshuo-edit-link meta-wrapper" style=gap:15px!important><a href=https://github.com/iwyang/iwyang.github.io/edit/develop/content/post/upptime-%e5%88%a9%e7%94%a8Github-Actions%e6%a3%80%e6%b5%8b%e7%bd%91%e7%ab%99%e8%bf%90%e8%a1%8c%e7%8a%b6%e6%80%81/index.md target=_blank rel="noopener noreferrer" class=meta-item title="å‰å¾€ GitHub ç¼–è¾‘æ­¤é¡µ"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
<span>ç¼–è¾‘æ­¤é¡µ</span>
</a><span class=separator>|</span>
<a class="meta-item git-hash-text" href=https://github.com/iwyang/iwyang.github.io/commit/84e6bb501103ad84c414f9f438bf4cb7c38b876b target=_blank rel="noopener noreferrer" title="Commit Hash: 84e6bb5">#84e6bb5</a></div></div></article><article class=shuoshuo-card><div class=shuoshuo-header><div class="shuoshuo-meta meta-wrapper"><time class="shuoshuo-time meta-item" datetime=2020-07-07T11:11:25Z><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
<span>2020-07-07</span>
</time><span class="shuoshuo-updated-time meta-item" datetime=2026-02-18T15:52:01+08:00><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4A2 2 0 002 6v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121.0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
<span>2026-02-18</span></span></div></div><div class="shuoshuo-content style-cs-content article-post"><h2 id=ç”Ÿæˆå…¬é’¥>ç”Ÿæˆå…¬é’¥</h2><p>Windows ä¸Šå®‰è£… <a class=link href=https://git-for-windows.github.io/ target=_blank rel=noopener>Git for Windows</a> ä¹‹ååœ¨å¼€å§‹èœå•é‡Œæ‰“å¼€ Git Bash è¾“å…¥ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git config --global user.name <span class=s2>&#34;ä½ çš„ç”¨æˆ·å&#34;</span>
</span></span><span class=line><span class=cl>git config --global user.email <span class=s2>&#34;ä½ çš„ç”µå­é‚®ç®±&#34;</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~
</span></span><span class=line><span class=cl>mkdir .ssh
</span></span><span class=line><span class=cl><span class=nb>cd</span> .ssh
</span></span><span class=line><span class=cl>ssh-keygen -t rsa
</span></span></code></pre></td></tr></table></div></div><p>åœ¨ç³»ç»Ÿå½“å‰ç”¨æˆ·æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆäº†ç§é’¥ <code>id_rsa</code> å’Œå…¬é’¥ <code>id_rsa.pub</code>ã€‚</p><h3 id=ä¸Šä¼ id_rsapub>ä¸Šä¼ id_rsa.pub</h3><p>åœ¨å³ä¸Šè§’ä¸ªäººè´¦æˆ·ä¾æ¬¡ç‚¹å‡»<code>Settings</code>-><code>SSH and GPG keys</code>æ·»åŠ åˆšåˆšç”Ÿæˆçš„å…¬é’¥ï¼Œåç§°éšæ„ã€‚</p><h3 id=ä¸Šä¼ id_rsa>ä¸Šä¼ id_rsa</h3><p>ç„¶ååœ¨ Settings > Secrets ä¸­æ–°å¢ä¸€ä¸ª secretï¼Œå‘½åä¸º <code>DEPLOY_KEY</code>ï¼ŒæŠŠç§é’¥ <code>id_rsa</code> çš„å†…å®¹å¤åˆ¶è¿›å»ï¼Œä¾›åç»­ä½¿ç”¨ã€‚</p><h2 id=é…ç½®-github-actions>é…ç½® GitHub Actions</h2><h3 id=ç¬¬ä¸€ç§>ç¬¬ä¸€ç§</h3><p>åœ¨åšå®¢æ ¹ç›®å½•æ–°å»º<code>.github/workflows/gh_pages.yml</code>æ–‡ä»¶ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Hexo Deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=c># åªç›‘å¬ source åˆ†æ”¯çš„æ”¹åŠ¨</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>develop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=c># è‡ªå®šä¹‰ç¯å¢ƒå˜é‡</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>POST_ASSET_IMAGE_CDN</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>build-and-deploy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># è·å–åšå®¢æºç å’Œä¸»é¢˜</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Checkout</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v2.3.4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Checkout theme repo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v2.3.4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>repository</span><span class=p>:</span><span class=w> </span><span class=l>jerryc127/hexo-theme-butterfly</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>ref</span><span class=p>:</span><span class=w> </span><span class=l>master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>themes/butterfly</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># è¿™é‡Œç”¨çš„æ˜¯ Node.js 14.x</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Set up Node.js</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/setup-node@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>node-version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;14&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># è®¾ç½® yarn ç¼“å­˜ï¼Œnpm çš„è¯å¯ä»¥çœ‹ actions/cache@v2 çš„æ–‡æ¡£ç¤ºä¾‹</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Get yarn cache directory path</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>yarn-cache-dir-path</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>echo &#34;::set-output name=dir::$(yarn cache dir)&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Use yarn cache</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/cache@v2.1.6</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>yarn-cache</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>${{ steps.yarn-cache-dir-path.outputs.dir }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>${{ runner.os }}-yarn-${{ hashFiles(&#39;**/yarn.lock&#39;) }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>restore-keys</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>            ${{ runner.os }}-yarn-</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># å®‰è£…ä¾èµ–</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Install dependencies</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          yarn install --prefer-offline --frozen-lockfile</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># ä»ä¹‹å‰è®¾ç½®çš„ secret è·å–éƒ¨ç½²ç§é’¥</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Set up environment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>DEPLOY_KEY</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.DEPLOY_KEY }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          sudo timedatectl set-timezone &#34;Asia/Shanghai&#34;
</span></span></span><span class=line><span class=cl><span class=sd>          mkdir -p ~/.ssh
</span></span></span><span class=line><span class=cl><span class=sd>          echo &#34;$DEPLOY_KEY&#34; &gt; ~/.ssh/id_rsa
</span></span></span><span class=line><span class=cl><span class=sd>          chmod 600 ~/.ssh/id_rsa
</span></span></span><span class=line><span class=cl><span class=sd>          ssh-keyscan github.com &gt;&gt; ~/.ssh/known_hosts</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># ç”Ÿæˆå¹¶éƒ¨ç½²</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          npx hexo deploy --generate
</span></span></span><span class=line><span class=cl><span class=sd>          </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy Hexo to Server</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>SamKirkland/FTP-Deploy-Action@4.1.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>server</span><span class=p>:</span><span class=w> </span><span class=m>104.224.191.88</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>username</span><span class=p>:</span><span class=w> </span><span class=l>admin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>password</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.FTP_MIRROR_PASSWORD }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>local-dir</span><span class=p>:</span><span class=w> </span><span class=l>./public/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>server-dir</span><span class=p>:</span><span class=w> </span><span class=l>/var/www/blog/</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><hr><h3 id=ç¬¬äºŒç§>ç¬¬äºŒç§</h3><p>PSï¼šç¬¬äºŒç§æ¯”ç¬¬ä¸€ç§æ…¢ã€‚</p><p>é¦–å…ˆç¡®è®¤<code> _config.yml</code> æ–‡ä»¶ä¸­æœ‰ç±»ä¼¼å¦‚ä¸‹çš„ GitHub Pages é…ç½®ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>deploy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>git</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>repo</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>github</span><span class=p>:</span><span class=w> </span><span class=l>git@github.com:iwyang/hexo.git</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>branch</span><span class=p>:</span><span class=w> </span><span class=l>gh-pages</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=é…ç½®ç§é’¥>é…ç½®ç§é’¥</h4><ul><li>é¦–å…ˆåœ¨ GitHub ä¸Šæ‰“å¼€ä¿å­˜ Hexo çš„ä»“åº“ï¼Œè®¿é—® Settings -> Secretsï¼Œç„¶åé€‰æ‹© New secret;</li><li>åå­—éƒ¨åˆ†å¡«å†™ï¼šHEXO_DEPLOY_KEYï¼Œæ³¨æ„å¤§å°å†™ï¼Œè¿™ä¸ªåé¢çš„ GitHub Actions Workflow è¦ç”¨åˆ°;</li><li>åœ¨ Value çš„éƒ¨åˆ†å¡«å…¥ github-deploy-key ä¸­çš„å†…å®¹ã€‚</li></ul><h4 id=æ·»åŠ å…¬é’¥>æ·»åŠ å…¬é’¥</h4><ul><li>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦è®¿é—®å­˜æ”¾ç½‘é¡µçš„ä»“åº“ï¼Œä¹Ÿå°±æ˜¯ Hexo éƒ¨ç½²ä»¥åçš„ä»“åº“ï¼Œè®¿é—® Settings -> Deploy keys;</li><li>æŒ‰ Add deploy key æ¥æ·»åŠ ä¸€ä¸ªæ–°çš„å…¬é’¥ï¼›</li><li>åœ¨ Titleä¸­è¾“å…¥ï¼šHEXO_DEPLOY_PUB å­—æ ·ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å¡«å†™å…¶å®ƒè‡ªå®šä¹‰çš„åå­—;</li><li>åœ¨ Key ä¸­ç²˜è´´ github-deploy-key.pubæ–‡ä»¶çš„å†…å®¹ã€‚</li></ul><h4 id=åˆ›å»º-workflow>åˆ›å»º Workflow</h4><p><strong>åœ¨ Hexo çš„ä»“åº“ä¸­åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ï¼š.github/workflows/auto_deploy.ymlï¼Œæ–‡ä»¶çš„å†…å®¹å¦‚ä¸‹:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>auto deploy</span><span class=w> </span><span class=c># workflow name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=c># åªç›‘å¬ source åˆ†æ”¯çš„æ”¹åŠ¨</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>develop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>build</span><span class=p>:</span><span class=w> </span><span class=c># job1 id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w> </span><span class=c># è¿è¡Œç¯å¢ƒä¸ºæœ€æ–°ç‰ˆ Ubuntu</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>auto deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Checkout</span><span class=w> </span><span class=c># step1 è·å–æºç </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v1</span><span class=w> </span><span class=c># ä½¿ç”¨ actions/checkout@v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>with</span><span class=p>:</span><span class=w> </span><span class=c># æ¡ä»¶</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>submodules</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w> </span><span class=c># Checkout private submodules(themes or something else). å½“æœ‰å­æ¨¡å—æ—¶åˆ‡æ¢åˆ†æ”¯ï¼Ÿ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Setup Node.js 12.x</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/setup-node@master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>node-version</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;12.x&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Generate Public Files</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>        npm i
</span></span></span><span class=line><span class=cl><span class=sd>        npm install hexo-cli -g
</span></span></span><span class=line><span class=cl><span class=sd>        hexo clean &amp;&amp; hexo generate</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>peaceiris/actions-gh-pages@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>deploy_key</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.HEXO_DEPLOY_KEY }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>external_repository</span><span class=p>:</span><span class=w> </span><span class=l>iwyang/hexo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>publish_branch</span><span class=p>:</span><span class=w> </span><span class=l>public</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>publish_dir</span><span class=p>:</span><span class=w> </span><span class=l>./public</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>commit_message</span><span class=p>:</span><span class=w> </span><span class=l>${{ github.event.head_commit.message }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>user_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;github-actions[bot]&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>user_email</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;github-actions[bot]@users.noreply.github.com&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy Hexo to Server</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>SamKirkland/FTP-Deploy-Action@4.1.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>server</span><span class=p>:</span><span class=w> </span><span class=m>104.224.191.88</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>username</span><span class=p>:</span><span class=w> </span><span class=l>hexo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>password</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.FTP_MIRROR_PASSWORD }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>local-dir</span><span class=p>:</span><span class=w> </span><span class=l>./public/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>server-dir</span><span class=p>:</span><span class=w> </span><span class=l>/var/www/hexo/</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=githubgiteeæœåŠ¡å™¨ä¸‰çº¿éƒ¨ç½²>githubã€giteeã€æœåŠ¡å™¨ä¸‰çº¿éƒ¨ç½²</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Hexo Deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=c># åªç›‘å¬ source åˆ†æ”¯çš„æ”¹åŠ¨</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>develop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=c># è‡ªå®šä¹‰ç¯å¢ƒå˜é‡</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>POST_ASSET_IMAGE_CDN</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>build-and-deploy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># è·å–åšå®¢æºç å’Œä¸»é¢˜</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Checkout</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v2.3.4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Checkout theme repo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v2.3.4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>repository</span><span class=p>:</span><span class=w> </span><span class=l>jerryc127/hexo-theme-butterfly</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>ref</span><span class=p>:</span><span class=w> </span><span class=l>master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>themes/butterfly</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># è¿™é‡Œç”¨çš„æ˜¯ Node.js 14.x</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Set up Node.js</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/setup-node@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>node-version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;14&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># è®¾ç½® yarn ç¼“å­˜ï¼Œnpm çš„è¯å¯ä»¥çœ‹ actions/cache@v2 çš„æ–‡æ¡£ç¤ºä¾‹</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Get yarn cache directory path</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>yarn-cache-dir-path</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>echo &#34;::set-output name=dir::$(yarn cache dir)&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Use yarn cache</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/cache@v2.1.6</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>yarn-cache</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>${{ steps.yarn-cache-dir-path.outputs.dir }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>${{ runner.os }}-yarn-${{ hashFiles(&#39;**/yarn.lock&#39;) }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>restore-keys</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>            ${{ runner.os }}-yarn-</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># å®‰è£…ä¾èµ–</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Install dependencies</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          yarn install --prefer-offline --frozen-lockfile</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># ä»ä¹‹å‰è®¾ç½®çš„ secret è·å–éƒ¨ç½²ç§é’¥</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Set up environment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>DEPLOY_KEY</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.DEPLOY_KEY }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          sudo timedatectl set-timezone &#34;Asia/Shanghai&#34;
</span></span></span><span class=line><span class=cl><span class=sd>          mkdir -p ~/.ssh
</span></span></span><span class=line><span class=cl><span class=sd>          echo &#34;$DEPLOY_KEY&#34; &gt; ~/.ssh/id_rsa
</span></span></span><span class=line><span class=cl><span class=sd>          chmod 600 ~/.ssh/id_rsa
</span></span></span><span class=line><span class=cl><span class=sd>          ssh-keyscan github.com &gt;&gt; ~/.ssh/known_hosts</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># ç”Ÿæˆå¹¶éƒ¨ç½²</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          npx hexo deploy --generate
</span></span></span><span class=line><span class=cl><span class=sd>          </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy Hexo to Server</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>SamKirkland/FTP-Deploy-Action@4.1.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>server</span><span class=p>:</span><span class=w> </span><span class=m>104.224.191.88</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>username</span><span class=p>:</span><span class=w> </span><span class=l>admin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>password</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.FTP_MIRROR_PASSWORD }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>local-dir</span><span class=p>:</span><span class=w> </span><span class=l>./public/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>server-dir</span><span class=p>:</span><span class=w> </span><span class=l>/var/www/blog/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Sync to Gitee</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>wearerequired/git-mirror-action@master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># æ³¨æ„åœ¨ Settings-&gt;Secrets é…ç½® GITEE_RSA_PRIVATE_KEY</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>SSH_PRIVATE_KEY</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITEE_RSA_PRIVATE_KEY }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ GitHub æºä»“åº“åœ°å€</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>source-repo</span><span class=p>:</span><span class=w> </span><span class=l>git@github.com:iwyang/iwyang.github.io.git</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ Gitee ç›®æ ‡ä»“åº“åœ°å€</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>destination-repo</span><span class=p>:</span><span class=w> </span><span class=l>git@gitee.com:iwyang/iwyang.git</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Build Gitee Pages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>yanglbme/gitee-pages-action@main</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ Gitee ç”¨æˆ·å</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>gitee-username</span><span class=p>:</span><span class=w> </span><span class=l>iwyang</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># æ³¨æ„åœ¨ Settings-&gt;Secrets é…ç½® GITEE_PASSWORD</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>gitee-password</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITEE_PASSWORD }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ Gitee ä»“åº“ï¼Œä»“åº“åä¸¥æ ¼åŒºåˆ†å¤§å°å†™ï¼Œè¯·å‡†ç¡®å¡«å†™ï¼Œå¦åˆ™ä¼šå‡ºé”™</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>gitee-repo</span><span class=p>:</span><span class=w> </span><span class=l>iwyang/iwyang</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># è¦éƒ¨ç½²çš„åˆ†æ”¯ï¼Œé»˜è®¤æ˜¯ masterï¼Œè‹¥æ˜¯å…¶ä»–åˆ†æ”¯ï¼Œåˆ™éœ€è¦æŒ‡å®šï¼ˆæŒ‡å®šçš„åˆ†æ”¯å¿…é¡»å­˜åœ¨ï¼‰</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>branch</span><span class=p>:</span><span class=w> </span><span class=l>master</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>å°†hexoä¸‰çº¿éƒ¨ç½²ï¼ˆç”±äºéƒ¨ç½²hexoè¾ƒæ…¢ï¼Œå¦‚æœå•ç‹¬ä¸º<code>gitee</code>å»ºç«‹ä¸€ä¸ª<code>workflows</code>ï¼Œgiteeä¼šå…ˆéƒ¨ç½²å®Œæˆï¼Œè¿™æ ·æ— æ³•åŒæ­¥ï¼›hugoå¯ä»¥å•ç‹¬ä¸º<code>gitee</code>å»ºç«‹ä¸€ä¸ª<code>workflows</code>ï¼Œå› ä¸º<code>hugo</code>éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¼šå…ˆäºéƒ¨ç½²åˆ°<code>gitee</code>ï¼‰</p><h2 id=æ¨é€åˆ°è¿œç«¯>æ¨é€åˆ°è¿œç«¯</h2><h3 id=é…ç½®hexoçš„_configyml>é…ç½®Hexoçš„_config.yml</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>deploy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>git</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>repo</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>github</span><span class=p>:</span><span class=w> </span><span class=l>git@github.com:iwyang/iwyang.github.io.git</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>branch</span><span class=p>:</span><span class=w> </span><span class=l>master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>iwyang</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>email</span><span class=p>:</span><span class=w> </span><span class=m>455343442</span>@<span class=l>qq.com</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>å½“ç„¶ï¼Œå…·ä½“æ­¥éª¤è¿˜æ˜¯å¾—æ ¹æ®è‡ªå·±çš„éœ€æ±‚è¿›è¡Œç›¸åº”çš„ä¿®æ”¹ã€‚</p><h3 id=æäº¤æºç >æäº¤æºç </h3><p>ä»Šååªéœ€å¤‡ä»½æºç åˆ°<code>develop</code>åˆ†æ”¯ï¼Œ<code>gitbub action</code>å°±ä¼šè‡ªåŠ¨éƒ¨ç½²åšå®¢åˆ°<code>iwyang.github.io</code>ä»“åº“ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=l>git init</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=l>git checkout -b develop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=l>git remote add origin git@github.com:iwyang/iwyang.github.io.git</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=l>git add .</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=l>git commit -m &#34;å¤‡ä»½æºç &#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=l>git push --force origin develop</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=æœ€ç»ˆéƒ¨ç½²è„šæœ¬>æœ€ç»ˆéƒ¨ç½²è„šæœ¬</h3><p><code>deploy.sh</code>å†…å®¹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> -e <span class=s2>&#34;\033[0;32mDeploying updates to gitee...\033[0m&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># backup</span>
</span></span><span class=line><span class=cl>git config --global core.autocrlf <span class=nb>false</span>
</span></span><span class=line><span class=cl>git add .
</span></span><span class=line><span class=cl>git commit -m <span class=s2>&#34;site backup&#34;</span>
</span></span><span class=line><span class=cl>git push origin develop --force
</span></span></code></pre></td></tr></table></div></div><h2 id=å‚è€ƒé“¾æ¥>å‚è€ƒé“¾æ¥</h2><ul><li><a class=link href=https://printempw.github.io/use-github-actions-to-deploy-hexo-blog/ target=_blank rel=noopener>ä½¿ç”¨ GitHub Actions è‡ªåŠ¨éƒ¨ç½² Hexo åšå®¢</a></li><li><a class=link href=https://weijiajin.com/1f41c35f3517/ target=_blank rel=noopener>GitHub Actions å®ç° Hexo è‡ªåŠ¨éƒ¨ç½²</a></li></ul></div><div class="shuoshuo-tags meta-wrapper" style=margin-top:15px!important;margin-bottom:5px!important;gap:10px!important><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:14px;height:14px;color:var(--card-text-color-secondary)"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
<a href=/tags/hexo/ class="meta-item shuoshuo-tag" title="æŸ¥çœ‹æ ‡ç­¾: hexo"><span>#hexo</span>
</a><a href=/tags/github/ class="meta-item shuoshuo-tag" title="æŸ¥çœ‹æ ‡ç­¾: github"><span>#github</span></a></div><div class=shuoshuo-footer-info><div class="shuoshuo-edit-link meta-wrapper" style=gap:15px!important><a href=https://github.com/iwyang/iwyang.github.io/edit/develop/content/post/hexo%e5%88%a9%e7%94%a8Github%20Actions%e8%87%aa%e5%8a%a8%e6%9e%84%e5%bb%ba%e5%8d%9a%e5%ae%a2/index.md target=_blank rel="noopener noreferrer" class=meta-item title="å‰å¾€ GitHub ç¼–è¾‘æ­¤é¡µ"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
<span>ç¼–è¾‘æ­¤é¡µ</span>
</a><span class=separator>|</span>
<a class="meta-item git-hash-text" href=https://github.com/iwyang/iwyang.github.io/commit/26a215ebb8fca78d98f384856b8ab5e0e2056333 target=_blank rel="noopener noreferrer" title="Commit Hash: 26a215e">#26a215e</a></div></div></article><article class=shuoshuo-card><div class=shuoshuo-header><div class="shuoshuo-meta meta-wrapper"><time class="shuoshuo-time meta-item" datetime=2020-07-06T09:19:19Z><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
<span>2020-07-06</span>
</time><span class="shuoshuo-updated-time meta-item" datetime=2026-02-18T15:52:01+08:00><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4A2 2 0 002 6v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121.0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
<span>2026-02-18</span></span></div></div><div class="shuoshuo-content style-cs-content article-post"><h2 id=åˆå§‹åŒ–-github-ä»“åº“>åˆå§‹åŒ– GitHub ä»“åº“</h2><p>Githubä¸Šæ–°å»ºä¸€ä¸ªåä¸º<code>iwyang.github.io</code>çš„ä»“åº“ã€‚</p><h2 id=é…ç½®actions_deploy_key>é…ç½®<code>ACTIONS_DEPLOY_KEY</code></h2><h3 id=ç”Ÿæˆå…¬é’¥>ç”Ÿæˆå…¬é’¥</h3><p>Windows ä¸Šå®‰è£… <a class=link href=https://git-for-windows.github.io/ target=_blank rel=noopener>Git for Windows</a> ä¹‹ååœ¨å¼€å§‹èœå•é‡Œæ‰“å¼€ Git Bash è¾“å…¥ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git config --global user.name <span class=s2>&#34;ä½ çš„ç”¨æˆ·å&#34;</span>
</span></span><span class=line><span class=cl>git config --global user.email <span class=s2>&#34;ä½ çš„ç”µå­é‚®ç®±&#34;</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> ~
</span></span><span class=line><span class=cl>mkdir .ssh
</span></span><span class=line><span class=cl><span class=nb>cd</span> .ssh
</span></span><span class=line><span class=cl>ssh-keygen -t rsa
</span></span></code></pre></td></tr></table></div></div><p>åœ¨ç³»ç»Ÿå½“å‰ç”¨æˆ·æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆäº†ç§é’¥ <code>id_rsa</code> å’Œå…¬é’¥ <code>id_rsa.pub</code>ã€‚</p><h3 id=ä¸Šä¼ id_rsapub>ä¸Šä¼ id_rsa.pub</h3><p>ç‚¹å‡»åšå®¢ä»“åº“çš„Settings->Deploy keys->add deploy keyï¼ŒTitleå¡«å†™<code>ACTIONS_DEPLOY_KEY</code>ï¼ŒKeyå¡«å†™<code>id_rsa.pub</code>æ–‡ä»¶çš„å†…å®¹ã€‚</p><h3 id=ä¸Šä¼ id_rsa>ä¸Šä¼ id_rsa</h3><p>ç‚¹å‡»åšå®¢ä»“åº“çš„Settings->Secrets->Add a new secretï¼ŒNameå¡«å†™<code>ACTIONS_DEPLOY_KEY</code>ï¼ŒValueå¡«å†™<code>id_rsa</code>æ–‡ä»¶çš„å†…å®¹ã€‚</p><h2 id=åˆ©ç”¨ftp-deploy-actionä¸Šä¼ æ–‡ä»¶>åˆ©ç”¨<code>FTP-Deploy-Action</code>ä¸Šä¼ æ–‡ä»¶</h2><p>è¿™é‡Œåœ¨<code>Github actions</code>é‡Œåˆ©ç”¨<code>FTP-Deploy-Action</code>ä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨ã€‚é¡¹ç›®åœ°å€ï¼š<a class=link href=https://github.com/SamKirkland target=_blank rel=noopener>SamKirkland</a>/<a class=link href=https://github.com/SamKirkland/FTP-Deploy-Action target=_blank rel=noopener>FTP-Deploy-Action</a></p><p>é¦–å…ˆæ˜¯æ­å»ºftpæœåŠ¡å™¨ã€‚</p><h3 id=å®‰è£…vsftpd>å®‰è£…vsftpd</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo yum install vsftpd -y
</span></span></code></pre></td></tr></table></div></div><p>å®‰è£…è½¯ä»¶åŒ…åï¼Œå¯åŠ¨vsftpdï¼Œå¹¶ä½¿å…¶èƒ½å¤Ÿåœ¨å¼•å¯¼æ—¶è‡ªåŠ¨å¯åŠ¨ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl start vsftpd
</span></span><span class=line><span class=cl>sudo systemctl <span class=nb>enable</span> vsftpd
</span></span></code></pre></td></tr></table></div></div><h3 id=é…ç½®vsftpd>é…ç½®vsftpd</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /etc/vsftpd/vsftpd.conf
</span></span></code></pre></td></tr></table></div></div><p>åœ¨<code>userlist_enable=YES</code>ä¸‹é¢ï¼ŒåŠ ä¸Šï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>userlist_file</span><span class=o>=</span>/etc/vsftpd/user_list
</span></span><span class=line><span class=cl><span class=nv>userlist_deny</span><span class=o>=</span>NO
</span></span></code></pre></td></tr></table></div></div><h3 id=åˆ›å»ºftpç”¨æˆ·>åˆ›å»ºFTPç”¨æˆ·</h3><ul><li>åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·ï¼Œåä¸ºgit:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo adduser git
</span></span><span class=line><span class=cl>sudo passwd git
</span></span></code></pre></td></tr></table></div></div><ul><li>å°†ç”¨æˆ·æ·»åŠ åˆ°å…è®¸çš„FTPç”¨æˆ·åˆ—è¡¨ä¸­ï¼š</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;git&#34;</span> <span class=p>|</span> sudo tee -a /etc/vsftpd/user_list
</span></span></code></pre></td></tr></table></div></div><ul><li>è®¾ç½®æ­£ç¡®çš„æƒé™</li></ul><p>ä¸ºäº†ä½¿ftpç”¨æˆ·å¯ä»¥ä¸Šä¼ ç½‘ç«™æ–‡ä»¶åˆ°ç›¸åº”ç›®å½•ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo chmod <span class=m>755</span> /var/www/hexo
</span></span><span class=line><span class=cl>sudo chown -R git: /var/www/hexo
</span></span></code></pre></td></tr></table></div></div><ul><li>é‡å¯vsftpdæœåŠ¡ã€‚</li></ul><p>ä¿å­˜æ–‡ä»¶å¹¶é‡æ–°å¯åŠ¨vsftpdæœåŠ¡ï¼Œä»¥ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl restart vsftpd
</span></span></code></pre></td></tr></table></div></div><h2 id=é…ç½®ftp_mirror_password>é…ç½®<code>FTP_MIRROR_PASSWORD</code></h2><p>ç‚¹å‡»åšå®¢ä»“åº“çš„Settings->Secrets->Add a new secretï¼ŒNameå¡«å†™<code>FTP_MIRROR_PASSWORD</code>ï¼ŒValueå¡«å†™ç”¨æˆ·å¯†ç ã€‚</p><h2 id=é…ç½®-github-actions>é…ç½® Github actions</h2><p>åœ¨åšå®¢æ ¹ç›®å½•æ–°å»º<code>.github/workflows/gh_pages.yml</code>æ–‡ä»¶ã€‚ä»£ç ï¼ˆ<strong>ä¸æ·»åŠ ç¼“å­˜</strong>ï¼‰å¦‚ä¸‹ï¼šæœ€å¥½ä½¿ç”¨ä¸‹é¢æ·»åŠ äº†ç¼“å­˜çš„ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>GitHub Page Deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>develop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>build-deploy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Checkout master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v2.3.4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>submodules</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>  </span><span class=c># Fetch Hugo themes (true OR recursive)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>fetch-depth</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>    </span><span class=c># Fetch all history for .GitInfo and .Lastmod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Setup Hugo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>peaceiris/actions-hugo@v2.5.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>hugo-version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;latest&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>extended</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Build Hugo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>hugo --minify</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy Hugo to gh-pages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>peaceiris/actions-gh-pages@v3.8.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>github_token</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITHUB_TOKEN }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>PUBLISH_BRANCH</span><span class=p>:</span><span class=w> </span><span class=l>master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>PUBLISH_DIR</span><span class=p>:</span><span class=w> </span><span class=l>./public</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># cname:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy Hugo to Server</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>SamKirkland/FTP-Deploy-Action@4.1.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>server</span><span class=p>:</span><span class=w> </span><span class=m>104.224.191.88</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>username</span><span class=p>:</span><span class=w> </span><span class=l>git</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>password</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.FTP_MIRROR_PASSWORD }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>local-dir</span><span class=p>:</span><span class=w> </span><span class=l>./public/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>server-dir</span><span class=p>:</span><span class=w> </span><span class=l>/var/www/hexo/</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>æ·»åŠ ç¼“å­˜ï¼š</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>GitHub Page Deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>develop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>build-deploy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Checkout master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v2.3.4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>submodules</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>  </span><span class=c># Fetch Hugo themes (true OR recursive)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>fetch-depth</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>    </span><span class=c># Fetch all history for .GitInfo and .Lastmod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Setup Hugo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>peaceiris/actions-hugo@v2.5.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>hugo-version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;latest&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>extended</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Cache resources</span><span class=w> </span><span class=c># ç¼“å­˜ resource æ–‡ä»¶åŠ å¿«ç”Ÿæˆé€Ÿåº¦</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/cache@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>resources</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=c># æ£€æŸ¥ç…§ç‰‡æ–‡ä»¶å˜åŒ–</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>${{ runner.os }}-hugocache-${{ hashFiles(&#39;content/**/*&#39;) }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>restore-keys</span><span class=p>:</span><span class=w> </span><span class=l>${{ runner.os }}-hugocache-</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Build Hugo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>hugo --minify --gc</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy Hugo to gh-pages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>peaceiris/actions-gh-pages@v3.8.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>github_token</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITHUB_TOKEN }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>PUBLISH_BRANCH</span><span class=p>:</span><span class=w> </span><span class=l>master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>PUBLISH_DIR</span><span class=p>:</span><span class=w> </span><span class=l>./public</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># cname:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy Hugo to Server</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>SamKirkland/FTP-Deploy-Action@4.1.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>server</span><span class=p>:</span><span class=w> </span><span class=m>104.224.191.88</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>username</span><span class=p>:</span><span class=w> </span><span class=l>git</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>password</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.FTP_MIRROR_PASSWORD }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>local-dir</span><span class=p>:</span><span class=w> </span><span class=l>./public/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>server-dir</span><span class=p>:</span><span class=w> </span><span class=l>/var/www/hexo/</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>ç¬¬ä¸‰æ–¹ï¼š</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>GitHub Page</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>branches</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>master</span><span class=w> </span><span class=c># master æ›´æ–°è§¦å‘</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>deploy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-18.04</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=nt>submodules</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w> </span><span class=c># clone submodules</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=nt>fetch-depth</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w> </span><span class=c># å…‹éš†æ‰€æœ‰å†å²ä¿¡æ¯</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Setup Hugo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>peaceiris/actions-hugo@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=nt>hugo-version</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;0.87.0&#34;</span><span class=w> </span><span class=c># Hugo ç‰ˆæœ¬</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=nt>extended</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w> </span><span class=c># hugoæ’ä»¶ç‰ˆ Stackä¸»é¢˜ å¿…é¡»å¯ç”¨</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Cache resources</span><span class=w> </span><span class=c># ç¼“å­˜ resource æ–‡ä»¶åŠ å¿«ç”Ÿæˆé€Ÿåº¦</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/cache@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>resources</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=c># æ£€æŸ¥ç…§ç‰‡æ–‡ä»¶å˜åŒ–</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>${{ runner.os }}-hugocache-${{ hashFiles(&#39;content/**/*&#39;) }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=nt>restore-keys</span><span class=p>:</span><span class=w> </span><span class=l>${{ runner.os }}-hugocache-</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Build</span><span class=w> </span><span class=c># ç”Ÿæˆç½‘é¡µ åˆ é™¤æ— ç”¨ resource æ–‡ä»¶ å‰Šå‡ç©ºè¡Œ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>hugo --minify --gc</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy</span><span class=w> </span><span class=c># éƒ¨ç½²åˆ° GitHub Page</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>peaceiris/actions-gh-pages@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=c># å¦‚æœåœ¨åŒä¸€ä¸ªä»“åº“ä¸‹ä½¿ç”¨è¯·ä½¿ç”¨ github_token å¹¶æ³¨é‡Š deploy_key</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=c># github_token: ${{ secrets.GITHUB_TOKEN }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=nt>deploy_key</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.ACTIONS_DEPLOY_KEY }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=c># å¦‚æœåœ¨åŒä¸€ä¸ªä»“åº“è¯·æ³¨é‡Š</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=nt>external_repository</span><span class=p>:</span><span class=w> </span><span class=c># ä½ çš„ GitHub page ä»“åº“ example/example.github.io</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=nt>publish_dir</span><span class=p>:</span><span class=w> </span><span class=l>./public</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=nt>user_name</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;github-actions[bot]&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=nt>user_email</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;github-actions[bot]@users.noreply.github.com&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=nt>full_commit_message</span><span class=p>:</span><span class=w> </span><span class=l>Deploy from ${{ github.repository }}@${{ github.sha }} ğŸš€</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=æäº¤æºç >æäº¤æºç </h3><p>åˆå§‹åŒ–gitï¼Œæ–°å»ºå¹¶åˆ‡æ¢åˆ°<code>develop</code>åˆ†æ”¯ï¼Œå°†æºç æäº¤åˆ°<code>develop</code>åˆ†æ”¯ã€‚ç¨ç­‰ç‰‡åˆ»ï¼Œgithub actionä¼šè‡ªåŠ¨éƒ¨ç½²blogåˆ°<code>master</code>åˆ†æ”¯ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git init
</span></span><span class=line><span class=cl>git checkout -b develop
</span></span><span class=line><span class=cl>git remote add origin git@github.com:iwyang/iwyang.github.io.git
</span></span><span class=line><span class=cl>git add .
</span></span><span class=line><span class=cl>git commit -m <span class=s2>&#34;å¤‡ä»½æºç &#34;</span>
</span></span><span class=line><span class=cl>git push --force origin develop
</span></span></code></pre></td></tr></table></div></div><h3 id=æœ€ç»ˆéƒ¨ç½²è„šæœ¬>æœ€ç»ˆéƒ¨ç½²è„šæœ¬</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> -e <span class=s2>&#34;\033[0;32mDeploying updates to gitee...\033[0m&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># backup</span>
</span></span><span class=line><span class=cl>git config --global core.autocrlf <span class=nb>false</span>
</span></span><span class=line><span class=cl>git add .
</span></span><span class=line><span class=cl>git commit -m <span class=s2>&#34;site backup&#34;</span>
</span></span><span class=line><span class=cl>git push origin develop --force
</span></span></code></pre></td></tr></table></div></div><h2 id=æœ¬åœ°æ“ä½œ>æœ¬åœ°æ“ä½œ</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git clone -b develop git@github.com:iwyang/iwyang.github.io.git blog --recursive
</span></span></code></pre></td></tr></table></div></div><p>å› ä¸ºä½¿ç”¨<code>Submodule</code>ç®¡ç†ä¸»é¢˜ï¼Œæ‰€ä»¥æœ€åè¦åŠ ä¸Š <code>--recursive</code>ï¼Œå› ä¸ºä½¿ç”¨ git clone å‘½ä»¤é»˜è®¤ä¸ä¼šæ‹‰å–é¡¹ç›®ä¸­çš„å­æ¨¡å—ï¼Œä½ ä¼šå‘ç°ä¸»é¢˜æ–‡ä»¶æ˜¯ç©ºçš„ã€‚ï¼ˆå¦å¤–ä¸€ç§æ–¹æ³•ï¼š<code>git submodule init && git submodule update</code>ï¼‰</p><h3 id=åŒæ­¥æ›´æ–°æºæ–‡ä»¶>åŒæ­¥æ›´æ–°æºæ–‡ä»¶</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git pull
</span></span></code></pre></td></tr></table></div></div><h3 id=åŒæ­¥ä¸»é¢˜æ–‡ä»¶>åŒæ­¥ä¸»é¢˜æ–‡ä»¶</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git submodule update --remote
</span></span></code></pre></td></tr></table></div></div><p>è¿è¡Œæ­¤å‘½ä»¤åï¼Œ Git å°†ä¼šè‡ªåŠ¨è¿›å…¥å­æ¨¡å—ç„¶åæŠ“å–å¹¶æ›´æ–°ï¼Œæ›´æ–°åé‡æ–°æäº¤ä¸€éï¼Œå­æ¨¡å—æ–°çš„è·Ÿè¸ªä¿¡æ¯ä¾¿ä¹Ÿä¼šè®°å½•åˆ°ä»“åº“ä¸­ã€‚è¿™æ ·å°±ä¿è¯ä»“åº“ä¸»é¢˜æ˜¯æœ€æ–°çš„ã€‚</p><h2 id=æœåŠ¡å™¨é€šè¿‡gitæ‹‰å–æ›´æ–°>æœåŠ¡å™¨é€šè¿‡gitæ‹‰å–æ›´æ–°</h2><p>2021.8.15 å·²ç»ä¸ç”¨æ­¤æ–¹æ³•ï¼Œç°åœ¨ç›´æ¥åœ¨<code>Github actions</code>åˆ©ç”¨<code>FTP-Deploy-Action</code>ä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨ã€‚</p><h3 id=å…‹éš†ä»“åº“>å…‹éš†ä»“åº“</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rm -rf /var/www/hexo
</span></span><span class=line><span class=cl>git clone git@github.com:iwyang/iwyang.github.io.git /var/www/hexo
</span></span></code></pre></td></tr></table></div></div><h3 id=å‡ºç°é—®é¢˜>å‡ºç°é—®é¢˜</h3><p>æ‰§è¡Œä¸Šä¸€æ­¥å¯èƒ½ä¼šå‡ºç°é—®é¢˜ï¼š<code> Permission denied (publickey). Could not read from remote repository</code>ã€‚</p><p>è§£å†³æ–¹æ³•ï¼š</p><h4 id=æœåŠ¡å™¨ç”Ÿæˆssh-key>æœåŠ¡å™¨ç”Ÿæˆssh key</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>yum install rsync -y
</span></span><span class=line><span class=cl>ssh-keygen -t rsa -C <span class=s2>&#34;455343442@qq.com&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¸€è·¯å›è½¦å³å¯ï¼Œä¼šç”Ÿæˆä½ çš„ssh keyã€‚ç„¶åå†ç»ˆç«¯ä¸‹æ‰§è¡Œå‘½ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh -v git@github.com
</span></span></code></pre></td></tr></table></div></div><p>è¿™æ—¶ä¼šæŠ¥é”™ï¼Œæœ€åä¸¤å¥æ˜¯ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>No more authentication methods to try.  
</span></span><span class=line><span class=cl>ã€€ã€€Permission denied <span class=o>(</span>publickey<span class=o>)</span>.
</span></span></code></pre></td></tr></table></div></div><p>åœ¨ç»ˆç«¯å†æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh-agent -s 
</span></span></code></pre></td></tr></table></div></div><p>æ¥ç€åœ¨æ‰§è¡Œ:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh-add ~/.ssh/id_rsa
</span></span></code></pre></td></tr></table></div></div><p>å‡ºç°é—®é¢˜ï¼š<code>Could not open a connection to your authentication agent.</code></p><p>è§£å†³æ–¹æ³•ï¼šä½¿ç”¨ï¼š<code>ssh-agent bash</code> å‘½ä»¤ï¼Œç„¶åå†æ¬¡ä½¿ç”¨<code>ssh-add ~/.ssh/id_rsa_name</code>è¿™ä¸ªå‘½ä»¤å°±æ²¡é—®é¢˜äº†ã€‚(<strong>æ³¨æ„</strong>ï¼šIdentity added: &mldr;è¿™æ˜¯ssh keyæ–‡ä»¶è·¯å¾„çš„ä¿¡æ¯ï¼Œå¦‚<code>/.ssh/id_rsa</code>)</p><h4 id=é…ç½®github>é…ç½®github</h4><p>æ‰“å¼€ä½ åˆšåˆšç”Ÿæˆçš„<code>id_rsa.pub</code>ï¼Œå°†é‡Œé¢çš„å†…å®¹å¤åˆ¶ï¼Œè¿›å…¥ä½ çš„githubè´¦å·ï¼Œåœ¨settingsä¸‹ï¼ŒSSH and GPG keysä¸‹new SSH keyï¼Œç„¶åå°†id_rsa.pubé‡Œçš„å†…å®¹å¤åˆ¶åˆ°Keyä¸­ï¼Œå®ŒæˆåAdd SSH Keyã€‚</p><h4 id=éªŒè¯key>éªŒè¯Key</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh -T git@github.com 
</span></span></code></pre></td></tr></table></div></div><h3 id=è®¾ç½®crontabå®šæ—¶ä»»åŠ¡>è®¾ç½®crontabå®šæ—¶ä»»åŠ¡ï¼š</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>crontab -e
</span></span><span class=line><span class=cl>*/5 * * * * git -C /var/www/hexo pull
</span></span></code></pre></td></tr></table></div></div><p>è¿™æ ·åªè¦æäº¤æºç ç»™githubï¼Œ<code>github action</code>å°±ä¼šå¸®ä½ éƒ¨ç½²åšå®¢åˆ°<code>github page</code>ï¼ŒæœåŠ¡å™¨é€šè¿‡<code>git pull</code>å®šæ—¶æ‹‰å–æ›´æ–°ã€‚æ¢å°ç”µè„‘ä¸ç”¨å†æ­å»ºç¯å¢ƒï¼Œç›´æ¥åœ¨gtihubæ–°å»ºæˆ–è€…ä¿®æ”¹æ–‡ç« ï¼Œå‰©ä¸‹çš„å·¥ä½œå°±äº¤ç»™<code>github action</code>ã€‚æ³¨æ„å›æœ¬åœ°ç”µè„‘å…ˆ<code>git pull</code>æ‹‰å–æ›´æ–°ï¼Œå†æäº¤æºç ã€‚</p><p><strong>æ³¨æ„ï¼šå¥½åƒå…ˆè¦ä»æºç ä»“åº“cloneä¸€ä»½æºç åˆ°æœ¬åœ°ï¼Œæ‰èƒ½åˆ©ç”¨<code>git pull</code>æ‹‰å–githubå·²æœ‰çš„æ›´æ–°ã€‚åªæœ‰å…ˆæ‹‰å–githubå·²æœ‰çš„æ›´æ–°ï¼Œå†åœ¨æœ¬åœ°æäº¤æºç ï¼Œgithubä¸Šçš„æ›´æ–°æ‰ä¸ä¼šè¢«åˆ é™¤</strong>ã€‚</p><h2 id=é™„ä½¿ç”¨git-submoduleç®¡ç†hugoä¸»é¢˜>é™„ï¼šä½¿ç”¨Git Submoduleç®¡ç†Hugoä¸»é¢˜</h2><ul><li>å¦‚æœå…‹éš†åº“çš„æ—¶å€™è¦åˆå§‹åŒ–å­æ¨¡å—ï¼Œè¯·åŠ ä¸Š <code>--recursive</code> å‚æ•°ï¼Œå¦‚ï¼š</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git clone -b develop git@github.com:iwyang/iwyang.github.io.git blog --recursive
</span></span></code></pre></td></tr></table></div></div><ul><li>å¦‚æœå·²ç»å…‹éš†äº†ä¸»åº“ä½†æ²¡åˆå§‹åŒ–å­æ¨¡å—ï¼Œåˆ™ç”¨ï¼š</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git submodule update --init --recursive
</span></span></code></pre></td></tr></table></div></div><ul><li>å¦‚æœå·²ç»å…‹éš†å¹¶åˆå§‹åŒ–å­æ¨¡å—ï¼Œè€Œéœ€è¦ä»å­æ¨¡å—çš„æºæ›´æ–°è¿™ä¸ªå­æ¨¡å—ï¼Œåˆ™ï¼š</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git submodule update --recursive --remote
</span></span></code></pre></td></tr></table></div></div><p>æ›´æ–°ä¹‹åä¸»åº“çš„ git å·®å¼‚ä¸­ä¼šæ˜¾ç¤ºæ–°çš„ SHA ç ï¼ŒæŠŠè¿™ä¸ªå·®å¼‚é€‰ä¸­æäº¤å³å¯ã€‚</p><hr><ul><li>å…¶ä»–å‘½ä»¤ï¼šåœ¨ä¸»ä»“åº“æ›´æ–°æ‰€æœ‰å­æ¨¡å—ï¼š<code>git submodule foreach git pull origin master</code></li></ul><h2 id=å‚è€ƒé“¾æ¥>å‚è€ƒé“¾æ¥</h2><ul><li><a class=link href=https://yanlong.me/post/deploy-blog-use-github-actions/ target=_blank rel=noopener>1.ä½¿ç”¨Github Actionsè‡ªåŠ¨ç¼–è¯‘éƒ¨ç½²åŸºäºhugoçš„åšå®¢</a></li><li><a class=link href=https://juejin.im/post/5e0d9f61f265da5d0d435a24 target=_blank rel=noopener>2.ç”¨ Hugo è‡ªåŠ¨æ„å»º æ­å»º GitHub Pages</a></li><li><a class=link href=https://blog.lunawen.com/posts/20200628-luna-tech-github-action-blog-autodeployment/ target=_blank rel=noopener>3.ä½¿ç”¨ GitHub Action è‡ªåŠ¨éƒ¨ç½²åšå®¢åˆ°è¿œç¨‹æœåŠ¡å™¨</a></li><li><a class=link href=https://frostming.com/2020/04-26/github-actions-deploy target=_blank rel=noopener>4.ä½¿ç”¨ GitHub Actions å®ç°åšå®¢è‡ªåŠ¨åŒ–éƒ¨ç½²</a></li><li><a class=link href=https://blog.csdn.net/ywl470812087/article/details/104459288 target=_blank rel=noopener>5.è§£å†³git@github.com: Permission denied (publickey). Could not read from remote repository</a></li><li><a class=link href=https://yihui.org/cn/2017/03/git-submodule/ target=_blank rel=noopener>6.GIT å­æ¨¡å—</a></li><li><a class=link href=https://zj-git-guide.readthedocs.io/zh_CN/stable/basic/%E5%AD%90%E6%A8%A1%E5%9D%97.html target=_blank rel=noopener>7.å­æ¨¡å—</a></li><li><a class=link href=https://blog.zhixuan.dev/posts/ce103e3b/ target=_blank rel=noopener>8.Stackä¸»é¢˜ + GitHub Action</a></li></ul></div><div class="shuoshuo-tags meta-wrapper" style=margin-top:15px!important;margin-bottom:5px!important;gap:10px!important><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:14px;height:14px;color:var(--card-text-color-secondary)"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
<a href=/tags/hugo/ class="meta-item shuoshuo-tag" title="æŸ¥çœ‹æ ‡ç­¾: hugo"><span>#hugo</span>
</a><a href=/tags/github/ class="meta-item shuoshuo-tag" title="æŸ¥çœ‹æ ‡ç­¾: github"><span>#github</span></a></div><div class=shuoshuo-footer-info><div class="shuoshuo-edit-link meta-wrapper" style=gap:15px!important><a href=https://github.com/iwyang/iwyang.github.io/edit/develop/content/post/hugo%e5%88%a9%e7%94%a8Github%20Actions%e8%87%aa%e5%8a%a8%e6%9e%84%e5%bb%ba%e5%8d%9a%e5%ae%a2/index.md target=_blank rel="noopener noreferrer" class=meta-item title="å‰å¾€ GitHub ç¼–è¾‘æ­¤é¡µ"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
<span>ç¼–è¾‘æ­¤é¡µ</span>
</a><span class=separator>|</span>
<a class="meta-item git-hash-text" href=https://github.com/iwyang/iwyang.github.io/commit/26a215ebb8fca78d98f384856b8ab5e0e2056333 target=_blank rel="noopener noreferrer" title="Commit Hash: 26a215e">#26a215e</a></div></div></article></div><div class=waterfall-column id=waterfall-right></div></div><div class=shuoshuo-pagination></div><footer class=site-footer><style>.site-footer .running-time,.site-footer .powerby{font-size:14px!important;line-height:1.6!important;margin:10px 0!important;display:block!important;font-weight:400!important}.site-footer .running-time,.site-footer .running-time *,[data-scheme=dark] .site-footer .running-time,[data-scheme=dark] .site-footer .running-time *{color:#1e90ff!important}.site-footer .powerby,.site-footer .powerby *{color:var(--sys-color-text-muted)!important}[data-scheme=dark] .site-footer .powerby,[data-scheme=dark] .site-footer .powerby *{color:rgba(255,255,255,.7)!important}.footer-separator{margin:0 6px!important;font-size:14px!important}.site-footer .running-time .footer-separator{color:#1e90ff!important;opacity:1!important}.site-footer .powerby .footer-separator{color:inherit!important}.site-footer a{text-decoration:none!important;cursor:pointer}.site-footer a:hover{text-decoration:underline!important}.site-footer .powerby a:hover{color:var(--accent-color)!important}</style><section class=copyright>&copy;
2020 -
2026 Bore's Notes</section><section class=running-time>æœ€è¿‘æ›´æ–°ï¼š<span id=site-last-update data-time=2026-02-21T04:15:48Z title="2026-02-21 04:15">--</span><span class=footer-separator>|</span>
<a href=https://github.com/iwyang/iwyang.github.io/commit/b13dfb7373bc43e02c2a7b6370addb312153a08b target=_blank rel=noopener title="Commit Hash: b13dfb7">#b13dfb7</a></section><section class=powerby>ä½¿ç”¨ <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> æ„å»º
<span class=footer-separator>|</span>
ä¸»é¢˜ <a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=4.0.0>Stack</a> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><script>(function(){var e,t,n,o,i,a,r,c,l,d,s=document.getElementById("site-last-update");s&&(n=new Date(s.getAttribute("data-time")),o=new Date,e=(o-n)/1e3,i=n.getFullYear(),a=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0"),c=String(n.getHours()).padStart(2,"0"),l=String(n.getMinutes()).padStart(2,"0"),d=i+"-"+a+"-"+r+" "+c+":"+l,s.setAttribute("title",d),t="",e<60?t="åˆšåˆš":e<3600?t=Math.floor(e/60)+" åˆ†é’Ÿå‰":e<86400?t=Math.floor(e/3600)+" å°æ—¶å‰":e<2592e3?t=Math.floor(e/86400)+" å¤©å‰":e<31536e3?t=Math.floor(e/2592e3)+" ä¸ªæœˆå‰":t=Math.floor(e/31536e3)+" å¹´å‰",s.innerText=t)})()</script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css><script src=https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js></script><script>document.addEventListener("DOMContentLoaded",()=>{const o=document.getElementById("masonry-container"),t=document.getElementById("waterfall-left"),i=document.getElementById("waterfall-right"),a=Array.from(t.querySelectorAll(".shuoshuo-card"));function n(){if(window.innerWidth<=768){a.forEach(e=>t.appendChild(e)),o.style.opacity=1;return}t.innerHTML="",i.innerHTML="",a.forEach(e=>{t.offsetHeight<=i.offsetHeight?t.appendChild(e):i.appendChild(e)}),o.style.opacity=1}n(),window.addEventListener("resize",n);const s=o.querySelectorAll("img");let e=0;s.length>0?s.forEach(t=>{t.complete?(e++,e===s.length&&n()):(t.addEventListener("load",()=>{e++,e===s.length&&n()}),t.addEventListener("error",()=>{e++,e===s.length&&n()}))}):o.style.opacity=1;const r=document.querySelectorAll(".shuoshuo-content img");r.forEach(e=>{const t=e.parentElement;if(t.tagName==="A")t.hasAttribute("data-fancybox")||(t.setAttribute("data-fancybox","gallery"),t.setAttribute("data-caption",e.alt||e.title||"è¯´è¯´å›¾ç‰‡"),t.classList.add("shuoshuo-image"),t.style.display="block");else{const t=document.createElement("a");t.href=e.src,t.setAttribute("data-fancybox","gallery"),t.setAttribute("data-caption",e.alt||e.title||"è¯´è¯´å›¾ç‰‡"),t.classList.add("shuoshuo-image"),t.style.display="block",e.parentNode.insertBefore(t,e),t.appendChild(e)}}),typeof Fancybox!="undefined"&&Fancybox.bind('[data-fancybox="gallery"]',{Hash:!1,Thumbs:{autoStart:!1},Toolbar:{display:{left:["infobar"],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW"],right:["slideshow","download","close"]}}});const c=new Date,l=document.querySelectorAll(".shuoshuo-time, .shuoshuo-updated-time");l.forEach(e=>d(e,c));function d(e,t){const n=e.getAttribute("datetime");if(!n)return;const s=new Date(n),o=(t-s)/1e3,i=e.querySelector("span")||e,a=u(s);if(!e.hasAttribute("title")){const t=e.classList.contains("shuoshuo-updated-time")?"æ›´æ–°äº ":"å‘å¸ƒäº ";e.setAttribute("title",t+a)}i.innerText=h(o)}function u(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0"),o=String(e.getHours()).padStart(2,"0"),i=String(e.getMinutes()).padStart(2,"0");return t+"-"+n+"-"+s+" "+o+":"+i}function h(e){return e<60?"åˆšåˆš":e<3600?Math.floor(e/60)+" åˆ†é’Ÿå‰":e<86400?Math.floor(e/3600)+" å°æ—¶å‰":e<2592e3?Math.floor(e/86400)+" å¤©å‰":e<31536e3?Math.floor(e/2592e3)+" ä¸ªæœˆå‰":Math.floor(e/31536e3)+" å¹´å‰"}})</script></main></main></div><script type=text/javascript src=/ts/main.acaf849f2b273f6a8368a58b001f336738d0c948d92e79b116467d0c7515f932.js defer></script></body></html>