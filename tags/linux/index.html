<!doctype html><html lang=zh-CN dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="åšè§‚è€Œçº¦å–ï¼Œåšç§¯è€Œè–„å‘"><title>Linux</title><link rel=canonical href=https://bore.vip/tags/linux/><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap"><link rel=stylesheet href=/scss/style.min.e0ca62bfdf40e4f4a995690d2a23469b3b89812fad1113b54d41fbfbd567c077.css><meta property='og:title' content="Linux"><meta property='og:description' content="åšè§‚è€Œçº¦å–ï¼Œåšç§¯è€Œè–„å‘"><meta property='og:url' content='https://bore.vip/tags/linux/'><meta property='og:site_name' content="Bore's Notes"><meta property='og:type' content='website'><meta property='og:updated_time' content=' 2026-02-21T11:56:46+08:00 '><meta name=twitter:title content="Linux"><meta name=twitter:description content="åšè§‚è€Œçº¦å–ï¼Œåšç§¯è€Œè–„å‘"><link rel=alternate type=application/rss+xml href=https://bore.vip/tags/linux/index.xml><link rel="shortcut icon" href=/img/avatar.png><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap" rel=stylesheet></head><body><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar.png width=170 height=170 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸ¥</span></figure><div class=site-meta><h1 class=site-name><a href=/>Bore's Notes</a></h1><h2 class=site-description>åšè§‚è€Œçº¦å–ï¼Œåšç§¯è€Œè–„å‘</h2></div></header><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>ä¸»é¡µ</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>å…³äº</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>å½’æ¡£</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>æœç´¢</span></a></li><li><a href=/link/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>é“¾æ¥</span></a></li><li><a href=/shuoshuo/><svg class="icon icon-tabler icon-tabler-message-circle" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 20l1.3-3.9A9 8 0 117.7 19L3 20"/><line x1="12" y1="12" x2="12" y2="12.01"/><line x1="8" y1="12" x2="8" y2="12.01"/><line x1="16" y1="12" x2="16" y2="12.01"/></svg>
<span>è¯´è¯´</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span></li></ol></li></ol></aside><main class="main full-width"><main class="main list-container"><style>.shuoshuo-tags-nav{display:flex;flex-wrap:wrap;gap:12px;margin-top:10px;margin-bottom:30px}.shuoshuo-tags-nav a{display:inline-flex;align-items:center;padding:6px 16px;border-radius:20px;background:var(--card-background);color:var(--card-text-color-secondary);font-size:14px;text-decoration:none;transition:all .3s ease;box-shadow:0 2px 4px rgba(0,0,0,4%);border:1px solid transparent}.shuoshuo-tags-nav a:hover{color:#1e90ff;border-color:#1e90ff}.shuoshuo-tags-nav a.active{background:#1e90ff;color:#fff!important;border-color:#1e90ff;box-shadow:0 4px 8px rgba(30,144,255,.3)}.shuoshuo-tags-nav a .tag-count{margin-left:4px;font-size:12px;opacity:.9}.meta-wrapper{display:flex!important;align-items:center!important;flex-wrap:wrap!important;line-height:1!important;gap:20px!important}.meta-item,.shuoshuo-edit-link a,.shuoshuo-time,.shuoshuo-updated-time{display:flex!important;align-items:center!important;gap:8px!important;font-size:14px!important;line-height:1!important;text-decoration:none;margin:0!important;padding:0!important;border:0!important;background:0 0!important;color:var(--card-text-color-secondary)!important;opacity:1!important;-webkit-tap-highlight-color:transparent!important;outline:none!important}.shuoshuo-meta svg,.shuoshuo-edit-link svg,.shuoshuo-time svg,.shuoshuo-updated-time svg{width:14px!important;height:14px!important;min-width:14px!important;display:block!important;margin:0!important;padding:0!important;position:static!important;transform:none!important;opacity:1!important;color:inherit!important}.meta-item span,.meta-item time,.shuoshuo-updated-time span,.shuoshuo-edit-link span{display:block!important;margin:0!important;padding:0!important;line-height:1!important;font-size:14px!important;font-family:inherit;font-weight:400!important;color:inherit!important}.shuoshuo-edit-link a,.shuoshuo-edit-link .git-hash-text{color:#1e90ff!important;transition:opacity .3s ease}.shuoshuo-edit-link .separator{color:#1e90ff!important;opacity:1!important}.shuoshuo-edit-link a:hover{opacity:.7!important;text-decoration:underline}.shuoshuo-tag{transition:color .3s ease,opacity .3s ease}.shuoshuo-tag:hover{color:#1e90ff!important;opacity:.8!important}</style><div class=shuoshuo-tags-nav><a href=/shuoshuo/>ğŸ·ï¸ å…¨éƒ¨
</a><a href=/tags/%E6%97%A5%E5%B8%B8/>#æ—¥å¸¸ <span class=tag-count>11</span>
</a><a href=/tags/%E6%8A%98%E8%85%BE/>#æŠ˜è…¾ <span class=tag-count>5</span>
</a><a href=/tags/%E8%BF%BD%E7%95%AA/>#è¿½ç•ª <span class=tag-count>4</span></a></div><div class=shuoshuo-list id=masonry-container style="opacity:0;transition:opacity .4s ease"><div class=waterfall-column id=waterfall-left><article class=shuoshuo-card><div class=shuoshuo-header><div class="shuoshuo-meta meta-wrapper"><time class="shuoshuo-time meta-item" datetime=2024-04-06T17:19:21Z><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
<span>2024-04-06</span>
</time><span class="shuoshuo-updated-time meta-item" datetime=2026-02-09T22:08:24+08:00><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4A2 2 0 002 6v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121.0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
<span>2026-02-09</span></span></div></div><div class="shuoshuo-content style-cs-content article-post"><p><strong>AList å¼€æºé¡¹ç›®åœ°å€ï¼šhttps://github.com/alist-org/alist</strong></p><p><strong>AList æ–‡æ¡£ï¼šhttps://alist.nn.ci/zh/guide/</strong></p><p>æœ¬åœ°å¯åŠ¨ï¼ˆåœ¨alistæ‰€åœ¨ç›®å½•æ‰“å¼€cmdï¼‰ï¼š<code>alist server</code></p><h2 id=å®‰è£…>å®‰è£…</h2><p>é»˜è®¤å®‰è£…åœ¨ <code>/opt/alist</code> ä¸­ã€‚ è‡ªå®šä¹‰å®‰è£…è·¯å¾„ï¼Œå°†å®‰è£…è·¯å¾„ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°æ·»åŠ ï¼Œå¿…é¡»æ˜¯ç»å¯¹è·¯å¾„ï¼ˆå¦‚æœè·¯å¾„ä»¥ alist ç»“å°¾ï¼Œåˆ™ç›´æ¥å®‰è£…åˆ°ç»™å®šè·¯å¾„ï¼Œå¦åˆ™ä¼šå®‰è£…åœ¨ç»™å®šè·¯å¾„ alist ç›®å½•ä¸‹ï¼‰ï¼Œå¦‚ å®‰è£…åˆ° <code>/root</code>ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl># Install
</span></span><span class=line><span class=cl>curl -fsSL &#34;https://alist.nn.ci/v3.sh&#34; | bash -s install /root
</span></span><span class=line><span class=cl># update
</span></span><span class=line><span class=cl>curl -fsSL &#34;https://alist.nn.ci/v3.sh&#34; | bash -s update 
</span></span><span class=line><span class=cl># Uninstall
</span></span><span class=line><span class=cl>curl -fsSL &#34;https://alist.nn.ci/v3.sh&#34; | bash -s uninstall /root
</span></span></code></pre></td></tr></table></div></div><ul><li>å¯åŠ¨: <code>systemctl start alist</code></li><li>å…³é—­: <code>systemctl stop alist</code></li><li>çŠ¶æ€: <code>systemctl status alist</code></li><li>é‡å¯: <code>systemctl restart alist</code></li></ul><p>å®‰è£…å®Œæˆåï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>è®¿é—®åœ°å€ï¼šhttp://YOUR_IP:5244/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>é…ç½®æ–‡ä»¶è·¯å¾„ï¼š/root/alist/data/config.json
</span></span><span class=line><span class=cl>---------å¦‚ä½•è·å–å¯†ç ï¼Ÿ--------
</span></span><span class=line><span class=cl>å…ˆcdåˆ°alistæ‰€åœ¨ç›®å½•:
</span></span><span class=line><span class=cl>cd /root/alist
</span></span><span class=line><span class=cl>éšæœºè®¾ç½®æ–°å¯†ç :
</span></span><span class=line><span class=cl>./alist admin random
</span></span><span class=line><span class=cl>æˆ–è€…æ‰‹åŠ¨è®¾ç½®æ–°å¯†ç :
</span></span><span class=line><span class=cl>./alist admin set NEW_PASSWORD
</span></span><span class=line><span class=cl>----------------------------
</span></span><span class=line><span class=cl>å¯åŠ¨æœåŠ¡ä¸­
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>æŸ¥çœ‹çŠ¶æ€ï¼šsystemctl status alist
</span></span><span class=line><span class=cl>å¯åŠ¨æœåŠ¡ï¼šsystemctl start alist
</span></span><span class=line><span class=cl>é‡å¯æœåŠ¡ï¼šsystemctl restart alist
</span></span><span class=line><span class=cl>åœæ­¢æœåŠ¡ï¼šsystemctl stop alist
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>æ¸©é¦¨æç¤ºï¼šå¦‚æœç«¯å£æ— æ³•æ­£å¸¸è®¿é—®ï¼Œè¯·æ£€æŸ¥ æœåŠ¡å™¨å®‰å…¨ç»„ã€æœ¬æœºé˜²ç«å¢™ã€AlistçŠ¶æ€
</span></span></code></pre></td></tr></table></div></div><p>å¸¸ç”¨ç½‘ç›˜è§å®˜æ–¹æ–‡æ¡£</p><h2 id=æŒ‚è½½æœ¬æœºç£ç›˜>æŒ‚è½½æœ¬æœºç£ç›˜</h2><p>æŒ‚è½½è·¯å¾„ï¼š/æœ¬åœ°</p><p>æ ¹æ–‡ä»¶è·¯å¾„ï¼š/root</p><p>å…³é—­æ˜¾ç¤ºéšè—</p><h2 id=è®¾ç½®è®¿å®¢ç”¨æˆ·>è®¾ç½®è®¿å®¢ç”¨æˆ·</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>mkdir -p /root/å…±äº«
</span></span></code></pre></td></tr></table></div></div><p>è®¿å®¢åŸºæœ¬è·¯å¾„è®¾ç½®ä¸ºï¼š/æœ¬åœ°/å…±äº«</p><h2 id=é€šè¿‡raidriveæŒ‚è½½ç½‘ç›˜åˆ°æœ¬åœ°ç”µè„‘>é€šè¿‡RaiDriveæŒ‚è½½ç½‘ç›˜åˆ°æœ¬åœ°ç”µè„‘</h2><p>RaiDriveå®˜ç½‘ï¼š<a class=link href=http://www.raidrive.com/ target=_blank rel=noopener>http://www.raidrive.com</a></p><p>æŒ‚è½½æˆåŠŸåï¼Œé€šè¿‡RaiDriveæŒ‚è½½å„å¤§ç½‘ç›˜åˆ°æœ¬åœ°ç”µè„‘ä¸Š</p><p><img src=/archives/c6592a10/raidrive.jpg width=1024 height=750 loading=lazy class=gallery-image data-flex-grow=136 data-flex-basis=327px></p><h2 id=æŒ‚è½½åˆ°potplay>æŒ‚è½½åˆ°potplay</h2><p>Potplayeræ’­æ”¾å™¨æŒ‚è½½alistç½‘ç›˜é‡Œçš„è§†é¢‘</p><p><img src=/archives/c6592a10/potplayer.jpg width=1000 height=630 loading=lazy class=gallery-image data-flex-grow=158 data-flex-basis=380px></p><h2 id=æŒ‚è½½åˆ°å®‰å“>æŒ‚è½½åˆ°å®‰å“</h2><p>å®‰å“å¯ä»¥æŒ‚è½½åˆ° esæ–‡ä»¶æµè§ˆå™¨</p><p>æˆ‘çš„ç½‘ç»œâ€”å³ä¸Šè§’ä¸‰ç‚¹â€”æ–°å»ºwebdav</p><p>æœåŠ¡å™¨ï¼šIP/dav/</p><p>ç«¯å£ï¼š5244</p><p>ç”¨æˆ·åï¼šadmin</p><p>å¯†ç ï¼š</p><h2 id=æœ¬åœ°å¼€æœºå¯åŠ¨alist>æœ¬åœ°å¼€æœºå¯åŠ¨alist</h2><p>1.åœ¨<code>D:\alist-windows-amd64</code>ç›®å½•ä¸‹æ–°å»º<code>aliststar.vbs</code>ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-vb data-lang=vb><span class=line><span class=cl><span class=k>Set</span> <span class=n>ws</span> <span class=o>=</span> <span class=n>CreateObject</span><span class=p>(</span><span class=s>&#34;Wscript.Shell&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>ws</span><span class=p>.</span><span class=n>run</span> <span class=s>&#34;D:\alist-windows-amd64\alist.exe server&#34;</span><span class=p>,</span><span class=n>vbhide</span>
</span></span></code></pre></td></tr></table></div></div><p>2.æ–°å»ºaliststar.vbså¿«æ·æ–¹å¼æ”¾åˆ°æ¡Œé¢ã€‚</p><p>3.win+Ræ‰“å¼€è¿è¡Œçª—å£ï¼Œè¾“å…¥<code>shell:startup</code></p><p>4.ä¸Šé¢çš„å¿«æ·æ–¹å¼æ‹–åˆ°æ‰“å¼€çš„çª—å£</p><h2 id=é…ç½®åä»£åŸŸå>é…ç½®åä»£åŸŸå</h2><p>1.å®‰è£…nginx</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo apt install nginx -y
</span></span><span class=line><span class=cl>sudo systemctl start nginx
</span></span><span class=line><span class=cl>sudo systemctl enable nginx
</span></span></code></pre></td></tr></table></div></div><p>2.ä¸ºäº†ä¾¿äºç”³è¯·è¯ä¹¦ï¼Œéœ€è¦æ–°å»ºåä»£ç½‘ç«™ç›®å½•ï¼Œ<strong>ä¸€å®šä¸è¦åœ¨<code>/root</code>ç›®å½•ä¸Šæ–°å»º</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>mkdir</span> <span class=o>-</span><span class=n>p</span> <span class=o>/</span><span class=k>var</span><span class=o>/</span><span class=n>www</span><span class=o>/</span><span class=n>alist</span>
</span></span><span class=line><span class=cl><span class=n>cp</span> <span class=o>/</span><span class=n>usr</span><span class=o>/</span><span class=n>share</span><span class=o>/</span><span class=n>nginx</span><span class=o>/</span><span class=n>html</span><span class=o>/*</span> <span class=o>/</span><span class=k>var</span><span class=o>/</span><span class=n>www</span><span class=o>/</span><span class=n>alist</span>
</span></span></code></pre></td></tr></table></div></div><p>3.ä¸ºäº†ä½¿ä¸‹é¢ç”³è¯·è¯ä¹¦æ—¶èƒ½è®¿é—® <a class=link href=http://bore.vip/.well-known/acme-challenge/ target=_blank rel=noopener>http://bore.vip/.well-known/acme-challenge/</a>â€¦ è¿™ä¸ªé“¾æ¥ï¼Œé¦–å…ˆé…ç½®å¥½http://bore.vip/.well-known/acme-challenge/â€¦è¿™ä¸ªé“¾æ¥ï¼Œé¦–å…ˆé…ç½®å¥½Nginx 80 ç«¯å£ï¼Œä¿è¯ä¸Šè¿°ç½‘å€èƒ½é¡ºåˆ©è®¿é—®ï¼Œä»è€Œé¡ºåˆ©ç”³è¯·è¯ä¹¦ã€‚æ‰€ä»¥åœ¨ nginx é…ç½®çš„ server èŠ‚ç‚¹ä¸‹æ·»åŠ ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>location ~ /.well-known {
</span></span><span class=line><span class=cl>    allow all;
</span></span><span class=line><span class=cl>}
</span></span></code></pre></td></tr></table></div></div><p>4.åœ¨ç½‘ç«™é…ç½®æ–‡ä»¶çš„ server å­—æ®µä¸­æ·»åŠ </p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>location</span> <span class=o>/</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>proxy_set_header</span> <span class=n>X</span><span class=o>-</span><span class=n>Forwarded</span><span class=o>-</span><span class=n>For</span> <span class=o>$</span><span class=n>proxy_add_x_forwarded_for</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=n>proxy_set_header</span> <span class=n>X</span><span class=o>-</span><span class=n>Forwarded</span><span class=o>-</span><span class=n>Proto</span> <span class=o>$</span><span class=n>scheme</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=n>proxy_set_header</span> <span class=n>Host</span> <span class=o>$</span><span class=n>http_host</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=n>proxy_set_header</span> <span class=n>X</span><span class=o>-</span><span class=n>Real</span><span class=o>-</span><span class=ne>IP</span> <span class=o>$</span><span class=n>remote_addr</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=n>proxy_set_header</span> <span class=ne>Range</span> <span class=o>$</span><span class=n>http_range</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=n>proxy_set_header</span> <span class=n>If</span><span class=o>-</span><span class=ne>Range</span> <span class=o>$</span><span class=n>http_if_range</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=n>proxy_redirect</span> <span class=n>off</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=n>proxy_pass</span> <span class=n>http</span><span class=p>:</span><span class=o>//</span><span class=mf>127.0</span><span class=o>.</span><span class=mf>0.1</span><span class=p>:</span><span class=mi>5244</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=c1># the max size of file to upload</span>
</span></span><span class=line><span class=cl>  <span class=n>client_max_body_size</span> <span class=mi>20000</span><span class=n>m</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æœ€ç»ˆä¿®æ”¹ä¸ºï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>vi /etc/nginx/conf.d/alist.conf
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=l>server {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>listen       80;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>root /var/www/alist;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>index index.html index.htm index.nginx-debian.html;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>server_name  alist.bore.vip;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c>#access_log  /var/log/nginx/host.access.log  main;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>location / {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=c>#try_files $uri $uri/ =404;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=l>proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=l>proxy_set_header X-Forwarded-Proto $scheme;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=l>proxy_set_header Host $http_host;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=l>proxy_set_header X-Real-IP $remote_addr;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=l>proxy_set_header Range $http_range;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	              </span><span class=l>proxy_set_header If-Range $http_if_range;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=l>proxy_redirect off;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=l>proxy_pass http://127.0.0.1:5244;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                 </span><span class=c># the max size of file to upload</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=l>client_max_body_size 20000m;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>location ~ /.well-known {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>allow all;</span><span class=w>
</span></span></span><span class=line><span class=cl>}<span class=w>
</span></span></span><span class=line><span class=cl>}<span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>æµ‹è¯•é…ç½®æ˜¯å¦æœ‰é—®é¢˜ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>nginx -t
</span></span></code></pre></td></tr></table></div></div><p>é‡å¯ Nginx ç”Ÿæ•ˆï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>systemctl restart nginx
</span></span></code></pre></td></tr></table></div></div><h2 id=é…ç½®-ssl-è¯ä¹¦>é…ç½® SSL è¯ä¹¦</h2><h4 id=å®‰è£…-certbot>å®‰è£… Certbot</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo apt-get install letsencrypt -y
</span></span></code></pre></td></tr></table></div></div><h4 id=ä½¿ç”¨-webroot-è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦>ä½¿ç”¨ webroot è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>certbot</span> <span class=n>certonly</span> <span class=o>--</span><span class=n>webroot</span> <span class=o>-</span><span class=n>w</span> <span class=o>/</span><span class=k>var</span><span class=o>/</span><span class=n>www</span><span class=o>/</span><span class=n>alist</span> <span class=o>-</span><span class=n>d</span> <span class=n>alist</span><span class=o>.</span><span class=n>bore</span><span class=o>.</span><span class=n>vip</span> <span class=o>-</span><span class=n>m</span> <span class=mi>455343442</span><span class=err>@</span><span class=n>qq</span><span class=o>.</span><span class=n>com</span> <span class=o>--</span><span class=n>agree</span><span class=o>-</span><span class=n>tos</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=ç¼–è¾‘-nginx>ç¼–è¾‘ <code>Nginx</code></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>vi /etc/nginx/conf.d/alist.conf
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=l>server {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>listen 80;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c>#listen [::]:80;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>root /var/www/alist;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># Add index.php to the list if you are using PHP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>index index.html index.htm index.nginx-debian.html;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>server_name alist.bore.vip;</span><span class=w> </span><span class=c># æ­¤å¤„çš„ç¤ºä¾‹åŸŸåä¸ºqbt.example.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>location / {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=c>#try_files $uri $uri/ =404;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=l>proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=l>proxy_set_header X-Forwarded-Proto $scheme;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=l>proxy_set_header Host $http_host;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=l>proxy_set_header X-Real-IP $remote_addr;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=l>proxy_set_header Range $http_range;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	              </span><span class=l>proxy_set_header If-Range $http_if_range;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=l>proxy_redirect off;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=l>proxy_pass http://127.0.0.1:5244;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                 </span><span class=c># the max size of file to upload</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=l>client_max_body_size 20000m;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=l>location ~ /.well-known {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>allow all;</span><span class=w>
</span></span></span><span class=line><span class=cl>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>listen 443 ssl;</span><span class=w> </span><span class=c># managed by Certbot</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># RSA certificate</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>ssl_certificate /etc/letsencrypt/live/alist.bore.vip/fullchain.pem;</span><span class=w> </span><span class=c># managed by Certbot</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>ssl_certificate_key /etc/letsencrypt/live/alist.bore.vip/privkey.pem;</span><span class=w> </span><span class=c># managed by Certbot</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Redirect non-https traffic to https</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>if ($scheme != &#34;https&#34;) {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>return 301 https://$host$request_uri;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>}<span class=w> </span><span class=c># managed by Certbot</span><span class=w>
</span></span></span><span class=line><span class=cl>}<span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>æµ‹è¯•é…ç½®æ˜¯å¦æœ‰é—®é¢˜ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>nginx -t
</span></span></code></pre></td></tr></table></div></div><p>é‡å¯ Nginx ç”Ÿæ•ˆï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>systemctl restart nginx
</span></span></code></pre></td></tr></table></div></div><h4 id=è‡ªåŠ¨ç»­æœŸ>è‡ªåŠ¨ç»­æœŸ</h4><p>Letâ€™s Encrypt çš„è¯ä¹¦æœ‰æ•ˆæœŸä¸º 90 å¤©ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡ crontab å®šæ—¶è¿è¡Œå‘½ä»¤æ›´æ–°è¯ä¹¦ã€‚</p><p>å…ˆè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æµ‹è¯•è¯ä¹¦çš„è‡ªåŠ¨æ›´æ–°ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>certbot renew --dry-run
</span></span></code></pre></td></tr></table></div></div><p>å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œå°±å¯ä»¥ç¼–è¾‘ crontab å®šæœŸè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>crontab -e
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>30 2 * */2 * /usr/bin/certbot renew --quiet &amp;&amp; /bin/systemctl restart nginx
</span></span></code></pre></td></tr></table></div></div><p>æŸ¥çœ‹è¯ä¹¦æœ‰æ•ˆæœŸçš„å‘½ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>openssl x509 -noout -dates -in /etc/letsencrypt/live/alist.bore.vip/cert.pem
</span></span></code></pre></td></tr></table></div></div><h2 id=ä¿®æ”¹é…ç½®æ–‡ä»¶>ä¿®æ”¹é…ç½®æ–‡ä»¶</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>vi /root/alist/data/config.json
</span></span></code></pre></td></tr></table></div></div><p>ä½ å¯èƒ½æ³¨æ„åˆ°äº†ï¼Œå…¶ä¸­æœ‰ cert_fileå’Œkey_fileä¸¤æ¡é…ç½®ï¼Œæ­£å¯¹åº”ç€ä¸Šæ¬¡ç”³è¯·è¯ä¹¦æœ€åè¾“å‡ºçš„<code>Certificate is saved at:</code>å’Œ<code>Key is saved at:</code>ï¼ŒæŠŠåé¢çš„æ–‡ä»¶è·¯å¾„å¡«è¿›å»ï¼Œå°±é…ç½®å¥½è¯ä¹¦æ–‡ä»¶äº†</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>systemctl restart alist
</span></span></code></pre></td></tr></table></div></div><h2 id=potplayeræ— è¾¹æ¡†é€æ˜ç¾åŒ–>potplayeræ— è¾¹æ¡†é€æ˜ç¾åŒ–</h2><p>1.æ‰“å¼€æ’­æ”¾å™¨æŒ‰â€œF5â€æˆ–å³é”®PotPlayeræ’­æ”¾ç•Œé¢ç‚¹å‡»é€‰é¡¹è¿›å…¥è®¾ç½®ç•Œé¢ï¼Œç‚¹å¼€â€œåŸºæœ¬â€ç„¶åæŠŠå¯å§‹é¡¹æŠŠçª—å£ä½ç½®æ”¹æˆå±…ä¸­ï¼ŒæŠŠé»˜è®¤çš„320ä¹˜ä»¥240çš„çª—å£å°ºå¯¸ï¼Œå»ºè®®1280ä¹˜ä»¥720ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥æ”¹æˆè‡ªå·±å–œæ¬¢çš„å°ºå¯¸</p><p><img src=/archives/c6592a10/1.jpg width=751 height=564 loading=lazy class=gallery-image data-flex-grow=133 data-flex-basis=319px></p><p>2.ç„¶åæŠŠé»˜è®¤çš®è‚¤ä¸‹çš„è§†é¢‘ä¸‹è‡ªåŠ¨éšè—å’Œå…¨å±æ—¶é˜²æ­¢é®ç›–è¿›è¡Œå‹¾é€‰</p><p><img src=/archives/c6592a10/2.jpg width=746 height=563 loading=lazy class=gallery-image data-flex-grow=132 data-flex-basis=318px></p><p>3.æ¥ç€æŠŠæ’­æ”¾é‡Œé¢çš„çª—å£å°ºå¯¸æ”¹æˆæ— è¾¹æ¡†å°ºå¯¸</p><p><img src=/archives/c6592a10/3.jpg width=700 height=526 loading=lazy class=gallery-image data-flex-grow=133 data-flex-basis=319px></p><p>4.çš®è‚¤å®‰è£…ä¹Ÿéå¸¸ç®€å•ï¼Œç›´æ¥æ‰“å¼€PotPlayerçš®è‚¤è®¾ç½®ï¼Œç„¶åé€‰æ‹©æ‰“å¼€çš®è‚¤æ–‡ä»¶å¤¹ï¼Œå°†ä¸‹è½½çš„çš®è‚¤ç²˜è´´è¿›å»ã€‚</p><h2 id=å‚è€ƒé“¾æ¥>å‚è€ƒé“¾æ¥</h2><p><a class=link href=https://www.freedidi.com/7539.html target=_blank rel=noopener>1.Alist æŒ‚è½½é˜¿é‡Œäº‘ç›˜ã€ç™¾åº¦ç½‘ç›˜ã€è¿…é›·äº‘ç›˜ã€123ç½‘ç›˜ç­‰</a></p><p><a class=link href=https://dewx.top/2024/03/08/alist/#toc-head-10 target=_blank rel=noopener>2.éƒ¨ç½²AListç§æœ‰äº‘ç›˜</a></p><p><a class=link href=https://www.mailset.top/2024/02/05/letsencrypt%E5%85%8D%E8%B4%B9%E8%AF%81%E4%B9%A6%E7%94%B3%E8%AF%B7-Certbot/ target=_blank rel=noopener>3.letsencryptå…è´¹è¯ä¹¦ç”³è¯·&ndash;Certbot</a></p><p><a class=link href=https://blog.csdn.net/weixin_45544638/article/details/120627648 target=_blank rel=noopener>4.potplayeræ— è¾¹æ¡†é€æ˜ç¾åŒ–æ•™ç¨‹</a></p></div><div class="shuoshuo-tags meta-wrapper" style=margin-top:15px!important;margin-bottom:5px!important;gap:10px!important><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:14px;height:14px;color:var(--card-text-color-secondary)"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
<a href=/tags/linux/ class="meta-item shuoshuo-tag" title="æŸ¥çœ‹æ ‡ç­¾: linux"><span>#linux</span></a></div><div class=shuoshuo-footer-info><div class="shuoshuo-edit-link meta-wrapper" style=gap:15px!important><a href=https://github.com/iwyang/iwyang.github.io/edit/develop/content/post/Alist%e6%8c%82%e8%bd%bd%e7%bd%91%e7%9b%98/index.md target=_blank rel="noopener noreferrer" class=meta-item title="å‰å¾€ GitHub ç¼–è¾‘æ­¤é¡µ"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
<span>ç¼–è¾‘æ­¤é¡µ</span>
</a><span class=separator>|</span>
<a class="meta-item git-hash-text" href=https://github.com/iwyang/iwyang.github.io/commit/84e6bb501103ad84c414f9f438bf4cb7c38b876b target=_blank rel="noopener noreferrer" title="Commit Hash: 84e6bb5">#84e6bb5</a></div></div></article><article class=shuoshuo-card><div class=shuoshuo-header><div class="shuoshuo-meta meta-wrapper"><time class="shuoshuo-time meta-item" datetime=2023-07-18T19:36:29Z><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
<span>2023-07-18</span>
</time><span class="shuoshuo-updated-time meta-item" datetime=2026-02-18T15:52:01+08:00><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4A2 2 0 002 6v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121.0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
<span>2026-02-18</span></span></div></div><div class="shuoshuo-content style-cs-content article-post"><p>Debian10 ä¸Šå®‰è£…éƒ¨åˆ†åº”ç”¨ï¼Œé€Ÿåº¦å‡ ä¹ä¸º0ï¼Œè‡³å°‘éœ€è¦Debian11ä»¥ä¸Šï¼Œ512Må†…å­˜è¶³å¤Ÿã€‚</p><h2 id=å®‰è£…æ¡Œé¢ç¯å¢ƒå’ŒvncæœåŠ¡å™¨>å®‰è£…æ¡Œé¢ç¯å¢ƒå’ŒVNCæœåŠ¡å™¨</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒDebian 11çš„æœåŠ¡å™¨å¹¶æ²¡æœ‰å®‰è£…å›¾å½¢åŒ–æ¡Œé¢ç¯å¢ƒæˆ–VNCæœåŠ¡å™¨ï¼Œæ‰€ä»¥ä½ å°†ä»å®‰è£…è¿™äº›å¼€å§‹ã€‚
åœ¨é€‰æ‹© VNC æœåŠ¡å™¨å’Œæ¡Œé¢ç¯å¢ƒæ–¹é¢ï¼Œæ‚¨æœ‰å¾ˆå¤šé€‰æ‹©ã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œä½ å°†å®‰è£…æœ€æ–°çš„Xfceæ¡Œé¢ç¯å¢ƒå’ŒTightVNCè½¯ä»¶åŒ…ï¼Œè¿™äº›è½¯ä»¶åŒ…å¯ä»Ubuntuå®˜æ–¹ä»“åº“è·å¾—ã€‚Xfceå’ŒTightVNCéƒ½ä»¥è½»é‡çº§å’Œå¿«é€Ÿè‘—ç§°ï¼Œè¿™å°†æœ‰åŠ©äºç¡®ä¿å³ä½¿åœ¨è¾ƒæ…¢çš„äº’è”ç½‘è¿æ¥ä¸Šï¼ŒVNCè¿æ¥ä¹Ÿèƒ½é¡ºåˆ©å’Œç¨³å®šã€‚</p><p>0.å¦‚æœæ–°è£…ç³»ç»Ÿï¼Œå‚è€ƒ:<a class=link href=/archives/9eb70758/#vi%e6%97%a0%e6%b3%95%e6%ad%a3%e5%b8%b8%e4%bd%bf%e7%94%a8><code>vi</code> æ— æ³•æ­£å¸¸ä½¿ç”¨</a></p><p>1.ç”¨SSHè¿æ¥åˆ°ä½ çš„æœåŠ¡å™¨åï¼Œæ›´æ–°ä½ çš„è½¯ä»¶åŒ…åˆ—è¡¨ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=n>sudo</span><span class=w> </span><span class=n>apt</span><span class=w> </span><span class=k>update</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>2.ç°åœ¨åœ¨ä½ çš„æœåŠ¡å™¨ä¸Šå®‰è£…Xfceæ¡Œé¢ç¯å¢ƒï¼Œä»¥åŠ<code>xfce4-goodies</code> åŒ…ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=n>sudo</span><span class=w> </span><span class=n>apt</span><span class=w> </span><span class=n>install</span><span class=w> </span><span class=n>xfce4</span><span class=w> </span><span class=n>xfce4</span><span class=o>-</span><span class=n>goodies</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>åœ¨å®‰è£…è¿‡ç¨‹ä¸­ï¼Œä½ å¯èƒ½ä¼šè¢«æç¤ºä¸ºXfceé€‰æ‹©ä¸€ä¸ªé»˜è®¤çš„æ˜¾ç¤ºç®¡ç†å™¨ã€‚æ˜¾ç¤ºç®¡ç†å™¨æ˜¯ä¸€ä¸ªå…è®¸ä½ é€šè¿‡å›¾å½¢ç•Œé¢é€‰æ‹©å’Œç™»å½•åˆ°æ¡Œé¢ç¯å¢ƒçš„ç¨‹åºã€‚ä½ åªæœ‰åœ¨ç”¨VNCå®¢æˆ·ç«¯è¿æ¥æ—¶æ‰ä¼šä½¿ç”¨Xfceï¼Œåœ¨è¿™äº›Xfceä¼šè¯ä¸­ï¼Œä½ å·²ç»ä»¥ä½ çš„éroot Debianç”¨æˆ·èº«ä»½ç™»å½•äº†ã€‚æ‰€ä»¥åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œä½ å¯¹æ˜¾ç¤ºç®¡ç†å™¨çš„é€‰æ‹©å¹¶ä¸é‡è¦ã€‚é€‰æ‹©å…¶ä¸­ä¸€ä¸ªï¼Œç„¶åæŒ‰<code>ENTER</code> ã€‚</p><p>3.å®‰è£…å®Œæˆåï¼Œå®‰è£…TightVNCæœåŠ¡å™¨ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=n>sudo</span><span class=w> </span><span class=n>apt</span><span class=w> </span><span class=n>install</span><span class=w> </span><span class=n>tightvncserver</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><blockquote><p>å¦‚æœæ˜¯debian 11ï¼Œè¿˜éœ€è¦å®‰è£…dbus-x11 ä¾èµ–å…³ç³»ï¼Œä»¥ç¡®ä¿ä¸VNCæœåŠ¡å™¨çš„æ­£å¸¸è¿æ¥:<code>sudo apt install tightvncserver</code></p></blockquote><p>4.ä¸ºäº†åœ¨å®‰è£…åå®ŒæˆVNCæœåŠ¡å™¨çš„åˆå§‹é…ç½®ï¼Œä½¿ç”¨<code>vncserver</code> å‘½ä»¤æ¥è®¾ç½®å®‰å…¨å¯†ç å¹¶åˆ›å»ºåˆå§‹é…ç½®æ–‡ä»¶ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=n>vncserver</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>æ¥ä¸‹æ¥ä¼šæœ‰ä¸€ä¸ªæç¤ºï¼Œè¦æ±‚è¾“å…¥å¹¶éªŒè¯ä¸€ä¸ªå¯†ç ï¼Œä»¥ä¾¿è¿œç¨‹è®¿é—®ä½ çš„æœºå™¨ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Output
</span></span><span class=line><span class=cl>You will require a password to access your desktops.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Password:
</span></span><span class=line><span class=cl>Verify:
</span></span></code></pre></td></tr></table></div></div><p>å¯†ç çš„é•¿åº¦å¿…é¡»åœ¨å…­åˆ°å…«ä¸ªå­—ç¬¦ä¹‹é—´ã€‚è¶…è¿‡å…«ä¸ªå­—ç¬¦çš„å¯†ç å°†è¢«è‡ªåŠ¨æˆªæ–­ã€‚</p><p>ä¸€æ—¦ä½ éªŒè¯äº†å¯†ç ï¼Œä½ å¯ä»¥é€‰æ‹©åˆ›å»ºä¸€ä¸ªä»…ä¾›æŸ¥çœ‹çš„å¯†ç ã€‚ä½¿ç”¨åªæŸ¥çœ‹å¯†ç ç™»å½•çš„ç”¨æˆ·å°†ä¸èƒ½ç”¨é¼ æ ‡æˆ–é”®ç›˜æ§åˆ¶VNCå®ä¾‹ã€‚å¦‚æœä½ æƒ³ç”¨ä½ çš„VNCæœåŠ¡å™¨å‘å…¶ä»–äººæ¼”ç¤ºä¸€äº›ä¸œè¥¿ï¼Œè¿™æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„é€‰é¡¹ï¼Œä½†è¿™ä¸æ˜¯å¿…éœ€çš„ã€‚<code>Would you like to enter a view-only password (y/n)? n</code></p><p>ç„¶åï¼Œè¯¥è¿‡ç¨‹ä¸ºæœåŠ¡å™¨åˆ›å»ºå¿…è¦çš„é»˜è®¤é…ç½®æ–‡ä»¶å’Œè¿æ¥ä¿¡æ¯ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>OutputWould you like to enter a view-only password (y/n)? n
</span></span><span class=line><span class=cl>xauth:  file /home/sammy/.Xauthority does not exist
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>New &#39;X&#39; desktop is your_hostname:1
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Creating default startup script /home/sammy/.vnc/xstartup
</span></span><span class=line><span class=cl>Starting applications specified in /home/sammy/.vnc/xstartup
</span></span><span class=line><span class=cl>Log file is /home/sammy/.vnc/your_hostname:1.log
</span></span></code></pre></td></tr></table></div></div><p>æ¥ä¸‹æ¥ï¼Œé…ç½®å®ƒä»¥å¯åŠ¨Xfceå¹¶é€šè¿‡å›¾å½¢ç•Œé¢è®¿é—®æœåŠ¡å™¨ã€‚</p><p>5.æç¤º<code>æ‰§è¡Œå­è¿›ç¨‹â€œdbus-launchâ€å¤±è´¥</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo apt-get install dbus-x11
</span></span></code></pre></td></tr></table></div></div><h2 id=é…ç½®vncæœåŠ¡å™¨>é…ç½®VNCæœåŠ¡å™¨</h2><p>VNCæœåŠ¡å™¨éœ€è¦çŸ¥é“å¯åŠ¨æ—¶è¦æ‰§è¡Œå“ªäº›å‘½ä»¤ã€‚å…·ä½“æ¥è¯´ï¼ŒVNCéœ€è¦çŸ¥é“å®ƒåº”è¯¥è¿æ¥åˆ°å“ªä¸ªå›¾å½¢æ¡Œé¢ã€‚</p><p>è¿™äº›å‘½ä»¤ä½äºä½ çš„ä¸»ç›®å½•ä¸‹<code>.vnc</code> æ–‡ä»¶å¤¹ä¸­ä¸€ä¸ªåä¸º<code>xstartup</code> çš„é…ç½®æ–‡ä»¶ä¸­ã€‚å¯åŠ¨è„šæœ¬æ˜¯åœ¨ä¸Šä¸€æ­¥è¿è¡Œ<code>vncserver</code> å‘½ä»¤æ—¶åˆ›å»ºçš„ï¼Œä½†ä½ å°†åˆ›å»ºè‡ªå·±çš„è„šæœ¬æ¥å¯åŠ¨Xfceæ¡Œé¢ã€‚</p><p>å½“VNCç¬¬ä¸€æ¬¡è¢«è®¾ç½®æ—¶ï¼Œå®ƒåœ¨ç«¯å£<code>5901</code> ï¼Œå¯åŠ¨ä¸€ä¸ªé»˜è®¤çš„æœåŠ¡å™¨å®ä¾‹ã€‚è¿™ä¸ªç«¯å£è¢«ç§°ä¸º<em>æ˜¾ç¤ºç«¯å£</em>ï¼ŒVNCç§°å…¶ä¸º<code>:1</code> ã€‚VNCå¯ä»¥åœ¨å…¶ä»–æ˜¾ç¤ºç«¯å£å¯åŠ¨å¤šä¸ªå®ä¾‹ï¼Œå¦‚<code>:2</code> ã€<code>:3</code> ï¼Œç­‰ç­‰ã€‚</p><p>å› ä¸ºä½ è¦æ”¹å˜VNCæœåŠ¡å™¨çš„é…ç½®æ–¹å¼ï¼Œæ‰€ä»¥é¦–å…ˆç”¨ä»¥ä¸‹å‘½ä»¤åœæ­¢è¿è¡Œåœ¨ç«¯å£<code>5901</code> çš„VNCæœåŠ¡å™¨å®ä¾‹ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>vncserver -kill :1
</span></span></code></pre></td></tr></table></div></div><p>ä»¥ä¸‹æ˜¯é’ˆå¯¹ä½ çš„æœåŠ¡å™¨ç¯å¢ƒçš„PIDçš„è¾“å‡ºã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Output
</span></span><span class=line><span class=cl>Killing Xtightvnc process ID 17648
</span></span></code></pre></td></tr></table></div></div><p>åœ¨ä½ ä¿®æ”¹<code>xstartup</code> æ–‡ä»¶ä¹‹å‰ï¼Œå…ˆå¤‡ä»½åŸæ–‡ä»¶ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>mv ~/.vnc/xstartup ~/.vnc/xstartup.bak
</span></span></code></pre></td></tr></table></div></div><p>ç°åœ¨åˆ›å»ºä¸€ä¸ªæ–°çš„<code>xstartup</code> æ–‡ä»¶å¹¶åœ¨ä½ å–œæ¬¢çš„æ–‡æœ¬ç¼–è¾‘å™¨ä¸­æ‰“å¼€å®ƒã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>vi ~/.vnc/xstartup
</span></span></code></pre></td></tr></table></div></div><p>åªè¦ä½ å¯åŠ¨æˆ–é‡æ–°å¯åŠ¨VNCæœåŠ¡å™¨ï¼Œè¯¥æ–‡ä»¶ä¸­çš„å‘½ä»¤å°±ä¼šè‡ªåŠ¨æ‰§è¡Œã€‚å¦‚æœä½ çš„æ¡Œé¢ç¯å¢ƒè¿˜æ²¡æœ‰å¯åŠ¨ï¼Œä½ éœ€è¦VNCæ¥å¯åŠ¨å®ƒã€‚åœ¨è¯¥æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å‘½ä»¤ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl>xrdb <span class=nv>$HOME</span>/.Xresources
</span></span><span class=line><span class=cl>startxfce4 <span class=p>&amp;</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¸‹é¢ç®€è¦ä»‹ç»ä¸€ä¸‹æ¯ä¸€è¡Œçš„ä½œç”¨ã€‚</p><ul><li><code>#!/bin/bash</code>:ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ª<a class=link href="https://link.juejin.cn?target=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FShebang_%28Unix%29" target=_blank rel=noopener>shebang</a>ã€‚åœ¨*nixå¹³å°ä¸Šçš„å¯æ‰§è¡Œçº¯æ–‡æœ¬æ–‡ä»¶ä¸­ï¼Œshebangå‘Šè¯‰ç³»ç»Ÿå°†è¯¥æ–‡ä»¶ä¼ é€’ç»™å“ªä¸ªè§£é‡Šå™¨æ¥æ‰§è¡Œã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ è¦æŠŠæ–‡ä»¶ä¼ ç»™Bashè§£é‡Šå™¨ã€‚è¿™å°†ä½¿æ¯ä¸€ä¸ªè¿ç»­çš„è¡Œè¢«å½“ä½œå‘½ä»¤æ¥æ‰§è¡Œï¼ŒæŒ‰é¡ºåºè¿›è¡Œã€‚</li><li><code>xrdb $HOME/.Xresources</code>:è¿™ä¸ªå‘½ä»¤å‘Šè¯‰VNCçš„GUIæ¡†æ¶è¯»å–ç”¨æˆ·çš„<code>.Xresources</code> æ–‡ä»¶ã€‚<code>.Xresources</code> ï¼Œç”¨æˆ·å¯ä»¥åœ¨è¿™é‡Œå¯¹å›¾å½¢æ¡Œé¢çš„æŸäº›è®¾ç½®è¿›è¡Œä¿®æ”¹ï¼Œæ¯”å¦‚ç»ˆç«¯é¢œè‰²ã€å…‰æ ‡ä¸»é¢˜å’Œå­—ä½“æ¸²æŸ“ã€‚</li><li><code>startxfce4 &</code>:è¿™ä¸ªå‘½ä»¤å‘Šè¯‰æœåŠ¡å™¨å¯åŠ¨Xfceã€‚åœ¨è¿™é‡Œä½ å¯ä»¥æ‰¾åˆ°æ‰€æœ‰ä½ éœ€è¦çš„å›¾å½¢è½¯ä»¶ï¼Œä»¥ä¾¿èˆ’é€‚åœ°ç®¡ç†ä½ çš„æœåŠ¡å™¨ã€‚</li></ul><p>å½“ä½ å®Œæˆåï¼Œä¿å­˜å¹¶é€€å‡ºä½ çš„ç¼–è¾‘å™¨ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯<code>nano</code> ï¼Œä½ å¯ä»¥é€šè¿‡æŒ‰<code>CTRL+X</code> ï¼Œç„¶åæŒ‰<code>Y</code> ï¼Œå†æŒ‰<code>ENTER</code> ã€‚</p><p>ä¸ºäº†ç¡®ä¿VNCæœåŠ¡å™¨èƒ½å¤Ÿæ­£ç¡®ä½¿ç”¨è¿™ä¸ªæ–°çš„å¯åŠ¨æ–‡ä»¶ï¼Œä½ éœ€è¦ä½¿å®ƒå¯æ‰§è¡Œã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo chmod +x ~/.vnc/xstartup
</span></span></code></pre></td></tr></table></div></div><p>ç°åœ¨ï¼Œé‡æ–°å¯åŠ¨VNCæœåŠ¡å™¨ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>vncserver
</span></span></code></pre></td></tr></table></div></div><p>è¾“å‡ºç»“æœå°†ç±»ä¼¼äºä»¥ä¸‹å†…å®¹ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Output
</span></span><span class=line><span class=cl>New &#39;X&#39; desktop is your_hostname:1
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Starting applications specified in /home/sammy/.vnc/xstartup
</span></span><span class=line><span class=cl>Log file is /home/sammy/.vnc/your_hostname:1.log
</span></span></code></pre></td></tr></table></div></div><h2 id=é…ç½®é˜²ç«å¢™>é…ç½®é˜²ç«å¢™</h2><p>å¦‚æœä½ Debian 11æ­£åœ¨è¿è¡Œé˜²ç«å¢™ï¼Œå¹¶ä¸”ä½¿ç”¨<a class=link href=https://www.myfreax.com/how-to-setup-a-firewall-with-ufw-on-debian-10/ target=_blank rel=noopener>ufw</a>ä½œä¸º<a class=link href=https://www.myfreax.com/how-to-setup-a-firewall-with-ufw-on-debian-10/ target=_blank rel=noopener>é˜²ç«å¢™</a>ç®¡ç†å·¥å…·ã€‚åˆ™éœ€è¦æ‰“å¼€ç«¯å£5901çš„è¿æ¥ã€‚</p><p>å¦‚æœä½ æ˜¾ç¤ºç«¯å£æ˜¯<code>:2</code>ã€‚åˆ™éœ€è¦æ‰“å¼€ç«¯å£5902çš„è¿æ¥ï¼Œä»¥æ­¤ç±»æ¨ï¼Œè¯·éšæ—¶æ·»åŠ ä½ éœ€è¦å…è®¸çš„ç«¯å£ã€‚</p><p>åœ¨æœ¬æ•™ç¨‹ä¸­æˆ‘ä»¬å°†æ‰“å¼€ç«¯å£5901ï¼Œè¿è¡Œufwå‘½ä»¤<code>sudo ufw allow 5901</code>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo ufw allow 5901
</span></span></code></pre></td></tr></table></div></div><p>é…ç½®åˆ°ä½åï¼Œä½ å°±å¯ä»¥ä»ä½ çš„æœ¬åœ°æœºå™¨è¿æ¥åˆ°VNCæœåŠ¡å™¨äº†ã€‚</p><h2 id=å®‰å…¨åœ°è¿æ¥vncæ¡Œé¢>å®‰å…¨åœ°è¿æ¥VNCæ¡Œé¢</h2><p>è¿™éƒ¨åˆ†å†…å®¹å‚è€ƒï¼š<a class=link href=https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-vnc-on-debian-10#step-3-connecting-the-vnc-desktop-securely target=_blank rel=noopener>Step 3 â€” Connecting the VNC Desktop Securely</a></p><p>æˆ‘ç›´æ¥ç”¨çš„ï¼š<a class=link href=https://www.realvnc.com/en/connect/download/viewer/ target=_blank rel=noopener>VNC Viewer</a></p><h2 id=ä½œä¸ºç³»ç»ŸæœåŠ¡è¿è¡Œvnc>ä½œä¸ºç³»ç»ŸæœåŠ¡è¿è¡ŒVNC</h2><p>æ¥ä¸‹æ¥ï¼Œä½ å°†æŠŠVNCæœåŠ¡å™¨è®¾ç½®ä¸ºä¸€ä¸ªsystemdæœåŠ¡ã€‚ä½ å¯ä»¥åƒå…¶ä»–æœåŠ¡ä¸€æ ·ï¼Œæ ¹æ®éœ€è¦å¯åŠ¨ã€åœæ­¢å’Œé‡å¯å®ƒã€‚è¿™ä¹Ÿå°†ç¡®ä¿VNCåœ¨ä½ çš„æœåŠ¡å™¨é‡å¯æ—¶ä¹Ÿèƒ½å¯åŠ¨ã€‚</p><p>é¦–å…ˆï¼Œç”¨ä½ å–œæ¬¢çš„æ–‡æœ¬ç¼–è¾‘å™¨åˆ›å»ºä¸€ä¸ªåä¸º<code>/etc/systemd/system/vncserver@.service</code> çš„æ–°å•å…ƒæ–‡ä»¶ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo vi /etc/systemd/system/vncserver@.service
</span></span></code></pre></td></tr></table></div></div><p>åå­—åé¢çš„<code>@</code> ç¬¦å·å°†è®©ä½ ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œä½ å¯ä»¥åœ¨æœåŠ¡é…ç½®ä¸­ä½¿ç”¨ã€‚ä½ å°†ç”¨å®ƒæ¥æŒ‡å®šä½ åœ¨ç®¡ç†æœåŠ¡æ—¶è¦ä½¿ç”¨çš„VNCæ˜¾ç¤ºç«¯å£ã€‚</p><p>åœ¨æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å‡ è¡Œã€‚è¯·ç¡®ä¿ä¿®æ”¹<code>User</code> ã€<code>Group</code> ã€<code>WorkingDirectory</code> ï¼Œä»¥åŠ<code>PIDFILE</code> ä¸­çš„ç”¨æˆ·åï¼Œä»¥ç¬¦åˆä½ çš„ç”¨æˆ·åã€‚</p><p><strong>å®˜æ–¹ï¼š</strong>(å¦‚æœè¦ç”¨ä¸‹é¢é…ç½®ï¼Œå…ˆå‚è€ƒï¼š<a class=link href=https://www.digitalocean.com/community/tutorials/initial-server-setup-with-debian-10 target=_blank rel=noopener>Initial Server Setup with Debian 10</a>ï¼Œè¿›è¡Œè®¾ç½®ç”¨æˆ·åã€é˜²ç«å¢™ç­‰æ“ä½œ)</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>Unit<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>Description</span><span class=o>=</span>Start TightVNC server at startup
</span></span><span class=line><span class=cl><span class=nv>After</span><span class=o>=</span>syslog.target network.target
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>Service<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>Type</span><span class=o>=</span>forking
</span></span><span class=line><span class=cl><span class=nv>User</span><span class=o>=</span>sammy
</span></span><span class=line><span class=cl><span class=nv>Group</span><span class=o>=</span>sammy
</span></span><span class=line><span class=cl><span class=nv>WorkingDirectory</span><span class=o>=</span>/home/sammy
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>PIDFile</span><span class=o>=</span>/home/sammy/.vnc/%H:%i.pid
</span></span><span class=line><span class=cl><span class=nv>ExecStartPre</span><span class=o>=</span>-/usr/bin/vncserver -kill :%i &gt; /dev/null 2&gt;<span class=p>&amp;</span><span class=m>1</span>
</span></span><span class=line><span class=cl><span class=nv>ExecStart</span><span class=o>=</span>/usr/bin/vncserver -depth <span class=m>24</span> -geometry 1280x800 :%i
</span></span><span class=line><span class=cl><span class=nv>ExecStop</span><span class=o>=</span>/usr/bin/vncserver -kill :%i
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>Install<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>WantedBy</span><span class=o>=</span>multi-user.target
</span></span></code></pre></td></tr></table></div></div><p><strong>ä¿®æ”¹ä¸ºï¼š</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>Unit<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>Description</span><span class=o>=</span>Start TightVNC server at startup
</span></span><span class=line><span class=cl><span class=nv>After</span><span class=o>=</span>syslog.target network.target
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>Service<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>Type</span><span class=o>=</span>forking
</span></span><span class=line><span class=cl><span class=nv>User</span><span class=o>=</span>root
</span></span><span class=line><span class=cl><span class=nv>Group</span><span class=o>=</span>root
</span></span><span class=line><span class=cl><span class=nv>WorkingDirectory</span><span class=o>=</span>/root
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>PIDFile</span><span class=o>=</span>/root/.vnc/%H:%i.pid
</span></span><span class=line><span class=cl><span class=nv>ExecStartPre</span><span class=o>=</span>-/usr/bin/vncserver -kill :%i &gt; /dev/null 2&gt;<span class=p>&amp;</span><span class=m>1</span>
</span></span><span class=line><span class=cl><span class=nv>ExecStart</span><span class=o>=</span>/usr/bin/vncserver -depth <span class=m>24</span> -geometry 1280x800 :%i
</span></span><span class=line><span class=cl><span class=nv>ExecStop</span><span class=o>=</span>/usr/bin/vncserver -kill :%i
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>Install<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>WantedBy</span><span class=o>=</span>multi-user.target
</span></span></code></pre></td></tr></table></div></div><p>å¦‚æœVNCå·²ç»åœ¨è¿è¡Œï¼Œ<code>ExecStartPre</code> å‘½ä»¤ä¼šåœæ­¢å®ƒã€‚<code>ExecStart</code> å‘½ä»¤å¯åŠ¨VNCï¼Œå¹¶å°†è‰²æ·±è®¾ç½®ä¸º24ä½è‰²ï¼Œåˆ†è¾¨ç‡ä¸º1280x800ã€‚ä½ ä¹Ÿå¯ä»¥ä¿®æ”¹è¿™äº›å¯åŠ¨é€‰é¡¹ä»¥æ»¡è¶³ä½ çš„éœ€è¦ã€‚å®Œæˆåä¿å­˜å¹¶å…³é—­è¯¥æ–‡ä»¶ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œè®©ç³»ç»ŸçŸ¥é“è¿™ä¸ªæ–°çš„å•å…ƒæ–‡ä»¶ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>sudo</span> <span class=n>systemctl</span> <span class=n>daemon</span><span class=o>-</span><span class=n>reload</span>
</span></span></code></pre></td></tr></table></div></div><p>ç„¶åï¼Œå¯ç”¨è¯¥å•å…ƒæ–‡ä»¶ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo systemctl enable vncserver@1.service
</span></span></code></pre></td></tr></table></div></div><p><code>@</code> åé¢çš„<code>1</code> æ ‡å¿—ç€æœåŠ¡åº”è¯¥å‡ºç°åœ¨å“ªä¸ªæ˜¾ç¤ºå·ç ä¸Šï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé»˜è®¤çš„<code>:1</code> ï¼Œæ­£å¦‚åœ¨ ä¸­è®¨è®ºçš„é‚£æ ·ã€‚</p><p>å¦‚æœVNCæœåŠ¡å™¨çš„å½“å‰å®ä¾‹ä»åœ¨è¿è¡Œï¼Œè¯·åœæ­¢å®ƒã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>vncserver -kill :1
</span></span></code></pre></td></tr></table></div></div><p>ç„¶ååƒå¯åŠ¨å…¶ä»–systemdæœåŠ¡ä¸€æ ·å¯åŠ¨å®ƒã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo systemctl start vncserver@1
</span></span></code></pre></td></tr></table></div></div><p>ä½ å¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥éªŒè¯å®ƒæ˜¯å¦å¯åŠ¨ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo systemctl status vncserver@1
</span></span></code></pre></td></tr></table></div></div><p>å¦‚æœå¯åŠ¨æ­£ç¡®ï¼Œè¾“å‡ºç»“æœå°†ç±»ä¼¼äºä¸‹é¢ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>Output</span>
</span></span><span class=line><span class=cl><span class=err>â—</span> <span class=n>vncserver</span><span class=err>@</span><span class=mf>1.</span><span class=n>service</span> <span class=o>-</span> <span class=n>Start</span> <span class=n>TightVNC</span> <span class=n>server</span> <span class=n>at</span> <span class=n>startup</span>
</span></span><span class=line><span class=cl><span class=n>Loaded</span><span class=p>:</span> <span class=n>loaded</span> <span class=p>(</span><span class=o>/</span><span class=n>etc</span><span class=o>/</span><span class=n>systemd</span><span class=o>/</span><span class=n>system</span><span class=o>/</span><span class=n>vncserver</span><span class=err>@</span><span class=o>.</span><span class=n>service</span><span class=p>;</span> <span class=n>enabled</span><span class=p>;</span> <span class=n>vendor</span> <span class=n>preset</span><span class=p>:</span> <span class=n>enabled</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>Active</span><span class=p>:</span> <span class=n>active</span> <span class=p>(</span><span class=n>running</span><span class=p>)</span> <span class=n>since</span> <span class=n>Fri</span> <span class=mi>2022</span><span class=o>-</span><span class=mi>08</span><span class=o>-</span><span class=mi>19</span> <span class=mi>16</span><span class=p>:</span><span class=mi>21</span><span class=p>:</span><span class=mi>36</span> <span class=n>UTC</span><span class=p>;</span> <span class=mi>5</span><span class=n>s</span> <span class=n>ago</span>
</span></span><span class=line><span class=cl><span class=n>Process</span><span class=p>:</span> <span class=mi>24469</span> <span class=n>ExecStartPre</span><span class=o>=/</span><span class=n>usr</span><span class=o>/</span><span class=n>bin</span><span class=o>/</span><span class=n>vncserver</span> <span class=o>-</span><span class=n>kill</span> <span class=p>:</span><span class=mi>1</span> <span class=o>&gt;</span> <span class=o>/</span><span class=n>dev</span><span class=o>/</span><span class=n>null</span> <span class=mi>2</span><span class=o>&gt;&amp;</span><span class=mi>1</span> <span class=p>(</span><span class=n>code</span><span class=o>=</span><span class=n>exited</span><span class=p>,</span> <span class=n>status</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>Process</span><span class=p>:</span> <span class=mi>24474</span> <span class=n>ExecStart</span><span class=o>=/</span><span class=n>usr</span><span class=o>/</span><span class=n>bin</span><span class=o>/</span><span class=n>vncserver</span> <span class=o>-</span><span class=n>depth</span> <span class=mi>24</span> <span class=o>-</span><span class=n>geometry</span> <span class=mi>1280</span><span class=n>x800</span> <span class=o>-</span><span class=n>localhost</span> <span class=p>:</span><span class=mi>1</span> <span class=p>(</span><span class=n>code</span><span class=o>=</span><span class=n>exited</span><span class=p>,</span> <span class=n>status</span><span class=o>=</span><span class=mi>0</span><span class=o>/</span><span class=n>SUCCESS</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>Main</span> <span class=n>PID</span><span class=p>:</span> <span class=mi>24482</span> <span class=p>(</span><span class=n>Xtightvnc</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=o>.</span> <span class=o>.</span> <span class=o>.</span>
</span></span></code></pre></td></tr></table></div></div><p>å½“ä½ é‡æ–°å¯åŠ¨æœºå™¨æ—¶ï¼Œä½ çš„VNCæœåŠ¡å™¨å°±å¯ä»¥ä½¿ç”¨äº†ã€‚</p><p>å†æ¬¡å¯åŠ¨ä½ çš„SSHéš§é“ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>ssh -L 5901:127.0.0.1:5901 -C -N -l sammy your_server_ip
</span></span></code></pre></td></tr></table></div></div><p>ç„¶åç”¨ä½ çš„VNCå®¢æˆ·ç«¯è½¯ä»¶å»ºç«‹ä¸€ä¸ªæ–°çš„è¿æ¥ï¼Œ<code>localhost:5901</code> ï¼Œè¿æ¥åˆ°ä½ çš„æœºå™¨ã€‚</p><h2 id=too-many-authentication-failures-vnc-server>Too many authentication failures VNC server</h2><p>è§£å†³æ–¹æ³•ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>vncserver -kill :1
</span></span><span class=line><span class=cl>vncserver
</span></span></code></pre></td></tr></table></div></div><h2 id=xfce4-è®¾ç½®ä¸­æ–‡>xfce4 è®¾ç½®ä¸­æ–‡</h2><p>1.å®‰è£…localeså¹¶é…ç½®</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo apt install locales
</span></span><span class=line><span class=cl>sudo dpkg-reconfigure locales
</span></span></code></pre></td></tr></table></div></div><p>è¿›å…¥è¯­è¨€è®¾ç½®ç•Œé¢ï¼Œå…¶ä¸­ï¼Œç©ºæ ¼é”®ä¸ºé€‰å–/å–æ¶ˆï¼ŒTabé”®ä¸ºåˆ‡æ¢åˆ°ç¡®è®¤é€‰æ‹©ã€‚</p><p>2.é€šè¿‡æ–¹å‘é”®ä¸ç©ºæ ¼é”®é€‰æ‹©è¯­è¨€ç¼–ç en_US.UTF8ï¼Œzh_CN GB2312ï¼Œzh_CN GBK GBKï¼Œzh_CN UTF-8 UTF-8</p><p>3.ç„¶åæŒ‰Tabé€‰æ‹©<ok>ï¼Œå›è½¦è¿›å…¥ä¸‹ä¸€ä¸ªç•Œé¢ï¼Œé€‰æ‹© <code>zh_CN UTF-8 UTF-8</code>ä¸ºé»˜è®¤ç³»ç»Ÿç¯å¢ƒï¼Œå›è½¦ã€‚</p><p>4.ä¸ºå½“å‰ç”¨æˆ·é…ç½®é»˜è®¤è¯­è¨€ä¸ºä¸­æ–‡zh_CN UTF-8 UTF-8</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>vi</span> <span class=o>~/.</span><span class=n>bashrc</span>
</span></span><span class=line><span class=cl><span class=err>åœ¨</span><span class=o>.</span><span class=n>bashrcæœ€åæ·»åŠ ä¸€è¡Œ</span>
</span></span><span class=line><span class=cl><span class=k>export</span> <span class=n>LANG</span><span class=o>=</span><span class=n>zh_CN</span><span class=o>.</span><span class=n>UTF</span><span class=o>-</span><span class=mi>8</span>
</span></span></code></pre></td></tr></table></div></div><p>5.å®‰è£…ä¸­æ–‡å­—ä½“</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo apt install fonts-wqy-zenhei
</span></span></code></pre></td></tr></table></div></div><p>6.é‡å¯</p><h2 id=debian-10å®‰è£…firefox>Debian 10å®‰è£…firefox</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo apt update
</span></span><span class=line><span class=cl>sudo apt upgrade
</span></span><span class=line><span class=cl>sudo apt install firefox-esr -y
</span></span></code></pre></td></tr></table></div></div><h2 id=debian-10å®‰è£…wine-70>Debian 10å®‰è£…wine 7.0</h2><blockquote><p>è²Œä¼¼debian 10åªèƒ½è£…wine 7.0ï¼Œè£…ä¸äº†wine 8.0ã€‚debian 11æ‰èƒ½å®‰è£…wine 8.0ï¼Œwine 8.0å¯ä»¥å¾®ä¿¡ï¼Œä¸è¿‡éƒ½æ˜¯ä¹±ç ï¼Œ<strong>æ ¹æœ¬å°±æ²¡å¿…è¦è£…wine</strong>ï¼Œä¸è¿‡è¿˜æ˜¯è®°å½•ä»¥ä¸‹</p></blockquote><h3 id=step-1-prerequsiteis>Step 1: Prerequsiteis</h3><p>In order to run Winehq, You need to enable i386 architecture on your Debian system. Also, import the GPG key to your system by which the wine packages are signed.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo dpkg --add-architecture i386  
</span></span><span class=line><span class=cl>wget -qO - https://dl.winehq.org/wine-builds/winehq.key | sudo apt-key add - 
</span></span></code></pre></td></tr></table></div></div><p>Use one of the following commands to enable the Wine apt repository in your system based on your operating system and version.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo apt -y install gnupg2 software-properties-common
</span></span><span class=line><span class=cl>sudo apt-add-repository https://dl.winehq.org/wine-builds/debian/ 
</span></span></code></pre></td></tr></table></div></div><h3 id=step-2-install-wine-on-debian-10>Step 2: Install Wine on Debian 10</h3><p>Your system is ready to install Winehq. Update the apt information with the newly added repositories. Execute the following commands. The <code>--install-recommends</code> option will install all the recommended packages by <strong>winehq-stable</strong> on your system.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo apt update 
</span></span><span class=line><span class=cl>sudo apt install --install-recommends winehq-stable 
</span></span></code></pre></td></tr></table></div></div><p>The wine packages are installed under /opt/wine-stable directory. So set the wine bin directory to the <strong>PATH</strong> environment to access commands system-wide.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=k>export</span> <span class=n>PATH</span><span class=o>=$</span><span class=n>PATH</span><span class=p>:</span><span class=o>/</span><span class=n>opt</span><span class=o>/</span><span class=n>wine</span><span class=o>-</span><span class=n>stable</span><span class=o>/</span><span class=n>bin</span> 
</span></span></code></pre></td></tr></table></div></div><h3 id=step-3-check-wine-version>Step 3: Check Wine Version</h3><p>Wine installation successfully completed. Use the following command to check the version of wine installed on your system</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>wine --version 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>wine-7.0
</span></span></code></pre></td></tr></table></div></div><h3 id=how-to-use-wine-optional>How to Use Wine (Optional)</h3><p>To use wine we need to log in to the Debian desktop system. After that download a windows .exe file like <a class=link href=http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html target=_blank rel=noopener>PuTTY </a>on your system and open it with Wine as below screenshot or use the following command.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>wine</span> <span class=o>~/</span><span class=n>Downloads</span><span class=o>/</span><span class=n>putty</span><span class=o>.</span><span class=n>exe</span> 
</span></span></code></pre></td></tr></table></div></div><h2 id=debian-11å®‰è£…wine-80>Debian 11å®‰è£…wine 8.0</h2><h3 id=step-1-enable-32-bit-architecture>Step 1: Enable 32 bit architecture</h3><p>If youâ€™re running a 64-bit system, enable support for 32-bit applications.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo dpkg --add-architecture i386
</span></span></code></pre></td></tr></table></div></div><p>The command above wonâ€™t return any output.</p><h3 id=step-2-add-winehq-repository>Step 2: Add WineHQ repository</h3><p>We will pull the latest Wine packages from WineHQ repository that is added manually.</p><p>First, import GPG key:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo apt update
</span></span><span class=line><span class=cl>sudo apt -y install gnupg2 software-properties-common
</span></span><span class=line><span class=cl>wget -nc https://dl.winehq.org/wine-builds/winehq.key
</span></span><span class=line><span class=cl>sudo apt-key add winehq.key
</span></span></code></pre></td></tr></table></div></div><p>You should receive â€œ<strong>OK</strong>â€ in the output.</p><p>Add the Wine repository by running the following command:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo apt-add-repository https://dl.winehq.org/wine-builds/debian/
</span></span></code></pre></td></tr></table></div></div><p>The command will add repository to line <em>/etc/apt/sources.list</em> file.</p><p>Update APT package index after:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo apt update
</span></span></code></pre></td></tr></table></div></div><h3 id=using-obs-repository-alternative>Using OBS repository (Alternative)</h3><p>You can also use OBS repository instead of the official repository. Add Wine OBS repository as shown below:</p><p><strong>Debian 11:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>wget</span> <span class=o>-</span><span class=n>O</span><span class=o>-</span> <span class=o>-</span><span class=n>q</span> <span class=n>https</span><span class=p>:</span><span class=o>//</span><span class=n>download</span><span class=o>.</span><span class=n>opensuse</span><span class=o>.</span><span class=n>org</span><span class=o>/</span><span class=n>repositories</span><span class=o>/</span><span class=n>Emulators</span><span class=p>:</span><span class=o>/</span><span class=n>Wine</span><span class=p>:</span><span class=o>/</span><span class=n>Debian</span><span class=o>/</span><span class=n>Debian_11</span><span class=o>/</span><span class=n>Release</span><span class=o>.</span><span class=n>key</span> <span class=o>|</span> <span class=n>sudo</span> <span class=n>apt</span><span class=o>-</span><span class=n>key</span> <span class=n>add</span> <span class=o>-</span>    
</span></span><span class=line><span class=cl><span class=n>echo</span> <span class=s2>&#34;deb http://download.opensuse.org/repositories/Emulators:/Wine:/Debian/Debian_11 ./&#34;</span> <span class=o>|</span> <span class=n>sudo</span> <span class=n>tee</span> <span class=o>/</span><span class=n>etc</span><span class=o>/</span><span class=n>apt</span><span class=o>/</span><span class=n>sources</span><span class=o>.</span><span class=n>list</span><span class=o>.</span><span class=n>d</span><span class=o>/</span><span class=n>wine</span><span class=o>-</span><span class=n>obs</span><span class=o>.</span><span class=n>list</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=step-3-install-wine-on-debian-11109>Step 3: Install Wine on Debian 11|10|9</h3><p>After configuration of the APT repository, the final step is the actual installation of Wine on Debian.</p><p>Then install Wine from Stable branch:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo apt update
</span></span><span class=line><span class=cl>sudo apt install --install-recommends winehq-stable
</span></span></code></pre></td></tr></table></div></div><p>The wine packages are installed under /opt/wine-stable directory. So set the wine bin directory to the <strong>PATH</strong> environment to access commands system-wide.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=k>export</span> <span class=n>PATH</span><span class=o>=$</span><span class=n>PATH</span><span class=p>:</span><span class=o>/</span><span class=n>opt</span><span class=o>/</span><span class=n>wine</span><span class=o>-</span><span class=n>stable</span><span class=o>/</span><span class=n>bin</span> 
</span></span></code></pre></td></tr></table></div></div><p>After installation. verify version installed.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>$ wine --version
</span></span><span class=line><span class=cl>wine-8.0
</span></span></code></pre></td></tr></table></div></div><h3 id=step-4-using-wine-on-debian>Step 4: Using Wine on Debian</h3><p>For basic usage of wine, check help page.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>$ wine --help
</span></span></code></pre></td></tr></table></div></div><p>Example below is used to run <a class=link href=https://github.com/notepad-plus-plus/notepad-plus-plus/releases target=_blank rel=noopener>Notepad++ editor</a> on Linux.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>cd</span> <span class=o>~/</span><span class=n>Downloads</span>
</span></span><span class=line><span class=cl><span class=n>VER</span><span class=o>=$</span><span class=p>(</span><span class=n>curl</span> <span class=o>-</span><span class=n>s</span> <span class=n>https</span><span class=p>:</span><span class=o>//</span><span class=n>api</span><span class=o>.</span><span class=n>github</span><span class=o>.</span><span class=n>com</span><span class=o>/</span><span class=n>repos</span><span class=o>/</span><span class=n>notepad</span><span class=o>-</span><span class=n>plus</span><span class=o>-</span><span class=n>plus</span><span class=o>/</span><span class=n>notepad</span><span class=o>-</span><span class=n>plus</span><span class=o>-</span><span class=n>plus</span><span class=o>/</span><span class=n>releases</span><span class=o>/</span><span class=n>latest</span> <span class=o>|</span> <span class=n>grep</span> <span class=n>tag_name</span> <span class=o>|</span> <span class=n>cut</span> <span class=o>-</span><span class=n>d</span> <span class=s1>&#39;&#34;&#39;</span> <span class=o>-</span><span class=n>f</span> <span class=mi>4</span> <span class=o>|</span> <span class=n>sed</span> <span class=s1>&#39;s/v//g&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>wget</span> <span class=n>https</span><span class=p>:</span><span class=o>//</span><span class=n>github</span><span class=o>.</span><span class=n>com</span><span class=o>/</span><span class=n>notepad</span><span class=o>-</span><span class=n>plus</span><span class=o>-</span><span class=n>plus</span><span class=o>/</span><span class=n>notepad</span><span class=o>-</span><span class=n>plus</span><span class=o>-</span><span class=n>plus</span><span class=o>/</span><span class=n>releases</span><span class=o>/</span><span class=n>download</span><span class=o>/</span><span class=n>v</span><span class=o>$</span><span class=p>{</span><span class=n>VER</span><span class=p>}</span><span class=o>/</span><span class=n>npp</span><span class=o>.$</span><span class=p>{</span><span class=n>VER</span><span class=p>}</span><span class=o>.</span><span class=n>Installer</span><span class=o>.</span><span class=n>exe</span>
</span></span><span class=line><span class=cl><span class=n>wine</span> <span class=o>./</span><span class=n>npp</span><span class=o>.$</span><span class=p>{</span><span class=n>VER</span><span class=p>}</span><span class=o>.</span><span class=n>Installer</span><span class=o>.</span><span class=n>exe</span>
</span></span></code></pre></td></tr></table></div></div><p>Follow installation prompts like for any other Windows application.</p><h2 id=é™„ç¬¬äºŒç§ä½œä¸ºç³»ç»ŸæœåŠ¡è¿è¡Œvnc>é™„ï¼šç¬¬äºŒç§ä½œä¸ºç³»ç»ŸæœåŠ¡è¿è¡ŒVNC</h2><p>1.åˆ›å»ºsystemdæœåŠ¡æ–‡ä»¶ï¼šä½¿ç”¨å‘½ä»¤ <code>sudo nano /etc/systemd/system/tightvncserver@.service</code>åˆ›å»ºä¸€ä¸ªæ–°çš„systemdæœåŠ¡æ–‡ä»¶ã€‚</p><p>2.ç¼–è¾‘systemdæœåŠ¡æ–‡ä»¶ï¼šåœ¨æ–‡ä»¶ä¸­å¡«å†™ä»¥ä¸‹å†…å®¹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>Unit<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>Description</span><span class=o>=</span>TightVNC server
</span></span><span class=line><span class=cl><span class=nv>After</span><span class=o>=</span>syslog.target network.target
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>Service<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>Type</span><span class=o>=</span>forking
</span></span><span class=line><span class=cl><span class=nv>User</span><span class=o>=</span>&lt;username&gt;
</span></span><span class=line><span class=cl><span class=nv>PAMName</span><span class=o>=</span>login
</span></span><span class=line><span class=cl><span class=nv>PIDFile</span><span class=o>=</span>/home/&lt;username&gt;/.vnc/%H:%i.pid
</span></span><span class=line><span class=cl><span class=nv>ExecStartPre</span><span class=o>=</span>-/usr/bin/vncserver -kill :%i &gt; /dev/null 2&gt;<span class=p>&amp;</span><span class=m>1</span>
</span></span><span class=line><span class=cl><span class=nv>ExecStart</span><span class=o>=</span>/usr/bin/vncserver :%i
</span></span><span class=line><span class=cl><span class=nv>ExecStop</span><span class=o>=</span>/usr/bin/vncserver -kill :%i
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>Install<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>WantedBy</span><span class=o>=</span>multi-user.target
</span></span></code></pre></td></tr></table></div></div><p><strong>ä¿®æ”¹ä¸ºï¼š</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=p>[</span><span class=n>Unit</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=n>Description</span><span class=o>=</span><span class=n>TightVNC</span><span class=w> </span><span class=n>server</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=k>After</span><span class=o>=</span><span class=n>syslog</span><span class=p>.</span><span class=n>target</span><span class=w> </span><span class=n>network</span><span class=p>.</span><span class=n>target</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>[</span><span class=n>Service</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=k>Type</span><span class=o>=</span><span class=n>forking</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=k>User</span><span class=o>=</span><span class=n>root</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=n>PAMName</span><span class=o>=</span><span class=n>login</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=n>PIDFile</span><span class=o>=/</span><span class=n>root</span><span class=o>/</span><span class=p>.</span><span class=n>vnc</span><span class=o>/%</span><span class=n>H</span><span class=p>:</span><span class=o>%</span><span class=n>i</span><span class=p>.</span><span class=n>pid</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=n>ExecStartPre</span><span class=o>=-/</span><span class=n>usr</span><span class=o>/</span><span class=n>bin</span><span class=o>/</span><span class=n>vncserver</span><span class=w> </span><span class=o>-</span><span class=n>kill</span><span class=w> </span><span class=p>:</span><span class=o>%</span><span class=n>i</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=o>/</span><span class=n>dev</span><span class=o>/</span><span class=k>null</span><span class=w> </span><span class=mi>2</span><span class=o>&gt;&amp;</span><span class=mi>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=n>ExecStart</span><span class=o>=/</span><span class=n>usr</span><span class=o>/</span><span class=n>bin</span><span class=o>/</span><span class=n>vncserver</span><span class=w> </span><span class=p>:</span><span class=o>%</span><span class=n>i</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=n>ExecStop</span><span class=o>=/</span><span class=n>usr</span><span class=o>/</span><span class=n>bin</span><span class=o>/</span><span class=n>vncserver</span><span class=w> </span><span class=o>-</span><span class=n>kill</span><span class=w> </span><span class=p>:</span><span class=o>%</span><span class=n>i</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>[</span><span class=n>Install</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=n>WantedBy</span><span class=o>=</span><span class=n>multi</span><span class=o>-</span><span class=k>user</span><span class=p>.</span><span class=n>target</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>3.é‡æ–°åŠ è½½systemdæœåŠ¡ï¼šåœ¨ç»ˆç«¯çª—å£ä¸­è¾“å…¥å‘½ä»¤ <code>sudo systemctl daemon-reload</code>ã€‚</p><p>4.å¯ç”¨VNC ServeræœåŠ¡ï¼šåœ¨ç»ˆç«¯çª—å£ä¸­è¾“å…¥å‘½ä»¤ <code>sudo systemctl enable tightvncserver@1</code></p><p>5.å¯åŠ¨VNC ServeræœåŠ¡ï¼šåœ¨ç»ˆç«¯çª—å£ä¸­è¾“å…¥å‘½ä»¤ <code>sudo systemctl start tightvncserver@1</code></p><p>6.æ£€æŸ¥VNC ServeræœåŠ¡çŠ¶æ€ï¼šåœ¨ç»ˆç«¯çª—å£ä¸­è¾“å…¥å‘½ä»¤ <code>systemctl status tightvncserver@1</code>ï¼Œæ£€æŸ¥æœåŠ¡æ˜¯å¦å·²å¯åŠ¨ã€‚</p><p>è¿™æ ·ï¼Œä½ å°±å¯ä»¥åœ¨Ubuntuç³»ç»Ÿå¼€æœºæ—¶è‡ªåŠ¨å¯åŠ¨VNC ServeræœåŠ¡äº†ã€‚</p><h2 id=æ€»ç»“>æ€»ç»“</h2><p>ä½ ç°åœ¨æœ‰äº†ä¸€ä¸ªå®‰å…¨çš„VNCæœåŠ¡å™¨å¹¶åœ¨ä½ çš„Debian 11æœåŠ¡å™¨ä¸Šè¿è¡Œã€‚ç°åœ¨ï¼Œæ‚¨å¯ä»¥é€šè¿‡ä¸€ä¸ªç”¨æˆ·å‹å¥½å’Œç†Ÿæ‚‰çš„å›¾å½¢ç•Œé¢æ¥ç®¡ç†æ‚¨çš„æ–‡ä»¶ã€è½¯ä»¶å’Œè®¾ç½®ã€‚æ‚¨è¿˜å¯ä»¥è¿œç¨‹è¿è¡Œå›¾å½¢åŒ–è½¯ä»¶ï¼Œå¦‚ç½‘é¡µæµè§ˆå™¨ã€‚</p><h2 id=å‚è€ƒé“¾æ¥>å‚è€ƒé“¾æ¥</h2><ul><li><p><a class=link href=https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-vnc-on-debian-10 target=_blank rel=noopener>How to Install and Configure VNC on Debian 10</a></p></li><li><p><a class=link href=https://juejin.cn/post/7162831879303856164 target=_blank rel=noopener>å¦‚ä½•åœ¨Debian 11ä¸Šå®‰è£…å’Œé…ç½®VNC</a></p></li><li><p><a class=link href=https://www.myfreax.com/how-to-install-and-configure-vnc-on-debian-11/ target=_blank rel=noopener>å¦‚ä½•åœ¨Debian 11å®‰è£…VNC</a></p></li><li><p><a class=link href=https://www.cnblogs.com/KylinBlog/p/16588008.html target=_blank rel=noopener>xfce4 è®¾ç½®ä¸­æ–‡</a></p></li><li><p><a class=link href=https://juejin.cn/s/ubuntu%20vnc%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8 target=_blank rel=noopener>ubuntu vncå¼€æœºå¯åŠ¨</a></p></li><li><p><a class=link href=https://www.digitalocean.com/community/tutorials/initial-server-setup-with-debian-10 target=_blank rel=noopener>Initial Server Setup with Debian 10</a></p></li><li><p><a class=link href=https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-vnc-on-debian-11 target=_blank rel=noopener>How to Install and Configure VNC on Debian 11</a></p></li><li><p><a class=link href=https://tecadmin.net/install-wine-on-debian-10-buster/ target=_blank rel=noopener>How To Install Wine 7.0 on Debian 10</a></p></li><li><p><a class=link href="https://computingforgeeks.com/how-to-install-wine-on-debian/?expand_article=1" target=_blank rel=noopener>How To Install Wine 8 on Debian 11</a></p></li></ul></div><div class="shuoshuo-tags meta-wrapper" style=margin-top:15px!important;margin-bottom:5px!important;gap:10px!important><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:14px;height:14px;color:var(--card-text-color-secondary)"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
<a href=/tags/linux/ class="meta-item shuoshuo-tag" title="æŸ¥çœ‹æ ‡ç­¾: linux"><span>#linux</span></a></div><div class=shuoshuo-footer-info><div class="shuoshuo-edit-link meta-wrapper" style=gap:15px!important><a href=https://github.com/iwyang/iwyang.github.io/edit/develop/content/post/debian-10%e5%ae%89%e8%a3%85xfce%e6%a1%8c%e9%9d%a2%e5%92%8c%e9%85%8d%e7%bd%aevnc%e5%92%8cwine/index.md target=_blank rel="noopener noreferrer" class=meta-item title="å‰å¾€ GitHub ç¼–è¾‘æ­¤é¡µ"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
<span>ç¼–è¾‘æ­¤é¡µ</span>
</a><span class=separator>|</span>
<a class="meta-item git-hash-text" href=https://github.com/iwyang/iwyang.github.io/commit/26a215ebb8fca78d98f384856b8ab5e0e2056333 target=_blank rel="noopener noreferrer" title="Commit Hash: 26a215e">#26a215e</a></div></div></article><article class=shuoshuo-card><div class=shuoshuo-header><div class="shuoshuo-meta meta-wrapper"><time class="shuoshuo-time meta-item" datetime=2022-05-29T01:12:45Z><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
<span>2022-05-29</span>
</time><span class="shuoshuo-updated-time meta-item" datetime=2026-02-18T15:52:01+08:00><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4A2 2 0 002 6v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121.0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
<span>2026-02-18</span></span></div></div><div class="shuoshuo-content style-cs-content article-post"><p>ç”±äºä¸€äº›åŸå› ï¼Œä¹‹å‰æœåŠ¡å™¨ä¸Šç”¨çš„Centosæ¢æˆäº†Debianã€‚Debianè™½ç„¶å’ŒCentoså¤§åŒå°å¼‚ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰äº›ä¸œè¥¿è¦è®°ä¸€ä¸‹ã€‚</p><p>{% note warning flat %}
Debian10 ä¸Šå®‰è£…éƒ¨åˆ†åº”ç”¨ï¼Œé€Ÿåº¦å‡ ä¹ä¸º0ï¼Œè‡³å°‘éœ€è¦Debian11ä»¥ä¸Šï¼Œ512Må†…å­˜è¶³å¤Ÿã€‚
{% endnote %}</p><p>{% note primary no-icon %}
æ¨èä½¿ç”¨<a class=link href=https://www.terminal.icu/ target=_blank rel=noopener>terminal</a>(ssh å·¥å…·) ï¼Œ<a class=link href=https://www.hostbuf.com/ target=_blank rel=noopener>finashell</a> ä¹Ÿè¡Œã€‚
{% endnote %}</p><h2 id=debian-æ›´æ–°æŠ¥é”™çš„è§£å†³æ–¹æ³•><strong>Debian æ›´æ–°æŠ¥é”™çš„è§£å†³æ–¹æ³•</strong></h2><p><del>ä¸€å°å¾ˆè€çš„Debianä½¿ç”¨apt-get updateçš„æ—¶å€™ï¼Œå‡ºç°ä¸€ä¸‹æŠ¥é”™ã€‚</del>ï¼ˆéå¿…è¦ï¼Œä¸è¦æ›´æ–°ï¼‰</p><p><strong>è§£å†³æ–¹æ³•</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>apt-get update --allow-releaseinfo-change
</span></span><span class=line><span class=cl>apt-get upgrade
</span></span></code></pre></td></tr></table></div></div><p><strong>æç¤º</strong>ï¼šUnable to fetch some archives, maybe run apt-get update or try with &ndash;fix-missing?</p><p><strong>è§£å†³æ–¹æ³•</strong>ï¼ˆé—®chatgptï¼‰ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>apt-get update --fix-missing
</span></span></code></pre></td></tr></table></div></div><h2 id=è°ƒæ•´æ—¶åŒº>è°ƒæ•´æ—¶åŒº</h2><p>å¦‚æœä½ ä¸çŸ¥é“æœåŠ¡å™¨å½“å‰æ—¶é—´ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼ŒæŸ¥çœ‹å½“å‰æ—¶é—´ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>date -R
</span></span></code></pre></td></tr></table></div></div><p>ä¿®æ”¹å½“å‰æ—¶åŒºä¸ºä¸Šæµ·ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo timedatectl set-timezone Asia/Shanghai
</span></span></code></pre></td></tr></table></div></div><p>å†æ¬¡ä¸å¸¦ä»»ä½•é€‰é¡¹å‚æ•°è°ƒç”¨ timedatectl å‘½ä»¤ï¼Œæ‰“å°ç³»ç»Ÿå½“å‰è®¾ç½®çš„æ—¶åŒºå³å¯ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>timedatectl
</span></span></code></pre></td></tr></table></div></div><h2 id=puttyä¿å­˜ç™»å½•è´¦å·å’Œå¯†ç >puttyä¿å­˜ç™»å½•è´¦å·å’Œå¯†ç </h2><p>1.åˆ›å»ºä¸€ä¸ªæ¡Œé¢å¿«æ·æ–¹å¼ã€‚</p><p>2.è¿›å…¥å¿«æ·æ–¹å¼å±æ€§ï¼Œä¿®æ”¹ç›®æ ‡ï¼Œåœ¨åé¢åŠ ä¸Š -ssh -l ç”¨æˆ·å -pw å¯†ç  -i sessionæ ‡è¯† -P ç«¯å£å· IPåœ°å€ã€‚ä¾‹å¦‚ &ldquo;C:\Program Files\PuTTY\putty.exe&rdquo; -ssh -l root -pw 123456 -i &ldquo;yuanchengserver1&rdquo; -P 22 142.16.187.129</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>E:\è½¯ä»¶\putty.exe -ssh -l root -pw password -i &#34;yansvps&#34; -P 22 ip
</span></span></code></pre></td></tr></table></div></div><p>3.ç„¶åï¼Œé€šè¿‡å¿«æ·æ–¹å¼å°±å¯ä»¥ç›´æ¥ç™»å½•äº†~</p><p>PSï¼š<code>putty</code>æ²¡æœ‰<a class=link href=https://www.hostbuf.com/ target=_blank rel=noopener>FinalShell</a>å¥½ç”¨ã€‚</p><h2 id=viæ— æ³•æ­£å¸¸ä½¿ç”¨><code>vi</code>æ— æ³•æ­£å¸¸ä½¿ç”¨</h2><p>1.å…ˆå®‰è£…<code>vim</code>ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>apt install vim -y
</span></span></code></pre></td></tr></table></div></div><p>2.ä¿®æ”¹<code>vimrc.tiny</code>
<code>vi /etc/vim/vimrc.tiny</code> å°†å…¶ä¸­çš„è¯­å¥ <code>set compatible</code> ä¿®æ”¹ä¸º <code>set nocompatible</code> ï¼Œéå…¼å®¹æ¨¡å¼ä¸‹å¯ä»¥è§£å†³æ–¹å‘é”®å˜ABCDçš„é—®é¢˜ã€‚</p><p>åœ¨åˆšæ‰é‚£å¥è¯åé¢å†åŠ ä¸€å¥ <code>set backspace=2</code> æ¥è§£å†³é€€æ ¼é”®æ— æ³•ä½¿ç”¨çš„é—®é¢˜ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /etc/vim/vimrc.tiny
</span></span><span class=line><span class=cl><span class=nb>set</span> nocompatible
</span></span><span class=line><span class=cl><span class=nb>set</span> <span class=nv>backspace</span><span class=o>=</span><span class=m>2</span>
</span></span></code></pre></td></tr></table></div></div><p>3.å¸è½½<code>vim</code>
vimé¢œè‰²å¤ªèŠ±çœ¼äº†ï¼Œæ‰€ä»¥æœ€åæŠŠå®ƒå¸è½½ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>apt remove vim -y
</span></span></code></pre></td></tr></table></div></div><h2 id=debianå®‰è£…vsftpd>Debianå®‰è£…vsftpd</h2><p>{% note warning no-icon %}
ä¼ è¾“å¤§æ–‡ä»¶æ…¢ï¼Œå¯ä»¥ç”¨transmissionä¸‹è½½å®Œåï¼Œé…åˆnginxå¼€å¯ç›®å½•æµè§ˆï¼Œé…ç½®å¥½SSLä½¿ç”¨ï¼›ä¹Ÿå¯ä»¥ç”¨<a class=link href=https://www.terminal.icu/ target=_blank rel=noopener>terminal</a>(sshå·¥å…·)ä¸Šä¼ <del>ä¸‹è½½</del>æ–‡ä»¶ï¼Œfinashellä¹Ÿè¡Œã€‚
{% endnote %}</p><p>0.å¼€å¯21ç«¯å£ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>iptables -I INPUT <span class=m>5</span> -p tcp --dport <span class=m>21</span> -j ACCEPT
</span></span></code></pre></td></tr></table></div></div><p>1.å®‰è£…å‘½ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt install vsftpd -y
</span></span></code></pre></td></tr></table></div></div><p>2.å®‰è£…è½¯ä»¶åŒ…åï¼Œå¯åŠ¨vsftpdï¼Œå¹¶ä½¿å…¶èƒ½å¤Ÿåœ¨å¼•å¯¼æ—¶è‡ªåŠ¨å¯åŠ¨ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl start vsftpd
</span></span><span class=line><span class=cl>sudo systemctl <span class=nb>enable</span> vsftpd
</span></span></code></pre></td></tr></table></div></div><p>3.ç¼–è¾‘<code>vsftpd.conf</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /etc/vsftpd.conf
</span></span></code></pre></td></tr></table></div></div><hr><p>ï¼ˆ1ï¼‰å»æ‰<code>write_enable=YES</code>å‰é¢çš„æ³¨é‡Šï¼Œä½¿ç”¨æˆ·å¯ä»¥ä¸Šä¼ æ–‡ä»¶ã€‚</p><p>ï¼ˆ2ï¼‰è¦ä»…å…è®¸æŸäº›ç”¨æˆ·ç™»å½•FTPæœåŠ¡å™¨ï¼Œè¯·åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä»¥ä¸‹è¡Œï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>userlist_enable</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl><span class=nv>userlist_file</span><span class=o>=</span>/etc/vsftpd.user_list
</span></span><span class=line><span class=cl><span class=nv>userlist_deny</span><span class=o>=</span>NO
</span></span></code></pre></td></tr></table></div></div><p>å¯ç”¨æ­¤é€‰é¡¹åï¼Œæ‚¨éœ€è¦é€šè¿‡å‘<code>/etc/vsftpd.user_list</code>æ–‡ä»¶æ·»åŠ ç”¨æˆ·åï¼ˆæ¯è¡Œä¸€ä¸ªç”¨æˆ·ï¼‰æ˜ç¡®æŒ‡å®šå“ªäº›ç”¨æˆ·èƒ½å¤Ÿç™»å½•ã€‚</p><p>ï¼ˆ3ï¼‰æ·»åŠ FTPç”¨æˆ·ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo adduser admin
</span></span><span class=line><span class=cl>sudo passwd admin
</span></span></code></pre></td></tr></table></div></div><p>ï¼ˆ4ï¼‰å°†ç”¨æˆ·æ·»åŠ åˆ°å…è®¸çš„ FTP ç”¨æˆ·åˆ—è¡¨ä¸­ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;admin&#34;</span> <span class=p>|</span> sudo tee -a /etc/vsftpd.user_list
</span></span></code></pre></td></tr></table></div></div><p>ï¼ˆ5ï¼‰å…³é—­é˜²ç«å¢™</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>systemctl stop firewalld.service
</span></span><span class=line><span class=cl>systemctl disable firewalld.service 
</span></span></code></pre></td></tr></table></div></div><p>ï¼ˆ6ï¼‰<strong>ä½¿ ftp ç”¨æˆ·<code>admin</code>å¯ä»¥ä¸Šä¼ æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo chmod <span class=m>755</span> /var/www/speak
</span></span><span class=line><span class=cl>sudo chown -R admin: /var/www/speak
</span></span></code></pre></td></tr></table></div></div><p>ï¼ˆ7ï¼‰é‡å¯ vsftpd æœåŠ¡</p><p>ä¿å­˜æ–‡ä»¶å¹¶é‡æ–°å¯åŠ¨ vsftpd æœåŠ¡ï¼Œä»¥ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo systemctl restart vsftpd
</span></span></code></pre></td></tr></table></div></div><hr><p>4.è®¾ç½®å…è®¸rootç™»å½•</p><ul><li>å°†<code>root</code>æ·»åŠ åˆ°å…è®¸çš„FTPç”¨æˆ·åˆ—è¡¨ä¸­ï¼š</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;root&#34;</span> <span class=p>|</span> sudo tee -a /etc/vsftpd/user_list
</span></span></code></pre></td></tr></table></div></div><ul><li>ä¿®æ”¹<code>/etc/vsftpd/user_list</code>å’Œ<code>/etc/ftpusers</code>ä¸¤ä¸ªè®¾ç½®æ–‡ä»¶è„šæœ¬ï¼Œå°†rootè´¦æˆ·å‰åŠ ä¸Š<code>#</code>å·å˜ä¸ºæ³¨é‡Š</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /etc/vsftpd/user_list
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /etc/ftpusers
</span></span></code></pre></td></tr></table></div></div><p>5.é‡å¯vsftpdæœåŠ¡</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl restart vsftpd
</span></span></code></pre></td></tr></table></div></div><p>6.è§£å†³Nginxå‡ºç°403 forbidden</p><p>jå‡è®¾ç½‘ç«™æ ¹ç›®å½•åœ¨<code>/var/www/blog/</code>ï¼Œåˆ™æ‰§è¡Œï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>chmod -R <span class=m>777</span> /var/www
</span></span></code></pre></td></tr></table></div></div><p>7.é™åˆ¶ç”¨æˆ·ç™»å½•ï¼ˆæœªå¯ç”¨ï¼‰</p><p>è¦ä»…å…è®¸æŸäº›ç”¨æˆ·ç™»å½•FTPæœåŠ¡å™¨ï¼Œè¯·åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä»¥ä¸‹å‡ è¡Œï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /etc/vsftpd.conf
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-diff data-lang=diff><span class=line><span class=cl>userlist_enable=YES
</span></span><span class=line><span class=cl>userlist_file=/etc/vsftpd/user_list
</span></span><span class=line><span class=cl>userlist_deny=NO
</span></span></code></pre></td></tr></table></div></div><p>å¯ç”¨æ­¤é€‰é¡¹åï¼Œæ‚¨éœ€è¦é€šè¿‡å°†ç”¨æˆ·åæ·»åŠ åˆ°/etc/vsftpd.user_listæ–‡ä»¶ï¼ˆæ¯è¡Œä¸€ä¸ªç”¨æˆ·ï¼‰æ¥æ˜ç¡®æŒ‡å®šå“ªäº›ç”¨æˆ·å¯ä»¥ç™»å½•ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;admin&#34;</span> <span class=p>|</span> sudo tee -a /etc/vsftpd/user_list
</span></span></code></pre></td></tr></table></div></div><h2 id=å¼€å¯80443ç«¯å£>å¼€å¯80ã€443ç«¯å£</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>iptables -I INPUT -p tcp --dport 443 -j ACCEPT
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>service iptables save
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>service iptables restart
</span></span></code></pre></td></tr></table></div></div><h2 id=debian-9ä¸Šå®‰è£…å’Œé…ç½®postfixé‚®ä»¶>Debian 9ä¸Šå®‰è£…å’Œé…ç½®Postfixé‚®ä»¶</h2><p>1.å®‰è£… mailtuils:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt install mailutils -y
</span></span></code></pre></td></tr></table></div></div><p>2.å®‰è£…postfixåç¼€:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt install postfix
</span></span></code></pre></td></tr></table></div></div><p>åœ¨å®‰è£…è¿‡ç¨‹å³å°†ç»“æŸæ—¶ï¼Œæ‚¨å°†çœ‹åˆ°ä¸€ä¸ªç±»ä¼¼äºä¸‹å›¾ä¸­çš„çª—å£çš„çª—å£ã€‚é»˜è®¤é€‰é¡¹æ˜¯<code>Internet Site</code>ã€‚è¿™æ˜¯æœ¬æ•™ç¨‹çš„æ¨èé€‰é¡¹ï¼Œè¯·æŒ‰<code>TAB</code>ï¼Œç„¶åæŒ‰<code>ENTER</code>ã€‚
ä¹‹åï¼Œæ‚¨å°†è·å¾—å¦ä¸€ä¸ªçª—å£ï¼Œå°±åƒä¸‹ä¸€ä¸ªå›¾åƒä¸­çš„çª—å£ä¸€æ ·ã€‚è¯¥ç³»ç»Ÿé‚®ä»¶åç§°åº”è¯¥æ˜¯ä¸€æ ·çš„ï¼Œä½ åˆ†é…ç»™æœåŠ¡å™¨ï¼Œå½“ä½ åœ¨åˆ›é€ å®ƒçš„åå­—ã€‚å¦‚æœå®ƒæ˜¾ç¤ºå­åŸŸ<code>subdomain.example.com</code>ï¼Œè¯·å°†å…¶æ›´æ”¹ä¸º<code>ust example.com</code>ã€‚å®Œæˆåï¼ŒæŒ‰<code>TAB</code>ï¼Œç„¶å<code>ENTER</code>ã€‚</p><p>3.é…ç½®Postfix</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /etc/postfix/main.cf
</span></span></code></pre></td></tr></table></div></div><p>æ‰“å¼€æ–‡ä»¶åï¼Œå‘ä¸‹æ»šåŠ¨ï¼Œç›´åˆ°çœ‹åˆ°ä»¥ä¸‹éƒ¨åˆ†ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>. . .
</span></span><span class=line><span class=cl><span class=nv>mailbox_size_limit</span> <span class=o>=</span> <span class=m>0</span>
</span></span><span class=line><span class=cl><span class=nv>recipient_delimiter</span> <span class=o>=</span> +
</span></span><span class=line><span class=cl><span class=nv>inet_interfaces</span> <span class=o>=</span> all
</span></span><span class=line><span class=cl>. . .
</span></span></code></pre></td></tr></table></div></div><p>å°†è¯»å–çš„inet_interfaces = allè¡Œæ›´æ”¹ä¸ºinet_interfaces = loopback-onlyï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>. . .
</span></span><span class=line><span class=cl><span class=nv>mailbox_size_limit</span> <span class=o>=</span> <span class=m>0</span>
</span></span><span class=line><span class=cl><span class=nv>recipient_delimiter</span> <span class=o>=</span> +
</span></span><span class=line><span class=cl><span class=nv>inet_interfaces</span> <span class=o>=</span> loopback-only
</span></span><span class=line><span class=cl>. . .
</span></span></code></pre></td></tr></table></div></div><p>æ‚¨éœ€è¦ä¿®æ”¹çš„å¦ä¸€ä¸ªæŒ‡ä»¤æ˜¯mydestinationï¼Œç”¨äºæŒ‡å®šé€šè¿‡local_transporté‚®ä»¶ä¼ é€’ä¼ è¾“ä¼ é€’çš„åŸŸåˆ—è¡¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå€¼ç±»ä¼¼äºï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>. . .
</span></span><span class=line><span class=cl><span class=nv>mydestination</span> <span class=o>=</span> <span class=nv>$myhostname</span>, example.com, localhost.com, , localhost
</span></span><span class=line><span class=cl>. . .
</span></span></code></pre></td></tr></table></div></div><p>æ­¤æŒ‡ä»¤çš„å»ºè®®é»˜è®¤å€¼åœ¨ä¸‹é¢çš„ä»£ç å—ä¸­ç»™å‡ºï¼Œå› æ­¤è¯·ä¿®æ”¹ä»¥åŒ¹é…ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>. . .
</span></span><span class=line><span class=cl><span class=nv>mydestination</span> <span class=o>=</span> <span class=nv>$myhostname</span>, localhost.<span class=nv>$your_domain</span>, <span class=nv>$your_domain</span>
</span></span><span class=line><span class=cl>. . .
</span></span></code></pre></td></tr></table></div></div><p>4.é‡å¯Postfixã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl restart postfix
</span></span></code></pre></td></tr></table></div></div><p>5.æµ‹è¯•SMTPæœåŠ¡å™¨</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;This is the body of the email&#34;</span> <span class=p>|</span> mail -s <span class=s2>&#34;This is the subject line&#34;</span> your_email_address
</span></span></code></pre></td></tr></table></div></div><p>6.debian å½»åº•åˆ é™¤posfix ç„¶åé‡æ–°å®‰è£…</p><p>å¦‚æœå®‰è£…å‡ºé”™ï¼Œå…ˆå½»åº•åˆ é™¤posfix ç„¶åé‡æ–°å®‰è£…</p><ul><li>å…³é—­ service postfix start</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>service postfix  stop
</span></span></code></pre></td></tr></table></div></div><ul><li>å¸è½½postfix</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>apt-get remove  postfix -y
</span></span><span class=line><span class=cl>dpkg --purge postfix
</span></span><span class=line><span class=cl>apt autoremove
</span></span></code></pre></td></tr></table></div></div><ul><li>æŸ¥çœ‹é…ç½®æ–‡ä»¶æ˜¯å¦å·²ç»åˆ é™¤</li></ul><p>æŸ¥çœ‹ /etc/postfixæ˜¯å¦å·²ç»åˆ é™¤æ‰</p><h2 id=å®‰è£…transmission><del>å®‰è£…Transmission</del></h2><p>{% note primary no-icon %}
é€Ÿåº¦ä¸åŠä¸‹é¢çš„qbittorrent
{% endnote %}</p><p>1.å®‰è£…</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt-get update -y
</span></span><span class=line><span class=cl>sudo apt-get install transmission transmission-daemon -y
</span></span></code></pre></td></tr></table></div></div><p>2.å¯åŠ¨&å…³é—­</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>systemctl start transmission-daemon
</span></span><span class=line><span class=cl>systemctl enable transmission-daemon
</span></span><span class=line><span class=cl>systemctl stop transmission-daemon
</span></span></code></pre></td></tr></table></div></div><p>3.ä¿®æ”¹é…ç½®ï¼ˆå…³é—­åå†ä¿®æ”¹é…ç½®ï¼‰</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>sudo</span> <span class=n>vi</span> <span class=o>/</span><span class=k>var</span><span class=o>/</span><span class=n>lib</span><span class=o>/</span><span class=n>transmission</span><span class=o>-</span><span class=n>daemon</span><span class=o>/</span><span class=n>info</span><span class=o>/</span><span class=n>settings</span><span class=o>.</span><span class=n>json</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-diff data-lang=diff><span class=line><span class=cl>{
</span></span><span class=line><span class=cl>    &#34;download-dir&#34;: &#34;/home/admin&#34;,
</span></span><span class=line><span class=cl>    ......
</span></span><span class=line><span class=cl>    &#34;rpc-authentication-required&#34;: true
</span></span><span class=line><span class=cl>    &#34;rpc-bind-address&#34;: &#34;0.0.0.0&#34;, 
</span></span><span class=line><span class=cl>    &#34;rpc-enabled&#34;: true, 
</span></span><span class=line><span class=cl>    &#34;rpc-password&#34;: &#34;123456&#34;, 
</span></span><span class=line><span class=cl>    &#34;rpc-port&#34;: 9091, 
</span></span><span class=line><span class=cl>    &#34;rpc-url&#34;: &#34;/transmission/&#34;, 
</span></span><span class=line><span class=cl>    &#34;rpc-username&#34;: &#34;transmission&#34;, 
</span></span><span class=line><span class=cl>    &#34;rpc-whitelist&#34;: &#34;*&#34;, 
</span></span><span class=line><span class=cl>    &#34;rpc-whitelist-enabled&#34;: true, 
</span></span><span class=line><span class=cl>    ......
</span></span></code></pre></td></tr></table></div></div><p><strong>ä¸»è¦æ˜¯<code>rpc-whitelist</code>ã€<code>ç”¨æˆ·å</code>ã€<code>å¯†ç </code>å’Œ<code> download-dirï¼ˆå¯é€‰ï¼‰</code></strong></p><p>å¦‚æœä¿®æ”¹ä¸‹è½½ç›®å½•ï¼Œå°†ä¸‹è½½ç›®å½•æ”¹æˆï¼š &ldquo;download-dir&rdquo;: &ldquo;/home/admin&rdquo;ï¼Œé‚£ä¹ˆè¿˜è¦èµ‹äºˆ<code>debian-transmission</code>è¯»å†™<code>/home/admin</code>çš„æƒé™ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo chmod 755 /home/admin
</span></span><span class=line><span class=cl>sudo chown -R debian-transmission: /home/admin
</span></span></code></pre></td></tr></table></div></div><p>æ‰§è¡Œ<code>sudo vi /etc/init.d/transmission-daemon</code>å¯ä»¥çœ‹åˆ°è¿è¡Œç”¨æˆ·ã€‚</p><p>4.ç¾åŒ–WEB UIï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>wget https://github.com/ronggang/transmission-web-control/raw/master/release/install-tr-control-cn.sh
</span></span><span class=line><span class=cl>bash install-tr-control-cn.sh
</span></span></code></pre></td></tr></table></div></div><h3 id=å®‰è£…nginx>å®‰è£…nginx</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt install nginx -y
</span></span><span class=line><span class=cl>sudo systemctl start nginx
</span></span><span class=line><span class=cl>sudo systemctl <span class=nb>enable</span> nginx
</span></span></code></pre></td></tr></table></div></div><h3 id=é…ç½®nginx>é…ç½®nginx</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=l>server {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>listen  80 ;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>listen [::]:80;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>root /home/admin;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>server_name example.com;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>access_log  /var/log/nginx/hexo_access.log;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>error_log   /var/log/nginx/hexo_error.log;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>error_page 404 =  /404.html;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>location ~* ^.+\.(ico|gif|jpg|jpeg|png)$ {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>root /home/admin;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>access_log   off;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>expires      1d;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>location ~* ^.+\.(css|js|txt|xml|swf|wav)$ {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>root /home/admin;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>access_log   off;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>expires      10m;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>location / {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>root /home/admin;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>if (-f $request_filename) {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>rewrite ^/(.*)$  /$1 break;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>location /nginx_status {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>stub_status on;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>access_log off;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>autoindex on;                        </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>autoindex_exact_size off;            </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>autoindex_localtime on;              </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>charset utf-8,gbk;</span><span class=w>
</span></span></span><span class=line><span class=cl>}<span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=debian11é…ç½®sslè¯ä¹¦>debian11é…ç½®SSLè¯ä¹¦</h3><h4 id=å®‰è£…-certbot>å®‰è£… Certbot</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt-get install letsencrypt -y
</span></span></code></pre></td></tr></table></div></div><h4 id=ä½¿ç”¨-webroot-è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦>ä½¿ç”¨ webroot è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>certbot certonly --webroot -w /home/admin -d example.com -m 455343442@qq.com --agree-tos
</span></span></code></pre></td></tr></table></div></div><h4 id=ç¼–è¾‘nginx>ç¼–è¾‘<code>Nginx</code></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>vi /etc/nginx/conf.d/ftp.conf
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=l>server {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>listen 80;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>listen [::]:80;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>root /home/admin;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>server_name  example.com;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>listen 443 ssl;</span><span class=w> </span><span class=c># managed by Certbot</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># RSA certificate</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;</span><span class=w> </span><span class=c># managed by Certbot</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;</span><span class=w> </span><span class=c># managed by Certbot</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Redirect non-https traffic to https</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>if ($scheme != &#34;https&#34;) {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>return 301 https://$host$request_uri;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>}<span class=w> </span><span class=c># managed by Certbot</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	
</span></span></span><span class=line><span class=cl><span class=w>	  </span><span class=l>autoindex on;                        </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=l>autoindex_exact_size off;            </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=l>autoindex_localtime on;              </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=l>charset utf-8,gbk;</span><span class=w>
</span></span></span><span class=line><span class=cl>}<span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>æµ‹è¯•é…ç½®æ˜¯å¦æœ‰é—®é¢˜ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>nginx -t
</span></span></code></pre></td></tr></table></div></div><p>é‡å¯ Nginx ç”Ÿæ•ˆï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>systemctl restart nginx
</span></span></code></pre></td></tr></table></div></div><h4 id=è‡ªåŠ¨ç»­æœŸ>è‡ªåŠ¨ç»­æœŸ</h4><p>Letâ€™s Encrypt çš„è¯ä¹¦æœ‰æ•ˆæœŸä¸º 90 å¤©ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡ crontab å®šæ—¶è¿è¡Œå‘½ä»¤æ›´æ–°è¯ä¹¦ã€‚</p><p>å…ˆè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æµ‹è¯•è¯ä¹¦çš„è‡ªåŠ¨æ›´æ–°ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>certbot renew --dry-run
</span></span></code></pre></td></tr></table></div></div><p>å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œå°±å¯ä»¥ç¼–è¾‘ crontab å®šæœŸè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>crontab -e
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>30 2 * */2 * /usr/bin/certbot renew --quiet &amp;&amp; /bin/systemctl restart nginx
</span></span></code></pre></td></tr></table></div></div><p>æŸ¥çœ‹è¯ä¹¦æœ‰æ•ˆæœŸçš„å‘½ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>openssl x509 -noout -dates -in /etc/letsencrypt/live/example.com/cert.pem
</span></span></code></pre></td></tr></table></div></div><h2 id=å®‰è£…qbittorrent-nox>å®‰è£…<code>qbittorrent-nox</code></h2><p>**1.**å®‰è£…qbittorrent-nox</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=l>apt update </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=l>apt install qbittorrent-nox -y</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>2.</strong> æ–°å»ºsystemdæ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /etc/systemd/system/qbittorrent-nox.service
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>Unit<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>Description</span><span class=o>=</span>qBittorrent Command Line Client
</span></span><span class=line><span class=cl><span class=nv>After</span><span class=o>=</span>network.target
</span></span><span class=line><span class=cl><span class=o>[</span>Service<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>User</span><span class=o>=</span>root
</span></span><span class=line><span class=cl><span class=nv>ExecStart</span><span class=o>=</span>/usr/bin/qbittorrent-nox
</span></span><span class=line><span class=cl><span class=nv>Restart</span><span class=o>=</span>on-failure
</span></span><span class=line><span class=cl><span class=o>[</span>Install<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>WantedBy</span><span class=o>=</span>multi-user.target
</span></span></code></pre></td></tr></table></div></div><p><strong>3.</strong> å¯ç”¨è¿›ç¨‹å®ˆæŠ¤ï¼Œç›´æ¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°±è¡Œäº†ï¼Œæœ€åä¸€æ¡å‘½ä»¤æ‰§è¡Œå®Œï¼Œå‡ºç°<code>active</code>å…³é”®å­—å°±è¯´æ˜ä¸€åˆ‡éƒ½å¦‚é¢„æœŸçš„é‚£æ ·è·‘èµ·æ¥äº†ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>systemctl</span> <span class=n>daemon</span><span class=o>-</span><span class=n>reload</span>
</span></span><span class=line><span class=cl><span class=n>systemctl</span> <span class=n>start</span> <span class=n>qbittorrent</span><span class=o>-</span><span class=n>nox</span>
</span></span><span class=line><span class=cl><span class=n>systemctl</span> <span class=n>enable</span> <span class=n>qbittorrent</span><span class=o>-</span><span class=n>nox</span>
</span></span><span class=line><span class=cl><span class=n>systemctl</span> <span class=n>status</span> <span class=n>qbittorrent</span><span class=o>-</span><span class=n>nox</span>
</span></span></code></pre></td></tr></table></div></div><p>è‡³æ­¤ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥æœåŠ¡å™¨çš„IPå’Œqbittorrent-noxçš„ç«¯å£å°±å¯ä»¥è¿›å…¥äº†ï¼Œä¾‹å¦‚<a class=link href=http://1.1.1.1:8080/ target=_blank rel=noopener>http://1.1.1.1:8080</a>ï¼Œè¿™é‡Œçš„1.1.1.1æ˜¯æœåŠ¡å™¨çš„IPï¼Œ8080æ˜¯åˆšæ‰è¿›ç¨‹å®ˆæŠ¤æ–‡ä»¶ä¸­å†™å…¥çš„ç«¯å£ã€‚ç”¨æˆ·åæ˜¯adminï¼Œç”¨æˆ·å¯†ç ï¼šadminadminã€‚
å¼ºçƒˆå»ºè®®è¿›å»ä¹‹åï¼Œç«‹é©¬ä¿®æ”¹ç”¨æˆ·åå’Œç”¨æˆ·å¯†ç ï¼ï¼ï¼å…·ä½“ä½ç½®åœ¨<code>tool>options>webui</code>è¿™é‡Œï¼Œè¿˜å¯ä»¥ä¿®æ”¹æˆä¸­æ–‡ã€‚</p><p><strong>4.</strong> ä¿®æ”¹ä¸‹è½½ç›®å½•å’Œè®¾ç½®æƒé™</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>mkdir /home/admin
</span></span><span class=line><span class=cl>chmod 777 /home/admin
</span></span></code></pre></td></tr></table></div></div><p>é‡å¯qbittorrent-noxï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>systemctl</span> <span class=n>daemon</span><span class=o>-</span><span class=n>reload</span>
</span></span></code></pre></td></tr></table></div></div><p>5.æœ€åæŠŠä¸‹è½½è·¯å¾„è®¾ç½®åˆ°<code>/home/admin</code>å°±OKäº†ï¼</p><h2 id=qbittorrent-noxå¿˜è®°å¯†ç ><code>qbittorrent-nox</code>å¿˜è®°å¯†ç </h2><p><code>cd /</code></p><p><code>find -name qBittorrent.conf</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>systemctl stop qbittorrent-nox
</span></span><span class=line><span class=cl>vi ./.config/qBittorrent/qBittorrent.conf
</span></span></code></pre></td></tr></table></div></div><p>æŠŠé…ç½®ä¸­çš„<code>Password_PBKDF2</code>åˆ é™¤è¿™ä¸€è¡Œ(viæŒ‰<code>dd</code>)</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>systemctl start qbittorrent-nox
</span></span></code></pre></td></tr></table></div></div><h2 id=nginxåä»£qbittorrent-noxçš„web-gui>Nginxåä»£qbittorrent-noxçš„Web-GUI</h2><h3 id=ä¿®æ”¹ç›‘å¬åœ°å€>ä¿®æ”¹ç›‘å¬åœ°å€</h3><p>http+éæ ‡ç«¯å£ï¼Œæ€»è®©äººå¼ºè¿«ç—‡çŠ¯äº†ï¼Œæ‰€ä»¥æäº†ä¸ªSSLå’ŒNginxåä»£ï¼Œè®©qbittorrent-noxçš„Web-GUIçœ‹èµ·æ¥èˆ’æœä¸€äº›ã€‚
é¦–å…ˆï¼Œåœ¨<code>tool>options>webui</code>ä¸­ï¼Œå°†ç›‘å¬çš„IPåœ°å€ä»<code>*</code>æ”¹æˆ<code>127.0.0.1</code>ï¼Œç„¶åæ‰§è¡Œé‡å¯å‘½ä»¤<code>systemctl restart qbittorrent-nox</code>ä»¥ç”Ÿæ•ˆã€‚è¿™æ ·åªæœ‰æœåŠ¡å™¨æœ¬åœ°æ‰èƒ½è®¿é—®ï¼Œå…¶ä»–éƒ½ä¸è¡Œ(ç½‘é¡µæ‰“ä¸å¼€ï¼Œå¾…åé¢é…ç½®å¥½åŸŸåæ‰èƒ½è®¿é—®)</p><h3 id=å®‰è£…-nginx>å®‰è£… nginx</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=l>sudo apt install nginx -y</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=l>sudo systemctl start nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=l>sudo systemctl enable nginx</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=æ–°å»ºç½‘ç«™ç›®å½•>æ–°å»ºç½‘ç«™ç›®å½•</h3><p>ä¸ºäº†ä¾¿äºç”³è¯·è¯ä¹¦ï¼Œéœ€è¦æ–°å»ºåä»£ç½‘ç«™ç›®å½•ï¼Œ<strong>ä¸€å®šä¸è¦åœ¨<code>/root</code>ç›®å½•ä¸Šæ–°å»º</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>mkdir</span> <span class=o>-</span><span class=n>p</span> <span class=o>/</span><span class=k>var</span><span class=o>/</span><span class=n>www</span><span class=o>/</span><span class=n>qt</span>
</span></span><span class=line><span class=cl><span class=n>cp</span> <span class=o>/</span><span class=n>usr</span><span class=o>/</span><span class=n>share</span><span class=o>/</span><span class=n>nginx</span><span class=o>/</span><span class=n>html</span><span class=o>/*</span> <span class=o>/</span><span class=k>var</span><span class=o>/</span><span class=n>www</span><span class=o>/</span><span class=n>qt</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=é…ç½®-nginx>é…ç½® nginx</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>vi /etc/nginx/conf.d/qt.conf
</span></span></code></pre></td></tr></table></div></div><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå°†<code>server_name _;</code>ä¸­çš„<code>_</code>æ”¹æˆåŸŸåï¼Œåœ¨<code>location /</code>ä¸­æ³¨é‡Šæ‰<code>try_files $uri $uri/ =404;</code>ï¼ˆdebian11ä¸Šæ²¡æœ‰è¿™ä¸€è¡Œï¼Œä¸ç”¨æ³¨é‡Šï¼‰ï¼Œå¹¶å°†ä»¥ä¸‹å†…å®¹å†™å…¥<code>location /å­—æ®µ</code>ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>                </span><span class=l>proxy_pass http://127.0.0.1:8080/;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=l>proxy_http_version 1.1;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=l>proxy_set_header X-Forwarded-Host $http_host;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=l>proxy_set_header X-Real-IP $remote_addr;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=l>proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=l>proxy_set_header X-Forwarded-Proto $scheme;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=l>http2_push_preload on;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=é…ç½®-nginx-http-80-ç«¯å£>é…ç½® Nginx http 80 ç«¯å£</h3><p>ä¸ºäº†ä½¿ä¸‹é¢ç”³è¯·è¯ä¹¦æ—¶èƒ½è®¿é—® <a class=link href=http://bore.vip/.well-known/acme-challenge/ target=_blank rel=noopener>http://bore.vip/.well-known/acme-challenge/</a>â€¦ è¿™ä¸ªé“¾æ¥ï¼Œé¦–å…ˆé…ç½®å¥½http://bore.vip/.well-known/acme-challenge/â€¦è¿™ä¸ªé“¾æ¥ï¼Œé¦–å…ˆé…ç½®å¥½Nginx 80 ç«¯å£ï¼Œä¿è¯ä¸Šè¿°ç½‘å€èƒ½é¡ºåˆ©è®¿é—®ï¼Œä»è€Œé¡ºåˆ©ç”³è¯·è¯ä¹¦ã€‚æ‰€ä»¥åœ¨ nginx é…ç½®çš„ server èŠ‚ç‚¹ä¸‹æ·»åŠ ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>location ~ /.well-known {
</span></span><span class=line><span class=cl>    allow all;
</span></span><span class=line><span class=cl>}
</span></span></code></pre></td></tr></table></div></div><p>æœ€ç»ˆä¿®æ”¹ä¸ºï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=l>server {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>listen       80;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=l>root   /var/www/qt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>index index.html index.htm index.nginx-debian.html;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>server_name  qt.bore.vip;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c>#access_log  /var/log/nginx/host.access.log  main;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>location / {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=l>proxy_pass http://127.0.0.1:8080/;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>proxy_http_version 1.1;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>proxy_set_header X-Forwarded-Host $http_host;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>proxy_set_header X-Real-IP $remote_addr;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>proxy_set_header X-Forwarded-Proto $scheme;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>http2_push_preload on;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>location ~ /.well-known {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>allow all;</span><span class=w>
</span></span></span><span class=line><span class=cl>}<span class=w>
</span></span></span><span class=line><span class=cl>}<span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>æµ‹è¯•é…ç½®æ˜¯å¦æœ‰é—®é¢˜ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>nginx -t
</span></span></code></pre></td></tr></table></div></div><p>é‡å¯ Nginx ç”Ÿæ•ˆï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>systemctl restart nginx
</span></span></code></pre></td></tr></table></div></div><h3 id=é…ç½®sslè¯ä¹¦>é…ç½®SSLè¯ä¹¦</h3><p>å®é™…ä¸Šï¼Œæˆ‘è¿˜æ·»åŠ äº†SSLï¼ˆéœ€è¦å…ˆæ³¨é‡Šæ‰serverä¸­çš„<code>listen 80 default_server;</code>å’Œ<code>listen [::]:80 default_server;</code>ä¸¤è¡Œ
ï¼‰ã€‚æ•´ä½“ç¤ºä¾‹å¦‚ä¸‹ï¼Œå°±ä¸ç»†è¯´äº†ï¼Œå¯ä»¥å¯¹ç…§ç€è‡ªå·±é…ç½®æ–‡ä»¶ä¿®æ”¹ã€‚å¦‚æœä¸ç†Ÿæ‚‰çš„ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨<code>Let's Encrypt</code>ç­‰ä¸€é”®SSL/TLSç¨‹åºæ·»åŠ SSLåŠŸèƒ½ã€‚</p><h4 id=å®‰è£…-certbot-1>å®‰è£… Certbot</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo apt-get install letsencrypt -y
</span></span></code></pre></td></tr></table></div></div><h4 id=ä½¿ç”¨-webroot-è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦-1>ä½¿ç”¨ webroot è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>certbot</span> <span class=n>certonly</span> <span class=o>--</span><span class=n>webroot</span> <span class=o>-</span><span class=n>w</span> <span class=o>/</span><span class=k>var</span><span class=o>/</span><span class=n>www</span><span class=o>/</span><span class=n>qt</span> <span class=o>-</span><span class=n>d</span> <span class=n>qt</span><span class=o>.</span><span class=n>bore</span><span class=o>.</span><span class=n>vip</span> <span class=o>-</span><span class=n>m</span> <span class=mi>455343442</span><span class=err>@</span><span class=n>qq</span><span class=o>.</span><span class=n>com</span> <span class=o>--</span><span class=n>agree</span><span class=o>-</span><span class=n>tos</span>
</span></span></code></pre></td></tr></table></div></div><hr><p>å¦‚æœæç¤º404é”™è¯¯ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>sudo</span> <span class=n>chmod</span> <span class=mi>755</span> <span class=o>/</span><span class=k>var</span><span class=o>/</span><span class=n>www</span><span class=o>/</span><span class=n>qt</span>
</span></span><span class=line><span class=cl><span class=n>systemctl</span> <span class=n>restart</span> <span class=n>nginx</span>
</span></span><span class=line><span class=cl><span class=n>systemctl</span> <span class=n>restart</span> <span class=n>qbittorrent</span><span class=o>-</span><span class=n>nox</span>
</span></span></code></pre></td></tr></table></div></div><p>RNå¯èƒ½è¦å¤šç”³è¯·å‡ éè¯ä¹¦ï¼Œbwgä¸€æ¬¡å°±æˆåŠŸäº†ã€‚</p><hr><h4 id=ç¼–è¾‘-nginx>ç¼–è¾‘ <code>Nginx</code></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>vi /etc/nginx/conf.d/qt.conf
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=l>server {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>listen       80;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>server_name  qt.bore.vip;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=l>root /var/www/qt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=c># Add index.php to the list if you are using PHP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=l>index index.html index.htm index.nginx-debian.html;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c>#access_log  /var/log/nginx/host.access.log  main;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>location / {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=l>proxy_pass http://127.0.0.1:8080/;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>proxy_http_version 1.1;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>proxy_set_header X-Forwarded-Host $http_host;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>proxy_set_header X-Real-IP $remote_addr;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>proxy_set_header X-Forwarded-Proto $scheme;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>http2_push_preload on;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>location ~ /.well-known {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>allow all;</span><span class=w>
</span></span></span><span class=line><span class=cl>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>listen 443 ssl;</span><span class=w> </span><span class=c># managed by Certbot</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># RSA certificate</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>ssl_certificate /etc/letsencrypt/live/qt.bore.vip/fullchain.pem;</span><span class=w> </span><span class=c># managed by Certbot</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>ssl_certificate_key /etc/letsencrypt/live/qt.bore.vip/privkey.pem;</span><span class=w> </span><span class=c># managed by Certbot</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	
</span></span></span><span class=line><span class=cl><span class=w>	    </span><span class=c># Redirect non-https traffic to https</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>if ($scheme != &#34;https&#34;) {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>return 301 https://$host$request_uri;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>}<span class=w> </span><span class=c># managed by Certbot</span><span class=w>
</span></span></span><span class=line><span class=cl>}<span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>æµ‹è¯•é…ç½®æ˜¯å¦æœ‰é—®é¢˜ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>nginx -t
</span></span></code></pre></td></tr></table></div></div><p>é‡å¯ Nginx ç”Ÿæ•ˆï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>systemctl restart nginx
</span></span></code></pre></td></tr></table></div></div><h4 id=è‡ªåŠ¨ç»­æœŸ-1>è‡ªåŠ¨ç»­æœŸ</h4><p>Letâ€™s Encrypt çš„è¯ä¹¦æœ‰æ•ˆæœŸä¸º 90 å¤©ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡ crontab å®šæ—¶è¿è¡Œå‘½ä»¤æ›´æ–°è¯ä¹¦ã€‚</p><p>å…ˆè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æµ‹è¯•è¯ä¹¦çš„è‡ªåŠ¨æ›´æ–°ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>certbot renew --dry-run
</span></span></code></pre></td></tr></table></div></div><p>å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œå°±å¯ä»¥ç¼–è¾‘ crontab å®šæœŸè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>crontab -e
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>30 2 * */2 * /usr/bin/certbot renew --quiet &amp;&amp; /bin/systemctl restart nginx
</span></span></code></pre></td></tr></table></div></div><p>æŸ¥çœ‹è¯ä¹¦æœ‰æ•ˆæœŸçš„å‘½ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>openssl x509 -noout -dates -in /etc/letsencrypt/live/qt.bore.vip/cert.pem
</span></span></code></pre></td></tr></table></div></div><h2 id=é…ç½®nginxå¼€å¯ç›®å½•æµè§ˆ>é…ç½®nginxå¼€å¯ç›®å½•æµè§ˆ</h2><p>å°†qtä¸‹è½½ç›®å½•ç»“åˆnginxå¼€å¯ç›®å½•æµè§ˆï¼Œä¾¿äºä¸‹è½½ã€‚</p><h3 id=å®‰è£…-nginx-1>å®‰è£… nginx</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo apt install nginx -y
</span></span><span class=line><span class=cl>sudo systemctl start nginx
</span></span><span class=line><span class=cl>sudo systemctl enable nginx
</span></span></code></pre></td></tr></table></div></div><h3 id=é…ç½®-nginx-1>é…ç½® nginx</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>vi /etc/nginx/conf.d/ftp.conf
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=l>server {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>listen  80 ;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>listen [::]:80;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>root /home/admin;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>server_name ftp.bore.vip;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>access_log  /var/log/nginx/hexo_access.log;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>error_log   /var/log/nginx/hexo_error.log;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>error_page 404 =  /404.html;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>location ~* ^.+\.(ico|gif|jpg|jpeg|png)$ {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>root /home/admin;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>access_log   off;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>expires      1d;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>location ~* ^.+\.(css|js|txt|xml|swf|wav)$ {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>root /home/admin;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>access_log   off;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>expires      10m;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>location / {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>root /home/admin;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>if (-f $request_filename) {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>rewrite ^/(.*)$  /$1 break;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>location /nginx_status {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>stub_status on;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>access_log off;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>autoindex on;                        </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>autoindex_exact_size off;            </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>autoindex_localtime on;              </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>charset utf-8,gbk;</span><span class=w>
</span></span></span><span class=line><span class=cl>}<span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=é…ç½®-ssl-è¯ä¹¦>é…ç½® SSL è¯ä¹¦</h3><h4 id=å®‰è£…-certbot-2>å®‰è£… Certbot</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo apt-get install letsencrypt -y
</span></span></code></pre></td></tr></table></div></div><h4 id=ä½¿ç”¨-webroot-è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦-2>ä½¿ç”¨ webroot è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>certbot certonly --webroot -w /home/admin -d example.com -m 455343442@qq.com --agree-tos
</span></span></code></pre></td></tr></table></div></div><h4 id=ç¼–è¾‘-nginx-1>ç¼–è¾‘ <code>Nginx</code></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>vi /etc/nginx/conf.d/ftp.conf
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=l>server {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>listen 80;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>listen [::]:80;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>root /home/admin;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>server_name  ftp.bore.vip;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>listen 443 ssl;</span><span class=w> </span><span class=c># managed by Certbot</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># RSA certificate</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>ssl_certificate /etc/letsencrypt/live/ftp.bore.vip/fullchain.pem;</span><span class=w> </span><span class=c># managed by Certbot</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>ssl_certificate_key /etc/letsencrypt/live/ftp.bore.vip/privkey.pem;</span><span class=w> </span><span class=c># managed by Certbot</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Redirect non-https traffic to https</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>if ($scheme != &#34;https&#34;) {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>return 301 https://$host$request_uri;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>}<span class=w> </span><span class=c># managed by Certbot</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>location / {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>root /home/admin;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>autoindex on;                        </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>autoindex_exact_size off;            </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>autoindex_localtime on;              </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>charset utf-8,gbk;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>}<span class=w>
</span></span></span><span class=line><span class=cl>}<span class=w>
</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>systemctl restart nginx
</span></span></code></pre></td></tr></table></div></div><h4 id=è‡ªåŠ¨ç»­æœŸ-2>è‡ªåŠ¨ç»­æœŸ</h4><p>Letâ€™s Encrypt çš„è¯ä¹¦æœ‰æ•ˆæœŸä¸º 90 å¤©ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡ crontab å®šæ—¶è¿è¡Œå‘½ä»¤æ›´æ–°è¯ä¹¦ã€‚</p><p>å…ˆè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æµ‹è¯•è¯ä¹¦çš„è‡ªåŠ¨æ›´æ–°ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>certbot renew --dry-run
</span></span></code></pre></td></tr></table></div></div><p>å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œå°±å¯ä»¥ç¼–è¾‘ crontab å®šæœŸè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>crontab -e
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>30 2 * */2 * /usr/bin/certbot renew --quiet &amp;&amp; /bin/systemctl restart nginx
</span></span></code></pre></td></tr></table></div></div><p>æŸ¥çœ‹è¯ä¹¦æœ‰æ•ˆæœŸçš„å‘½ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>openssl x509 -noout -dates -in /etc/letsencrypt/live/ftp.bore.vip/cert.pem
</span></span></code></pre></td></tr></table></div></div><h2 id=debianæ¸…ç†åƒåœ¾>Debianæ¸…ç†åƒåœ¾</h2><p>chatgptæé—®ï¼š<code>å†™ä¸€ä¸ªè„šæœ¬ï¼Œä¸€ä¸ªæ˜ŸæœŸè‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡ï¼Œå¸®æˆ‘æ¸…ç†Debianåƒåœ¾ï¼Œç”¨vi</code></p><p>âœ… ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæ¸…ç†è„šæœ¬ï¼ˆç”¨ viï¼‰</p><p>è¿è¡Œï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo vi /usr/local/bin/clean_debian.sh
</span></span></code></pre></td></tr></table></div></div><p>åœ¨æ–‡ä»¶é‡Œç²˜è´´ä¸‹é¢è„šæœ¬å†…å®¹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ¸…ç† APT ç¼“å­˜</span>
</span></span><span class=line><span class=cl>apt-get clean
</span></span><span class=line><span class=cl>apt-get autoclean
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åˆ é™¤ä¸éœ€è¦çš„ä¾èµ–åŒ…</span>
</span></span><span class=line><span class=cl>apt-get autoremove -y
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å‹ç¼© journalctl æ—¥å¿—åˆ° 100M</span>
</span></span><span class=line><span class=cl>journalctl --vacuum-size<span class=o>=</span>100M
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ¸…ç†ä¸´æ—¶æ–‡ä»¶å¤¹</span>
</span></span><span class=line><span class=cl>rm -rf /tmp/*
</span></span><span class=line><span class=cl>rm -rf /var/tmp/*
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Docker æ¸…ç†ï¼ˆå¯é€‰ï¼Œå¦‚æœä½ ä¸ç”¨ Docker å¯åˆ é™¤è¿™æ®µï¼‰</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nb>command</span> -v docker &gt;/dev/null 2&gt;<span class=p>&amp;</span>1<span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    docker system prune -f
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¿å­˜å¹¶é€€å‡ºï¼š
<strong>æŒ‰ä¸‹ <code>ESC</code> â†’ è¾“å…¥ <code>:wq</code> â†’ å›è½¦</strong></p><hr><p>âœ… ç¬¬äºŒæ­¥ï¼šç»™è„šæœ¬æ‰§è¡Œæƒé™</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo chmod +x /usr/local/bin/clean_debian.sh
</span></span></code></pre></td></tr></table></div></div><hr><p>âœ… ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®æ¯å‘¨è‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡ï¼ˆcronï¼‰</p><p>ç¼–è¾‘ crontabï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo crontab -e
</span></span></code></pre></td></tr></table></div></div><p>åŠ å…¥ä¸‹é¢ä¸€è¡Œï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>0 3 * * 0 /usr/local/bin/clean_debian.sh &gt;/dev/null 2&gt;&amp;1
</span></span></code></pre></td></tr></table></div></div><p>è¯´æ˜ï¼š</p><ul><li>æ¯å‘¨æ—¥å‡Œæ™¨ 03:00 è‡ªåŠ¨æ¸…ç†ä¸€æ¬¡</li><li>è¾“å‡ºå…¨éƒ¨éšè—ï¼ˆä¿æŒç³»ç»Ÿå¹²å‡€ï¼‰</li></ul><hr><p>âœ… ä¸€é”®æµ‹è¯•è„šæœ¬æ˜¯å¦æ­£å¸¸ç”Ÿæ•ˆ</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo /usr/local/bin/clean_debian.sh
</span></span></code></pre></td></tr></table></div></div><h2 id=é™„å½•>é™„å½•</h2><h3 id=vsftpdconfæ³¨é‡Š><code>vsftpd.conf</code>æ³¨é‡Š</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span><span class=lnt>84
</span><span class=lnt>85
</span><span class=lnt>86
</span><span class=lnt>87
</span><span class=lnt>88
</span><span class=lnt>89
</span><span class=lnt>90
</span><span class=lnt>91
</span><span class=lnt>92
</span><span class=lnt>93
</span><span class=lnt>94
</span><span class=lnt>95
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># å…¨åŸŸæ€§é…ç½®</span>
</span></span><span class=line><span class=cl><span class=c1># æœ¬åœ°ç³»çµ±ä½¿ç”¨è€…å¯«å…¥è¨±å¯æ¬Šï¼›</span>
</span></span><span class=line><span class=cl><span class=nv>write_enable</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æœ¬åœ°ä½¿ç”¨è€…å»ºç«‹æª”æ¡ˆåŠç›®éŒ„é è¨­è¨±å¯æ¬Šæ©ç¢¼ï¼›</span>
</span></span><span class=line><span class=cl><span class=nv>local_umask</span><span class=o>=</span><span class=m>022</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åˆ—å°ç›®éŒ„é¡¯ç¤ºè³‡è¨Šï¼Œé€šå¸¸ç”¨æ–¼ä½¿ç”¨è€…ç¬¬ä¸€æ¬¡è¨ªå•ç›®éŒ„æ™‚ï¼Œè³‡è¨Šæç¤ºï¼›</span>
</span></span><span class=line><span class=cl><span class=nv>dirmessage_enable</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å•Ÿç”¨ä¸Šå‚³/ä¸‹è¼‰æ—¥èªŒè¨˜éŒ„ï¼› </span>
</span></span><span class=line><span class=cl><span class=nv>xferlog_enable</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ—¥èªŒæª”æ¡ˆå°‡æ ¹æ“šxferlogçš„æ¨™æº–æ ¼å¼å¯«å…¥ï¼›</span>
</span></span><span class=line><span class=cl><span class=nv>xferlog_std_format</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æŒ‡å®š log è·¯å¾‘</span>
</span></span><span class=line><span class=cl><span class=nv>xferlog_file</span><span class=o>=</span>/var/log/vsftpd.log
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># FTPä½¿ç”¨20åŸ é€²è¡Œè³‡æ–™å‚³è¼¸ï¼›</span>
</span></span><span class=line><span class=cl><span class=nv>connect_from_port_20</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Vsftpdä¸ä»¥ç¨ç«‹çš„æœå‹™å•Ÿå‹•ï¼Œé€šéXinetdæœå‹™ç®¡ç†ï¼Œå»ºè­°æ”¹æˆYESï¼›</span>
</span></span><span class=line><span class=cl><span class=nv>listen</span><span class=o>=</span>NO
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å•Ÿç”¨IPV6ç›£è½ï¼›</span>
</span></span><span class=line><span class=cl><span class=nv>listen_ipv6</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç™»å…¥FTPä¼ºæœå™¨ï¼Œä¾æ“š/etc/pam.d/vsftpdä¸­å…§å®¹é€²è¡Œèªè­‰ï¼›</span>
</span></span><span class=line><span class=cl><span class=nv>pam_service_name</span><span class=o>=</span>vsftpd
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Vsftpd.user_listå’Œftpusersé…ç½®æª”æ¡ˆè£¡ä½¿ç”¨è€…ç¦æ­¢è¨ªå•FTPï¼›</span>
</span></span><span class=line><span class=cl><span class=nv>userlist_enable</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># è¨­å®švsftpdèˆ‡tcp wrapperçµåˆé€²è¡Œä¸»æ©Ÿçš„è¨ªå•æ§åˆ¶ï¼ŒVsftpdä¼ºæœå™¨æª¢æŸ¥/etc/hosts.allow å’Œ/etc/hosts.denyä¸­çš„è¨­å®šï¼Œä¾†æ±ºå®šè«‹æ±‚é€£ç·šçš„ä¸»æ©Ÿï¼Œæ˜¯å¦å…è¨±è¨ªå•è©²FTPä¼ºæœå™¨ã€‚</span>
</span></span><span class=line><span class=cl><span class=nv>tcp_wrappers</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># é™åˆ¶ä½¿ç”¨è€…éƒ½åªèƒ½è®€å–å®¶ç›®éŒ„</span>
</span></span><span class=line><span class=cl><span class=nv>chroot_local_user</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># é€™æ¨£å­æ‰å¯ä»¥æ­£å¸¸è®€å–å®¶ç›®éŒ„</span>
</span></span><span class=line><span class=cl><span class=nv>allow_writeable_chroot</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å¸³è™Ÿæ¸…å–®è·¯å¾‘</span>
</span></span><span class=line><span class=cl><span class=nv>userlist_file</span><span class=o>=</span>/etc/vsftpd.userlist
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç™½åå–®ï¼Œæ‹’çµ•é™¤æª”æ¡ˆä¸­çš„ä½¿ç”¨è€…å¤–çš„ä½¿ç”¨è€…FTPè¨ªå•</span>
</span></span><span class=line><span class=cl><span class=nv>userlist_deny</span><span class=o>=</span>NO
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ˜¯å¦ä½¿ç”¨æœ¬åœ°æ™‚é–“ï¼Ÿvsftpd é è¨­ä½¿ç”¨ GMT æ™‚é–“(æ ¼æ—å¨æ²»)ï¼Œæ‰€ä»¥æœƒæ¯”å°ç£æ™š 8 å°æ™‚ï¼Œå»ºè­°è¨­å®šç‚º YES å§</span>
</span></span><span class=line><span class=cl><span class=nv>use_localtime</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># é€™å€‹é¸é …å¿…é ˆæŒ‡å®šä¸€å€‹ç©ºçš„è³‡æ–™å¤¾ä¸”ä»»ä½•ç™»å…¥è€…éƒ½ä¸èƒ½æœ‰å¯«å…¥çš„æ¬Šé™ï¼Œç•¶vsftpd ä¸éœ€è¦file system çš„æ¬Šé™æ™‚ï¼Œå°±æœƒå°‡ä½¿ç”¨è€…é™åˆ¶åœ¨æ­¤è³‡æ–™å¤¾ä¸­ã€‚é è¨­å€¼ç‚º/usr/share/empty</span>
</span></span><span class=line><span class=cl><span class=nv>secure_chroot_dir</span><span class=o>=</span>/var/run/vsftpd/empty
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># é€™æ¨£å­æœ‰å¯èƒ½åœ¨å‚³ä¸­æ–‡ä¸æœƒæœ‰äº‚ç¢¼</span>
</span></span><span class=line><span class=cl><span class=nv>syslog_enable</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åŒä¸€å€‹IPæœ€å¤§åŒæ™‚ä¸‹è¼‰äººæ•¸ï¼Œé è¨­æ²’æœ‰é™åˆ¶</span>
</span></span><span class=line><span class=cl><span class=nv>max_per_ip</span><span class=o>=</span><span class=m>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># é€£ç·šé–’ç½®æ™‚é–“è¶…180ç§’å°±ä¸­æ–·ï¼Œå–®ä½ä»¥second</span>
</span></span><span class=line><span class=cl><span class=nv>accept_timeout</span><span class=o>=</span>180<span class=o>(</span>DEFAULT:60<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># è³‡æ–™å‚³é€é–’ç½®æ™‚é–“è¶…180ç§’å°±ä¸­æ–·ï¼Œå–®ä½ä»¥second</span>
</span></span><span class=line><span class=cl><span class=nv>data_connection_timeout</span><span class=o>=</span>180<span class=o>(</span>DEFAULT:YES<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æœ¬åœ°ä½¿ç”¨è€…é…ç½®</span>
</span></span><span class=line><span class=cl><span class=c1># å•Ÿç”¨æœ¬åœ°ç³»çµ±ä½¿ç”¨è€…è¨ªå•ï¼›</span>
</span></span><span class=line><span class=cl><span class=nv>local_enable</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æœ¬åœ°ä½¿ç”¨è€…å»ºç«‹æª”æ¡ˆåŠç›®éŒ„é è¨­è¨±å¯æ¬Šæ©ç¢¼ï¼›</span>
</span></span><span class=line><span class=cl><span class=nv>local_umask</span><span class=o>=</span><span class=m>022</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ä¿®æ”¹æœ¬åœ°ä½¿ç”¨è€…ç™»å…¥æ™‚è¨ªå•çš„ç›®éŒ„è·¯å¾‘</span>
</span></span><span class=line><span class=cl><span class=nv>local_root</span><span class=o>=</span>/home/ftp
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åŒ¿åä½¿ç”¨è€…è¨ªå•é…ç½®ï¼ˆæœ€å¤§è¨±å¯æ¬Šï¼‰</span>
</span></span><span class=line><span class=cl><span class=c1># é–‹å•ŸåŒ¿åä½¿ç”¨è€…è¨ªå•ï¼›</span>
</span></span><span class=line><span class=cl><span class=nv>anonymous_enable</span><span class=o>=</span>NO
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åŒ¿åä½¿ç”¨è€…ä¸Šå‚³æª”æ¡ˆçš„umaskå€¼</span>
</span></span><span class=line><span class=cl><span class=nv>anon_umask</span><span class=o>=</span><span class=m>022</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å…è¨±åŒ¿åä½¿ç”¨è€…ä¸Šå‚³æª”æ¡ˆ</span>
</span></span><span class=line><span class=cl><span class=nv>anon_upload_enable</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å…è¨±åŒ¿åä½¿ç”¨è€…å»ºç«‹ç›®éŒ„</span>
</span></span><span class=line><span class=cl><span class=nv>anon_mkdir_write_enable</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å…è¨±åŒ¿åä½¿ç”¨è€…ä¿®æ”¹ç›®éŒ„åç¨±æˆ–åˆªé™¤ç›®éŒ„</span>
</span></span><span class=line><span class=cl><span class=nv>anon_other_write_enable</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ä¿®æ”¹åŒ¿åä½¿ç”¨è€…ç™»å…¥æ™‚è¨ªå•çš„ç›®éŒ„è·¯å¾‘</span>
</span></span><span class=line><span class=cl><span class=nv>anon_root</span><span class=o>=</span>/data/ftpdata
</span></span></code></pre></td></tr></table></div></div><h2 id=å‚è€ƒé“¾æ¥>å‚è€ƒé“¾æ¥</h2><ul><li><a class=link href=https://www.uskvm.com/p/32.html target=_blank rel=noopener>1.è§£å†³ Debian ä¸‹ä½¿ç”¨ vi æ—¶æ–¹å‘é”®ä¹±ç ï¼Œé€€æ ¼é”®ä¸èƒ½ä½¿ç”¨çš„é—®é¢˜</a></li><li><a class=link href=https://shixiongfei.com/debian-vsftpd.html target=_blank rel=noopener>2.Debianå®‰è£…vsftpd</a></li><li><a class=link href="https://blog.fish2bird.com/?p=706" target=_blank rel=noopener>3.Debianä¸‹vsftpdè®¾ç½®å…è®¸rootç™»å½•åˆ†æ</a></li><li><a class=link href=https://zhuanlan.zhihu.com/p/83730878 target=_blank rel=noopener>4.puttyä¿å­˜ç™»å½•è´¦å·å’Œå¯†ç </a></li><li><a class=link href=https://www.myfreax.com/how-to-setup-ftp-server-with-vsftpd-on-debian-9/ target=_blank rel=noopener>5.å¦‚ä½•åœ¨Debian 9ä¸Šä½¿ç”¨VSFTPDè®¾ç½®FTPæœåŠ¡å™¨</a></li><li><a class=link href=https://cloud.tencent.com/developer/article/1946063 target=_blank rel=noopener>6.Ubuntuå®‰è£…Transmissionå¹¶ç¾åŒ–WEB UIå®æ“æ•™ç¨‹</a></li><li><a class=link href=https://www.nginx.com/blog/using-free-ssltls-certificates-from-lets-encrypt-with-nginx/ target=_blank rel=noopener>7.Update: Using Free Letâ€™s Encrypt SSL/TLS Certificates with NGINX</a></li><li>8.<a class=link href=https://pa.ci/210.html target=_blank rel=noopener>Debian 11å®‰è£…qbittorrent-noxå¹¶è®¾ç½®Nginxåä»£</a></li><li><a class=link href=https://zxqme.com/archives/143/ target=_blank rel=noopener>9.Debianå®‰è£…qbittorrent-nox</a></li></ul></div><div class="shuoshuo-tags meta-wrapper" style=margin-top:15px!important;margin-bottom:5px!important;gap:10px!important><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:14px;height:14px;color:var(--card-text-color-secondary)"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
<a href=/tags/linux/ class="meta-item shuoshuo-tag" title="æŸ¥çœ‹æ ‡ç­¾: linux"><span>#linux</span></a></div><div class=shuoshuo-footer-info><div class="shuoshuo-edit-link meta-wrapper" style=gap:15px!important><a href=https://github.com/iwyang/iwyang.github.io/edit/develop/content/post/Debian%e4%bd%bf%e7%94%a8%e5%a4%87%e5%bf%98/index.md target=_blank rel="noopener noreferrer" class=meta-item title="å‰å¾€ GitHub ç¼–è¾‘æ­¤é¡µ"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
<span>ç¼–è¾‘æ­¤é¡µ</span>
</a><span class=separator>|</span>
<a class="meta-item git-hash-text" href=https://github.com/iwyang/iwyang.github.io/commit/26a215ebb8fca78d98f384856b8ab5e0e2056333 target=_blank rel="noopener noreferrer" title="Commit Hash: 26a215e">#26a215e</a></div></div></article><article class=shuoshuo-card><div class=shuoshuo-header><div class="shuoshuo-meta meta-wrapper"><time class="shuoshuo-time meta-item" datetime=2020-08-10T10:52:25Z><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
<span>2020-08-10</span>
</time><span class="shuoshuo-updated-time meta-item" datetime=2026-02-18T15:52:01+08:00><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4A2 2 0 002 6v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121.0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
<span>2026-02-18</span></span></div></div><div class="shuoshuo-content style-cs-content article-post"><h2 id=æ›´æ”¹æ—¶åŒº>æ›´æ”¹æ—¶åŒº</h2><p>å¦‚æœä½ ä¸çŸ¥é“æœåŠ¡å™¨å½“å‰æ—¶é—´ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼ŒæŸ¥çœ‹å½“å‰æ—¶é—´ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>date -R
</span></span></code></pre></td></tr></table></div></div><p>ä¿®æ”¹å½“å‰æ—¶åŒºä¸ºä¸Šæµ·ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo timedatectl set-timezone Asia/Shanghai
</span></span></code></pre></td></tr></table></div></div><p>å†æ¬¡ä¸å¸¦ä»»ä½•é€‰é¡¹å‚æ•°è°ƒç”¨ <code>timedatectl </code>å‘½ä»¤ï¼Œæ‰“å°ç³»ç»Ÿå½“å‰è®¾ç½®çš„æ—¶åŒºå³å¯ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>timedatectl
</span></span></code></pre></td></tr></table></div></div><h2 id=æŸ¥çœ‹å®šæ—¶ä»»åŠ¡>æŸ¥çœ‹å®šæ—¶ä»»åŠ¡</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>crontab -l
</span></span></code></pre></td></tr></table></div></div><h2 id=ç¼–è¾‘å®šæ—¶ä»»åŠ¡>ç¼–è¾‘å®šæ—¶ä»»åŠ¡</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>crontab -e
</span></span></code></pre></td></tr></table></div></div><p>ç¬¬ä¸€ä¸ª*æ˜¯åˆ†é’Ÿ</p><p>ç¬¬äºŒä¸ª*æ˜¯å°æ—¶</p><p>ç¬¬ä¸‰ä¸ª*æ˜¯æ—¥æœŸ</p><p>ç¬¬å››ä¸ª*æ˜¯æœˆä»½</p><p>ç¬¬äº”ä¸ª*æ˜¯æ˜ŸæœŸ(0-6)</p><p><strong>ä¾‹å¦‚ï¼šæ¯ä¸ªæ˜ŸæœŸä¸€å‡Œæ™¨3ç‚¹è‡ªåŠ¨é‡å¯</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=m>0</span> <span class=m>3</span> * * <span class=m>1</span>  /sbin/reboot
</span></span></code></pre></td></tr></table></div></div><h2 id=ä½¿ç”¨å®ä¾‹>ä½¿ç”¨å®ä¾‹</h2><p>æ¯å¤©ï¼Œæ¯æœˆï¼Œæ¯å¹´ å®šæ—¶å¯åŠ¨:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>æ¯äº”åˆ†é’Ÿæ‰§è¡Œ</span>  <span class=o>*</span><span class=err>/5 * * * *</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>æ¯å°æ—¶æ‰§è¡Œ</span>     <span class=mi>0</span> <span class=o>*</span> <span class=o>*</span> <span class=o>*</span> <span class=o>*</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>æ¯å¤©æ‰§è¡Œ</span>        <span class=mi>0</span> <span class=mi>0</span> <span class=o>*</span> <span class=o>*</span> <span class=o>*</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>æ¯å‘¨æ‰§è¡Œ</span>       <span class=mi>0</span> <span class=mi>0</span> <span class=o>*</span> <span class=o>*</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>æ¯æœˆæ‰§è¡Œ</span>        <span class=mi>0</span> <span class=mi>0</span> <span class=mi>1</span> <span class=o>*</span> <span class=o>*</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>æ¯å¹´æ‰§è¡Œ</span>       <span class=mi>0</span> <span class=mi>0</span> <span class=mi>1</span> <span class=mi>1</span> <span class=o>*</span>
</span></span></code></pre></td></tr></table></div></div><p>crontabæ—¶é—´ä¸¾ä¾‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=err>#</span> <span class=nx>æ¯å¤©æ—©ä¸Š6ç‚¹</span> 
</span></span><span class=line><span class=cl><span class=mi>0</span> <span class=mi>6</span> <span class=o>*</span> <span class=o>*</span> <span class=o>*</span> <span class=nx>echo</span> <span class=s2>&#34;Good morning.&#34;</span> <span class=o>&gt;&gt;</span> <span class=err>/tmp/test.txt //æ³¨æ„å•çº¯echoï¼Œä»å±å¹•ä¸Šçœ‹ä¸åˆ°ä»»ä½•è¾“å‡ºï¼Œå› ä¸ºcronæŠŠä»»ä½•è¾“å‡ºéƒ½emailåˆ°rootçš„ä¿¡ç®±äº†ã€‚</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>æ¯ä¸¤ä¸ªå°æ—¶</span> 
</span></span><span class=line><span class=cl><span class=mi>0</span> <span class=o>*</span><span class=err>/2 * * * echo &#34;Have a break now.&#34; &gt;&gt; /tmp/test.txt  </span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>æ™šä¸Š11ç‚¹åˆ°æ—©ä¸Š8ç‚¹ä¹‹é—´æ¯ä¸¤ä¸ªå°æ—¶å’Œæ—©ä¸Šå…«ç‚¹</span> 
</span></span><span class=line><span class=cl><span class=mi>0</span> <span class=mi>23</span><span class=o>-</span><span class=mi>7</span><span class=o>/</span><span class=mi>2</span><span class=err>ï¼Œ</span><span class=mi>8</span> <span class=o>*</span> <span class=o>*</span> <span class=o>*</span> <span class=nx>echo</span> <span class=s2>&#34;Have a good dream&#34;</span> <span class=o>&gt;&gt;</span> <span class=err>/tmp/test.txt</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>æ¯ä¸ªæœˆçš„4å·å’Œæ¯ä¸ªç¤¼æ‹œçš„ç¤¼æ‹œä¸€åˆ°ç¤¼æ‹œä¸‰çš„æ—©ä¸Š11ç‚¹</span> 
</span></span><span class=line><span class=cl><span class=mi>0</span> <span class=mi>11</span> <span class=mi>4</span> <span class=o>*</span> <span class=mi>1</span><span class=o>-</span><span class=mi>3</span> <span class=nx>command</span> <span class=nx>line</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=mi>1</span><span class=nx>æœˆ1æ—¥æ—©ä¸Š4ç‚¹</span> 
</span></span><span class=line><span class=cl><span class=mi>0</span> <span class=mi>4</span> <span class=mi>1</span> <span class=mi>1</span> <span class=o>*</span> <span class=nx>command</span> <span class=nx>line</span> <span class=nx>SHELL</span><span class=o>=</span><span class=err>/bin/bash PATH=/sbin:/bin:/usr/sbin:/usr/bin MAILTO=root //å¦‚æœå‡ºç°é”™è¯¯ï¼Œæˆ–è€…æœ‰æ•°æ®è¾“å‡ºï¼Œæ•°æ®ä½œä¸ºé‚®ä»¶å‘ç»™è¿™ä¸ªå¸å· HOME=/ </span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>æ¯å°æ—¶</span><span class=err>ï¼ˆ</span><span class=nx>ç¬¬ä¸€åˆ†é’Ÿ</span><span class=err>ï¼‰</span><span class=nx>æ‰§è¡Œ</span><span class=o>/</span><span class=nx>etc</span><span class=o>/</span><span class=nx>cron</span><span class=p>.</span><span class=nx>hourlyå†…çš„è„šæœ¬</span>
</span></span><span class=line><span class=cl><span class=mi>01</span> <span class=o>*</span> <span class=o>*</span> <span class=o>*</span> <span class=o>*</span> <span class=nx>root</span> <span class=nx>run</span><span class=o>-</span><span class=nx>parts</span> <span class=o>/</span><span class=nx>etc</span><span class=o>/</span><span class=nx>cron</span><span class=p>.</span><span class=nx>hourly</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>æ¯å¤©</span><span class=err>ï¼ˆ</span><span class=nx>å‡Œæ™¨4</span><span class=err>ï¼š</span><span class=mi>02</span><span class=err>ï¼‰</span><span class=nx>æ‰§è¡Œ</span><span class=o>/</span><span class=nx>etc</span><span class=o>/</span><span class=nx>cron</span><span class=p>.</span><span class=nx>dailyå†…çš„è„šæœ¬</span>
</span></span><span class=line><span class=cl><span class=mi>02</span> <span class=mi>4</span> <span class=o>*</span> <span class=o>*</span> <span class=o>*</span> <span class=nx>root</span> <span class=nx>run</span><span class=o>-</span><span class=nx>parts</span> <span class=o>/</span><span class=nx>etc</span><span class=o>/</span><span class=nx>cron</span><span class=p>.</span><span class=nx>daily</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>æ¯æ˜ŸæœŸ</span><span class=err>ï¼ˆ</span><span class=nx>å‘¨æ—¥å‡Œæ™¨4</span><span class=err>ï¼š</span><span class=mi>22</span><span class=err>ï¼‰</span><span class=nx>æ‰§è¡Œ</span><span class=o>/</span><span class=nx>etc</span><span class=o>/</span><span class=nx>cron</span><span class=p>.</span><span class=nx>weeklyå†…çš„è„šæœ¬</span>
</span></span><span class=line><span class=cl><span class=mi>22</span> <span class=mi>4</span> <span class=o>*</span> <span class=o>*</span> <span class=mi>0</span> <span class=nx>root</span> <span class=nx>run</span><span class=o>-</span><span class=nx>parts</span> <span class=o>/</span><span class=nx>etc</span><span class=o>/</span><span class=nx>cron</span><span class=p>.</span><span class=nx>weekly</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>æ¯æœˆ</span><span class=err>ï¼ˆ</span><span class=mi>1</span><span class=nx>å·å‡Œæ™¨4</span><span class=err>ï¼š</span><span class=mi>42</span><span class=err>ï¼‰</span><span class=nx>å»æ‰§è¡Œ</span><span class=o>/</span><span class=nx>etc</span><span class=o>/</span><span class=nx>cron</span><span class=p>.</span><span class=nx>monthlyå†…çš„è„šæœ¬</span> 
</span></span><span class=line><span class=cl><span class=mi>42</span> <span class=mi>4</span> <span class=mi>1</span> <span class=o>*</span> <span class=o>*</span> <span class=nx>root</span> <span class=nx>run</span><span class=o>-</span><span class=nx>parts</span> <span class=o>/</span><span class=nx>etc</span><span class=o>/</span><span class=nx>cron</span><span class=p>.</span><span class=nx>monthly</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>æ³¨æ„</span><span class=o>:</span>  <span class=s2>&#34;run-parts&#34;</span><span class=nx>è¿™ä¸ªå‚æ•°äº†</span><span class=err>ï¼Œ</span><span class=nx>å¦‚æœå»æ‰è¿™ä¸ªå‚æ•°çš„è¯</span><span class=err>ï¼Œ</span><span class=nx>åé¢å°±å¯ä»¥å†™è¦è¿è¡Œçš„æŸä¸ªè„šæœ¬å</span><span class=err>ï¼Œ</span><span class=nx>è€Œä¸æ˜¯æ–‡ä»¶å¤¹å</span><span class=err>ã€‚</span> ã€€ 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>æ¯å¤©çš„ä¸‹åˆ4ç‚¹</span><span class=err>ã€</span><span class=mi>5</span><span class=nx>ç‚¹</span><span class=err>ã€</span><span class=mi>6</span><span class=nx>ç‚¹çš„5</span> <span class=nx>min</span><span class=err>ã€</span><span class=mi>15</span> <span class=nx>min</span><span class=err>ã€</span><span class=mi>25</span> <span class=nx>min</span><span class=err>ã€</span><span class=mi>35</span> <span class=nx>min</span><span class=err>ã€</span><span class=mi>45</span> <span class=nx>min</span><span class=err>ã€</span><span class=mi>55</span> <span class=nx>minæ—¶æ‰§è¡Œå‘½ä»¤</span><span class=err>ã€‚</span> 
</span></span><span class=line><span class=cl><span class=mi>5</span><span class=err>ï¼Œ</span><span class=mi>15</span><span class=err>ï¼Œ</span><span class=mi>25</span><span class=err>ï¼Œ</span><span class=mi>35</span><span class=err>ï¼Œ</span><span class=mi>45</span><span class=err>ï¼Œ</span><span class=mi>55</span> <span class=mi>16</span><span class=err>ï¼Œ</span><span class=mi>17</span><span class=err>ï¼Œ</span><span class=mi>18</span> <span class=o>*</span> <span class=o>*</span> <span class=o>*</span> <span class=nx>command</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>æ¯å‘¨ä¸€</span><span class=err>ï¼Œ</span><span class=nx>ä¸‰</span><span class=err>ï¼Œ</span><span class=nx>äº”çš„ä¸‹åˆ3</span><span class=err>ï¼š</span><span class=mi>00</span><span class=nx>ç³»ç»Ÿè¿›å…¥ç»´æŠ¤çŠ¶æ€</span><span class=err>ï¼Œ</span><span class=nx>é‡æ–°å¯åŠ¨ç³»ç»Ÿ</span><span class=err>ã€‚</span>
</span></span><span class=line><span class=cl><span class=mi>00</span> <span class=mi>15</span> <span class=o>*</span> <span class=o>*</span><span class=mi>1</span><span class=err>ï¼Œ</span><span class=mi>3</span><span class=err>ï¼Œ</span><span class=mi>5</span> <span class=nx>shutdown</span> <span class=o>-</span><span class=nx>r</span> <span class=o>+</span><span class=mi>5</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>æ¯å°æ—¶çš„10åˆ†</span><span class=err>ï¼Œ</span><span class=mi>40</span><span class=nx>åˆ†æ‰§è¡Œç”¨æˆ·ç›®å½•ä¸‹çš„innd</span><span class=o>/</span><span class=nx>bbslinè¿™ä¸ªæŒ‡ä»¤</span><span class=err>ï¼š</span> 
</span></span><span class=line><span class=cl><span class=mi>10</span><span class=err>ï¼Œ</span><span class=mi>40</span> <span class=o>*</span> <span class=o>*</span> <span class=o>*</span> <span class=o>*</span> <span class=nx>innd</span><span class=o>/</span><span class=nx>bbslink</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>æ¯å°æ—¶çš„1åˆ†æ‰§è¡Œç”¨æˆ·ç›®å½•ä¸‹çš„bin</span><span class=o>/</span><span class=nx>accountè¿™ä¸ªæŒ‡ä»¤</span><span class=err>ï¼š</span> 
</span></span><span class=line><span class=cl><span class=mi>1</span> <span class=o>*</span> <span class=o>*</span> <span class=o>*</span> <span class=o>*</span> <span class=nx>bin</span><span class=o>/</span><span class=nx>account</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>æ¯å¤©æ—©æ™¨ä¸‰ç‚¹äºŒååˆ†æ‰§è¡Œç”¨æˆ·ç›®å½•ä¸‹å¦‚ä¸‹æ‰€ç¤ºçš„ä¸¤ä¸ªæŒ‡ä»¤</span><span class=err>ï¼ˆ</span><span class=nx>æ¯ä¸ªæŒ‡ä»¤ä»¥</span><span class=p>;</span><span class=nx>åˆ†éš”</span><span class=err>ï¼‰ï¼š</span> 
</span></span><span class=line><span class=cl><span class=mi>203</span> <span class=o>*</span> <span class=o>*</span> <span class=o>*</span> <span class=err>ï¼ˆ</span><span class=o>/</span><span class=nx>bin</span><span class=o>/</span><span class=nx>rm</span> <span class=o>-</span><span class=nx>f</span> <span class=nx>expire</span><span class=p>.</span><span class=nx>ls</span> <span class=nx>logins</span><span class=p>.</span><span class=nx>bad</span><span class=p>;</span><span class=nx>bin</span><span class=o>/</span><span class=nx>expire$</span><span class=err>#@</span><span class=mi>62</span><span class=p>;</span><span class=nx>expire</span><span class=p>.</span><span class=mi>1</span><span class=nx>st</span><span class=err>ï¼‰</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>æ¯1åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡myCommand</span>
</span></span><span class=line><span class=cl><span class=o>*</span> <span class=o>*</span> <span class=o>*</span> <span class=o>*</span> <span class=o>*</span> <span class=nx>myCommand</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>æ¯å°æ—¶çš„ç¬¬3å’Œç¬¬15åˆ†é’Ÿæ‰§è¡Œ</span>
</span></span><span class=line><span class=cl><span class=mi>3</span><span class=p>,</span><span class=mi>15</span> <span class=o>*</span> <span class=o>*</span> <span class=o>*</span> <span class=o>*</span> <span class=nx>myCommand</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>åœ¨ä¸Šåˆ8ç‚¹åˆ°11ç‚¹çš„ç¬¬3å’Œç¬¬15åˆ†é’Ÿæ‰§è¡Œ</span>
</span></span><span class=line><span class=cl><span class=mi>3</span><span class=p>,</span><span class=mi>15</span> <span class=mi>8</span><span class=o>-</span><span class=mi>11</span> <span class=o>*</span> <span class=o>*</span> <span class=o>*</span> <span class=nx>myCommand</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>æ¯éš”ä¸¤å¤©çš„ä¸Šåˆ8ç‚¹åˆ°11ç‚¹çš„ç¬¬3å’Œç¬¬15åˆ†é’Ÿæ‰§è¡Œ</span>
</span></span><span class=line><span class=cl><span class=mi>3</span><span class=p>,</span><span class=mi>15</span> <span class=mi>8</span><span class=o>-</span><span class=mi>11</span> <span class=o>*</span><span class=err>/2  *  * myCommand</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>æ¯å‘¨ä¸€ä¸Šåˆ8ç‚¹åˆ°11ç‚¹çš„ç¬¬3å’Œç¬¬15åˆ†é’Ÿæ‰§è¡Œ</span>
</span></span><span class=line><span class=cl><span class=mi>3</span><span class=p>,</span><span class=mi>15</span> <span class=mi>8</span><span class=o>-</span><span class=mi>11</span> <span class=o>*</span> <span class=o>*</span> <span class=mi>1</span> <span class=nx>myCommand</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>æ¯æ™šçš„21</span><span class=o>:</span><span class=mi>30</span><span class=nx>é‡å¯smb</span>
</span></span><span class=line><span class=cl><span class=mi>30</span> <span class=mi>21</span> <span class=o>*</span> <span class=o>*</span> <span class=o>*</span> <span class=err>/etc/init.d/smb restart</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>æ¯æœˆ1</span><span class=err>ã€</span><span class=mi>10</span><span class=err>ã€</span><span class=mi>22</span><span class=nx>æ—¥çš„4</span> <span class=o>:</span> <span class=mi>45</span><span class=nx>é‡å¯smb</span>
</span></span><span class=line><span class=cl><span class=mi>45</span> <span class=mi>4</span> <span class=mi>1</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>22</span> <span class=o>*</span> <span class=o>*</span> <span class=err>/etc/init.d/smb restart</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>æ¯å‘¨å…­</span><span class=err>ã€</span><span class=nx>å‘¨æ—¥çš„1</span> <span class=o>:</span> <span class=mi>10</span><span class=nx>é‡å¯smb</span>
</span></span><span class=line><span class=cl><span class=mi>10</span> <span class=mi>1</span> <span class=o>*</span> <span class=o>*</span> <span class=mi>6</span><span class=p>,</span><span class=mi>0</span> <span class=o>/</span><span class=nx>etc</span><span class=o>/</span><span class=nx>init</span><span class=p>.</span><span class=nx>d</span><span class=o>/</span><span class=nx>smb</span> <span class=nx>restart</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>æ¯å¤©18</span> <span class=o>:</span> <span class=mi>00</span><span class=nx>è‡³23</span> <span class=o>:</span> <span class=mi>00</span><span class=nx>ä¹‹é—´æ¯éš”30åˆ†é’Ÿé‡å¯smb</span>
</span></span><span class=line><span class=cl><span class=mi>0</span><span class=p>,</span><span class=mi>30</span> <span class=mi>18</span><span class=o>-</span><span class=mi>23</span> <span class=o>*</span> <span class=o>*</span> <span class=o>*</span> <span class=err>/etc/init.d/smb restart</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>æ¯æ˜ŸæœŸå…­çš„æ™šä¸Š11</span> <span class=o>:</span> <span class=mi>00</span> <span class=nx>pmé‡å¯smb</span>
</span></span><span class=line><span class=cl><span class=mi>0</span> <span class=mi>23</span> <span class=o>*</span> <span class=o>*</span> <span class=mi>6</span> <span class=o>/</span><span class=nx>etc</span><span class=o>/</span><span class=nx>init</span><span class=p>.</span><span class=nx>d</span><span class=o>/</span><span class=nx>smb</span> <span class=nx>restart</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>æ¯ä¸€å°æ—¶é‡å¯smb</span>
</span></span><span class=line><span class=cl><span class=o>*</span> <span class=o>*</span><span class=err>/1 * * * /etc/init.d/smb restart</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>æ™šä¸Š11ç‚¹åˆ°æ—©ä¸Š7ç‚¹ä¹‹é—´</span><span class=err>ï¼Œ</span><span class=nx>æ¯éš”ä¸€å°æ—¶é‡å¯smb</span>
</span></span><span class=line><span class=cl><span class=mi>0</span> <span class=mi>23</span><span class=o>-</span><span class=mi>7</span> <span class=o>*</span> <span class=o>*</span> <span class=o>*</span> <span class=err>/etc/init.d/smb restart</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=å¼€æœºè‡ªåŠ¨è¿è¡Œè„šæœ¬>å¼€æœºè‡ªåŠ¨è¿è¡Œè„šæœ¬</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>@reboot /root/s.sh
</span></span></code></pre></td></tr></table></div></div><p>æ›´å¤šæŸ¥çœ‹ï¼š<a class=link href=/archives/6c31209c/#%e5%bc%80%e6%9c%ba%e5%90%af%e5%8a%a8kkapi>å¼€æœºå¯åŠ¨ kkapi</a></p><h2 id=chatgptè®¾ç½®å®šæ—¶ä»»åŠ¡>ChatGPTè®¾ç½®å®šæ—¶ä»»åŠ¡</h2><blockquote><p>PSï¼šChatGPTæœ‰æ—¶ç»™å‡ºçš„ç­”æ¡ˆå¯èƒ½æ˜¯é”™è¯¯çš„ï¼Œéœ€è¦éªŒè¯ï¼š<a class=link href=https://crontab.guru/ target=_blank rel=noopener>crontab guru</a></p></blockquote><p><strong>1.æé—®ï¼šæ¯éš”2å¤©è¿è¡Œä¸€æ¬¡</strong></p><p>å›ç­”ï¼šè¦è®¾ç½®ä¸€ä¸ªæ¯éš”2å¤©è¿è¡Œä¸€æ¬¡çš„cronä½œä¸šï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹cronè¡¨è¾¾å¼ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-markdown data-lang=markdown><span class=line><span class=cl>0 0 <span class=ge>*/2 *</span> *
</span></span></code></pre></td></tr></table></div></div><p>è§£æè¿™ä¸ªcronè¡¨è¾¾å¼çš„å«ä¹‰å¦‚ä¸‹ï¼š</p><ul><li>ç¬¬ä¸€ä¸ªå­—æ®µï¼ˆ<code>0</code>ï¼‰è¡¨ç¤ºcronä½œä¸šè¿è¡Œçš„åˆ†é’Ÿæ•°ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè®¾ç½®ä¸º0ï¼Œè¡¨ç¤ºæ•´ç‚¹ï¼‰ã€‚</li><li>ç¬¬äºŒä¸ªå­—æ®µï¼ˆ<code>0</code>ï¼‰è¡¨ç¤ºcronä½œä¸šè¿è¡Œçš„å°æ—¶æ•°ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè®¾ç½®ä¸º0ï¼Œè¡¨ç¤ºåˆå¤œï¼‰ã€‚</li><li>ç¬¬ä¸‰ä¸ªå­—æ®µï¼ˆ<code>*/2</code>ï¼‰è¡¨ç¤ºæœˆä»½ä¸­çš„æ—¥æœŸã€‚<code>*/2</code> è¡¨ç¤ºæ¯éš”2å¤©è¿è¡Œä¸€æ¬¡ã€‚</li><li>ç¬¬å››ä¸ªå­—æ®µï¼ˆ<code>*</code>ï¼‰è¡¨ç¤ºæœˆä»½ï¼Œè®¾ç½®ä¸º<code>*</code>ï¼Œè¡¨ç¤ºä»»æ„æœˆä»½ã€‚</li><li>ç¬¬äº”ä¸ªå­—æ®µï¼ˆ<code>*</code>ï¼‰è¡¨ç¤ºæ˜ŸæœŸå‡ ï¼Œä¹Ÿè®¾ç½®ä¸º<code>*</code>ï¼Œè¡¨ç¤ºä»»æ„æ˜ŸæœŸå‡ ã€‚</li></ul><p>ä½¿ç”¨è¿™ä¸ªcronè¡¨è¾¾å¼ï¼Œä½ çš„ä½œä¸šå°†åœ¨æ¯éš”2å¤©çš„åˆå¤œè¿è¡Œä¸€æ¬¡ã€‚æ ¹æ®ä½ çš„å…·ä½“éœ€æ±‚ï¼Œå¯ä»¥è°ƒæ•´æ—¶é—´ï¼ˆå‰ä¸¤ä¸ªå­—æ®µï¼‰æ¥é€‚åº”ä½ çš„è¦æ±‚ã€‚</p><p><strong>2.æ¯éš”48å°æ—¶è¿è¡Œä¸€æ¬¡</strong></p><p>è¦è®¾ç½®ä¸€ä¸ªæ¯éš”48å°æ—¶è¿è¡Œä¸€æ¬¡çš„cronä½œä¸šï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹cronè¡¨è¾¾å¼ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-markdown data-lang=markdown><span class=line><span class=cl>0 <span class=ge>*/48 *</span> <span class=ge>* *</span>
</span></span></code></pre></td></tr></table></div></div><p>è¿™ä¸ªcronè¡¨è¾¾å¼çš„å«ä¹‰å¦‚ä¸‹ï¼š</p><ul><li>ç¬¬ä¸€ä¸ªå­—æ®µï¼ˆ<code>0</code>ï¼‰è¡¨ç¤ºcronä½œä¸šè¿è¡Œçš„åˆ†é’Ÿæ•°ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè®¾ç½®ä¸º0ï¼‰ã€‚</li><li>ç¬¬äºŒä¸ªå­—æ®µï¼ˆ<code>*/48</code>ï¼‰è¡¨ç¤ºå°æ—¶æ•°ã€‚<code>*/48</code> è¡¨ç¤ºæ¯éš”48å°æ—¶è¿è¡Œä¸€æ¬¡ã€‚</li><li>ç¬¬ä¸‰ä¸ªå­—æ®µï¼ˆ<code>*</code>ï¼‰è¡¨ç¤ºæœˆä»½ä¸­çš„æ—¥æœŸï¼Œè®¾ç½®ä¸º<code>*</code>ï¼Œè¡¨ç¤ºä»»æ„æ—¥æœŸã€‚</li><li>ç¬¬å››ä¸ªå­—æ®µï¼ˆ<code>*</code>ï¼‰è¡¨ç¤ºæœˆä»½ï¼Œè®¾ç½®ä¸º<code>*</code>ï¼Œè¡¨ç¤ºä»»æ„æœˆä»½ã€‚</li><li>ç¬¬äº”ä¸ªå­—æ®µï¼ˆ<code>*</code>ï¼‰è¡¨ç¤ºæ˜ŸæœŸå‡ ï¼Œè®¾ç½®ä¸º<code>*</code>ï¼Œè¡¨ç¤ºä»»æ„æ˜ŸæœŸå‡ ã€‚</li></ul><p>ä½¿ç”¨è¿™ä¸ªcronè¡¨è¾¾å¼ï¼Œä½ çš„ä½œä¸šå°†åœ¨æ¯éš”48å°æ—¶è¿è¡Œä¸€æ¬¡ã€‚è¯·æ³¨æ„ï¼Œè¿™ä¸ªè¡¨è¾¾å¼ä¸æ˜¯ä¸¥æ ¼æ„ä¹‰ä¸Šçš„æ¯éš”48å°æ—¶ï¼Œè€Œæ˜¯ä»¥ä½œä¸šå¼€å§‹æ—¶é—´ä¸ºåŸºå‡†ï¼Œå†åŠ ä¸Š48å°æ—¶çš„é—´éš”è¿è¡Œã€‚å› æ­¤ï¼Œå¦‚æœä½œä¸šåœ¨ä¸€ä¸ªç‰¹å®šæ—¶é—´ç‚¹å¯åŠ¨ï¼Œå®ƒå°†åœ¨å¯åŠ¨åçš„48å°æ—¶å†æ¬¡è¿è¡Œã€‚</p><p>3.è¾“å…¥<code>* */48 * * *</code></p><p><code>* */48 * * *</code> æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„cronè¡¨è¾¾å¼ï¼Œå®ƒè¡¨ç¤ºæ¯éš”48å°æ—¶è¿è¡Œä¸€æ¬¡ã€‚</p><p>è®©æˆ‘ä»¬å¯¹è¿™ä¸ªcronè¡¨è¾¾å¼è¿›è¡Œè§£æï¼š</p><ul><li>ç¬¬ä¸€ä¸ªå­—æ®µï¼ˆ<code>*</code>ï¼‰è¡¨ç¤ºcronä½œä¸šè¿è¡Œçš„åˆ†é’Ÿæ•°ï¼Œè¿™é‡Œè®¾ç½®ä¸º<code>*</code>è¡¨ç¤ºæ¯åˆ†é’Ÿéƒ½åŒ¹é…ã€‚</li><li>ç¬¬äºŒä¸ªå­—æ®µï¼ˆ<code>*/48</code>ï¼‰è¡¨ç¤ºcronä½œä¸šè¿è¡Œçš„å°æ—¶æ•°ï¼Œ<code>*/48</code> è¡¨ç¤ºæ¯éš”48å°æ—¶è¿è¡Œä¸€æ¬¡ã€‚</li><li>ç¬¬ä¸‰ä¸ªå­—æ®µï¼ˆ<code>*</code>ï¼‰è¡¨ç¤ºæœˆä»½ä¸­çš„æ—¥æœŸï¼Œè®¾ç½®ä¸º<code>*</code>è¡¨ç¤ºä»»æ„æ—¥æœŸã€‚</li><li>ç¬¬å››ä¸ªå­—æ®µï¼ˆ<code>*</code>ï¼‰è¡¨ç¤ºæœˆä»½ï¼Œè®¾ç½®ä¸º<code>*</code>è¡¨ç¤ºä»»æ„æœˆä»½ã€‚</li><li>ç¬¬äº”ä¸ªå­—æ®µï¼ˆ<code>*</code>ï¼‰è¡¨ç¤ºæ˜ŸæœŸå‡ ï¼Œè®¾ç½®ä¸º<code>*</code>è¡¨ç¤ºä»»æ„æ˜ŸæœŸå‡ ã€‚</li></ul><p>ä½¿ç”¨è¿™ä¸ªcronè¡¨è¾¾å¼ï¼Œä½ çš„ä½œä¸šå°†åœ¨æ¯éš”48å°æ—¶è¿è¡Œä¸€æ¬¡ã€‚æ— è®ºä½•æ—¶å¯åŠ¨ä½œä¸šï¼Œå®ƒéƒ½ä¼šåœ¨æ¯ä¸ªå®Œæ•´çš„48å°æ—¶å‘¨æœŸåå†æ¬¡è¿è¡Œã€‚è¯·æ³¨æ„ï¼Œè¿™ä¸ªè¡¨è¾¾å¼ä¸æ˜¯ä¸¥æ ¼æ„ä¹‰ä¸Šçš„æ¯éš”48å°æ—¶ï¼Œè€Œæ˜¯ä»¥ä½œä¸šå¯åŠ¨æ—¶é—´ä¸ºåŸºå‡†ï¼Œå†åŠ ä¸Š48å°æ—¶çš„é—´éš”è¿è¡Œã€‚</p><h2 id=å‚è€ƒé“¾æ¥>å‚è€ƒé“¾æ¥</h2><ul><li><a class=link href=https://crontab.guru/ target=_blank rel=noopener>0.crontab guru</a></li><li><a class=link href=https://blog.csdn.net/qq_22823581/article/details/80783835 target=_blank rel=noopener>1.Linuxä¹‹crontabå®šæ—¶ä»»åŠ¡</a></li><li><a class=link href=https://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/crontab.html target=_blank rel=noopener>2.crontab å®šæ—¶ä»»åŠ¡</a></li><li><a class=link href=https://blog.csdn.net/qq_22823581/article/details/80783835 target=_blank rel=noopener>3.crontab æ¯å¤©ï¼Œæ¯æœˆï¼Œæ¯å¹´ å®šæ—¶å¯åŠ¨</a></li><li><a class=link href=https://www.cnblogs.com/yychuyu/p/13095732.html target=_blank rel=noopener>4.Linuxç³»ç»Ÿå¦‚ä½•è®¾ç½®å¼€æœºè‡ªåŠ¨è¿è¡Œè„šæœ¬</a></li></ul></div><div class="shuoshuo-tags meta-wrapper" style=margin-top:15px!important;margin-bottom:5px!important;gap:10px!important><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:14px;height:14px;color:var(--card-text-color-secondary)"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
<a href=/tags/linux/ class="meta-item shuoshuo-tag" title="æŸ¥çœ‹æ ‡ç­¾: linux"><span>#linux</span></a></div><div class=shuoshuo-footer-info><div class="shuoshuo-edit-link meta-wrapper" style=gap:15px!important><a href=https://github.com/iwyang/iwyang.github.io/edit/develop/content/post/linux%e5%88%a9%e7%94%a8crontab%e8%ae%be%e7%bd%ae%e5%ae%9a%e6%97%b6%e4%bb%bb/index.md target=_blank rel="noopener noreferrer" class=meta-item title="å‰å¾€ GitHub ç¼–è¾‘æ­¤é¡µ"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
<span>ç¼–è¾‘æ­¤é¡µ</span>
</a><span class=separator>|</span>
<a class="meta-item git-hash-text" href=https://github.com/iwyang/iwyang.github.io/commit/26a215ebb8fca78d98f384856b8ab5e0e2056333 target=_blank rel="noopener noreferrer" title="Commit Hash: 26a215e">#26a215e</a></div></div></article></div><div class=waterfall-column id=waterfall-right></div></div><div class=shuoshuo-pagination></div><footer class=site-footer><style>.site-footer .running-time,.site-footer .powerby{font-size:14px!important;line-height:1.6!important;margin:10px 0!important;display:block!important;font-weight:400!important}.site-footer .running-time,.site-footer .running-time *,[data-scheme=dark] .site-footer .running-time,[data-scheme=dark] .site-footer .running-time *{color:#1e90ff!important}.site-footer .powerby,.site-footer .powerby *{color:var(--sys-color-text-muted)!important}[data-scheme=dark] .site-footer .powerby,[data-scheme=dark] .site-footer .powerby *{color:rgba(255,255,255,.7)!important}.footer-separator{margin:0 6px!important;font-size:14px!important}.site-footer .running-time .footer-separator{color:#1e90ff!important;opacity:1!important}.site-footer .powerby .footer-separator{color:inherit!important}.site-footer a{text-decoration:none!important;cursor:pointer}.site-footer a:hover{text-decoration:underline!important}.site-footer .powerby a:hover{color:var(--accent-color)!important}</style><section class=copyright>&copy;
2020 -
2026 Bore's Notes</section><section class=running-time>æœ€è¿‘æ›´æ–°ï¼š<span id=site-last-update data-time=2026-02-21T04:15:48Z title="2026-02-21 04:15">--</span><span class=footer-separator>|</span>
<a href=https://github.com/iwyang/iwyang.github.io/commit/b13dfb7373bc43e02c2a7b6370addb312153a08b target=_blank rel=noopener title="Commit Hash: b13dfb7">#b13dfb7</a></section><section class=powerby>ä½¿ç”¨ <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> æ„å»º
<span class=footer-separator>|</span>
ä¸»é¢˜ <a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=4.0.0>Stack</a> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><script>(function(){var e,t,n,o,i,a,r,c,l,d,s=document.getElementById("site-last-update");s&&(n=new Date(s.getAttribute("data-time")),o=new Date,e=(o-n)/1e3,i=n.getFullYear(),a=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0"),c=String(n.getHours()).padStart(2,"0"),l=String(n.getMinutes()).padStart(2,"0"),d=i+"-"+a+"-"+r+" "+c+":"+l,s.setAttribute("title",d),t="",e<60?t="åˆšåˆš":e<3600?t=Math.floor(e/60)+" åˆ†é’Ÿå‰":e<86400?t=Math.floor(e/3600)+" å°æ—¶å‰":e<2592e3?t=Math.floor(e/86400)+" å¤©å‰":e<31536e3?t=Math.floor(e/2592e3)+" ä¸ªæœˆå‰":t=Math.floor(e/31536e3)+" å¹´å‰",s.innerText=t)})()</script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css><script src=https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js></script><script>document.addEventListener("DOMContentLoaded",()=>{const o=document.getElementById("masonry-container"),t=document.getElementById("waterfall-left"),i=document.getElementById("waterfall-right"),a=Array.from(t.querySelectorAll(".shuoshuo-card"));function n(){if(window.innerWidth<=768){a.forEach(e=>t.appendChild(e)),o.style.opacity=1;return}t.innerHTML="",i.innerHTML="",a.forEach(e=>{t.offsetHeight<=i.offsetHeight?t.appendChild(e):i.appendChild(e)}),o.style.opacity=1}n(),window.addEventListener("resize",n);const s=o.querySelectorAll("img");let e=0;s.length>0?s.forEach(t=>{t.complete?(e++,e===s.length&&n()):(t.addEventListener("load",()=>{e++,e===s.length&&n()}),t.addEventListener("error",()=>{e++,e===s.length&&n()}))}):o.style.opacity=1;const r=document.querySelectorAll(".shuoshuo-content img");r.forEach(e=>{const t=e.parentElement;if(t.tagName==="A")t.hasAttribute("data-fancybox")||(t.setAttribute("data-fancybox","gallery"),t.setAttribute("data-caption",e.alt||e.title||"è¯´è¯´å›¾ç‰‡"),t.classList.add("shuoshuo-image"),t.style.display="block");else{const t=document.createElement("a");t.href=e.src,t.setAttribute("data-fancybox","gallery"),t.setAttribute("data-caption",e.alt||e.title||"è¯´è¯´å›¾ç‰‡"),t.classList.add("shuoshuo-image"),t.style.display="block",e.parentNode.insertBefore(t,e),t.appendChild(e)}}),typeof Fancybox!="undefined"&&Fancybox.bind('[data-fancybox="gallery"]',{Hash:!1,Thumbs:{autoStart:!1},Toolbar:{display:{left:["infobar"],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW"],right:["slideshow","download","close"]}}});const c=new Date,l=document.querySelectorAll(".shuoshuo-time, .shuoshuo-updated-time");l.forEach(e=>d(e,c));function d(e,t){const n=e.getAttribute("datetime");if(!n)return;const s=new Date(n),o=(t-s)/1e3,i=e.querySelector("span")||e,a=u(s);if(!e.hasAttribute("title")){const t=e.classList.contains("shuoshuo-updated-time")?"æ›´æ–°äº ":"å‘å¸ƒäº ";e.setAttribute("title",t+a)}i.innerText=h(o)}function u(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0"),o=String(e.getHours()).padStart(2,"0"),i=String(e.getMinutes()).padStart(2,"0");return t+"-"+n+"-"+s+" "+o+":"+i}function h(e){return e<60?"åˆšåˆš":e<3600?Math.floor(e/60)+" åˆ†é’Ÿå‰":e<86400?Math.floor(e/3600)+" å°æ—¶å‰":e<2592e3?Math.floor(e/86400)+" å¤©å‰":e<31536e3?Math.floor(e/2592e3)+" ä¸ªæœˆå‰":Math.floor(e/31536e3)+" å¹´å‰"}})</script></main></main></div><script type=text/javascript src=/ts/main.acaf849f2b273f6a8368a58b001f336738d0c948d92e79b116467d0c7515f932.js defer></script></body></html>