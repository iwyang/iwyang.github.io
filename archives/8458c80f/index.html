<!doctype html><html lang=zh-CN dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="å¯¹äºä¹ æƒ¯ä½¿ç”¨ KOReader é˜…è¯»ï¼ˆæ¯”å¦‚è¿½ã€Šå‰‘æ¥ã€‹ç­‰ç½‘æ–‡ï¼‰çš„æå®¢æ¥è¯´ï¼Œå¦‚ä½•ä¼˜é›…åœ°å°†é«˜äº®ç¬”è®°æ±‡é›†å¹¶å±•ç¤ºå‡ºæ¥ï¼Œä¸€ç›´æ˜¯ä¸ªä¸æ–­ä¼˜åŒ–çš„å‘½é¢˜ã€‚\næœ¬ç¯‡ç»ˆææŒ‡å—å°†å¸¦ä½ ä»é›¶å¼€å§‹ï¼Œåœ¨ Linux VPS ä¸Šæ­å»ºä¸€å¥—åšä¸å¯æ‘§çš„è‡ªåŠ¨åŒ–ç³»ç»Ÿã€‚æ‰“é€š å®‰å“æ‰‹æœº (KOReader) â¡ï¸ FolderSync (SFTP) â¡ï¸ VPS (inotify) â¡ï¸ Gitè‡ªåŠ¨åŒ– â¡ï¸ GitHub â¡ï¸ Hugo åšå®¢ çš„å…¨é“¾è·¯ã€‚\n"><title>ç»ˆææŒ‡å—ï¼šæ‰“é€  KOReader ç¬”è®°å…¨è‡ªåŠ¨åŒæ­¥è‡³ Hugo åšå®¢çš„æå®¢å·¥ä½œæµ</title><link rel=canonical href=https://bore.vip/archives/8458c80f/><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap"><link rel=stylesheet href=/scss/style.min.6406d2b204eb26c007ad58cc3b3bbbfa60196676a5c9a1cb6d8b80497278cc9e.css><meta property='og:title' content="ç»ˆææŒ‡å—ï¼šæ‰“é€  KOReader ç¬”è®°å…¨è‡ªåŠ¨åŒæ­¥è‡³ Hugo åšå®¢çš„æå®¢å·¥ä½œæµ"><meta property='og:description' content="å¯¹äºä¹ æƒ¯ä½¿ç”¨ KOReader é˜…è¯»ï¼ˆæ¯”å¦‚è¿½ã€Šå‰‘æ¥ã€‹ç­‰ç½‘æ–‡ï¼‰çš„æå®¢æ¥è¯´ï¼Œå¦‚ä½•ä¼˜é›…åœ°å°†é«˜äº®ç¬”è®°æ±‡é›†å¹¶å±•ç¤ºå‡ºæ¥ï¼Œä¸€ç›´æ˜¯ä¸ªä¸æ–­ä¼˜åŒ–çš„å‘½é¢˜ã€‚\næœ¬ç¯‡ç»ˆææŒ‡å—å°†å¸¦ä½ ä»é›¶å¼€å§‹ï¼Œåœ¨ Linux VPS ä¸Šæ­å»ºä¸€å¥—åšä¸å¯æ‘§çš„è‡ªåŠ¨åŒ–ç³»ç»Ÿã€‚æ‰“é€š å®‰å“æ‰‹æœº (KOReader) â¡ï¸ FolderSync (SFTP) â¡ï¸ VPS (inotify) â¡ï¸ Gitè‡ªåŠ¨åŒ– â¡ï¸ GitHub â¡ï¸ Hugo åšå®¢ çš„å…¨é“¾è·¯ã€‚\n"><meta property='og:url' content='https://bore.vip/archives/8458c80f/'><meta property='og:site_name' content="Bore's Notes"><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='hugo'><meta property='article:tag' content='KOReader'><meta property='article:tag' content='è‡ªåŠ¨åŒ–'><meta property='article:published_time' content='2026-02-27T23:03:44+08:00'><meta property='article:modified_time' content='2026-02-28T15:26:35+08:00'><meta name=twitter:title content="ç»ˆææŒ‡å—ï¼šæ‰“é€  KOReader ç¬”è®°å…¨è‡ªåŠ¨åŒæ­¥è‡³ Hugo åšå®¢çš„æå®¢å·¥ä½œæµ"><meta name=twitter:description content="å¯¹äºä¹ æƒ¯ä½¿ç”¨ KOReader é˜…è¯»ï¼ˆæ¯”å¦‚è¿½ã€Šå‰‘æ¥ã€‹ç­‰ç½‘æ–‡ï¼‰çš„æå®¢æ¥è¯´ï¼Œå¦‚ä½•ä¼˜é›…åœ°å°†é«˜äº®ç¬”è®°æ±‡é›†å¹¶å±•ç¤ºå‡ºæ¥ï¼Œä¸€ç›´æ˜¯ä¸ªä¸æ–­ä¼˜åŒ–çš„å‘½é¢˜ã€‚\næœ¬ç¯‡ç»ˆææŒ‡å—å°†å¸¦ä½ ä»é›¶å¼€å§‹ï¼Œåœ¨ Linux VPS ä¸Šæ­å»ºä¸€å¥—åšä¸å¯æ‘§çš„è‡ªåŠ¨åŒ–ç³»ç»Ÿã€‚æ‰“é€š å®‰å“æ‰‹æœº (KOReader) â¡ï¸ FolderSync (SFTP) â¡ï¸ VPS (inotify) â¡ï¸ Gitè‡ªåŠ¨åŒ– â¡ï¸ GitHub â¡ï¸ Hugo åšå®¢ çš„å…¨é“¾è·¯ã€‚\n"><link rel="shortcut icon" href=/img/avatar.png><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap" rel=stylesheet></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar.png width=170 height=170 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸ¥</span></figure><div class=site-meta><h1 class=site-name><a href=/>Bore's Notes</a></h1><h2 class=site-description>åšè§‚è€Œçº¦å–ï¼Œåšç§¯è€Œè–„å‘</h2></div></header><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>ä¸»é¡µ</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>å…³äº</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>å½’æ¡£</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>æœç´¢</span></a></li><li><a href=/link/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>é“¾æ¥</span></a></li><li><a href=/shuoshuo/><svg class="icon icon-tabler icon-tabler-message-circle" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 20l1.3-3.9A9 8 0 117.7 19L3 20"/><line x1="12" y1="12" x2="12" y2="12.01"/><line x1="8" y1="12" x2="8" y2="12.01"/><line x1="16" y1="12" x2="16" y2="12.01"/></svg>
<span>è¯´è¯´</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav class=toc-nav id=TableOfContents><ol><li><a href=#é˜¶æ®µä¸€æ‰‹æœºç«¯è‡ªåŠ¨åŒ–æ¬è¿-foldersync>é˜¶æ®µä¸€ï¼šæ‰‹æœºç«¯è‡ªåŠ¨åŒ–æ¬è¿ (FolderSync)</a></li><li><a href=#é˜¶æ®µäºŒvps-åŸºç¡€ç¯å¢ƒä¸-git-æ·±åº¦é…ç½®>é˜¶æ®µäºŒï¼šVPS åŸºç¡€ç¯å¢ƒä¸ Git æ·±åº¦é…ç½®</a><ol><li><a href=#1-å®‰è£…åŸºç¡€ä¾èµ–-git-ssh-inotify>1. å®‰è£…åŸºç¡€ä¾èµ– (Git, SSH, inotify)</a></li><li><a href=#2-é…ç½®-git-å…¨å±€èº«ä»½>2. é…ç½® Git å…¨å±€èº«ä»½</a></li><li><a href=#3-ç”Ÿæˆ-ssh-å¯†é’¥å¹¶å¯¹æ¥-github>3. ç”Ÿæˆ SSH å¯†é’¥å¹¶å¯¹æ¥ GitHub</a></li><li><a href=#4-æµ‹è¯•è¿æ¥å¹¶å…‹éš†åšå®¢ä»“åº“>4. æµ‹è¯•è¿æ¥å¹¶å…‹éš†åšå®¢ä»“åº“</a></li></ol></li><li><a href=#é˜¶æ®µä¸‰éƒ¨ç½²åšä¸å¯æ‘§çš„æ ¸å¿ƒè„šæœ¬-ç‹¬ç«‹æ‹†åˆ†--é˜²å¡æ­»ç‰ˆ>é˜¶æ®µä¸‰ï¼šéƒ¨ç½²åšä¸å¯æ‘§çš„æ ¸å¿ƒè„šæœ¬ (ç‹¬ç«‹æ‹†åˆ† & é˜²å¡æ­»ç‰ˆ)</a></li><li><a href=#é˜¶æ®µå››æ³¨å†Œç³»ç»ŸæœåŠ¡ä¸å®æ—¶ç›‘æ§>é˜¶æ®µå››ï¼šæ³¨å†Œç³»ç»ŸæœåŠ¡ä¸å®æ—¶ç›‘æ§</a><ol><li><a href=#1-åˆ›å»ºæœåŠ¡>1. åˆ›å»ºæœåŠ¡</a></li><li><a href=#2-æ¿€æ´»å¹¶å¯åŠ¨æœåŠ¡>2. æ¿€æ´»å¹¶å¯åŠ¨æœåŠ¡</a></li><li><a href=#3-æå®¢æ’é”™åˆ©å™¨å®æ—¶æ—¥å¿—ç›‘æ§>3. æå®¢æ’é”™åˆ©å™¨ï¼šå®æ—¶æ—¥å¿—ç›‘æ§</a></li></ol></li><li><a href=#é˜¶æ®µäº”å®šæ—¶æ¸…ç†å¤§æ‰«é™¤-cron>é˜¶æ®µäº”ï¼šå®šæ—¶æ¸…ç†å¤§æ‰«é™¤ (Cron)</a></li><li><a href=#é˜¶æ®µå…­ä¿®å¤-github-actions-å¹¶å‘å†²çª-é˜²è¿ç¯è½¦ç¥¸>é˜¶æ®µå…­ï¼šä¿®å¤ GitHub Actions å¹¶å‘å†²çª (é˜²è¿ç¯è½¦ç¥¸)</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><h2 class=article-title><a href=/archives/8458c80f/>ç»ˆææŒ‡å—ï¼šæ‰“é€  KOReader ç¬”è®°å…¨è‡ªåŠ¨åŒæ­¥è‡³ Hugo åšå®¢çš„æå®¢å·¥ä½œæµ</a></h2><footer class=article-meta-info><div class=article-meta-item><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
<time class=article-time--published title='å‘å¸ƒäº 2026-02-27 23:03'>19 å°æ—¶å‰</time></div><div class=article-meta-item><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4A2 2 0 002 6v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121.0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
<time class=article-time--updated title='æ›´æ–°äº 2026-02-28 15:26'>3 å°æ—¶å‰</time></div><div class=article-meta-item><svg class="icon icon-tabler icon-tabler-pencil" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 20h4L18.5 9.5a1.5 1.5.0 00-4-4L4 16v4"/><line x1="13.5" y1="6.5" x2="17.5" y2="10.5"/></svg>
<span class=article-words title='å­—æ•°: 3212 å­—'>3.2k å­—</span></div><div class=article-meta-item><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg><div style=display:flex;gap:5px><a href=/categories/%E6%8A%80%E6%9C%AF/ title=æŸ¥çœ‹åˆ†ç±»ï¼šæŠ€æœ¯ style=color:inherit;text-decoration:none>æŠ€æœ¯</a></div></div></footer></div></header><aside class=article-toc><details><summary><div class=article-toc-title><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-right"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 6l6 6-6 6"/></svg>
<span>ç›®å½•</span></div></summary><nav class=toc-nav><ol><li><a href=#é˜¶æ®µä¸€æ‰‹æœºç«¯è‡ªåŠ¨åŒ–æ¬è¿-foldersync>é˜¶æ®µä¸€ï¼šæ‰‹æœºç«¯è‡ªåŠ¨åŒ–æ¬è¿ (FolderSync)</a></li><li><a href=#é˜¶æ®µäºŒvps-åŸºç¡€ç¯å¢ƒä¸-git-æ·±åº¦é…ç½®>é˜¶æ®µäºŒï¼šVPS åŸºç¡€ç¯å¢ƒä¸ Git æ·±åº¦é…ç½®</a><ol><li><a href=#1-å®‰è£…åŸºç¡€ä¾èµ–-git-ssh-inotify>1. å®‰è£…åŸºç¡€ä¾èµ– (Git, SSH, inotify)</a></li><li><a href=#2-é…ç½®-git-å…¨å±€èº«ä»½>2. é…ç½® Git å…¨å±€èº«ä»½</a></li><li><a href=#3-ç”Ÿæˆ-ssh-å¯†é’¥å¹¶å¯¹æ¥-github>3. ç”Ÿæˆ SSH å¯†é’¥å¹¶å¯¹æ¥ GitHub</a></li><li><a href=#4-æµ‹è¯•è¿æ¥å¹¶å…‹éš†åšå®¢ä»“åº“>4. æµ‹è¯•è¿æ¥å¹¶å…‹éš†åšå®¢ä»“åº“</a></li></ol></li><li><a href=#é˜¶æ®µä¸‰éƒ¨ç½²åšä¸å¯æ‘§çš„æ ¸å¿ƒè„šæœ¬-ç‹¬ç«‹æ‹†åˆ†--é˜²å¡æ­»ç‰ˆ>é˜¶æ®µä¸‰ï¼šéƒ¨ç½²åšä¸å¯æ‘§çš„æ ¸å¿ƒè„šæœ¬ (ç‹¬ç«‹æ‹†åˆ† & é˜²å¡æ­»ç‰ˆ)</a></li><li><a href=#é˜¶æ®µå››æ³¨å†Œç³»ç»ŸæœåŠ¡ä¸å®æ—¶ç›‘æ§>é˜¶æ®µå››ï¼šæ³¨å†Œç³»ç»ŸæœåŠ¡ä¸å®æ—¶ç›‘æ§</a><ol><li><a href=#1-åˆ›å»ºæœåŠ¡>1. åˆ›å»ºæœåŠ¡</a></li><li><a href=#2-æ¿€æ´»å¹¶å¯åŠ¨æœåŠ¡>2. æ¿€æ´»å¹¶å¯åŠ¨æœåŠ¡</a></li><li><a href=#3-æå®¢æ’é”™åˆ©å™¨å®æ—¶æ—¥å¿—ç›‘æ§>3. æå®¢æ’é”™åˆ©å™¨ï¼šå®æ—¶æ—¥å¿—ç›‘æ§</a></li></ol></li><li><a href=#é˜¶æ®µäº”å®šæ—¶æ¸…ç†å¤§æ‰«é™¤-cron>é˜¶æ®µäº”ï¼šå®šæ—¶æ¸…ç†å¤§æ‰«é™¤ (Cron)</a></li><li><a href=#é˜¶æ®µå…­ä¿®å¤-github-actions-å¹¶å‘å†²çª-é˜²è¿ç¯è½¦ç¥¸>é˜¶æ®µå…­ï¼šä¿®å¤ GitHub Actions å¹¶å‘å†²çª (é˜²è¿ç¯è½¦ç¥¸)</a></li></ol></nav></details></aside><section class=article-content><p>å¯¹äºä¹ æƒ¯ä½¿ç”¨ KOReader é˜…è¯»ï¼ˆæ¯”å¦‚è¿½ã€Šå‰‘æ¥ã€‹ç­‰ç½‘æ–‡ï¼‰çš„æå®¢æ¥è¯´ï¼Œå¦‚ä½•ä¼˜é›…åœ°å°†é«˜äº®ç¬”è®°æ±‡é›†å¹¶å±•ç¤ºå‡ºæ¥ï¼Œä¸€ç›´æ˜¯ä¸ªä¸æ–­ä¼˜åŒ–çš„å‘½é¢˜ã€‚</p><p>æœ¬ç¯‡ç»ˆææŒ‡å—å°†å¸¦ä½ ä»é›¶å¼€å§‹ï¼Œåœ¨ Linux VPS ä¸Šæ­å»ºä¸€å¥—åšä¸å¯æ‘§çš„è‡ªåŠ¨åŒ–ç³»ç»Ÿã€‚æ‰“é€š <strong>å®‰å“æ‰‹æœº (KOReader) â¡ï¸ FolderSync (SFTP) â¡ï¸ VPS (inotify) â¡ï¸ Gitè‡ªåŠ¨åŒ– â¡ï¸ GitHub â¡ï¸ Hugo åšå®¢</strong> çš„å…¨é“¾è·¯ã€‚</p><p><strong>å®ç°æ•ˆæœ</strong>ï¼šçœ‹ä¹¦æ—¶åˆ’çº¿å¹¶ç‚¹å‡»â€œå¯¼å‡ºâ€ï¼Œ1åˆ†é’Ÿå†…ï¼Œç»è¿‡æ—¶é—´æ ¼å¼åŒ–ã€å»é™¤å†—ä½™é“¾æ¥ã€æ’ç‰ˆç²¾ç¾çš„<strong>ç‹¬ç«‹å¡ç‰‡å¼è¯»ä¹¦ç¬”è®°</strong>ï¼ˆå®Œç¾åˆ†ç¦»å¼•æ–‡ä¸ä¸ªäººæƒ³æ³•ï¼‰ï¼Œå°±ä¼šè‡ªåŠ¨æŒ‚è½½ç€ä¸“å±æ ‡ç­¾ï¼Œå‡ºç°åœ¨ä½ çš„åšå®¢è¯´è¯´é¡µé¢ä¸Šã€‚</p><h2 id=é˜¶æ®µä¸€æ‰‹æœºç«¯è‡ªåŠ¨åŒ–æ¬è¿-foldersync>é˜¶æ®µä¸€ï¼šæ‰‹æœºç«¯è‡ªåŠ¨åŒ–æ¬è¿ (FolderSync)</h2><p>æˆ‘ä»¬éœ€è¦å»ºç«‹ä¸€æ¡ä»æ‰‹æœºåˆ° VPS çš„â€œç§æœ‰é€šé“â€ï¼Œå¹¶åšåˆ°**â€œé˜…åå³ç„šâ€**ï¼Œé˜²æ­¢æ—§ç¬”è®°é‡å¤åŒæ­¥æ­»å¾ªç¯ã€‚</p><ol><li><strong>KOReader å¯¼å‡ºè®¾ç½®</strong>ï¼šé˜…è¯»æ—¶åˆ’çº¿ï¼Œåœ¨èœå•ä¸­é€‰æ‹©â€œå¯¼å‡ºæ ‡æ³¨â€ -> æ ¼å¼é€‰æ‹© Markdownã€‚æ–‡ä»¶é»˜è®¤å­˜æ”¾åœ¨æ‰‹æœºçš„ <code>/storage/emulated/0/koreader/clipboard/</code> ç›®å½•ä¸‹ã€‚</li><li><strong>é…ç½® FolderSync App</strong>ï¼š<ul><li>åœ¨ App å†…æ·»åŠ  <strong>SFTP</strong> è´¦æˆ·ï¼Œå¡«å…¥ VPS çš„ IPã€ç«¯å£ <code>22</code> ä»¥åŠ root è´¦å·å¯†ç ã€‚</li></ul></li><li><strong>åˆ›å»ºæ–‡ä»¶å¤¹åŒæ­¥å¯¹</strong>ï¼š<ul><li><strong>åŒæ­¥ç±»å‹</strong>ï¼šé€‰æ‹© <strong>â€œåˆ°å·¦ä¾§æ–‡ä»¶å¤¹â€</strong>ï¼ˆå•å‘ä¸Šä¼ è‡³ VPSï¼‰ã€‚</li><li><strong>åŒæ­¥é€‰é¡¹</strong>ï¼š<strong>å¿…é¡»å‹¾é€‰â€œåŒæ­¥ååˆ é™¤æºæ–‡ä»¶â€ï¼ˆDelete source files after syncï¼‰</strong>ã€‚è¿™æ˜¯ä¸ºäº†å®ç°â€œé˜…åå³ç„šâ€ï¼Œé˜²æ­¢æ¯æ¬¡å¯¼å‡ºéƒ½æŠŠæ—§ç¬”è®°é‡å¤ä¼ ç»™ VPSã€‚</li><li><strong>æœ¬åœ°ç›®å½•</strong>ï¼šé€‰æ‹©æ‰‹æœºçš„ <code>/koreader/clipboard/</code>ã€‚</li><li><strong>è¿œç¨‹ç›®å½•</strong>ï¼šåœ¨ VPS ä¸Šæ–°å»ºå¹¶é€‰æ‹© <code>/root/Koreader</code>ã€‚</li><li><strong>è°ƒåº¦</strong>ï¼šå¼€å¯ <strong>â€œå³æ—¶åŒæ­¥â€</strong>ã€‚</li></ul></li></ol><hr><h2 id=é˜¶æ®µäºŒvps-åŸºç¡€ç¯å¢ƒä¸-git-æ·±åº¦é…ç½®>é˜¶æ®µäºŒï¼šVPS åŸºç¡€ç¯å¢ƒä¸ Git æ·±åº¦é…ç½®</h2><p>ä¸ºäº†è®©åå°è„šæœ¬èƒ½å…¨è‡ªåŠ¨æ¨é€åˆ° GitHubï¼Œå¿…é¡»åœ¨ VPS ä¸Šå®‰è£…æ‰€éœ€è½¯ä»¶ï¼Œå¹¶æ‰“é€š SSH å…å¯†é€šé“ã€‚</p><h3 id=1-å®‰è£…åŸºç¡€ä¾èµ–-git-ssh-inotify>1. å®‰è£…åŸºç¡€ä¾èµ– (Git, SSH, inotify)</h3><p>æ›´æ–°ç³»ç»Ÿï¼Œå¹¶ç¡®ä¿å®‰è£…äº† Gitã€SSH å®¢æˆ·ç«¯ä»¥åŠç”¨äºå®æ—¶ç›‘å¬æ–‡ä»¶å˜åŠ¨çš„ <code>inotify-tools</code>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>apt update <span class=o>&amp;&amp;</span> apt upgrade -y
</span></span><span class=line><span class=cl>apt install git openssh-client inotify-tools -y
</span></span></code></pre></td></tr></table></div></div><h3 id=2-é…ç½®-git-å…¨å±€èº«ä»½>2. é…ç½® Git å…¨å±€èº«ä»½</h3><p>å‘Šè¯‰ Git ä½ æ˜¯è°ã€‚è¿™é‡Œçš„é‚®ç®±æœ€å¥½ä¸ä½ çš„ GitHub è´¦å·é‚®ç®±ä¿æŒä¸€è‡´ï¼Œå¦åˆ™æ¨é€åˆ° GitHub åçš„æäº¤è®°å½•ä¸Šä¸ä¼šæ˜¾ç¤ºä½ çš„ä¸“å±å¤´åƒã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git config --global user.name <span class=s2>&#34;ä½ çš„GitHubç”¨æˆ·å&#34;</span>
</span></span><span class=line><span class=cl>git config --global user.email <span class=s2>&#34;ä½ çš„GitHubæ³¨å†Œé‚®ç®±&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=3-ç”Ÿæˆ-ssh-å¯†é’¥å¹¶å¯¹æ¥-github>3. ç”Ÿæˆ SSH å¯†é’¥å¹¶å¯¹æ¥ GitHub</h3><p>ç”Ÿæˆé«˜å¼ºåº¦çš„ <code>ed25519</code> å¯†é’¥å¯¹ï¼ˆ<strong>æ‰§è¡Œåä¸€è·¯å›è½¦ï¼Œåƒä¸‡ä¸è¦è®¾ç½®å¯†ç ï¼Œå¦åˆ™åå°è„šæœ¬ä¼šå¡æ­»</strong>ï¼‰ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh-keygen -t ed25519 -C <span class=s2>&#34;ä½ çš„GitHubé‚®ç®±&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>æŸ¥çœ‹å¹¶å¤åˆ¶ä½ çš„å…¬é’¥å†…å®¹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat ~/.ssh/id_ed25519.pub
</span></span></code></pre></td></tr></table></div></div><p>ç™»å½• GitHub ç½‘é¡µç«¯ â¡ï¸ <strong>Settings</strong> â¡ï¸ <strong>SSH and GPG keys</strong> â¡ï¸ <strong>New SSH key</strong>ï¼Œå°†åˆšæ‰å¤åˆ¶çš„å†…å®¹ç²˜è´´è¿›å»å¹¶ä¿å­˜ã€‚</p><h3 id=4-æµ‹è¯•è¿æ¥å¹¶å…‹éš†åšå®¢ä»“åº“>4. æµ‹è¯•è¿æ¥å¹¶å…‹éš†åšå®¢ä»“åº“</h3><p>æµ‹è¯• VPS æ˜¯å¦èƒ½å…å¯†è¿æ¥åˆ° GitHubï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh -T git@github.com
</span></span></code></pre></td></tr></table></div></div><p><em>(çœ‹åˆ° <code>Hi &lt;ç”¨æˆ·å>! You've successfully authenticated...</code> å³ä¸ºæˆåŠŸ)</em></p><p>ä½¿ç”¨ <strong>SSH åœ°å€</strong> å…‹éš†ä½ çš„åšå®¢ä»“åº“åˆ° VPSï¼ˆæ³¨æ„æ›¿æ¢ï¼‰ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /root
</span></span><span class=line><span class=cl>git clone git@github.com:ä½ çš„ç”¨æˆ·å/ä½ çš„ä»“åº“å.git
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=é˜¶æ®µä¸‰éƒ¨ç½²åšä¸å¯æ‘§çš„æ ¸å¿ƒè„šæœ¬-ç‹¬ç«‹æ‹†åˆ†--é˜²å¡æ­»ç‰ˆ>é˜¶æ®µä¸‰ï¼šéƒ¨ç½²åšä¸å¯æ‘§çš„æ ¸å¿ƒè„šæœ¬ (ç‹¬ç«‹æ‹†åˆ† & é˜²å¡æ­»ç‰ˆ)</h2><p>è¿™ä»½ç»ˆæç‰ˆè„šæœ¬å†…ç½®äº†<strong>å¼ºå¤§çš„ Perl æ™ºèƒ½åˆ‡å‰²å¼•æ“</strong>ã€‚
æ— è®ºä½ ä¸€æ¬¡æ€§å¯¼å‡ºäº†å¤šå°‘æ¡ç¬”è®°ï¼Œå®ƒéƒ½èƒ½ï¼š</p><ol><li>åƒåˆ‡è›‹ç³•ä¸€æ ·æŠŠå®ƒä»¬<strong>å¼ºè¡Œæ‹†åˆ†ä¸ºç‹¬ç«‹çš„è¯´è¯´å¡ç‰‡</strong>ï¼ˆåŸºäºåŸåˆåˆ’çº¿æ—¶é—´ç”Ÿæˆç»å¯¹å¹‚ç­‰çš„é“¾æ¥ï¼Œæ‹’ç»é‡å¤å‘å¸ƒï¼‰ã€‚</li><li><strong>å®Œç¾åˆ†ç¦»â€œåŸè‘—å¼•æ–‡â€ä¸ä½ çš„â€œä¸ªäººæƒ³æ³•â€</strong>ã€‚</li><li><strong>å…¨è‡ªåŠ¨æš´åŠ›å‡€åŒ–</strong> KOReader é™„å¸¦çš„å„ç§â€œåœ¨ä¹¦ä¸­æŸ¥çœ‹â€åƒåœ¾åç¼€ã€‚</li><li><strong>è‡ªå¸¦é˜²å¡æ­»è£…ç”²</strong>ï¼ˆé‡ Git å†²çªè‡ªåŠ¨ä¸­æ­¢å¹¶é‡è¯•ï¼‰ä¸<strong>äº‘ç«¯çƒ­å¤‡ä»½</strong>ï¼ˆä½ çš„è„šæœ¬æºç ä¼šè‡ªåŠ¨å¤‡ä»½åˆ°åšå®¢ <code>vps-backup</code> ç›®å½•ä¸‹ï¼‰ã€‚</li></ol><p>åˆ›å»ºè„šæœ¬ï¼š<code>vi /root/scripts/sync_notes.sh</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span><span class=lnt>157
</span><span class=lnt>158
</span><span class=lnt>159
</span><span class=lnt>160
</span><span class=lnt>161
</span><span class=lnt>162
</span><span class=lnt>163
</span><span class=lnt>164
</span><span class=lnt>165
</span><span class=lnt>166
</span><span class=lnt>167
</span><span class=lnt>168
</span><span class=lnt>169
</span><span class=lnt>170
</span><span class=lnt>171
</span><span class=lnt>172
</span><span class=lnt>173
</span><span class=lnt>174
</span><span class=lnt>175
</span><span class=lnt>176
</span><span class=lnt>177
</span><span class=lnt>178
</span><span class=lnt>179
</span><span class=lnt>180
</span><span class=lnt>181
</span><span class=lnt>182
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># --- æ ¸å¿ƒé…ç½®åŒº ---</span>
</span></span><span class=line><span class=cl><span class=nv>WATCH_DIR</span><span class=o>=</span><span class=s2>&#34;/root/Koreader&#34;</span>               
</span></span><span class=line><span class=cl><span class=nv>BLOG_DIR</span><span class=o>=</span><span class=s2>&#34;/root/iwyang.github.io&#34;</span>        
</span></span><span class=line><span class=cl><span class=nv>CONTENT_DIR</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$BLOG_DIR</span><span class=s2>/content/shuoshuo&#34;</span> 
</span></span><span class=line><span class=cl><span class=nv>PROCESSED_LOG</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$BLOG_DIR</span><span class=s2>/.processed_notes.log&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>mkdir -p <span class=s2>&#34;</span><span class=nv>$WATCH_DIR</span><span class=s2>&#34;</span> <span class=s2>&#34;</span><span class=nv>$CONTENT_DIR</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>touch <span class=s2>&#34;</span><span class=nv>$PROCESSED_LOG</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ==========================================================</span>
</span></span><span class=line><span class=cl><span class=c1># ğŸ‘‡ æ ¸å¿ƒè¿›åŒ–ï¼šåŸºäºâ€œåˆ’çº¿åŸåˆæ—¶é—´â€çš„ç»å¯¹å¹‚ç­‰åˆ‡å‰²å¼•æ“ ğŸ‘‡</span>
</span></span><span class=line><span class=cl><span class=c1># åŒ…å«ä¿®å¤ï¼šé˜²æ­¢å®šç•Œç¬¦å†²çªã€å¼ºåŠ›å‡€åŒ–æ— ç”¨é“¾æ¥ã€æ™ºèƒ½åˆ†ç¦»ä¸ªäººæƒ³æ³•</span>
</span></span><span class=line><span class=cl><span class=c1># ==========================================================</span>
</span></span><span class=line><span class=cl><span class=nv>PERL_ENGINE</span><span class=o>=</span><span class=s2>&#34;/root/scripts/split_notes.pl&#34;</span>
</span></span><span class=line><span class=cl>cat <span class=s>&lt;&lt; &#39;PERL_EOF&#39; &gt; &#34;$PERL_ENGINE&#34;
</span></span></span><span class=line><span class=cl><span class=s>use utf8;
</span></span></span><span class=line><span class=cl><span class=s>use POSIX qw(strftime);
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>my $file_path = $ARGV[0];
</span></span></span><span class=line><span class=cl><span class=s>my $content_dir = $ARGV[1];
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>open(my $fh, &#39;&lt;:encoding(UTF-8)&#39;, $file_path) or exit;
</span></span></span><span class=line><span class=cl><span class=s>my $raw = join(&#34;&#34;, &lt;$fh&gt;);
</span></span></span><span class=line><span class=cl><span class=s>close($fh);
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s># --- 1. å…¨å±€å‡€åŒ– KOReader æ®‹ç•™åƒåœ¾ ---
</span></span></span><span class=line><span class=cl><span class=s>$raw =~ s/\r//g;
</span></span></span><span class=line><span class=cl><span class=s>$raw =~ s/^\s*\[?åœ¨ä¹¦ä¸­æŸ¥çœ‹\]?.*$//mg; 
</span></span></span><span class=line><span class=cl><span class=s>$raw =~ s/^_?Generated at:.*_?$//mg; 
</span></span></span><span class=line><span class=cl><span class=s>$raw =~ s/^##\s*$//mg;               
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>my ($book, $author, $chapter) = (&#34;æœªçŸ¥ä¹¦å&#34;, &#34;æœªçŸ¥ä½œè€…&#34;, &#34;æœªçŸ¥ç« èŠ‚&#34;);
</span></span></span><span class=line><span class=cl><span class=s>if ($raw =~ s/^\s*#\s+([^\n]+)\n+#*\s*([^\n]+)\n+#*\s*([^\n]+)\n+//s) {
</span></span></span><span class=line><span class=cl><span class=s>    $book = $1; $author = $2; $chapter = $3;
</span></span></span><span class=line><span class=cl><span class=s>}
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>my @chunks = split(/(?=(?:\*\* ?)?Page\s+\d+\s+@)/, $raw);
</span></span></span><span class=line><span class=cl><span class=s>my %months = (January=&gt;&#34;01&#34;, February=&gt;&#34;02&#34;, March=&gt;&#34;03&#34;, April=&gt;&#34;04&#34;, May=&gt;&#34;05&#34;, June=&gt;&#34;06&#34;, July=&gt;&#34;07&#34;, August=&gt;&#34;08&#34;, September=&gt;&#34;09&#34;, October=&gt;&#34;10&#34;, November=&gt;&#34;11&#34;, December=&gt;&#34;12&#34;);
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>foreach my $chunk (@chunks) {
</span></span></span><span class=line><span class=cl><span class=s>    next if $chunk =~ /^\s*$/; 
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>    my ($page, $formatted_time, $dir_time, $fm_date, $slug) = (&#34;&#34;, &#34;&#34;, &#34;&#34;, &#34;&#34;, &#34;&#34;);
</span></span></span><span class=line><span class=cl><span class=s>    
</span></span></span><span class=line><span class=cl><span class=s>    # --- 2. æå–æ—¶é—´ä¸é¡µç  ---
</span></span></span><span class=line><span class=cl><span class=s>    if ($chunk =~ s/^\s*(?:\*\* ?)?Page\s+(\d+)\s+@\s+(\d{1,2})\s+([a-zA-Z]+)\s+(\d{4})\s+(\d{2}):(\d{2}):(?:\d{2})\s+(AM|PM)\*?\*?\s*//i) {
</span></span></span><span class=line><span class=cl><span class=s>        $page = $1; 
</span></span></span><span class=line><span class=cl><span class=s>        my $d = $2; my $mon = ucfirst(lc($3)); my $y = $4; my $h = $5; my $m = $6; my $ampm = uc($7);
</span></span></span><span class=line><span class=cl><span class=s>        my $m_num = $months{$mon} || &#34;01&#34;;
</span></span></span><span class=line><span class=cl><span class=s>        $h += 12 if ($ampm eq &#34;PM&#34; &amp;&amp; $h &lt; 12);
</span></span></span><span class=line><span class=cl><span class=s>        $h = 0 if ($ampm eq &#34;AM&#34; &amp;&amp; $h == 12);
</span></span></span><span class=line><span class=cl><span class=s>        
</span></span></span><span class=line><span class=cl><span class=s>        $formatted_time = sprintf(&#34;%04d-%02d-%02d %02d:%02d&#34;, $y, $m_num, $d, $h, $m);
</span></span></span><span class=line><span class=cl><span class=s>        $dir_time = sprintf(&#34;%04d-%02d-%02d %02d-%02d&#34;, $y, $m_num, $d, $h, $m);
</span></span></span><span class=line><span class=cl><span class=s>        $fm_date = sprintf(&#34;%04d-%02d-%02dT%02d:%02d:00+08:00&#34;, $y, $m_num, $d, $h, $m);
</span></span></span><span class=line><span class=cl><span class=s>        $slug = sprintf(&#34;note-%04d%02d%02d%02d%02d-%s&#34;, $y, $m_num, $d, $h, $m, $page);
</span></span></span><span class=line><span class=cl><span class=s>        
</span></span></span><span class=line><span class=cl><span class=s>    } elsif ($chunk =~ s/^\s*(?:\*\* ?)?Page\s+(\d+)\s+@\s+(\d{4})-(\d{2})-(\d{2})\s+(\d{2}):(\d{2})\*?\*?\s*//) {
</span></span></span><span class=line><span class=cl><span class=s>        $page = $1; my $y = $2; my $m_num = $3; my $d = $4; my $h = $5; my $m = $6;
</span></span></span><span class=line><span class=cl><span class=s>        $formatted_time = &#34;$y-$m_num-$d $h:$m&#34;;
</span></span></span><span class=line><span class=cl><span class=s>        $dir_time = &#34;$y-$m_num-$d $h-$m&#34;;
</span></span></span><span class=line><span class=cl><span class=s>        $fm_date = sprintf(&#34;%04d-%02d-%02dT%02d:%02d:00+08:00&#34;, $y, $m_num, $d, $h, $m);
</span></span></span><span class=line><span class=cl><span class=s>        $slug = sprintf(&#34;note-%04d%02d%02d%02d%02d-%s&#34;, $y, $m_num, $d, $h, $m, $page);
</span></span></span><span class=line><span class=cl><span class=s>    } else {
</span></span></span><span class=line><span class=cl><span class=s>        next; 
</span></span></span><span class=line><span class=cl><span class=s>    }
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>    # --- 3. æ™ºèƒ½åˆ‡å‰²ï¼šå¼•æ–‡(Quote) vs ä¸ªäººæƒ³æ³•(Note) ---
</span></span></span><span class=line><span class=cl><span class=s>    my $note = &#34;&#34;;
</span></span></span><span class=line><span class=cl><span class=s>    if ($chunk =~ m/^\s*---\s*$/m) {
</span></span></span><span class=line><span class=cl><span class=s>        my @parts = split(/^\s*---\s*$/m, $chunk, 2);
</span></span></span><span class=line><span class=cl><span class=s>        $chunk = $parts[0];
</span></span></span><span class=line><span class=cl><span class=s>        $note = $parts[1] if @parts &gt; 1;
</span></span></span><span class=line><span class=cl><span class=s>    }
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>    # å¤„ç†ä¹¦æ‘˜å¼•æ–‡
</span></span></span><span class=line><span class=cl><span class=s>    $chunk =~ s/^\s+|\s+$//g;
</span></span></span><span class=line><span class=cl><span class=s>    $chunk =~ s/^\*+//;       
</span></span></span><span class=line><span class=cl><span class=s>    $chunk =~ s/\*+$//;       
</span></span></span><span class=line><span class=cl><span class=s>    $chunk =~ s/^\s+|\s+$//g;
</span></span></span><span class=line><span class=cl><span class=s>    $chunk =~ s/^/&gt; /mg;      
</span></span></span><span class=line><span class=cl><span class=s>    
</span></span></span><span class=line><span class=cl><span class=s>    # å¤„ç†ä¸ªäººæƒ³æ³•
</span></span></span><span class=line><span class=cl><span class=s>    if ($note) {
</span></span></span><span class=line><span class=cl><span class=s>        $note =~ s/^\s+|\s+$//g;
</span></span></span><span class=line><span class=cl><span class=s>        $note =~ s/^\*+//; 
</span></span></span><span class=line><span class=cl><span class=s>        $note =~ s/\*+$//;
</span></span></span><span class=line><span class=cl><span class=s>    }
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>    # ç»„åˆä¸ºæœ€ç»ˆæ’ç‰ˆ
</span></span></span><span class=line><span class=cl><span class=s>    my $final_text = $chunk;
</span></span></span><span class=line><span class=cl><span class=s>    $final_text .= &#34;\n\n&#34; . $note if $note;
</span></span></span><span class=line><span class=cl><span class=s>    
</span></span></span><span class=line><span class=cl><span class=s>    next if $final_text =~ /^\s*$/; # é˜²æ­¢ç©ºæ–‡
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>    # --- 4. å†™å…¥æ–‡ä»¶ï¼ˆå®‰å…¨éš”ç¦»å˜é‡ï¼‰ ---
</span></span></span><span class=line><span class=cl><span class=s>    my $display_title = &#34;ä¹¦æ‘˜ï¼šã€Š$bookã€‹- ç¬¬${page}é¡µ ($dir_time)&#34;;
</span></span></span><span class=line><span class=cl><span class=s>    my $target_dir = &#34;$content_dir/$display_title&#34;;
</span></span></span><span class=line><span class=cl><span class=s>    system(&#34;mkdir&#34;, &#34;-p&#34;, $target_dir);
</span></span></span><span class=line><span class=cl><span class=s>    my $target_file = &#34;$target_dir/index.md&#34;;
</span></span></span><span class=line><span class=cl><span class=s>    
</span></span></span><span class=line><span class=cl><span class=s>    open(my $out, &#39;&gt;:encoding(UTF-8)&#39;, $target_file) or next;
</span></span></span><span class=line><span class=cl><span class=s>    print $out &lt;&lt;&#34;MARKDOWN&#34;;
</span></span></span><span class=line><span class=cl><span class=s>---
</span></span></span><span class=line><span class=cl><span class=s>title: &#34;$display_title&#34;
</span></span></span><span class=line><span class=cl><span class=s>date: &#34;$fm_date&#34;
</span></span></span><span class=line><span class=cl><span class=s>slug: &#34;$slug&#34;
</span></span></span><span class=line><span class=cl><span class=s>lastmod: &#34;$fm_date&#34;
</span></span></span><span class=line><span class=cl><span class=s>draft: false
</span></span></span><span class=line><span class=cl><span class=s>toc: false
</span></span></span><span class=line><span class=cl><span class=s>weight: false
</span></span></span><span class=line><span class=cl><span class=s>categories: [&#34;&#34;]
</span></span></span><span class=line><span class=cl><span class=s>shuoshuotags: [&#34;ä¹¦æ‘˜&#34;]
</span></span></span><span class=line><span class=cl><span class=s>---
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>&lt;div class=&#34;book-note-card&#34;&gt;
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>### ğŸ“š ã€Š$bookã€‹ &lt;small style=&#34;font-weight: normal; margin-left: 8px;&#34;&gt;ğŸ‘¤ $author Â· ğŸ”– $chapter&lt;/small&gt;
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>&lt;div class=&#34;book-note-meta&#34;&gt;ğŸ“ ç¬¬ ${page} é¡µ | â±ï¸ $formatted_time&lt;/div&gt;
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>$final_text
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>&lt;/div&gt;
</span></span></span><span class=line><span class=cl><span class=s>MARKDOWN
</span></span></span><span class=line><span class=cl><span class=s>    close($out);
</span></span></span><span class=line><span class=cl><span class=s>}
</span></span></span><span class=line><span class=cl><span class=s>PERL_EOF</span>
</span></span><span class=line><span class=cl>chmod +x <span class=s2>&#34;</span><span class=nv>$PERL_ENGINE</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># ==========================================================</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;ğŸš€ å®ˆæŠ¤è¿›ç¨‹å¯åŠ¨ï¼šæ­£åœ¨ç›‘å¬ </span><span class=nv>$WATCH_DIR</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>inotifywait -m -e close_write --format <span class=s1>&#39;%f&#39;</span> <span class=s2>&#34;</span><span class=nv>$WATCH_DIR</span><span class=s2>&#34;</span> <span class=p>|</span> <span class=k>while</span> <span class=nb>read</span> FILE
</span></span><span class=line><span class=cl><span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>[[</span> <span class=s2>&#34;</span><span class=nv>$FILE</span><span class=s2>&#34;</span> <span class=o>==</span> *.md <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;[</span><span class=k>$(</span>date<span class=k>)</span><span class=s2>] æ¥æ”¶åˆ°æ–°æ–‡ä»¶: </span><span class=nv>$FILE</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> grep -Fxq <span class=s2>&#34;</span><span class=nv>$FILE</span><span class=s2>&#34;</span> <span class=s2>&#34;</span><span class=nv>$PROCESSED_LOG</span><span class=s2>&#34;</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>            <span class=nb>echo</span> <span class=s2>&#34;[</span><span class=k>$(</span>date<span class=k>)</span><span class=s2>] âš ï¸ æ‹¦æˆªï¼šå¯¼å‡ºæ–‡ä»¶ </span><span class=nv>$FILE</span><span class=s2> å·²å¤„ç†è¿‡ï¼Œè·³è¿‡ï¼&#34;</span>
</span></span><span class=line><span class=cl>            <span class=k>continue</span>
</span></span><span class=line><span class=cl>        <span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># æ ¸å¿ƒï¼šè°ƒç”¨å¼•æ“åˆ‡å‰²</span>
</span></span><span class=line><span class=cl>        perl <span class=s2>&#34;</span><span class=nv>$PERL_ENGINE</span><span class=s2>&#34;</span> <span class=s2>&#34;</span><span class=nv>$WATCH_DIR</span><span class=s2>/</span><span class=nv>$FILE</span><span class=s2>&#34;</span> <span class=s2>&#34;</span><span class=nv>$CONTENT_DIR</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nv>BACKUP_DIR</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$BLOG_DIR</span><span class=s2>/vps-backup&#34;</span>
</span></span><span class=line><span class=cl>        mkdir -p <span class=s2>&#34;</span><span class=nv>$BACKUP_DIR</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        cp /root/scripts/sync_notes.sh <span class=s2>&#34;</span><span class=nv>$BACKUP_DIR</span><span class=s2>/&#34;</span> 2&gt;/dev/null
</span></span><span class=line><span class=cl>        cp /etc/systemd/system/koreader-sync.service <span class=s2>&#34;</span><span class=nv>$BACKUP_DIR</span><span class=s2>/&#34;</span> 2&gt;/dev/null
</span></span><span class=line><span class=cl>        cp <span class=s2>&#34;</span><span class=nv>$PERL_ENGINE</span><span class=s2>&#34;</span> <span class=s2>&#34;</span><span class=nv>$BACKUP_DIR</span><span class=s2>/&#34;</span> 2&gt;/dev/null
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nb>cd</span> <span class=s2>&#34;</span><span class=nv>$BLOG_DIR</span><span class=s2>&#34;</span> <span class=o>||</span> <span class=nb>exit</span>
</span></span><span class=line><span class=cl>        git add .
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># åˆ¤æ–­ Git æ˜¯å¦çœŸçš„æœ‰æ–°ä¸œè¥¿éœ€è¦æäº¤</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> git diff --staged --quiet<span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>            <span class=nb>echo</span> <span class=s2>&#34;[</span><span class=k>$(</span>date<span class=k>)</span><span class=s2>] ğŸ’¡ æ£€æµ‹åˆ°å†…å®¹æ— å˜åŒ–ï¼ˆå…¨æ˜¯æ—§ç¬”è®°ï¼‰ï¼Œè·³è¿‡ Git æ¨é€ç¯èŠ‚ã€‚&#34;</span>
</span></span><span class=line><span class=cl>            <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$FILE</span><span class=s2>&#34;</span> &gt;&gt; <span class=s2>&#34;</span><span class=nv>$PROCESSED_LOG</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=k>continue</span>
</span></span><span class=line><span class=cl>        <span class=k>fi</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        git commit -m <span class=s2>&#34;Auto-publish: æ‰¹é‡ä¹¦æ‘˜æ‹†åˆ† (</span><span class=nv>$FILE</span><span class=s2>) &amp; Backup&#34;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># ğŸ‘‡ æ ¸å¿ƒé˜²å¡æ­»æœºåˆ¶ï¼šå°è¯•åˆå¹¶äº‘ç«¯ä»£ç ï¼Œå¦‚æœé‡åˆ°å†²çªæŠ¥é”™ï¼Œç«‹åˆ»ä¸­æ­¢ï¼Œç»ä¸å¡æ­»ï¼ ğŸ‘‡</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> ! git pull --rebase origin develop<span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>            <span class=nb>echo</span> <span class=s2>&#34;[</span><span class=k>$(</span>date<span class=k>)</span><span class=s2>] âš ï¸ è­¦å‘Šï¼šæ‹‰å–äº‘ç«¯ä»£ç æ—¶å‘ç”Ÿå†²çªï¼å·²è‡ªåŠ¨å–æ¶ˆåˆå¹¶ã€‚&#34;</span>
</span></span><span class=line><span class=cl>            git rebase --abort
</span></span><span class=line><span class=cl>            <span class=nb>echo</span> <span class=s2>&#34;[</span><span class=k>$(</span>date<span class=k>)</span><span class=s2>] âŒ æœ¬æ¬¡æ¨é€ä¸­æ–­ï¼Œå°†åœ¨ä¸‹æ¬¡æœ‰æ–°ç¬”è®°æ—¶è‡ªåŠ¨é‡è¯•ã€‚&#34;</span>
</span></span><span class=line><span class=cl>            <span class=k>continue</span>
</span></span><span class=line><span class=cl>        <span class=k>fi</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> git push origin develop<span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>            <span class=nb>echo</span> <span class=s2>&#34;[</span><span class=k>$(</span>date<span class=k>)</span><span class=s2>] ğŸš€ æˆåŠŸæ¨é€è‡³ GitHubï¼(æ–°ä¹¦æ‘˜å·²ç‹¬ç«‹ä¸Šçº¿)&#34;</span>
</span></span><span class=line><span class=cl>            <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$FILE</span><span class=s2>&#34;</span> &gt;&gt; <span class=s2>&#34;</span><span class=nv>$PROCESSED_LOG</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>            <span class=nb>echo</span> <span class=s2>&#34;[</span><span class=k>$(</span>date<span class=k>)</span><span class=s2>] âŒ æ¨é€å¤±è´¥ã€‚&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>fi</span>
</span></span><span class=line><span class=cl>    <span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span></code></pre></td></tr></table></div></div><p>èµ‹äºˆæ‰§è¡Œæƒé™ï¼Œå¦‚æœ<strong>æ›´æ–°è„šæœ¬</strong>ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¸¢æ‰æ—§çš„åå°è¿›ç¨‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>chmod +x /root/scripts/sync_notes.sh
</span></span><span class=line><span class=cl>pkill -9 -f sync_notes.sh
</span></span><span class=line><span class=cl>systemctl restart koreader-sync
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=é˜¶æ®µå››æ³¨å†Œç³»ç»ŸæœåŠ¡ä¸å®æ—¶ç›‘æ§>é˜¶æ®µå››ï¼šæ³¨å†Œç³»ç»ŸæœåŠ¡ä¸å®æ—¶ç›‘æ§</h2><p>å°†è„šæœ¬åšæˆç³»ç»ŸæœåŠ¡ï¼Œç¡®ä¿ VPS é‡å¯åä¾ç„¶åšå®ˆå²—ä½ã€‚</p><h3 id=1-åˆ›å»ºæœåŠ¡>1. åˆ›å»ºæœåŠ¡</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /etc/systemd/system/koreader-sync.service
</span></span></code></pre></td></tr></table></div></div><p>å¡«å…¥ä»¥ä¸‹é…ç½®ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=k>[Unit]</span>
</span></span><span class=line><span class=cl><span class=na>Description</span><span class=o>=</span><span class=s>KOReader to Hugo Auto Sync Service</span>
</span></span><span class=line><span class=cl><span class=na>After</span><span class=o>=</span><span class=s>network.target</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>[Service]</span>
</span></span><span class=line><span class=cl><span class=na>Type</span><span class=o>=</span><span class=s>simple</span>
</span></span><span class=line><span class=cl><span class=na>User</span><span class=o>=</span><span class=s>root</span>
</span></span><span class=line><span class=cl><span class=na>ExecStart</span><span class=o>=</span><span class=s>/bin/bash /root/scripts/sync_notes.sh</span>
</span></span><span class=line><span class=cl><span class=na>Restart</span><span class=o>=</span><span class=s>always</span>
</span></span><span class=line><span class=cl><span class=na>RestartSec</span><span class=o>=</span><span class=s>10</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>[Install]</span>
</span></span><span class=line><span class=cl><span class=na>WantedBy</span><span class=o>=</span><span class=s>multi-user.target</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=2-æ¿€æ´»å¹¶å¯åŠ¨æœåŠ¡>2. æ¿€æ´»å¹¶å¯åŠ¨æœåŠ¡</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>systemctl daemon-reload
</span></span><span class=line><span class=cl>systemctl <span class=nb>enable</span> --now koreader-sync
</span></span></code></pre></td></tr></table></div></div><h3 id=3-æå®¢æ’é”™åˆ©å™¨å®æ—¶æ—¥å¿—ç›‘æ§>3. æå®¢æ’é”™åˆ©å™¨ï¼šå®æ—¶æ—¥å¿—ç›‘æ§</h3><p>æ‰‹æœºç‚¹å‡»å¯¼å‡ºåï¼Œåœ¨ VPS ç»ˆç«¯è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œå³å¯å¦‚åŒçœ‹ç”µå½±ä¸€èˆ¬å®æ—¶è§‚å¯Ÿå¤„ç†å’Œæ¨é€çš„å…¨è¿‡ç¨‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>journalctl -u koreader-sync -f
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=é˜¶æ®µäº”å®šæ—¶æ¸…ç†å¤§æ‰«é™¤-cron>é˜¶æ®µäº”ï¼šå®šæ—¶æ¸…ç†å¤§æ‰«é™¤ (Cron)</h2><p>æ—¢ç„¶æˆ‘ä»¬åœ¨æ‰‹æœºç«¯ FolderSync è®¾ç½®äº†â€œåŒæ­¥ååˆ é™¤æºæ–‡ä»¶â€ï¼Œé‚£ä¹ˆä¼ åˆ° VPS ä¸Šçš„ <code>.md</code> åŸå§‹ç¬”è®°å°±æˆäº†æˆ‘ä»¬æœ€åçš„â€œå®¹é”™å¤‡ä»½ç¼“å†²â€ã€‚æˆ‘ä»¬å¯ä»¥è®© VPS ä¿ç•™å®ƒä»¬ 7 å¤©åå†è‡ªåŠ¨é”€æ¯ã€‚</p><ol><li>è¾“å…¥ <code>crontab -e</code> å¼€å¯å®šæ—¶ä»»åŠ¡ç¼–è¾‘å™¨ã€‚</li><li>åœ¨æœ«å°¾æ·»åŠ ä»¥ä¸‹è§„åˆ™ï¼ˆæ¯å¤©å‡Œæ™¨ 4 ç‚¹ï¼Œè‡ªåŠ¨æŸ¥æ€ 7 å¤©å‰çš„åŸå§‹ç¬”è®°ï¼‰ï¼š</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=m>0</span> <span class=m>4</span> * * * find /root/Koreader -type f -name <span class=s2>&#34;*.md&#34;</span> -mtime +7 -delete
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=é˜¶æ®µå…­ä¿®å¤-github-actions-å¹¶å‘å†²çª-é˜²è¿ç¯è½¦ç¥¸>é˜¶æ®µå…­ï¼šä¿®å¤ GitHub Actions å¹¶å‘å†²çª (é˜²è¿ç¯è½¦ç¥¸)</h2><p>å¦‚æœä½ ä¸€æ¬¡æ€§å¯¼å‡ºäº†å¤šç¯‡ç‹¬ç«‹ç¬”è®°ï¼ŒVPS è„šæœ¬ä¼šè¿ç»­è¿›è¡Œå¤šæ¬¡ç‹¬ç«‹çš„ <code>git push</code>ï¼Œè¿™ä¼šå¯¼è‡´ GitHub ç¬é—´è§¦å‘å¤šä¸ªå¹¶è¡Œç¼–è¯‘ä»»åŠ¡ï¼Œå¼•å‘ <code>non-fast-forward</code> å†²çªæŠ¥é”™ï¼Œå¯¼è‡´ç½‘é¡µæ— æ³•æ›´æ–°ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆï¼šç»™ GitHub Actions åŠ ä¸Šæ’é˜Ÿæœºåˆ¶ã€‚</strong></p><p>æ‰“å¼€ä½ åšå®¢ä»“åº“ä¸­çš„ <code>.github/workflows/deploy.yml</code> æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶é¡¶éƒ¨ï¼ˆå’Œ <code>env:</code> å·®ä¸å¤šä½ç½®ï¼‰åŠ å…¥ <code>concurrency</code> é˜Ÿåˆ—æŒ‡ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>GitHub Page Deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>develop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>workflow_dispatch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=c># ğŸ‘‡ æ ¸å¿ƒï¼šå®Œç¾çš„é˜²å¹¶å‘â€œæ’é˜Ÿâ€æœºåˆ¶ï¼Œæœç»å¤šä»»åŠ¡æ’è½¦æŠ¥é”™ ğŸ‘‡</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>concurrency</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=l>${{ github.workflow }}-${{ github.ref }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>cancel-in-progress</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>TZ</span><span class=p>:</span><span class=w> </span><span class=l>Asia/Shanghai</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=c># ...ä¸‹é¢ä¿æŒåŸæ ·...</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>è¿™æ ·ï¼Œå¤šä¸ªç¼–è¯‘ä»»åŠ¡ä¼šè‡ªåŠ¨æ’é˜Ÿï¼Œæˆ–å–æ¶ˆæ—§ä»»åŠ¡åªè·‘æœ€æ–°çš„ï¼Œå½»åº•æœç»äº‘ç«¯éƒ¨ç½²å¤±è´¥ï¼</p><p>è‡³æ­¤ï¼Œè¿™å¥—åšå¦‚ç£çŸ³ã€ç»å¯¹å¹‚ç­‰ã€è‡ªåŠ¨æ‹†åˆ†ã€æ°¸ä¸ä¸¢å¤±çš„<strong>çœŸÂ·æå®¢é—­ç¯ç³»ç»Ÿ</strong>å·²ç»å®Œå…¨ç¡®ç«‹ã€‚æ‹¿èµ·è®¾å¤‡å®‰å¿ƒé˜…è¯»å§ï¼Œå‰©ä¸‹çš„ç¹æ‚ä»£ç ï¼Œå°±äº¤ç»™æœåŠ¡å™¨çš„é½¿è½®å»é»˜é»˜è¿è½¬ï¼</p></section><footer class=article-footer><style>.article-edit-container a{-webkit-tap-highlight-color:transparent!important;outline:none!important}.article-edit-container a:hover{text-decoration:underline!important}.article-edit-container{border-top:1px dashed var(--body-background);padding-top:15px;margin-top:20px;width:100%;display:flex;align-items:center;gap:10px;flex-wrap:wrap}</style><section class=article-tags><style>.article-tags{margin-top:25px;margin-bottom:15px;display:flex;flex-wrap:wrap;gap:12px;align-items:center}.article-tags .tag-link{display:inline-flex!important;align-items:center!important;padding:4px 16px!important;background-color:rgba(30,144,255,8%)!important;color:#1e90ff!important;border-radius:999px!important;text-decoration:none!important;font-size:14px!important;font-weight:500!important;border:1px solid rgba(30,144,255,.2)!important;transition:all .3s ease!important}.article-tags .tag-link::before{content:"#"!important;margin-right:4px!important;color:inherit!important;font-weight:700!important}.article-tags .tag-link:hover{background-color:#1e90ff!important;color:#fff!important;transform:translateY(-3px)!important;box-shadow:0 4px 12px rgba(30,144,255,.35)!important;border-color:#1e90ff!important}@media(prefers-color-scheme:dark){.article-tags .tag-link{background-color:rgba(88,166,255,.15)!important;color:#58a6ff!important;font-weight:600!important;border-color:rgba(88,166,255,.3)!important}.article-tags .tag-link:hover{background-color:#1e90ff!important;color:#fff!important;box-shadow:0 4px 15px rgba(30,144,255,.4)!important}}</style><a href=/tags/hugo/ class=tag-link title=æŸ¥çœ‹æ ‡ç­¾ï¼šHugo>Hugo
</a><a href=/tags/koreader/ class=tag-link title=æŸ¥çœ‹æ ‡ç­¾ï¼šKOReader>KOReader
</a><a href=/tags/%E8%87%AA%E5%8A%A8%E5%8C%96/ class=tag-link title=æŸ¥çœ‹æ ‡ç­¾ï¼šè‡ªåŠ¨åŒ–>è‡ªåŠ¨åŒ–</a></section><section class=article-edit-container><a style=color:#1e90ff;font-size:14px;text-decoration:none;display:flex;align-items:center;gap:8px href=https://github.com/iwyang/iwyang.github.io/edit/develop/content/post/%e6%89%93%e9%80%a0%20KOReader%20%e7%ac%94%e8%ae%b0%e5%85%a8%e8%87%aa%e5%8a%a8%e5%90%8c%e6%ad%a5%e8%87%b3%20Hugo%20%e5%8d%9a%e5%ae%a2%e7%9a%84%e6%9e%81%e5%ae%a2%e5%b7%a5%e4%bd%9c%e6%b5%81/index.md target=_blank rel="noopener noreferrer" title="å‰å¾€ GitHub ç¼–è¾‘æ­¤é¡µ"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:-2px"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
<span>ç¼–è¾‘æ­¤é¡µ</span>
</a><span style=font-size:14px;color:#1e90ff>|</span><a href=https://github.com/iwyang/iwyang.github.io/commit/e290b9e7d43dcfeaabf6ff8b8523beb80fc7e4d1 target=_blank rel="noopener noreferrer" title="Commit Hash: #e290b9e" style=color:#1e90ff;font-weight:400;text-decoration:none;font-size:14px>
#e290b9e</a></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-content><div class="flex article-list--tile"><article><a href=/archives/c7ccd27d/><div class=article-details><h2 class=article-title>GitHub Actionsåˆ©ç”¨FTP&&amp;rsyncè‡ªåŠ¨éƒ¨ç½²hugo-hexoåˆ°Centos 8</h2></div></a></article><article><a href=/archives/ca21a352/><div class=article-details><h2 class=article-title>Hugo Papermodä¸»é¢˜é…ç½®ä¸ä½¿ç”¨</h2></div></a></article><article><a href=/archives/3bf3725e/><div class=article-details><h2 class=article-title>Hugo Stackä¸»é¢˜é…ç½®ä¸ä½¿ç”¨</h2></div></a></article><article><a href=/archives/23eeae2f/><div class=article-details><h2 class=article-title>hugoåˆ©ç”¨Github Actionsè‡ªåŠ¨æ„å»ºåšå®¢</h2></div></a></article><article><a href=/archives/c3be6469/><div class=article-details><h2 class=article-title>Hugoè¿ç§»ç¬”è®°</h2></div></a></article></div></div></aside><script src=//registry.npmmirror.com/twikoo/1.6.45/files/dist/twikoo.min.js></script><div id=tcomment></div><style>.twikoo{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}:root[data-scheme=dark]{--twikoo-body-text-color-main:rgba(255, 255, 255, 0.9);--twikoo-body-text-color:rgba(255, 255, 255, 0.7)}.twikoo .el-input-group__prepend,.twikoo .tk-action-icon,.twikoo .tk-submit-action-icon,.twikoo .tk-time,.twikoo .tk-comments-no,.twikoo .tk-comments-count{color:var(--twikoo-body-text-color)}.twikoo .el-input__inner,.twikoo .el-textarea__inner,.twikoo .tk-preview-container,.twikoo .tk-content,.twikoo .tk-nick,.twikoo .tk-send,.twikoo .tk-comments-no,.twikoo .el-input__count,.twikoo .tk-submit-action-icon{color:var(--twikoo-body-text-color-main)!important}.twikoo .el-button{color:var(--twikoo-body-text-color)!important}.twikoo .el-input__count{color:var(--twikoo-body-text-color)!important}.OwO .OwO-body{background-color:var(--body-background)!important;color:var(--body-text-color)!important}</style><script>twikoo.init({envId:"https://t.bore.vip",el:"#tcomment"})</script><footer class=site-footer><style>.site-footer .running-time,.site-footer .powerby{font-size:14px!important;line-height:1.6!important;margin:10px 0!important;display:block!important;font-weight:400!important}.site-footer .running-time,.site-footer .running-time *,[data-scheme=dark] .site-footer .running-time,[data-scheme=dark] .site-footer .running-time *{color:#1e90ff!important}.site-footer .powerby,.site-footer .powerby *{color:var(--sys-color-text-muted)!important}[data-scheme=dark] .site-footer .powerby,[data-scheme=dark] .site-footer .powerby *{color:rgba(255,255,255,.7)!important}.footer-separator{margin:0 6px!important;font-size:14px!important}.site-footer .running-time .footer-separator{color:#1e90ff!important;opacity:1!important}.site-footer .powerby .footer-separator{color:inherit!important}.site-footer a{text-decoration:none!important;cursor:pointer}.site-footer a:hover{text-decoration:underline!important}.site-footer .powerby a:hover{color:var(--accent-color)!important}</style><section class=copyright>&copy;
2020 -
2026 Bore's Notes</section><section class=running-time>æœ€è¿‘æ›´æ–°ï¼š<span id=site-last-update data-time=2026-02-28T10:49:03Z title="2026-02-28 10:49">--</span><span class=footer-separator>|</span>
<a href=https://github.com/iwyang/iwyang.github.io/commit/3da71065862bcda24bd983627fce323b21e8a649 target=_blank rel=noopener title="Commit Hash: 3da7106">#3da7106</a></section><section class=powerby>ä½¿ç”¨ <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> æ„å»º
<span class=footer-separator>|</span>
ä¸»é¢˜ <a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=4.0.0>Stack</a> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><script>(function(){var e,t,n,o,i,a,r,c,l,d,s=document.getElementById("site-last-update");s&&(n=new Date(s.getAttribute("data-time")),o=new Date,e=(o-n)/1e3,i=n.getFullYear(),a=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0"),c=String(n.getHours()).padStart(2,"0"),l=String(n.getMinutes()).padStart(2,"0"),d=i+"-"+a+"-"+r+" "+c+":"+l,s.setAttribute("title",d),t="",e<60?t="åˆšåˆš":e<3600?t=Math.floor(e/60)+" åˆ†é’Ÿå‰":e<86400?t=Math.floor(e/3600)+" å°æ—¶å‰":e<2592e3?t=Math.floor(e/86400)+" å¤©å‰":e<31536e3?t=Math.floor(e/2592e3)+" ä¸ªæœˆå‰":t=Math.floor(e/31536e3)+" å¹´å‰",s.innerText=t)})()</script><script type=module>
    import gallery from '\/ts\/gallery.js';

    const articleContent = document.querySelector('.article-content');
    const shouldLoad = articleContent && (articleContent.querySelectorAll('figure').length > 0 || articleContent.querySelectorAll('img.gallery-image').length > 0);
    
    if (shouldLoad) {
        gallery(articleContent);

        const PhotoSwipeLightbox = (await import("https:\/\/cdn.jsdelivr.net\/npm\/photoswipe@5.4.4\/dist\/photoswipe-lightbox.esm.min.js")).default;
        const styleHref = "https:\/\/cdn.jsdelivr.net\/npm\/photoswipe@5.4.4\/dist\/photoswipe.css";

        const styleTag = document.createElement('link');
        styleTag.rel = 'stylesheet';
        styleTag.href = styleHref;
        document.head.appendChild(styleTag);

        const lightbox = new PhotoSwipeLightbox({
            gallerySelector: '.article-content',
            childSelector: 'figure a.image-link',
            pswpModule: () => import("https:\/\/cdn.jsdelivr.net\/npm\/photoswipe@5.4.4\/dist\/photoswipe.esm.min.js")
        });
        lightbox.init();
    }
</script></main></div><script type=text/javascript src=/ts/main.acaf849f2b273f6a8368a58b001f336738d0c948d92e79b116467d0c7515f932.js defer></script><script>document.addEventListener("DOMContentLoaded",()=>{const f=".search-result--list",m="article",u=".search-result--title",a=".search-form input",l=document.createElement("style");l.textContent='.bore-custom-header { display: flex; align-items: center !important; flex-wrap: wrap !important; gap: 15px !important; margin-bottom: 24px !important; padding-bottom: 8px !important; border-bottom: 1px dashed rgba(128, 128, 128, 0.15); min-height: 42px; }.bore-hidden { display: none !important; }.bore-search-stats { display: none !important; }.search-filter-tabs { --tab-bg: #ffffff; --tab-border: #e2e8f0; --tab-text: #64748b; --tab-active-bg: #1e90ff; --tab-active-text: #ffffff; --count-bg: #f1f5f9; --count-text: #64748b; --count-active-bg: #ffffff; --count-active-text: #1e90ff; display: flex; align-items: center; gap: 10px; margin-left: 0; }[data-scheme="dark"] .search-filter-tabs { --tab-bg: rgba(255, 255, 255, 0.04); --tab-border: rgba(255, 255, 255, 0.15); --tab-text: #a1a1aa; --tab-active-bg: #1e90ff; --tab-active-text: #ffffff; --count-bg: rgba(255, 255, 255, 0.12); --count-text: #e4e4e7; --count-active-bg: #ffffff; --count-active-text: #1e90ff; }.filter-tab { cursor: pointer; padding: 5px 12px 5px 16px; border-radius: 50px; font-size: 1.35rem; font-weight: 500; color: var(--tab-text); background: var(--tab-bg); border: 1px solid var(--tab-border); transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1); display: inline-flex; align-items: center; gap: 8px; user-select: none; line-height: 1.2; }.filter-tab:hover { border-color: #1e90ff; color: #1e90ff; background: rgba(30, 144, 255, 0.05); }.filter-tab:active { transform: scale(0.96); opacity: 0.8; }.filter-tab.active { background: var(--tab-active-bg); border-color: var(--tab-active-bg); color: var(--tab-active-text); font-weight: 600; box-shadow: 0 4px 12px rgba(30, 144, 255, 0.3); pointer-events: none; }.filter-count { font-size: 1.15rem; padding: 3px 8px; border-radius: 50px; background: var(--count-bg); color: var(--count-text); font-weight: 600; min-width: 24px; text-align: center; }.filter-tab.active .filter-count { background: var(--count-active-bg); color: var(--count-active-text); }.bore-search-empty-state { grid-column: 1 / -1; width: 100%; min-height: 40vh; display: flex; flex-direction: column; align-items: center; justify-content: center; animation: fadeIn 0.4s ease; }.bore-search-empty-icon-wrapper { color: var(--body-text-color); opacity: 0.4; transition: all 0.3s ease; margin-bottom: 24px; }[data-scheme="dark"] .bore-search-empty-icon-wrapper { color: #ffffff !important; opacity: 0.75 !important; }.bore-search-empty-icon { width: 80px; height: 80px; stroke-width: 1.2; }.bore-search-empty-text { font-size: 1.6rem; font-weight: 500; color: var(--body-text-color); opacity: 0.8; letter-spacing: 0.5px; }@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }.search-result--title { display: none !important; }',document.head.appendChild(l);let e=sessionStorage.getItem("bore-search-filter")||"all",r,t=!1;const c=new MutationObserver(()=>{clearTimeout(r),r=setTimeout(()=>{d()},20)}),s=()=>{if(t)return;const e=document.querySelector(".search-wrapper")||document.body;e&&(c.observe(e,{childList:!0,subtree:!0}),t=!0)},i=()=>{if(!t)return;c.disconnect(),t=!1};function d(){i(),h(),s()}const n=document.querySelector(a);n&&n.addEventListener("input",()=>{if(e!=="all"){e="all",sessionStorage.setItem("bore-search-filter","all"),i();const t=document.querySelector(".search-filter-tabs");if(t){t.querySelectorAll(".filter-tab").forEach(e=>e.classList.remove("active"));const e=t.querySelector("[data-type='all']");e&&e.classList.add("active")}o(),s()}}),window.addEventListener("pageshow",t=>{t.persisted&&(e=sessionStorage.getItem("bore-search-filter")||"all",d())}),s();function h(){const r=document.querySelector(u),a=document.querySelector(".search-result--list");if(!r||!n||!a)return;const c=n.value.trim()==="";let t=document.querySelector(".bore-custom-header");if(!t&&!c){t=document.createElement("div"),t.className="bore-custom-header bore-hidden";const r=document.createElement("div");r.className="bore-search-stats";const n=document.createElement("div");n.className="search-filter-tabs";const c=[{type:"all",label:"å…¨éƒ¨",id:"count-all"},{type:"article",label:"æ–‡ç« ",id:"count-article"},{type:"shuoshuo",label:"è¯´è¯´",id:"count-shuoshuo"}];n.innerHTML=c.map(t=>{const n=t.type===e?" active":"";return'<div class="filter-tab'+n+'" data-type="'+t.type+'">'+t.label+' <span class="filter-count" id="'+t.id+'">0</span></div>'}).join(""),t.appendChild(r),t.appendChild(n),a.parentNode.insertBefore(t,a),n.querySelectorAll(".filter-tab").forEach(t=>{t.addEventListener("click",t=>{if(t.stopPropagation(),e===t.currentTarget.dataset.type)return;i(),n.querySelectorAll(".filter-tab").forEach(e=>e.classList.remove("active")),t.currentTarget.classList.add("active"),e=t.currentTarget.dataset.type,sessionStorage.setItem("bore-search-filter",e),o(a),s()})})}if(t){const e=t.querySelector(".bore-search-stats");if(e&&r.textContent){const t=r.innerHTML.split("ï¼ˆ")[0].split("(")[0].trim();e.innerHTML!==t&&(e.innerHTML=t)}const n=a.querySelectorAll(m).length,s=c||n===0;s?t.classList.add("bore-hidden"):t.classList.remove("bore-hidden")}o(a)}function o(t){const s=t||document.querySelector(".search-result--list");if(!s)return;const d=s.querySelectorAll("article");let o=0,i=0,r=0;d.forEach(t=>{const a=t.querySelector(".article-title");if(!a)return;const s=a.textContent.includes("ğŸ’¬");o++,s?r++:i++;let n="";e==="article"?n=s?"none":"":e==="shuoshuo"&&(n=s?"":"none"),t.style.display!==n&&(t.style.display=n)});const c=(e,t)=>{const n=document.getElementById(e);n&&n.textContent!==String(t)&&(n.textContent=String(t))};c("count-all",o),c("count-article",i),c("count-shuoshuo",r);let n=document.querySelector(".bore-search-empty-state");const u=document.querySelector(a)?.value.trim()==="";let l=!1;!u&&o>0&&(e==="article"&&i===0&&(l=!0),e==="shuoshuo"&&r===0&&(l=!0)),l?n||(n=document.createElement("div"),n.className="bore-search-empty-state",n.innerHTML='<div class="bore-search-empty-icon-wrapper"><svg class="bore-search-empty-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="8" y1="11" x2="14" y2="11"></line></svg></div><div class="bore-search-empty-text">è¯¥åˆ†ç±»ä¸‹æš‚æ— åŒ¹é…å†…å®¹</div>',s.appendChild(n)):n&&n.remove()}})</script></body></html>