<!doctype html><html lang=zh-CN dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="ç”±äºä¸€äº›åŸå› ï¼Œä¹‹å‰æœåŠ¡å™¨ä¸Šç”¨çš„Centosæ¢æˆäº†Debianã€‚Debianè™½ç„¶å’ŒCentoså¤§åŒå°å¼‚ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰äº›ä¸œè¥¿è¦è®°ä¸€ä¸‹ã€‚\n{% note warning flat %} Debian10 ä¸Šå®‰è£…éƒ¨åˆ†åº”ç”¨ï¼Œé€Ÿåº¦å‡ ä¹ä¸º0ï¼Œè‡³å°‘éœ€è¦Debian11ä»¥ä¸Šï¼Œ512Må†…å­˜è¶³å¤Ÿã€‚ {% endnote %}\n"><title>Debianä½¿ç”¨å¤‡å¿˜</title><link rel=canonical href=https://bore.vip/archives/9eb70758/><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap"><link rel=stylesheet href=/scss/style.min.c7c0842e01a72cd61590e0495507e4f5c379ae559826d9dc7b984171823e22c9.css><meta property='og:title' content="Debianä½¿ç”¨å¤‡å¿˜"><meta property='og:description' content="ç”±äºä¸€äº›åŸå› ï¼Œä¹‹å‰æœåŠ¡å™¨ä¸Šç”¨çš„Centosæ¢æˆäº†Debianã€‚Debianè™½ç„¶å’ŒCentoså¤§åŒå°å¼‚ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰äº›ä¸œè¥¿è¦è®°ä¸€ä¸‹ã€‚\n{% note warning flat %} Debian10 ä¸Šå®‰è£…éƒ¨åˆ†åº”ç”¨ï¼Œé€Ÿåº¦å‡ ä¹ä¸º0ï¼Œè‡³å°‘éœ€è¦Debian11ä»¥ä¸Šï¼Œ512Må†…å­˜è¶³å¤Ÿã€‚ {% endnote %}\n"><meta property='og:url' content='https://bore.vip/archives/9eb70758/'><meta property='og:site_name' content="Bore's Notes"><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='linux'><meta property='article:published_time' content='2022-05-29T01:12:45+00:00'><meta property='article:modified_time' content='2026-02-18T15:52:01+08:00'><meta name=twitter:title content="Debianä½¿ç”¨å¤‡å¿˜"><meta name=twitter:description content="ç”±äºä¸€äº›åŸå› ï¼Œä¹‹å‰æœåŠ¡å™¨ä¸Šç”¨çš„Centosæ¢æˆäº†Debianã€‚Debianè™½ç„¶å’ŒCentoså¤§åŒå°å¼‚ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰äº›ä¸œè¥¿è¦è®°ä¸€ä¸‹ã€‚\n{% note warning flat %} Debian10 ä¸Šå®‰è£…éƒ¨åˆ†åº”ç”¨ï¼Œé€Ÿåº¦å‡ ä¹ä¸º0ï¼Œè‡³å°‘éœ€è¦Debian11ä»¥ä¸Šï¼Œ512Må†…å­˜è¶³å¤Ÿã€‚ {% endnote %}\n"><link rel="shortcut icon" href=/img/avatar.png><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap" rel=stylesheet></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar.png width=170 height=170 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸ¥</span></figure><div class=site-meta><h1 class=site-name><a href=/>Bore's Notes</a></h1><h2 class=site-description>åšè§‚è€Œçº¦å–ï¼Œåšç§¯è€Œè–„å‘</h2></div></header><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>ä¸»é¡µ</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>å…³äº</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>å½’æ¡£</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>æœç´¢</span></a></li><li><a href=/link/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>é“¾æ¥</span></a></li><li><a href=/shuoshuo/><svg class="icon icon-tabler icon-tabler-message-circle" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 20l1.3-3.9A9 8 0 117.7 19L3 20"/><line x1="12" y1="12" x2="12" y2="12.01"/><line x1="8" y1="12" x2="8" y2="12.01"/><line x1="16" y1="12" x2="16" y2="12.01"/></svg>
<span>è¯´è¯´</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav class=toc-nav id=TableOfContents><ol><li><a href=#debian-æ›´æ–°æŠ¥é”™çš„è§£å†³æ–¹æ³•><strong>Debian æ›´æ–°æŠ¥é”™çš„è§£å†³æ–¹æ³•</strong></a></li><li><a href=#è°ƒæ•´æ—¶åŒº>è°ƒæ•´æ—¶åŒº</a></li><li><a href=#puttyä¿å­˜ç™»å½•è´¦å·å’Œå¯†ç >puttyä¿å­˜ç™»å½•è´¦å·å’Œå¯†ç </a></li><li><a href=#viæ— æ³•æ­£å¸¸ä½¿ç”¨><code>vi</code>æ— æ³•æ­£å¸¸ä½¿ç”¨</a></li><li><a href=#debianå®‰è£…vsftpd>Debianå®‰è£…vsftpd</a></li><li><a href=#å¼€å¯80443ç«¯å£>å¼€å¯80ã€443ç«¯å£</a></li><li><a href=#debian-9ä¸Šå®‰è£…å’Œé…ç½®postfixé‚®ä»¶>Debian 9ä¸Šå®‰è£…å’Œé…ç½®Postfixé‚®ä»¶</a></li><li><a href=#å®‰è£…transmission><del>å®‰è£…Transmission</del></a><ol><li><a href=#å®‰è£…nginx>å®‰è£…nginx</a></li><li><a href=#é…ç½®nginx>é…ç½®nginx</a></li><li><a href=#debian11é…ç½®sslè¯ä¹¦>debian11é…ç½®SSLè¯ä¹¦</a><ol><li><a href=#å®‰è£…-certbot>å®‰è£… Certbot</a></li><li><a href=#ä½¿ç”¨-webroot-è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦>ä½¿ç”¨ webroot è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦</a></li><li><a href=#ç¼–è¾‘nginx>ç¼–è¾‘<code>Nginx</code></a></li><li><a href=#è‡ªåŠ¨ç»­æœŸ>è‡ªåŠ¨ç»­æœŸ</a></li></ol></li></ol></li><li><a href=#å®‰è£…qbittorrent-nox>å®‰è£…<code>qbittorrent-nox</code></a></li><li><a href=#qbittorrent-noxå¿˜è®°å¯†ç ><code>qbittorrent-nox</code>å¿˜è®°å¯†ç </a></li><li><a href=#nginxåä»£qbittorrent-noxçš„web-gui>Nginxåä»£qbittorrent-noxçš„Web-GUI</a><ol><li><a href=#ä¿®æ”¹ç›‘å¬åœ°å€>ä¿®æ”¹ç›‘å¬åœ°å€</a></li><li><a href=#å®‰è£…-nginx>å®‰è£… nginx</a></li><li><a href=#æ–°å»ºç½‘ç«™ç›®å½•>æ–°å»ºç½‘ç«™ç›®å½•</a></li><li><a href=#é…ç½®-nginx>é…ç½® nginx</a></li><li><a href=#é…ç½®-nginx-http-80-ç«¯å£>é…ç½® Nginx http 80 ç«¯å£</a></li><li><a href=#é…ç½®sslè¯ä¹¦>é…ç½®SSLè¯ä¹¦</a><ol><li><a href=#å®‰è£…-certbot-1>å®‰è£… Certbot</a></li><li><a href=#ä½¿ç”¨-webroot-è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦-1>ä½¿ç”¨ webroot è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦</a></li><li><a href=#ç¼–è¾‘-nginx>ç¼–è¾‘ <code>Nginx</code></a></li><li><a href=#è‡ªåŠ¨ç»­æœŸ-1>è‡ªåŠ¨ç»­æœŸ</a></li></ol></li></ol></li><li><a href=#é…ç½®nginxå¼€å¯ç›®å½•æµè§ˆ>é…ç½®nginxå¼€å¯ç›®å½•æµè§ˆ</a><ol><li><a href=#å®‰è£…-nginx-1>å®‰è£… nginx</a></li><li><a href=#é…ç½®-nginx-1>é…ç½® nginx</a></li><li><a href=#é…ç½®-ssl-è¯ä¹¦>é…ç½® SSL è¯ä¹¦</a><ol><li><a href=#å®‰è£…-certbot-2>å®‰è£… Certbot</a></li><li><a href=#ä½¿ç”¨-webroot-è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦-2>ä½¿ç”¨ webroot è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦</a></li><li><a href=#ç¼–è¾‘-nginx-1>ç¼–è¾‘ <code>Nginx</code></a></li><li><a href=#è‡ªåŠ¨ç»­æœŸ-2>è‡ªåŠ¨ç»­æœŸ</a></li></ol></li></ol></li><li><a href=#debianæ¸…ç†åƒåœ¾>Debianæ¸…ç†åƒåœ¾</a></li><li><a href=#é™„å½•>é™„å½•</a><ol><li><a href=#vsftpdconfæ³¨é‡Š><code>vsftpd.conf</code>æ³¨é‡Š</a></li></ol></li><li><a href=#å‚è€ƒé“¾æ¥>å‚è€ƒé“¾æ¥</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><h2 class=article-title><a href=/archives/9eb70758/>Debianä½¿ç”¨å¤‡å¿˜</a></h2><footer class=article-meta-info><div class=article-meta-item><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
<time class=article-time--published title='å‘å¸ƒäº 2022-05-29 01:12'>3 å¹´å‰</time></div><div class=article-meta-item><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4A2 2 0 002 6v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121.0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
<time class=article-time--updated title='æ›´æ–°äº 2026-02-18 15:52'>7 å¤©å‰</time></div><div class=article-meta-item><svg class="icon icon-tabler icon-tabler-pencil" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 20h4L18.5 9.5a1.5 1.5.0 00-4-4L4 16v4"/><line x1="13.5" y1="6.5" x2="17.5" y2="10.5"/></svg>
<span class=article-words title='å­—æ•°: 6482 å­—'>6.5k å­—</span></div><div class=article-meta-item><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg><div style=display:flex;gap:5px><a href=/categories/%E6%8A%80%E6%9C%AF/ title=æŸ¥çœ‹åˆ†ç±»ï¼šæŠ€æœ¯ style=color:inherit;text-decoration:none>æŠ€æœ¯</a></div></div></footer></div></header><aside class=article-toc><details><summary><div class=article-toc-title><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-right"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 6l6 6-6 6"/></svg>
<span>ç›®å½•</span></div></summary><nav class=toc-nav><ol><li><a href=#debian-æ›´æ–°æŠ¥é”™çš„è§£å†³æ–¹æ³•><strong>Debian æ›´æ–°æŠ¥é”™çš„è§£å†³æ–¹æ³•</strong></a></li><li><a href=#è°ƒæ•´æ—¶åŒº>è°ƒæ•´æ—¶åŒº</a></li><li><a href=#puttyä¿å­˜ç™»å½•è´¦å·å’Œå¯†ç >puttyä¿å­˜ç™»å½•è´¦å·å’Œå¯†ç </a></li><li><a href=#viæ— æ³•æ­£å¸¸ä½¿ç”¨><code>vi</code>æ— æ³•æ­£å¸¸ä½¿ç”¨</a></li><li><a href=#debianå®‰è£…vsftpd>Debianå®‰è£…vsftpd</a></li><li><a href=#å¼€å¯80443ç«¯å£>å¼€å¯80ã€443ç«¯å£</a></li><li><a href=#debian-9ä¸Šå®‰è£…å’Œé…ç½®postfixé‚®ä»¶>Debian 9ä¸Šå®‰è£…å’Œé…ç½®Postfixé‚®ä»¶</a></li><li><a href=#å®‰è£…transmission><del>å®‰è£…Transmission</del></a><ol><li><a href=#å®‰è£…nginx>å®‰è£…nginx</a></li><li><a href=#é…ç½®nginx>é…ç½®nginx</a></li><li><a href=#debian11é…ç½®sslè¯ä¹¦>debian11é…ç½®SSLè¯ä¹¦</a><ol><li><a href=#å®‰è£…-certbot>å®‰è£… Certbot</a></li><li><a href=#ä½¿ç”¨-webroot-è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦>ä½¿ç”¨ webroot è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦</a></li><li><a href=#ç¼–è¾‘nginx>ç¼–è¾‘<code>Nginx</code></a></li><li><a href=#è‡ªåŠ¨ç»­æœŸ>è‡ªåŠ¨ç»­æœŸ</a></li></ol></li></ol></li><li><a href=#å®‰è£…qbittorrent-nox>å®‰è£…<code>qbittorrent-nox</code></a></li><li><a href=#qbittorrent-noxå¿˜è®°å¯†ç ><code>qbittorrent-nox</code>å¿˜è®°å¯†ç </a></li><li><a href=#nginxåä»£qbittorrent-noxçš„web-gui>Nginxåä»£qbittorrent-noxçš„Web-GUI</a><ol><li><a href=#ä¿®æ”¹ç›‘å¬åœ°å€>ä¿®æ”¹ç›‘å¬åœ°å€</a></li><li><a href=#å®‰è£…-nginx>å®‰è£… nginx</a></li><li><a href=#æ–°å»ºç½‘ç«™ç›®å½•>æ–°å»ºç½‘ç«™ç›®å½•</a></li><li><a href=#é…ç½®-nginx>é…ç½® nginx</a></li><li><a href=#é…ç½®-nginx-http-80-ç«¯å£>é…ç½® Nginx http 80 ç«¯å£</a></li><li><a href=#é…ç½®sslè¯ä¹¦>é…ç½®SSLè¯ä¹¦</a><ol><li><a href=#å®‰è£…-certbot-1>å®‰è£… Certbot</a></li><li><a href=#ä½¿ç”¨-webroot-è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦-1>ä½¿ç”¨ webroot è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦</a></li><li><a href=#ç¼–è¾‘-nginx>ç¼–è¾‘ <code>Nginx</code></a></li><li><a href=#è‡ªåŠ¨ç»­æœŸ-1>è‡ªåŠ¨ç»­æœŸ</a></li></ol></li></ol></li><li><a href=#é…ç½®nginxå¼€å¯ç›®å½•æµè§ˆ>é…ç½®nginxå¼€å¯ç›®å½•æµè§ˆ</a><ol><li><a href=#å®‰è£…-nginx-1>å®‰è£… nginx</a></li><li><a href=#é…ç½®-nginx-1>é…ç½® nginx</a></li><li><a href=#é…ç½®-ssl-è¯ä¹¦>é…ç½® SSL è¯ä¹¦</a><ol><li><a href=#å®‰è£…-certbot-2>å®‰è£… Certbot</a></li><li><a href=#ä½¿ç”¨-webroot-è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦-2>ä½¿ç”¨ webroot è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦</a></li><li><a href=#ç¼–è¾‘-nginx-1>ç¼–è¾‘ <code>Nginx</code></a></li><li><a href=#è‡ªåŠ¨ç»­æœŸ-2>è‡ªåŠ¨ç»­æœŸ</a></li></ol></li></ol></li><li><a href=#debianæ¸…ç†åƒåœ¾>Debianæ¸…ç†åƒåœ¾</a></li><li><a href=#é™„å½•>é™„å½•</a><ol><li><a href=#vsftpdconfæ³¨é‡Š><code>vsftpd.conf</code>æ³¨é‡Š</a></li></ol></li><li><a href=#å‚è€ƒé“¾æ¥>å‚è€ƒé“¾æ¥</a></li></ol></nav></details></aside><section class=article-content><p>ç”±äºä¸€äº›åŸå› ï¼Œä¹‹å‰æœåŠ¡å™¨ä¸Šç”¨çš„Centosæ¢æˆäº†Debianã€‚Debianè™½ç„¶å’ŒCentoså¤§åŒå°å¼‚ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰äº›ä¸œè¥¿è¦è®°ä¸€ä¸‹ã€‚</p><p>{% note warning flat %}
Debian10 ä¸Šå®‰è£…éƒ¨åˆ†åº”ç”¨ï¼Œé€Ÿåº¦å‡ ä¹ä¸º0ï¼Œè‡³å°‘éœ€è¦Debian11ä»¥ä¸Šï¼Œ512Må†…å­˜è¶³å¤Ÿã€‚
{% endnote %}</p><p>{% note primary no-icon %}
æ¨èä½¿ç”¨<a class=link href=https://www.terminal.icu/ target=_blank rel=noopener>terminal</a>(ssh å·¥å…·) ï¼Œ<a class=link href=https://www.hostbuf.com/ target=_blank rel=noopener>finashell</a> ä¹Ÿè¡Œã€‚
{% endnote %}</p><h2 id=debian-æ›´æ–°æŠ¥é”™çš„è§£å†³æ–¹æ³•><strong>Debian æ›´æ–°æŠ¥é”™çš„è§£å†³æ–¹æ³•</strong></h2><p><del>ä¸€å°å¾ˆè€çš„Debianä½¿ç”¨apt-get updateçš„æ—¶å€™ï¼Œå‡ºç°ä¸€ä¸‹æŠ¥é”™ã€‚</del>ï¼ˆéå¿…è¦ï¼Œä¸è¦æ›´æ–°ï¼‰</p><p><strong>è§£å†³æ–¹æ³•</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>apt-get update --allow-releaseinfo-change
</span></span><span class=line><span class=cl>apt-get upgrade
</span></span></code></pre></td></tr></table></div></div><p><strong>æç¤º</strong>ï¼šUnable to fetch some archives, maybe run apt-get update or try with &ndash;fix-missing?</p><p><strong>è§£å†³æ–¹æ³•</strong>ï¼ˆé—®chatgptï¼‰ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>apt-get update --fix-missing
</span></span></code></pre></td></tr></table></div></div><h2 id=è°ƒæ•´æ—¶åŒº>è°ƒæ•´æ—¶åŒº</h2><p>å¦‚æœä½ ä¸çŸ¥é“æœåŠ¡å™¨å½“å‰æ—¶é—´ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼ŒæŸ¥çœ‹å½“å‰æ—¶é—´ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>date -R
</span></span></code></pre></td></tr></table></div></div><p>ä¿®æ”¹å½“å‰æ—¶åŒºä¸ºä¸Šæµ·ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo timedatectl set-timezone Asia/Shanghai
</span></span></code></pre></td></tr></table></div></div><p>å†æ¬¡ä¸å¸¦ä»»ä½•é€‰é¡¹å‚æ•°è°ƒç”¨ timedatectl å‘½ä»¤ï¼Œæ‰“å°ç³»ç»Ÿå½“å‰è®¾ç½®çš„æ—¶åŒºå³å¯ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>timedatectl
</span></span></code></pre></td></tr></table></div></div><h2 id=puttyä¿å­˜ç™»å½•è´¦å·å’Œå¯†ç >puttyä¿å­˜ç™»å½•è´¦å·å’Œå¯†ç </h2><p>1.åˆ›å»ºä¸€ä¸ªæ¡Œé¢å¿«æ·æ–¹å¼ã€‚</p><p>2.è¿›å…¥å¿«æ·æ–¹å¼å±æ€§ï¼Œä¿®æ”¹ç›®æ ‡ï¼Œåœ¨åé¢åŠ ä¸Š -ssh -l ç”¨æˆ·å -pw å¯†ç  -i sessionæ ‡è¯† -P ç«¯å£å· IPåœ°å€ã€‚ä¾‹å¦‚ &ldquo;C:\Program Files\PuTTY\putty.exe&rdquo; -ssh -l root -pw 123456 -i &ldquo;yuanchengserver1&rdquo; -P 22 142.16.187.129</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>E:\è½¯ä»¶\putty.exe -ssh -l root -pw password -i &#34;yansvps&#34; -P 22 ip
</span></span></code></pre></td></tr></table></div></div><p>3.ç„¶åï¼Œé€šè¿‡å¿«æ·æ–¹å¼å°±å¯ä»¥ç›´æ¥ç™»å½•äº†~</p><p>PSï¼š<code>putty</code>æ²¡æœ‰<a class=link href=https://www.hostbuf.com/ target=_blank rel=noopener>FinalShell</a>å¥½ç”¨ã€‚</p><h2 id=viæ— æ³•æ­£å¸¸ä½¿ç”¨><code>vi</code>æ— æ³•æ­£å¸¸ä½¿ç”¨</h2><p>1.å…ˆå®‰è£…<code>vim</code>ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>apt install vim -y
</span></span></code></pre></td></tr></table></div></div><p>2.ä¿®æ”¹<code>vimrc.tiny</code>
<code>vi /etc/vim/vimrc.tiny</code> å°†å…¶ä¸­çš„è¯­å¥ <code>set compatible</code> ä¿®æ”¹ä¸º <code>set nocompatible</code> ï¼Œéå…¼å®¹æ¨¡å¼ä¸‹å¯ä»¥è§£å†³æ–¹å‘é”®å˜ABCDçš„é—®é¢˜ã€‚</p><p>åœ¨åˆšæ‰é‚£å¥è¯åé¢å†åŠ ä¸€å¥ <code>set backspace=2</code> æ¥è§£å†³é€€æ ¼é”®æ— æ³•ä½¿ç”¨çš„é—®é¢˜ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /etc/vim/vimrc.tiny
</span></span><span class=line><span class=cl><span class=nb>set</span> nocompatible
</span></span><span class=line><span class=cl><span class=nb>set</span> <span class=nv>backspace</span><span class=o>=</span><span class=m>2</span>
</span></span></code></pre></td></tr></table></div></div><p>3.å¸è½½<code>vim</code>
vimé¢œè‰²å¤ªèŠ±çœ¼äº†ï¼Œæ‰€ä»¥æœ€åæŠŠå®ƒå¸è½½ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>apt remove vim -y
</span></span></code></pre></td></tr></table></div></div><h2 id=debianå®‰è£…vsftpd>Debianå®‰è£…vsftpd</h2><p>{% note warning no-icon %}
ä¼ è¾“å¤§æ–‡ä»¶æ…¢ï¼Œå¯ä»¥ç”¨transmissionä¸‹è½½å®Œåï¼Œé…åˆnginxå¼€å¯ç›®å½•æµè§ˆï¼Œé…ç½®å¥½SSLä½¿ç”¨ï¼›ä¹Ÿå¯ä»¥ç”¨<a class=link href=https://www.terminal.icu/ target=_blank rel=noopener>terminal</a>(sshå·¥å…·)ä¸Šä¼ <del>ä¸‹è½½</del>æ–‡ä»¶ï¼Œfinashellä¹Ÿè¡Œã€‚
{% endnote %}</p><p>0.å¼€å¯21ç«¯å£ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>iptables -I INPUT <span class=m>5</span> -p tcp --dport <span class=m>21</span> -j ACCEPT
</span></span></code></pre></td></tr></table></div></div><p>1.å®‰è£…å‘½ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt install vsftpd -y
</span></span></code></pre></td></tr></table></div></div><p>2.å®‰è£…è½¯ä»¶åŒ…åï¼Œå¯åŠ¨vsftpdï¼Œå¹¶ä½¿å…¶èƒ½å¤Ÿåœ¨å¼•å¯¼æ—¶è‡ªåŠ¨å¯åŠ¨ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl start vsftpd
</span></span><span class=line><span class=cl>sudo systemctl <span class=nb>enable</span> vsftpd
</span></span></code></pre></td></tr></table></div></div><p>3.ç¼–è¾‘<code>vsftpd.conf</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /etc/vsftpd.conf
</span></span></code></pre></td></tr></table></div></div><hr><p>ï¼ˆ1ï¼‰å»æ‰<code>write_enable=YES</code>å‰é¢çš„æ³¨é‡Šï¼Œä½¿ç”¨æˆ·å¯ä»¥ä¸Šä¼ æ–‡ä»¶ã€‚</p><p>ï¼ˆ2ï¼‰è¦ä»…å…è®¸æŸäº›ç”¨æˆ·ç™»å½•FTPæœåŠ¡å™¨ï¼Œè¯·åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä»¥ä¸‹è¡Œï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>userlist_enable</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl><span class=nv>userlist_file</span><span class=o>=</span>/etc/vsftpd.user_list
</span></span><span class=line><span class=cl><span class=nv>userlist_deny</span><span class=o>=</span>NO
</span></span></code></pre></td></tr></table></div></div><p>å¯ç”¨æ­¤é€‰é¡¹åï¼Œæ‚¨éœ€è¦é€šè¿‡å‘<code>/etc/vsftpd.user_list</code>æ–‡ä»¶æ·»åŠ ç”¨æˆ·åï¼ˆæ¯è¡Œä¸€ä¸ªç”¨æˆ·ï¼‰æ˜ç¡®æŒ‡å®šå“ªäº›ç”¨æˆ·èƒ½å¤Ÿç™»å½•ã€‚</p><p>ï¼ˆ3ï¼‰æ·»åŠ FTPç”¨æˆ·ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo adduser admin
</span></span><span class=line><span class=cl>sudo passwd admin
</span></span></code></pre></td></tr></table></div></div><p>ï¼ˆ4ï¼‰å°†ç”¨æˆ·æ·»åŠ åˆ°å…è®¸çš„ FTP ç”¨æˆ·åˆ—è¡¨ä¸­ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;admin&#34;</span> <span class=p>|</span> sudo tee -a /etc/vsftpd.user_list
</span></span></code></pre></td></tr></table></div></div><p>ï¼ˆ5ï¼‰å…³é—­é˜²ç«å¢™</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>systemctl stop firewalld.service
</span></span><span class=line><span class=cl>systemctl disable firewalld.service 
</span></span></code></pre></td></tr></table></div></div><p>ï¼ˆ6ï¼‰<strong>ä½¿ ftp ç”¨æˆ·<code>admin</code>å¯ä»¥ä¸Šä¼ æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo chmod <span class=m>755</span> /var/www/speak
</span></span><span class=line><span class=cl>sudo chown -R admin: /var/www/speak
</span></span></code></pre></td></tr></table></div></div><p>ï¼ˆ7ï¼‰é‡å¯ vsftpd æœåŠ¡</p><p>ä¿å­˜æ–‡ä»¶å¹¶é‡æ–°å¯åŠ¨ vsftpd æœåŠ¡ï¼Œä»¥ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo systemctl restart vsftpd
</span></span></code></pre></td></tr></table></div></div><hr><p>4.è®¾ç½®å…è®¸rootç™»å½•</p><ul><li>å°†<code>root</code>æ·»åŠ åˆ°å…è®¸çš„FTPç”¨æˆ·åˆ—è¡¨ä¸­ï¼š</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;root&#34;</span> <span class=p>|</span> sudo tee -a /etc/vsftpd/user_list
</span></span></code></pre></td></tr></table></div></div><ul><li>ä¿®æ”¹<code>/etc/vsftpd/user_list</code>å’Œ<code>/etc/ftpusers</code>ä¸¤ä¸ªè®¾ç½®æ–‡ä»¶è„šæœ¬ï¼Œå°†rootè´¦æˆ·å‰åŠ ä¸Š<code>#</code>å·å˜ä¸ºæ³¨é‡Š</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /etc/vsftpd/user_list
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /etc/ftpusers
</span></span></code></pre></td></tr></table></div></div><p>5.é‡å¯vsftpdæœåŠ¡</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl restart vsftpd
</span></span></code></pre></td></tr></table></div></div><p>6.è§£å†³Nginxå‡ºç°403 forbidden</p><p>jå‡è®¾ç½‘ç«™æ ¹ç›®å½•åœ¨<code>/var/www/blog/</code>ï¼Œåˆ™æ‰§è¡Œï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>chmod -R <span class=m>777</span> /var/www
</span></span></code></pre></td></tr></table></div></div><p>7.é™åˆ¶ç”¨æˆ·ç™»å½•ï¼ˆæœªå¯ç”¨ï¼‰</p><p>è¦ä»…å…è®¸æŸäº›ç”¨æˆ·ç™»å½•FTPæœåŠ¡å™¨ï¼Œè¯·åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä»¥ä¸‹å‡ è¡Œï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /etc/vsftpd.conf
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-diff data-lang=diff><span class=line><span class=cl>userlist_enable=YES
</span></span><span class=line><span class=cl>userlist_file=/etc/vsftpd/user_list
</span></span><span class=line><span class=cl>userlist_deny=NO
</span></span></code></pre></td></tr></table></div></div><p>å¯ç”¨æ­¤é€‰é¡¹åï¼Œæ‚¨éœ€è¦é€šè¿‡å°†ç”¨æˆ·åæ·»åŠ åˆ°/etc/vsftpd.user_listæ–‡ä»¶ï¼ˆæ¯è¡Œä¸€ä¸ªç”¨æˆ·ï¼‰æ¥æ˜ç¡®æŒ‡å®šå“ªäº›ç”¨æˆ·å¯ä»¥ç™»å½•ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;admin&#34;</span> <span class=p>|</span> sudo tee -a /etc/vsftpd/user_list
</span></span></code></pre></td></tr></table></div></div><h2 id=å¼€å¯80443ç«¯å£>å¼€å¯80ã€443ç«¯å£</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>iptables -I INPUT -p tcp --dport 443 -j ACCEPT
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>service iptables save
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>service iptables restart
</span></span></code></pre></td></tr></table></div></div><h2 id=debian-9ä¸Šå®‰è£…å’Œé…ç½®postfixé‚®ä»¶>Debian 9ä¸Šå®‰è£…å’Œé…ç½®Postfixé‚®ä»¶</h2><p>1.å®‰è£… mailtuils:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt install mailutils -y
</span></span></code></pre></td></tr></table></div></div><p>2.å®‰è£…postfixåç¼€:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt install postfix
</span></span></code></pre></td></tr></table></div></div><p>åœ¨å®‰è£…è¿‡ç¨‹å³å°†ç»“æŸæ—¶ï¼Œæ‚¨å°†çœ‹åˆ°ä¸€ä¸ªç±»ä¼¼äºä¸‹å›¾ä¸­çš„çª—å£çš„çª—å£ã€‚é»˜è®¤é€‰é¡¹æ˜¯<code>Internet Site</code>ã€‚è¿™æ˜¯æœ¬æ•™ç¨‹çš„æ¨èé€‰é¡¹ï¼Œè¯·æŒ‰<code>TAB</code>ï¼Œç„¶åæŒ‰<code>ENTER</code>ã€‚
ä¹‹åï¼Œæ‚¨å°†è·å¾—å¦ä¸€ä¸ªçª—å£ï¼Œå°±åƒä¸‹ä¸€ä¸ªå›¾åƒä¸­çš„çª—å£ä¸€æ ·ã€‚è¯¥ç³»ç»Ÿé‚®ä»¶åç§°åº”è¯¥æ˜¯ä¸€æ ·çš„ï¼Œä½ åˆ†é…ç»™æœåŠ¡å™¨ï¼Œå½“ä½ åœ¨åˆ›é€ å®ƒçš„åå­—ã€‚å¦‚æœå®ƒæ˜¾ç¤ºå­åŸŸ<code>subdomain.example.com</code>ï¼Œè¯·å°†å…¶æ›´æ”¹ä¸º<code>ust example.com</code>ã€‚å®Œæˆåï¼ŒæŒ‰<code>TAB</code>ï¼Œç„¶å<code>ENTER</code>ã€‚</p><p>3.é…ç½®Postfix</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /etc/postfix/main.cf
</span></span></code></pre></td></tr></table></div></div><p>æ‰“å¼€æ–‡ä»¶åï¼Œå‘ä¸‹æ»šåŠ¨ï¼Œç›´åˆ°çœ‹åˆ°ä»¥ä¸‹éƒ¨åˆ†ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>. . .
</span></span><span class=line><span class=cl><span class=nv>mailbox_size_limit</span> <span class=o>=</span> <span class=m>0</span>
</span></span><span class=line><span class=cl><span class=nv>recipient_delimiter</span> <span class=o>=</span> +
</span></span><span class=line><span class=cl><span class=nv>inet_interfaces</span> <span class=o>=</span> all
</span></span><span class=line><span class=cl>. . .
</span></span></code></pre></td></tr></table></div></div><p>å°†è¯»å–çš„inet_interfaces = allè¡Œæ›´æ”¹ä¸ºinet_interfaces = loopback-onlyï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>. . .
</span></span><span class=line><span class=cl><span class=nv>mailbox_size_limit</span> <span class=o>=</span> <span class=m>0</span>
</span></span><span class=line><span class=cl><span class=nv>recipient_delimiter</span> <span class=o>=</span> +
</span></span><span class=line><span class=cl><span class=nv>inet_interfaces</span> <span class=o>=</span> loopback-only
</span></span><span class=line><span class=cl>. . .
</span></span></code></pre></td></tr></table></div></div><p>æ‚¨éœ€è¦ä¿®æ”¹çš„å¦ä¸€ä¸ªæŒ‡ä»¤æ˜¯mydestinationï¼Œç”¨äºæŒ‡å®šé€šè¿‡local_transporté‚®ä»¶ä¼ é€’ä¼ è¾“ä¼ é€’çš„åŸŸåˆ—è¡¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå€¼ç±»ä¼¼äºï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>. . .
</span></span><span class=line><span class=cl><span class=nv>mydestination</span> <span class=o>=</span> <span class=nv>$myhostname</span>, example.com, localhost.com, , localhost
</span></span><span class=line><span class=cl>. . .
</span></span></code></pre></td></tr></table></div></div><p>æ­¤æŒ‡ä»¤çš„å»ºè®®é»˜è®¤å€¼åœ¨ä¸‹é¢çš„ä»£ç å—ä¸­ç»™å‡ºï¼Œå› æ­¤è¯·ä¿®æ”¹ä»¥åŒ¹é…ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>. . .
</span></span><span class=line><span class=cl><span class=nv>mydestination</span> <span class=o>=</span> <span class=nv>$myhostname</span>, localhost.<span class=nv>$your_domain</span>, <span class=nv>$your_domain</span>
</span></span><span class=line><span class=cl>. . .
</span></span></code></pre></td></tr></table></div></div><p>4.é‡å¯Postfixã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl restart postfix
</span></span></code></pre></td></tr></table></div></div><p>5.æµ‹è¯•SMTPæœåŠ¡å™¨</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;This is the body of the email&#34;</span> <span class=p>|</span> mail -s <span class=s2>&#34;This is the subject line&#34;</span> your_email_address
</span></span></code></pre></td></tr></table></div></div><p>6.debian å½»åº•åˆ é™¤posfix ç„¶åé‡æ–°å®‰è£…</p><p>å¦‚æœå®‰è£…å‡ºé”™ï¼Œå…ˆå½»åº•åˆ é™¤posfix ç„¶åé‡æ–°å®‰è£…</p><ul><li>å…³é—­ service postfix start</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>service postfix  stop
</span></span></code></pre></td></tr></table></div></div><ul><li>å¸è½½postfix</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>apt-get remove  postfix -y
</span></span><span class=line><span class=cl>dpkg --purge postfix
</span></span><span class=line><span class=cl>apt autoremove
</span></span></code></pre></td></tr></table></div></div><ul><li>æŸ¥çœ‹é…ç½®æ–‡ä»¶æ˜¯å¦å·²ç»åˆ é™¤</li></ul><p>æŸ¥çœ‹ /etc/postfixæ˜¯å¦å·²ç»åˆ é™¤æ‰</p><h2 id=å®‰è£…transmission><del>å®‰è£…Transmission</del></h2><p>{% note primary no-icon %}
é€Ÿåº¦ä¸åŠä¸‹é¢çš„qbittorrent
{% endnote %}</p><p>1.å®‰è£…</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt-get update -y
</span></span><span class=line><span class=cl>sudo apt-get install transmission transmission-daemon -y
</span></span></code></pre></td></tr></table></div></div><p>2.å¯åŠ¨&å…³é—­</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>systemctl start transmission-daemon
</span></span><span class=line><span class=cl>systemctl enable transmission-daemon
</span></span><span class=line><span class=cl>systemctl stop transmission-daemon
</span></span></code></pre></td></tr></table></div></div><p>3.ä¿®æ”¹é…ç½®ï¼ˆå…³é—­åå†ä¿®æ”¹é…ç½®ï¼‰</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>sudo</span> <span class=n>vi</span> <span class=o>/</span><span class=k>var</span><span class=o>/</span><span class=n>lib</span><span class=o>/</span><span class=n>transmission</span><span class=o>-</span><span class=n>daemon</span><span class=o>/</span><span class=n>info</span><span class=o>/</span><span class=n>settings</span><span class=o>.</span><span class=n>json</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-diff data-lang=diff><span class=line><span class=cl>{
</span></span><span class=line><span class=cl>    &#34;download-dir&#34;: &#34;/home/admin&#34;,
</span></span><span class=line><span class=cl>    ......
</span></span><span class=line><span class=cl>    &#34;rpc-authentication-required&#34;: true
</span></span><span class=line><span class=cl>    &#34;rpc-bind-address&#34;: &#34;0.0.0.0&#34;, 
</span></span><span class=line><span class=cl>    &#34;rpc-enabled&#34;: true, 
</span></span><span class=line><span class=cl>    &#34;rpc-password&#34;: &#34;123456&#34;, 
</span></span><span class=line><span class=cl>    &#34;rpc-port&#34;: 9091, 
</span></span><span class=line><span class=cl>    &#34;rpc-url&#34;: &#34;/transmission/&#34;, 
</span></span><span class=line><span class=cl>    &#34;rpc-username&#34;: &#34;transmission&#34;, 
</span></span><span class=line><span class=cl>    &#34;rpc-whitelist&#34;: &#34;*&#34;, 
</span></span><span class=line><span class=cl>    &#34;rpc-whitelist-enabled&#34;: true, 
</span></span><span class=line><span class=cl>    ......
</span></span></code></pre></td></tr></table></div></div><p><strong>ä¸»è¦æ˜¯<code>rpc-whitelist</code>ã€<code>ç”¨æˆ·å</code>ã€<code>å¯†ç </code>å’Œ<code> download-dirï¼ˆå¯é€‰ï¼‰</code></strong></p><p>å¦‚æœä¿®æ”¹ä¸‹è½½ç›®å½•ï¼Œå°†ä¸‹è½½ç›®å½•æ”¹æˆï¼š &ldquo;download-dir&rdquo;: &ldquo;/home/admin&rdquo;ï¼Œé‚£ä¹ˆè¿˜è¦èµ‹äºˆ<code>debian-transmission</code>è¯»å†™<code>/home/admin</code>çš„æƒé™ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo chmod 755 /home/admin
</span></span><span class=line><span class=cl>sudo chown -R debian-transmission: /home/admin
</span></span></code></pre></td></tr></table></div></div><p>æ‰§è¡Œ<code>sudo vi /etc/init.d/transmission-daemon</code>å¯ä»¥çœ‹åˆ°è¿è¡Œç”¨æˆ·ã€‚</p><p>4.ç¾åŒ–WEB UIï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>wget https://github.com/ronggang/transmission-web-control/raw/master/release/install-tr-control-cn.sh
</span></span><span class=line><span class=cl>bash install-tr-control-cn.sh
</span></span></code></pre></td></tr></table></div></div><h3 id=å®‰è£…nginx>å®‰è£…nginx</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt install nginx -y
</span></span><span class=line><span class=cl>sudo systemctl start nginx
</span></span><span class=line><span class=cl>sudo systemctl <span class=nb>enable</span> nginx
</span></span></code></pre></td></tr></table></div></div><h3 id=é…ç½®nginx>é…ç½®nginx</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=l>server {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>listen  80 ;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>listen [::]:80;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>root /home/admin;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>server_name example.com;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>access_log  /var/log/nginx/hexo_access.log;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>error_log   /var/log/nginx/hexo_error.log;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>error_page 404 =  /404.html;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>location ~* ^.+\.(ico|gif|jpg|jpeg|png)$ {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>root /home/admin;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>access_log   off;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>expires      1d;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>location ~* ^.+\.(css|js|txt|xml|swf|wav)$ {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>root /home/admin;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>access_log   off;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>expires      10m;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>location / {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>root /home/admin;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>if (-f $request_filename) {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>rewrite ^/(.*)$  /$1 break;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>location /nginx_status {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>stub_status on;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>access_log off;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>autoindex on;                        </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>autoindex_exact_size off;            </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>autoindex_localtime on;              </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>charset utf-8,gbk;</span><span class=w>
</span></span></span><span class=line><span class=cl>}<span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=debian11é…ç½®sslè¯ä¹¦>debian11é…ç½®SSLè¯ä¹¦</h3><h4 id=å®‰è£…-certbot>å®‰è£… Certbot</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt-get install letsencrypt -y
</span></span></code></pre></td></tr></table></div></div><h4 id=ä½¿ç”¨-webroot-è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦>ä½¿ç”¨ webroot è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>certbot certonly --webroot -w /home/admin -d example.com -m 455343442@qq.com --agree-tos
</span></span></code></pre></td></tr></table></div></div><h4 id=ç¼–è¾‘nginx>ç¼–è¾‘<code>Nginx</code></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>vi /etc/nginx/conf.d/ftp.conf
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=l>server {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>listen 80;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>listen [::]:80;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>root /home/admin;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>server_name  example.com;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>listen 443 ssl;</span><span class=w> </span><span class=c># managed by Certbot</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># RSA certificate</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;</span><span class=w> </span><span class=c># managed by Certbot</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;</span><span class=w> </span><span class=c># managed by Certbot</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Redirect non-https traffic to https</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>if ($scheme != &#34;https&#34;) {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>return 301 https://$host$request_uri;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>}<span class=w> </span><span class=c># managed by Certbot</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	
</span></span></span><span class=line><span class=cl><span class=w>	  </span><span class=l>autoindex on;                        </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=l>autoindex_exact_size off;            </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=l>autoindex_localtime on;              </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=l>charset utf-8,gbk;</span><span class=w>
</span></span></span><span class=line><span class=cl>}<span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>æµ‹è¯•é…ç½®æ˜¯å¦æœ‰é—®é¢˜ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>nginx -t
</span></span></code></pre></td></tr></table></div></div><p>é‡å¯ Nginx ç”Ÿæ•ˆï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>systemctl restart nginx
</span></span></code></pre></td></tr></table></div></div><h4 id=è‡ªåŠ¨ç»­æœŸ>è‡ªåŠ¨ç»­æœŸ</h4><p>Letâ€™s Encrypt çš„è¯ä¹¦æœ‰æ•ˆæœŸä¸º 90 å¤©ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡ crontab å®šæ—¶è¿è¡Œå‘½ä»¤æ›´æ–°è¯ä¹¦ã€‚</p><p>å…ˆè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æµ‹è¯•è¯ä¹¦çš„è‡ªåŠ¨æ›´æ–°ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>certbot renew --dry-run
</span></span></code></pre></td></tr></table></div></div><p>å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œå°±å¯ä»¥ç¼–è¾‘ crontab å®šæœŸè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>crontab -e
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>30 2 * */2 * /usr/bin/certbot renew --quiet &amp;&amp; /bin/systemctl restart nginx
</span></span></code></pre></td></tr></table></div></div><p>æŸ¥çœ‹è¯ä¹¦æœ‰æ•ˆæœŸçš„å‘½ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>openssl x509 -noout -dates -in /etc/letsencrypt/live/example.com/cert.pem
</span></span></code></pre></td></tr></table></div></div><h2 id=å®‰è£…qbittorrent-nox>å®‰è£…<code>qbittorrent-nox</code></h2><p>**1.**å®‰è£…qbittorrent-nox</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=l>apt update </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=l>apt install qbittorrent-nox -y</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>2.</strong> æ–°å»ºsystemdæ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /etc/systemd/system/qbittorrent-nox.service
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>Unit<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>Description</span><span class=o>=</span>qBittorrent Command Line Client
</span></span><span class=line><span class=cl><span class=nv>After</span><span class=o>=</span>network.target
</span></span><span class=line><span class=cl><span class=o>[</span>Service<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>User</span><span class=o>=</span>root
</span></span><span class=line><span class=cl><span class=nv>ExecStart</span><span class=o>=</span>/usr/bin/qbittorrent-nox
</span></span><span class=line><span class=cl><span class=nv>Restart</span><span class=o>=</span>on-failure
</span></span><span class=line><span class=cl><span class=o>[</span>Install<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>WantedBy</span><span class=o>=</span>multi-user.target
</span></span></code></pre></td></tr></table></div></div><p><strong>3.</strong> å¯ç”¨è¿›ç¨‹å®ˆæŠ¤ï¼Œç›´æ¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°±è¡Œäº†ï¼Œæœ€åä¸€æ¡å‘½ä»¤æ‰§è¡Œå®Œï¼Œå‡ºç°<code>active</code>å…³é”®å­—å°±è¯´æ˜ä¸€åˆ‡éƒ½å¦‚é¢„æœŸçš„é‚£æ ·è·‘èµ·æ¥äº†ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>systemctl</span> <span class=n>daemon</span><span class=o>-</span><span class=n>reload</span>
</span></span><span class=line><span class=cl><span class=n>systemctl</span> <span class=n>start</span> <span class=n>qbittorrent</span><span class=o>-</span><span class=n>nox</span>
</span></span><span class=line><span class=cl><span class=n>systemctl</span> <span class=n>enable</span> <span class=n>qbittorrent</span><span class=o>-</span><span class=n>nox</span>
</span></span><span class=line><span class=cl><span class=n>systemctl</span> <span class=n>status</span> <span class=n>qbittorrent</span><span class=o>-</span><span class=n>nox</span>
</span></span></code></pre></td></tr></table></div></div><p>è‡³æ­¤ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥æœåŠ¡å™¨çš„IPå’Œqbittorrent-noxçš„ç«¯å£å°±å¯ä»¥è¿›å…¥äº†ï¼Œä¾‹å¦‚<a class=link href=http://1.1.1.1:8080/ target=_blank rel=noopener>http://1.1.1.1:8080</a>ï¼Œè¿™é‡Œçš„1.1.1.1æ˜¯æœåŠ¡å™¨çš„IPï¼Œ8080æ˜¯åˆšæ‰è¿›ç¨‹å®ˆæŠ¤æ–‡ä»¶ä¸­å†™å…¥çš„ç«¯å£ã€‚ç”¨æˆ·åæ˜¯adminï¼Œç”¨æˆ·å¯†ç ï¼šadminadminã€‚
å¼ºçƒˆå»ºè®®è¿›å»ä¹‹åï¼Œç«‹é©¬ä¿®æ”¹ç”¨æˆ·åå’Œç”¨æˆ·å¯†ç ï¼ï¼ï¼å…·ä½“ä½ç½®åœ¨<code>tool>options>webui</code>è¿™é‡Œï¼Œè¿˜å¯ä»¥ä¿®æ”¹æˆä¸­æ–‡ã€‚</p><p><strong>4.</strong> ä¿®æ”¹ä¸‹è½½ç›®å½•å’Œè®¾ç½®æƒé™</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>mkdir /home/admin
</span></span><span class=line><span class=cl>chmod 777 /home/admin
</span></span></code></pre></td></tr></table></div></div><p>é‡å¯qbittorrent-noxï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>systemctl</span> <span class=n>daemon</span><span class=o>-</span><span class=n>reload</span>
</span></span></code></pre></td></tr></table></div></div><p>5.æœ€åæŠŠä¸‹è½½è·¯å¾„è®¾ç½®åˆ°<code>/home/admin</code>å°±OKäº†ï¼</p><h2 id=qbittorrent-noxå¿˜è®°å¯†ç ><code>qbittorrent-nox</code>å¿˜è®°å¯†ç </h2><p><code>cd /</code></p><p><code>find -name qBittorrent.conf</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>systemctl stop qbittorrent-nox
</span></span><span class=line><span class=cl>vi ./.config/qBittorrent/qBittorrent.conf
</span></span></code></pre></td></tr></table></div></div><p>æŠŠé…ç½®ä¸­çš„<code>Password_PBKDF2</code>åˆ é™¤è¿™ä¸€è¡Œ(viæŒ‰<code>dd</code>)</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>systemctl start qbittorrent-nox
</span></span></code></pre></td></tr></table></div></div><h2 id=nginxåä»£qbittorrent-noxçš„web-gui>Nginxåä»£qbittorrent-noxçš„Web-GUI</h2><h3 id=ä¿®æ”¹ç›‘å¬åœ°å€>ä¿®æ”¹ç›‘å¬åœ°å€</h3><p>http+éæ ‡ç«¯å£ï¼Œæ€»è®©äººå¼ºè¿«ç—‡çŠ¯äº†ï¼Œæ‰€ä»¥æäº†ä¸ªSSLå’ŒNginxåä»£ï¼Œè®©qbittorrent-noxçš„Web-GUIçœ‹èµ·æ¥èˆ’æœä¸€äº›ã€‚
é¦–å…ˆï¼Œåœ¨<code>tool>options>webui</code>ä¸­ï¼Œå°†ç›‘å¬çš„IPåœ°å€ä»<code>*</code>æ”¹æˆ<code>127.0.0.1</code>ï¼Œç„¶åæ‰§è¡Œé‡å¯å‘½ä»¤<code>systemctl restart qbittorrent-nox</code>ä»¥ç”Ÿæ•ˆã€‚è¿™æ ·åªæœ‰æœåŠ¡å™¨æœ¬åœ°æ‰èƒ½è®¿é—®ï¼Œå…¶ä»–éƒ½ä¸è¡Œ(ç½‘é¡µæ‰“ä¸å¼€ï¼Œå¾…åé¢é…ç½®å¥½åŸŸåæ‰èƒ½è®¿é—®)</p><h3 id=å®‰è£…-nginx>å®‰è£… nginx</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=l>sudo apt install nginx -y</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=l>sudo systemctl start nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=l>sudo systemctl enable nginx</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=æ–°å»ºç½‘ç«™ç›®å½•>æ–°å»ºç½‘ç«™ç›®å½•</h3><p>ä¸ºäº†ä¾¿äºç”³è¯·è¯ä¹¦ï¼Œéœ€è¦æ–°å»ºåä»£ç½‘ç«™ç›®å½•ï¼Œ<strong>ä¸€å®šä¸è¦åœ¨<code>/root</code>ç›®å½•ä¸Šæ–°å»º</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>mkdir</span> <span class=o>-</span><span class=n>p</span> <span class=o>/</span><span class=k>var</span><span class=o>/</span><span class=n>www</span><span class=o>/</span><span class=n>qt</span>
</span></span><span class=line><span class=cl><span class=n>cp</span> <span class=o>/</span><span class=n>usr</span><span class=o>/</span><span class=n>share</span><span class=o>/</span><span class=n>nginx</span><span class=o>/</span><span class=n>html</span><span class=o>/*</span> <span class=o>/</span><span class=k>var</span><span class=o>/</span><span class=n>www</span><span class=o>/</span><span class=n>qt</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=é…ç½®-nginx>é…ç½® nginx</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>vi /etc/nginx/conf.d/qt.conf
</span></span></code></pre></td></tr></table></div></div><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå°†<code>server_name _;</code>ä¸­çš„<code>_</code>æ”¹æˆåŸŸåï¼Œåœ¨<code>location /</code>ä¸­æ³¨é‡Šæ‰<code>try_files $uri $uri/ =404;</code>ï¼ˆdebian11ä¸Šæ²¡æœ‰è¿™ä¸€è¡Œï¼Œä¸ç”¨æ³¨é‡Šï¼‰ï¼Œå¹¶å°†ä»¥ä¸‹å†…å®¹å†™å…¥<code>location /å­—æ®µ</code>ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>                </span><span class=l>proxy_pass http://127.0.0.1:8080/;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=l>proxy_http_version 1.1;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=l>proxy_set_header X-Forwarded-Host $http_host;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=l>proxy_set_header X-Real-IP $remote_addr;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=l>proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=l>proxy_set_header X-Forwarded-Proto $scheme;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=l>http2_push_preload on;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=é…ç½®-nginx-http-80-ç«¯å£>é…ç½® Nginx http 80 ç«¯å£</h3><p>ä¸ºäº†ä½¿ä¸‹é¢ç”³è¯·è¯ä¹¦æ—¶èƒ½è®¿é—® <a class=link href=http://bore.vip/.well-known/acme-challenge/ target=_blank rel=noopener>http://bore.vip/.well-known/acme-challenge/</a>â€¦ è¿™ä¸ªé“¾æ¥ï¼Œé¦–å…ˆé…ç½®å¥½http://bore.vip/.well-known/acme-challenge/â€¦è¿™ä¸ªé“¾æ¥ï¼Œé¦–å…ˆé…ç½®å¥½Nginx 80 ç«¯å£ï¼Œä¿è¯ä¸Šè¿°ç½‘å€èƒ½é¡ºåˆ©è®¿é—®ï¼Œä»è€Œé¡ºåˆ©ç”³è¯·è¯ä¹¦ã€‚æ‰€ä»¥åœ¨ nginx é…ç½®çš„ server èŠ‚ç‚¹ä¸‹æ·»åŠ ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>location ~ /.well-known {
</span></span><span class=line><span class=cl>    allow all;
</span></span><span class=line><span class=cl>}
</span></span></code></pre></td></tr></table></div></div><p>æœ€ç»ˆä¿®æ”¹ä¸ºï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=l>server {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>listen       80;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=l>root   /var/www/qt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>index index.html index.htm index.nginx-debian.html;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>server_name  qt.bore.vip;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c>#access_log  /var/log/nginx/host.access.log  main;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>location / {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=l>proxy_pass http://127.0.0.1:8080/;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>proxy_http_version 1.1;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>proxy_set_header X-Forwarded-Host $http_host;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>proxy_set_header X-Real-IP $remote_addr;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>proxy_set_header X-Forwarded-Proto $scheme;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>http2_push_preload on;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>location ~ /.well-known {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>allow all;</span><span class=w>
</span></span></span><span class=line><span class=cl>}<span class=w>
</span></span></span><span class=line><span class=cl>}<span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>æµ‹è¯•é…ç½®æ˜¯å¦æœ‰é—®é¢˜ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>nginx -t
</span></span></code></pre></td></tr></table></div></div><p>é‡å¯ Nginx ç”Ÿæ•ˆï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>systemctl restart nginx
</span></span></code></pre></td></tr></table></div></div><h3 id=é…ç½®sslè¯ä¹¦>é…ç½®SSLè¯ä¹¦</h3><p>å®é™…ä¸Šï¼Œæˆ‘è¿˜æ·»åŠ äº†SSLï¼ˆéœ€è¦å…ˆæ³¨é‡Šæ‰serverä¸­çš„<code>listen 80 default_server;</code>å’Œ<code>listen [::]:80 default_server;</code>ä¸¤è¡Œ
ï¼‰ã€‚æ•´ä½“ç¤ºä¾‹å¦‚ä¸‹ï¼Œå°±ä¸ç»†è¯´äº†ï¼Œå¯ä»¥å¯¹ç…§ç€è‡ªå·±é…ç½®æ–‡ä»¶ä¿®æ”¹ã€‚å¦‚æœä¸ç†Ÿæ‚‰çš„ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨<code>Let's Encrypt</code>ç­‰ä¸€é”®SSL/TLSç¨‹åºæ·»åŠ SSLåŠŸèƒ½ã€‚</p><h4 id=å®‰è£…-certbot-1>å®‰è£… Certbot</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo apt-get install letsencrypt -y
</span></span></code></pre></td></tr></table></div></div><h4 id=ä½¿ç”¨-webroot-è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦-1>ä½¿ç”¨ webroot è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>certbot</span> <span class=n>certonly</span> <span class=o>--</span><span class=n>webroot</span> <span class=o>-</span><span class=n>w</span> <span class=o>/</span><span class=k>var</span><span class=o>/</span><span class=n>www</span><span class=o>/</span><span class=n>qt</span> <span class=o>-</span><span class=n>d</span> <span class=n>qt</span><span class=o>.</span><span class=n>bore</span><span class=o>.</span><span class=n>vip</span> <span class=o>-</span><span class=n>m</span> <span class=mi>455343442</span><span class=err>@</span><span class=n>qq</span><span class=o>.</span><span class=n>com</span> <span class=o>--</span><span class=n>agree</span><span class=o>-</span><span class=n>tos</span>
</span></span></code></pre></td></tr></table></div></div><hr><p>å¦‚æœæç¤º404é”™è¯¯ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>sudo</span> <span class=n>chmod</span> <span class=mi>755</span> <span class=o>/</span><span class=k>var</span><span class=o>/</span><span class=n>www</span><span class=o>/</span><span class=n>qt</span>
</span></span><span class=line><span class=cl><span class=n>systemctl</span> <span class=n>restart</span> <span class=n>nginx</span>
</span></span><span class=line><span class=cl><span class=n>systemctl</span> <span class=n>restart</span> <span class=n>qbittorrent</span><span class=o>-</span><span class=n>nox</span>
</span></span></code></pre></td></tr></table></div></div><p>RNå¯èƒ½è¦å¤šç”³è¯·å‡ éè¯ä¹¦ï¼Œbwgä¸€æ¬¡å°±æˆåŠŸäº†ã€‚</p><hr><h4 id=ç¼–è¾‘-nginx>ç¼–è¾‘ <code>Nginx</code></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>vi /etc/nginx/conf.d/qt.conf
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=l>server {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>listen       80;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>server_name  qt.bore.vip;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=l>root /var/www/qt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=c># Add index.php to the list if you are using PHP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=l>index index.html index.htm index.nginx-debian.html;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c>#access_log  /var/log/nginx/host.access.log  main;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>location / {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=l>proxy_pass http://127.0.0.1:8080/;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>proxy_http_version 1.1;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>proxy_set_header X-Forwarded-Host $http_host;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>proxy_set_header X-Real-IP $remote_addr;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>proxy_set_header X-Forwarded-Proto $scheme;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>http2_push_preload on;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>location ~ /.well-known {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>allow all;</span><span class=w>
</span></span></span><span class=line><span class=cl>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>listen 443 ssl;</span><span class=w> </span><span class=c># managed by Certbot</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># RSA certificate</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>ssl_certificate /etc/letsencrypt/live/qt.bore.vip/fullchain.pem;</span><span class=w> </span><span class=c># managed by Certbot</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>ssl_certificate_key /etc/letsencrypt/live/qt.bore.vip/privkey.pem;</span><span class=w> </span><span class=c># managed by Certbot</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	
</span></span></span><span class=line><span class=cl><span class=w>	    </span><span class=c># Redirect non-https traffic to https</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>if ($scheme != &#34;https&#34;) {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>return 301 https://$host$request_uri;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>}<span class=w> </span><span class=c># managed by Certbot</span><span class=w>
</span></span></span><span class=line><span class=cl>}<span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>æµ‹è¯•é…ç½®æ˜¯å¦æœ‰é—®é¢˜ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>nginx -t
</span></span></code></pre></td></tr></table></div></div><p>é‡å¯ Nginx ç”Ÿæ•ˆï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>systemctl restart nginx
</span></span></code></pre></td></tr></table></div></div><h4 id=è‡ªåŠ¨ç»­æœŸ-1>è‡ªåŠ¨ç»­æœŸ</h4><p>Letâ€™s Encrypt çš„è¯ä¹¦æœ‰æ•ˆæœŸä¸º 90 å¤©ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡ crontab å®šæ—¶è¿è¡Œå‘½ä»¤æ›´æ–°è¯ä¹¦ã€‚</p><p>å…ˆè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æµ‹è¯•è¯ä¹¦çš„è‡ªåŠ¨æ›´æ–°ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>certbot renew --dry-run
</span></span></code></pre></td></tr></table></div></div><p>å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œå°±å¯ä»¥ç¼–è¾‘ crontab å®šæœŸè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>crontab -e
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>30 2 * */2 * /usr/bin/certbot renew --quiet &amp;&amp; /bin/systemctl restart nginx
</span></span></code></pre></td></tr></table></div></div><p>æŸ¥çœ‹è¯ä¹¦æœ‰æ•ˆæœŸçš„å‘½ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>openssl x509 -noout -dates -in /etc/letsencrypt/live/qt.bore.vip/cert.pem
</span></span></code></pre></td></tr></table></div></div><h2 id=é…ç½®nginxå¼€å¯ç›®å½•æµè§ˆ>é…ç½®nginxå¼€å¯ç›®å½•æµè§ˆ</h2><p>å°†qtä¸‹è½½ç›®å½•ç»“åˆnginxå¼€å¯ç›®å½•æµè§ˆï¼Œä¾¿äºä¸‹è½½ã€‚</p><h3 id=å®‰è£…-nginx-1>å®‰è£… nginx</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo apt install nginx -y
</span></span><span class=line><span class=cl>sudo systemctl start nginx
</span></span><span class=line><span class=cl>sudo systemctl enable nginx
</span></span></code></pre></td></tr></table></div></div><h3 id=é…ç½®-nginx-1>é…ç½® nginx</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>vi /etc/nginx/conf.d/ftp.conf
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=l>server {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>listen  80 ;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>listen [::]:80;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>root /home/admin;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>server_name ftp.bore.vip;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>access_log  /var/log/nginx/hexo_access.log;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>error_log   /var/log/nginx/hexo_error.log;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>error_page 404 =  /404.html;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>location ~* ^.+\.(ico|gif|jpg|jpeg|png)$ {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>root /home/admin;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>access_log   off;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>expires      1d;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>location ~* ^.+\.(css|js|txt|xml|swf|wav)$ {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>root /home/admin;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>access_log   off;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>expires      10m;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>location / {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>root /home/admin;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>if (-f $request_filename) {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>rewrite ^/(.*)$  /$1 break;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>location /nginx_status {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>stub_status on;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>access_log off;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>autoindex on;                        </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>autoindex_exact_size off;            </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>autoindex_localtime on;              </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>charset utf-8,gbk;</span><span class=w>
</span></span></span><span class=line><span class=cl>}<span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=é…ç½®-ssl-è¯ä¹¦>é…ç½® SSL è¯ä¹¦</h3><h4 id=å®‰è£…-certbot-2>å®‰è£… Certbot</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo apt-get install letsencrypt -y
</span></span></code></pre></td></tr></table></div></div><h4 id=ä½¿ç”¨-webroot-è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦-2>ä½¿ç”¨ webroot è‡ªåŠ¨ç”Ÿæˆè¯ä¹¦</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>certbot certonly --webroot -w /home/admin -d example.com -m 455343442@qq.com --agree-tos
</span></span></code></pre></td></tr></table></div></div><h4 id=ç¼–è¾‘-nginx-1>ç¼–è¾‘ <code>Nginx</code></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>vi /etc/nginx/conf.d/ftp.conf
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=l>server {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>listen 80;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>listen [::]:80;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>root /home/admin;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>server_name  ftp.bore.vip;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>listen 443 ssl;</span><span class=w> </span><span class=c># managed by Certbot</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># RSA certificate</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>ssl_certificate /etc/letsencrypt/live/ftp.bore.vip/fullchain.pem;</span><span class=w> </span><span class=c># managed by Certbot</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>ssl_certificate_key /etc/letsencrypt/live/ftp.bore.vip/privkey.pem;</span><span class=w> </span><span class=c># managed by Certbot</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Redirect non-https traffic to https</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>if ($scheme != &#34;https&#34;) {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>return 301 https://$host$request_uri;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>}<span class=w> </span><span class=c># managed by Certbot</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>location / {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>root /home/admin;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>autoindex on;                        </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>autoindex_exact_size off;            </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>autoindex_localtime on;              </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>charset utf-8,gbk;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>}<span class=w>
</span></span></span><span class=line><span class=cl>}<span class=w>
</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>systemctl restart nginx
</span></span></code></pre></td></tr></table></div></div><h4 id=è‡ªåŠ¨ç»­æœŸ-2>è‡ªåŠ¨ç»­æœŸ</h4><p>Letâ€™s Encrypt çš„è¯ä¹¦æœ‰æ•ˆæœŸä¸º 90 å¤©ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡ crontab å®šæ—¶è¿è¡Œå‘½ä»¤æ›´æ–°è¯ä¹¦ã€‚</p><p>å…ˆè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æµ‹è¯•è¯ä¹¦çš„è‡ªåŠ¨æ›´æ–°ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>certbot renew --dry-run
</span></span></code></pre></td></tr></table></div></div><p>å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œå°±å¯ä»¥ç¼–è¾‘ crontab å®šæœŸè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>crontab -e
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>30 2 * */2 * /usr/bin/certbot renew --quiet &amp;&amp; /bin/systemctl restart nginx
</span></span></code></pre></td></tr></table></div></div><p>æŸ¥çœ‹è¯ä¹¦æœ‰æ•ˆæœŸçš„å‘½ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>openssl x509 -noout -dates -in /etc/letsencrypt/live/ftp.bore.vip/cert.pem
</span></span></code></pre></td></tr></table></div></div><h2 id=debianæ¸…ç†åƒåœ¾>Debianæ¸…ç†åƒåœ¾</h2><p>chatgptæé—®ï¼š<code>å†™ä¸€ä¸ªè„šæœ¬ï¼Œä¸€ä¸ªæ˜ŸæœŸè‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡ï¼Œå¸®æˆ‘æ¸…ç†Debianåƒåœ¾ï¼Œç”¨vi</code></p><p>âœ… ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæ¸…ç†è„šæœ¬ï¼ˆç”¨ viï¼‰</p><p>è¿è¡Œï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo vi /usr/local/bin/clean_debian.sh
</span></span></code></pre></td></tr></table></div></div><p>åœ¨æ–‡ä»¶é‡Œç²˜è´´ä¸‹é¢è„šæœ¬å†…å®¹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ¸…ç† APT ç¼“å­˜</span>
</span></span><span class=line><span class=cl>apt-get clean
</span></span><span class=line><span class=cl>apt-get autoclean
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åˆ é™¤ä¸éœ€è¦çš„ä¾èµ–åŒ…</span>
</span></span><span class=line><span class=cl>apt-get autoremove -y
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å‹ç¼© journalctl æ—¥å¿—åˆ° 100M</span>
</span></span><span class=line><span class=cl>journalctl --vacuum-size<span class=o>=</span>100M
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ¸…ç†ä¸´æ—¶æ–‡ä»¶å¤¹</span>
</span></span><span class=line><span class=cl>rm -rf /tmp/*
</span></span><span class=line><span class=cl>rm -rf /var/tmp/*
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Docker æ¸…ç†ï¼ˆå¯é€‰ï¼Œå¦‚æœä½ ä¸ç”¨ Docker å¯åˆ é™¤è¿™æ®µï¼‰</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nb>command</span> -v docker &gt;/dev/null 2&gt;<span class=p>&amp;</span>1<span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    docker system prune -f
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¿å­˜å¹¶é€€å‡ºï¼š
<strong>æŒ‰ä¸‹ <code>ESC</code> â†’ è¾“å…¥ <code>:wq</code> â†’ å›è½¦</strong></p><hr><p>âœ… ç¬¬äºŒæ­¥ï¼šç»™è„šæœ¬æ‰§è¡Œæƒé™</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo chmod +x /usr/local/bin/clean_debian.sh
</span></span></code></pre></td></tr></table></div></div><hr><p>âœ… ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®æ¯å‘¨è‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡ï¼ˆcronï¼‰</p><p>ç¼–è¾‘ crontabï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo crontab -e
</span></span></code></pre></td></tr></table></div></div><p>åŠ å…¥ä¸‹é¢ä¸€è¡Œï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>0 3 * * 0 /usr/local/bin/clean_debian.sh &gt;/dev/null 2&gt;&amp;1
</span></span></code></pre></td></tr></table></div></div><p>è¯´æ˜ï¼š</p><ul><li>æ¯å‘¨æ—¥å‡Œæ™¨ 03:00 è‡ªåŠ¨æ¸…ç†ä¸€æ¬¡</li><li>è¾“å‡ºå…¨éƒ¨éšè—ï¼ˆä¿æŒç³»ç»Ÿå¹²å‡€ï¼‰</li></ul><hr><p>âœ… ä¸€é”®æµ‹è¯•è„šæœ¬æ˜¯å¦æ­£å¸¸ç”Ÿæ•ˆ</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo /usr/local/bin/clean_debian.sh
</span></span></code></pre></td></tr></table></div></div><h2 id=é™„å½•>é™„å½•</h2><h3 id=vsftpdconfæ³¨é‡Š><code>vsftpd.conf</code>æ³¨é‡Š</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span><span class=lnt>84
</span><span class=lnt>85
</span><span class=lnt>86
</span><span class=lnt>87
</span><span class=lnt>88
</span><span class=lnt>89
</span><span class=lnt>90
</span><span class=lnt>91
</span><span class=lnt>92
</span><span class=lnt>93
</span><span class=lnt>94
</span><span class=lnt>95
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># å…¨åŸŸæ€§é…ç½®</span>
</span></span><span class=line><span class=cl><span class=c1># æœ¬åœ°ç³»çµ±ä½¿ç”¨è€…å¯«å…¥è¨±å¯æ¬Šï¼›</span>
</span></span><span class=line><span class=cl><span class=nv>write_enable</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æœ¬åœ°ä½¿ç”¨è€…å»ºç«‹æª”æ¡ˆåŠç›®éŒ„é è¨­è¨±å¯æ¬Šæ©ç¢¼ï¼›</span>
</span></span><span class=line><span class=cl><span class=nv>local_umask</span><span class=o>=</span><span class=m>022</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åˆ—å°ç›®éŒ„é¡¯ç¤ºè³‡è¨Šï¼Œé€šå¸¸ç”¨æ–¼ä½¿ç”¨è€…ç¬¬ä¸€æ¬¡è¨ªå•ç›®éŒ„æ™‚ï¼Œè³‡è¨Šæç¤ºï¼›</span>
</span></span><span class=line><span class=cl><span class=nv>dirmessage_enable</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å•Ÿç”¨ä¸Šå‚³/ä¸‹è¼‰æ—¥èªŒè¨˜éŒ„ï¼› </span>
</span></span><span class=line><span class=cl><span class=nv>xferlog_enable</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ—¥èªŒæª”æ¡ˆå°‡æ ¹æ“šxferlogçš„æ¨™æº–æ ¼å¼å¯«å…¥ï¼›</span>
</span></span><span class=line><span class=cl><span class=nv>xferlog_std_format</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æŒ‡å®š log è·¯å¾‘</span>
</span></span><span class=line><span class=cl><span class=nv>xferlog_file</span><span class=o>=</span>/var/log/vsftpd.log
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># FTPä½¿ç”¨20åŸ é€²è¡Œè³‡æ–™å‚³è¼¸ï¼›</span>
</span></span><span class=line><span class=cl><span class=nv>connect_from_port_20</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Vsftpdä¸ä»¥ç¨ç«‹çš„æœå‹™å•Ÿå‹•ï¼Œé€šéXinetdæœå‹™ç®¡ç†ï¼Œå»ºè­°æ”¹æˆYESï¼›</span>
</span></span><span class=line><span class=cl><span class=nv>listen</span><span class=o>=</span>NO
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å•Ÿç”¨IPV6ç›£è½ï¼›</span>
</span></span><span class=line><span class=cl><span class=nv>listen_ipv6</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç™»å…¥FTPä¼ºæœå™¨ï¼Œä¾æ“š/etc/pam.d/vsftpdä¸­å…§å®¹é€²è¡Œèªè­‰ï¼›</span>
</span></span><span class=line><span class=cl><span class=nv>pam_service_name</span><span class=o>=</span>vsftpd
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Vsftpd.user_listå’Œftpusersé…ç½®æª”æ¡ˆè£¡ä½¿ç”¨è€…ç¦æ­¢è¨ªå•FTPï¼›</span>
</span></span><span class=line><span class=cl><span class=nv>userlist_enable</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># è¨­å®švsftpdèˆ‡tcp wrapperçµåˆé€²è¡Œä¸»æ©Ÿçš„è¨ªå•æ§åˆ¶ï¼ŒVsftpdä¼ºæœå™¨æª¢æŸ¥/etc/hosts.allow å’Œ/etc/hosts.denyä¸­çš„è¨­å®šï¼Œä¾†æ±ºå®šè«‹æ±‚é€£ç·šçš„ä¸»æ©Ÿï¼Œæ˜¯å¦å…è¨±è¨ªå•è©²FTPä¼ºæœå™¨ã€‚</span>
</span></span><span class=line><span class=cl><span class=nv>tcp_wrappers</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># é™åˆ¶ä½¿ç”¨è€…éƒ½åªèƒ½è®€å–å®¶ç›®éŒ„</span>
</span></span><span class=line><span class=cl><span class=nv>chroot_local_user</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># é€™æ¨£å­æ‰å¯ä»¥æ­£å¸¸è®€å–å®¶ç›®éŒ„</span>
</span></span><span class=line><span class=cl><span class=nv>allow_writeable_chroot</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å¸³è™Ÿæ¸…å–®è·¯å¾‘</span>
</span></span><span class=line><span class=cl><span class=nv>userlist_file</span><span class=o>=</span>/etc/vsftpd.userlist
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç™½åå–®ï¼Œæ‹’çµ•é™¤æª”æ¡ˆä¸­çš„ä½¿ç”¨è€…å¤–çš„ä½¿ç”¨è€…FTPè¨ªå•</span>
</span></span><span class=line><span class=cl><span class=nv>userlist_deny</span><span class=o>=</span>NO
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ˜¯å¦ä½¿ç”¨æœ¬åœ°æ™‚é–“ï¼Ÿvsftpd é è¨­ä½¿ç”¨ GMT æ™‚é–“(æ ¼æ—å¨æ²»)ï¼Œæ‰€ä»¥æœƒæ¯”å°ç£æ™š 8 å°æ™‚ï¼Œå»ºè­°è¨­å®šç‚º YES å§</span>
</span></span><span class=line><span class=cl><span class=nv>use_localtime</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># é€™å€‹é¸é …å¿…é ˆæŒ‡å®šä¸€å€‹ç©ºçš„è³‡æ–™å¤¾ä¸”ä»»ä½•ç™»å…¥è€…éƒ½ä¸èƒ½æœ‰å¯«å…¥çš„æ¬Šé™ï¼Œç•¶vsftpd ä¸éœ€è¦file system çš„æ¬Šé™æ™‚ï¼Œå°±æœƒå°‡ä½¿ç”¨è€…é™åˆ¶åœ¨æ­¤è³‡æ–™å¤¾ä¸­ã€‚é è¨­å€¼ç‚º/usr/share/empty</span>
</span></span><span class=line><span class=cl><span class=nv>secure_chroot_dir</span><span class=o>=</span>/var/run/vsftpd/empty
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># é€™æ¨£å­æœ‰å¯èƒ½åœ¨å‚³ä¸­æ–‡ä¸æœƒæœ‰äº‚ç¢¼</span>
</span></span><span class=line><span class=cl><span class=nv>syslog_enable</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åŒä¸€å€‹IPæœ€å¤§åŒæ™‚ä¸‹è¼‰äººæ•¸ï¼Œé è¨­æ²’æœ‰é™åˆ¶</span>
</span></span><span class=line><span class=cl><span class=nv>max_per_ip</span><span class=o>=</span><span class=m>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># é€£ç·šé–’ç½®æ™‚é–“è¶…180ç§’å°±ä¸­æ–·ï¼Œå–®ä½ä»¥second</span>
</span></span><span class=line><span class=cl><span class=nv>accept_timeout</span><span class=o>=</span>180<span class=o>(</span>DEFAULT:60<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># è³‡æ–™å‚³é€é–’ç½®æ™‚é–“è¶…180ç§’å°±ä¸­æ–·ï¼Œå–®ä½ä»¥second</span>
</span></span><span class=line><span class=cl><span class=nv>data_connection_timeout</span><span class=o>=</span>180<span class=o>(</span>DEFAULT:YES<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æœ¬åœ°ä½¿ç”¨è€…é…ç½®</span>
</span></span><span class=line><span class=cl><span class=c1># å•Ÿç”¨æœ¬åœ°ç³»çµ±ä½¿ç”¨è€…è¨ªå•ï¼›</span>
</span></span><span class=line><span class=cl><span class=nv>local_enable</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æœ¬åœ°ä½¿ç”¨è€…å»ºç«‹æª”æ¡ˆåŠç›®éŒ„é è¨­è¨±å¯æ¬Šæ©ç¢¼ï¼›</span>
</span></span><span class=line><span class=cl><span class=nv>local_umask</span><span class=o>=</span><span class=m>022</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ä¿®æ”¹æœ¬åœ°ä½¿ç”¨è€…ç™»å…¥æ™‚è¨ªå•çš„ç›®éŒ„è·¯å¾‘</span>
</span></span><span class=line><span class=cl><span class=nv>local_root</span><span class=o>=</span>/home/ftp
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åŒ¿åä½¿ç”¨è€…è¨ªå•é…ç½®ï¼ˆæœ€å¤§è¨±å¯æ¬Šï¼‰</span>
</span></span><span class=line><span class=cl><span class=c1># é–‹å•ŸåŒ¿åä½¿ç”¨è€…è¨ªå•ï¼›</span>
</span></span><span class=line><span class=cl><span class=nv>anonymous_enable</span><span class=o>=</span>NO
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åŒ¿åä½¿ç”¨è€…ä¸Šå‚³æª”æ¡ˆçš„umaskå€¼</span>
</span></span><span class=line><span class=cl><span class=nv>anon_umask</span><span class=o>=</span><span class=m>022</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å…è¨±åŒ¿åä½¿ç”¨è€…ä¸Šå‚³æª”æ¡ˆ</span>
</span></span><span class=line><span class=cl><span class=nv>anon_upload_enable</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å…è¨±åŒ¿åä½¿ç”¨è€…å»ºç«‹ç›®éŒ„</span>
</span></span><span class=line><span class=cl><span class=nv>anon_mkdir_write_enable</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å…è¨±åŒ¿åä½¿ç”¨è€…ä¿®æ”¹ç›®éŒ„åç¨±æˆ–åˆªé™¤ç›®éŒ„</span>
</span></span><span class=line><span class=cl><span class=nv>anon_other_write_enable</span><span class=o>=</span>YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ä¿®æ”¹åŒ¿åä½¿ç”¨è€…ç™»å…¥æ™‚è¨ªå•çš„ç›®éŒ„è·¯å¾‘</span>
</span></span><span class=line><span class=cl><span class=nv>anon_root</span><span class=o>=</span>/data/ftpdata
</span></span></code></pre></td></tr></table></div></div><h2 id=å‚è€ƒé“¾æ¥>å‚è€ƒé“¾æ¥</h2><ul><li><a class=link href=https://www.uskvm.com/p/32.html target=_blank rel=noopener>1.è§£å†³ Debian ä¸‹ä½¿ç”¨ vi æ—¶æ–¹å‘é”®ä¹±ç ï¼Œé€€æ ¼é”®ä¸èƒ½ä½¿ç”¨çš„é—®é¢˜</a></li><li><a class=link href=https://shixiongfei.com/debian-vsftpd.html target=_blank rel=noopener>2.Debianå®‰è£…vsftpd</a></li><li><a class=link href="https://blog.fish2bird.com/?p=706" target=_blank rel=noopener>3.Debianä¸‹vsftpdè®¾ç½®å…è®¸rootç™»å½•åˆ†æ</a></li><li><a class=link href=https://zhuanlan.zhihu.com/p/83730878 target=_blank rel=noopener>4.puttyä¿å­˜ç™»å½•è´¦å·å’Œå¯†ç </a></li><li><a class=link href=https://www.myfreax.com/how-to-setup-ftp-server-with-vsftpd-on-debian-9/ target=_blank rel=noopener>5.å¦‚ä½•åœ¨Debian 9ä¸Šä½¿ç”¨VSFTPDè®¾ç½®FTPæœåŠ¡å™¨</a></li><li><a class=link href=https://cloud.tencent.com/developer/article/1946063 target=_blank rel=noopener>6.Ubuntuå®‰è£…Transmissionå¹¶ç¾åŒ–WEB UIå®æ“æ•™ç¨‹</a></li><li><a class=link href=https://www.nginx.com/blog/using-free-ssltls-certificates-from-lets-encrypt-with-nginx/ target=_blank rel=noopener>7.Update: Using Free Letâ€™s Encrypt SSL/TLS Certificates with NGINX</a></li><li>8.<a class=link href=https://pa.ci/210.html target=_blank rel=noopener>Debian 11å®‰è£…qbittorrent-noxå¹¶è®¾ç½®Nginxåä»£</a></li><li><a class=link href=https://zxqme.com/archives/143/ target=_blank rel=noopener>9.Debianå®‰è£…qbittorrent-nox</a></li></ul></section><footer class=article-footer><style>.article-edit-container a{-webkit-tap-highlight-color:transparent!important;outline:none!important}.article-edit-container a:hover{text-decoration:underline!important}.article-edit-container{border-top:1px dashed var(--body-background);padding-top:15px;margin-top:20px;width:100%;display:flex;align-items:center;gap:10px;flex-wrap:wrap}</style><section class=article-tags><style>.article-tags{margin-top:25px;margin-bottom:15px;display:flex;flex-wrap:wrap;gap:12px;align-items:center}.article-tags .tag-link{display:inline-flex!important;align-items:center!important;padding:4px 16px!important;background-color:rgba(30,144,255,8%)!important;color:#1e90ff!important;border-radius:999px!important;text-decoration:none!important;font-size:14px!important;font-weight:500!important;border:1px solid rgba(30,144,255,.2)!important;transition:all .3s ease!important}.article-tags .tag-link::before{content:"#"!important;margin-right:4px!important;color:inherit!important;font-weight:700!important}.article-tags .tag-link:hover{background-color:#1e90ff!important;color:#fff!important;transform:translateY(-3px)!important;box-shadow:0 4px 12px rgba(30,144,255,.35)!important;border-color:#1e90ff!important}@media(prefers-color-scheme:dark){.article-tags .tag-link{background-color:rgba(88,166,255,.15)!important;color:#58a6ff!important;font-weight:600!important;border-color:rgba(88,166,255,.3)!important}.article-tags .tag-link:hover{background-color:#1e90ff!important;color:#fff!important;box-shadow:0 4px 15px rgba(30,144,255,.4)!important}}</style><a href=/tags/linux/ class=tag-link title=æŸ¥çœ‹æ ‡ç­¾ï¼šLinux>Linux</a></section><section class=article-edit-container><a style=color:#1e90ff;font-size:14px;text-decoration:none;display:flex;align-items:center;gap:8px href=https://github.com/iwyang/iwyang.github.io/edit/develop/content/post/Debian%e4%bd%bf%e7%94%a8%e5%a4%87%e5%bf%98/index.md target=_blank rel="noopener noreferrer" title="å‰å¾€ GitHub ç¼–è¾‘æ­¤é¡µ"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:-2px"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
<span>ç¼–è¾‘æ­¤é¡µ</span>
</a><span style=font-size:14px;color:#1e90ff>|</span><a href=https://github.com/iwyang/iwyang.github.io/commit/26a215ebb8fca78d98f384856b8ab5e0e2056333 target=_blank rel="noopener noreferrer" title="Commit Hash: #26a215e" style=color:#1e90ff;font-weight:400;text-decoration:none;font-size:14px>
#26a215e</a></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-content><div class="flex article-list--tile"><article><a href=/archives/c6592a10/><div class=article-details><h2 class=article-title>AlistæŒ‚è½½ç½‘ç›˜</h2></div></a></article><article><a href=/archives/26d4b8da/><div class=article-details><h2 class=article-title>debian 10å®‰è£…xfceæ¡Œé¢å’Œé…ç½®vncå’Œwine</h2></div></a></article><article><a href=/archives/964093b3/><div class=article-details><h2 class=article-title>linuxåˆ©ç”¨crontabè®¾ç½®å®šæ—¶ä»»åŠ¡</h2></div></a></article><article><a href=/archives/e0c4249b/><div class=article-details><h2 class=article-title>å½»åº•å¸è½½onedrive</h2></div></a></article><article><a href=/archives/12dd937c/><div class=article-details><h2 class=article-title>åˆ©ç”¨Github Actionsè‡ªåŠ¨åŒæ­¥Fork&&è‡ªåŠ¨åŒæ­¥Releases</h2></div></a></article></div></div></aside><script src=//registry.npmmirror.com/twikoo/1.6.45/files/dist/twikoo.min.js></script><div id=tcomment></div><style>.twikoo{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}:root[data-scheme=dark]{--twikoo-body-text-color-main:rgba(255, 255, 255, 0.9);--twikoo-body-text-color:rgba(255, 255, 255, 0.7)}.twikoo .el-input-group__prepend,.twikoo .tk-action-icon,.twikoo .tk-submit-action-icon,.twikoo .tk-time,.twikoo .tk-comments-no,.twikoo .tk-comments-count{color:var(--twikoo-body-text-color)}.twikoo .el-input__inner,.twikoo .el-textarea__inner,.twikoo .tk-preview-container,.twikoo .tk-content,.twikoo .tk-nick,.twikoo .tk-send,.twikoo .tk-comments-no,.twikoo .el-input__count,.twikoo .tk-submit-action-icon{color:var(--twikoo-body-text-color-main)!important}.twikoo .el-button{color:var(--twikoo-body-text-color)!important}.twikoo .el-input__count{color:var(--twikoo-body-text-color)!important}.OwO .OwO-body{background-color:var(--body-background)!important;color:var(--body-text-color)!important}</style><script>twikoo.init({envId:"https://t.bore.vip",el:"#tcomment"})</script><footer class=site-footer><style>.site-footer .running-time,.site-footer .powerby{font-size:14px!important;line-height:1.6!important;margin:10px 0!important;display:block!important;font-weight:400!important}.site-footer .running-time,.site-footer .running-time *,[data-scheme=dark] .site-footer .running-time,[data-scheme=dark] .site-footer .running-time *{color:#1e90ff!important}.site-footer .powerby,.site-footer .powerby *{color:var(--sys-color-text-muted)!important}[data-scheme=dark] .site-footer .powerby,[data-scheme=dark] .site-footer .powerby *{color:rgba(255,255,255,.7)!important}.footer-separator{margin:0 6px!important;font-size:14px!important}.site-footer .running-time .footer-separator{color:#1e90ff!important;opacity:1!important}.site-footer .powerby .footer-separator{color:inherit!important}.site-footer a{text-decoration:none!important;cursor:pointer}.site-footer a:hover{text-decoration:underline!important}.site-footer .powerby a:hover{color:var(--accent-color)!important}</style><section class=copyright>&copy;
2020 -
2026 Bore's Notes</section><section class=running-time>æœ€è¿‘æ›´æ–°ï¼š<span id=site-last-update data-time=2026-02-25T15:12:55Z title="2026-02-25 15:12">--</span><span class=footer-separator>|</span>
<a href=https://github.com/iwyang/iwyang.github.io/commit/c8fa33cd0fcb8644deb6256126f19b18ecb5f3ef target=_blank rel=noopener title="Commit Hash: c8fa33c">#c8fa33c</a></section><section class=powerby>ä½¿ç”¨ <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> æ„å»º
<span class=footer-separator>|</span>
ä¸»é¢˜ <a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=4.0.0>Stack</a> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><script>(function(){var e,t,n,o,i,a,r,c,l,d,s=document.getElementById("site-last-update");s&&(n=new Date(s.getAttribute("data-time")),o=new Date,e=(o-n)/1e3,i=n.getFullYear(),a=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0"),c=String(n.getHours()).padStart(2,"0"),l=String(n.getMinutes()).padStart(2,"0"),d=i+"-"+a+"-"+r+" "+c+":"+l,s.setAttribute("title",d),t="",e<60?t="åˆšåˆš":e<3600?t=Math.floor(e/60)+" åˆ†é’Ÿå‰":e<86400?t=Math.floor(e/3600)+" å°æ—¶å‰":e<2592e3?t=Math.floor(e/86400)+" å¤©å‰":e<31536e3?t=Math.floor(e/2592e3)+" ä¸ªæœˆå‰":t=Math.floor(e/31536e3)+" å¹´å‰",s.innerText=t)})()</script><script type=module>
    import gallery from '\/ts\/gallery.js';

    const articleContent = document.querySelector('.article-content');
    const shouldLoad = articleContent && (articleContent.querySelectorAll('figure').length > 0 || articleContent.querySelectorAll('img.gallery-image').length > 0);
    
    if (shouldLoad) {
        gallery(articleContent);

        const PhotoSwipeLightbox = (await import("https:\/\/cdn.jsdelivr.net\/npm\/photoswipe@5.4.4\/dist\/photoswipe-lightbox.esm.min.js")).default;
        const styleHref = "https:\/\/cdn.jsdelivr.net\/npm\/photoswipe@5.4.4\/dist\/photoswipe.css";

        const styleTag = document.createElement('link');
        styleTag.rel = 'stylesheet';
        styleTag.href = styleHref;
        document.head.appendChild(styleTag);

        const lightbox = new PhotoSwipeLightbox({
            gallerySelector: '.article-content',
            childSelector: 'figure a.image-link',
            pswpModule: () => import("https:\/\/cdn.jsdelivr.net\/npm\/photoswipe@5.4.4\/dist\/photoswipe.esm.min.js")
        });
        lightbox.init();
    }
</script></main></div><script type=text/javascript src=/ts/main.acaf849f2b273f6a8368a58b001f336738d0c948d92e79b116467d0c7515f932.js defer></script><script>document.addEventListener("DOMContentLoaded",()=>{const f=".search-result--list",m="article",u=".search-result--title",a=".search-form input",l=document.createElement("style");l.textContent='.bore-custom-header { display: flex; align-items: center !important; flex-wrap: wrap !important; gap: 15px !important; margin-bottom: 24px !important; padding-bottom: 8px !important; border-bottom: 1px dashed rgba(128, 128, 128, 0.15); min-height: 42px; }.bore-hidden { display: none !important; }.bore-search-stats { display: none !important; }.search-filter-tabs { --tab-bg: #ffffff; --tab-border: #e2e8f0; --tab-text: #64748b; --tab-active-bg: #1e90ff; --tab-active-text: #ffffff; --count-bg: #f1f5f9; --count-text: #64748b; --count-active-bg: #ffffff; --count-active-text: #1e90ff; display: flex; align-items: center; gap: 10px; margin-left: 0; }[data-scheme="dark"] .search-filter-tabs { --tab-bg: rgba(255, 255, 255, 0.04); --tab-border: rgba(255, 255, 255, 0.15); --tab-text: #a1a1aa; --tab-active-bg: #1e90ff; --tab-active-text: #ffffff; --count-bg: rgba(255, 255, 255, 0.12); --count-text: #e4e4e7; --count-active-bg: #ffffff; --count-active-text: #1e90ff; }.filter-tab { cursor: pointer; padding: 5px 12px 5px 16px; border-radius: 50px; font-size: 1.35rem; font-weight: 500; color: var(--tab-text); background: var(--tab-bg); border: 1px solid var(--tab-border); transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1); display: inline-flex; align-items: center; gap: 8px; user-select: none; line-height: 1.2; }.filter-tab:hover { border-color: #1e90ff; color: #1e90ff; background: rgba(30, 144, 255, 0.05); }.filter-tab:active { transform: scale(0.96); opacity: 0.8; }.filter-tab.active { background: var(--tab-active-bg); border-color: var(--tab-active-bg); color: var(--tab-active-text); font-weight: 600; box-shadow: 0 4px 12px rgba(30, 144, 255, 0.3); pointer-events: none; }.filter-count { font-size: 1.15rem; padding: 3px 8px; border-radius: 50px; background: var(--count-bg); color: var(--count-text); font-weight: 600; min-width: 24px; text-align: center; }.filter-tab.active .filter-count { background: var(--count-active-bg); color: var(--count-active-text); }.bore-search-empty-state { grid-column: 1 / -1; width: 100%; min-height: 40vh; display: flex; flex-direction: column; align-items: center; justify-content: center; animation: fadeIn 0.4s ease; }.bore-search-empty-icon-wrapper { color: var(--body-text-color); opacity: 0.4; transition: all 0.3s ease; margin-bottom: 24px; }[data-scheme="dark"] .bore-search-empty-icon-wrapper { color: #ffffff !important; opacity: 0.75 !important; }.bore-search-empty-icon { width: 80px; height: 80px; stroke-width: 1.2; }.bore-search-empty-text { font-size: 1.6rem; font-weight: 500; color: var(--body-text-color); opacity: 0.8; letter-spacing: 0.5px; }@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }.search-result--title { display: none !important; }',document.head.appendChild(l);let e=sessionStorage.getItem("bore-search-filter")||"all",r,t=!1;const c=new MutationObserver(()=>{clearTimeout(r),r=setTimeout(()=>{d()},20)}),s=()=>{if(t)return;const e=document.querySelector(".search-wrapper")||document.body;e&&(c.observe(e,{childList:!0,subtree:!0}),t=!0)},i=()=>{if(!t)return;c.disconnect(),t=!1};function d(){i(),h(),s()}const n=document.querySelector(a);n&&n.addEventListener("input",()=>{if(e!=="all"){e="all",sessionStorage.setItem("bore-search-filter","all"),i();const t=document.querySelector(".search-filter-tabs");if(t){t.querySelectorAll(".filter-tab").forEach(e=>e.classList.remove("active"));const e=t.querySelector("[data-type='all']");e&&e.classList.add("active")}o(),s()}}),window.addEventListener("pageshow",t=>{t.persisted&&(e=sessionStorage.getItem("bore-search-filter")||"all",d())}),s();function h(){const r=document.querySelector(u),a=document.querySelector(".search-result--list");if(!r||!n||!a)return;const c=n.value.trim()==="";let t=document.querySelector(".bore-custom-header");if(!t&&!c){t=document.createElement("div"),t.className="bore-custom-header bore-hidden";const r=document.createElement("div");r.className="bore-search-stats";const n=document.createElement("div");n.className="search-filter-tabs";const c=[{type:"all",label:"å…¨éƒ¨",id:"count-all"},{type:"article",label:"æ–‡ç« ",id:"count-article"},{type:"shuoshuo",label:"è¯´è¯´",id:"count-shuoshuo"}];n.innerHTML=c.map(t=>{const n=t.type===e?" active":"";return'<div class="filter-tab'+n+'" data-type="'+t.type+'">'+t.label+' <span class="filter-count" id="'+t.id+'">0</span></div>'}).join(""),t.appendChild(r),t.appendChild(n),a.parentNode.insertBefore(t,a),n.querySelectorAll(".filter-tab").forEach(t=>{t.addEventListener("click",t=>{if(t.stopPropagation(),e===t.currentTarget.dataset.type)return;i(),n.querySelectorAll(".filter-tab").forEach(e=>e.classList.remove("active")),t.currentTarget.classList.add("active"),e=t.currentTarget.dataset.type,sessionStorage.setItem("bore-search-filter",e),o(a),s()})})}if(t){const e=t.querySelector(".bore-search-stats");if(e&&r.textContent){const t=r.innerHTML.split("ï¼ˆ")[0].split("(")[0].trim();e.innerHTML!==t&&(e.innerHTML=t)}const n=a.querySelectorAll(m).length,s=c||n===0;s?t.classList.add("bore-hidden"):t.classList.remove("bore-hidden")}o(a)}function o(t){const s=t||document.querySelector(".search-result--list");if(!s)return;const d=s.querySelectorAll("article");let o=0,i=0,r=0;d.forEach(t=>{const a=t.querySelector(".article-title");if(!a)return;const s=a.textContent.includes("ğŸ’¬");o++,s?r++:i++;let n="";e==="article"?n=s?"none":"":e==="shuoshuo"&&(n=s?"":"none"),t.style.display!==n&&(t.style.display=n)});const c=(e,t)=>{const n=document.getElementById(e);n&&n.textContent!==String(t)&&(n.textContent=String(t))};c("count-all",o),c("count-article",i),c("count-shuoshuo",r);let n=document.querySelector(".bore-search-empty-state");const u=document.querySelector(a)?.value.trim()==="";let l=!1;!u&&o>0&&(e==="article"&&i===0&&(l=!0),e==="shuoshuo"&&r===0&&(l=!0)),l?n||(n=document.createElement("div"),n.className="bore-search-empty-state",n.innerHTML='<div class="bore-search-empty-icon-wrapper"><svg class="bore-search-empty-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="8" y1="11" x2="14" y2="11"></line></svg></div><div class="bore-search-empty-text">è¯¥åˆ†ç±»ä¸‹æš‚æ— åŒ¹é…å†…å®¹</div>',s.appendChild(n)):n&&n.remove()}})</script></body></html>