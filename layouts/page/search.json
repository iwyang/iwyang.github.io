{{- $pages := where .Site.RegularPages "Type" "in" .Site.Params.mainSections -}}
{{- $result := slice -}}

{{- range $pages -}}
    {{- $title := .Title -}}
    {{- $permalink := .RelPermalink -}}
    {{- $type := "article" -}}

    {{- if eq .Section "shuoshuo" -}}
        {{- $type = "shuoshuo" -}}
        {{- if .Title -}}
            {{- $title = print "ðŸ’¬ " .Title -}}
        {{- else -}}
            {{- $title = print "ðŸ’¬ " (.Plain | truncate 15) -}}
        {{- end -}}
    {{- end -}}

    {{- $data := dict "title" $title "date" .Date "permalink" $permalink "content" (.Plain) "type" $type -}}

    {{- $image := partial "helper/image" (dict "Image" .Params.image "Resources" .Resources) -}}
    {{- if $image -}}
        {{- $data = merge $data (dict "image" $image.Permalink) -}}
    {{- end -}}

    {{- $result = $result | append $data -}}
{{- end -}}

{{ jsonify $result }}
